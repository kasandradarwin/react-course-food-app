try{window.performance.mark("@atlaskit-internal_renderer-node_Media.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["@atlaskit-internal_renderer-node_Media"],{"+Nfr":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=async e=>new Promise(((t,n)=>{const i=URL.createObjectURL(e),r=document.createElement("video");r.preload="metadata",r.src=i,r.muted=!0,r.addEventListener("loadedmetadata",(function e(){r.removeEventListener("loadedmetadata",e),t({width:r.videoWidth,height:r.videoHeight}),URL.revokeObjectURL(i)})),r.addEventListener("error",(()=>{n(new Error("failed to load video")),URL.revokeObjectURL(i)}))}))},"/Jq5":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));class i extends n("31bI").a{constructor(e,t){super(e),this.reason=e,this.innerError=t}get attributes(){const{reason:e,innerError:t}=this;return{reason:e,innerError:t}}}function r(e){return e instanceof i}},"/LR1":function(e,t,n){
"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n("rfFC");t.tap=function(e,t,n){return function(i){return i.lift(new o(e,t,n))}};var o=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.nextOrObserver,this.error,this.complete))},e}(),a=function(e){function t(t,n,i,o){e.call(this,t);var a=new r.Subscriber(n,i,o);a.syncErrorThrowable=!0,this.add(a),this.safeSubscriber=a}return i(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){
var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(r.Subscriber)},"/nbe":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("CBQ3");const r={on(e,t){i.mediaState.eventEmitter&&i.mediaState.eventEmitter.on(e,t)},off(e,t){i.mediaState.eventEmitter&&i.mediaState.eventEmitter.off(e,t)},emit(e,t){if(i.mediaState.eventEmitter)return i.mediaState.eventEmitter.emit(e,t)}}},"10Uv":function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return i(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){
return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,i):t.flush(this)},t}(n("1Re5").AsyncAction);t.QueueAction=r},"1Re5":function(t,n,i){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=i("tSeh"),a=function(t){function n(e,n){t.call(this,e,n),this.scheduler=e,this.pending=!1,this.work=n}return r(n,t),n.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},n.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),
o.root.setInterval(e.flush.bind(e,this),n)},n.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;o.root.clearInterval(t)},n.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(t,n){var i=!1,r=void 0;try{this.work(t)}catch(e){i=!0,r=!!e&&e||new Error(e)}if(i)return this.unsubscribe(),r},n.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},n}(i("C7Jb").Action);n.AsyncAction=a},"1ouX":function(e,t,n){"use strict";var i=n("10Uv"),r=n("9zIo");t.queue=new r.QueueScheduler(i.QueueAction)},"29vY":function(e,t,n){
"use strict";n.d(t,"a",(function(){return i}))
;const i=e=>(e=>["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(e.toLowerCase())>-1)(e)?"archive":Object(n("G9O0").c)(e)||Object(n("txrb").c)(e)?"image":Object(n("G9O0").b)(e)||Object(n("txrb").b)(e)?"doc":Object(n("G9O0").a)(e)||Object(n("txrb").a)(e)?"audio":Object(n("G9O0").e)(e)||Object(n("txrb").f)(e)?"video":"unknown"
},"2euv":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("q1tI"),r=n.n(i);class o extends i.Component{render(){const{dimensions:e,testId:t,featureFlags:i}=this.props,o=Object(n("FD6u").a)(e);return Object(n("CzTa").b)("newCardExperience",i)?r.a.createElement(n("G8n5").b,{"data-testid":t||"media-card-loading","data-test-loading":!0,dimensions:o},r.a.createElement(n("6UK4").a,null)):r.a.createElement(n("G8n5").a,{"data-testid":t||"media-card-loading","data-test-loading":!0,dimensions:o},r.a.createElement(n.n(n("ug4D")).a,{label:"loading",size:"medium"}))}}o.displayName="CardLoading"},"31bI":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}},"34Y/":function(t,n,i){"use strict";i.d(n,"b",(function(){return r})),i.d(n,"c",(function(){return o})),i.d(n,"a",(function(){return s
}));const r=e=>void 0===e,o=(e,t)=>Object.fromEntries(Object.entries(e).filter((([e,n])=>!t(n))));function a(e){return[...Array(2*e)].map((()=>Math.floor(16*Math.random()).toString(16))).join("")}function s(t){var n;let i;if(null!==(n=window)&&void 0!==n&&n.crypto)try{i=Array.from(window.crypto.getRandomValues(new Uint8Array(t))).map((e=>e.toString(16).padStart(2,"0"))).join("")}catch(e){i=a(t)}else i=a(t);return i}},"3gwn":function(e,t,n){"use strict";var i=n("Rkh2");t.fromPromise=i.PromiseObservable.create},"4KWY":function(e,t,n){(function(t){for(var n=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i,i=[],r=0;r<256;r++)i[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var a;if(t.isBuffer(e))a=function(e,t){var n=t||0,r=i;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}(e);else{
if("[object String]"!==Object.prototype.toString.call(e))return!1;a=e}if(a=a.toLowerCase(),!n.test(a))return!1;if(void 0===r)r=o(a);else if(o(a)!==r)return!1;switch(r){case 1:case 2:return!0;case 3:case 4:case 5:return-1!==["8","9","a","b"].indexOf(a.charAt(19));default:throw new Error("Invalid version provided.")}};var o=e.exports.version=function(e){return 0|e.charAt(14)}}).call(this,n("HDXh").Buffer)},"4Nn1":function(e,t,n){"use strict";var i=n("yVsE");t.range=i.RangeObservable.create},"5Jh8":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var i=n("lSNA"),r=n.n(i),o=n("q1tI"),a=n.n(o);class s extends o.Component{render(){const e=Object(n("FD6u").a)(this.props.dimensions);return a.a.createElement(n("G8n5").b,{dimensions:e},this.icon)}get icon(){const{size:e}=this.props;return a.a.createElement(n("RzjI").a,{size:e})}}s.displayName="CardError",r()(s,"defaultProps",{size:"medium"});const c=new Map;class l extends o.Component{
constructor(...e){super(...e),r()(this,"state",{}),r()(this,"saveFileState",(async(e,t)=>{const{collection:i,featureFlags:r}=this.props,o=Object(n("CG+v").a)(t,r),a={collectionName:i};try{const t=await o.file.getCurrentState(e,a);this.setState({fileState:t})}catch(s){}})),r()(this,"renderLoadingCard",(()=>{const{cardDimensions:e}=this.props;return a.a.createElement(n("2euv").a,{dimensions:e})})),r()(this,"getOnCardClickCallback",(e=>{const{eventHandlers:t}=this.props;if(t&&t.media&&t.media.onClick)return(n,i)=>{const r=n.mediaItemDetails&&"video"===n.mediaItemDetails.mediaType;!(e&&r)&&t&&t.media&&t.media.onClick&&t.media.onClick(n,i)}}))}async componentDidMount(){const{rendererContext:e,mediaProvider:t,contextIdentifierProvider:i,id:r,url:o,collection:a}=this.props;if(!t)return;i&&this.setState({contextIdentifierProvider:await i});const s=(await t).viewMediaClientConfig,l=r&&c.has(r)||o&&c.has(o);e&&e.adDoc&&!l&&(e=>e?Object(n("gZGX").a)(e,(e=>"media"===e.type)).reduce(((e,t)=>{
if(t.attrs){const{type:n,url:i,id:r}=t.attrs;"file"===n&&r?e.push({mediaItemType:"file",id:r}):"external"===n&&i&&e.push({mediaItemType:"external-image",dataURI:i,name:i})}return e}),[]):[])(e.adDoc).forEach((e=>{"file"===e.mediaItemType&&e.id===r?c.set(e.id,{...e,collectionName:a}):"external-image"===e.mediaItemType&&c.set(e.dataURI,e)})),this.setState({mediaClientConfig:s}),r&&this.saveFileState(r,s)}UNSAFE_componentWillReceiveProps(e){const{mediaClientConfig:t}=this.state,{id:n}=e;t&&n&&n!==this.props.id&&this.saveFileState(n,t)}componentWillUnmount(){const{id:e,url:t}=this.props;e?c.delete(e):t&&c.delete(t)}renderExternal(e){const{mediaClientConfig:t}=this.state,{cardDimensions:i,resizeMode:r,appearance:o,url:s,imageStatus:l,disableOverlay:u,alt:d,featureFlags:h,ssr:p}=this.props;if("loading"===l||!s)return this.renderLoadingCard();const f={dataURI:s,name:s,mediaItemType:"external-image"};return a.a.createElement(n("xLAl").a,{mediaClientConfig:t,alt:d,identifier:f,dimensions:i,
appearance:o,resizeMode:r,disableOverlay:u,shouldOpenMediaViewer:e,mediaViewerItems:Array.from(c.values()),featureFlags:h,ssr:null==p?void 0:p.mode})}render(){const{contextIdentifierProvider:e,mediaClientConfig:t,fileState:i}=this.state,{id:r,alt:o,type:l,collection:d,occurrenceKey:h,cardDimensions:p,resizeMode:f,rendererAppearance:m,disableOverlay:b,useInlinePlayer:v,originalDimensions:y,shouldOpenMediaViewer:g,featureFlags:w,shouldEnableDownloadButton:x,ssr:O}=this.props,j="mobile"===m,_=!j&&(void 0===v||v),k=this.getOnCardClickCallback(_),I="boolean"==typeof g?g:!j&&!k;if("external"===l)return this.renderExternal(I);if("link"===l)return null;const E=O?O.config:t;if(!E||!r)return this.renderLoadingCard();if(!r||"file"!==l)return a.a.createElement(s,{dimensions:p});const S=e&&e.objectId,C={id:r,mediaItemType:"file",collectionName:d,occurrenceKey:h};return a.a.createElement("div",u({id:r,alt:o,collection:d,contextIdentifierProvider:e,originalDimensions:y,fileState:i
}),a.a.createElement(n("xLAl").a,{identifier:C,alt:o,contextId:S,mediaClientConfig:E,dimensions:p,originalDimensions:y,onClick:k,resizeMode:f,isLazy:!j,disableOverlay:b,useInlinePlayer:_,shouldOpenMediaViewer:I,mediaViewerItems:Array.from(c.values()),featureFlags:w,shouldEnableDownloadButton:x,ssr:null==O?void 0:O.mode}))}}l.displayName="MediaCardInternal";const u=({id:e,alt:t,collection:n,contextIdentifierProvider:i,originalDimensions:r,fileState:o})=>{const a=i&&i.objectId,s=r&&r.width,c=r&&r.height;let l="file",u=1,d="";return o&&"error"!==o.status&&(u=o.size,l=o.name,d=o.mimeType),{"data-context-id":a,"data-type":"file","data-node-type":"media","data-width":s,"data-height":c,"data-id":e,"data-collection":n,"data-file-name":l,"data-file-size":u,"data-file-mime-type":d,"data-alt":t}},d=Object(n("f7y9").a)(l)},"5qIg":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));class i extends n("31bI").a{constructor(e,t,n){super(e),this.reason=e,
this.metadata=t,this.innerError=n}get attributes(){const{reason:e,metadata:{method:t,endpoint:n,mediaRegion:i,mediaEnv:r,attempts:o,clientExhaustedRetries:a,statusCode:s}={},innerError:c}=this;return{reason:e,method:t,endpoint:n,mediaRegion:i,mediaEnv:r,attempts:o,clientExhaustedRetries:a,statusCode:s,innerError:c}}}function r(e){return e instanceof i}},"6LwX":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=async(e,t)=>{switch(e){case"image":{const e=URL.createObjectURL(t);try{return await(e=>new Promise(((t,n)=>{const i=new Image;i.src=e,i.onload=()=>t({width:i.width,height:i.height}),i.onerror=n})))(e)}finally{URL.revokeObjectURL(e)}}case"video":return Object(n("+Nfr").a)(t);default:throw new Error(`Can't extract dimensions from ${e}`)}}},"6fio":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));class i extends n("31bI").a{constructor(e,t){super(e),this.reason=e,this.attempts=t}get attributes(){
const{reason:e,attempts:t}=this;return{reason:e,attempts:t}}}function r(e){return e instanceof i}},"7FAn":function(e,t,n){!function(e,n){!function(e){const t=Symbol("newer"),n=Symbol("older");class i{constructor(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][n]=e[n]),e[n]&&(e[n][t]=e[t]),e[t]=void 0,e[n]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)}assign(e){let i,o=this.limit||Number.MAX_VALUE;this._keymap.clear();let a=e[Symbol.iterator]();for(let s=a.next();!s.done;s=a.next()){let e=new r(s.value[0],s.value[1]);if(this._keymap.set(e.key,e),i?(i[t]=e,e[n]=i):this.oldest=e,i=e,0==o--)throw new Error("overflow")}this.newest=i,this.size=this._keymap.size}get(e){var t=this._keymap.get(e);return t?(this._markEntryAsUsed(t),t.value):void 0}set(e,i){var o=this._keymap.get(e)
;return o?(o.value=i,this._markEntryAsUsed(o),this):(this._keymap.set(e,o=new r(e,i)),this.newest?(this.newest[t]=o,o[n]=this.newest):this.oldest=o,this.newest=o,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[n]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let t=this._keymap.get(e);return t?t.value:void 0}has(e){return this._keymap.has(e)}delete(e){var i=this._keymap.get(e);return i?(this._keymap.delete(i.key),i[t]&&i[n]?(i[n][t]=i[t],i[t][n]=i[n]):i[t]?(i[t][n]=void 0,this.oldest=i[t]):i[n]?(i[n][t]=void 0,this.newest=i[n]):this.oldest=this.newest=void 0,this.size--,i.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new a(this.oldest)}values(){return new s(this.oldest)}entries(){return this}[Symbol.iterator](){return new o(this.oldest)}forEach(e,n){
"object"!=typeof n&&(n=this);let i=this.oldest;for(;i;)e.call(n,i.value,i.key,this),i=i[t]}toJSON(){for(var e=new Array(this.size),n=0,i=this.oldest;i;)e[n++]={key:i.key,value:i.value},i=i[t];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,(n=n[t])&&(e+=" < ");return e}}function r(e,i){this.key=e,this.value=i,this[t]=void 0,this[n]=void 0}function o(e){this.entry=e}function a(e){this.entry=e}function s(e){this.entry=e}e.LRUMap=i,o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}}}(t)}()},
"9zIo":function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(n("xA5P").AsyncScheduler);t.QueueScheduler=r},C7Jb:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n){e.call(this)}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n("NTzu").Subscription);t.Action=r},CBQ3:function(e,t,n){"use strict";n.r(t),n.d(t,"mediaState",(function(){return r})),n.d(t,"isClientBasedAuth",(function(){return o})),n.d(t,"isAsapBasedAuth",(function(){return a})),n.d(t,"authToOwner",(function(){return s}));var i=n("cjKa");const r={
streams:new(n("7FAn").LRUMap)(1e3),stateDeferreds:new Map,eventEmitter:new i.EventEmitter2};function o(e){return!!e.clientId}function a(e){return!!e.asapIssuer}const s=e=>{if(a(e))return e;return{id:e.clientId,baseUrl:e.baseUrl,token:e.token}}},"CG+v":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("pVnL"),r=n.n(i),o=n("q1tI"),a=n.n(o);const s=new Map,c=(e,t)=>{var i;const r=t||"NO_FLAGS";let o=null===(i=s.get(e))||void 0===i?void 0:i.get(r);if(!o){let i=s.get(e);i||(i=new Map,s.set(e,i)),o=new(n("jy5L").a)(e,t),i.set(r,o)}return o},l=(e,t)=>class extends a.a.Component{render(){const{mediaClientConfig:i,...o}=this.props,s=i?c(i,t):(e=>{const t={authProvider:()=>Promise.resolve({clientId:"",token:"",baseUrl:""})};return new(n("jy5L").a)(t,e)})(t);return a.a.createElement(e,r()({},o,{mediaClient:s}))}}},COEO:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("IrFB"),r=n("Dbwp");let o=null
;class a extends n("31bI").a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:i}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:i}}}const s=async e=>(await(async()=>{if(!o)try{const{WorkerHasher:e}=await n.e("3d11798d6017aea5e591aea479417a64").then(n.bind(null,"Odz2"));o=new e(3)}catch(e){const{SimpleHasher:t}=await n.e("cb7763cce789451d2548564f9e2034d5").then(n.bind(null,"v2BH"));o=new t}return o})()).hash(e),c=(e,t,n,i)=>async r=>{const o=(await e.probeChunks(h(r),await t,n,i)).data.results;return Object.values(o).map((e=>e.exists))},l=(e,t,n,i)=>async r=>await e.uploadChunk(r.hash,r.blob,await t,r.partNumber,n,i),u=(e,t,n,i)=>{let r=0;return async o=>{await e.appendChunksToUpload(await t,{chunks:h(o),offset:r},n,i),r+=o.length}},d=(e,t,o,d,h)=>{const{content:p,collection:f}=e,{deferredUploadId:m,id:b,occurrenceKey:v}=o;let y=n("n37Y").a;try{p instanceof Blob&&(y=(e=>{
if(e>n("n37Y").d)throw new Error("fileSizeExceedsLimit");return e<=5*n("KDwl").a.GB?5*n("KDwl").a.MB:e>5*n("KDwl").a.GB&&e<=50*n("KDwl").a.GB?50*n("KDwl").a.MB:e>50*n("KDwl").a.GB&&e<=.95*n("KDwl").a.TB?100*n("KDwl").a.MB:210*n("KDwl").a.MB})(p.size))}catch(O){return O instanceof Error&&"fileSizeExceedsLimit"===O.message&&(null==d||d.onUploadFinish(new a(O.message,b,{collectionName:f,occurrenceKey:v}))),{cancel:()=>{null==d||d.onUploadFinish("canceled")}}}const g=Object(n("rcsV").a)(p,{hashingFunction:s,hashingConcurrency:5,probingBatchSize:100,chunkSize:y,uploadingConcurrency:3,uploadingFunction:l(t,m,f,h),probingFunction:c(t,m,f,h),processingBatchSize:1e3,processingFunction:u(t,m,f,h)},{onProgress(e){d&&d.onProgress(e)}}),w=d&&d.onUploadFinish||(()=>{}),x=Object(i.from)(m).pipe(Object(r.concatMap)((n=>g.pipe(Object(r.concatMap)((()=>Object(i.from)((async(e,t,n,i,r)=>{const{collection:o,name:a,mimeType:s}=e,{id:c,occurrenceKey:l}=n;return t.createFileFromUpload({uploadId:i,name:a,
mimeType:s},{occurrenceKey:l,collection:o,replaceFileId:c},r)})(e,t,o,n,h)))))))).subscribe({error:e=>w(e),complete:()=>w()});return{cancel:()=>{x.unsubscribe(),w("canceled")}}},h=e=>e.map((e=>e.hash))},CfyG:function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){
e._onTimeout&&e._onTimeout()}),t))},n("YBdB"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("yLpj"))},CzTa:function(t,n,i){"use strict";i.d(n,"a",(function(){return c})),i.d(n,"b",(function(){return u})),i.d(n,"c",(function(){return d}));var r=i("q1tI");const o=["confluence","jira"],a={confluence:{newCardExperience:"confluence.frontend.media.cards.new.experience",captions:"confluence.frontend.fabric.editor.media.captions",mediaInline:"confluence.frontend.fabric.editor.media.inline",folderUploads:"confluence.frontend.media.picker.folder.uploads",observedWidth:"",timestampOnVideo:"confluence.frontend.media.timestamp.on.video",memoryCacheLogging:"confluence-frontend-media-card-memory-cache-logging",fetchFileStateAfterUpload:"confluence-frontend-media-client-fetch-file-state-after-upload"},
jira:{newCardExperience:"issue.details.media-cards-new-experience",captions:"issue.details.editor.media.captions",mediaInline:"",folderUploads:"issue.details.media-picker-folder-upload",observedWidth:"",timestampOnVideo:"issue.details.media-cards-timestamp-on-video",memoryCacheLogging:"jira-frontend-media-card-memory-cache-logging",fetchFileStateAfterUpload:"jira-frontend-media-client-fetch-file-state-after-upload"}};function s(t,n,i){const r=(t=>{try{return"undefined"!=typeof window&&window.localStorage?window.localStorage.getItem(t):null}catch(e){}return null})(t);if(null!==r)try{return JSON.parse(r)}catch(e){}return i&&t in i?i[t]:n[t]}const c=()=>{const e=(()=>a)();let t=[];return o.forEach((n=>{t=[...t,...Object.values(e[n])]})),t.filter((e=>""!==e))},l={newCardExperience:!1,captions:!1,mediaInline:!1,folderUploads:!1,observedWidth:!1,timestampOnVideo:!1,memoryCacheLogging:!1,fetchFileStateAfterUpload:!1};function u(e,t){return s(e,l,t)}const d=e=>{const t=Object(r.useRef)()
;return((e,t)=>{if(!e&&!t)return!0;if(!e||!t)return!1;const n={newCardExperience:e.newCardExperience===t.newCardExperience,captions:e.captions===t.captions,mediaInline:e.mediaInline===t.mediaInline,folderUploads:e.folderUploads===t.folderUploads,observedWidth:e.observedWidth===t.observedWidth,timestampOnVideo:e.timestampOnVideo===t.timestampOnVideo,memoryCacheLogging:e.memoryCacheLogging===t.memoryCacheLogging,fetchFileStateAfterUpload:e.fetchFileStateAfterUpload===t.fetchFileStateAfterUpload};return Object.values(n).every((e=>e))})(e,t.current)||(t.current=e),t.current}},Dbwp:function(e,t,n){"use strict";var i=n("ciX6");t.concatMap=function(e,t){return i.mergeMap(e,t,1)}},ENB1:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));class i extends n("31bI").a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:i}={}}=this;return{reason:e,id:t,
collectionName:n,occurrenceKey:i}}}function r(e){return e instanceof i}},FD6u:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=(e={width:"100%",height:"100%"})=>({height:"number"==typeof e.height?`${e.height}px`:e.height,width:"number"==typeof e.width?`${e.width}px`:e.width})},FcH9:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"h",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return u}));const i=(e="100%")=>`\n    max-width: ${e}${"number"==typeof e?"px":""};\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  `,r=(e="100%")=>{const t="number"==typeof e?"px":"";return`\n    width: ${e}${t};\n    height: ${e}${t};\n  `
},o="\n  display: flex;\n  align-items: center;\n  justify-content: center;\n",a=(e=0,t=0)=>`\n  position: absolute;\n  top: ${e}px;\n  left: ${t}px;\n`,s=`\n  border-radius: ${Object(n("7w+A").borderRadius)()}px;\n`,c=`\n  border-bottom-left-radius: ${Object(n("7w+A").borderRadius)()}px;\n  border-bottom-right-radius: ${Object(n("7w+A").borderRadius)()}px;\n`,l="cubic-bezier(0.645, 0.045, 0.355, 1)",u=`\n  animation: ${n("AeFk").keyframes`
  0%{
    opacity: 0;
  }

  100%{
    opacity: 1;
  }
`} .3s ${l};\n`},G8n5:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var i=n("pVnL"),r=n.n(i);const o=n("AeFk").keyframes`
  0%{
    opacity: 1;
  }

  50%{
    opacity: 0.6;
  }

  100%{
    opacity: 1;
  }
`,a=({dimensions:e,theme:t})=>Object(n("AeFk").css)(n("FcH9").d," background:",Object(n("56zV").a)({light:"var(--ds-background-neutral, #F4F5F7)",dark:"var(--ds-background-neutral, #283447)"})({theme:t}),";color:",Object(n("56zV").a)({light:"var(--ds-icon, #C1C7D0)",dark:"var(--ds-icon, #67758F)"})({theme:t}),";",n("FcH9").b," max-height:100%;max-width:100%;width:",e.width,";height:",e.height,";"),s=e=>Object(n("AeFk").css)(a(e),">span{animation:",o," 0.8s infinite;}"),c=e=>{const t=Object(n("1chJ").b)();return Object(n("AeFk").jsx)("div",r()({css:a({dimensions:e.dimensions,theme:t})},e),e.children)},l=e=>{const t=Object(n("1chJ").b)();return Object(n("AeFk").jsx)("div",r()({css:s({dimensions:e.dimensions,theme:t})},e),e.children)}},G9O0:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s}))
;const i=e=>["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(e.toLowerCase())>-1,r=e=>"application/pdf"===e.toLowerCase(),o=e=>["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(e.toLowerCase())>-1,a=e=>["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1,s=e=>r(e)||i(e)||o(e)||a(e)},Gnqm:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("YBdB");var i=n("zgma"),r=n.n(i);const o=(e,t)=>t?`${e}-${t}`:e,a=(e,t)=>{const n=t.reduce(((e,t)=>{const{id:n,collection:i}=t;return e[o(n,i)]=(e=>e.error instanceof Error)(t)?t.error:{...t.details,metadataTraceContext:t.metadataTraceContext},e}),{});return e.map((e=>{const{id:t,collectionName:i}=e,r=o(t,i);return n[r]||null}))};function s(e){return new r.a(function(e){return async t=>{const i="__media-single-file-collection__",r=t.reduce(((e,t)=>{const n=t.collectionName||i,r=e[n]||[]
;return-1===r.indexOf(t.id)&&r.push(t.id),e[n]=r,e}),{}),o=[];return await Promise.all(Object.keys(r).map((async t=>{const a={traceId:Object(n("34Y/").a)(8),spanId:Object(n("34Y/").a)(8)},s=r[t],c=t===i?void 0:t;try{const t=(await e.getItems(s,c,a)).data.items.map((e=>({...e,metadataTraceContext:a})));o.push(...t)}catch(l){s.forEach((e=>{o.push({id:e,collection:c,error:l})}))}}))),a(t,o)}}(e),{maxBatchSize:100})}},HDK4:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n("8yf6"),o=n("1ouX"),a=n("NTzu"),s=n("Ndu5"),c=n("VpWK"),l=n("8Zmw"),u=function(e){function t(t,n,i){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=i,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return i(t,e),t.prototype.next=function(t){var n=this._getNow()
;this._events.push(new d(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),i=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new l.SubjectSubscription(this,e)),i&&e.add(e=new s.ObserveOnSubscriber(e,i));for(var r=n.length,o=0;o<r&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(e-i[o].time<n);)o++;return r>t&&(o=Math.max(o,r-t)),o>0&&i.splice(0,o),i},t}(r.Subject);t.ReplaySubject=u;var d=function(){return function(e,t){this.time=e,this.value=t}}()},Ilbr:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}))
;function i(e,t=Date.now()){const{artifacts:n,mediaType:i,mimeType:r,name:o,processingStatus:a,representations:s,size:c,createdAt:l}=e;if(!(n||i||r||o||a||s||c||"number"!=typeof l)){if(t-l>432e5)return!0}return!1}},KCjW:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var i=n("pVnL"),r=n.n(i),o=n("lSNA"),a=n.n(o),s=n("q1tI"),c=n("OhBV");const l={name:"3w2rif",styles:"position:absolute;background:transparent;top:0;right:0;bottom:0;left:0;cursor:pointer;width:100%;height:100%"};class u extends s.PureComponent{constructor(...e){super(...e),a()(this,"renderCard",((e={})=>{var t,i
;const{mediaProvider:o,contextIdentifierProvider:a}=e,{allowAltTextOnImages:s,alt:u,featureFlags:d,shouldOpenMediaViewer:h,enableDownloadButton:p,ssr:f}=this.props,m=this.props.marks.find(this.props.isBorderMark),b=null!==(t=null==m?void 0:m.attrs.color)&&void 0!==t?t:"",v=null!==(i=null==m?void 0:m.attrs.size)&&void 0!==i?i:0,y=this.props.marks.find(this.props.isLinkMark),g=null==y?void 0:y.attrs.href,w=g?void 0:this.props.eventHandlers,x=!g&&h,O=Object(n("AeFk").jsx)(n("APFK").a,{data:{[c.h]:{border:!!m}}},Object(n("AeFk").jsx)(n("5Jh8").a,r()({mediaProvider:o,contextIdentifierProvider:a},this.props,{shouldOpenMediaViewer:x,eventHandlers:w,alt:s?u:void 0,featureFlags:d,shouldEnableDownloadButton:p,ssr:f}))),j=Object(n("QjMM").a)(b)||b,_=m?Object(n("AeFk").jsx)("div",{"data-mark-type":"border","data-color":b,"data-size":v,style:{borderColor:j,borderWidth:`${v}px`,borderStyle:"solid",borderRadius:2*v+"px"}},O):O;return g?Object(n("AeFk").jsx)("a",{href:g,rel:"noreferrer noopener",
onClick:this.handleMediaLinkClick,"data-block-link":g,css:l},_):_})),a()(this,"handleMediaLinkClick",(e=>{const{fireAnalyticsEvent:t,isLinkMark:i,marks:r}=this.props;t&&t({action:n("+PNV").a.VISITED,actionSubject:n("+PNV").b.MEDIA,actionSubjectId:n("+PNV").c.LINK,eventType:n("+PNV").e.TRACK,attributes:{platform:n("hJsm").b.WEB,mode:n("hJsm").a.RENDERER}});const o=this.props.marks.find(this.props.isLinkMark),a=null==o?void 0:o.attrs.href,s=Object(n("MIHN").b)(this.props.eventHandlers,"link");if(s){s(e,r.find(i)&&a)}}))}render(){const{providers:e}=this.props;return e?Object(n("AeFk").jsx)(n("D0us").a,{providers:["mediaProvider","contextIdentifierProvider"],providerFactory:e,renderNode:this.renderCard}):this.renderCard()}}u.displayName="Media"},KDwl:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));const i=(e,t)=>{const i=["audio","video","image"];return Object(n("CzTa").b)("newCardExperience",t)?[...i,"doc"].indexOf(e)>-1:i.indexOf(e)>-1}
;let r;!function(e){e[e.MB=1048576]="MB",e[e.GB=1073741824]="GB",e[e.TB=1099511627776]="TB"}(r||(r={}))},Kgmz:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e){this.baseUrl=e||"/gateway/api"}async fetchToken(e){return(await fetch(`${this.baseUrl}/media/auth/smartedge`,{credentials:"include",headers:{"x-client-id":e}})).json()}isTokenExpired(e){const t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0}}},P7Zh:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("HDK4");function r(e){const t=new i.ReplaySubject(1);return e instanceof Error?t.error(e):e&&t.next(e),t}},RzjI:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("lSNA"),r=n.n(i),o=n("q1tI");const a={name:"1fo963f",styles:"display:flex;color:var(--ds-icon-warning, #ff991f)"};class s extends o.Component{render(){const{size:e}=this.props;return Object(n("AeFk").jsx)("div",{css:a},Object(n("AeFk").jsx)(n.n(n("mLKr")).a,{label:"Error",size:e}))}}
s.displayName="ErrorIcon",r()(s,"defaultProps",{size:"small"})},UBhp:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=n("rfFC");t.bufferCount=function(e,t){return void 0===t&&(t=null),function(n){return n.lift(new o(e,t))}};var o=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?s:a}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),a=function(e){function t(t,n){e.call(this,t),this.bufferSize=n,this.buffer=[]}return i(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t
}(r.Subscriber),s=function(e){function t(t,n,i){e.call(this,t),this.bufferSize=n,this.startBufferEvery=i,this.buffers=[],this.count=0}return i(t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,i=t.startBufferEvery,r=t.buffers,o=t.count;this.count++,o%i==0&&r.push([]);for(var a=r.length;a--;){var s=r[a];s.push(e),s.length===n&&(r.splice(a,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var i=t.shift();i.length>0&&n.next(i)}e.prototype._complete.call(this)},t}(r.Subscriber)},Uyp5:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("lSNA"),r=n.n(i),o=n("NTzu"),a=n("G4OQ"),s=n("NVK1"),c=n("Dbwp"),l=n("xk4V"),u=n.n(l),d=(n("YBdB"),n("CBQ3")),h=n("4KWY"),p=n.n(h);const f=e=>{if(e.content instanceof Blob){const t=e.content.type;return Object(n("29vY").a)(t)}return"unknown"},m=(e,t)=>Object(n("WxjT").a)(e)||"unknown"!==e.mediaType?{}:{mediaType:t},b=e=>{const t=e.split(",")[1],n=atob(t),i=[]
;for(let r=0;r<n.length;r+=512){const e=n.slice(r,r+512),t=e.split("").map(((t,n)=>e.charCodeAt(n))),o=new Uint8Array(t);i.push(o)}return new Blob(i,{type:"image/jpeg"})};class v{constructor(e,t){r()(this,"createDownloadFileStream",((e,t,i)=>{const r=Object(n("P7Zh").a)(),o=new(n("onxz").a);return o.onError=e=>r.error(e),o.execute((async()=>{const a=await this.dataloader.load({id:e,collectionName:t});if(!a)throw new(n("ENB1").a)("emptyItems",e,{collectionName:t,occurrenceKey:i});if(Object(n("Ilbr").a)(a))throw new(n("ENB1").a)("zeroVersionFile",e,{collectionName:t,occurrenceKey:i});const s=Object(n("WxjT").i)(e,a);switch(r.next(s),s.status){case"processing":o.next();break;case"processed":r.complete()}})),r})),r()(this,"getUploadingFileStateBase",((e,t)=>{"string"==typeof e.content&&(e.content=b(e.content));const{content:i,name:r=""}=e,{id:o,occurrenceKey:a}=t;let s,c=0,l="";i instanceof Blob&&(c=i.size,l=i.type,Object(n("G9O0").d)(i.type)&&(s={value:i,origin:"local"}));return{id:o,
occurrenceKey:a,name:r,size:c,mediaType:f(e),mimeType:l,preview:s}})),this.mediaStore=e,this.featureFlags=t,this.dataloader=Object(n("Gnqm").a)(e)}getFileState(e,t={}){const{collectionName:i,occurrenceKey:r}=t;if(!p()(e)){const t=Object(n("P7Zh").a)();return t.error(new(n("ENB1").a)("invalidFileId",e,{collectionName:i,occurrenceKey:r})),Object(n("gWsH").b)(t)}return Object(n("gWsH").b)(Object(n("a+XE").a)().getOrInsert(e,(()=>this.createDownloadFileStream(e,i))))}getCurrentState(e,t){return((e,t=new o.Subscription)=>new Promise(((n,i)=>t.add(e.subscribe({next:e=>{n(e),t.unsubscribe()},error:e=>{i(e),t.unsubscribe()}})))))(this.getFileState(e,t))}getArtifactURL(e,t,n){return this.mediaStore.getArtifactURL(e,t,n)}getFileBinaryURL(e,t){return this.mediaStore.getFileBinaryURL(e,t)}touchFiles(e,t,n){return this.mediaStore.touchFiles({descriptors:e},{collection:t},n).then((({data:e})=>e))}generateUploadableFileUpfrontIds(e,t){const n=u()(),i=u()(),r={fileId:n,occurrenceKey:i,collection:e}
;return{id:n,occurrenceKey:i,deferredUploadId:this.touchFiles([r],e,t).then((e=>e.created[0].uploadId))}}async uploadExternal(e,t,i){const r=this.generateUploadableFileUpfrontIds(t,i),{id:o,occurrenceKey:a}=r,s=Object(n("P7Zh").a)(),c=fetch(e).then((e=>e.blob())).catch((()=>{})),l=new Promise((async(e,t)=>{const n=await c;n||t("Could not fetch the blob"),e({value:n,origin:"remote"})})),u=e.split("/").pop()||"",d={status:"processing",name:u,size:0,mediaType:"unknown",mimeType:"",id:o,occurrenceKey:a,preview:l};return s.next(d),Object(n("a+XE").a)().set(o,s),new Promise((async(e,d)=>{const h=await c;if(!h)return d("Could not download remote file");const{type:p,size:f}=h,m={content:h,mimeType:p,collection:t,name:u},b=Object(n("29vY").a)(p);s.next({status:"processing",name:u,size:f,mediaType:b,mimeType:p,id:o,occurrenceKey:a,preview:l}),this.upload(m,void 0,r,i);e({dimensions:await Object(n("6LwX").a)(b,h),uploadableFileUpfrontIds:r})}))}uploadAwlaysPullFileStates(e,t,i,r){
const{collection:a}=e,c=i||this.generateUploadableFileUpfrontIds(a,r),{id:l,occurrenceKey:u}=c,d=this.getUploadingFileStateBase(e,c),h=Object(n("P7Zh").a)();Object(n("a+XE").a)().set(l,h);const p=e=>{h.next({status:"uploading",...d,progress:e})};let f=new o.Subscription;const{cancel:b}=Object(n("COEO").a)(e,this.mediaStore,c,{onUploadFinish:e=>{if(e)return h.error(e);f=this.createDownloadFileStream(l,a,u).pipe(Object(s.map)((e=>({...d,...e,...m(e,d.mediaType)})))).subscribe(h)},onProgress:p},r);return null==t||t.setAbort((()=>{b(),f.unsubscribe()})),setTimeout(p,0,0),Object(n("gWsH").b)(h)}uploadConditionallyPullFileStates(e,t,i,r){"string"==typeof e.content&&(e.content=b(e.content));const{content:l,name:u="",collection:d}=e;i||(i=this.generateUploadableFileUpfrontIds(d,r));const h=i.id,p=i.occurrenceKey;let v,y="",g=0;const w=f(e),x=Object(n("P7Zh").a)(),O=new o.Subscription;l instanceof Blob&&(g=l.size,y=l.type,Object(n("G9O0").d)(l.type)&&(v={value:l,origin:"local"}));const j={id:h,
occurrenceKey:p,name:u,size:g,mediaType:w,mimeType:y,preview:v},_=e=>{x.next({status:"uploading",...j,progress:e})},{cancel:k}=Object(n("COEO").a)(e,this.mediaStore,i,{onUploadFinish:e=>{if(e)return x.error(e);O.add(Object(n("lXNY").b)(w,y,v).pipe(Object(c.concatMap)((e=>e?this.createDownloadFileStream(h,d,p).pipe(Object(s.map)((e=>({...j,...e,...m(e,w)})))):Object(a.of)({status:"processing",representations:{},...j})))).subscribe(x))},onProgress:_},r);return Object(n("a+XE").a)().set(h,x),setTimeout((()=>{_(0)}),0),t&&t.setAbort((()=>{k(),O.unsubscribe()})),Object(n("gWsH").b)(x)}upload(e,t,i,r,o){return Object(n("CzTa").b)("fetchFileStateAfterUpload",o||this.featureFlags)?this.uploadAwlaysPullFileStates(e,t,i,r):this.uploadConditionallyPullFileStates(e,t,i,r)}async downloadBinary(e,t="download",i){const r=await this.mediaStore.getFileBinaryURL(e,i);Object(n("dSTk").a)(r,{name:t}),n("/nbe").a.emit("media-viewed",{fileId:e,isUserCollection:"recents"===i,viewingLevel:"download"})}
async copyFile(e,t,i={},r){const{authProvider:o,collection:a,id:s}=e,{authProvider:c,collection:l,replaceFileId:u,occurrenceKey:h}=t,{preview:p,mimeType:f}=i,b=t.mediaStore||new(n("hbF6").a)({authProvider:c}),v={sourceFile:{id:s,collection:a,owner:Object(d.authToOwner)(await o({collectionName:a}))}},y={collection:l,replaceFileId:u,occurrenceKey:h},g=Object(n("a+XE").a)();let w;try{const{data:e}=await b.copyFileWithToken(v,y,r),t={...e,...f?{mimeType:f}:void 0},{id:i,mimeType:o}=t,a=o?Object(n("29vY").a)(o):"unknown",s=Object(n("WxjT").h)({data:t}),c=g.get(i)||Object(n("P7Zh").a)(),u=!Object(n("WxjT").a)(s)&&p?{preview:p}:{};return!Object(n("WxjT").b)(s)&&o&&await Object(n("lXNY").a)(a,o,p)?(c.next({...s,...m(s,a),...u}),w=this.createDownloadFileStream(i,l,h).subscribe({next:e=>c.next({...e,...m(e,a),...!Object(n("WxjT").a)(e)&&u}),error:e=>c.error(e),complete:()=>c.complete()})):Object(n("WxjT").f)(s)||c.next({...s,...!Object(n("WxjT").a)(s)&&u}),
g.has(i)||Object(n("a+XE").a)().set(i,c),e}catch(x){if(w&&w.unsubscribe(),u){const e=g.get(u);e?e.error(x):g.set(s,Object(n("P7Zh").a)(x))}throw x}}}},WxjT:function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return d}));const i=e=>"uploading"===e.status,r=e=>"processing"===e.status,o=e=>"processed"===e.status,a=e=>"error"===e.status,s=e=>!a(e)&&!!e.preview,c=e=>["processed","failed-processing","error"].includes(e.status),l=e=>{switch(e.status){case"processing":case"processed":case"failed-processing":return!(!e.representations||!e.representations.image);default:return!1}},u=e=>{const{id:t,name:n,size:i,processingStatus:r,artifacts:o,mediaType:a,mimeType:s,representations:c,createdAt:l,metadataTraceContext:u}=e.data,d={
id:t,name:n,size:i,mediaType:a,mimeType:s,artifacts:o,representations:c,createdAt:l,metadataTraceContext:u};switch(r){case"pending":case void 0:return{...d,status:"processing"};case"succeeded":return{...d,status:"processed"};case"failed":return{...d,status:"failed-processing"}}},d=(e,t)=>u({data:{id:e,...t}})},YBdB:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r=1,o={},a=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?function(){i=function(e){t.nextTick((function(){u(e)}))}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),
i=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},i=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;i=function(t){var n=s.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){i=function(e){setTimeout(u,0,e)}}(),c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[r]=a,i(r),r++},c.clearImmediate=l}function l(e){delete o[e]}function u(e){if(a)setTimeout(u,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{l(e),a=!1}}}}
}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("yLpj"),n("8oxB"))},"a+XE":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class i{constructor(e){this.streams=e}has(e){return!!this.streams.find(e)}set(e,t){this.streams.set(e,t)}get(e){return this.streams.get(e)}getOrInsert(e,t){return this.has(e)||this.set(e,t()),this.get(e)}removeAll(){this.streams.clear()}remove(e){this.streams.delete(e)}get size(){return this.streams.size}}let r;const o=()=>{if(!r){const e=n("CBQ3").mediaState;r=new i(e.streams)}return r}},cckU:function(e,t,n){"use strict";async function i(e,t={},i){const{method:r="GET",endpoint:o,auth:a,params:s,headers:c,body:l,clientOptions:u={},traceContext:d}=t,{retryOptions:h}=u,p={method:r,endpoint:o,traceContext:d};return Object(n("ocNj").f)((()=>fetch(Object(n("ocNj").d)(e,{params:s}),{method:r,body:l,headers:Object(n("ocNj").e)(c,a,d),signal:i&&i.signal}).then(Object(n("ocNj").c)(p))),p,h)}n.d(t,"a",(function(){return i}))},
cjKa:function(e,t,n){(function(i){var r;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(o){var a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==o?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function l(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==i&&i.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,i.emitWarning(r)}else console.error(n),console.trace&&console.trace()}function u(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,
c.call(this,e)}function d(e,t,n,i){if(!n)return[];var r,o,a,s,c,l,u,h=[],p=t.length,f=t[i],m=t[i+1];if(i===p&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(r=0,o=n._listeners.length;r<o;r++)e&&e.push(n._listeners[r]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(h=h.concat(d(e,t,n[a],i+1)));return h}if("**"===f){for(a in(u=i+1===p||i+2===p&&"*"===m)&&n._listeners&&(h=h.concat(d(e,t,n,p))),n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!u&&(h=h.concat(d(e,t,n[a],p))),h=h.concat(d(e,t,n[a],i))):h=a===m?h.concat(d(e,t,n[a],i+2)):h.concat(d(e,t,n[a],i)));return h}h=h.concat(d(e,t,n[f],i+1))}if((s=n["*"])&&d(e,t,s,i+1),c=n["**"])if(i<p)for(a in c._listeners&&d(e,t,c,p),c)"_listeners"!==a&&c.hasOwnProperty(a)&&(a===m?d(e,t,c[a],i+2):a===f?d(e,t,c[a],i+1):((l={})[a]=c[a],d(e,t,{"**":l},i+1)));else c._listeners?d(e,t,c,p):c["*"]&&c["*"]._listeners&&d(e,t,c["*"],p)
;return h}function h(e,t){for(var n=0,i=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<i;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var r=this.listenerTree,a=e.shift();a!==o;){if(r[a]||(r[a]={}),r=r[a],0===e.length)return r._listeners?("function"==typeof r._listeners&&(r._listeners=[r._listeners]),r._listeners.push(t),!r._listeners.warned&&this._maxListeners>0&&r._listeners.length>this._maxListeners&&(r._listeners.warned=!0,l.call(this,r._listeners.length,a))):r._listeners=t,!0;a=e.shift()}return!0}u.EventEmitter2=u,u.prototype.delimiter=".",u.prototype.setMaxListeners=function(e){e!==o&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},u.prototype.event="",u.prototype.once=function(e,t){return this._once(e,t,!1)},u.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},u.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},u.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},
u.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},u.prototype._many=function(e,t,n,i){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&r.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,i),r},u.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,i,r,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,a){case 1:o[i].call(this,e);break;case 2:o[i].call(this,e,arguments[1]);break;case 3:o[i].call(this,e,arguments[1],arguments[2]);break;default:o[i].apply(this,t)}}if(this.wildcard){o=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,c,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:
o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,a){case 1:o[i].call(this);break;case 2:o[i].call(this,arguments[1]);break;case 3:o[i].call(this,arguments[1],arguments[2]);break;default:o[i].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},u.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,i,r,o,a=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),r=1;r<c;r++)t[r]=arguments[r];for(i=0,n=this._all.length;i<n;i++)switch(this.event=e,c){case 1:
a.push(this._all[i].call(this,e));break;case 2:a.push(this._all[i].call(this,e,arguments[1]));break;case 3:a.push(this._all[i].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[i].apply(this,t))}}if(this.wildcard){o=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,l,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,c){case 1:a.push(o.call(this));break;case 2:a.push(o.call(this,arguments[1]));break;case 3:a.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),r=1;r<c;r++)t[r-1]=arguments[r];a.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),c>3)for(t=new Array(c-1),r=1;r<c;r++)t[r-1]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,c){case 1:a.push(o[i].call(this));break;case 2:a.push(o[i].call(this,arguments[1]));break;case 3:a.push(o[i].call(this,arguments[1],arguments[2]));break;default:a.push(o[i].apply(this,t))}
}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},u.prototype.on=function(e,t){return this._on(e,t,!1)},u.prototype.prependListener=function(e,t){return this._on(e,t,!0)},u.prototype.onAny=function(e){return this._onAny(e,!1)},u.prototype.prependAny=function(e){return this._onAny(e,!0)},u.prototype.addListener=u.prototype.on,u.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},u.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",e,t),this.wildcard?(h.call(this,e,t),
this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,l.call(this,this._events[e].length,e))):this._events[e]=t,this)},u.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var r="string"==typeof e?e.split(this.delimiter):e.slice();i=d.call(this,null,r,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var s=0;s<i.length;s++){var c=i[s];if(n=c._listeners,a(n)){for(var l=-1,u=0,h=n.length;u<h;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){l=u;break}if(l<0)continue;return this.wildcard?c._listeners.splice(l,1):this._events[e].splice(l,1),
0===n.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this.emit("removeListener",e,t))}return function e(t){if(t!==o){var n=Object.keys(t);for(var i in n){var r=n[i],a=t[r];a instanceof Function||"object"!=typeof a||null===a||(Object.keys(a).length>0&&e(t[r]),0===Object.keys(a).length&&delete t[r])}}}(this.listenerTree),this},u.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(n=0,i=(t=this._all).length;n<i;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(n=0,i=(t=this._all).length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},u.prototype.removeListener=u.prototype.off,u.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||s.call(this),this
;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=d.call(this,null,t,this.listenerTree,0),i=0;i<n.length;i++){var r=n[i];r._listeners=null}else this._events&&(this._events[e]=null);return this},u.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},u.prototype.eventNames=function(){return Object.keys(this._events)},u.prototype.listenerCount=function(e){return this.listeners(e).length},u.prototype.listenersAny=function(){return this._all?this._all:[]},(r=function(){return u}.call(t,n,t,e))===o||(e.exports=r)}()}).call(this,n("8oxB"))},dSTk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=(e,t)=>{
const n=!!window.MSInputMethodContext&&!!document.documentMode,i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r="media-download-iframe",o=document.createElement("a");let a=document.getElementById(r);a||(a=document.createElement("iframe"),a.style.display="none",a.id=r,a.name=r,document.body.appendChild(a)),o.href=e,t&&t.name&&(o.download=t.name),o.target=n||i?"_blank":r,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},f7y9:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("pVnL"),r=n.n(i),o=n("lSNA"),a=n.n(o),s=n("q1tI"),c=n.n(s);const l=e=>class extends s.Component{constructor(...e){super(...e),a()(this,"state",{imageStatus:"loading"}),a()(this,"onLoad",(()=>{this.setState({imageStatus:"complete"});const{onExternalImageLoaded:e}=this.props;e&&this.img&&e({width:this.img.naturalWidth,height:this.img.naturalHeight})})),a()(this,"onError",(()=>{this.setState({imageStatus:"error"})}))}componentDidMount(){this.fetchImage(this.props)}
UNSAFE_componentWillReceiveProps(e){e.url!==this.props.url&&(this.setState({imageStatus:"loading"}),this.fetchImage(e))}componentWillUnmount(){this.img&&(this.img.removeEventListener("load",this.onLoad),this.img.removeEventListener("error",this.onError),this.img=null)}fetchImage({url:e}){e&&(this.img||(this.img=new Image,this.img.addEventListener("load",this.onLoad),this.img.addEventListener("error",this.onError)),this.img.src=e)}render(){const{imageStatus:t}=this.state;return c.a.createElement(e,r()({},this.props,{imageStatus:t}))}}},gWsH:function(e,t,n){"use strict";function i(e){return{subscribe:t=>{const n=e.subscribe(t);return{unsubscribe:()=>{n.unsubscribe()}}}}}function r(e){return i(Object(n("P7Zh").a)(e))}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}))},gZGX:function(e,t,n){"use strict";function i(e,t){const i=[];return Object(n("MUVu").a)(e,{any:e=>{t(e)&&i.push(e)}}),i}n.d(t,"a",(function(){return i}))},hbF6:function(e,t,n){"use strict"
;n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m}));var i=n("lSNA"),r=n.n(i);const o=(e,t)=>new Promise(((n,i)=>{setTimeout(i,e,t)})),a="media-api-region",s="media-api-environment",c={"max-age":n("n37Y").b,allowAnimated:!0,mode:"crop"},l=(e,t=!1)=>({...c,...e,...t?{width:4096,height:4096}:{}}),u={Accept:"application/json","Content-Type":"application/json"};class d{constructor(e,t){r()(this,"resolveAuth",(e=>(async(e,t,i=1e4)=>{let r;try{r=await Promise.race([e(t),o(i,new(n("/Jq5").a)("authProviderTimedOut"))])}catch(a){if(a instanceof n("/Jq5").a)throw a;throw new(n("/Jq5").a)("failedAuthProvider",a instanceof Error?a:void 0)}if(!r)throw new(n("/Jq5").a)("emptyAuth");return r})(this.config.authProvider,e))),r()(this,"resolveInitialAuth",(()=>(e=>{if(!e)throw new(n("/Jq5").a)("missingInitialAuth");return e})(this.config.initialAuth))),this.config=e,this.featureFlags=t}async removeCollectionFile(e,t,n,i){const r={actions:[{
action:"remove",item:{type:"file",id:e,occurrenceKey:n}}]},o={method:"PUT",endpoint:"/collection/{collectionName}",authContext:{collectionName:t},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r),traceContext:i};await this.request(`/collection/${t}`,o)}createUpload(e=1,t,i){const r={method:"POST",endpoint:"/upload"},o={...r,authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"},traceContext:i};return this.request("/upload",o).then(Object(n("ocNj").b)(r))}async uploadChunk(e,t,n,i,r,o){const a={method:"PUT",endpoint:"/chunk/{etag}",params:{uploadId:n,partNumber:i},authContext:{collectionName:r},body:t,traceContext:o};await this.request(`/chunk/${e}`,a)}probeChunks(e,t,i,r){const o={method:"POST",endpoint:"/chunk/probe"},a={...o,params:{uploadId:t},authContext:{collectionName:i},headers:u,body:JSON.stringify({chunks:e}),traceContext:r};return this.request("/chunk/probe",a).then(Object(n("ocNj").b)(o))}
createFileFromUpload(e,t={},i){const r={method:"POST",endpoint:"/file/upload"},o={...r,authContext:{collectionName:t.collection},params:t,headers:u,body:JSON.stringify(e),traceContext:i};return this.request("/file/upload",o).then(Object(n("ocNj").b)(r))}touchFiles(e,t={},i){const r={method:"POST",endpoint:"/upload/createWithFiles"},o={...r,authContext:{collectionName:t.collection},headers:u,body:JSON.stringify(e),traceContext:i};return this.request("/upload/createWithFiles",o).then(Object(n("ocNj").b)(r))}getFile(e,t={},i){const r={method:"GET",endpoint:"/file/{fileId}"},o={...r,authContext:{collectionName:t.collection},params:t,traceContext:i};return this.request(`/file/${e}`,o).then(Object(n("ocNj").b)(r))}async getFileImageURL(e,t){const{collection:n}=t||{},i=await this.resolveAuth({collectionName:n});return this.createFileImageURL(e,i,t)}getFileImageURLSync(e,t){const n=this.resolveInitialAuth();return this.createFileImageURL(e,n,t)}createFileImageURL(e,t,i){const r={params:l(i),
auth:t};return Object(n("ocNj").d)(`${t.baseUrl}/file/${e}/image`,r)}async getFileBinaryURL(e,t){const i=await this.resolveAuth({collectionName:t}),r={params:{dl:!0,collection:t,"max-age":n("n37Y").b},auth:i};return Object(n("ocNj").d)(`${i.baseUrl}/file/${e}/binary`,r)}async getArtifactURL(e,t,i){const r=Object(n("k+ZQ").a)(e,t);if(!r)throw new Error(`artifact ${t} not found`);const o=await this.resolveAuth({collectionName:i}),a={params:{collection:i,"max-age":n("n37Y").b},auth:o};return Object(n("ocNj").d)(`${o.baseUrl}${r}`,a)}async getImage(e,t,i,r,o){const a={};const s={method:"GET",endpoint:"/file/{fileId}/image"},c={...s,authContext:{collectionName:t&&t.collection},params:l(t,r),headers:a,traceContext:o};return this.request(`/file/${e}/image`,c,i).then(Object(n("ocNj").a)(s))}async getItems(e,t,i){const r=e.map((e=>({type:"file",id:e,collection:t}))),o={method:"POST",endpoint:"/items"},a={...o,authContext:{collectionName:t},headers:u,body:JSON.stringify({descriptors:r}),
traceContext:i};return this.request("/items",a).then(Object(n("ocNj").b)(o))}async getImageMetadata(e,t,i){const r={method:"GET",endpoint:"/file/{fileId}/image/metadata"},o={...r,authContext:{collectionName:t&&t.collection},params:t,traceContext:i};return this.request(`/file/${e}/image/metadata`,o).then(Object(n("ocNj").b)(r))}async appendChunksToUpload(e,t,n,i){const r={method:"PUT",endpoint:"/upload/{uploadId}/chunks",authContext:{collectionName:n},headers:u,body:JSON.stringify(t),traceContext:i};await this.request(`/upload/${e}/chunks`,r)}copyFileWithToken(e,t,i){const r={method:"POST",endpoint:"/file/copy/withToken"},o={...r,authContext:{collectionName:t.collection},params:t,headers:u,body:JSON.stringify(e),traceContext:i};return this.request("/file/copy/withToken",o).then(Object(n("ocNj").b)(r))}async request(e,t={method:"GET",endpoint:void 0,authContext:{}},i){
const{method:r,endpoint:o,authContext:c,params:l,headers:u,body:d,clientOptions:h,traceContext:f}=t,m=await this.resolveAuth(c),b=f?{...f,spanId:(null==f?void 0:f.spanId)||Object(n("34Y/").a)(8)}:void 0,v=await Object(n("cckU").a)(`${m.baseUrl}${e}`,{method:r,endpoint:o,auth:m,params:l,headers:u,body:d,clientOptions:h,traceContext:b},i);return p(a,v.headers.get("x-media-region")),p(s,v.headers.get("x-media-env")),v}}const h=e=>window&&window.sessionStorage&&window.sessionStorage.getItem(e)||void 0,p=(e,t)=>{if(!t||!window||!window.sessionStorage)return;window.sessionStorage.getItem(e)!==t&&window.sessionStorage.setItem(e,t)},f=()=>h(s),m=()=>h(a)},jy5L:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("cjKa");class r{constructor(e,t){this.mediaClientConfig=e,this.featureFlags=t,this.mediaStore=new(n("hbF6").a)({authProvider:e.authProvider,initialAuth:e.initialAuth},t),this.config=e,this.file=new(n("Uyp5").a)(this.mediaStore,t),this.eventEmitter=new i.EventEmitter2,
this.stargate=new(n("Kgmz").a)(e.stargateBaseUrl)}getImage(e,t,n,i,r){return this.mediaStore.getImage(e,t,n,i,r)}getImageUrl(e,t){return this.mediaStore.getFileImageURL(e,t)}getImageUrlSync(e,t){return this.mediaStore.getFileImageURLSync(e,t)}async getImageMetadata(e,t){return(await this.mediaStore.getImageMetadata(e,t)).metadata}async mobileUploadPromise(){if(this.mobileUpload)return this.mobileUpload;const e=await n.e("@atlaskit-internal_media-client-mobile-upload").then(n.bind(null,"X+Xy"));return this.mobileUpload=new e.MobileUploadImpl(this.mediaStore),this.mobileUpload}async removeFileFromCollection(e,t,n,i){await this.mediaStore.removeCollectionFile(e,t,n,i)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){return this.eventEmitter.emit(e,t)}}},"k+ZQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=(e,t)=>{const n=e[t];if(n&&n.url)return n.url}},lXNY:function(t,n,i){"use strict";i.d(n,"a",(function(){return o})),
i.d(n,"b",(function(){return a}));var r=i("IrFB");async function o(t,n,r){if(("doc"===t||!Object(i("G9O0").d)(n)||!r)&&Object(i("txrb").d)(n))return!0;if("video"===t&&r){const t=(await r).value;if(!(t instanceof Blob))return!1;try{const{width:e,height:n}=await Object(i("+Nfr").a)(t);return!e&&!n}catch(e){return!0}}return!1}function a(e,t,n){return Object(r.from)(o(e,t,n))}},"m4/a":function(e,t,n){"use strict";var i=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=i},mLKr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("q1tI")),r=n("QEuf");const o=e=>i.default.createElement(r.Icon,Object.assign({
dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M13.31 5.343l7.359 13.17A1 1 0 0119.796 20H4.204a1 1 0 01-.873-1.488l7.36-13.169a1.5 1.5 0 012.618 0zM12 8.5a1.091 1.091 0 00-1.081 1.239l.513 3.766a.573.573 0 001.136 0l.513-3.766A1.091 1.091 0 0012 8.5zm0 8.63a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));o.displayName="EditorWarningIcon";var a=o;t.default=a},n37Y:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s}));const i="recents",r=2592e3,o=4096,a=5*n("KDwl").a.MB,s=2*n("KDwl").a.TB},ocNj:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return f})),
n.d(t,"k",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"c",(function(){return w}));var i=n("CBQ3");function r(e){return e instanceof Error&&"request_cancelled"===e.message||!!e&&"AbortError"===e.name}function o(e){return e instanceof TypeError}function a(e){return!!e&&Object(n("5qIg").b)(e)&&429===e.attributes.statusCode||!!e&&!!e.message&&e.message.includes("429")}const s="x-b3-traceid",c="x-b3-spanid",l=e=>e?{[s]:e.traceId,[c]:e.spanId}:{};function u(e){return e?Object(i.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,Authorization:`Bearer ${e.token}`}:{"X-Issuer":e.asapIssuer,Authorization:`Bearer ${e.token}`}:{}}function d(e,{params:t,auth:n}){const r=new URL(e),o=n&&function(e){return Object(i.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}(n)||{},a={...t,...o};return Object.entries(a).filter((([e,t])=>null!=t)).forEach((e=>{
r.searchParams.append(...e)})),r.searchParams.sort(),r.toString()}function h(e,t,n){if(t||n||e)return{...null!=e?e:{},...u(t),...l(n)}}async function p(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.json()}catch(t){throw new(n("5qIg").a)("serverInvalidBody",{statusCode:e.status},t instanceof Error?t:void 0)}}async function f(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.blob()}catch(t){throw new(n("5qIg").a)("serverInvalidBody",{statusCode:e.status},t instanceof Error?t:void 0)}}function m(){return console.warn("Helper is deprecated and will be remove in the next major version"),Promise.resolve()}function b(e){return async t=>{try{return await t.json()}catch(i){throw new(n("5qIg").a)("serverInvalidBody",{...e,...x(t),statusCode:t.status},i instanceof Error?i:void 0)}}}function v(e){return async t=>{try{return await t.blob()}catch(i){
throw new(n("5qIg").a)("serverInvalidBody",{...e,...x(t),statusCode:t.status},i instanceof Error?i:void 0)}}}const y={startTimeoutInMs:1e3,maxAttempts:5,factor:2};async function g(e,t,i={}){const a={...y,...i},{startTimeoutInMs:s,maxAttempts:c,factor:l}=a;let u,d=0,h=s;const p=async()=>{await function(e){return new Promise((t=>setTimeout(t,e)))}(h),h*=l,d+=1};for(;d<c;)try{return await e()}catch(f){if(u=f,r(f))throw new(n("5qIg").a)("clientAbortedRequest",t,f);if(!o(f)&&!Object(n("5qIg").b)(f)||Object(n("5qIg").b)(f)&&(!f.metadata||!f.metadata.statusCode||f.metadata.statusCode<500))throw f;await p()}if(Object(n("5qIg").b)(u))throw function(e,t){const{reason:i,metadata:r,innerError:o}=e;return new(n("5qIg").a)(i,{...r,...t},o)}(u,{attempts:d,clientExhaustedRetries:!0});throw new(n("5qIg").a)("serverUnexpectedError",{...t,attempts:d,clientExhaustedRetries:!0},u)}function w(e){return t=>{if(t.ok||t.status<400)return t;const i=function(e,t){const{status:i}=t,r=function(e){switch(e){
case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}(i);return new(n("5qIg").a)(r,{...e,...x(t),statusCode:i})}(e,t);throw i}}function x(e){const{headers:t}=e;return{mediaRegion:t.get("x-media-region")||"unknown",mediaEnv:t.get("x-media-env")||"unknown"}}},onxz:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("lSNA"),r=n.n(i);const o={poll_intervalMs:3e3,poll_maxAttempts:30,poll_backoffFactor:1.25,poll_maxIntervalMs:2e5};class a{constructor(e){r()(this,"poll_intervalMs",0),r()(this,"attempt",1),r()(this,"shouldIterate",!0),r()(this,"timeoutId",0),this.options={...o,...e},this.poll_intervalMs=this.options.poll_intervalMs}async execute(e){const{poll_maxAttempts:t}=this.options
;if(0===t)return this.fail(new(n("6fio").a)("pollingMaxAttemptsExceeded",this.attempt));try{if(this.shouldIterate=!1,await e(),!this.shouldIterate)return;if(this.attempt>=t)return this.fail(new(n("6fio").a)("pollingMaxAttemptsExceeded",this.attempt));this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((()=>this.execute(e)),this.poll_intervalMs)}catch(i){this.fail(i)}}fail(e){const{onError:t}=this;this.cancel(),t&&t(e)}getIntervalMsForIteration(e){let t=this.options.poll_intervalMs;if(1===e)return t;for(let n=2;n<=e;n++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)}next(){this.shouldIterate=!0}cancel(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}},rcsV:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("/LR1"),r=n("Dbwp"),o=n("UBhp"),a=n("3gwn"),s=n("4Nn1"),c=n("NVK1");var l=n("4c1C"),u=n("ciX6");const d=(e,t)=>Object(u.mergeMap)((e=>{
const t=new Array,n=()=>{const e=t.findIndex((e=>!e.notifyIfReady()));e>0&&t.splice(0,e)};return i=>new l.Observable((r=>{t.push(((e,t,n)=>{const i={notifyIfReady:()=>!1};return e.then((e=>{i.notifyIfReady=()=>(t.next(e),t.complete(),!0),n(i)}),(e=>{i.notifyIfReady=()=>(t.error(e),!0),n(i)})),i})(e(i),r,n))}))})(e),t);function h(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}const p=e=>function(e){const t=new FileReader;return new Promise(((n,i)=>{t.onload=function(){n(this.result)},t.onerror=i,t.readAsArrayBuffer(e)}))}(e).then((e=>crypto.subtle.digest("SHA-1",e))).then(h);var f=n("IrFB");const m=(e,t,n)=>Object(a.fromPromise)(async function(e){return"string"==typeof e?await fetch(e).then((e=>e.blob())):e}(e)).pipe(Object(r.concatMap)((e=>{const{chunkSize:a}=t,{onProgress:l}=n,u=Math.ceil(e.size/a),h=((e,{size:t})=>{const n=Math.ceil(e.size/t);return Object(s.range)(0,n).pipe(Object(c.map)((n=>({partNumber:n+1,
blob:e.slice(n*t,(n+1)*t)}))))})(e,{size:a}),m=function(e,{batchSize:t,prober:n}){return e.pipe(Object(o.bufferCount)(t),Object(r.concatMap)((e=>n(e).then((t=>e.map(((e,n)=>({...e,exists:t[n]}))))))),Object(r.concatMap)((e=>Object(f.from)(e))))}(((e,{hasher:t,concurrency:n})=>d((e=>t=>e(t.blob).then((e=>({blob:t.blob,hash:`${e}-${t.blob.size}`,partNumber:t.partNumber}))))(t||p),n)(e))(h,{concurrency:t.hashingConcurrency,hasher:t.hashingFunction}),{batchSize:t.probingBatchSize,prober:t.probingFunction});let b=0,v=((e,t)=>e.pipe(d((e=>e.exists?Promise.resolve(e):t.uploader(e).then((()=>e))),t.concurrency)))(m,{concurrency:t.uploadingConcurrency,uploader:t.uploadingFunction});return l&&(v=v.pipe(Object(i.tap)((()=>{b+=1,l(b/u)})))),((e,t)=>e.pipe(Object(o.bufferCount)(t.batchSize)).pipe(Object(r.concatMap)((e=>t.processor?t.processor(e).then((()=>e)):Promise.resolve(e)))))(v,{batchSize:t.processingBatchSize,processor:t.processingFunction
}).pipe(Object(r.concatMap)((e=>Object(f.from)(e))),Object(o.bufferCount)(u))}))),b=(e,t,n)=>m(e,t,n)},txrb:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c}))
;const i=e=>["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(e.toLowerCase())>-1,r=e=>["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(e.toLowerCase())>-1,o=e=>["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(e.toLowerCase())>-1,a=e=>["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(e.toLowerCase())>-1,s=e=>["binary/octet-stream"].indexOf(e.toLowerCase())>-1,c=e=>i(e)||r(e)||o(e)||a(e)||s(e)
},ug4D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("q1tI")),r=n("QEuf");const o=e=>i.default.createElement(r.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M17 10.005V19H7V5h5.99v2.49a1.5 1.5 0 001.5 1.5h4.5v-.522c0-.297-.132-.578-.359-.768l-5.074-4.236c-.36-.3-.813-.464-1.282-.464H7a2 2 0 00-2 2v14a2 2 0 002 2h10a2 2 0 002-2v-8.995h-2z"/><rect x="8" y="12" width="8" height="2" rx="1"/><rect x="8" y="15" width="4" height="2" rx="1"/></g></svg>'},e));o.displayName="FileIcon";var a=o;t.default=a},xA5P:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){
e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return i(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(n("m4/a").Scheduler);t.AsyncScheduler=r},xLAl:function(e,t,n){"use strict";var i=n("pVnL"),r=n.n(i),o=n("q1tI"),a=n.n(o),s=n("CnBM"),c=n.n(s);const l=a.a.createContext({}),u=()=>{const e=Object(o.useContext)(l);return a.a.createElement(n("2euv").a,e)},d=c()({loader:()=>n.e("@atlaskit-internal_media-card").then(n.bind(null,"A6xT")).then((e=>e.Card)),loading:()=>a.a.createElement(u,null)}),h=c()({loader:()=>n.e("@atlaskit-internal_media-card-error-boundary").then(n.bind(null,"MqPU")).then((e=>e.default)),loading:()=>a.a.createElement(u,null)}),p=c()({loader:()=>n.e("@atlaskit-internal_media-client").then(n.bind(null,"/Sn5")),loading:()=>a.a.createElement(u,null),
render:(e,t)=>a.a.createElement(f,r()({},t,{withMediaClient:e.withMediaClient}))}),f=e=>{const{withMediaClient:t,dimensions:i,featureFlags:r,onClick:o}=e,s=Object(n("CzTa").c)(r),c=a.a.useMemo((()=>t(d,s)),[t,s]);return a.a.createElement(h,{dimensions:i,onClick:o},a.a.createElement(c,e))};t.a=e=>a.a.createElement(l.Provider,{value:e},a.a.createElement(p,e))},yVsE:function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(t,n,i){e.call(this),this.start=t,this._count=n,this.scheduler=i}return i(t,e),t.create=function(e,n,i){return void 0===e&&(e=0),void 0===n&&(n=0),new t(e,n,i)},t.dispatch=function(e){var t=e.start,n=e.index,i=e.count,r=e.subscriber;n>=i?r.complete():(r.next(t),r.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){
var n=0,i=this.start,r=this._count,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:n,count:r,start:i,subscriber:e});for(;;){if(n++>=r){e.complete();break}if(e.next(i++),e.closed)break}},t}(n("4c1C").Observable);t.RangeObservable=r},zgma:function(e,t,n){"use strict";(function(t,n){var i,r=function(){function e(e,t){if("function"!=typeof e)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+e+".");this._batchLoadFn=e,this._maxBatchSize=function(e){if(e&&!1===e.batch)return 1;var t=e&&e.maxBatchSize;if(void 0===t)return 1/0;if("number"!=typeof t||t<1)throw new TypeError("maxBatchSize must be a positive number: "+t);return t}(t),this._batchScheduleFn=function(e){var t=e&&e.batchScheduleFn;if(void 0===t)return o;if("function"!=typeof t)throw new TypeError("batchScheduleFn must be a function: "+t);return t}(t),this._cacheKeyFn=function(e){var t=e&&e.cacheKeyFn;if(void 0===t)return function(e){
return e};if("function"!=typeof t)throw new TypeError("cacheKeyFn must be a function: "+t);return t}(t),this._cacheMap=function(e){if(e&&!1===e.cache)return null;var t=e&&e.cacheMap;if(void 0===t)return new Map;if(null!==t){var n=["get","set","delete","clear"].filter((function(e){return t&&"function"!=typeof t[e]}));if(0!==n.length)throw new TypeError("Custom cacheMap missing methods: "+n.join(", "))}return t}(t),this._batch=null}var t=e.prototype;return t.load=function(e){if(null==e)throw new TypeError("The loader.load() function must be called with a value,but got: "+String(e)+".");var t=function(e){var t=e._batch;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize&&(!t.cacheHits||t.cacheHits.length<e._maxBatchSize))return t;var n={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=n,e._batchScheduleFn((function(){return function(e,t){if(t.hasDispatched=!0,0===t.keys.length)return void s(t);var n=e._batchLoadFn(t.keys)
;if(!n||"function"!=typeof n.then)return a(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(n)+"."));n.then((function(e){if(!c(e))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(e)+".");if(e.length!==t.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(t.keys)+"\n\nValues:\n"+String(e));s(t);for(var n=0;n<t.callbacks.length;n++){var i=e[n];i instanceof Error?t.callbacks[n].reject(i):t.callbacks[n].resolve(i)}})).catch((function(n){return a(e,t,n)}))}(e,n)})),n}(this),n=this._cacheMap,i=this._cacheKeyFn(e);if(n){
var r=n.get(i);if(r){var o=t.cacheHits||(t.cacheHits=[]);return new Promise((function(e){o.push((function(){return e(r)}))}))}}t.keys.push(e);var l=new Promise((function(e,n){t.callbacks.push({resolve:e,reject:n})}));return n&&n.set(i,l),l},t.loadMany=function(e){if(!c(e))throw new TypeError("The loader.loadMany() function must be called with Array<key> but got: "+e+".");for(var t=[],n=0;n<e.length;n++)t.push(this.load(e[n]).catch((function(e){return e})));return Promise.all(t)},t.clear=function(e){var t=this._cacheMap;if(t){var n=this._cacheKeyFn(e);t.delete(n)}return this},t.clearAll=function(){var e=this._cacheMap;return e&&e.clear(),this},t.prime=function(e,t){var n=this._cacheMap;if(n){var i,r=this._cacheKeyFn(e);if(void 0===n.get(r))t instanceof Error?(i=Promise.reject(t)).catch((function(){})):i=Promise.resolve(t),n.set(r,i)}return this},e}(),o="object"==typeof t&&"function"==typeof t.nextTick?function(e){i||(i=Promise.resolve()),i.then((function(){return t.nextTick(e)}))
}:n||setTimeout;function a(e,t,n){s(t);for(var i=0;i<t.keys.length;i++)e.clear(t.keys[i]),t.callbacks[i].reject(n)}function s(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function c(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}e.exports=r}).call(this,n("8oxB"),n("CfyG").setImmediate)}}]);try{window.__jsEvalStop("@atlaskit-internal_renderer-node_Media.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/@atlaskit-internal_renderer-node_Media.0f859d5022169e4842cf.8.js.map