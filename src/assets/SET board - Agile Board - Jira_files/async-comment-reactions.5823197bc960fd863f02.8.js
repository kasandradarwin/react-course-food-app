try{window.performance.mark("async-comment-reactions.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-comment-reactions"],{"+IWU":function(e,t,i){"use strict";var n=i("lSNA"),o=i.n(n),r=i("q1tI");class s extends r.Component{constructor(e,t){super(e),o()(this,"isUnmounted",!1),o()(this,"loaded",(e=>!!e.asyncLoadedComponent&&!!e.loadedEmojiProvider)),this.state=t,this.loadEmojiProvider(this.props.emojiProvider)}componentDidMount(){this.state.asyncLoadedComponent||this.asyncLoadComponent()}UNSAFE_componentWillReceiveProps(e){this.loadEmojiProvider(e.emojiProvider)}componentWillUnmount(){this.isUnmounted=!0}loadEmojiProvider(e){e.then((e=>{this.isUnmounted||this.setState({loadedEmojiProvider:e})})).catch((()=>{this.isUnmounted||this.setState({loadedEmojiProvider:void 0})}))}setAsyncState(e){this.isUnmounted||this.setState({asyncLoadedComponent:e})}renderLoading(){return null}render(){if(this.loaded(this.state)){
const{loadedEmojiProvider:e,asyncLoadedComponent:t}=this.state;return this.renderLoaded(e,t)}return this.renderLoading()}}s.displayName="LoadingEmojiComponent";const a=()=>(()=>i.e("@atlaskit-internal_emojiPickerComponent").then(i.bind(null,"IClw")))().then((e=>e.default));class c extends s{constructor(e){super(e,{}),o()(this,"state",{asyncLoadedComponent:c.AsyncLoadedComponent}),i("xFh9").d["emoji-picker-opened"].start()}asyncLoadComponent(){a().then((e=>{c.AsyncLoadedComponent=e,this.setAsyncState(e)}))}renderLoading(){const e=new(i("OS0S").c);return i("xFh9").d["emoji-picker-opened"].markFMP(),Object(i("AeFk").jsx)("div",{css:Object(i("nc8v").i)(),ref:e=>{this.props.onPickerRef&&this.props.onPickerRef(e)}},e.renderItem())}renderLoaded(e,t){const{emojiProvider:n,...o}=this.props;return Object(i("AeFk").jsx)(i("nfRB").a,{experiences:[i("xFh9").d["emoji-picker-opened"]]},Object(i("AeFk").jsx)(i("OVD/").a,{emojiProvider:e},Object(i("AeFk").jsx)(t,o)))}}o()(c,"defaultProps",{
size:"medium"});const d=Object(i("VHV8").a)()(c);t.a=d},"+OC9":function(e,t,i){"use strict";i.d(t,"v",(function(){return o})),i.d(t,"r",(function(){return r})),i.d(t,"o",(function(){return s})),i.d(t,"g",(function(){return d})),i.d(t,"x",(function(){return l})),i.d(t,"p",(function(){return u})),i.d(t,"w",(function(){return m})),i.d(t,"D",(function(){return p})),i.d(t,"E",(function(){return h})),i.d(t,"F",(function(){return b})),i.d(t,"C",(function(){return j})),i.d(t,"l",(function(){return g})),i.d(t,"t",(function(){return x})),i.d(t,"J",(function(){return v})),i.d(t,"q",(function(){return O})),i.d(t,"u",(function(){return k})),i.d(t,"G",(function(){return y})),i.d(t,"I",(function(){return A})),i.d(t,"y",(function(){return E})),i.d(t,"A",(function(){return F})),i.d(t,"P",(function(){return R})),i.d(t,"f",(function(){return w})),i.d(t,"z",(function(){return C})),i.d(t,"Q",(function(){return I})),i.d(t,"O",(function(){return S})),i.d(t,"N",(function(){return D})),i.d(t,"T",(function(){
return N})),i.d(t,"S",(function(){return M})),i.d(t,"U",(function(){return T})),i.d(t,"c",(function(){return _})),i.d(t,"M",(function(){return P})),i.d(t,"a",(function(){return L})),i.d(t,"i",(function(){return B})),i.d(t,"j",(function(){return z})),i.d(t,"B",(function(){return U})),i.d(t,"K",(function(){return $})),i.d(t,"H",(function(){return V})),i.d(t,"h",(function(){return H})),i.d(t,"n",(function(){return q})),i.d(t,"m",(function(){return W})),i.d(t,"s",(function(){return G})),i.d(t,"b",(function(){return K})),i.d(t,"V",(function(){return J})),i.d(t,"R",(function(){return Q})),i.d(t,"e",(function(){return Y})),i.d(t,"d",(function(){return X})),i.d(t,"k",(function(){return Z})),i.d(t,"L",(function(){return ee}));const n="emoji-common-select-on-hover",o="emoji-common-emoji-sprite",r="emoji-common-node",s="emoji-common-emoji-image",a="emoji-common-deleteButton",c="emoji-common-deletable",d={name:"19xco7i",
styles:"visibility:hidden;display:flex;position:absolute;top:-8px;right:-8px;z-index:1"},l={name:"e1q0su",styles:"flex:1;display:flex;justify-content:flex-end;padding:10px 10px 11px 0"},u=Object(i("AeFk").css)({borderRadius:"var(--ds-radius-100, 3px)",backgroundColor:"transparent",display:"inline-block",verticalAlign:"middle",margin:"-1px 0",img:{display:"block"},[`&.emoji-common-selected,&.${n}:hover`]:{backgroundColor:i("jp2e").a},[`&.emoji-common-selected,&.${n}:hover .${a}`]:{visibility:"visible"},[`&.${c}`]:{position:"relative"},[`&.${c}:focus-within .${a}`]:{visibility:"visible"},"&:focus":{boxShadow:"0 0 0 2px var(--ds-border-focused, #4C9AFF)",transitionDuration:"0s, 0.2s",outline:"none"}}),m=Object(i("AeFk").css)({display:"inline-block",margin:"-1px 0",[`&.emoji-common-selected,&.${n}:hover`]:{backgroundColor:i("jp2e").a},[`.${o}`]:{background:"transparent no-repeat",display:"inline-block",minHeight:"20px",minWidth:"20px",verticalAlign:"middle"},"&:focus":{
boxShadow:"0 0 0 2px var(--ds-border-focused, #4C9AFF)",transitionDuration:"0s, 0.2s",outline:"none"}}),p="emoji-common-placeholder",h={name:"1tzu9l",styles:"position:relative;margin:-1px 0;display:inline-block;background:var(--ds-border, #f7f7f7);border-radius:var(--ds-radius-100, 3px);overflow:hidden;vertical-align:middle;white-space:nowrap;text-align:center"},f=i("AeFk").keyframes`
  from {
    transform: translateX(-100%);
  }
  to   {
    transform: translateX(100%);
  }
`,b=Object(i("AeFk").css)({"&::before":{content:'""',display:"block",position:"absolute",background:"var(--ds-background-neutral, rgba(9, 30, 66, 0.04))",height:"100%",width:"100%",animation:`${f} 1s cubic-bezier(0.4, 0.0, 0.2, 1) infinite`}}),j={name:"1835etr",styles:"opacity:0;visibility:hidden;display:none"},g=Object(i("AeFk").css)({backgroundColor:"transparent",border:"0",borderRadius:"var(--ds-radius-100, 3px)",cursor:"pointer",padding:0,position:"relative",display:"inline-block","&::-moz-focus-inner":{border:"0 none",padding:0},"&>span":{padding:"6px",[`&>.${o}`]:{height:"24px",width:"24px"},"&>img":{height:"24px",width:"24px"}},"&:focus":{boxShadow:"0 0 0 2px var(--ds-border-focused, #4C9AFF)",transitionDuration:"0s, 0.2s",outline:"none"}}),x=Object(i("AeFk").css)({opacity:0,position:"absolute",top:"-10px",left:"-10px","+span":{borderRadius:"var(--ds-radius-100, 3px)"},"&:focus + span":{boxShadow:"0 0 0 2px var(--ds-border-focused, #4C9AFF)",transitionDuration:"0s, 0.2s",
outline:"none"}}),v={name:"1b8z6z9",styles:"display:flex;flex-direction:column;align-self:center;margin-top:-2px;margin-left:10px;max-width:285px;width:285px;flex-grow:1;flex-shrink:1"},O=Object(i("AeFk").css)({display:"block",color:"var(--ds-text, #091E42)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:first-letter":{textTransform:"uppercase"}}),k=Object(i("AeFk").css)({display:"block",color:"var(--ds-text-subtle, #6B778C)",fontSize:"12px",lineHeight:1,marginBottom:"-2px",overflow:"hidden",paddingBottom:"2px",textOverflow:"ellipsis",whiteSpace:"nowrap","&:first-of-type":{color:"var(--ds-text, #091E42)",fontSize:"14px"}}),y={name:"xc6blf",styles:"display:flex;flex-direction:row;flex-wrap:nowrap;padding:10px;height:32px;align-items:center"},A=Object(i("AeFk").css)({display:"inline-block",flex:"initial",width:"32px",[`& .${o}, span[role="img"]`]:{width:"32px",height:"32px",padding:0,maxHeight:"inherit"},'& span[role="img"] > img':{position:"relative",left:"50%",
top:"50%",transform:"translateX(-50%) translateY(-50%)",maxHeight:"32px",maxWidth:"32px",padding:0,display:"block"}}),E={name:"4ig074",styles:"height:78px;padding:10px;display:flex;flex-direction:column;justify-content:space-around"},F={name:"r8ey93",styles:"padding-bottom:7px;display:flex;justify-content:space-between;align-items:flex-end;font-size:12px"},R=Object(i("AeFk").css)({"&&":{color:"var(--ds-text-subtle, #5E6C84)"}}),w={name:"zjik7",styles:"display:flex"},C={name:"1t89zvq",styles:"font-size:11px"},I={name:"t04h3w",styles:"display:flex;justify-content:space-between;padding-bottom:7px"},S=Object(i("AeFk").css)({flex:"1 1 auto",marginRight:"5px",input:{background:"transparent",border:0,outline:"none","&:invalid":{boxShadow:"none"},"&::-ms-clear":{display:"none"}}}),D={name:"ou8xsw",styles:"flex:0 0 auto"},N={name:"9o0thy",styles:"display:flex;flex-direction:column;height:100px;padding:10px"},M=Object(i("AeFk").css)({display:"flex",justifyContent:"space-between",
alignItems:"center",background:"var(--ds-background-neutral, #F4F5F7)",borderRadius:"var(--ds-radius-100, 3px)",padding:"10px"}),T=Object(i("AeFk").css)({h5:{color:"var(--ds-text-subtle, #5E6C84)",paddingBottom:"4px",fontSize:"12px"},img:{maxHeight:"20px",maxWidth:"50px"}}),_={name:"9noowo",styles:"padding-left:4px;img{max-height:40px;max-width:100px;}"},P={name:"n5qme0",styles:"display:flex;justify-content:flex-end;align-items:center;padding-top:10px"},L={name:"udr5k",styles:"align-self:center;margin-left:10px;margin-bottom:10px"},B={name:"k4dmy0",styles:"height:100px;padding:10px;display:flex;flex-direction:column;justify-content:flex-end"},z=Object(i("AeFk").css)({height:"64px",fontSize:"12px","&:first-of-type":{color:"var(--ds-text-subtle, #5E6C84)",lineHeight:"16px"}}),U={name:"zw60t9",styles:"&&{font-size:var(--ds-font-size-075, 12px);font-weight:var(--ds-font-weight-semibold, 600);letter-spacing:-0.003em;line-height:var(--ds-font-lineHeight-100, 16px);}"
},$=Object(i("AeFk").css)({paddingLeft:Object(i("7w+A").gridSize)()/4+"px",color:"var(--ds-text-danger, #DE350B)",fontFamily:Object(i("7w+A").fontFamily)()}),V={name:"zjik7",styles:"display:flex"},H=Object(i("AeFk").css)({display:"flex",height:"40px",alignItems:"center",justifyContent:"space-between",fontSize:"var(--ds-font-size-100, 14px)",img:{maxHeight:"32px",maxWidth:"72px"},".emoji-submit-delete":{width:"84px",fontWeight:"bold",marginRight:"4px"}}),q=Object(i("AeFk").css)({display:"flex",color:"var(--ds-text-danger, #DE350B)",alignItems:"center",justifyContent:"flex-end",paddingRight:"4px"}),W=Object(i("AeFk").css)({display:"flex",color:"var(--ds-text-danger, #FF5630)",paddingRight:"10px",justifyContent:"flex-start"}),G=Object(i("AeFk").css)({display:"inline-flex",color:"var(--ds-text-danger, #DE350B)",paddingRight:"10px",justifyContent:"flex-end",alignItems:"center"}),K={name:"1vnsw82",styles:"max-width:285px"},J={name:"168k5xt",
styles:"max-width:172px;justify-content:center;font-weight:bold;margin-right:4px;div{display:flex;}"},Q={name:"24o1c1",styles:"max-width:187px;justify-content:center;margin-right:4px;div{display:flex;}"},Y={name:"3s4lj9",styles:"max-width:100px"},X={name:"15lh70q",styles:"margin-right:10px;margin-left:10px"},Z={name:"5ej25d",styles:"display:flex;justify-content:flex-end;align-items:center"},ee=Object(i("AeFk").css)({borderRadius:"3px",backgroundColor:"var(--ds-background-inverse-subtle, #505F79)",padding:"0 2px",label:"tooltip-shortcut"})},"/z5d":function(e,t,i){"use strict";i.d(t,"a",(function(){return i("/gsq").b})),i.d(t,"b",(function(){return i("/gsq").c})),i.d(t,"c",(function(){return r}));var n=i("nuSy");const o=()=>new n.c((()=>Object(i("zXes").d)("reactions")||"")()),r=()=>new n.b(o())},"28p1":function(e,t,i){"use strict";i.d(t,"a",(function(){return R}));var n=i("lSNA"),o=i.n(n),r=i("EcEN");let s,a,c,d,l,u;!function(e){e[e.EXPERIENCE_PAYLOAD=0]="EXPERIENCE_PAYLOAD",
e[e.SUBSCRIBE=1]="SUBSCRIBE",e[e.UNSUBSCRIBE=2]="UNSUBSCRIBE"}(s||(s={})),function(e){e.VISIBLE="visible",e.HIDDEN="hidden",e.MIXED="mixed"}(a||(a={})),function(e){e.fmp="fmp",e.tti="tti"}(c||(c={})),function(e){e.fmp="fmp",e.tti="tti"}(d||(d={})),function(e){e.response="response",e.result="result"}(l||(l={})),function(e){e.duration="duration"}(u||(u={}));const m=()=>{if(!globalThis.__UFO_GLOBAL_EVENT_STREAM__){const e=(()=>{const e=[];return{__buffer_only__:!0,push:t=>{e.length<250&&e.push(t)},getStream:()=>e}})();globalThis.__UFO_GLOBAL_EVENT_STREAM__=e}return globalThis.__UFO_GLOBAL_EVENT_STREAM__},p=()=>"undefined"!=typeof window;const h=new class{constructor(){o()(this,"started",!1),o()(this,"observers",[]),o()(this,"broadcast",(()=>{this.observers.forEach((e=>e())),this.observers=[]}))}start(){this.started||(this.started=!0,document.addEventListener("visibilitychange",this.broadcast),p()&&window.addEventListener("pagehide",this.broadcast))}subscribe(e){this.observers.push(e)}
unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}},f={id:"NOT_STARTED",final:!0},b={id:"STARTED"},j={id:"IN_PROGRESS"},g={id:"BLOCKED"},x={id:"RECOVERED"},v={id:"SUCCEEDED",final:!0,success:!0},O={id:"SUCCEEDED_WAITING_FOR_DEPS"},k={id:"FAILED",final:!0},y={id:"ABORTED",final:!0},A={[f.id]:[b.id],[b.id]:[j.id,g.id,v.id,O.id,k.id,y.id],[j.id]:[g.id,v.id,O.id,k.id,y.id],[g.id]:[x.id,y.id],[x.id]:[b.id,v.id,O.id,k.id,y.id],[v.id]:[b.id],[O.id]:[v.id,k.id,y.id],[k.id]:[b.id],[y.id]:[b.id]},E=()=>p()&&window.document&&"visible"!==window.document.visibilityState?a.HIDDEN:a.VISIBLE,F=e=>void 0!==e?~~e:(()=>~~performance.now())();class R extends class{constructor(e,t,n=null){o()(this,"state",f),o()(this,"instanceId",null),o()(this,"parent",null),o()(this,"category",null),o()(this,"metadata",{}),o()(this,"onDoneCallbacks",[]),o()(this,"childExperiences",[]),o()(this,"explicitTimings",{}),o()(this,"isSSROutputAsFMP",!1),o()(this,"uuid",null),o()(this,"_until",null),
o()(this,"metrics",{startTime:null,endTime:null,marks:[]}),o()(this,"performanceConfig",{}),o()(this,"setPageVisibleStateToMixed",(()=>{this.pageVisibleState=a.MIXED,h.unsubscribe(this.setPageVisibleStateToMixed)})),this.id=e,this.category=(null==t?void 0:t.category)||null,this.until=(null==t?void 0:t.until)||null,this.instanceId=n,this.handleDoneBind=this._handleDoneExperience.bind(this),this.type=t.type,this.performanceType=t.performanceType,this.performanceConfig=t.performanceConfig||{},this.config=t,this.pageVisibleState=E(),this.featureFlags=t.featureFlags||[],this.timings=t.timings||[],t.performanceType!==i("RbdO").a.PageLoad&&t.performanceType!==i("RbdO").a.PageSegmentLoad||(this.isSSROutputAsFMP=t.isSSROutputAsFMP||!1)}async transition(e,t){if(Object(i("tvGp").a)("async transition",this.id,this.state.id,e.id),((e,t)=>A[e.id]&&A[e.id].includes(t.id))(this.state,e)){
if(Object(i("tvGp").a)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} successful`,this.state.final,!e.final),e===b&&this._reset(),this.state.final&&!e.final&&(this.metrics.startTime=F(t),this.uuid=Object(r.v4)()),this.state=e,e.final){this.metrics.endTime=F(t),this._isManualStateEnabled()||m().push(((e,t)=>({type:s.UNSUBSCRIBE,payload:{experienceId:e,callback:t}}))("__SUBSCRIBE_ALL__",this.handleDoneBind));const e=await this.exportData();Object(i("tvGp").a)("this.parent",this.parent),m().push((e=>({type:s.EXPERIENCE_PAYLOAD,payload:e}))(e))}return!0}return Object(i("tvGp").a)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} unsuccessful`),Object(i("tvGp").b)(`transition of ${this.id} from ${this.state} to ${e} is not possible`),!1}async start(e){await this.transition(b,e)&&(this.pageVisibleState=E(),h.subscribe(this.setPageVisibleStateToMixed),this._isManualStateEnabled()||(Object(i("tvGp").a)("subscribed",this.id),m().push(((e,t)=>({type:s.SUBSCRIBE,payload:{
experienceId:e,callback:t}}))("__SUBSCRIBE_ALL__",this.handleDoneBind))))}mark(e,t){"fmp"!==e&&"inline-response"!==e?this._mark(e,t):Object(i("tvGp").b)("please use markFMP or markInlineResponse for specialised marks")}_mark(e,t){this.metrics.marks.push({name:e,time:F(t)}),this.transition(j)}markFMP(e){this._mark("fmp",e)}markInlineResponse(e){this._mark("inline-response",e)}_isManualStateEnabled(){return null===this.until}_validateManualState(){return!!this._isManualStateEnabled()||(Object(i("tvGp").b)('manual change of state not allowed as "until" is defined'),!1)}switchToEndState(e,t){return null!=t&&t.force||this._validateManualState()?(null!=t&&t.metadata&&this.addMetadata(t.metadata),h.unsubscribe(this.setPageVisibleStateToMixed),this.transition(e)):null}async success(e){return this.switchToEndState(v,e)}async failure(e){return this.switchToEndState(k,e)}async abort(e){return this.switchToEndState(y,e)}addMetadata(e){Object.assign(this.metadata,e)}_handleDoneExperience(e){
if(Object(i("tvGp").a)("_handleDoneExperience in",this.id,e.state,e,this._until),e.state.final&&null!==this._until){const{done:t,state:i}=this._until(e);t&&!this.state.final&&this.transition(i)}}async getId(){return this.id}async exportData(){return{id:await this.getId(),uuid:this.uuid,type:this.type,schemaVersion:"0.1.5",performanceType:this.performanceType,category:this.category,state:this.state,metadata:{...this.metadata},metrics:{...this.metrics},children:[...this.childExperiences],result:{success:!!this.state.success,startTime:this.metrics.startTime,duration:(this.metrics.endTime||0)-(this.metrics.startTime||0)},platform:this.config.platform||null,pageVisibleState:this.pageVisibleState,featureFlags:this.featureFlags,isSSROutputAsFMP:this.isSSROutputAsFMP,timings:this.timings,explicitTimings:this.explicitTimings,performanceConfig:this.performanceConfig}}_reset(){this.parent=null,this.metadata={},this.onDoneCallbacks=[],this.childExperiences=[],this.metrics={startTime:null,
endTime:null,marks:[]},this._until=this.until?this.until():null}}{}},"8ADI":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n={listHeight:i("W+Fu").i,listWidth:350,searchHeight:52,categoryHeadingHeight:30,emojiRowHeight:40,addEmojiHeight:32,loadingRowHeight:150,uploadActionHeight:40,emojiPerRow:8}},GNay:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("q1tI"),o=i.n(n);const r=({children:e,emojiContextValue:t})=>{const r=Object(n.useMemo)((()=>t),[t]);return Object(n.useEffect)((()=>{!async function(){try{await(null==r?void 0:r.emoji.emojiProvider.fetchEmojiProvider())}catch(e){Object(i("wjyn").a)("fetchEmojiProvider error catched from outside",e)}}()}),[r]),o.a.createElement(i("N+td").a.Provider,{value:r},e)}},GVy0:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=()=>{const e=Object(i("QwAD").c)();return e&&e.atlassianAccountId||null}},HHRn:function(e){e.exports=JSON.parse('{"a":"@atlaskit/emoji","b":"67.4.4"}')},
HfFq:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=e=>"medium"===e?80:"large"===e?160:0},I7Nw:function(e,t,i){"use strict";i.r(t);var n=i("q1tI"),o=i.n(n),r=i("/MKj"),s=i("nuSy"),a=i("pVnL"),c=i.n(a);i("3gNG"),i("3gNG"),i("3gNG"),i("3gNG"),i("3gNG"),i("3gNG"),i("3gNG"),i("3gNG"),i("3gNG");const d=Object(n.forwardRef)((({as:e="div",style:t,...o},r)=>n.createElement(e,c()({},o,{style:t,ref:r,className:Object(i("TCwg").a)(["_5f0qmyb0 _1bbl1y44 _1vzl1y44 _31h4idpf _70unidpf _1gtf1y44 _14akidpf _i3niidpf _uuf1idpf",o.className])}))));const l=({containerAri:e="",objectAri:t="",reactionsStore:r,showReactions:a})=>{const c=Object(i("GVy0").a)(),l=Object(i("EPof").a)(),u=Object(n.useMemo)((()=>null!=r?r:Object(i("/z5d").c)()),[r]),m=Object(n.useMemo)((()=>Object(i("/z5d").b)(l,c)),[l,c]);return a&&u&&m?Object(i("wCyq").isReactionsStylesFixEnabled)()?o.a.createElement(d,null,o.a.createElement(s.a,{ari:t,containerAri:e,store:u,emojiProvider:m,allowAllEmojis:!0
})):o.a.createElement(s.a,{ari:t,containerAri:e,store:u,emojiProvider:m,allowAllEmojis:!0}):null};l.displayName="Reactions";const u=e=>o.a.createElement(i("qAQD").a,null,o.a.createElement(l,e));u.displayName="Reactions";var m=Object(r.connect)((e=>({showReactions:Object(i("89ch").b)(e)})),{})(u);function p(e){const{issueAri:t,commentAri:i,visible:n}=e,r=null===t?void 0:t,s=null===i?void 0:i;return n?o.a.createElement(m,{containerAri:r,objectAri:s}):null}p.defaultProps={issueAri:null,visible:!1,commentAri:null};const h=()=>{const[{issueAri:e,commentAri:t}]=Object(i("g2hJ").c)(),[{isActive:n}]=Object(i("g2hJ").e)();return o.a.createElement(p,{visible:n,issueAri:e,commentAri:t})};h.displayName="ConnectedCommentReactions";t.default=h},Iiav:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("q1tI");const o=()=>{const e=Object(n.useContext)(i("N+td").a),[t,o]=Object(n.useState)(!1);if(!e)throw new Error("useEmoji must be used within EmojiContext")
;const{emojiProvider:r}=e.emoji;return Object(n.useEffect)((()=>{if((e=>{const t=e;return!!t.isUploadSupported&&!!t.uploadCustomEmoji&&!!t.prepareForUpload})(r)){(async()=>{try{const e=await r.isUploadSupported();o(e)}catch(e){return!1}})()}}),[r]),{emojiProvider:r,isUploadSupported:t}}},M3Ny:function(e,t,i){"use strict";function n(e){return!(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}i.d(t,"a",(function(){return n}))},MSKp:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(i("q1tI")),o=i("QEuf");const r=e=>n.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M12 14a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm-4.5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm9 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));r.displayName="EditorMoreIcon";var s=r;t.default=s},
"N+td":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("q1tI");const o=Object(n.createContext)(null)},OS0S:function(e,t,i){"use strict";i.d(t,"b",(function(){return m})),i.d(t,"c",(function(){return p})),i.d(t,"a",(function(){return h})),i.d(t,"d",(function(){return f}));var n=i("pVnL"),o=i.n(n),r=i("lSNA"),s=i.n(r);var a=({id:e,title:t,className:n})=>Object(i("AeFk").jsx)("div",{id:e,"data-category-id":e,className:n,"data-testid":"render-emoji-picker-categorty-heading",role:"rowheader"},Object(i("AeFk").jsx)("div",{css:i("nc8v").g},Object(i("l4Cm").m)(t)?Object(i("AeFk").jsx)(i("3e7Q").a,i("dBbw").a[t]):t)),c=i("q1tI");const d=({emojis:e,onSelected:t,onMouseMove:n,onFocus:o,title:r,showDelete:s,onDelete:a,virtualItemContext:c})=>{const{currentEmojisFocus:d,setEmojisFocus:l}=Object(i("XWUL").a)(),u=(null==c?void 0:c.index)||0,{formatMessage:m}=Object(i("3NU0").a)(),p=e=>(t,i,n)=>{l({rowIndex:u,columnIndex:e}),o&&o(t,i,n)};return Object(i("AeFk").jsx)("div",{
css:i("nc8v").m,role:"presentation"},e.map(((e,o)=>{const{shortName:c,id:l}=e,h=l?`${l}-${r}`:`${c}-${r}`,f=d.rowIndex===u&&d.columnIndex===o;return Object(i("AeFk").jsx)("span",{css:i("nc8v").h,key:h,role:"gridcell","aria-colindex":o+1},Object(i("AeFk").jsx)(i("sVlj").a,{emoji:e,selectOnHover:!0,onSelected:t,onMouseMove:n,onFocus:p(o),showDelete:s,onDelete:a,placeholderSize:24,"data-focus-index":`${u}-${o}`,tabIndex:f?0:-1,"aria-roledescription":m(i("dBbw").a.emojiButtonRoleDescription),shouldBeInteractive:!0}))})))};var l=Object(c.memo)(d);class u{constructor(e,t){this.props=e,this.height=t}}class m extends u{constructor(e){super(e,i("8ADI").a.emojiRowHeight),s()(this,"renderItem",(e=>Object(i("AeFk").jsx)(l,o()({},this.props,{virtualItemContext:e}))))}}class p extends u{constructor(){super({},i("8ADI").a.loadingRowHeight),s()(this,"renderItem",(()=>Object(i("AeFk").jsx)("div",{css:i("nc8v").n},Object(i("AeFk").jsx)("div",null,Object(i("AeFk").jsx)(i("6UK4").a,{size:"medium"})))))}}
class h extends u{constructor(e){super(e,i("8ADI").a.categoryHeadingHeight),s()(this,"renderItem",(()=>Object(i("AeFk").jsx)(a,this.props)))}}const f=(e,t)=>{const{index:n,key:o}=t,r=e[n];return Object(i("AeFk").jsx)("div",{key:o},r&&r.renderItem(t))}},"OVD/":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("q1tI"),o=i.n(n);const r=e=>e.emojiProvider?o.a.createElement(i("GNay").a,{emojiContextValue:{emoji:{emojiProvider:e.emojiProvider}}},e.children):o.a.createElement(o.a.Fragment,null,e.children)},RbdO:function(e,t,i){"use strict";let n,o;i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return o})),function(e){e.Load="load",e.Experience="experience",e.Operation="operation"}(n||(n={})),function(e){e.PageLoad="page-load",e.PageSegmentLoad="page-segment-load",e.InlineResult="inline-result",e.Custom="custom"}(o||(o={}))},RoQj:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return s}));var n=i("q1tI"),o=i.n(n)
;const r=Object(n.createContext)({currentEmojisFocus:{rowIndex:0,columnIndex:0},setEmojisFocus:()=>{}}),s=e=>{const[t,i]=Object(n.useState)(e.initialEmojisFocus);return o.a.createElement(r.Provider,{value:{currentEmojisFocus:t,setEmojisFocus:i}},e.children)}},XWUL:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("q1tI");const o=()=>Object(n.useContext)(i("RoQj").a)},Y0zm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(i("q1tI")),o=i("QEuf");const r=e=>n.default.createElement(o.Icon,Object.assign({
dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M8.049 14.197c-.166-.476.103-.991.602-1.15.5-.159 1.039.098 1.205.575.06.174.225.487.495.796.426.488.955.764 1.649.764.693 0 1.223-.276 1.65-.764.27-.31.433-.622.494-.796.166-.476.706-.734 1.204-.575.5.159.77.673.603 1.15-.13.371-.395.876-.839 1.385C14.348 16.458 13.306 17 12 17s-2.348-.542-3.112-1.418a4.382 4.382 0 01-.839-1.385zM9.5 11a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zM19 5h1a1 1 0 010 2h-1v1a1 1 0 01-2 0V7h-1a1 1 0 010-2h1V4a1 1 0 012 0v1zm-5-1.777V5.29A7 7 0 1018.71 10h2.067A9 9 0 1114 3.223z" fill="currentColor"/></svg>'},e));r.displayName="EmojiAddIcon";var s=r;t.default=s},"YFa+":function(e,t,i){"use strict";var n=i("q1tI"),o=i.n(n),r=i("CnBM");const s=i.n(r)()({loader:()=>i.e("@atlaskit-internal_resourcedEmojiComponent").then(i.bind(null,"yH3Q")).then((e=>e.ResourcedEmojiComponent)),loading:()=>null});t.a=e=>{
const{emojiId:t,optimisticImageURL:r}=e;return Object(n.useEffect)((()=>{if(t)return Object(i("xFh9").c)(t).start({samplingRate:20}),i("xFh9").d["emoji-rendered"].getInstance(t.id||t.shortName).addMetadata({source:"ResourcedEmoji",emojiId:t.id,isOptimisticImageURL:!!r}),()=>{Object(i("xFh9").c)(t).abort({metadata:{source:"ResourcedEmoji",reason:"unmount"}})}}),[t,r]),o.a.createElement(i("nfRB").a,{experiences:[i("xFh9").d["emoji-rendered"].getInstance(e.emojiId.id||e.emojiId.shortName)]},o.a.createElement(s,e))}},aQUV:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("q1tI");const o=(e,t,o)=>(Object(n.useEffect)((()=>()=>{Object(i("aGWp").a)(e).abort()}),[]),(e=>{const t=Object(n.useRef)(!1);t.current||(e(),t.current=!0)})((()=>{Object(i("aGWp").a)(e).start({samplingRate:t});const n=0===Object.keys(e.metadata).length;o&&n&&e.addMetadata(o)})),null)},boKy:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("lSNA"),o=i.n(n);class r{
constructor(e,t){o()(this,"instances",{}),this.experienceId=e,this.config=t}getInstance(e){return this.instances[e]||(this.instances[e]=new(i("28p1").a)(this.experienceId,this.config,e)),this.instances[e]}release(e){Object(i("tvGp").a)("instanceId",e),this.instances[e]&&this.instances[e].abort(),delete this.instances[e]}}},hXRZ:function(e,t,i){"use strict";var n=i("pVnL"),o=i.n(n),r=i("q1tI"),s=i.n(r);var a=e=>Object(i("AeFk").jsx)("span",{css:i("+OC9").g,className:"emoji-common-deleteButton","data-testid":"render-emoji-delete-button"},Object(i("AeFk").jsx)(i("0+Gd").a,{iconBefore:Object(i("AeFk").jsx)(i.n(i("SEpd")).a,{label:"delete-emoji",primaryColor:"var(--ds-text-subtle, #42526E)",size:"small"}),onClick:e.onClick,appearance:"subtle-link",spacing:"none",testId:"emoji-delete-button",tabIndex:-1}));const c={mac:!1,supportsIntersectionObserver:!1};"undefined"!=typeof navigator&&(c.mac=/Mac/.test(navigator.platform),
c.supportsIntersectionObserver="undefined"!=typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype);var d=c;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var m=new Map,p=new WeakMap,h=0,f=void 0;function b(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?function(e){return e?(p.has(e)||(h+=1,p.set(e,h.toString())),p.get(e)):"0"}(e.root):e[t])})).toString()}function j(e,t,i,n){if(void 0===i&&(i={}),void 0===n&&(n=f),void 0===window.IntersectionObserver&&void 0!==n){var o=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,
intersectionRatio:"number"==typeof i.threshold?i.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),function(){}}var r=function(e){var t=b(e),i=m.get(t);if(!i){var n,o=new Map,r=new IntersectionObserver((function(t){t.forEach((function(t){var i,r=t.isIntersecting&&n.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=r),null==(i=o.get(t.target))||i.forEach((function(e){e(r,t)}))}))}),e);n=r.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:r,elements:o},m.set(t,i)}return i}(i),s=r.id,a=r.observer,c=r.elements,d=c.get(e)||[];return c.has(e)||c.set(e,d),d.push(t),a.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(c.delete(e),a.unobserve(e)),0===c.size&&(a.disconnect(),m.delete(s))}}var g=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function x(e){
return"function"!=typeof e.children}var v=function(e){function t(t){var i;return(i=e.call(this,t)||this).node=null,i._unobserveCb=null,i.handleNode=function(e){i.node&&(i.unobserve(),e||i.props.triggerOnce||i.props.skip||i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=e||null,i.observeNode()},i.handleChange=function(e,t){e&&i.props.triggerOnce&&i.unobserve(),x(i.props)||i.setState({inView:e,entry:t}),i.props.onChange&&i.props.onChange(e,t)},i.state={inView:!!t.initialInView,entry:void 0},i}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}(t,e);var i=t.prototype;return i.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},i.componentWillUnmount=function(){this.unobserve(),this.node=null},i.observeNode=function(){
if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,i=e.root,n=e.rootMargin,o=e.trackVisibility,r=e.delay,s=e.fallbackInView;this._unobserveCb=j(this.node,this.handleChange,{threshold:t,root:i,rootMargin:n,trackVisibility:o,delay:r},s)}},i.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},i.render=function(){if(!x(this.props)){var e=this.state,t=e.inView,i=e.entry;return this.props.children({inView:t,entry:i,ref:this.handleNode})}var n=this.props,o=n.children,s=n.as,a=function(e,t){if(null==e)return{};var i,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(n,g);return r.createElement(s||"div",l({ref:this.handleNode},a),o)},t}(r.Component);v.displayName="InView",v.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};const O=e=>{const t=function(e){
var t=void 0===e?{}:e,i=t.threshold,n=t.delay,o=t.trackVisibility,s=t.rootMargin,a=t.root,c=t.triggerOnce,d=t.skip,l=t.initialInView,u=t.fallbackInView,m=r.useRef(),p=r.useState({inView:!!l}),h=p[0],f=p[1],b=r.useCallback((function(e){void 0!==m.current&&(m.current(),m.current=void 0),d||e&&(m.current=j(e,(function(e,t){f({inView:e,entry:t}),t.isIntersecting&&c&&m.current&&(m.current(),m.current=void 0)}),{root:a,rootMargin:s,threshold:i,trackVisibility:o,delay:n},u))}),[Array.isArray(i)?i.toString():i,a,s,c,d,o,u,n]);Object(r.useEffect)((function(){m.current||!h.entry||c||d||f({inView:!!l})}));var g=[b,h.inView,h.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}(e);return d.supportsIntersectionObserver?t:[void 0,!0]},k=function(e,t){const i=t.replace(/Mod/i,"Ctrl"),n=t.replace(/Mod/i,"Cmd");return function(e,t,i,n){return{description:e,windows:t.replace(/Mod/i,"Ctrl"),mac:i.replace(/Mod/i,"Cmd"),common:n}}(e,i,n,t)}("Backspace","Backspace");const y={ARROWLEFT:"\u2190",
ARROWRIGHT:"\u2192",ARROWUP:"\u2191",ARROWDOWN:"\u2193"};const A=s.a.memo((({description:e,shortcutOverride:t,keymap:n})=>{const o=t||n&&function(e){let t;t=d.mac?e.mac.replace(/Cmd/i,"\u2318").replace(/Shift/i,"\u21e7").replace(/Ctrl/i,"\u2303").replace(/Alt/i,"\u2325").replace(/Backspace/i,"\u232b").replace(/Enter/i,"\u23ce"):e.windows.replace(/Backspace/i,"\u232b");const i=t.split("-");let n=i[i.length-1];return 1===n.length&&(n=n.toUpperCase()),i[i.length-1]=y[n.toUpperCase()]||n,i.join(d.mac?"":"+")}(n);return o||e?Object(i("AeFk").jsx)(r.Fragment,null,e,o&&e&&"\xa0",o&&Object(i("AeFk").jsx)("span",{css:i("+OC9").L},o)):null})),E=()=>{const{formatMessage:e}=Object(i("3NU0").a)();return s.a.createElement(A,{description:e(i("dBbw").a.deleteEmojiTooltip),keymap:k})},F=({emoji:e})=>s.a.createElement(i("mAJD").a,{id:`screenreader-emoji-${e.id}`},s.a.createElement(i("3e7Q").a,o()({},i("dBbw").a.deleteEmojiTooltipForScreenreader,{values:{shortName:e.shortName}}))),R=(e,t)=>{
const{emoji:n,onDelete:o}=e;o&&o(Object(i("l4Cm").q)(n),n,t)},w=e=>{const{emoji:t,fitToHeight:n,selected:r,selectOnHover:s,className:a}=e,c=t.representation,d=c.sprite,l=`emoji-common-node ${r?"emoji-common-selected":""} ${s?"emoji-common-select-on-hover":""} ${a||""}`;let u={};n&&(u={width:`${n}px`,height:`${n}px`,minHeight:`${n}px`,minWidth:`${n}px`});const m=100/(d.column-1)*(c.xIndex-0),p=100/(d.row-1)*(c.yIndex-0),h={backgroundImage:`url(${d.url})`,backgroundPosition:`${m}% ${p}%`,backgroundSize:`${100*d.column}% ${100*d.row}%`,...u};return Object(i("AeFk").jsx)(I,o()({},e,{type:"sprite",className:l}),Object(i("AeFk").jsx)("span",{className:"emoji-common-emoji-sprite",style:h},"\xa0"))},C=e=>{const{emoji:t,fitToHeight:n,selected:s,selectOnHover:c,className:l,showDelete:u,onLoadSuccess:m,disableLazyLoad:p,autoWidth:h}=e,[f,b]=O({triggerOnce:!0
}),j=Object(i("xFh9").c)(t),g=`emoji-common-main-styles emoji-common-node ${s?"emoji-common-selected":""} ${c?"emoji-common-select-on-hover":""} emoji-common-emoji-image ${l||""} ${u?"emoji-common-deletable":""}`;let x,v,k;const y=Object(i("g7XK").d)(t,n)?t.altRepresentation:t.representation;Object(i("l4Cm").i)(y)?(k=y.imagePath,x=y.width,v=y.height):Object(i("l4Cm").l)(y)&&(k=y.mediaPath,x=y.width,v=y.height);let A={};n&&x&&v&&(A={width:h?"auto":n/v*x,height:n});const w=Object(r.useCallback)((()=>{Object(i("xFh9").a)(j,i("DhJ/").e.ONLOAD_START)||j.mark(i("DhJ/").e.ONLOAD_START)}),[j]);Object(r.useEffect)((()=>{b&&w()}),[b,w]);const C=Object(i("AeFk").jsx)("img",o()({loading:p?"eager":"lazy",src:k,key:k,alt:t.shortName,"data-emoji-short-name":t.shortName,"data-emoji-id":t.id,"data-emoji-text":t.fallback||t.shortName,className:"emoji",style:{visibility:"visible"},onError:t=>{((e,t)=>{const{emoji:n,onLoadError:o}=e;t.target&&(t.target.style.visibility="hidden")
;o&&o(Object(i("l4Cm").q)(n),n,t)})(e,t)},onLoad:()=>{const e=j.metrics.marks.find((e=>e.name===i("DhJ/").e.MOUNTED_END));Object(i("xFh9").a)(j,i("DhJ/").e.ONLOAD_START)||j.mark(i("DhJ/").e.ONLOAD_START,null==e?void 0:e.time);const n=j.metrics.marks.find((e=>e.name===i("DhJ/").e.ONLOAD_START));e&&n&&j.addMetadata({lazyLoad:n.time>e.time}),Object(i("xFh9").a)(j,i("DhJ/").e.ONLOAD_END)||j.mark(i("DhJ/").e.ONLOAD_END),j.success({metadata:{IBSupported:d.supportsIntersectionObserver}}),m&&m(t)}},A));return u?Object(i("AeFk").jsx)(i("Yto1").a,{content:Object(i("AeFk").jsx)(E,null),position:"right-start",tag:"span"},Object(i("AeFk").jsx)(I,o()({},e,{"aria-labelledby":`screenreader-emoji-${t.id}`,type:"image",className:g,ref:f,showTooltip:!1,onMouseOver:e=>{var t;null!==(t=document.activeElement)&&void 0!==t&&t.contains(e.target)||e.stopPropagation()}}),C,Object(i("AeFk").jsx)(a,{onClick:t=>R(e,t)}),Object(i("AeFk").jsx)(F,{emoji:t}))):Object(i("AeFk").jsx)(I,o()({},e,{type:"image",
className:g,ref:f}),C)},I=Object(r.forwardRef)(((e,t)=>{const{emoji:n,fitToHeight:r,selected:s,selectOnHover:a,className:c,showTooltip:d,showDelete:l,shouldBeInteractive:u=!1,tabIndex:m,onSelected:p,onMouseMove:h,onFocus:f,onDelete:b,onLoadError:j,onLoadSuccess:g,disableLazyLoad:x,autoWidth:v,children:O,type:k,...y}=e;return Object(i("AeFk").jsx)("span",o()({ref:t,"data-testid":`${k}-emoji-${n.shortName}`,"data-emoji-type":k,tabIndex:u?m||0:void 0,role:u?"button":"img",css:"sprite"===k?i("+OC9").w:i("+OC9").p,className:c,onKeyDown:t=>((e,t)=>{if(!i("W+Fu").c.includes(t.key))return;t.preventDefault(),t.stopPropagation();const{emoji:n,onSelected:o,showDelete:r}=e;!o||t.key!==i("W+Fu").d.Enter&&t.key!==i("W+Fu").d.Space||o(Object(i("l4Cm").q)(n),n,t),r&&t.key===i("W+Fu").d.Backspace&&R(e,t)})(e,t),onMouseDown:t=>{((e,t)=>{if(t.target instanceof Element&&"delete-emoji"===t.target.getAttribute("aria-label"))return;const{emoji:n,onSelected:o}=e;t.preventDefault(),
o&&Object(i("M3Ny").a)(t)&&o(Object(i("l4Cm").q)(n),n,t)})(e,t)},onMouseEnter:t=>{((e,t)=>{const{emoji:n,onMouseMove:o}=e;o&&o(Object(i("l4Cm").q)(n),n,t)})(e,t)},onFocus:t=>{((e,t)=>{const{emoji:n,onFocus:o}=e;o&&o(Object(i("l4Cm").q)(n),n,t)})(e,t)},"aria-label":n.shortName,title:d?n.shortName:void 0},y),O)}));t.a=e=>{const{emoji:t}=e;return Object(i("aQUV").a)(i("xFh9").d["emoji-rendered"].getInstance(t.id||t.shortName),20,{source:"Emoji",emojiId:t.id}),Object(r.useEffect)((()=>{const e=Object(i("xFh9").c)(t);Object(i("xFh9").a)(e,"fmp")||e.markFMP(),Object(i("xFh9").a)(e,i("DhJ/").e.MOUNTED_END)||e.mark(i("DhJ/").e.MOUNTED_END)}),[]),Object(i("l4Cm").o)(t.representation)?Object(i("AeFk").jsx)(w,e):Object(i("AeFk").jsx)(C,e)}},jp2e:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return s}))
;const n="var(--ds-border, #DFE1E6)",o="var(--ds-border, #DFE1E6)",r="var(--ds-background-neutral-subtle-hovered, #EBECF0)",s="var(--ds-background-neutral, #EBECF0)"},nc8v:function(e,t,i){"use strict";i.d(t,"i",(function(){return n})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return s})),i.d(t,"e",(function(){return a})),i.d(t,"d",(function(){return c})),i.d(t,"l",(function(){return d})),i.d(t,"r",(function(){return l})),i.d(t,"q",(function(){return u})),i.d(t,"o",(function(){return m})),i.d(t,"p",(function(){return p})),i.d(t,"n",(function(){return h})),i.d(t,"m",(function(){return f})),i.d(t,"g",(function(){return b})),i.d(t,"h",(function(){return j})),i.d(t,"j",(function(){return g})),i.d(t,"k",(function(){return x})),i.d(t,"f",(function(){return v}));const n=(e,t="medium")=>{const n=Object(i("HfFq").a)(t);return Object(i("AeFk").css)({display:"flex",flexDirection:"column",justifyContent:"space-between",
background:"var(--ds-surface-overlay, white)",border:`${i("jp2e").b} 1px solid`,borderRadius:"var(--ds-radius-100, 3px)",boxShadow:"var(--ds-shadow-overlay, 0 3px 6px rgba(0, 0, 0, 0.2))",height:`${e?i("W+Fu").h+n:295+n}px`,width:"350px",minWidth:"350px",minHeight:`${260+n}px`,maxHeight:"calc(80vh - 86px)"})},o=Object(i("AeFk").css)({flex:"0 0 auto",backgroundColor:"var(--ds-surface-sunken, #EBECF0)",button:{display:"flex"}}),r=Object(i("AeFk").css)({padding:"var(--ds-space-075, 6px) var(--ds-space-100, 8px)",display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}),s=Object(i("AeFk").css)({color:"var(--ds-text-selected, #0065FF)","&:hover":{color:"var(--ds-text-selected, #0065FF)"}}),a=Object(i("AeFk").css)({color:"var(--ds-text-subtlest, #C1C7D0)",cursor:"default","&:hover":{color:"var(--ds-text-subtlest, #C1C7D0)"}}),c=Object(i("AeFk").css)({backgroundColor:"transparent",border:0,borderRadius:"var(--ds-radius-100, 3px)",
color:"var(--ds-text-subtlest, rgba(9, 30, 66, 0.54))",cursor:"pointer",padding:"var(--ds-space-0, 0px)",transition:"color 0.2s ease","&::-moz-focus-inner":{border:"0 none",padding:"var(--ds-space-0, 0px)"},"&:hover":{color:"var(--ds-text-selected, #2684FF)"},"&:focus-visible":{boxShadow:"0 0 0 2px var(--ds-border-focused, #4C9AFF)",transitionDuration:"0s, 0.2s",outline:"none"}}),d={name:"122uufz",styles:"display:flex;flex-direction:column;flex:1 1 auto;height:0"},l={name:"x1r3en",styles:"overflow-x:hidden;overflow-y:auto;&:focus{outline:none;}padding-bottom:var(--ds-space-100, 8px)"},u={name:"o9ww1u",styles:"opacity:0.5"},m=Object(i("AeFk").css)({boxSizing:"border-box",color:"inherit",cursor:"inherit",fontSize:"14px",outline:"none",padding:"1px var(--ds-space-0, 0px) var(--ds-space-025, 2px) var(--ds-space-075, 6px)",width:"100%","&:invalid":{boxShadow:"none"},"&::-ms-clear":{display:"none"}}),p={name:"9647pa",styles:"box-sizing:border-box;padding:10px 10px 11px 10px;width:100%"},h={
name:"1ebchlz",styles:"display:flex;width:100%;height:150px;justify-content:center;align-items:center;>div{flex:0 0 auto;}"},f={name:"9kivhj",styles:"margin-left:var(--ds-space-100, 8px)"},b=Object(i("AeFk").css)({boxSizing:"border-box",color:"var(--ds-text, #091E42)",fontSize:"14px",padding:"5px var(--ds-space-100, 8px)",textTransform:"lowercase","&:first-letter":{textTransform:"uppercase"}}),j=Object(i("AeFk").css)({display:"inline-block",textAlign:"center",width:"40px","& .emoji-common-node":{cursor:"pointer",padding:"var(--ds-space-100, 8px)",borderRadius:"5px",width:"24px",height:"24px"},"& .emoji-common-placeholder":{padding:"var(--ds-space-0, 0px)",margin:"7px",minWidth:"24px",maxWidth:"24px"},"& .emoji-common-node .emoji-common-placeholder":{margin:"var(--ds-space-0, 0px)"},"& .emoji-common-node > img":{position:"relative",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)",maxHeight:"24px",maxWidth:"24px",display:"block"},
"& .emoji-common-node > .emoji-common-emoji-sprite":{height:"24px",width:"24px"}}),g={name:"ou8xsw",styles:"flex:0 0 auto"},x=Object(i("AeFk").css)({borderTop:"2px solid var(--ds-border, rgba(9, 30, 66, 0.08))",boxShadow:"0px -1px 1px 0px var(--ds-border, rgba(0, 0, 0, 0.1))"}),v=Object(i("AeFk").css)({borderBottom:"2px solid var(--ds-border, rgba(9, 30, 66, 0.08))",boxShadow:"0px 1px 1px 0px var(--ds-border, rgba(0, 0, 0, 0.1))"})},nfRB:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("q1tI"),o=i.n(n);class r extends o.a.Component{componentDidCatch(e,t){for(const i of this.props.experiences)i.failure({metadata:{source:"UfoErrorBoundary",reason:"error",error:{name:e.name,message:e.message,infoStack:t.componentStack}}})}render(){return this.props.children}}r.displayName="UfoErrorBoundary"},nuSy:function(e,t,i){"use strict";i.d(t,"c",(function(){return U})),i.d(t,"a",(function(){return Ct})),i.d(t,"b",(function(){return wt}));var n={};i.r(n),
i.d(n,"isSampled",(function(){return d})),i.d(n,"createAndFireEventInElementsChannel",(function(){return l})),i.d(n,"createAndFireSafe",(function(){return u})),i.d(n,"createRestSucceededEvent",(function(){return f})),i.d(n,"createRestFailedEvent",(function(){return b})),i.d(n,"createReactionsRenderedEvent",(function(){return j})),i.d(n,"createPickerButtonClickedEvent",(function(){return g})),i.d(n,"createPickerCancelledEvent",(function(){return x})),i.d(n,"createPickerMoreClickedEvent",(function(){return v})),i.d(n,"createReactionSelectionEvent",(function(){return O})),i.d(n,"createReactionHoveredEvent",(function(){return k})),i.d(n,"createReactionFocusedEvent",(function(){return y})),i.d(n,"createReactionClickedEvent",(function(){return A})),i.d(n,"extractErrorInfo",(function(){return E}));var o={};i.r(o),i.d(o,"ExperienceName",(function(){return R})),i.d(o,"ComponentName",(function(){return w})),i.d(o,"PickerRender",(function(){return C})),i.d(o,"ReactionsRendered",(function(){
return I})),i.d(o,"ReactionsAdd",(function(){return S})),i.d(o,"ReactionDialogOpened",(function(){return D})),i.d(o,"ReactionDialogClosed",(function(){return N})),i.d(o,"ReactionDialogSelectedReactionChanged",(function(){return M})),i.d(o,"ReactionDetailsFetch",(function(){return T})),i.d(o,"ReactionsRemove",(function(){return _})),i.d(o,"sampledReactionsRendered",(function(){return P}));var r={};i.r(r),i.d(r,"DefaultReactions",(function(){return $})),i.d(r,"ExtendedReactions",(function(){return V})),i.d(r,"DefaultReactionsByShortName",(function(){return H})),i.d(r,"ExtendedReactionsByShortName",(function(){return q})),i.d(r,"TOOLTIP_USERS_LIMIT",(function(){return W})),i.d(r,"NUMBER_OF_REACTIONS_TO_DISPLAY",(function(){return G})),i.d(r,"SAMPLING_RATE_REACTIONS_RENDERED_EXP",(function(){return K}));var s={};i.r(s),i.d(s,"isLeftClick",(function(){return J})),i.d(s,"isDefaultReaction",(function(){return Q})),i.d(s,"formatStringWithDecimal",(function(){return Z})),
i.d(s,"formatLargeNumber",(function(){return ee}));var a={};i.r(a),i.d(a,"messages",(function(){return te}));var c=i("viI9");const d=e=>1===e||0!==e&&Math.random()*e<=1,l=Object(i("qgDP").a)("fabric-elements"),u=(e,t,...i)=>{e&&l(t(...i))(e)},m=(e,t,i,n)=>(o={})=>({action:e,actionSubject:t,eventType:i,actionSubjectId:n,attributes:{...o,packageName:c.a,packageVersion:c.b}}),p=e=>e?Date.now()-e:void 0,h=e=>e?e.reacted?"existingReacted":"existingNotReacted":"new",f=e=>m("succeeded",e,"operational")(),b=(e,t)=>m("failed",e,"operational")({errorCode:t}),j=e=>m("rendered","reactionView","operational")({duration:p(e)}),g=e=>m("clicked","reactionPickerButton","ui")({reactionEmojiCount:e}),x=e=>m("cancelled","reactionPicker","ui")({duration:p(e)}),v=e=>m("clicked","reactionPicker","ui","more")({duration:p(e)}),O=(e,t,i,n)=>m("clicked","reactionPicker","ui","emoji")({duration:p(n),source:e,previousState:h(i),emojiId:t}),k=e=>m("hovered","existingReaction","ui")({duration:p(e)
}),y=e=>m("focused","existingReaction","ui")({duration:p(e)}),A=(e,t)=>m("clicked","existingReaction","ui")({added:e,emojiId:t}),E=e=>e instanceof Error?{name:e.name,message:e.message}:e,F=(e,t,i)=>({platform:{component:e},type:t,performanceType:i});let R,w;!function(e){e.REACTIONS_RENDERED="reactions-rendered",e.PICKER_OPENED="reactions-picker-opened",e.REACTION_ADDED="reaction-added",e.REACTION_REMOVED="reaction-removed",e.REACTION_DETAILS_FETCHED="reaction-details-fetched",e.REACTION_DIALOG_OPENED="reaction-dialog-opened",e.REACTION_DIALOG_CLOSED="reaction-dialog-closed",e.REACTION_DIALOG_SELECTED_REACTION_CHANGED="reaction-dialog-selected-reaction-changed"}(R||(R={})),function(e){e.PICKER_RENDERED="reactions-picker",e.REACTIONS="reactions-list",e.REACTION_ITEM="reaction-item",e.REACTION_DIALOG="reaction-dialog"}(w||(w={}))
;const C=new(i("28p1").a)(R.PICKER_OPENED,F(w.PICKER_RENDERED,i("RbdO").b.Experience,i("RbdO").a.InlineResult)),I=new(i("boKy").a)(R.REACTIONS_RENDERED,F(w.REACTIONS,i("RbdO").b.Load,i("RbdO").a.PageSegmentLoad)),S=new(i("boKy").a)(R.REACTION_ADDED,F(w.REACTIONS,i("RbdO").b.Experience,i("RbdO").a.InlineResult)),D=new(i("28p1").a)(R.REACTION_DIALOG_OPENED,F(w.REACTION_DIALOG,i("RbdO").b.Experience,i("RbdO").a.InlineResult)),N=new(i("28p1").a)(R.REACTION_DIALOG_CLOSED,F(w.REACTION_DIALOG,i("RbdO").b.Experience,i("RbdO").a.InlineResult)),M=new(i("28p1").a)(R.REACTION_DIALOG_SELECTED_REACTION_CHANGED,F(w.REACTION_DIALOG,i("RbdO").b.Experience,i("RbdO").a.InlineResult)),T=new(i("boKy").a)(R.REACTION_DETAILS_FETCHED,F(w.REACTION_ITEM,i("RbdO").b.Experience,i("RbdO").a.InlineResult)),_=new(i("boKy").a)(R.REACTION_REMOVED,F(w.REACTIONS,i("RbdO").b.Experience,i("RbdO").a.InlineResult)),P=e=>Object(i("aGWp").a)(I.getInstance(e));var L=i("lSNA"),B=i.n(L),z=i("NY1e");class U{constructor(e,t){
B()(this,"requestService",((e,t)=>z.b.requestService(this.serviceConfig,{...t,path:e}))),this.serviceConfig={url:e},this.sessionToken=t}getHeaders(){const e={Accept:"application/json","Content-Type":"application/json"};return this.sessionToken&&(e.Authorization=this.sessionToken),e}getReactions(e,t){return 0===t.length?Promise.resolve({}):this.requestService("reactions/view",{requestInit:{method:"POST",headers:this.getHeaders(),body:JSON.stringify({containerAri:e,aris:t})}})}getDetailedReaction(e,t,i){const n=`${e}|${t}|${i}`,o=this.getHeaders();return this.requestService("reactions",{queryParams:{reactionId:n},requestInit:{headers:o,method:"GET",credentials:"include"}})}addReaction(e,t,i,n){return this.requestService("reactions",{requestInit:{method:"POST",headers:this.getHeaders(),body:JSON.stringify({emojiId:i,ari:t,containerAri:e,...n?{metadata:JSON.stringify(n)}:{}}),credentials:"include"}}).then((({reactions:e})=>e))}deleteReaction(e,t,i,n){
return this.requestService("reactions",{queryParams:{ari:t,emojiId:i,containerAri:e,...n?{metadata:JSON.stringify(n)}:{}},requestInit:{method:"DELETE",headers:this.getHeaders(),credentials:"include"}}).then((({reactions:e})=>e))}}const $=[{id:"1f44d",shortName:":thumbsup:"},{id:"1f44f",shortName:":clap:"},{id:"1f525",shortName:":fire:"},{id:"2764",shortName:":heart:"},{id:"1f632",shortName:":astonished:"},{id:"1f914",shortName:":thinking:"}],V=[{id:"1f44d",shortName:":thumbsup:"},{id:"1f44f",shortName:":clap:"},{id:"1f525",shortName:":fire:"},{id:"2764",shortName:":heart:"},{id:"1f632",shortName:":astonished:"},{id:"1f914",shortName:":thinking:"},{id:"1f44e",shortName:":thumbsdown:"},{id:"1f4a1",shortName:":bulb:"},{id:"2b50",shortName:":star:"},{id:"1f49a",shortName:":green_heart:"},{id:"1f499",shortName:":blue_heart:"},{id:"1f494",shortName:":broken_heart:"},{id:"1f600",shortName:":grinning:"},{id:"1f642",shortName:":slight_smile:"
}],H=new Map($.map((e=>[e.shortName,e]))),q=new Map(V.map((e=>[e.shortName,e]))),W=5,G=9,K=50,J=e=>!(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey),Q=e=>$.some((t=>Y(t,e))),Y=(e,t)=>X(e)&&X(t)?e===t||e&&t&&e.id===t.id&&e.shortName===t.shortName:e===t,X=e=>void 0!==e.id,Z=(e,t)=>{const i=e.indexOf(".");return-1===i?e.substring(0,e.length):0===t?e.substring(0,i):e.substring(0,i+t+1)},ee=e=>{const t=e/1e3,i=e/1e6;if(e>999999999)return"999.9M+";if(e>=1e6){const t=e.toString().length;return"0"===i.toString().charAt(t-5)?Z(i.toString(),0)+"M":Z(i.toString(),1)+"M"}if(e>=1e3){const i=e.toString().length;return"0"===t.toString().charAt(i-2)?Z(t.toString(),0)+"K":Z(t.toString(),1)+"K"}return e.toString()},te=Object(i("D6b/").defineMessages)({addReaction:{id:"fabric.reactions.add",defaultMessage:"Add reaction",description:"Message for add reaction button"},loadingReactions:{id:"fabric.reactions.loading",defaultMessage:"Loading...",description:"Message while reactions are being loaded"
},moreEmoji:{id:"fabric.reactions.more.emojis",defaultMessage:"More emojis",description:'Tooltip of the "show more" button in the quick reaction selector. The full emoji selector is displayed when the user clicks on it.'},moreInfo:{id:"fabric.reactions.more.info",defaultMessage:"More info",description:"Clickable text in a tooltip that will display more information about the users who reacted"},reactWithEmoji:{id:"fabric.reactions.reactwithemoji",defaultMessage:"React with {emoji} emoji",description:"Aria label on reaction button"},unexpectedError:{id:"fabric.reactions.error.unexpected",defaultMessage:"Reactions are temporarily unavailable",description:"Unexpected error message"},otherUsers:{id:"fabric.reactions.other.reacted.users",defaultMessage:"{count, plural, one {and one other} other {and {count} others}}",description:"The number of users that have reacted similarly, but aren't shown"},closeReactionsDialog:{id:"reactions.dialog.close",defaultMessage:"Close",
description:"Close Reactions Dialog"},reactionsCount:{id:"reactions.dialog.reactions.count",defaultMessage:"{count, plural,\n        one {# reaction}\n        other {# reactions}\n      }",description:"The count of Reactions displayed in Reactions Dialog"},leftNavigateLabel:{id:"reactions.dialog.left.navigate",defaultMessage:"Left Navigate",description:"Navigation Link to navigate to left"},rightNavigateLabel:{id:"reactions.dialog.right.navigate",defaultMessage:"Right Navigate",description:"Navigation Link to navigate to right"},emojiName:{id:"reactions.dialog.emoji.name",defaultMessage:"{emojiName}",description:"Description of the emoji"},seeWhoReacted:{id:"reactions.dialog.viewall",defaultMessage:"See who reacted",description:"Link button to show who reacted in a modal"},seeWhoReactedTooltip:{id:"reactions.dialog.viewall.tooltip",defaultMessage:"View all user reactions",description:"Tooltip content of see who reacted link"}});var ie=i("q1tI"),ne=i.n(ie)
;const oe=Object(i("AeFk").css)({fontSize:11,color:"var(--ds-text-subtlest, #8993A4)",overflow:"hidden",position:"relative",padding:"4px 8px 4px 0",lineHeight:"14px"}),re={name:"1fttcpj",styles:"display:flex;flex-direction:column"},se=Object(i("AeFk").css)({color:"var(--ds-text-selected, #0052CC)"}),ae={name:"kow0uz",styles:"font-variant-numeric:tabular-nums"},ce=({highlight:e=!1,limit:t,overLimitLabel:n,className:o,value:r,animationDuration:a=i("MLoa").b})=>{const c=Object(ie.useRef)(),d=(e=>t&&n&&e>=t?n||"":0===e?"":s.formatLargeNumber(e))(r);Object(ie.useEffect)((()=>{c.current=r}),[r]);const l=Object(ie.useMemo)((()=>!!c.current&&c.current<r),[r]);return Object(i("AeFk").jsx)("div",{className:o,"data-testid":"counter-wrapper",css:oe},Object(i("AeFk").jsx)(i("MJMf").a,null,Object(i("AeFk").jsx)(i("Auoo").a,{enterFrom:l?"top":"bottom",exitTo:l?"top":"bottom",key:r,duration:a},((t,n)=>Object(i("AeFk").jsx)("div",{ref:t.ref,css:[re,Object(i("AeFk").css)({
position:"exiting"===n?"absolute":void 0})],className:t.className,"data-testid":"counter-container"},Object(i("AeFk").jsx)("span",{"data-testid":"counter_label_wrapper",css:e?[ae,se]:ae,key:r},d))))))};const de=Object(i("AeFk").keyframes)({"0%":{backgroundColor:"transparent"},"20%":{backgroundColor:"var(--ds-background-selected-pressed, #B3D4FF)",borderColor:"var(--ds-border-selected, #0065FF)"},"75%":{backgroundColor:"var(--ds-background-selected-pressed, #B3D4FF)",borderColor:"var(--ds-border-selected, #0065FF)"},"100%":{backgroundColor:"var(--ds-background-selected-pressed, #B3D4FF)",borderColor:"var(--ds-border-selected, #0065FF)"}}),le={name:"w1atjl",styles:"width:100%;height:100%"},ue=Object(i("AeFk").css)({animation:`${de} 700ms ease-in-out`}),me=e=>Object(i("AeFk").jsx)("div",{className:e.className,css:[le,e.flash&&ue],"data-testid":"flash-animation"},e.children);var pe=i("pVnL"),he=i.n(pe);const fe=Object(i("AeFk").css)({maxWidth:"150px",textOverflow:"ellipsis",
whiteSpace:"nowrap",overflow:"hidden",marginBottom:5,ul:{listStyle:"none",margin:0,padding:0,textAlign:"left"},li:{overflow:"hidden",textOverflow:"ellipsis",marginTop:5}}),be=Object(i("AeFk").css)({textTransform:"capitalize",color:"var(--ds-text-inverse, #8993A4)",fontWeight:600}),je=Object(i("AeFk").css)({color:"var(--ds-text-inverse, #8993A4)",fontWeight:300}),ge=Object(i("AeFk").css)({cursor:"pointer",textDecoration:"underline",":hover":{backgroundColor:"var(--ds-background-neutral-bold, #172B4D)",color:"var(--ds-text-inverse, #FFFFFF)"}}),xe=({children:e,emojiName:t,reaction:{users:n=[],emojiId:o=""},maxReactions:s=r.TOOLTIP_USERS_LIMIT,handleUserListClick:c,allowUserDialog:d=!1,isEnabled:l=!0})=>{const u=n&&0!==n.length&&l?Object(i("AeFk").jsx)("div",{css:fe,tabIndex:0},Object(i("AeFk").jsx)("ul",null,t?Object(i("AeFk").jsx)("li",{css:be},t):null,n.slice(0,s).map((e=>Object(i("AeFk").jsx)("li",{key:e.id},e.displayName))),Object(i("AeFk").jsx)("li",{css:d?[je,ge]:je,onClick:()=>{
d&&c&&c(o)}},n.length>s?Object(i("AeFk").jsx)(i("3e7Q").a,he()({},a.messages.otherUsers,{values:{count:n.length-s}})):d&&Object(i("AeFk").jsx)(i("3e7Q").a,a.messages.moreInfo)))):null;return Object(i("AeFk").jsx)(i("Yto1").a,{content:u,position:"bottom",testId:"render-reactionTooltip"},ne.a.Children.only(e))};const ve={name:"6r75ih",styles:"transform-origin:center center 0;line-height:12px;padding:4px 4px 4px 8px"},Oe=Object(i("AeFk").css)({display:"flex",flexDirection:"row",alignItems:"flex-start",minWidth:"36px",height:"24px",background:"transparent",border:"1px solid var(--ds-border, #DFE1E6)",boxSizing:"border-box",borderRadius:"20px",color:"var(--ds-text-subtle, #505F79)",cursor:"pointer",margin:"4px 4px 0 0",padding:0,transition:"200ms ease-in-out","&:hover":{background:"var(--ds-background-neutral-subtle-hovered, #F4F5F7)"},"&:focus":{boxShadow:"0 0 0 2px var(--ds-border-focused, #4C9AFF)",transitionDuration:"0s, 0.2s",outline:"none"},overflow:"hidden"
}),ke=Object(i("AeFk").css)({backgroundColor:"var(--ds-background-selected, #DEEBFF)",borderColor:"var(--ds-border-selected, #0065FF)","&:hover":{background:"var(--ds-background-selected-hovered, #B3D4FF)"}}),ye=Object(i("AeFk").css)({display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"10px",height:"22px"}),Ae=({emojiProvider:e,onClick:t,reaction:o,onMouseEnter:r=(()=>{}),onFocused:c=(()=>{}),className:d,flash:l=!1,handleUserListClick:u=(()=>{}),allowUserDialog:m})=>{const p=Object(i("3NU0").a)(),h=Object(ie.useRef)(),f=Object(ie.useRef)(),{createAnalyticsEvent:b}=Object(i("rZ/p").a)(),[j,g]=Object(ie.useState)(),[x,v]=Object(ie.useState)(!0),O={id:o.emojiId,shortName:""};Object(ie.useEffect)((()=>{(async()=>{const t=await Promise.resolve(e),i=await t.findById(o.emojiId);i&&g(i.name)})()}),[e,o.emojiId]);const k=Object(ie.useCallback)((e=>{if(e.preventDefault(),s.isLeftClick(e)){const{reacted:i,emojiId:r}=o;n.createAndFireSafe(b,n.createReactionClickedEvent,!i,r),
t(o.emojiId,e)}}),[b,o,t]),y=Object(ie.useCallback)((e=>{e.preventDefault(),v(!0),o.users&&o.users.length||(f.current=Date.now()),n.createAndFireSafe(b,n.createReactionHoveredEvent,f.current),r(o.emojiId,e)}),[b,o,r]),A=Object(ie.useCallback)((e=>{e.preventDefault(),v(!0),o.users&&o.users.length||(h.current=Date.now()),n.createAndFireSafe(b,n.createReactionFocusedEvent,h.current),c(o.emojiId,e)}),[b,o,c]);return Object(i("AeFk").jsx)(xe,{emojiName:j,reaction:o,handleUserListClick:e=>{u(e),v(!1)},allowUserDialog:m,isEnabled:x},Object(i("AeFk").jsx)("button",{className:d,css:[Oe,o.reacted&&ke],"aria-label":p.formatMessage(a.messages.reactWithEmoji,{emoji:j}),type:"button","data-emoji-id":o.emojiId,"data-testid":"render_reaction_wrapper",onClick:k,onMouseEnter:y,onFocus:A,"data-emoji-button-id":o.emojiId},Object(i("AeFk").jsx)(me,{flash:l,css:ye},Object(i("AeFk").jsx)("div",{css:[ve,0===o.count&&{padding:"4px 2px 4px 10px"}]},Object(i("AeFk").jsx)(i("YFa+").a,{emojiProvider:e,emojiId:O,
fitToHeight:16})),Object(i("AeFk").jsx)(ce,{value:o.count,highlight:o.reacted}))))};const Ee={name:"3lwbqm",styles:"outline:none;display:flex;background-color:transparent;border:0;border-radius:5px;cursor:pointer;margin:0;padding:10px 8px;&:hover > span{transition:transform cubic-bezier(0.23, 1, 0.32, 1) 200ms;transform:scale(1.33);}"},Fe=({emojiId:e,onClick:t,emojiProvider:n})=>{const o=Object(i("3NU0").a)();return Object(i("AeFk").jsx)("button",{"data-testid":"button-emoji-id",onClick:i=>{i.preventDefault(),t&&s.isLeftClick(i)&&t(e,void 0,i)},"aria-label":o.formatMessage(a.messages.reactWithEmoji,{emoji:e.shortName}),type:"button",css:Ee},Object(i("AeFk").jsx)(i("YFa+").a,{emojiProvider:n,emojiId:e}))};const Re={name:"zjik7",styles:"display:flex"},we=Object(i("AeFk").css)({opacity:0,outline:"none",backgroundColor:"transparent",border:0,borderRadius:`${Object(i("7w+A").borderRadius)()}px`,cursor:"pointer",margin:"4px 4px 4px 0",padding:"4px",width:"38px",verticalAlign:"top",
"&:hover":{backgroundColor:"var(--ds-background-neutral-subtle-hovered, rgba(9, 30, 66, 0.08))"}}),Ce=Object(i("AeFk").css)({backgroundColor:"var(--ds-border, rgba(9, 30, 66, 0.08))",margin:"8px 8px 8px 4px",width:"1px",height:"60%",display:"inline-block"}),Ie=({onClick:e,style:t={},className:n={},buttonStyle:o})=>Object(i("AeFk").jsx)("div",{className:n.container,css:Re,style:t.container,"data-testid":"show-more-wrapper"},Object(i("AeFk").jsx)("div",{css:Ce}),Object(i("AeFk").jsx)(i("3e7Q").a,a.messages.moreEmoji,(r=>Object(i("AeFk").jsx)(i("Yto1").a,{content:r},Object(i("AeFk").jsx)("button",{className:n.button,css:[we,o],"aria-label":a.messages.moreEmoji.defaultMessage,type:"button",style:t.button,onClick:e,"data-testid":"show-more-button"},Object(i("AeFk").jsx)(i.n(i("MSKp")).a,{label:"More"}))))));const Se={name:"1ll54lo",styles:"box-sizing:border-box;display:flex;padding:0"},De={name:"cug3zd",
styles:"display:inline-block;opacity:0;&.selected{transition:transform 200ms ease-in-out  ;transform:translateY(-48px) scale(2.667);}"},Ne=Object(i("AeFk").keyframes)({"0%":{opacity:1,transform:"scale(0.5)"},"75%":{transform:"scale(1.25)"},"100%":{opacity:1,transform:"scale(1)"}}),Me=Object(i("AeFk").css)({animation:`${Ne} 150ms ease-in-out forwards`}),Te=({emojiProvider:e,onMoreClick:t,onSelection:n,showMore:o,pickerQuickReactionEmojiIds:s=r.DefaultReactions})=>{const[a,c]=Object(ie.useState)(),d=Object(ie.useRef)([]);Object(ie.useEffect)((()=>{const e=d.current;return function(){e.forEach(clearTimeout)}}),[]);const l=(e,t,i)=>{d.current.push(window.setTimeout((()=>{n(e,t,i)}),250)),c(e)},u=e=>({animationDelay:50*e+"ms"});return Object(i("AeFk").jsx)("div",{css:Se},s?s.map(((t,n)=>{var o;return Object(i("AeFk").jsx)("div",{key:null!==(o=t.id)&&void 0!==o?o:t.shortName,className:t===a?"selected":void 0,css:[De,Me],style:u(n),"data-testid":"render-selector"
},Object(i("AeFk").jsx)(i("Yto1").a,{content:t.shortName},Object(i("AeFk").jsx)(Fe,{emojiId:t,emojiProvider:e,onClick:l})))})):null,o?Object(i("AeFk").jsx)(Ie,{key:"more",buttonStyle:Me,style:{button:u(r.DefaultReactions.length)},onClick:t}):null)},_e=({miniMode:e=!1,disabled:t=!1})=>Object(i("AeFk").css)({minWidth:"32px",height:"24px",padding:0,border:"1px solid var(--ds-border, #DFE1E6)",borderRadius:"20px",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"16px",...e&&{minWidth:"24px",padding:"4px",border:"none",borderRadius:`${Object(i("7w+A").borderRadius)()}px`},...t&&{color:"var(--ds-text-disabled, #A5ADBA) !important",cursor:"not-allowed"},"&:hover":{background:"var(--ds-background-neutral-subtle-hovered, #F4F5F7)"},"&:focus":{boxShadow:"0 0 0 2px var(--ds-border-focused, #4C9AFF)",transitionDuration:"0s, 0.2s",outline:"none"}}),Pe=ne.a.forwardRef(((e,t)=>{const{onClick:n,miniMode:o,tooltipContent:r,disabled:s=!1,ariaAttributes:a={}}=e
;return Object(i("AeFk").jsx)(i("Yto1").a,{testId:"render-tooltip-trigger",content:r},Object(i("AeFk").jsx)(i("340+").a,he()({testId:"render-trigger-button",css:_e({miniMode:o,disabled:s}),appearance:"subtle",onClick:(e,t)=>{n&&!s&&n(e,t)},"aria-disabled":s,iconBefore:Object(i("AeFk").jsx)(i.n(i("Y0zm")).a,{size:"small",label:"Add reaction"}),spacing:"none",ref:t},a)))}));const Le={name:"17ngflb",styles:"vertical-align:middle;&.miniMode{display:inline-block;}"},Be={name:"zjik7",styles:"display:flex"},ze={name:"yw2k7b",styles:":focus{outline:none;}"},Ue=Object(i("AeFk").css)({background:"var(--ds-surface-overlay, #FFFFFF)",borderRadius:`${Object(i("7w+A").borderRadius)()}px`,boxShadow:"var(--ds-shadow-overlay, 0 4px 8px -2px rgba(9, 30, 66, 0.25), 0 0 1px rgba(9, 30, 66, 0.31))","&> div":{boxShadow:void 0,marginTop:"4px",marginBottom:"4px"}});var $e=i("bJJb"),Ve=i.n($e);const He=({children:e,update:t,settings:i})=>{const n=Object(ie.useRef)(!0);return Object(ie.useLayoutEffect)((()=>{
n.current?n.current=!1:t()}),[t,i]),ne.a.createElement(ie.Fragment,null,e)},qe="emoji-picker",We=[{name:"hide",enabled:!1},{name:"offset",enabled:!0,options:{offset:[0,0]}},{name:"flip",enabled:!0,options:{flipVariations:!0,boundariesElement:"scrollParent"}},{name:"preventOverflow",enabled:!0}],Ge=ne.a.memo((e=>{const{miniMode:t,className:n,emojiProvider:r,onSelection:s,allowAllEmojis:c,disabled:d,pickerQuickReactionEmojiIds:l,onShowMore:u=(()=>{}),onOpen:m=(()=>{}),onCancel:p=(()=>{}),tooltipContent:h=Object(i("AeFk").jsx)(i("3e7Q").a,a.messages.addReaction),emojiPickerSize:f}=e,[b,j]=Object(ie.useState)(null),g=Object(ie.useRef)(null),x=Object(ie.useRef)(),[v,O]=Object(ie.useState)({isOpen:!1,showFullPicker:!!c&&Array.isArray(l)&&0===l.length});!function(e,t,i=!1,n=!0){Object(ie.useEffect)((()=>{if(n)return document.addEventListener("click",o,i),document.addEventListener("keydown",r),()=>{document.removeEventListener("click",o,i),document.removeEventListener("keydown",r)}
;function o(i){e.current&&i.target instanceof Node&&!e.current.contains(i.target)&&t("CLICK_OUTSIDE")}function r(e){const{key:i}=e;"Escape"!==i&&"Esc"!==i||t("ESCAPE")}}),[e,t,i,n])}(g,(e=>{k(),p(),b&&"ESCAPE"===e&&requestAnimationFrame((()=>b.focus()))}),!0,v.isOpen);const k=Object(ie.useCallback)((e=>{O({...v,isOpen:!1}),o.PickerRender.abort({metadata:{emojiId:e,source:"ReactionPicker",reason:"close dialog"}})}),[v]),y=Object(ie.useCallback)((e=>{e.preventDefault(),O({isOpen:!0,showFullPicker:!0}),u()}),[u]),A=Object(ie.useCallback)((e=>{e.id&&(s(e.id,v.showFullPicker?"emojiPicker":"quickSelector"),k(e.id))}),[k,s,v.showFullPicker]),E=()=>{o.PickerRender.start(),O({isOpen:!v.isOpen,showFullPicker:!!c&&Array.isArray(l)&&0===l.length}),m(),o.PickerRender.success()},F=` ${v.isOpen?"isOpen":""} ${t?"miniMode":""} ${n}`;return Object(ie.useLayoutEffect)((()=>{var e;null===(e=x.current)||void 0===e||e.call(x)}),[v]),Object(i("AeFk").jsx)("div",{className:F,css:Le,
"data-testid":"reactionPicker-testid",ref:g},Object(i("AeFk").jsx)(i("zhZB").a,null,Object(i("AeFk").jsx)(i("KEVd").a,null,(({ref:e})=>Object(i("AeFk").jsx)(Pe,{ariaAttributes:{"aria-expanded":v.isOpen,"aria-controls":qe},ref:t=>{t&&v.isOpen&&("function"==typeof e?e(t):e.current=t,j(t))},onClick:E,miniMode:t,disabled:d,tooltipContent:v.isOpen?null:h}))),v.isOpen&&Object(i("AeFk").jsx)(Ke,{settings:v},v.showFullPicker?Object(i("AeFk").jsx)(i("+IWU").a,{emojiProvider:r,onSelection:A,size:f}):Object(i("AeFk").jsx)("div",{css:Be},Object(i("AeFk").jsx)(Te,{emojiProvider:r,onSelection:A,showMore:c,onMoreClick:y,pickerQuickReactionEmojiIds:l})))))})),Ke=e=>{const{settings:t,children:n}=e,[o,r]=Object(ie.useState)(null);return(({targetRef:e,initialFocusRef:t})=>{Object(ie.useEffect)((()=>{if(!e)return;const i={clickOutsideDeactivates:!0,escapeDeactivates:!0,initialFocus:t||e,fallbackFocus:e,returnFocusOnDeactivate:!1},n=Ve()(e,i);let o=requestAnimationFrame((()=>{o=null,n.activate()}))
;return()=>{null!=o&&(cancelAnimationFrame(o),o=null),n.deactivate()}}),[e,t])})({initialFocusRef:null,targetRef:o}),Object(i("AeFk").jsx)(i("csha").a,{placement:"bottom-start",modifiers:We},(({ref:e,style:o,update:s})=>Object(i("AeFk").jsx)("div",{id:qe,"data-testid":"reactionPickerPanel-testid",style:{zIndex:i("7w+A").layers.layer(),...o},ref:t=>{t&&("function"==typeof e?e(t):e.current=t,r(t))},css:ze,tabIndex:0},Object(i("AeFk").jsx)(He,{update:s,settings:t},Object(i("AeFk").jsx)("div",{css:Ue},n)))))};let Je;!function(e){e.ready="READY",e.loading="LOADING",e.error="ERROR",e.notLoaded="NOT_LOADED",e.disabled="DISABLED"}(Je||(Je={}));const Qe=48,Ye=56*r.NUMBER_OF_REACTIONS_TO_DISPLAY+Qe-2,Xe=e=>Object(i("AeFk").css)({overflow:"hidden",maxWidth:`${Ye}px`,height:"100%",display:"flex",justifyContent:"start",position:"relative",scrollBehavior:"smooth","&:after":{content:'""',zIndex:0,display:"block",minWidth:`${e}%`,bottom:"0px",position:"absolute"}}),Ze=Object(i("AeFk").css)({"& > h1":{
fontSize:"24px!important",color:"var(--ds-text, #172B4D)"}}),et={rightEdge:270,leftEdge:90},tt=e=>Object(i("AeFk").css)({display:"flex",alignSelf:"center",lineHeight:"14px",fontSize:"11px",fontWeight:e?700:400,paddingRight:"0px",marginTop:"5px","> div":{width:"100%",padding:"0px!important",color:e?"var(--ds-text, #0052CC)!important":"2px solid var(--ds-text, #42526E)!important"}}),it=(e,t)=>Object(i("AeFk").css)({content:'""',position:"absolute",left:"0px",top:"0px",width:"48px",height:"48px",zIndex:0,background:"dark"===t?`linear-gradient(${et[e]}deg, rgba(34, 39, 43, 0.95) 40.23%, rgba(34, 39, 43, 0.55) 58.33%, rgba(34, 39, 43, 0) 77.49%)`:`linear-gradient(${et[e]}deg, rgba(255, 255, 255, 0.95) 40.23%, rgba(255, 255, 255, 0.55) 58.33%, rgba(255, 255, 255, 0) 77.49%)`}),nt=(e,t,n)=>Object(i("AeFk").css)({flexShrink:0,display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",minWidth:"48px",minHeight:"48px",marginRight:"8px",
boxSizing:"border-box",position:"relative","> div":{minWidth:"48px",minHeight:"48px",padding:"0px !important",alignItems:"center",justifyContent:"center"},"& > span":{minHeight:"16px",minWidth:"16px"},"&.disabled:after":it("rightEdge",n),"&.disabled + &.disabled:after":it("leftEdge",n),"&:after":e?{content:'""',borderBottom:"2px solid var(--ds-text, #0052CC)",width:"48px",bottom:"0px",display:"block",position:"absolute",zIndex:2}:{content:'""',borderBottom:"2px solid transparent",width:"48px",bottom:"0px",display:"block",position:"absolute",zIndex:1}}),ot=Object(i("AeFk").css)({marginTop:"24px",display:"flex",flexDirection:"column",p:{margin:0,color:"var(--ds-text, #172B4D)",textTransform:"capitalize",fontWeight:600,fontSize:16,lineHeight:"20px","> span":{marginRight:8}}}),rt=Object(i("AeFk").css)({listStyle:"none",marginTop:16,padding:0,textAlign:"left",li:{color:"var(--ds-text, #42526E)",fontSize:14}}),st={name:"p5qqdd",
styles:"display:flex;align-items:center;padding:8px 0px 8px 0px;> span{margin-left:16px;}"},at={name:"6vnq00",styles:"overflow:auto;scroll-behavior:smooth;display:flex;padding-bottom:4px;div[role=tablist]{flex-grow:1;}"},ct={name:"zsjmih",styles:"display:flex;justify-content:center;align-items:center;height:100%"},dt=({selectedEmojiId:e,emojiProvider:t,reaction:n})=>{const o=Object(i("3NU0").a)(),[r,s]=Object(ie.useState)("");Object(ie.useEffect)((()=>{(async()=>{const i=await t,n=await i.findByEmojiId({shortName:"",id:e});n&&n.name&&s(n.name)})()}),[t,e]);const c=Object(ie.useMemo)((()=>{var e;return(null===(e=n.users)||void 0===e?void 0:e.sort(((e,t)=>e.displayName.localeCompare(t.displayName))))||[]}),[n]),d=Object(i("Lylu").c)();return Object(i("AeFk").jsx)("div",he()({css:ot},d),Object(i("AeFk").jsx)("p",null,Object(i("AeFk").jsx)(i("YFa+").a,{emojiProvider:t,emojiId:{id:e,shortName:""},fitToHeight:24}),o.formatMessage(a.messages.emojiName,{emojiName:r
})),0===c.length?Object(i("AeFk").jsx)("div",{css:ct},Object(i("AeFk").jsx)(i("6UK4").a,{size:"large"})):Object(i("AeFk").jsx)("ul",{css:rt},c.map((e=>{var t;const n=null===(t=e.profilePicture)||void 0===t?void 0:t.path;return Object(i("AeFk").jsx)("li",{css:st,key:e.id},Object(i("AeFk").jsx)(i("1JKq").a,{size:"large",src:n}),Object(i("AeFk").jsx)("span",null,e.displayName))}))))},lt=({reactions:e,initialEmojiId:t,emojiProvider:n,onReactionChanged:o})=>{const[r,s]=Object(ie.useState)((()=>({index:e.findIndex((e=>e.emojiId===t)),id:t}))),{colorMode:a}=Object(i("e51u").a)(),c=Object(ie.useCallback)(((t,i)=>{if(t===r.index)return;const n=e[t].emojiId;s({index:t,id:n}),o(n,i)}),[r.index,e,o]);return Object(i("AeFk").jsx)(i("eDJ+").a,{id:"reactions-dialog-tabs",onChange:c,selected:r.index},Object(i("AeFk").jsx)("div",{css:at,id:"reactions-dialog-tabs-list"},Object(i("AeFk").jsx)(i("IB+5").a,null,e.map((e=>{const t={id:e.emojiId,shortName:""};return Object(i("AeFk").jsx)("div",{
css:nt((null==t?void 0:t.id)===r.id,r.id,a),className:"reaction-elements",key:e.emojiId,"data-testid":null==t?void 0:t.id},Object(i("AeFk").jsx)(i("GgXV").a,null,Object(i("AeFk").jsx)(i("YFa+").a,{emojiProvider:n,emojiId:t,fitToHeight:16,showTooltip:!0}),Object(i("AeFk").jsx)("div",{css:tt((null==t?void 0:t.id)===r.id)},Object(i("AeFk").jsx)(ce,{value:e.count}))))})))),e.map((e=>Object(i("AeFk").jsx)(dt,{key:e.emojiId,reaction:e,selectedEmojiId:r.id,emojiProvider:n}))))},ut=({reactions:e=[],handleCloseReactionsDialog:t=(()=>{}),emojiProvider:n,selectedEmojiId:o,handleSelectReaction:s=(()=>{})})=>{
const[c,d]=Object(ie.useState)(),[l,u]=Object(ie.useState)(null),m=Object(ie.useRef)(),p=Object(ie.useRef)(),h=Object(i("3NU0").a)(),f=Object(ie.useRef)(!1),b=Object(ie.useMemo)((()=>e.reduce(((e,t)=>e+(null==t?void 0:t.count)),0)),[e]),j=Object(ie.useMemo)((()=>e.sort(((e,t)=>(null==t?void 0:t.count)-(null==e?void 0:e.count)))),[e]),g=Object(ie.useMemo)((()=>100*Math.ceil(e.length/r.NUMBER_OF_REACTIONS_TO_DISPLAY)),[e]),x=Object(ie.useCallback)((e=>{e.forEach(((e,t)=>{var i;const n=e.target,r=null==n?void 0:n.querySelector("[data-emoji-id]"),s=null==r||null===(i=r.dataset)||void 0===i?void 0:i.emojiId;e.intersectionRatio<1?(n.classList.add("disabled"),s!==o||f.current||d(null!=r?r:void 0)):(s!==o||f.current||(f.current=!0),n.classList.remove("disabled"))}))}),[o]);Object(ie.useEffect)((()=>{if(c&&!f.current&&l){f.current=!0;const e=c.closest(".reaction-elements"),t=document.querySelector("#reactions-dialog-tabs-list"),{clientWidth:i}=(e=>({clientWidth:null==e?void 0:e.clientWidth,
scrollWidth:null==e?void 0:e.scrollWidth,scrollLeft:null==e?void 0:e.scrollLeft}))(t),n=null==e?void 0:e.offsetLeft;if(t&&n>i){const e=Math.trunc(n/i)*i;t.scrollLeft+=e}}}),[c,l]),Object(ie.useEffect)((()=>{if(l){const e={root:l,rootMargin:"0px",threshold:1};p.current=new IntersectionObserver(x,e),m.current=l.querySelectorAll(".reaction-elements"),m.current&&m.current.length>0&&m.current.forEach((e=>{var t;null==p||null===(t=p.current)||void 0===t||t.observe(e)}))}return()=>{p.current&&(p.current.disconnect(),p.current=void 0)}}),[l,e,x,o]);const v=Object(ie.useCallback)((e=>{l||u(e)}),[]);return Object(i("AeFk").jsx)(i("xGEt").a,{onClose:t,height:600,testId:"render-reactions-modal"},Object(i("AeFk").jsx)(i("S5I1").default,null,Object(i("AeFk").jsx)("div",{css:Ze},Object(i("AeFk").jsx)(i("AFFc").default,null,h.formatMessage(a.messages.reactionsCount,{count:b})))),Object(i("AeFk").jsx)(i("65si").default,null,Object(i("AeFk").jsx)("div",{css:Xe(g),ref:v},Object(i("AeFk").jsx)(lt,{
initialEmojiId:o,reactions:j,emojiProvider:n,onReactionChanged:s}))),Object(i("AeFk").jsx)(i("dtdJ").default,null,Object(i("AeFk").jsx)(i("340+").a,{appearance:"primary",onClick:t,autoFocus:!0},h.formatMessage(a.messages.closeReactionsDialog))))};const mt={name:"18y4ycy",styles:"display:inline-block;margin-top:4px"},pt={name:"16j7gy3",styles:"height:24px;line-height:24px;padding-left:0;padding-right:0;margin-top:4px;margin-left:4px"},ht={name:"mj4mk4",styles:"display:flex;flex-wrap:wrap;position:relative;align-items:center;border-radius:15px;margin-top:-4px;> :first-of-type > :first-of-type{margin-left:0;}"},ft={openDialog:o.ReactionDialogOpened,closeDialog:o.ReactionDialogClosed,selectedReactionChangeInsideDialog:o.ReactionDialogSelectedReactionChanged};function bt(e,t){switch(e){case Je.error:return t||Object(i("AeFk").jsx)(i("3e7Q").a,a.messages.unexpectedError);case Je.disabled:return null;case Je.notLoaded:case Je.loading:
return Object(i("AeFk").jsx)(i("3e7Q").a,a.messages.loadingReactions);case Je.ready:return Object(i("AeFk").jsx)(i("3e7Q").a,a.messages.addReaction)}}const jt=ne.a.memo((({flash:e={},status:t,errorMessage:o,loadReaction:r,quickReactionEmojis:s,pickerQuickReactionEmojiIds:c,getReactionDetails:l=(()=>{}),onReactionHover:u=(()=>{}),onSelection:m,reactions:p=[],emojiProvider:h,allowAllEmojis:f,onReactionClick:b,allowUserDialog:j,onDialogOpenCallback:g=(()=>{}),onDialogCloseCallback:x=(()=>{}),onDialogSelectReactionCallback:v=(()=>{}),emojiPickerSize:O="medium",miniMode:k=!1})=>{const[y,A]=Object(ie.useState)(),{createAnalyticsEvent:E}=Object(i("rZ/p").a)();let F=Object(ie.useRef)(),R=Object(ie.useRef)();Object(ie.useEffect)((()=>{t===Je.notLoaded&&r()}),[t,r]),Object(ie.useEffect)((()=>{if(t!==Je.ready)R.current=Date.now();else{var e;if(d(50))n.createAndFireSafe(E,n.createReactionsRenderedEvent,null!==(e=R.current)&&void 0!==e?e:Date.now());R.current=void 0}}),[E,t])
;const w=Object(ie.useCallback)((e=>{l(e),u(e)}),[l,u]),C=Object(ie.useCallback)((e=>{l(e)}),[l]),I=Object(ie.useCallback)((()=>{F.current=Date.now(),n.createAndFireSafe(E,n.createPickerButtonClickedEvent,p.length)}),[E,p]),S=Object(ie.useCallback)((()=>{n.createAndFireSafe(E,n.createPickerCancelledEvent,F.current),F.current=void 0}),[E]),D=Object(ie.useCallback)((()=>{n.createAndFireSafe(E,n.createPickerMoreClickedEvent,F.current)}),[E]),N=Object(ie.useCallback)(((e,t)=>{n.createAndFireSafe(E,n.createReactionSelectionEvent,t,e,p.find((t=>t.emojiId===e)),F.current),F.current=void 0,m(e)}),[E,m,p]),M=e=>{ft.openDialog.start(),A(e),g(e,"tooltip"),ft.openDialog.success({metadata:{emojiId:e,source:"Reactions",reason:"Opening dialog from emoji tooltip link successfully"}})},T=Object(ie.useMemo)((()=>{if(p.length>0||!s)return p;const{ari:e,containerAri:t,emojiIds:i}=s,n=i.filter((e=>!p.some((t=>t.emojiId===e)))).map((i=>({ari:e,containerAri:t,emojiId:i,count:0,reacted:!1})))
;return p.concat(n)}),[s,p]);return Object(i("AeFk").jsx)("div",{css:ht,"data-testid":"render-reactions"},T.map((t=>Object(i("AeFk").jsx)(Ae,{key:t.emojiId,reaction:t,emojiProvider:h,onClick:b,onMouseEnter:w,onFocused:C,flash:e[t.emojiId],handleUserListClick:M,allowUserDialog:j}))),Object(i("AeFk").jsx)(Ge,{css:mt,emojiProvider:h,allowAllEmojis:f,pickerQuickReactionEmojiIds:c,disabled:t!==Je.ready,onSelection:N,onOpen:I,onCancel:S,onShowMore:D,tooltipContent:bt(t,o),emojiPickerSize:O,miniMode:k}),j&&p.length>0&&Object(i("AeFk").jsx)(i("Yto1").a,{content:Object(i("AeFk").jsx)(i("3e7Q").a,a.messages.seeWhoReactedTooltip),hideTooltipOnClick:!0},Object(i("AeFk").jsx)(i("340+").a,{appearance:"subtle-link",onClick:()=>{ft.openDialog.start();const e=p[0].emojiId;l(e),A(e),g(e,"button"),ft.openDialog.success({metadata:{emojiId:e,source:"Reactions",reason:"Opening all reactions dialog link successfully"}})},css:pt,testId:"viewall-reacted-users-dialog"
},Object(i("AeFk").jsx)(i("3e7Q").a,a.messages.seeWhoReacted))),Object(i("AeFk").jsx)(i("GPgl").a,null,!!y&&Object(i("AeFk").jsx)(ut,{selectedEmojiId:y,reactions:T,emojiProvider:h,handleCloseReactionsDialog:(e,t)=>{ft.closeDialog.start(),A(""),x(e,t),ft.closeDialog.success({metadata:{source:"Reactions",reason:"Closing reactions dialog successfully"}})},handleSelectReaction:(e,t)=>{ft.selectedReactionChangeInsideDialog.start(),w(e),v(e,t),ft.selectedReactionChangeInsideDialog.success({metadata:{emojiId:e,source:"Reactions",reason:"Selected Emoji changed"}})}})))}));class gt extends ne.a.Component{componentDidCatch(e,t){for(const i of this.props.experiences)i.failure({metadata:{source:"UfoErrorBoundary",reason:"error",error:{name:e.name,message:e.message,infoStack:t.componentStack}}})}render(){return this.props.children}}gt.displayName="UfoErrorBoundary";var xt=i("OhBV");class vt extends ne.a.PureComponent{constructor(e){super(e),B()(this,"getPropsFromActions",(e=>{
const{mapActionsToProps:t}=this.props;return t&&(this.previousActions&&this.propsFromActions&&this.previousActions===e||(this.propsFromActions=t(e))),this.previousActions=e,this.propsFromActions})),B()(this,"getPropsFromState",(e=>{const{mapStateToProps:t}=this.props;return t?t(e):void 0})),B()(this,"handleOnChange",(()=>{this.forceUpdate()})),this.state={store:void 0}}componentDidMount(){Promise.resolve(this.props.store).then((e=>{this.setState({store:e}),e.onChange(this.handleOnChange)}))}async componentWillUnmount(){this.state.store&&this.state.store.removeOnChangeListener(this.handleOnChange)}render(){return this.state.store?this.props.children(Object.assign({},this.getPropsFromState(this.state.store.getState()),this.getPropsFromActions(this.state.store))):null}}vt.displayName="ReactionConsumer";const Ot=(e,t)=>e.count>t.count?-1:e.count<t.count?1:((e,t)=>e.localeCompare(t))(e.emojiId,t.emojiId),kt=e=>({status:Je.ready,reactions:e.filter((e=>e.count>0))}),yt=e=>({...e,
count:e.count+1,reacted:!0}),At=e=>({...e,count:e.count-1,reacted:!1}),Et=(e,t)=>e.concat(t);function Ft(e){return!e||!(401===e||403===e)}const Rt={add:o.ReactionsAdd,remove:o.ReactionsRemove,render:e=>P(e),fetchDetails:o.ReactionDetailsFetch};class wt{constructor(e,t,i){B()(this,"callbacks",[]),B()(this,"initialState",{reactions:{},flash:{}}),B()(this,"setState",(e=>{this.state={...this.state,...e},this.triggerOnChange()})),B()(this,"triggerOnChange",function(e){let t=[];return(...i)=>{0===t.length&&(window.setTimeout((()=>{e(t),t=[]})),t=[]),t.push(i)}}((()=>this.callbacks.forEach((e=>e(this.state)))))),B()(this,"setReactions",((e,t,i)=>{this.setState({reactions:{...this.state.reactions,[`${e}|${t}`]:i}})})),B()(this,"handleDetailedReactionResponse",(e=>{const{containerAri:t,ari:i,emojiId:n}=e;this.withReaction((t=>({...t,users:e.users})))(t,i,n)})),B()(this,"flash",(e=>{this.setFlash(e.containerAri,e.ari,e.emojiId,!0),
window.setTimeout((()=>this.setFlash(e.containerAri,e.ari,e.emojiId,!1)),700)})),B()(this,"optmisticUpdate",((e,t,i)=>n=>{this.withReadyReaction(e,t)((o=>{let r=!1;const s=o.reactions.map((e=>{if(e.emojiId===i){r=!0;const t=n(e);if(t)return{...t,optimisticallyUpdated:!0}}return e}));if(!r){const o=n({containerAri:e,ari:t,emojiId:i,count:0,reacted:!1});o&&s.push({...o,optimisticallyUpdated:!0})}return kt(s)}))})),B()(this,"doAddReaction",(e=>{const{containerAri:t,ari:i,emojiId:o}=e;this.optmisticUpdate(t,i,o)(yt),this.flash(e);const r=Rt.add.getInstance(`${i}|${o}`);r.start(),r.addMetadata({source:"MemoryReactionsStore",storeMetadata:this.metadata,ari:i,containerAri:t,emojiId:o}),this.client.addReaction(t,i,o,this.metadata).then((e=>{this.createAnalyticsEvent&&n.createAndFireSafe(this.createAnalyticsEvent,n.createRestSucceededEvent,"addReaction"),r.success()
})).catch((e=>(Ft(e.code)&&(this.createAnalyticsEvent&&n.createAndFireSafe(this.createAnalyticsEvent,n.createRestFailedEvent,"addReaction",e.code),r.failure({metadata:{error:E(e),reason:"addReaction fetch failed"}})),Promise.reject(e))))})),B()(this,"doRemoveReaction",(e=>{const{containerAri:t,ari:i,emojiId:n}=e,o=Rt.remove.getInstance(`${i}|${n}`);o.start(),o.addMetadata({source:"MemoryReactionsStore",storeMetadata:this.metadata,ari:i,containerAri:t,emojiId:n}),this.optmisticUpdate(t,i,n)(At),this.client.deleteReaction(t,i,n,this.metadata).then((e=>{o.success()})).catch((e=>{o.failure({metadata:{error:E(e),reason:"deleteReaction fetch failed"}})}))})),B()(this,"setCreateAnalyticsEvent",(e=>{this.createAnalyticsEvent=e})),B()(this,"getReactions",function(e){const t={};return(i,...n)=>{t[i]||(window.setTimeout((()=>{e(i,t[i]),delete t[i]})),t[i]=[]),t[i].push(n)}}(((e,t)=>{const i=Rt.render(e),o=t.reduce(Et);i.start({samplingRate:50}),i.addMetadata({source:"MemoryReactionsStore",
storeMetadata:this.metadata,containerAri:e,aris:o.join(",")}),this.client.getReactions(e,o).then((t=>{Object.keys(t).map((i=>{const n=this.getReactionsState(e,i),o=n&&n.status===Je.ready?n.reactions:void 0;this.setReactions(e,i,kt(t[i].sort((e=>e&&e.length?(e=>{const t=e.reduce(((e,t,i)=>(e[t.emojiId]=i,e)),{}),i=({emojiId:i})=>void 0===t[i]?e.length:t[i];return(e,t)=>i(e)-i(t)})(e):Ot)(o))))}))})).then((()=>{this.createAnalyticsEvent&&n.createAndFireSafe(this.createAnalyticsEvent,n.createRestSucceededEvent,"getReactions"),i.success()})).catch((t=>{Ft(t.code)&&(this.createAnalyticsEvent&&n.createAndFireSafe(this.createAnalyticsEvent,n.createRestFailedEvent,"getReactions"),i.failure({metadata:{error:E(t),reason:"getReactions fetch failed"}}));const r=o.reduce(((t,i)=>({...t,[`${e}|${i}`]:{reactions:[],status:Je.error}})),{});return this.setState({...this.state,reactions:{...this.state.reactions,...r}}),Promise.reject(t)}))}))),
B()(this,"toggleReaction",this.withReaction(this.doRemoveReaction,this.doAddReaction)),B()(this,"addReaction",this.withReaction(this.flash,this.doAddReaction)),B()(this,"getDetailedReaction",((e,t,i)=>{const n=Rt.fetchDetails.getInstance(`${t}|${i}`);n.start(),n.addMetadata({source:"MemoryReactionsStore",storeMetadata:this.metadata,ari:t,containerAri:e,emojiId:i}),this.client.getDetailedReaction(e,t,i).then((e=>{n.success(),this.handleDetailedReactionResponse(e)})).catch((e=>{n.failure({metadata:{error:E(e),reason:"getDetailedReaction fetch failed"}})}))})),B()(this,"getState",(()=>this.state)),B()(this,"onChange",(e=>{this.callbacks.push(e)})),B()(this,"removeOnChangeListener",(e=>{this.callbacks=this.callbacks.filter((t=>t!==e))})),this.client=e,this.state=null!=t?t:this.initialState,this.metadata=i}getReactionsState(e,t){return this.state.reactions[`${e}|${t}`]}setFlash(e,t,i,n){this.setState({flash:{...this.state.flash,[`${e}|${t}`]:{...this.state.flash[`${e}|${t}`],[i]:n}}})}
withReadyReaction(e,t){return i=>{const n=this.getReactionsState(e,t);if(n&&n.status===Je.ready){const o=i(n);o&&this.setReactions(e,t,o)}}}withReaction(e,t){return(i,n,o)=>{this.withReadyReaction(i,n)((r=>{const s=r.reactions.find((e=>t=>t.emojiId===e)(o))||{containerAri:i,ari:n,emojiId:o,count:0,reacted:!1},a=(s.reacted||!t?e:t)(s);if(a&&!(a instanceof Function))return kt(r.reactions.map(((e,t)=>i=>i.emojiId===e?t instanceof Function?t(i):t:i)(o,a)))}))}}}const Ct=e=>{const{ari:t,containerAri:n,store:o,...r}=e,[s,a]=Object(ie.useState)(),[c,d]=Object(ie.useState)(),l=Object(ie.useRef)(),{createAnalyticsEvent:u}=Object(i("rZ/p").a)();Object(ie.useEffect)((()=>{l.current=Rt.render(t)}),[t]),Object(ie.useEffect)((()=>function(){var e;null===(e=l.current)||void 0===e||e.abort({metadata:{source:"ConnectedReactionsView",ari:t,containerAri:n,reason:"unmount"}})}),[l,n,t]);const m=Object(ie.useCallback)((e=>((e,t,i)=>{const n=i&&i.reactions[`${e}|${t}`];if(!i||!n)return{status:Je.notLoaded,
reactions:[]};switch(n.status){case Je.ready:return{reactions:n.reactions,status:n.status,flash:i.flash[`${e}|${t}`]};case Je.error:return{status:Je.error,reactions:[]};default:return{status:Je.loading,reactions:[]}}})(n,t,e)),[n,t]),p=Object(ie.useCallback)((e=>((e,t,i)=>({loadReaction:()=>{e.getReactions(t,i)},onReactionClick:n=>{e.toggleReaction(t,i,n)},getReactionDetails:n=>{e.getDetailedReaction(t,i,n)},onSelection:n=>{e.addReaction(t,i,n)}}))(e,n,t)),[t,n]);return Object(ie.useEffect)((()=>{(async()=>{const e=await Promise.resolve(o);e.setCreateAnalyticsEvent&&u&&e.setCreateAnalyticsEvent(u);const t=m(e.getState()),i=p(e);a(t),d(i)})()}),[u,o,t,n,m,p]),Object(ie.useEffect)((()=>{const e=e=>{const t=m(e);a(t)};return(async()=>{(await Promise.resolve(o)).onChange(e)})(),function(){(async()=>{(await Promise.resolve(o)).removeOnChangeListener(e)})()}}),[m,o]),ne.a.createElement(xt.f,{data:{containerAri:n,ari:t}},ne.a.createElement(gt,{experiences:l.current?[l.current]:[]
},s&&c?ne.a.createElement(jt,he()({key:`${n}|${t}`},r,c,s)):null))}},rH8c:function(e,t,i){"use strict";const n=e=>`emoji-placeholder-${e}`;t.a=e=>{const{shortName:t,size:o=20,showTooltip:r,representation:s,loading:a=!1}=e;let c,d;if(s&&o){const e=s.width,t=s.height;e&&t&&(c=o/t*e,d=o)}const l=c||o,u={fill:"f7f7f7",minWidth:`${l}px`,width:`${l}px`,height:`${d||o}px`};return Object(i("AeFk").jsx)("span",{"data-testid":n(t),"aria-busy":a,role:"status","aria-label":t,className:"emoji-common-placeholder",css:a?[i("+OC9").E,i("+OC9").F]:i("+OC9").E,style:u,title:r?t:""})}},sVlj:function(e,t,i){"use strict";var n=i("pVnL"),o=i.n(n),r=i("q1tI"),s=i.n(r);const a=e=>{const{emoji:t,placeholderSize:n,...a}=e;Object(i("aQUV").a)(i("xFh9").d["emoji-rendered"].getInstance(t.id||t.shortName),20,{source:"CachingEmoji",emojiId:t.id}),Object(r.useEffect)((()=>{Object(i("xFh9").a)(Object(i("xFh9").c)(t),"fmp")||Object(i("xFh9").c)(t).markFMP()}),[]);return s.a.createElement(i("nfRB").a,{
experiences:[i("xFh9").d["emoji-rendered"].getInstance(e.emoji.id||e.emoji.shortName)]},(()=>Object(i("l4Cm").k)(t)?s.a.createElement(c,o()({emoji:t,placeholderSize:n},a)):s.a.createElement(i("hXRZ").a,o()({emoji:t},a)))())},c=e=>{const{emoji:t,placeholderSize:n,showTooltip:a,fitToHeight:c,children:d,...l}=e,{shortName:u,representation:m}=t,[p,h]=Object(r.useState)(),[f,b]=Object(r.useState)(!1),{emojiProvider:j}=Object(i("Iiav").a)(),g=Object(r.useCallback)((e=>{Object(i("wjyn").a)("Loading image via media cache",t.shortName),Object(i("xFh9").c)(t).mark(i("DhJ/").e.MEDIA_START),e.getMediaEmojiDescriptionURLWithInlineToken(t).then((e=>{h(e),b(!1),Object(i("xFh9").c)(t).mark(i("DhJ/").e.MEDIA_END)})).catch((e=>{h(void 0),b(!0),Object(i("xFh9").c)(t).failure({metadata:{error:Object(i("uVoC").g)(e),reason:"failed to load media emoji",source:"CachingMediaEmoji",emojiId:t.id}})}))}),[t]);Object(r.useEffect)((()=>{j&&g(j)}),[j,g]);const x=e=>{Object(i("xFh9").c)(e).failure({metadata:{
reason:"load error",source:"CachingMediaEmoji",emojiId:e.id}}),b(!0)};return p&&!f?s.a.createElement(i("hXRZ").a,o()({},l,{showTooltip:a,fitToHeight:c,emoji:p,onLoadError:x})):s.a.createElement(i("rH8c").a,{size:c||n,shortName:u,showTooltip:a,representation:m})};t.a=Object(r.memo)(a)},tvGp:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return c}));var n=i("lSNA"),o=i.n(n);class r{constructor(){o()(this,"enabled",!1)}log(...e){this.enabled&&console.log(r.UFOprefix,...e)}warn(...e){this.enabled&&console.warn(r.UFOprefix,...e)}enable(){this.enabled=!0}disable(){this.enabled=!1}}o()(r,"UFOprefix","[ufo\ud83d\udef8]");const s=new r,a=(...e)=>{s.log(...e)},c=(...e)=>{s.warn(...e)}},uVoC:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"n",(function(){return r})),i.d(t,"k",(function(){return s})),i.d(t,"h",(function(){return c})),i.d(t,"b",(function(){return d})),i.d(t,"i",(function(){return m})),i.d(t,"a",(function(){return p})),
i.d(t,"j",(function(){return h})),i.d(t,"p",(function(){return b})),i.d(t,"r",(function(){return j})),i.d(t,"q",(function(){return g})),i.d(t,"s",(function(){return v})),i.d(t,"u",(function(){return O})),i.d(t,"t",(function(){return k})),i.d(t,"w",(function(){return y})),i.d(t,"v",(function(){return A})),i.d(t,"d",(function(){return E})),i.d(t,"f",(function(){return F})),i.d(t,"e",(function(){return R})),i.d(t,"o",(function(){return w})),i.d(t,"m",(function(){return C})),i.d(t,"l",(function(){return I})),i.d(t,"g",(function(){return S}));const n=Object(i("qgDP").a)("fabric-elements"),o=(e,t,n,o,r={})=>({eventType:e,action:t,actionSubject:n,actionSubjectId:o,attributes:{packageName:i("HHRn").a,packageVersion:i("HHRn").b,...r}}),r=e=>o("operational","succeeded","recordEmojiSelection",void 0,{source:e}),s=e=>o("operational","failed","recordEmojiSelection",void 0,{source:e}),a=(e,t={},i)=>o("ui",e,"emojiPicker",i,t),c=()=>a("opened"),d=e=>a("closed",e),l=[{id:"-1f3fb",
skinToneModifier:"light"},{id:"-1f3fc",skinToneModifier:"mediumLight"},{id:"-1f3fd",skinToneModifier:"medium"},{id:"-1f3fe",skinToneModifier:"mediumDark"},{id:"-1f3ff",skinToneModifier:"dark"}],u=e=>{if(!e)return{};for(const{id:t,skinToneModifier:i}of l)if(-1!==e.indexOf(t))return{skinToneModifier:i,baseEmojiId:e.replace(t,"")};return{}},m=e=>a("clicked",{...u(e.emojiId),...e
},"emoji"),p=e=>a("clicked",e,"category"),h=e=>a("searched",e,"query"),f=(e,t={})=>o("ui",e,"emojiSkintoneSelector",void 0,t),b=e=>f("clicked",e),j=e=>f("opened",e),g=()=>f("cancelled"),x=(e,t,i)=>o("ui",e,"emojiUploader",t,i),v=()=>x("clicked","addButton"),O=e=>x("clicked","confirmButton",e),k=()=>x("clicked","cancelButton"),y=e=>o("operational","finished","emojiUploader",void 0,e),A=e=>o("operational","failed","emojiUploader",void 0,e),E=e=>o("ui","clicked","emojiPicker","deleteEmojiTrigger",e),F=e=>o("ui","clicked","emojiPicker","deleteEmojiConfirm",e),R=e=>o("ui","clicked","emojiPicker","deleteEmojiCancel",e),w=()=>o("ui","clicked","emojiUploader","selectFile"),C=e=>()=>{e&&e.createAnalyticsEvent&&Object(i("qgDP").a)("editor")(r("typeahead"))(e.createAnalyticsEvent)},I=e=>t=>(e&&e.createAnalyticsEvent&&Object(i("qgDP").a)("editor")(s("typeahead"))(e.createAnalyticsEvent),Promise.reject(t)),S=e=>e instanceof Error?{name:e.name,message:e.message}:e},viI9:function(e){
e.exports=JSON.parse('{"a":"@atlaskit/reactions","b":"22.2.8"}')}}]);try{window.__jsEvalStop("async-comment-reactions.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-comment-reactions.5823197bc960fd863f02.8.js.map