;try{window.performance.mark('jira.global,jira.general,atl.global,com.atlassian.jira.project-templates-plugin,com.pyxis.greenhopper.jira,gh-rapid-lwf-board-deferred_batch_file_eval:start');} catch(e){};;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'jira-help-tips-module/util/analytics.js' */
define("jira-help-tips/util/analytics",function(){"use strict";function t(t){return t=""+(t||""),t.replace(/\./g,"-")}function e(){return AJS&&AJS.EventQueue}function i(i,n){if(e()&&n&&n.attributes.id){var r={},u=t(n.attributes.id),a="";n.attributes.eventPrefix&&(a=n.attributes.eventPrefix,"."!==a.charAt(a.length-1)&&(a+=".")),r.name=a+"helptips."+u+"."+i,r.properties={},e().push(r)}}return{clean:t,send:i}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'jira-help-tips-module/js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){var e=s("jquery"),i=s("underscore"),t=s("wrm/context-path"),n=s("wrm/data"),r=t()+"/rest/helptips/1.0/tips",d=n.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"),a={dismissedTipIds:[],sequences:[],loaded:e.Deferred(),url:function(){return r},sync:function(s,i){var t=e.Deferred();return s||(s="get"),i||(i=null),"get"===s&&d&&d.dismissed?t.resolve(d.dismissed):e.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:i&&JSON.stringify(i),processData:!1}).done(function(s){t.resolve(s)}).fail(function(){t.reject()}),t.promise()},fetch:function(){var s=this.sync();return s.done(e.proxy(function(s){e.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var i=s.attributes.id;i?(this.dismissedTipIds.splice(e.inArray(i,this.dismissedTipIds),1),this.sync("delete",{id:i})):s._dismissed=!1},isDismissed:function(s){var i=s.attributes.id;return i?e.inArray(i,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){i.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,e.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=i.filter(s.sequences,function(e){var n=i.indexOf(s.dismissedTipIds,e.attributes.id)===-1;return n&&(e.attributes.position=t++),n}),s.sequences.length>0&&(i.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}};return a});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'jira-help-tips-module/templates/HelpTip.soy.js' */
if("undefined"==typeof AJS)var AJS={};"undefined"==typeof AJS.Templates&&(AJS.Templates={}),"undefined"==typeof AJS.Templates.HelpTip&&(AJS.Templates.HelpTip={}),AJS.Templates.HelpTip.tipContent=function(e,t){return(e.title?'<h2 class="helptip-title">'+soy.$$escapeHtml(e.title)+"</h2>":"")+'<p class="helptip-body">'+soy.$$filterNoAutoescape(e.bodyHtml)+"</p>"+(e.url?'<p><a class="helptip-link" href="'+soy.$$escapeHtml(e.url)+'" target="_blank">'+(e.linkText?soy.$$escapeHtml(e.linkText):soy.$$escapeHtml("Learn more"))+"</a></p>":"")+AJS.Templates.HelpTip.tipFooter(e)},AJS.Templates.HelpTip.tipFooter=function(e,t){return'<form class="tip-footer">'+AJS.Templates.HelpTip.nextButton(e)+AJS.Templates.HelpTip.closeButton(e)+AJS.Templates.HelpTip.sequencePaging(e)+"</form>"},AJS.Templates.HelpTip.nextButton=function(e,t){return""+(e.showNextButton?'<button class="aui-button helptip-next" type="button">'+(e.nextButtonText?soy.$$escapeHtml(e.nextButtonText):soy.$$escapeHtml("Next"))+"</button>":"")},AJS.Templates.HelpTip.closeButton=function(e,t){return""+(e.showCloseButton?'<button class="aui-button '+(e.showNextButton?" aui-button-link ":"")+' helptip-close" type="button">'+(e.closeButtonText?soy.$$escapeHtml(e.closeButtonText):soy.$$escapeHtml("Close"))+"</button>":"")},AJS.Templates.HelpTip.sequencePaging=function(e,t){return""+(e.isSequence&&e.length>1?'<span class="helptip-sequence-paging">'+soy.$$escapeHtml(e.position+1)+"/"+soy.$$escapeHtml(e.length)+"</span>":"")};;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'jira-help-tips-module/js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+d+c++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=AJS.Popups,u=AJS.Templates.HelpTip,c=0,d=(new Date).getTime(),p="jira-help-tip aui-help",f=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new b(this,t):new m(this)};n.extend(f.prototype,{show:function(i){i=i||{};var t=this,e=n.Deferred();if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&a&&a.DisplayController?a.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}});var b=function(i,t){this.initialize(i,t)};n.extend(b.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass(p)},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,c=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(u.tipContent(o.extend({showNextButton:c&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}});var m=function(i){this.initialize(i)};return n.extend(m.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass(p)},show:function(){},dismiss:function(){}}),f});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'jira-help-tips-module/js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'jira-help-tips-module/js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();;
;
/* module-key = 'jira.webresources:global-static', location = '/includes/jira/wikipreview/wiki-renderer.js' */
AJS.$(function(){AJS.$(".code-bidi-warning").tooltip()});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-header-async', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/header-async.js' */
("undefined"===typeof window?global:window).__b85c25eb273a1b11a40084d04bbc6270=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__906ea2ee8af7ec57662c322a720a678d,c=a&&a.__esModule?a:{"default":a},a=(a=__c1ce1f1e3e613f564fc234ff043570f1)&&a.__esModule?a:{"default":a},a=(0,a.default)("aui-header",{type:a.default.type.CLASSNAME,created:function(a){(0,c.default)(a)}});b.default=a;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'atlassian-nav-links-plugin/appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.loading.soyTemplateName = 'navlinks.templates.appswitcher.loading';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy79 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy79, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList87 = opt_data.list;
  var linkListLen87 = linkList87.length;
  for (var linkIndex87 = 0; linkIndex87 < linkListLen87; linkIndex87++) {
    var linkData87 = linkList87[linkIndex87];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData87.href) + '" title="' + soy.$$escapeHtml(linkData87.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData87.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  var loadingContent__soy98 = '' + navlinks.templates.appswitcher.loading(null);
  var triggerContent__soy100 = '' + navlinks.templates.appswitcher.trigger(null);
  output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy98, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy100, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy106 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy106) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy106) + '" target="_blank"></a><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher.suggestionApp';
}


navlinks.templates.appswitcher.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher.suggestionApps';
}


navlinks.templates.appswitcher.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applications.soyTemplateName = 'navlinks.templates.appswitcher.applications';
}


navlinks.templates.appswitcher.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param141 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList149 = opt_data.list;
    var linkListLen149 = linkList149.length;
    for (var linkIndex149 = 0; linkIndex149 < linkListLen149; linkIndex149++) {
      var linkData149 = linkList149[linkIndex149];
      param141 += navlinks.templates.appswitcher.applicationsSectionItem(soy.$$augmentMap(linkData149, {showDescription: opt_data.showDescription}));
    }
    param141 += '</ul>';
    output += aui.dropdown2.section({content: param141});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher.applicationsSection';
}


navlinks.templates.appswitcher.applicationsSectionItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsSectionItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsSectionItem';
}


navlinks.templates.appswitcher.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.adminSection.soyTemplateName = 'navlinks.templates.appswitcher.adminSection';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'atlassian-nav-links-plugin/appswitcher/appswitcher.js' */
var APPSWITCHER_TRIGGER_CLICK = "appswitcher.trigger.click";
var APPSWITCHER_DROPDOWN_SHOW = "appswitcher.dropdown.show";
var APPSWITCHER_DROPDOWN_DISPLAY_ERROR = "appswitcher.dropdown.display.error";
var APPSWITCHER_APP_LINK_CLICK = "appswitcher.app.link.click";
var APPSWITCHER_CONFIGURE_LINK_CLICK = "appswitcher.configure.link.click";

(function ($, NL) {
    var APP_SUGGESTION_KEY = 'isAppSuggestionAvailable';
    var SITE_ADMIN_KEY = 'isSiteAdminUser';
    var USER_ADMIN_KEY = 'isUserAdmin';
    var SWITCHER_SELECTOR = '#app-switcher';

    NL.AppSwitcher = function (options) {
        var ADMIN_EDIT_PATH = AJS.contextPath() + "/plugins/servlet/customize-application-navigator";
        var GLOBAL_BILLING_SYSTEM_DARK_FEATURE_KEY = "unified.usermanagement";
        var that = this;
        this.$dropdown = null;

        options = $.extend({
            dropdownContents: null
        }, options);

        this.getLinks = function () {
            return $.ajax({
                url: AJS.contextPath() + '/rest/menu/latest/appswitcher',
                cache: false,
                dataType: 'json'
            }).done(this.updateDropdown).fail(this.showError);
        };

        this.getDropdown = function () {
            if (!this.$dropdown) {
                this.$dropdown = $(options.dropdownContents);
                this.envData = this.$dropdown.data('environment');
            }
            return this.$dropdown;
        };

        this.updateDropdown = function (data) {
            this.getDropdown().html(navlinks.templates.appswitcher.applications({
                apps: data,
                showAdminLink: this.envData[USER_ADMIN_KEY],
                adminLink: ADMIN_EDIT_PATH
            }));

            this.bindAnalyticsHandlers();
            if (this.envData[APP_SUGGESTION_KEY] === true) {
                this.handleSuggestionApps(data);
            }
        }.bind(this);

        this.bindAnalyticsHandlers = function () {
            $(".app-switcher-trigger").on("click", function () {
                AJS.trigger("analyticsEvent", {name: APPSWITCHER_TRIGGER_CLICK});
            });

            $("#app-switcher").on("aui-dropdown2-show", function () {
                AJS.trigger("analyticsEvent", {name: APPSWITCHER_DROPDOWN_SHOW});
            });

            $('#app-switcher .nav-link').on('click', function () {
                var product = "custom";
                var productLink = $(this).find("a");
                var url = productLink.attr("href");
                var hostname = window.location.hostname;

                if (url.indexOf(hostname + "/wiki") > -1) {
                    product = "confluence";
                } else if (url.indexOf(hostname + "/build") > -1) {
                    product = "bamboo";
                } else if (url.indexOf(hostname) > -1) {
                    product = "jira";
                }

                AJS.trigger("analyticsEvent", {
                    name: APPSWITCHER_APP_LINK_CLICK,
                    data: {product: product}
                });
            });

            $('.nav-link-edit-wrapper').on('click', function () {
                AJS.trigger("analyticsEvent", {name: APPSWITCHER_CONFIGURE_LINK_CLICK});
            })
        };

        this.isBillingSystemEnabled = function () {
            return (this.envData[SITE_ADMIN_KEY] === true) && AJS.DarkFeatures.isEnabled(GLOBAL_BILLING_SYSTEM_DARK_FEATURE_KEY);
        };

        this.handleSuggestionApps = function (data) {

            var installedApps = _.map(data, function (app) {
                return app.applicationType.toLowerCase();
            });

            var $suggestionApps = $("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");
            $suggestionApps.html(navlinks.templates.appswitcher.suggestionApps);

            var apps = $suggestionApps.find('.suggestion-apps');
            var hasSuggestionApps = false;
            _.each(suggestions, function (value) {
                if (!_.contains(installedApps, value.appName)) {
                    hasSuggestionApps = true;
                    apps.append(navlinks.templates.appswitcher.suggestionApp({
                        suggestionApp: value,
                        isBillingSystemEnabled: that.isBillingSystemEnabled()
                    }));
                }
            });

            if (!hasSuggestionApps) return;

            $("#app-switcher").append($suggestionApps);

            $('.app-discovery-suggestion-app').click(function () {
                var $suggestionAppLink = $(this).find("a");
                var eventName;
                if (that.envData[SITE_ADMIN_KEY] === true) {
                    eventName = 'appswitcher.discovery.siteadmin.select.inproduct.';
                } else {
                    eventName = 'appswitcher.discovery.user.select.';
                }
                eventName = eventName + $suggestionAppLink.attr("id").toLowerCase();
                AJS.trigger("analytics", {name: eventName});
            });

            $('.app-discovery-suggestion-app').hover(function () {
                $(this).find("a").removeClass("active").removeClass("aui-dropdown2-active");
            });

            $('.app-discovery-cancel-button').click(function () {
                AJS.trigger("analytics", {name: "appswitcher.discovery.nothanks.button.click"});
                storeUserStorageData(KEY_NO_THANKS, "true");
                $suggestionApps.remove();
            });
        };

        this.showError = function () {
            AJS.trigger("analyticsEvent", {name: APPSWITCHER_DROPDOWN_DISPLAY_ERROR});
            this.getDropdown()
                .html(navlinks.templates.appswitcher.error())
                .off('.appswitcher')
                .on('click.appswitcher', '.app-switcher-retry', $.proxy(that.retryLoading, that));
        }.bind(this);

        this.retryLoading = function (e) {
            this.getDropdown().html(navlinks.templates.appswitcher.loading());
            this.getLinks();
            e && e.stopPropagation();
        };

        $(".app-switcher-trigger").on("click", function () {
            if (!this.$dropdown) {
                this.getLinks();
            }
        }.bind(this));
    };

    var KEY_NO_THANKS = "key-no-thanks";
    var suggestions = [
        {
            appName: "jira",
            appDesc: "Issue & Project Tracking Software",
            discoveryUrl: 'https://www.atlassian.com/software/jira',
            billingSystemDiscoveryUrl: '/admin/billing/addapplication'
        },
        {
            appName: "confluence",
            appDesc: "Collaboration and content sharing",
            discoveryUrl: 'https://www.atlassian.com/software/confluence',
            billingSystemDiscoveryUrl: '/admin/billing/addapplication?product=confluence.ondemand'
        }];

    var storeUserStorageData = function (key, value) {
        $.ajax({
            url: AJS.contextPath() + '/rest/menu/latest/userdata/',
            type: "PUT",
            contentType: "application/json",
            data: JSON.stringify({
                key: key,
                value: value
            })
        });
    };

    $(function () {
        if ($(SWITCHER_SELECTOR).data('is-switcher') === true) {
            new NL.AppSwitcher({
                dropdownContents: SWITCHER_SELECTOR
            });
        }
    })
}(jQuery, window.NL = (window.NL || {})));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'jira-header-plugin/soy/headerDropdown.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Menu&&(JIRA.Templates.Menu={}),"undefined"==typeof JIRA.Templates.Menu.Dropdowns&&(JIRA.Templates.Menu.Dropdowns={}),JIRA.Templates.Menu.Dropdowns.dropdown2Fragment=function(e,s){for(var t="",a=e.sections,l=a.length,o=0;o<l;o++){var n=a[o],r=n.items&&n.items.length>0;if(r){t+='<div class="aui-dropdown2-section">'+(n.label?"<strong>"+soy.$$escapeHtml(n.label)+"</strong>":"")+"<ul class='aui-list-truncate'"+(n.id?' id="'+soy.$$escapeHtml(n.id)+'"':"")+(n.style?' class="'+soy.$$escapeHtml(n.style)+'"':"")+">";for(var p=n.items,i=p.length,m=0;m<i;m++){var c=p[m];t+=JIRA.Templates.Menu.Dropdowns.dropdown2Item(c)}t+="</ul></div>"}}return t},JIRA.Templates.Menu.Dropdowns.dropdown2Item=function(e,s){var t="<li"+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+(e.style?' class="'+soy.$$escapeHtml(e.style)+'"':"")+'><a href="'+soy.$$escapeHtml(e.url)+'"'+(e.id?' id="'+soy.$$escapeHtml(e.id)+'_lnk"':"")+(e.title?' title="'+soy.$$escapeHtml(e.title)+'"':"")+' class="'+(e.iconUrl?"aui-icon-container":"")+(e.parameters&&e.parameters.class?" "+soy.$$escapeHtml(e.parameters.class):"")+'"';if(e.parameters)for(var a=soy.$$getMapKeys(e.parameters),l=a.length,o=0;o<l;o++){var n=a[o];t+="class"!=n?" "+soy.$$escapeHtml(n)+'="'+soy.$$escapeHtml(e.parameters[n])+'"':""}return t+=">"+(e.iconUrl?'<img class="icon" src="'+soy.$$escapeHtml(e.iconUrl)+'" />':"")+soy.$$escapeHtml(e.label)+"</a></li>"};;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'jira-header-plugin/js/init-dropdown2.js' */
require(["jira/ajs/ajax/smart-ajax","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(a,e,o,n,t){t(document).on("aui-responsive-menu-item-created",function(a){var e=a.originalEvent.detail.originalItem,o=a.originalEvent.detail.newItem,n=!!t(e).find(".aui-dropdown2-ajax").length;n&&t(o).find("a").addClass("aui-dropdown2-ajax")}),e("aui-dropdown2-ajax",{type:e.type.CLASSNAME,attached:function(e){var r=t(document.getElementById(e.getAttribute("aria-controls")));!r.length&&e.hasAttribute("aria-owns")&&"undefined"!=typeof console&&console.warn&&console.warn('Deprecation warning: Since AUI 5.9.4 "aria-owns" attribute has been change for "aria-controls"');var d=r.data("aui-dropdown2-ajax-key");r.on("aui-dropdown2-show.aui-dropdown2-ajax",function(e,t){r.trigger("aui-dropdown2-show-before"),d?(r.empty(),r.addClass("aui-dropdown2-loading"),a.makeRequest({url:n()+"/rest/api/1.0/menus/"+d,data:{inAdminMode:o.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(a){r.removeClass("aui-dropdown2-loading"),r.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a)),r.trigger("aui-dropdown2-show-after")}})):r.trigger("aui-dropdown2-show-after")}),e.setAttribute("data-dropdown2-loaded",""),t(e).trigger("jira-header-plugin-dropdown2-menu-loaded",{bubbles:!0})},detached:function(a){var e=t(document.getElementById(a.getAttribute("aria-controls")));e.off("aui-dropdown2-show.aui-dropdown2-ajax")}})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'jira-header-plugin/js/app-switcher-analytics.js' */
require(["jquery"],function(i){i(document).on("aui-dropdown2-show-before","#app-switcher",function(){AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.open"})}),i(document).on("click","#app-switcher a, #app-switcher button",function(n){var e,t=i(n.target),a=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",a=0):e="application",AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.click",data:{position:a,linkType:e}})}),i(document).on("aui-dropdown2-hide","#app-switcher",function(){AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.close"})})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'jira-header-plugin/js/header-analytics.js' */
require(["jira/util/logger","jquery"],function(n,e){function t(n,e){var t=void 0;return n.forEach(function(n){n.id===e&&(t=n.analyticEventKey)}),t}var i="jira.navigation.header.",o="jira.header.analytics.event",r=function(n,e){return n.some(function(n){return n.id===e})},a=function(e,r,a){var c=t(r,e),u=i+c+a;AJS.EventQueue.push({name:u}),n.trace(o)},c=e(document);c.on("click","#logo",function(){AJS.EventQueue.push({name:i+"home"}),n.trace(o)}),c.on("click","#create_link",function(){AJS.EventQueue.push({name:i+"createissue.click"})});var u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],d="#system-help-menu-content, #user-options-content, #system-admin-menu-content, #app-switcher",s=u.map(function(n){return"#"+n.id}).join(", ");c.on("aui-dropdown2-show",s,function(){var n=e(this).attr("id");r(u,n)&&a(n,u,".open")}),c.on("aui-dropdown2-hide",s,function(){var n=e(this).attr("id");r(u,n)&&a(n,u,".close")}),c.on("aui-dropdown2-show",d,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")});var l=u.reduce(function(n,e){return n+"a.aui-dropdown2-trigger[aria-controls="+e.id+"], "},"");c.on("click",l,function(){var n=this.getAttribute("aria-controls");r(u,n)&&a(n,u,".click")}),c.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(r){var a=e(r.target).closest(s).first();if(null!==a){var c=a.find("a").index(r.target),d=a.attr("id"),l=t(u,d),p=e(this).parents("ul").attr("id"),m={name:i+l+".item.click",properties:{itemIndex:c}};p&&(m.properties.itemType=p),AJS.EventQueue.push(m),n.trace(o)}})});;
;
/* module-key = 'com.atlassian.plugin.jslibs:keymaster-1.6.2', location = 'atlassian-jslibs/libs/keymaster/keymaster.js' */
!function(e){define("atlassian/libs/keymaster-1.6.2",function(){var n={};return e(n),"undefined"!=typeof module?module.exports.noConflict():n.key.noConflict()})}(function(e){function n(e,n){for(var t=e.length;t--;)if(e[t]===n)return t;return-1}function t(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function o(e){for(m in E)E[m]=e[T[m]]}function r(e){var t,r,i,l,c,u;if(t=e.keyCode,n(S,t)==-1&&S.push(t),93!=t&&224!=t||(t=91),t in E){E[t]=!0;for(i in w)w[i]==t&&(f[i]=!0)}else if(o(e),f.filter.call(this,e)&&t in C)for(u=p(),l=0;l<C[t].length;l++)if(r=C[t][l],r.scope==u||"all"==r.scope){c=r.mods.length>0;for(i in E)(!E[i]&&n(r.mods,+i)>-1||E[i]&&n(r.mods,+i)==-1)&&(c=!1);(0!=r.mods.length||E[16]||E[18]||E[17]||E[91])&&!c||r.method(e,r)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function i(e){var t,o=e.keyCode,r=n(S,o);if(r>=0&&S.splice(r,1),93!=o&&224!=o||(o=91),o in E){E[o]=!1;for(t in w)w[t]==o&&(f[t]=!1)}}function l(){for(m in E)E[m]=!1;for(m in w)f[m]=!1}function f(e,n,t){var o,r;o=g(e),void 0===t&&(t=n,n="all");for(var i=0;i<o.length;i++)r=[],e=o[i].split("+"),e.length>1&&(r=y(e),e=[e[e.length-1]]),e=e[0],e=P(e),e in C||(C[e]=[]),C[e].push({shortcut:o[i],scope:n,method:t,key:o[i],mods:r})}function c(e,n){var o,r,i,l,f,c=[];for(o=g(e),l=0;l<o.length;l++){if(r=o[l].split("+"),r.length>1&&(c=y(r),e=r[r.length-1]),e=P(e),void 0===n&&(n=p()),!C[e])return;for(i=0;i<C[e].length;i++)f=C[e][i],f.scope===n&&t(f.mods,c)&&(C[e][i]={})}}function u(e){return"string"==typeof e&&(e=P(e)),n(S,e)!=-1}function a(){return S.slice(0)}function s(e){var n=(e.target||e.srcElement).tagName;return!("INPUT"==n||"SELECT"==n||"TEXTAREA"==n)}function d(e){b=e||"all"}function p(){return b||"all"}function h(e){var n,t,o;for(n in C)for(t=C[n],o=0;o<t.length;)t[o].scope===e?t.splice(o,1):o++}function g(e){var n;return e=e.replace(/\s/g,""),n=e.split(","),""==n[n.length-1]&&(n[n.length-2]+=","),n}function y(e){for(var n=e.slice(0,e.length-1),t=0;t<n.length;t++)n[t]=w[n[t]];return n}function v(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,function(){t(window.event)})}function k(){var n=e.key;return e.key=A,n}var m,C={},E={16:!1,18:!1,17:!1,91:!1},b="all",w={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},K={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},P=function(e){return K[e]||e.toUpperCase().charCodeAt(0)},S=[];for(m=1;m<20;m++)K["f"+m]=111+m;var T={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(m in w)f[m]=!1;v(document,"keydown",function(e){r(e)}),v(document,"keyup",i),v(window,"focus",l);var A=e.key;e.key=f,e.key.setScope=d,e.key.getScope=p,e.key.deleteScope=h,e.key.filter=s,e.key.isPressed=u,e.key.getPressedKeyCodes=a,e.key.noConflict=k,e.key.unbind=c,"undefined"!=typeof module&&(module.exports=e.key)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",[],function(){"use strict";return moment});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(e){"use strict";function n(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0}var r=function(e){for(var r,t,a=e.replace(/[^A-Za-z0-9\+\/]/g,""),c=a.length,i=3*c+1>>2,d=new Uint8Array(i),o=0,s=0,f=0;f<c;f++)if(t=3&f,o|=n(a.charCodeAt(f))<<18-6*t,3===t||c-f===1){for(r=0;r<3&&s<i;r++,s++)d[s]=o>>>(16>>>r&24)&255;o=0}return d};e.base64decode=r,e.decodeBase64DataUri=function(e){var n=";base64,",t=e.slice(0,e.indexOf(n))+n,a=e.substring(t.length);return r(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["jquery","underscore","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/time","jira/flag","jira/util/navigator","exports"],function(t,e,n,a,i,r,o){"use strict";o.isKeyPasteEvent=function(t,e){var n=86,a=(e||"").indexOf("Mac")!==-1||r.isMac();return t.which===n&&(a?t.metaKey:t.ctrlKey)},o.isImagePasteEvent=function(t){if(t&&t.clipboardData){var n=e.union(e.toArray(t.clipboardData.items),e.toArray(t.clipboardData.files)),a=n.some(function(t){return t.type.indexOf("image")!==-1}),i=n.some(function(t){return t.type.indexOf("rtf")!==-1});return a&&!i}};var s=function(t){if(t.clipboardData&&t.clipboardData.types&&e.contains(t.clipboardData.types,"text/html")){var n=t.clipboardData.getData("text/html"),a=new DOMParser,i=a.parseFromString(n,"text/html"),r=i.body.querySelectorAll("img");return 1===r.length?r[0].getAttribute("src"):null}};o.getHtmlImagePaste=s,o.isHtmlImagePasteEvent=function(t){return null!=s(t)},o.isTextPasteEvent=function(t){return t.clipboardData.types&&(e.contains(t.clipboardData.types,"text/plain")||e.contains(t.clipboardData.types,"text/html"))},o.isContentEditable=function(e){return"true"==e.contentEditable||""==e.contentEditable||"inherit"==e.contentEditable&&t(e).parents().is("[contenteditable=true]")},o.isValidFileName=function(t){return!e(["\\","/",'"',":","?","*","<","|",">","!"]).any(function(e){return t.indexOf(e)>-1})},o.getTextPasteContent=function(t){return t.clipboardData.types&&e.contains(t.clipboardData.types,"text/plain")&&t.clipboardData.getData("text/plain")||""},o.getTextContent=function(e){return e?r.isIE()&&"undefined"!=typeof e.innerText?e.innerText:t(e).text():""},o.normalizePasteEvent=function(t){return t&&t.originalEvent&&t.originalEvent.clipboardData&&(t.clipboardData=t.originalEvent.clipboardData),t&&!t.clipboardData&&window.clipboardData&&(t.clipboardData={files:window.clipboardData.files,types:{contains:function(t){if("text/plain"==t)return!!window.clipboardData.getData("Text")}},getData:function(t){if("text/plain"==t)return window.clipboardData.getData("Text")}}),t},o.browserIsSupported=function(e){var n=(e||"").indexOf("Mac")!==-1||r.isMac(),a=r.isSafari(),i=r.isIE();if(n&&a)return!1;if(i&&!r.isEdge()){var o=document.documentElement.className.split(/\s+/),s=t.inArray("msie-gt-10",o)>-1,l=t.inArray("msie-gt-11",o)>-1,u=i&&s&&!l;return u}return!0},o.browserIsNativePaste=function(){return r.isChrome()||r.isSafari()},o.isWikiTextfield=function(t){return t.is(":input")&&t.hasClass("wiki-textfield")};var l=function(t){return t.is("input#summary")},u=function(n,a,i,r){var s=t(a);if((o.isWikiTextfield(s)||l(s))&&n){s.is(":focus")||s.one("focus",function(){var t=s[0];t.selectionStart=t.selectionEnd=i+n.length});var u=s.val(),c=u.substring(0,i),d=u.substring(r,u.length),f=s.data("wikiEditor");f&&f.undoRedoEl&&e.isFunction(f.undoRedoEl.recordHistoryItem)&&f.undoRedoEl.recordHistoryItem(),s.val(c+n+d),s.trigger("input"),a.selectionStart=a.selectionEnd=i+n.length,f&&f.undoRedoEl&&e.isFunction(f.undoRedoEl.updateCurrent)&&f.undoRedoEl.updateCurrent()}};o.insertToInput=u,o.getMarkup=function(t){var n=["gif"],a=["bmp","jpeg","jpg","png"],i=t.split("."),r=i[i.length-1].toLowerCase();return e.contains(n,r)?"!"+t+"!":e.contains(a,r)?"!"+t+"|thumbnail!":"[^"+t+"]"},o.insertWikiMarkup=function(t,e,n,a){var i=o.getMarkup(t);i&&(i=" "+i+" ",u(i,e,n,a))},o.loadImage=function(e){var n=new t.Deferred,a=new Image;return a.setAttribute("crossOrigin","anonymous"),a.onload=function(){n.resolve(a)},a.onerror=n.reject.bind(n),a.src=e,a.width>0&&a.height>0&&n.resolve(a),n},o.convertImageToBlob=function(e){var a=t("<canvas>").attr("width",e.width).attr("height",e.height)[0];a.getContext("2d").drawImage(e,0,0);try{if(a.mozGetAsFile)return a.mozGetAsFile("image/png");if(a.toDataURL)return new Blob([n.decodeBase64DataUri(a.toDataURL("image/png"))],{type:"image/png"})}catch(t){return null}},o.convertBlobToImage=function(t,e){var n=new Blob([t.slice()],{type:t.type});return n.lastModifiedDate=new Date,n.name=e,n},o.dropFileToElement=function(e,n){var a=e.name;a||(a=this.generateFileName(),e.name=a+".png");var i=t.Event("drop",{dataTransfer:{files:[e]},isPasteEvent:!0}),r=!1;return t(document).on("dropHandled.dropFileToElement",function(){r=!0}),n.trigger(i),t(document).off(".dropFileToElement"),r},o.generateFileName=function(){return"image-"+a().format("YYYY-MM-DD-HH-mm-ss-SSS")},o.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()},o.showErrorMsg=function(t,e){i.showErrorMsg(t,e)},o.createBlobFromFile=function(t){var e=new Blob([t.slice()],{type:t.type});return e.name=t.name,e},o.dragEventContainsFiles=function(t){if(!t.dataTransfer||!t.dataTransfer.types)return!0;var n=t.dataTransfer.types;return r.isMozilla()?e.contains(n,"application/x-moz-file"):e.contains(n,"Files")}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/Configuration.js' */
define("dndattachment/util/Configuration",["underscore"],function(n){function t(t){return n.isFunction(WRM.data)?WRM.data(t):WRM.data.claim(t)}var a="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.";return{getWRM:n.memoize(function(n){return t(a+n)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["jquery"],function(e){return Class.extend({init:function(e){this._dataTransfer=e},getFiles:function(){var n=this._dataTransfer.files,r=this._dataTransfer.items;return r&&r.length>0&&_.any(r,function(e){return!!e.webkitGetAsEntry})?this.readEntries(r):n&&n.length>0?this.readFiles(this._dataTransfer.files):(new e.Deferred).reject()},readFiles:function(n){var r=new e.Deferred;return e.when.apply(window,_.map(n,function(r){var t=new e.Deferred,i=!r.name.match(/\.([a-z0-9]+)$/i);return i&&r.size<=8192||8192==r.size||4096==r.size||r.size<=1024?this.readFileAsText(r).fail(function(){n=_(n).without(r)}).always(t.resolve.bind(t)):t.resolve(),t}.bind(this))).always(function(){r.resolve(n)}),r},readFileAsText:function(n){var r=new e.Deferred,t=new FileReader;return t.onload=function(){r.resolve(this.result)},t.onerror=function(){r.reject(this.error)},t.readAsText(n),r},readEntries:function(n){var r=new e.Deferred;return n=_.filter(n,function(e){return"file"===e.kind}),e.when.apply(window,_.map(n,function(e){return this.readEntry(e.webkitGetAsEntry(),e)}.bind(this))).then(function(){r.resolve(_.union.apply(_,arguments))},r.reject.bind(r)),r},readEntry:function(n,r){var t=new e.Deferred;return n.isFile?r&&r.getAsFile?t.resolve([r.getAsFile()]):n.file(function(e){t.resolve([e])}):n.isDirectory&&n.createReader().readEntries(function(n){var r=[];e.when.apply(window,_.map(n,function(e){return this.readEntry(e).then(function(e){return r.push.apply(r,e)})}.bind(this))).always(function(){t.resolve(r)})}.bind(this)),t}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){function n(n){return n>u?t(n):n>i?r(n):e(n)}function t(n){var t=n/u;return t.toFixed(2)+a}function r(n){var t=Math.round(n/i);return t+o}function e(n){var t=n/i;return t.toFixed(1)+o}var i=1024,u=i*i,o=" kB",a=" MB";return{format:n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'jira-dnd-attachment-module/js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["jira/util/events","dndattachment/util/events/types","underscore","jquery","dndattachment/ctrlv/utility","exports","dndattachment/upload/default/executor"],function(e,t,n,i,a,r,o){var u,l,s=[],c=function(e,t){return n.find(s,function(n){return n.isValid(e,t)})},f=function(e,t){var r=i.Deferred(),o=JIRA.Dialog.current;if(o){AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste",data:{}});var l=a.createBlobFromFile(t.files[0]);a.dropFileToElement(l,o.$form)&&r.resolve([t.files[0].name])}else{var s=c(e,t);s&&(r=s.processFiles(t.files,u),t.successCallback&&r.done(t.successCallback),t.failureCallback&&r.fail(t.failureCallback),t.alwaysCallback&&r.always(t.alwaysCallback))}r.done(function(e,r){if(!r&&t.isWikiTextfieldFocused){var u=t.wikiTextfield;n.each(e,function(e){a.insertWikiMarkup(e,u,u.selectionStart,u.selectionStart)}),o&&t.isPaste&&AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}}),i(t.wikiTextfield).is(":focus")||setTimeout(function(){t.wikiTextfield.focus()},0)}})},d=function(e){if(e){var t="undefined"!=typeof e.isValid,n="undefined"!=typeof e.processFiles,i="undefined"!=typeof e.weight,a="undefined"!=typeof e.name;return t&&n&&i&&a}return!1};r.registerExecutor=function(e){var t=d(e);if(t){var i=n.reject(s,function(t){return t.name===e.name});i.push(e),s=n.sortBy(i,function(e){return-e.weight})}return t},r.unregisterExecutor=function(e){s=n.reject(s,function(t){return t.name===e.name})},r.initialize=function(){e.bind(t.ATTACHMENT_FOR_PAGE_RECEIVED,f)},r.disable=function(){e.unbind(t.ATTACHMENT_FOR_PAGE_RECEIVED,f)},r.setAttachmentDropZone=function(e){u=e,this.setCurrentDropZone(e)},r.isDefaultExecutor=function(e){var t=c(null,e);return t&&t.name===o.name},r.setCurrentDropZone=function(e){l=e},r.doUpload=function(e){return!(!l||!l.browseFilesAndUpload)&&l.browseFilesAndUpload(i.Event("upload"),e)},r.disconnectCurrentDropZone=function(){l=u}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'jira-dnd-attachment-module/js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["jquery","underscore","dndattachment/ctrlv/utility","exports"],function(t,e,n,u){u.name="Default attachment executor",u.weight=0,u.isValid=function(t,e){return!0},u.processFiles=function(t,e){return e.uploadFiles(t)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachments-api', location = 'jira-dnd-attachment-module/js/AttachmentsAPI.js' */
define("jira/attachments/api",["dndattachment/upload/handler"],function(n){return{doUpload:function(a){return n.doUpload(a)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/aui.js' */
define("wiki-edit/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/jira.js' */
define("wiki-edit/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/keymaster.js' */
define("wiki-edit/keymaster",["wiki-edit/aui","atlassian/libs/keymaster-1.6.2"],function(e,i){return e.Meta.get("keyboard-shortcuts-enabled")===!1?function(){}:i});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/templates/wiki-editor.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Plugins&&(JIRA.Templates.Plugins={}),"undefined"==typeof JIRA.Templates.Plugins.WikiEditor&&(JIRA.Templates.Plugins.WikiEditor={}),JIRA.Templates.Plugins.WikiEditor.renderEditor=function(i,t){var e='<div id="wiki-edit-dropdown2-text-style-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="paragraph" title="'+soy.$$escapeHtml("Paragraph")+'">'+soy.$$escapeHtml("Paragraph")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h1" data-operation="h1" title="'+soy.$$escapeHtml("Heading 1")+'">'+soy.$$escapeHtml("Heading 1")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h2" data-operation="h2" title="'+soy.$$escapeHtml("Heading 2")+'">'+soy.$$escapeHtml("Heading 2")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h3" data-operation="h3" title="'+soy.$$escapeHtml("Heading 3")+'">'+soy.$$escapeHtml("Heading 3")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h4" data-operation="h4" title="'+soy.$$escapeHtml("Heading 4")+'">'+soy.$$escapeHtml("Heading 4")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h5" data-operation="h5" title="'+soy.$$escapeHtml("Heading 5")+'">'+soy.$$escapeHtml("Heading 5")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h6" data-operation="h6" title="'+soy.$$escapeHtml("Heading 6")+'">'+soy.$$escapeHtml("Heading 6")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-monospace" data-operation="monospace" title="'+soy.$$escapeHtml("Preformatted")+'">'+soy.$$escapeHtml("Preformatted")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="paragraph-quote" title="'+soy.$$escapeHtml("Paragraph quote")+'">'+soy.$$escapeHtml("Paragraph quote")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="block-quote" title="'+soy.$$escapeHtml("Block quote")+'">'+soy.$$escapeHtml("Block quote")+'</a></li></ul></div></div><div id="wiki-edit-dropdown2-more-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="delete" data-shortcut="ctrl+shift+s, command+shift+s" title="'+soy.$$escapeHtml("Strikethrough")+" ("+soy.$$escapeHtml(i.controlKey)+'+Shift+S)">'+soy.$$escapeHtml("Strikethrough")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="superscript">'+soy.$$escapeHtml("Superscript")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="subscript">'+soy.$$escapeHtml("Subscript")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="cite">'+soy.$$escapeHtml("Citation")+'</a></li></ul></div></div><div id="wiki-edit-dropdown2-link-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-link"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="link" data-shortcut="ctrl+k, command+k" title="'+soy.$$escapeHtml("External link")+" ("+soy.$$escapeHtml(i.controlKey)+'+K)">'+soy.$$escapeHtml("External link")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-mail">'+soy.$$escapeHtml("Mail link")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-anchor">'+soy.$$escapeHtml("Anchor link")+'</a></li></ul></div></div><div id="wiki-edit-dropdown2-attachment-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-attachment"><div class="aui-dropdown2-section wiki-edit-insert-attachment"><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div><div class="aui-dropdown2-section wiki-edit-browse-image"><ul class="aui-list-truncate"><li><a href="#" class="wiki-attachment-browse"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>&nbsp;&nbsp;'+soy.$$escapeHtml("Browse")+'</a></li></ul></div></div><div id="wiki-edit-color-picker-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-color-picker">',a=["333333","707070","cccccc","205081","59afe1","14892c","8eb021","d04437","f79232","f6c342","654982","f691b2"];e+='<div class="aui-dropdown2-section"><ul>';for(var o=a,s=o.length,r=0;r<s;r++){var n=o[r];e+='<li><a href="#" style="background-color: #'+soy.$$escapeHtml(n)+'" data-operation="color" data-color="#'+soy.$$escapeHtml(n)+'">&nbsp;</a></li>'}return e+='</ul></div></div><div id="wiki-edit-dropdown2-icon-picker-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-icon-picker"><div class="aui-dropdown2-section"><ul><li><a href="#" class="wiki-edit-operation" title=":)" data-operation=":)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/smile.gif" alt="'+soy.$$escapeHtml("smile")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title=":(" data-operation=":("><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/sad.gif" alt="'+soy.$$escapeHtml("sad")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title=":P" data-operation=":P"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/tongue.gif" alt="'+soy.$$escapeHtml("tongue")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title=":D" data-operation=":D"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/biggrin.gif" alt="'+soy.$$escapeHtml("biggrin")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title=";)" data-operation=";)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/wink.gif" alt="'+soy.$$escapeHtml("wink")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(y)" data-operation="(y)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/thumbs_up.gif" alt="'+soy.$$escapeHtml("thumbs up")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(n)" data-operation="(n)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/thumbs_down.gif" alt="'+soy.$$escapeHtml("thumbs down")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(i)" data-operation="(i)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/information.gif" alt="'+soy.$$escapeHtml("information")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(/)" data-operation="(/)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/check.gif" alt="'+soy.$$escapeHtml("check")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(x)" data-operation="(x)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/error.gif" alt="'+soy.$$escapeHtml("error")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(!)" data-operation="(!)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/warning.gif" alt="'+soy.$$escapeHtml("warning")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(+)" data-operation="(+)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/add.gif" alt="'+soy.$$escapeHtml("add")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(-)" data-operation="(-)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/forbidden.gif" alt="'+soy.$$escapeHtml("forbidden")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(?)" data-operation="(?)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/help_16.gif" alt="'+soy.$$escapeHtml("help")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(on)" data-operation="(on)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/lightbulb_on.gif" alt="'+soy.$$escapeHtml("lightbulb on")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(off)" data-operation="(off)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/lightbulb.gif" alt="'+soy.$$escapeHtml("lightbulb")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*)" data-operation="(*)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_yellow.gif" alt="'+soy.$$escapeHtml("star yellow")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*r)" data-operation="(*r)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_red.gif" alt="'+soy.$$escapeHtml("star red")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*g)" data-operation="(*g)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_green.gif" alt="'+soy.$$escapeHtml("star green")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*b)" data-operation="(*b)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_blue.gif" alt="'+soy.$$escapeHtml("star blue")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*y)" data-operation="(*y)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_yellow.gif" alt="'+soy.$$escapeHtml("star yellow")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flag)" data-operation="(flag)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/flag.gif" alt="'+soy.$$escapeHtml("flag")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flagoff)" data-operation="(flagoff)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/flag_grey.gif" alt="'+soy.$$escapeHtml("flag off")+'" /></a></li></ul></div></div><div id="wiki-edit-dropdown2-other-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="mention">'+soy.$$escapeHtml("User mention")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="table">'+soy.$$escapeHtml("Table")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="code">'+soy.$$escapeHtml("Code")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="noformat">'+soy.$$escapeHtml("Preformatted")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="panel">'+soy.$$escapeHtml("Panel")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="hr">'+soy.$$escapeHtml("Horizontal ruler")+'</a></li><li class="wiki-edit-speech-item hidden"><a href="#" class="wiki-edit-operation" data-operation="speech">'+soy.$$escapeHtml("Speech recognition")+'</a></li></ul></div></div><div class="wiki-edit-toolbar" id="wiki-edit-'+soy.$$escapeHtml(i.editorId)+'"><div class="aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-style-picker-trigger" aria-owns="wiki-edit-dropdown2-text-style-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-text-style-'+soy.$$escapeHtml(i.editorId)+'">'+soy.$$escapeHtml("Style")+'</a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bold" data-shortcut="ctrl+b, command+b" title="'+soy.$$escapeHtml("Bold")+" ("+soy.$$escapeHtml(i.controlKey)+'+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-bold">'+soy.$$escapeHtml("Bold")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="italic" data-shortcut="ctrl+i, command+i" title="'+soy.$$escapeHtml("Italic")+" ("+soy.$$escapeHtml(i.controlKey)+'+I)"><span class="aui-icon aui-icon-small aui-iconfont-editor-italic">'+soy.$$escapeHtml("Italic")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="underline" data-shortcut="ctrl+u, command+u" title="'+soy.$$escapeHtml("Underline")+" ("+soy.$$escapeHtml(i.controlKey)+'+U)"><span class="aui-icon aui-icon-small aui-iconfont-editor-underline">'+soy.$$escapeHtml("Underline")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation wiki-edit-operation-color" data-operation="color" data-color="red" title="'+soy.$$escapeHtml("Text color")+'"><span class="aui-icon aui-icon-small aui-iconfont-editor-color">'+soy.$$escapeHtml("Text color")+'</span><span class="wiki-edit-color-indicator"></span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-color-picker-trigger" data-operation="color-parameter" aria-owns="wiki-edit-color-picker-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" title="'+soy.$$escapeHtml("More colors")+'"><span>'+soy.$$escapeHtml("More colors")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-more-picker-trigger" aria-owns="wiki-edit-dropdown2-more-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-more-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("More")+'"><span class="aui-icon aui-icon-small aui-iconfont-editor-styles">'+soy.$$escapeHtml("More")+'</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-link-picker-trigger" aria-owns="wiki-edit-dropdown2-link-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-link-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("Link")+" ("+soy.$$escapeHtml(i.controlKey)+'+K)"><span class="aui-icon aui-icon-small aui-iconfont-link">'+soy.$$escapeHtml("Link")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-attachment-picker-trigger" aria-owns="wiki-edit-dropdown2-attachment-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-attachment-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("Attachment")+'"><span class="aui-icon aui-icon-small aui-iconfont-file-generic">'+soy.$$escapeHtml("Attachment")+'</span></a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bullet-list" data-shortcut="ctrl+shift+b, command+shift+b" title="'+soy.$$escapeHtml("Bullet list")+" ("+soy.$$escapeHtml(i.controlKey)+'+Shift+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-bullet">'+soy.$$escapeHtml("Bullet list")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="numbered-list" data-shortcut="ctrl+shift+n, command+shift+n" title="'+soy.$$escapeHtml("Numbered list")+" ("+soy.$$escapeHtml(i.controlKey)+'+Shift+N)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-number">'+soy.$$escapeHtml("Numbered list")+'</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-icon-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-icon-picker-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-icon-picker-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("Icons")+'"><span class="aui-icon aui-icon-small aui-iconfont-editor-emoticon">'+soy.$$escapeHtml("Icons")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-other-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-other-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-other-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("Other")+'"><span class="aui-icon aui-icon-small aui-iconfont-add">'+soy.$$escapeHtml("Other")+'</span></a></div><div class="aui-buttons wiki-edit-toolbar-last"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-visible-toggle wiki-edit-tooltip" title="'+soy.$$escapeHtml("Toggle visibility")+'"><span class="aui-icon icon-toolbartoggle">Lock / Unlock</span></a></div></div></div><!-- .aui-toolbar-inner --></div></div>'},JIRA.Templates.Plugins.WikiEditor.renderListItem=function(i,t){return'<li><a href="#" '+soy.$$escapeHtml(i.attachmentType?"data-attachment-type="+i.attachmentType:"")+'><span class="wiki-edit-attachment-type-icon aui-icon aui-icon-small '+soy.$$escapeHtml(null!=(null==i.attachmentTypeIcon?null:i.attachmentTypeIcon.cssClass)?null==i.attachmentTypeIcon?null:i.attachmentTypeIcon.cssClass:"aui-iconfont-file-txt")+'" title="'+soy.$$escapeHtml(null!=(null==i.attachmentTypeIcon?null:i.attachmentTypeIcon.title)?null==i.attachmentTypeIcon?null:i.attachmentTypeIcon.title:"File")+'"></span>&nbsp;&nbsp;<span class="wiki-edit-attachment-name">'+soy.$$escapeHtml(i.text)+"</span></a></li>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/Analytics.js' */
define("wiki-edit/analytics",["wiki-edit/aui"],function(i){function r(i){var r,t=0;if(!i)return"";for(var a=0;a<i.length;a+=1)r=i.charCodeAt(a),t=32*t-t+r,t|=0;return t}var t=i.Analytics&&i.Analytics.triggerPrivacyPolicySafeEvent?function(r,t){i.Analytics.triggerPrivacyPolicySafeEvent("jira.wikieditor."+r,t||{})}:function(r,t){i.trigger("analytics",{name:"jira.wikieditor."+r,data:t||{}})};return{trigger:t,hashCode:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/KeyTester.js' */
define("wiki-edit/KeyTester",function(){return{getActionType:function(i){return this.isNavigation(i)?"navigating":this.isDeleting(i)?"deleting":this.isReturn(i)?"newline":this.isEscape(i)?"escape":this.isTyping(i)?"typing":void 0},isNavigation:function(i){return i>=33&&i<=40||i>=63232&&i<=63235},isDeleting:function(i){return 8==i||46==i||127==i},isReturn:function(i){return 13==i},isEscape:function(i){return 27==i},isTyping:function(i){return i>47&&i<58||i>95&&i<112||i>64&&i<91||i>185&&i<193||i>218&&i<223||32==i||13==i}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/UndoManager.js' */
define("wiki-edit/UndoManager",function(){var t=function(){this._undoStack=[],this._redoStack=[],this._current=void 0};return t.prototype.MAX_STACK=1e3,t.prototype.updateCurrent=function(t,n){t!=this._current&&(this._current=t,n||(this._redoStack.length=0))},t.prototype.push=function(t){this._redoStack.length=0,this._undoStack.length&&_.isEqual(t,this._undoStack[this._undoStack.length-1])||(this._undoStack.push(t),this._current=t),this._undoStack.length>this.MAX_STACK&&this._undoStack.splice(0,this._undoStack.length-this.MAX_STACK)},t.prototype.undo=function(){if(this.canUndo()){var t;do t=this._undoStack.pop();while(_.isEqual(t,this._current)&&this.canUndo());return this._redoStack.push(this._current),this._current=t,t}},t.prototype.redo=function(){if(this.canRedo()){var t=this._redoStack.pop();return this._undoStack.push(this._current),this._current=t,t}},t.prototype.canUndo=function(){return!!this._undoStack.length},t.prototype.canRedo=function(){return!!this._redoStack.length},t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/UndoableTextarea.js' */
define("wiki-edit/UndoableTextarea",["wiki-edit/UndoManager","wiki-edit/KeyTester","jquery"],function(e,t,n){function i(e,t){t!==a&&o==t||("newline"!=o&&e.recordHistoryItem(),o=t)}function r(e,t){if(e.undoManager["can"+t[0].toUpperCase()+t.substring(1)]()){var n=e.undoManager[t]();e.element.value=n.value,e.element.selectionStart=n.selectionStart,e.element.selectionEnd=n.selectionEnd}}var a="cut-paste",o="",s=function(r){this.element=r,this.$el=n(r),this.undoManager=new e,this.undoManager.updateCurrent(this.getValue()),this.undoManager.push(this.getValue());var o=function(e){var n=e.keyCode,r=String.fromCharCode(n);if(n)if(e.ctrlKey||e.metaKey){if((e.ctrlKey||e.metaKey)&&!e.altKey)switch(r.toLowerCase()){case"y":this.undoManager.updateCurrent(this.getValue(),!0),this.redo(),e.preventDefault();break;case"z":this.undoManager.updateCurrent(this.getValue(),!0),e.shiftKey?this.redo():this.undo(),e.preventDefault()}}else this.undoManager.updateCurrent(this.getValue()),i(this,t.getActionType(n));else this.undoManager.updateCurrent(this.getValue()),i(this,"other")}.bind(this);this.$el.on("keydown",o),this.$el.on("paste cut",function(){this.undoManager.updateCurrent(this.getValue()),i(this,a)}.bind(this))};return s.prototype.getValue=function(){return{value:this.element.value,selectionStart:this.element.selectionStart,selectionEnd:this.element.selectionEnd}},s.prototype.updateCurrent=function(){this.undoManager.updateCurrent(this.getValue())},s.prototype.recordHistoryItem=function(){this.undoManager.push(this.getValue())},s.prototype.undo=function(){i(this,"undo"),r(this,"undo"),this.element.scrollTop=this.element.scrollHeight},s.prototype.redo=function(){r(this,"redo"),this.element.scrollTop=this.element.scrollHeight},s});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/TextareaManipulator.js' */
define("wiki-edit/TextareaManipulator",function(){var t=function(t){this.el=t};return t.prototype.NEW_LINE_TOKEN="\n",t.prototype.getSelection=function(){return{start:this.el.selectionStart,end:this.el.selectionEnd,length:this.el.selectionEnd-this.el.selectionStart,text:this.el.value.substring(this.el.selectionStart,this.el.selectionEnd)}},t.prototype.setSelection=function(t,e){1===arguments.length&&(e=t),this.el.selectionStart=t,this.el.selectionEnd=e},t.prototype.replaceSelectionWith=function(t,e){var n=this.el.selectionStart,i=this.el.value;this.el.value=i.substring(0,this.el.selectionStart)+t+i.substring(this.el.selectionEnd,i.length),this.el.selectionEnd=n+t.length,this.el.selectionStart=e?n:this.el.selectionEnd},t.prototype.wrapSelectionWith=function(t,e,n){arguments.length<3&&(n=""),1===arguments.length&&(e=t);var i=this.getSelection(),s=this.el.value;if(s.substring(i.start-t.length,i.start)!==t||s.substring(i.end,i.end+e.length)!==e){var l=s.substring(i.start,i.end);0==l.length&&(l=n),this.el.value=s.substring(0,i.start)+t+l+e+s.substring(i.end,s.length);var r=i.start+t.length;this.setSelection(r,r+l.length)}},t.prototype._getSelectedLines=function(){var t=this.el.value,e=this.getSelection(),n=t.substring(0,e.start).split(this.NEW_LINE_TOKEN).length-1,i=n+t.substring(e.start,e.end).split(this.NEW_LINE_TOKEN).length-1,s=t.split(this.NEW_LINE_TOKEN);return{lines:s,start:n,end:i}},t.prototype.getLineAtCursor=function(){var t=this._getSelectedLines();return t.lines[t.end]},t.prototype.getFirstLineMatch=function(t){var e=this._getSelectedLines(),n=e.lines[e.start].match(t);if(n)return n[0]},t.prototype.areSelectedLinesPrefixed=function(t){var e,n=this._getSelectedLines();for(e=n.start;e<=n.end;e++)if(0==n.lines[e].indexOf(t))return!0;return!1},t.prototype.prefixSelectedLines=function(t){var e,n=this.getSelection(),i=this._getSelectedLines(),s=0,l=!0;for(e=i.start;e<=i.end;e++)0!=i.lines[e].indexOf(t)?(s+=1,i.lines[e]=t+i.lines[e]):e==i.start&&(l=!1);this.el.value=i.lines.join(this.NEW_LINE_TOKEN);var r=t.length*s;this.setSelection(n.start+(l?t.length:0),n.end+r)},t.prototype.unprefixSelectedLines=function(t){var e,n=this.getSelection(),i=this._getSelectedLines(),s=!1,l=0;for(e=i.start;e<=i.end;e++)0==i.lines[e].indexOf(t)&&(l+=1,i.lines[e]=i.lines[e].substring(t.length),e==i.start&&(s=!0));this.el.value=i.lines.join(this.NEW_LINE_TOKEN);var r=t.length*l;this.setSelection(n.start-(s?t.length:0),n.end-r)},t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/keymaster-setup.js' */
define("wiki-edit/keymaster-setup",["jquery","wiki-edit/keymaster"],function(e,i){return{init:function(){i.filter=function(t){var n,r=t.target||t.srcElement||!1;return!!(r&&(" "+r.className+" ").indexOf(" wiki-textfield ")>-1&&(n=e(r).data("wikiEditor")))&&(i.setScope(n.id),!0)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEnabledTextarea.js' */
define("wiki-edit/WikiEnabledTextarea",["wiki-edit/TextareaManipulator","wiki-edit/UndoableTextarea","wiki-edit/keymaster","wiki-edit/keymaster-setup","wiki-edit/SpeechRecognition","jquery"],function(e,i,t,n,o,r){n.init();var a=0,l=/^[#\*]+ /,p=function(n){if(this.el=n,this.$el=r(n),this.$el.data("wikiEditor"))return this.$el.data("wikiEditor");this.id="wikiEdit"+a,a+=1,this.manipulationEngine=new e(this.el),this.undoRedoEl=new i(n);var o=this;t("enter",o.id,function(e){var i=o.manipulationEngine.getSelection(),t=o.manipulationEngine.getFirstLineMatch(l);t&&(0==i.length&&o.manipulationEngine.getLineAtCursor()===t?o.manipulationEngine.unprefixSelectedLines(t):o.manipulationEngine.replaceSelectionWith("\n"+t),e.preventDefault())}),this.$el.data("wikiEditor",this)},d={bold:["*","*","strong text"],italic:["_","_","emphasized text"],underline:["+","+","underlined text"],delete:["-","-","deleted text"],superscript:["^","^","superscript text"],subscript:["~","~","subscript text"],monospace:["{{","}}","monospaced text"],cite:["??","??","citation"],"block-quote":["{quote}","{quote}","quoted text"],color:["{color:$1}","{color}","colored text","red"],link:["[","|http://example.com]","link title"],"link-anchor":["[#","]","anchor"],"link-mail":["[mailto:","]","mail@example.com"],image:["!","!","http://example.com/image.png"],mention:["@","","Mention someone by typing their name..."],code:["\n{code:java}\n","\n{code}\n","// Some comments here\npublic String getFoo()\n{\n    return foo;\n}"],noformat:["\n{noformat}\n","\n{noformat}\n","*no* further _formatting_ is done here"],panel:["\n{panel:title="+"My title"+"}\n","\n{panel}\n","Some text with a title"],table:["\n||"+"Heading"+" 1||"+"Heading"+" 2||\n|","|"+"Col"+" A2|\n","Col"+" A1"]};for(var h in d)p.prototype[h]=function(e,i){var t=0;return e.length>3&&(t=e.length-3),function(){var i,n=e[0],o=e[1],r=e[2];for(i=1;i<=t;i++)n=n.replace("$"+i,arguments[i-1]||e[2+i]),o=o.replace("$"+i,arguments[i-1]||e[2+i]);var a=this.el.value,l=this.manipulationEngine.getSelection();this.undoRedoEl.recordHistoryItem(),a.substring(l.start-n.length,l.start)===n&&a.substring(l.end,l.end+o.length)===o?(this.el.value=a.substring(0,l.start-n.length)+a.substring(l.start,l.end)+a.substring(l.end+o.length,a.length),this.manipulationEngine.setSelection(l.start-n.length,l.end-n.length)):this.manipulationEngine.wrapSelectionWith.call(this.manipulationEngine,n,o,r),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(d[h],h);var c={paragraph:"","bullet-list":"* ","numbered-list":"# ",h1:"h1. ",h2:"h2. ",h3:"h3. ",h4:"h4. ",h5:"h5. ",h6:"h6. ","paragraph-quote":"bq. "};for(var h in c)p.prototype[h]=function(e){return function(){this.undoRedoEl.recordHistoryItem();for(var i in c)this.manipulationEngine.areSelectedLinesPrefixed(c[i])&&this.manipulationEngine.unprefixSelectedLines(c[i]);this.manipulationEngine.prefixSelectedLines.call(this.manipulationEngine,e),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(c[h]);var g={hr:"\n----\n",":)":":)",":(":":(",":P":":P",":D":":D",";)":";)","(y)":"(y)","(n)":"(n)","(i)":"(i)","(/)":"(/)","(x)":"(x)","(!)":"(!)","(+)":"(+)","(-)":"(-)","(?)":"(?)","(on)":"(on)","(off)":"(off)","(*)":"(*)","(*r)":"(*r)","(*g)":"(*g)","(*b)":"(*b)","(*y)":"(*y)","(flag)":"(flag)","(flagoff)":"(flagoff)","image-attachment":[" !$1|thumbnail! ","attachment-name.jpg"],"image-attachment-full":[" !$1! ","attachment-name.gif"],"link-attachment":[" [^$1] ","attachment-name.zip"]};for(var h in g)p.prototype[h]=function(e){var i,t=0;return _.isArray(e)&&(t=e.length-1,i=e.slice(1),e=e[0]),function(){var n,o=e;for(n=1;n<=t;n++)o=e.replace("$"+n,arguments[n-1]||i[n-1]);this.undoRedoEl.recordHistoryItem(),this.manipulationEngine.replaceSelectionWith.call(this.manipulationEngine,o,!1),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(g[h]);return p.prototype.speech=function(){o.start(this)},p});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEditor.js' */
define("wiki-edit/WikiEditor",["wiki-edit/WikiEnabledTextarea","jquery","underscore","wiki-edit/JIRA","wiki-edit/keymaster","wiki-edit/analytics","wiki-edit/WikiEditorUtil","jira/util/events","jira/attachments/api","jira/featureflags/feature-manager"],function(t,e,i,a,n,o,r,d,l,c){function s(t){var e=AJS.$(t).closest(".aui-dropdown2");e.length&&e[0].hide()}var f="Ctrl";navigator.platform.indexOf("Mac")!=-1&&(f="⌘");var h=function(t){return t.match(/\.(bmp|gif|jpg|jpeg|png|tiff|webp)$/i)?"image":"file"},p=function(t,e,i){"image"==i?(e.match(/\.gif$/i)?t["image-attachment-full"](e):t["image-attachment"](e),o.trigger("operation.attachment.image")):(t["link-attachment"](e),o.trigger("operation.attachment.link"))};return{create:function(i){function d(t){t.preventDefault(),t.stopPropagation(),W=!W,S.toggleClass("active",W),u.toggleClass("wiki-edit-toolbar-compact",W),localStorage.setItem("jira.wikieditor.visibility"+i.name+"."+i.id,W?"true":"false"),o.trigger(W?"hide":"show")}if("undefined"!=typeof i.selectionStart){var l=e(i);if(!l.data("wikiEditor")){var c=new t(i);this.wikiEditor=c;var g=e(a.Templates.Plugins.WikiEditor.renderEditor({editorId:c.id,controlKey:f})),u=g.filter(".wiki-edit-toolbar");"webkitSpeechRecognition"in window&&g.find(".wiki-edit-speech-item").removeClass("hidden"),l.parent().before(g);var m,v=l.closest(".jira-dialog").length>0||l.closest("form#issue-create").length>0,k=l.closest("#create-issue-dialog").length>0,w=e("#issue-content").length>0,b=l.closest("#addcomment").length>0,y=g.find(".wiki-edit-operation[title], .aui-dropdown2-trigger, .wiki-edit-tooltip");m=v?"Dialog.beforeHide":a.Events.BEFORE_INLINE_EDIT_CANCEL,y.each(function(){var t=e(this),i={aria:!0,hideOnClick:!0,hoverable:!1};t.parent().is("li")&&(i.gravity="w"),t.tooltip(i)});var E=function(){y.each(function(){e(this).tooltip("hide")})};a.bind(m,E);var C=!1,T=g.filter(".aui-dropdown2");T.on({"aui-dropdown2-show":function(){C=!0,l.focus()},"aui-dropdown2-hide":function(){C=!1,E()}}),l.on("keydown",function(t){C&&t.keyCode===AJS.keyCode.ESCAPE&&(v?a.one("Dialog.beforeHide",function(t){t.preventDefault()}):w&&!b&&a.one(a.Events.BEFORE_INLINE_EDIT_CANCEL,function(t){t.preventDefault()}))});var I=g.filter(".wiki-edit-dropdown-image, .wiki-edit-dropdown-attachment"),_=I.find(".wiki-edit-insert-image, .wiki-edit-insert-attachment"),j=I.find(".wiki-edit-insert-image ul, .wiki-edit-insert-attachment ul");j.on("click","a",function(t){t.preventDefault(),s(t.target);var i=e(this).attr("data-attachment-type");"undefined"==typeof i&&(i="file");var a=e(this).find(".wiki-edit-attachment-name").text();p(c,a,i)}),I.on("aui-dropdown2-show",function(){var t=[],i=[];v&&e(".upload-progress-bar:not(.upload-progress-bar__upload-error) span.upload-progress-bar__file-name").each(function(e,i){t.push(i)}),!k&&w&&e("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content").each(function(e,i){t.push(i)});var n=function(t,e){if(!t)return null;var i=r.getFileExtension(t);return{name:t,type:e,icon:r.translateFileExtensionToAttachmentTypeIcon(i)}},o=e("#ghx-tab-attachments .ghx-container");o.find("#file_attachments li.attachment-content > dl dt.attachment-title a, #file_attachments div.verbose dt.attachment-title a").each(function(t,e){var a=n(e.textContent,"file");a&&i.push(a)}),o.find("#attachment_thumbnails a.attachment-title").each(function(t,e){var a=n(e.textContent,"image");a&&i.push(a)}),j.empty(),_.addClass("hidden"),(v||w)&&t.length?(_.removeClass("hidden"),e(t).each(function(){var t=e(this).is("span.upload-progress-bar__file-name")?e(this).text():e(this).find("a.attachment-title, .attachment-title a").first().text(),i=e(this).attr("data-attachment-type");void 0===i&&(i=h(t));var n=r.defaultAttachmentTypeIcon,o=e(this).attr("data-downloadurl");if(void 0===o&&(o=e(this).find("[data-downloadurl]").attr("data-downloadurl")),void 0!==o&&"string"==typeof o){var d=o.split(":");if(d.length>0){var l=d[0];n=r.translateMimeTypeToAttachmentTypeIcon(l)}}else if(void 0!==t&&"string"==typeof t){var c=t.match(/\.(\w{1,5})$/i);if(c&&c.length>1){var s=c[1];n=r.translateFileExtensionToAttachmentTypeIcon(s)}}j.append(e(a.Templates.Plugins.WikiEditor.renderListItem({text:t,attachmentType:i,attachmentTypeIcon:n})))})):!k&&i.length>0&&(_.removeClass("hidden"),i.forEach(function(t){if(null!=t&&null!=t.name){var i=t.name,n=t.type?t.type:"file",o=t.icon?t.icon:{cssClass:"aui-iconfont-devtools-file",title:""};j.append(e(a.Templates.Plugins.WikiEditor.renderListItem({text:i,attachmentType:n,attachmentTypeIcon:o})))}}))}),r.compareVersion(AJS.version,"5.8.0")<0&&I.on("aui-dropdown2-item-selected",function(){var t=e(this).find(".aui-dropdown2-active");if("object"==typeof t){var i=t.closest("div");if("object"==typeof i){var a=i.offset().top,n=a+i.height(),o=t.offset().top,r=o+t.height();o<a&&i.scrollTop(i.scrollTop()-(a-o)),r>n&&i.scrollTop(i.scrollTop()+(r-n))}}}),g.filter(".wiki-edit-dropdown, .wiki-edit-picker").on("mousedown",function(t){t.preventDefault()}),g.find(".wiki-edit-operation:not(.wiki-edit-operation-color)").each(function(){var t=e(this),i=function(e){e&&(e.preventDefault&&e.preventDefault(),s(e.target),l.focus(),c[t.data("operation")](),o.trigger("operation",{name:t.data("operation"),nameHash:o.hashCode(t.data("operation")),trigger:e.type}),o.trigger("operation."+t.data("operation"),{trigger:e.type}))};t.click(i),t.data("shortcut")&&n(t.data("shortcut"),c.id,i)}),g.find(".wiki-edit-operation-color").each(function(){var t=e(this),i=function(e){e&&(e.preventDefault&&e.preventDefault(),s(e.target),l.focus(),c[t.data("operation")](t.data("color")),o.trigger("operation",{name:t.data("operation"),nameHash:o.hashCode(t.data("operation")),trigger:e.type}),o.trigger("operation."+t.data("operation"),{trigger:e.type}))};t.click(i),t.data("shortcut")&&n(t.data("shortcut"),c.id,i)});var x=window.localStorage.getItem("jira.wikieditor.last.color")?window.localStorage.getItem("jira.wikieditor.last.color"):"red",D=g.find(".wiki-edit-operation-color");D.data("color",x);var A=u.find(".wiki-edit-color-indicator");A.css("background-color",x),g.filter(".wiki-edit-color-picker").on("click","a",function(t){t.preventDefault(),s(t.target),l.focus();var i=e(this).data("color");c.color(i),o.trigger("operation",{name:"color"}),o.trigger("operation.color.picked",{color:i}),D.data("color",i),A.css("background-color",i),window.localStorage.setItem("jira.wikieditor.last.color",i)});var S=g.find(".wiki-edit-visible-toggle"),W="true"===localStorage.getItem("jira.wikieditor.visibility"+i.name+"."+i.id);W&&(S.addClass("active"),u.addClass("wiki-edit-toolbar-compact")),S.on("click",d),u.parent().on("click",".wiki-edit-toolbar-compact",d),e(document).on("showWikiPreview",function(t,a){e(a).find(i).length&&u.addClass("hidden")}),e(document).on("showWikiInput",function(t,a){e(a).find(i).length&&u.removeClass("hidden")})}}},initBrowseLink:function(t){var i=this.wikiEditor,a=e(t),n=a.parent().siblings().find(".wiki-attachment-browse"),r=e("#dnd-metadata-webpanel").data("can-attach"),c=a.closest(".jira-dialog").length>0||a.closest("form#issue-create").length>0;if(c){var f=["#create-issue-dialog:visible","#create-subtask-dialog:visible","#edit-issue-dialog:visible","#create-linked-issue-dialog:visible"],g=e(f.join(",")),u=g.length>0;r=e(".jira-dialog fieldset span:contains('Attachment')").length>0,u||(g=a.closest(".dialog-can-receive-files:visible"),u=g.length>0,r=g.data("can-attach"));var m=g.data("insert-markup-on-browse")}var v=a.parent().siblings().find(".wiki-edit-attachment-picker-trigger");if(!r||c&&!u){n.closest("div").addClass("hidden");var k=e("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content"),w=k.length>0,b=c&&u&&("create-issue-dialog"===g.attr("id")||"create-subtask-dialog"===g.attr("id")),y=w&&!b;y||v.addClass("hidden")}else n.closest("div").removeClass("hidden"),v.removeClass("hidden"),n.data("initialised")||(n.on("click",function(t){t.preventDefault(),s(t.target);var a=function(){var t=e('<input type="file" multiple />');t.change(function(a){var n=t[0].files;if(c){var o=e.Event("drop");o.dataTransfer={files:n},g.find(".issue-drop-zone__target").trigger(o)}else d.trigger("attachmentForPageReceived",{files:n,isWikiTextfieldFocused:!0});if(!c||m)for(var r=0;r<n.length;r++){var l=n[r].name;p(i,l,h(l))}}),t.click(),o.trigger("attachment.dropdown.button.clicked.browse")},n={onFileUploadStarted:function(t){p(i,t.name,h(t.name))},blockWikiEditorMarkupInsert:!0};l.doUpload(n)?o.trigger("issue.wiki-editor.browse-link.media-picker"):(o.trigger("issue.wiki-editor.browse-link.fallback"),a())}),n.data("initialised",!0))}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEditorUtil.js' */
define("wiki-edit/WikiEditorUtil",["jquery","underscore"],function(i,e){var t={cssClass:"aui-iconfont-devtools-file",title:"File"},n={pdf:"aui-iconfont-file-pdf",gif:"aui-iconfont-image",png:"aui-iconfont-image",jpeg:"aui-iconfont-image",jpg:"aui-iconfont-image",xml:"aui-iconfont-file-code",html:"aui-iconfont-file-code",htm:"aui-iconfont-file-code",txt:"aui-iconfont-file-txt",zip:"aui-iconfont-file-zip",gz:"aui-iconfont-file-zip",tar:"aui-iconfont-file-zip",rar:"aui-iconfont-file-zip","7z":"aui-iconfont-file-zip",doc:"aui-iconfont-file-doc",docx:"aui-iconfont-file-doc",xls:"aui-iconfont-file-xls",xlsx:"aui-iconfont-file-xls",xlsm:"aui-iconfont-file-xls",ppt:"aui-iconfont-file-ppt",pptx:"aui-iconfont-file-ppt",java:"aui-iconfont-file-code",c:"aui-iconfont-file-code",h:"aui-iconfont-file-code",cpp:"aui-iconfont-file-code",hpp:"aui-iconfont-file-code",scala:"aui-iconfont-file-code",php:"aui-iconfont-file-code",css:"aui-iconfont-file-code",less:"aui-iconfont-file-code",soy:"aui-iconfont-file-code",js:"aui-iconfont-file-code",jar:"aui-iconfont-file-zip",war:"aui-iconfont-file-zip",obr:"aui-iconfont-file-zip"},o={pdf:"PDF File",gif:"GIF File",png:"PNG File",jpeg:"JPEG File",jpg:"JPEG File",xml:"XML File",html:"HTML File",htm:"HTML File",txt:"Text File",zip:"Zip Archive",gz:"GZip Archive",doc:"Microsoft Word",docx:"Microsoft Word",xls:"Microsoft Excel",xlsx:"Microsoft Excel",xlsm:"Microsoft Excel",ppt:"Microsoft PowerPoint",pptx:"Microsoft PowerPoint",java:"Java Source File",jar:"Java Archive File",war:"Java Archive File"};return{defaultAttachmentTypeIcon:t,translateMimeTypeToAttachmentTypeIcon:function(i){return{cssClass:JIRA.Templates.ViewIssue.matchFileClass({mimetype:i}),title:JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:i})}},translateFileExtensionToAttachmentTypeIcon:function(i){var c=e.clone(t);if("string"!=typeof i)return c;i=i.toLowerCase(),i=i.replace(/^\.+/,"");var f=n[i];"string"==typeof f&&(c.cssClass=f);var a=o[i];return"string"==typeof a&&(c.title=a),c},compareVersion:function(e,t){var n=e.split("."),o=t.split("."),c=NaN;return i(n).each(function(i,e){if(i>=o.length)return!1;var t=Number(e),n=Number(o[i]);return isNaN(t)||isNaN(n)?(c=NaN,!1):t<n?(c=-1,!1):t>n?(c=1,!1):void(c=0)}),0==c&&n.length!=o.length?n.length>o.length?1:-1:c},getFileExtension:function(i){if("string"!=typeof i)return"";var e=i.match(/\.(\w{1,5})$/i);return e&&e.length>1?e[1]:""}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/SpeechRecognition.js' */
define("wiki-edit/SpeechRecognition",["jquery","aui/flag"],function(e,t){function i(e){return e&&e[0]&&e[0].isFinal}function r(e){return e&&e[0]&&e[0][0]&&e[0][0].transcript||""}return{start:function(e){var t=this,o=new webkitSpeechRecognition;o.continuous=!1,o.interimResults=!0,o.lang=AJS.Meta.get("user-locale").replace("_","-"),o.stop(),o.start(),o.onstart=function(){t.showTimedMessage({title:"You can start speaking now :)"},"info",10),t.selectionStart=e.manipulationEngine.getSelection().start},o.onresult=function(n){t.dismissCurrentMessage();var s=i(n.results),a=r(n.results);a=a.charAt(0).toUpperCase()+a.slice(1),s&&e.undoRedoEl.recordHistoryItem(),e.manipulationEngine.replaceSelectionWith.call(e.manipulationEngine,a,!1);var l=t.selectionStart+a.length;s?(e.manipulationEngine.setSelection(l),e.undoRedoEl.recordHistoryItem(),e.$el.trigger("input"),o.stop()):e.manipulationEngine.setSelection(t.selectionStart,l)},o.onerror=function(e){o.stop();var i={title:"Sorry, I can\'t hear you :(",body:""};switch(e.error){case"not-allowed":i.title="Speech recognition is currently disabled",i.body="Click the camera icon in the browser\'s address bar to enable it.";break;case"network":i.title="No internet connection",i.body="You need a working internet connection to use speech recognition.";break;case"no-speech":i.title="Sorry, I couldn\'t hear anything :(",i.body="Is your microphone working and unmuted?";break;case"aborted":return}t.showTimedMessage(i,"warning",5)},o.onend=function(){o.stop()}},showTimedMessage:function(e,i,r){this.dismissCurrentMessage(),this.speakFlag=t({type:i,title:e.title,body:e.body,persistent:!0}),clearTimeout(this.flagTimer),this.flagTimer=setTimeout(this.dismissCurrentMessage.bind(this),1e3*r)},dismissCurrentMessage:function(){this.speakFlag&&this.speakFlag.close&&(this.speakFlag.close(),this.speakFlag=null)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:skate', location = 'jira-wiki-editor-module/js/lib/skate.js' */
define("wiki-edit/skate",["jira/skate"],function(e){return e});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources-init', location = 'jira-wiki-editor-module/js/wiki-editor-init.js' */
require(["wiki-edit/WikiEditor","wiki-edit/JIRA","wiki-edit/skate","jquery","underscore"],function(i,t,e,o,n){function s(t){var e=this instanceof Element?this:t,s=function(t){i.create(t),i.initBrowseLink(t),t.wikiEnabled=!0};e.wikiEnabled===!1&&(o(e).is(":hidden")?n.defer(s,e):s(e))}function d(){return{type:e.type.CLASSNAME,attached:s,prototype:{wikiEnabled:!1}}}e("wiki-textfield",d()),e("wiki-enabled-textfield",d()),o(function(){o("#gh").length>0&&(t.Dialogs.comment.options.width=810,t.Dialogs.assignIssue.options.width=810,t.Dialogs.attachFile.options.width=810,t.Dialogs.logWork.options.width=810,t.Dialogs.logWork.options.width=810)})});;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar.js' */
Calendar=function(e,t,a,n,r){if(this.activeDiv=null,this.currentDateEl=null,this.getDateStatus=null,this.getDateToolTip=null,this.getDateText=null,this.timeout=null,this.onSelected=n||null,this.onClose=r||null,this.dragging=!1,this.hidden=!1,this.minYear=1970,this.maxYear=2050,this.dateFormat=Calendar._TT.DEF_DATE_FORMAT,this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT,this.isPopup=!0,this.weekNumbers=!0,this.firstDayOfWeek="number"==typeof e?e:Calendar._FD,this.showsOtherMonths=!1,this.dateStr=t,this.todayDateStr=a,this.ar_days=null,this.showsTime=!1,this.time24=!0,this.yearStep=2,this.hiliteToday=!0,this.multiple=null,this.table=null,this.element=null,this.tbody=null,this.firstdayname=null,this.monthsCombo=null,this.yearsCombo=null,this.hilitedMonth=null,this.activeMonth=null,this.hilitedYear=null,this.activeYear=null,this.dateClicked=!1,"undefined"==typeof Calendar._SDN){"undefined"==typeof Calendar._SDN_len&&(Calendar._SDN_len=3);for(var l=new Array,i=8;i>0;)l[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);Calendar._SDN=l,"undefined"==typeof Calendar._SMN_len&&(Calendar._SMN_len=3),l=new Array;for(var i=12;i>0;)l[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);Calendar._SMN=l}},Calendar._C=null,Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent),Calendar.is_ie6=Calendar.is_ie&&/msie 6\.0/i.test(navigator.userAgent),Calendar.is_opera=/opera/i.test(navigator.userAgent),Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent),Calendar.setFullYearAndFixFebruary=function(e,t){var a=require("jira/util/safe-logger"),n=new Date(e),r={from:n.getFullYear(),to:t,fixedFeb:!1};n.setFullYear(t),n.getMonth()!==e.getMonth()&&(r.fixedFeb=!0,e.setDate(28)),e.setFullYear(t),a.safeInfo("jscalendar","Setting full year",r)},Calendar.getAbsolutePos=function(e){var t=jQuery(e).offset();return t.x=t.left,t.y=t.top,t},Calendar.isRelated=function(e,t){var a=t.relatedTarget;if(!a){var n=t.type;"mouseover"==n?a=t.fromElement:"mouseout"==n&&(a=t.toElement)}for(;a;){if(a==e)return!0;a=a.parentNode}return!1},Calendar.removeClass=function(e,t){if(e&&e.className){for(var a=e.className.split(" "),n=new Array,r=a.length;r>0;)a[--r]!=t&&(n[n.length]=a[r]);e.className=n.join(" ")}},Calendar.addClass=function(e,t){Calendar.removeClass(e,t),e.className+=" "+t},Calendar.getElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.currentTarget;1!=t.nodeType||/^div$/i.test(t.tagName);)t=t.parentNode;return t},Calendar.getTargetElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.target;1!=t.nodeType;)t=t.parentNode;return t},Calendar.stopEvent=function(e){return e||(e=window.event),e.stopPropagation?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1},Calendar.addEvent=function(e,t,a){e.attachEvent?e.attachEvent("on"+t,a):e.addEventListener?e.addEventListener(t,a,!0):e["on"+t]=a},Calendar.removeEvent=function(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener?e.removeEventListener(t,a,!0):e["on"+t]=null},Calendar.createElement=function(e,t){var a=null;return a=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e),"undefined"!=typeof t&&t.appendChild(a),a},Calendar._add_evs=function(e){Calendar.addEvent(e,"mouseover",Calendar.dayMouseOver),Calendar.addEvent(e,"mousedown",Calendar.dayMouseDown),Calendar.addEvent(e,"mouseout",Calendar.dayMouseOut),Calendar.is_ie&&(Calendar.addEvent(e,"dblclick",Calendar.dayMouseDblClick),e.setAttribute("unselectable",!0))},Calendar.findMonth=function(e){return"undefined"!=typeof e.month?e:"undefined"!=typeof e.parentNode.month?e.parentNode:null},Calendar.findYear=function(e){return"undefined"!=typeof e.year?e:"undefined"!=typeof e.parentNode.year?e.parentNode:null},Calendar.showMonthsCombo=function(){var e=Calendar._C;if(!e)return!1;var e=e,t=e.activeDiv,a=e.monthsCombo;e.hilitedMonth&&Calendar.removeClass(e.hilitedMonth,"hilite"),e.activeMonth&&Calendar.removeClass(e.activeMonth,"active");var n=e.monthsCombo.getElementsByTagName("div")[e.date.getMonth()];Calendar.addClass(n,"active"),e.activeMonth=n;var r=a.style;if(r.display="block",t.navtype<0)r.left=t.offsetLeft+"px";else{var l=a.offsetWidth;"undefined"==typeof l&&(l=50),r.left=t.offsetLeft+t.offsetWidth-l+"px"}r.top=t.offsetTop+t.offsetHeight+"px"},Calendar.showYearsCombo=function(e){var t=Calendar._C;if(!t)return!1;var t=t,a=t.activeDiv,n=t.yearsCombo;t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),t.activeYear&&Calendar.removeClass(t.activeYear,"active"),t.activeYear=null;for(var r=t.date.getFullYear()+(e?1:-1),l=n.firstChild,i=!1,s=12;s>0;--s)r>=t.minYear&&r<=t.maxYear?(l.innerHTML=r,l.year=r,l.style.display="block",i=!0):l.style.display="none",l=l.nextSibling,r+=e?t.yearStep:-t.yearStep;if(i){var d=n.style;if(d.display="block",a.navtype<0)d.left=a.offsetLeft+"px";else{var o=n.offsetWidth;"undefined"==typeof o&&(o=50),d.left=a.offsetLeft+a.offsetWidth-o+"px"}d.top=a.offsetTop+a.offsetHeight+"px"}},Calendar.tableMouseUp=function(e){var t=Calendar._C;if(!t)return!1;t.timeout&&clearTimeout(t.timeout);var a=t.activeDiv;if(!a)return!1;var n=Calendar.getTargetElement(e);e||(e=window.event),Calendar.removeClass(a,"active"),n!=a&&n.parentNode!=a||Calendar.cellClick(a,e);var r=Calendar.findMonth(n),l=null;if(r)l=new Date(t.date),r.month!=l.getMonth()&&(l.setMonth(r.month),t.setDate(l),t.dateClicked=!1,t.callHandler());else{var i=Calendar.findYear(n);i&&(l=new Date(t.date),i.year!=l.getFullYear()&&(Calendar.setFullYearAndFixFebruary(l,i.year),t.setDate(l),t.dateClicked=!1,t.callHandler()))}return Calendar.removeEvent(document,"mouseup",Calendar.tableMouseUp),Calendar.removeEvent(document,"mouseover",Calendar.tableMouseOver),Calendar.removeEvent(document,"mousemove",Calendar.tableMouseOver),t._hideCombos(),Calendar._C=null,Calendar.stopEvent(e)},Calendar.tableMouseOver=function(e){var t=Calendar._C;if(t){var a=t.activeDiv,n=Calendar.getTargetElement(e);if(n==a||n.parentNode==a?(Calendar.addClass(a,"hilite active"),Calendar.addClass(a.parentNode,"rowhilite")):(("undefined"==typeof a.navtype||50!=a.navtype&&(0==a.navtype||Math.abs(a.navtype)>2))&&Calendar.removeClass(a,"active"),Calendar.removeClass(a,"hilite"),Calendar.removeClass(a.parentNode,"rowhilite")),e||(e=window.event),50==a.navtype&&n!=a){var r,l=Calendar.getAbsolutePos(a),i=a.offsetWidth,s=e.clientX,d=!0;s>l.x+i?(r=s-l.x-i,d=!1):r=l.x-s,r<0&&(r=0);for(var o=a._range,u=a._current,h=Math.floor(r/10)%o.length,C=o.length;--C>=0&&o[C]!=u;);for(;h-- >0;)d?--C<0&&(C=o.length-1):++C>=o.length&&(C=0);var c=o[C];a.innerHTML=c,t.onUpdateTime()}var m=Calendar.findMonth(n);if(m)m.month!=t.date.getMonth()?(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),Calendar.addClass(m,"hilite"),t.hilitedMonth=m):t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");else{t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");var p=Calendar.findYear(n);p&&p.year!=t.date.getFullYear()?(t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),Calendar.addClass(p,"hilite"),t.hilitedYear=p):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite")}return Calendar.stopEvent(e)}},Calendar.tableMouseDown=function(e){if(Calendar.getTargetElement(e)==Calendar.getElement(e))return Calendar.stopEvent(e)},Calendar.calDragIt=function(e){var t=Calendar._C;if(!t||!t.dragging)return!1;var a,n;Calendar.is_ie?(n=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(a=e.pageX,n=e.pageY);var r=t.element.style;return r.left=a-t.xOffs+"px",r.top=n-t.yOffs+"px",Calendar.stopEvent(e)},Calendar.calDragEnd=function(e){var t=Calendar._C;return!!t&&(t.dragging=!1,Calendar.removeEvent(document,"mousemove",Calendar.calDragIt),Calendar.removeEvent(document,"mouseup",Calendar.calDragEnd),void Calendar.tableMouseUp(e))},Calendar.dayMouseDown=function(e){var t=Calendar.getElement(e);if(t.disabled)return!1;var a=t.calendar;return a.activeDiv=t,Calendar._C=a,300!=t.navtype?(50==t.navtype?(t._current=t.innerHTML,Calendar.addEvent(document,"mousemove",Calendar.tableMouseOver)):Calendar.addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",Calendar.tableMouseOver),Calendar.addClass(t,"hilite active"),Calendar.addEvent(document,"mouseup",Calendar.tableMouseUp)):a.isPopup&&a._dragStart(e),t.navtype==-1||1==t.navtype?(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout("Calendar.showMonthsCombo()",250)):t.navtype==-2||2==t.navtype?(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(t.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):a.timeout=null,Calendar.stopEvent(e)},Calendar.dayMouseDblClick=function(e){Calendar.cellClick(Calendar.getElement(e),e||window.event),Calendar.is_ie&&document.selection.empty()},Calendar.dayMouseOver=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(t.ttip&&("_"==t.ttip.substr(0,1)&&(t.ttip=t.caldate.print(t.calendar.ttDateFormat)+t.ttip.substr(1)),t.calendar.tooltips.innerHTML=t.ttip),300!=t.navtype&&(Calendar.addClass(t,"hilite"),t.caldate&&Calendar.addClass(t.parentNode,"rowhilite")),Calendar.stopEvent(e))},Calendar.dayMouseOut=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(Calendar.removeClass(t,"hilite"),t.caldate&&Calendar.removeClass(t.parentNode,"rowhilite"),t.calendar&&(t.calendar.tooltips.innerHTML=Calendar._TT.SEL_DATE),Calendar.stopEvent(e))},Calendar.cellClick=function(e,t){function a(e){var t=i.getDate(),a=i.getMonthDays(e);t>a&&i.setDate(a),i.setMonth(e)}var n=e.calendar,r=!1,l=!1,i=null;if("undefined"==typeof e.navtype){n.currentDateEl&&(Calendar.removeClass(n.currentDateEl,"selected"),Calendar.addClass(e,"selected"),r=n.currentDateEl==e,r||(n.currentDateEl=e)),n.date.setDateOnly(e.caldate),i=n.date;var s=!(n.dateClicked=!e.otherMonth);s||n.currentDateEl?l=!e.disabled:n._toggleMultipleDate(new Date(i)),s&&n._init(n.firstDayOfWeek,i)}else{if(200==e.navtype)return Calendar.removeClass(e,"hilite"),void n.callCloseHandler();i=new Date(n.date),0==e.navtype&&(n.todayDateStr?i=new Date(n.todayDateStr):i.setDateOnly(new Date)),n.dateClicked=!1;var d=i.getFullYear(),o=i.getMonth();switch(e.navtype){case 400:Calendar.removeClass(e,"hilite");var u=Calendar._TT.ABOUT;return"undefined"!=typeof u?u+=n.showsTime?Calendar._TT.ABOUT_TIME:"":u='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n',void alert(u);case-2:d>n.minYear&&Calendar.setFullYearAndFixFebruary(i,d-1);break;case-1:o>0?a(o-1):d-- >n.minYear&&(i.setFullYear(d),a(11));break;case 1:o<11?a(o+1):d<n.maxYear&&(i.setFullYear(d+1),a(0));break;case 2:d<n.maxYear&&Calendar.setFullYearAndFixFebruary(i,d+1);break;case 100:return void n.setFirstDayOfWeek(e.fdow);case 50:for(var h=e._range,C=e.innerHTML,c=h.length;--c>=0&&h[c]!=C;);t&&t.shiftKey?--c<0&&(c=h.length-1):++c>=h.length&&(c=0);var m=h[c];return e.innerHTML=m,void n.onUpdateTime();case 0:if("function"==typeof n.getDateStatus&&n.getDateStatus(i,i.getFullYear(),i.getMonth(),i.getDate()))return!1}i.equalsTo(n.date)?0==e.navtype&&(l=r=!0):(n.setDate(i),l=!0)}l&&t&&n.callHandler(),r&&(Calendar.removeClass(e,"hilite"),t&&n.callCloseHandler())},Calendar.prototype.create=function(e){var t=null;e?(t=e,this.isPopup=!1):(t=document.getElementsByTagName("body")[0],this.isPopup=!0),this.dateStr&&(this.date=new Date(this.dateStr)),this.date&&!isNaN(this.date)||(this.date=new Date);var a=Calendar.createElement("table");this.table=a,a.cellSpacing=0,a.cellPadding=0,a.calendar=this,Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var n=Calendar.createElement("div");this.element=n,n.className="calendar",this.isPopup&&(n.style.position="absolute",n.style.display="none"),n.appendChild(a);var r=Calendar.createElement("thead",a),l=null,i=null,s=this,d=function(e,t,a){return l=Calendar.createElement("td",i),l.colSpan=t,l.className="button",0!=a&&Math.abs(a)<=2&&(l.className+=" nav"),Calendar._add_evs(l),l.calendar=s,l.navtype=a,l.innerHTML="<div unselectable='on'>"+e+"</div>",l};i=Calendar.createElement("tr",r);var o=6;this.isPopup&&--o,this.weekNumbers&&++o,d("?",1,400).ttip=Calendar._TT.INFO,this.title=d("",o,300),this.title.className="title",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",d("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),i=Calendar.createElement("tr",r),i.className="headrow",this._nav_py=d("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=d("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=d(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=d("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=d("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,i=Calendar.createElement("tr",r),i.className="daynames",this.weekNumbers&&(l=Calendar.createElement("td",i),l.className="name wn",l.innerHTML=Calendar._TT.WK);for(var u=7;u>0;--u)l=Calendar.createElement("td",i),u||(l.navtype=100,l.calendar=this,Calendar._add_evs(l));this.firstdayname=this.weekNumbers?i.firstChild.nextSibling:i.firstChild,this._displayWeekdays();var h=Calendar.createElement("tbody",a);for(this.tbody=h,u=6;u>0;--u){i=Calendar.createElement("tr",h),this.weekNumbers&&(l=Calendar.createElement("td",i));for(var C=7;C>0;--C)l=Calendar.createElement("td",i),l.calendar=this,Calendar._add_evs(l)}this.showsTime?(i=Calendar.createElement("tr",h),i.className="time",l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,l.innerHTML=Calendar._TT.TIME||"&nbsp;",l=Calendar.createElement("td",i),l.className="time",l.colSpan=this.weekNumbers?4:3,function(){function e(e,t,a,n){var r=Calendar.createElement("span",l);if(r.className=e,r.innerHTML=t,r.calendar=s,r.ttip=Calendar._TT.TIME_PART,r.navtype=50,r._range=[],"number"!=typeof a)r._range=a;else for(var i=a;i<=n;++i){var d;d=i<10&&n>=10?"0"+i:""+i,r._range[r._range.length]=d}return Calendar._add_evs(r),r}var t=s.date.getHours(),a=s.date.getMinutes(),n=!s.time24,r=t>12;n&&r&&(t-=12);var d=e("hour",t,n?1:0,n?12:23),o=Calendar.createElement("span",l);o.innerHTML=":",o.className="colon";var u=e("minute",a,0,59),h=null;l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,n?h=e("ampm",r?Calendar._TT.PM:Calendar._TT.AM,[Calendar._TT.am,Calendar._TT.pm]):l.innerHTML="&nbsp;",s.onSetTime=function(){var e,t=this.date.getHours(),a=this.date.getMinutes();n&&(e=t>=12,e&&(t-=12),0==t&&(t=12),h.innerHTML=e?Calendar._TT.pm:Calendar._TT.am),d.innerHTML=t<10?"0"+t:t,u.innerHTML=a<10?"0"+a:a},s.onUpdateTime=function(){var e=this.date,t=parseInt(d.innerHTML,10);n&&(new RegExp(Calendar._TT.pm,"i").test(h.innerHTML)&&t<12?t+=12:new RegExp(Calendar._TT.am,"i").test(h.innerHTML)&&12==t&&(t=0));var a=e.getDate(),r=e.getMonth(),l=e.getFullYear();e.setHours(t),e.setMinutes(parseInt(u.innerHTML,10)),e.setFullYear(l),e.setMonth(r),e.setDate(a),this.dateClicked=!1,this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};var c=Calendar.createElement("tfoot",a);for(i=Calendar.createElement("tr",c),i.className="footrow",l=d(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),l.className="ttip",this.isPopup&&(l.ttip=Calendar._TT.DRAG_TO_MOVE,l.style.cursor="move"),this.tooltips=l,n=Calendar.createElement("div",this.element),this.monthsCombo=n,n.className="combo",u=0;u<Calendar._MN.length;++u){var m=Calendar.createElement("div");m.className=Calendar.is_ie?"label-IEfix":"label",m.month=u,m.innerHTML=Calendar._SMN[u],n.appendChild(m)}for(n=Calendar.createElement("div",this.element),this.yearsCombo=n,n.className="combo",u=12;u>0;--u){var p=Calendar.createElement("div");p.className=Calendar.is_ie?"label-IEfix":"label",n.appendChild(p)}this._init(this.firstDayOfWeek,this.date),t.appendChild(this.element),Calendar.addEvent(this.element,"mousedown",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1})},Calendar._upkeyEvent=function(e){27===e.keyCode&&window.setTimeout(function(){var e=window._dynarch_popupCalendar;return!(!e||e.multiple)&&void e.callCloseHandler()},0)},Calendar._keyEvent=function(e){function t(){h=r.currentDateEl;var e=h.pos;d=15&e,o=e>>4,u=r.ar_days[o][d]}function a(){var e=new Date(r.date);e.setDate(e.getDate()-C),r.setDate(e)}function n(){var e=new Date(r.date);e.setDate(e.getDate()+C),r.setDate(e)}var r=window._dynarch_popupCalendar;if(!r||r.multiple)return!1;var l=Calendar.is_ie||"keydown"==e.type,i=e.keyCode;if(e.ctrlKey)switch(i){case 37:l&&Calendar.cellClick(r._nav_pm);break;case 38:l&&Calendar.cellClick(r._nav_py);break;case 39:l&&Calendar.cellClick(r._nav_nm);break;case 40:l&&Calendar.cellClick(r._nav_ny)}else switch(i){case 32:Calendar.cellClick(r._nav_now);break;case 37:case 38:case 39:case 40:if(l){var s,d,o,u,h,C;for(s=37==i||38==i,C=37==i||39==i?1:7,t();;){switch(i){case 37:if(!(--d>=0)){d=6,i=38;continue}u=r.ar_days[o][d];break;case 38:--o>=0?u=r.ar_days[o][d]:(a(),t());break;case 39:if(!(++d<7)){d=0,i=40;continue}u=r.ar_days[o][d];break;case 40:++o<r.ar_days.length?u=r.ar_days[o][d]:(n(),t())}break}u&&(u.disabled?s?a():n():Calendar.cellClick(u))}break;case 13:l&&Calendar.cellClick(r.currentDateEl,e)}return Calendar.stopEvent(e)},Calendar.prototype._init=function(e,t){var a=new Date(t);a.setHours(13);var n=new Date,r=n.getFullYear(),l=n.getMonth(),i=n.getDate();this.table.style.visibility="hidden";var s=a.getFullYear();s<this.minYear?(s=this.minYear,a.setFullYear(s)):s>this.maxYear&&(s=this.maxYear,a.setFullYear(s)),this.firstDayOfWeek=e;var d=a.getMonth(),o=a.getDate();a.getMonthDays();a.setDate(1);var u=(a.getDay()-this.firstDayOfWeek)%7;u<0&&(u+=7),a.setDate(-u),a.setDate(a.getDate()+1);for(var h=this.tbody.firstChild,C=(Calendar._SMN[d],this.ar_days=new Array),c=Calendar._TT.WEEKEND,m=this.multiple?this.datesCells={}:null,p=0;p<6;++p,h=h.nextSibling){var v=h.firstChild;if(this.weekNumbers){v.className="day wn";var f=a;0==d&&0==p&&0==Date.useISO8601WeekNumbers&&(f=new Date(s,d,1)),v.innerHTML=f.getWeekNumber(this.firstDayOfWeek),v=v.nextSibling}h.className="daysrow";for(var y,g=!1,_=C[p]=[],D=0;D<7;++D,v=v.nextSibling,a.setDate(y+1)){y=a.getDate();var b=a.getDay();v.className="day day-"+y,v.pos=p<<4|D,_[D]=v;var T=a.getMonth()==d;if(T)v.otherMonth=!1,g=!0;else{if(!this.showsOtherMonths){v.className="emptycell",v.innerHTML="&nbsp;",v.disabled=!0;continue}v.className+=" othermonth",v.otherMonth=!0}if(v.disabled=!1,v.innerHTML=this.getDateText?this.getDateText(a,y):y,m&&(m[a.print("%Y%m%d")]=v),this.getDateStatus){var w=this.getDateStatus(a,s,d,y);if(this.getDateToolTip){var M=this.getDateToolTip(a,s,d,y);M&&(v.title=M)}w===!0?(v.className+=" disabled",v.disabled=!0):(/disabled/i.test(w)&&(v.disabled=!0),v.className+=" "+w)}v.disabled||(v.caldate=new Date(a),v.ttip="_",!this.multiple&&T&&y==o&&this.hiliteToday&&(v.className+=" selected",this.currentDateEl=v),a.getFullYear()==r&&a.getMonth()==l&&y==i&&(v.className+=" today",v.ttip+=Calendar._TT.PART_TODAY),c.indexOf(b.toString())!=-1&&(v.className+=v.otherMonth?" oweekend":" weekend"))}g||this.showsOtherMonths||(h.className="emptyrow")}this.date=new Date(t),this.onSetTime(),this.title.innerHTML=Calendar._MN[d]+", "+s,this.table.style.visibility="visible",this._initMultipleDates()},Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var e in this.multiple){var t=this.datesCells[e],a=this.multiple[e];a&&t&&(t.className+=" selected")}},Calendar.prototype._toggleMultipleDate=function(e){if(this.multiple){var t=e.print("%Y%m%d"),a=this.datesCells[t];if(a){var n=this.multiple[t];n?(Calendar.removeClass(a,"selected"),delete this.multiple[t]):(Calendar.addClass(a,"selected"),this.multiple[t]=e)}}},Calendar.prototype.setDateToolTipHandler=function(e){this.getDateToolTip=e},Calendar.prototype.setDate=function(e){e.equalsTo(this.date)||this._init(this.firstDayOfWeek,e)},Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)},Calendar.prototype.setFirstDayOfWeek=function(e){this._init(e,this.date),this._displayWeekdays()},Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(e){this.getDateStatus=e},Calendar.prototype.setRange=function(e,t){this.minYear=e,this.maxYear=t},Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat))},Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this)},Calendar.prototype.destroy=function(){var e=this.element.parentNode;e.removeChild(this.element),Calendar._C=null,window._dynarch_popupCalendar=null},Calendar.prototype.reparent=function(e){var t=this.element;t.parentNode.removeChild(t),e.appendChild(t)},Calendar._checkCalendar=function(e){var t=window._dynarch_popupCalendar;if(!t)return!1;for(var a=Calendar.is_ie?Calendar.getElement(e):Calendar.getTargetElement(e);null!=a&&a!=t.element;a=a.parentNode);return null==a?(window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(e)):void 0},Calendar.prototype.show=function(){if(!this.params.inputField.disabled){for(var e=this.table.getElementsByTagName("tr"),t=e.length;t>0;){var a=e[--t];Calendar.removeClass(a,"rowhilite");for(var n=a.getElementsByTagName("td"),r=n.length;r>0;){var l=n[--r];Calendar.removeClass(l,"hilite"),Calendar.removeClass(l,"active")}}Calendar.current=this,this.element.style.display="block",this.element.className+=" active",this.hidden=!1,this.isPopup&&(window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keyup",Calendar._upkeyEvent),Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar))}},Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keyup",Calendar._upkeyEvent),Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)),Calendar.current=null,this.element.style.display="none",this.element.className=this.element.className.replace(/active/gi,""),this.hidden=!0},Calendar.prototype.showAt=function(e,t){var a=this.element.style;a.left=e+"px",a.top=t+"px",this.show()},Calendar.prototype.showAtElement=function(e,t){function a(e){e.x<0&&(e.x=0),e.y<0&&(e.y=0);var t=document.createElement("div"),a=t.style;a.position="absolute",a.right=a.bottom=a.width=a.height="0px",document.body.appendChild(t);var n=Calendar.getAbsolutePos(t);document.body.removeChild(t),n.y+=jQuery(window).scrollTop(),n.x+=jQuery(window).scrollLeft();var r=e.x+e.width-n.x;r>0&&(e.x-=r),r=e.y+e.height-n.y,r>0&&(e.y-=r)}var n=this,r=Calendar.getAbsolutePos(e);return t&&"string"==typeof t?(this.element.style.display="block",Calendar.continuation_for_the_khtml_browser=function(){var l=jQuery(n.element).outerWidth(),i=jQuery(n.element).outerHeight();n.element.style.display="none";var s=t.substr(0,1),d="l";switch(t.length>1&&(d=t.substr(1,1)),s){case"T":r.y-=i;break;case"B":r.y+=jQuery(e).outerHeight();break;case"C":r.y+=(jQuery(e).outerHeight()-i)/2;break;case"t":r.y+=jQuery(e).outerHeight()-i;break;case"b":}switch(d){case"L":r.x-=l;break;case"R":r.x+=jQuery(e).outerWidth();break;case"C":r.x+=(jQuery(e).outerWidth()-l)/2;break;case"l":r.x+=jQuery(e).outerWidth()-l;break;case"r":}r.width=l,r.height=i+40,n.monthsCombo.style.display="none",a(r),n.showAt(r.x,r.y)},void Calendar.continuation_for_the_khtml_browser()):(this.showAt(r.x,r.y+e.offsetHeight),!0)},Calendar.prototype.setDateFormat=function(e){this.dateFormat=e},Calendar.prototype.setTtDateFormat=function(e){this.ttDateFormat=e},Calendar.prototype.parseDate=function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},Calendar.prototype._displayWeekdays=function(){for(var e=this.firstDayOfWeek,t=this.firstdayname,a=Calendar._TT.WEEKEND,n=0;n<7;++n){t.className="day name";var r=(n+e)%7;n&&(t.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[r]),t.navtype=100,t.calendar=this,t.fdow=r,Calendar._add_evs(t)),a.indexOf(r.toString())!=-1&&Calendar.addClass(t,"weekend"),t.innerHTML=Calendar._SDN[(n+e)%7],t=t.nextSibling}},Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none",this.yearsCombo.style.display="none"},Calendar.prototype._dragStart=function(e){if(!this.dragging){this.dragging=!0;var t,a;Calendar.is_ie?(a=window.event.clientY+document.body.scrollTop,t=window.event.clientX+document.body.scrollLeft):(a=e.clientY+window.scrollY,t=e.clientX+window.scrollX);var n=this.element.style;this.xOffs=t-parseInt(n.left),this.yOffs=a-parseInt(n.top),Calendar.addEvent(document,"mousemove",Calendar.calDragIt),Calendar.addEvent(document,"mouseup",Calendar.calDragEnd)}},Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date._multisplit=function(e,t){if(null==e)return null;null==t&&(t="");var a=[],n=e.length,r="",l=!1;for(i=0;i<n;i++){var s=e.charAt(i);t.indexOf(s)==-1?(l=!0,r+=s):l&&(a[a.length]=r,r="",l=!1)}return r.length>0&&(a[a.length]=r),0==a.length&&(a[a.length]=""),a},Date._parseNonDateFormatChars=function(e){var t="aAbBCdeHIJklmMnpPRSstUWVuwyY%",a="",n=e.length;for(i=0;i<n;i++){var r=e.charAt(i);if("%"==r){var l="";if(i+1<n&&(l=e.charAt(i+1)),i+=1,l.length>0&&t.indexOf(l)!=-1)continue;a.indexOf(r)==-1&&(a+=r),l.length>0&&a.indexOf(l)==-1&&(a+=l)}else a.indexOf(r)==-1&&(a+=r)}return a},Date.splitDate=function(e,t){var a=0,n=-1,r=0,l=Date._parseNonDateFormatChars(t),i=Date._multisplit(e,l),s=t.match(/%./g),d=0,o=0,u=0,h=0;for(d=0;d<i.length;++d)if(i[d])switch(s[d]){case"%d":case"%e":r=Number(i[d]);break;case"%m":n=Number(i[d])-1;break;case"%Y":case"%y":a=Number(i[d]),a<100&&(a+=a>29?1900:2e3);break;case"%b":case"%B":var C=i[d].toLowerCase(),c=!1;if("%b"==s[d])for(o=0;o<12;++o)if(Calendar._SMN[o].substr(0,C.length).toLowerCase()==C){n=o,c=!0;break}if(!c)for(o=0;o<12;++o)if(Calendar._MN[o].substr(0,C.length).toLowerCase()==C){n=o;break}break;case"%H":case"%I":case"%k":case"%l":u=Number(i[d]);break;case"%P":case"%p":/pm/i.test(i[d])&&u<12?u+=12:/am/i.test(i[d])&&u>=12&&(u-=12);break;case"%M":h=Number(i[d]);break;case"%R":var m=i[d],p=m.indexOf(":"),v=m.substring(0,p),f=p==-1?0:m.substring(p+1);u=Number(v),h=Number(f)}return{parts:i,year:a,month:n,day:r,hour:u,minute:h}},Date.parseDate=function(e,t){var a=new Date,n=Date.splitDate(e,t),r=n.parts,l=n.year,i=n.month,s=n.day,d=n.hour,o=n.minute,u=0,h=0;if(isNaN(l)&&(l=a.getFullYear()),isNaN(i)&&(i=a.getMonth()),isNaN(s)&&(s=a.getDate()),isNaN(d)&&(d=a.getHours()),isNaN(o)&&(o=a.getMinutes()),0!=l&&i!=-1&&0!=s)return new Date(l,i,s,d,o,0);for(l=0,i=-1,s=0,u=0;u<r.length;++u)if(r[u].search(/[a-zA-Z]+/)!=-1){var C=-1;for(h=0;h<12;++h)if(Calendar._MN[h].substr(0,r[u].length).toLowerCase()==r[u].toLowerCase()){C=h;break}C!=-1&&(i!=-1&&(s=i+1),i=C)}else Number(r[u])<=12&&i==-1?i=r[u]-1:Number(r[u])>31&&0==l?(l=Number(r[u]),l<100&&(l+=l>29?1900:2e3)):0==s&&(s=r[u]);return 0==l&&(l=a.getFullYear()),i!=-1&&0!=s?new Date(l,i,s,d,o,0):a},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return"undefined"==typeof e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date._MD[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),13,0,0),t=new Date(this.getFullYear(),0,0,13,0,0),a=e-t;return Math.floor(a/Date.DAY)},Date.prototype.getWeekNumber=function(e){return Date.useISO8601WeekNumbers?this.getISO8601WeekNumber():this.getSimpleWeekNumber(e)},Date.prototype.getISO8601WeekNumber=function(){function e(e,t,a){return y=e,m=t,t<3&&(y-=1),t<3&&(m+=12),Math.floor(365.25*y)-Math.floor(y/100)+Math.floor(y/400)+Math.floor(30.6*(m+1))+a-62}function t(t){return year=t.getFullYear(),month=t.getMonth(),day=t.getDate(),wday=t.getDay(),weekday=(wday+6)%7+1,isoyear=year,d0=e(year,1,0),weekday0=(d0+4)%7+1,d=e(year,month+1,day),isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),11==month&&day-weekday>27&&(isoweeknr=1,isoyear+=1),0==month&&weekday-day>3&&(d0=e(year-1,1,0),weekday0=(d0+4)%7+1,isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),isoyear-=1),isoweeknr}return t(this)},Date.prototype.getSimpleWeekNumber=function(e){function t(e,t,a){var n,r=e.getFullYear(),l=new Date(r,0,1);return n=Math.round((e-l)/864e5),null!=t&&(n-=(7+t-l.getDay())%7),null!=a&&(n+=a),[r,1+n/7|0,1+(7+n)%7]}return t(this,e?e:6,6)[1]},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),a=this.getDate(),n=this.getFullYear(),r=this.getWeekNumber(),l=this.getDay(),i={},s=this.getHours(),d=s>=12,o=d?s-12:s,u=this.getDayOfYear();0==o&&(o=12);var h=this.getMinutes(),C=this.getSeconds();i["%a"]=Calendar._SDN[l],i["%A"]=Calendar._DN[l],i["%b"]=Calendar._SMN[t],i["%B"]=Calendar._MN[t],i["%C"]=1+Math.floor(n/100),i["%d"]=a<10?"0"+a:a,i["%e"]=a,i["%H"]=s<10?"0"+s:s,i["%I"]=o<10?"0"+o:o,i["%j"]=u<100?u<10?"00"+u:"0"+u:u,i["%k"]=s,i["%l"]=o,i["%m"]=t<9?"0"+(1+t):1+t,i["%M"]=h<10?"0"+h:h,i["%n"]="\n",i["%p"]=d?Calendar._TT.PM:Calendar._TT.AM,i["%P"]=d?Calendar._TT.PM:Calendar._TT.AM,i["%R"]=i["%k"]+":"+i["%M"],i["%s"]=Math.floor(this.getTime()/1e3),i["%S"]=C<10?"0"+C:C,i["%t"]="\t",i["%U"]=i["%W"]=i["%V"]=r<10?"0"+r:r,i["%u"]=l+1,i["%w"]=l,i["%y"]=(""+n).slice(-2),i["%Y"]=n,i["%%"]="%";var c=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return e.replace(c,function(e){return i[e]||e});for(var m=e.match(c),p=0;p<m.length;p++){var v=i[m[p]];v&&(c=new RegExp(m[p],"g"),e=e.replace(c,v))}return e},window._dynarch_popupCalendar=null;;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar.setup.js' */
Calendar.setup=function(e){function t(t,a){"undefined"==typeof e[t]&&(e[t]=a)}function a(e){var t=e.params,a=e.dateClicked||t.electric;a&&t.inputField&&(t.inputField.value=e.date.print(t.ifFormat),jQuery(t.inputField).change()),a&&t.displayArea&&(t.displayArea.innerHTML=e.date.print(t.daFormat)),a&&"function"==typeof t.onUpdate&&t.onUpdate(e),a&&t.flat&&"function"==typeof t.flatCallback&&t.flatCallback(e),"true"===t.singleClick?t.singleClick=!0:"false"===t.singleClick&&(t.singleClick=!1),a&&t.singleClick&&e.dateClicked&&e.callCloseHandler()}function n(){if(Calendar._UNSUPPORTED===!0)return void alert("The JIRA Calendar does not currently support your language.");var t=e.inputField||e.displayArea,n=e.inputField?e.ifFormat:e.daFormat,l=!1,i=window.calendar;if(i&&i.hide(),t&&(t.value||t.innerHTML)&&(e.date=Date.parseDate(t.value||t.innerHTML,n)),i&&e.cache?(e.date&&i.setDate(e.date),i.hide()):(window.calendar=i=new Calendar(e.firstDay,e.date,e.todayDate,e.onSelect||a,e.onClose||function(e){e.hide()}),i.showsTime=e.showsTime,i.time24="24"==e.timeFormat,i.weekNumbers=e.weekNumbers,Date.useISO8601WeekNumbers=e.useISO8601WeekNumbers,e.useISO8601WeekNumbers&&(i.firstDayOfWeek=1),l=!0),e.multiple){i.multiple={};for(var r=e.multiple.length;--r>=0;){var u=e.multiple[r],s=u.print("%Y%m%d");i.multiple[s]=u}}return i.showsOtherMonths=e.showOthers,i.yearStep=e.step,i.setRange(e.range[0],e.range[1]),i.params=e,i.setDateStatusHandler(e.dateStatusFunc),i.getDateText=e.dateText,i.setDateFormat(n),l&&i.create(),i.refresh(),e.position?i.showAt(e.position[0],e.position[1]):i.showAtElement(e.button||e.displayArea||e.inputField,e.align),!1}function l(){var t=jQuery(e.inputField);e.button&&jQuery(e.button).mousedown(function(e){e.preventDefault(),!t.is(":focus")&&t.is(":enabled")&&t.focus()}),t.keydown(function(e){var t=window.calendar;40===e.keyCode&&(t&&!t.hidden||setTimeout(function(){n()},1))})}e=e||{},t("inputField",null),t("context",null),t("displayArea",null),t("button",null),t("eventName","click"),t("ifFormat","%Y/%m/%d"),t("daFormat","%Y/%m/%d"),t("singleClick",!0),t("disableFunc",null),t("dateStatusFunc",e.disableFunc),t("dateText",null),t("firstDay",null),t("align","Br"),t("range",[1900,2999]),t("weekNumbers",!0),t("useISO8601WeekNumbers",!1),t("flat",null),t("flatCallback",null),t("onSelect",null),t("onClose",null),t("onUpdate",null),t("date",null),t("todayDate",null),t("showsTime",!1),t("timeFormat","24"),t("electric",!0),t("step",1),t("position",null),t("cache",!1),t("showOthers",!1),t("multiple",null);var i,r,u=["context","inputField","button","displayArea"];for(i in u)r=u[i],e[r]instanceof jQuery&&(e[r]=e[r][0]);var s=["inputField","displayArea","button"];for(i in s)if(r=s[i],"string"==typeof e[r]){var o="#"+e[r].escapejQuerySelector(),d=jQuery(e.context||document.body).find(o);e[r]=d[0]}if(!(e.flat||e.multiple||e.inputField||e.displayArea||e.button))return AJS.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(e.firstDay&&null!==e.firstDay&&(e.firstDay=+e.firstDay),null!=e.flat){if("string"==typeof e.flat&&(e.flat=document.getElementById(e.flat)),!e.flat)return AJS.log("Calendar.setup:\n  Flat specified but can't find parent."),!1;var p=new Calendar(e.firstDay,e.date,e.todayDate,e.onSelect||a);return p.showsOtherMonths=e.showOthers,p.showsTime=e.showsTime,p.time24="24"==e.timeFormat,p.params=e,p.weekNumbers=e.weekNumbers,p.setRange(e.range[0],e.range[1]),p.setDateStatusHandler(e.dateStatusFunc),p.getDateText=e.dateText,e.ifFormat&&p.setDateFormat(e.ifFormat),e.inputField&&"string"==typeof e.inputField.value&&p.parseDate(e.inputField.value),p.create(e.flat),p.show(),!1}var f=e.button||e.displayArea||e.inputField;return jQuery(f).bind(e.eventName,function(e){e.preventDefault(),n()}),e.inputField&&l(),p};;
;
/* module-key = 'jira.webresources:calendar-localisation-moment', location = '/includes/lib/calendar/Calendar-localisation-moment.js' */
define("jira/calendar/localisation-moment",["require"],function(a){"use strict";if("function"==typeof moment&&null!==moment&&"function"==typeof Calendar&&null!==Calendar){var e=moment.localeData("jira");null!==e&&"object"==typeof e&&(Calendar._DN=e._weekdays.concat(e._weekdays[0]),Calendar._SDN=e._weekdaysShort.concat(e._weekdaysShort[0]),Calendar._MN=[].concat(e._months),Calendar._SMN=[].concat(e._monthsShort))}}),require("jira/calendar/localisation-moment");;
;
/* module-key = 'jira.webresources:es6-promise', location = '/static/lib/polyfills/promise/es6-promise-3.2.1.js' */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.2.1
 */
(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){G=t}function r(t){Q=t}function o(){return function(){process.nextTick(a)}}function i(){return function(){B(a)}}function s(){var t=0,e=new X(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){t.port2.postMessage(0)}}function c(){return function(){setTimeout(a,1)}}function a(){for(var t=0;t<J;t+=2){var e=tt[t],n=tt[t+1];e(n),tt[t]=void 0,tt[t+1]=void 0}J=0}function f(){try{var t=require,e=t("vertx");return B=e.runOnLoop||e.runOnContext,i()}catch(t){return c()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[rt]&&k(r);var o=n._state;if(o){var i=arguments[o-1];Q(function(){x(o,r,i,n._result)})}else E(n,r,t,e);return r}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function v(t){try{return t.then}catch(t){return ut.error=t,ut}}function y(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function m(t,e,n){Q(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===it?S(t,e._result):e._state===st?j(t,e._result):E(e,void 0,function(e){g(t,e)},function(e){j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===et&&constructor.resolve===nt?b(t,n):r===ut?j(t,ut.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,_()):t(n)?w(e,n,v(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===ot&&(t._result=e,t._state=it,0!==t._subscribers.length&&Q(T,t))}function j(t,e){t._state===ot&&(t._state=st,t._result=e,Q(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+it]=n,o[i+st]=r,0===i&&t._state&&Q(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}function P(t,e){try{return t(e)}catch(t){return ct.error=t,ct}}function x(t,n,r,o){var i,s,u,c,a=e(r);if(a){if(i=P(r,o),i===ct?(c=!0,s=i.error,i=null):u=!0,n===i)return void j(n,d())}else i=o,u=!0;n._state!==ot||(a&&u?g(n,i):c?j(n,s):t===it?S(n,i):t===st&&j(n,i))}function C(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(e){j(t,e)}}function O(){return at++}function k(t){t[rt]=at++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t){return new _t(this,t).promise}function q(t){var e=this;return new e(I(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function F(t){var e=this,n=new e(p);return j(n,t),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function K(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(t){this[rt]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&D(),this instanceof L?C(this,t):K())}function N(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[rt]||k(this.promise),Array.isArray(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function W(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=pt)}var z;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B,G,H,I=z,J=0,Q=function(t,e){tt[J]=t,tt[J+1]=e,J+=2,2===J&&(G?G(a):H())},R="undefined"!=typeof window?window:void 0,V=R||{},X=V.MutationObserver||V.WebKitMutationObserver,Z="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,tt=new Array(1e3);H=Z?o():X?s():$?u():void 0===R&&"function"==typeof require?f():c();var et=l,nt=h,rt=Math.random().toString(36).substring(16),ot=void 0,it=1,st=2,ut=new M,ct=new M,at=0,ft=Y,lt=q,ht=F,pt=L;L.all=ft,L.race=lt,L.resolve=nt,L.reject=ht,L._setScheduler=n,L._setAsap=r,L._asap=Q,L.prototype={constructor:L,then:et,catch:function(t){return this.then(null,t)}};var _t=N;N.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ot&&n<t;n++)this._eachEntry(e[n],n)},N.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===nt){var o=v(t);if(o===et&&t._state!==ot)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===pt){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},N.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===ot&&(this._remaining--,t===st?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},N.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){n._settledAt(it,e,t)},function(t){n._settledAt(st,e,t)})};var dt=W,vt={Promise:pt,polyfill:dt};"function"==typeof define&&define.amd?define(function(){return vt}):"undefined"!=typeof module&&module.exports?module.exports=vt:"undefined"!=typeof this&&(this.ES6Promise=vt),dt()}).call(this);;
;
/* module-key = 'jira.webresources:promise-polyfill', location = '/static/lib/polyfills/promise/promise-polyfill.js' */
ES6Promise.polyfill(),delete window.ES6Promise;;
;
/* module-key = 'jira.webresources:usertiming-polyfill', location = '/static/lib/polyfills/usertiming/usertiming-0.1.8.js' */
/*!
 * usertiming.js
 *
 * A polyfill for UserTiming (http://www.w3.org/TR/user-timing/)
 *
 * Copyright 2013 Nic Jansma
 * http://nicj.net
 *
 * https://github.com/nicjansma/usertiming.js
 *
 * Licensed under the MIT license
 * Modified by Atlassian.
 */
!function(e){"use strict";"undefined"==typeof e&&(e={}),"undefined"==typeof e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var r,n,o=[],t=[],i=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,t=["webkitNow","msNow","mozNow"],r=0;r<t.length;r++)if("function"==typeof e.performance[t[r]]){e.performance.now=e.performance[t[r]],e.performance.userTimingJsNowPrefixed=!0;break}var f=+new Date;e.performance.timing&&e.performance.timing.navigationStart?f=e.performance.timing.navigationStart:"undefined"!=typeof process&&"function"==typeof process.hrtime&&(f=process.hrtime(),e.performance.now=function(){var e=process.hrtime(f);return 1e3*e[0]+1e-6*e[1]}),"function"!=typeof e.performance.now&&(Date.now?e.performance.now=function(){return Date.now()-f}:e.performance.now=function(){return+new Date-f})}var a=function(){},m=function(){},p=[],c=!1,s=!1;if("function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(s=!0),e.performance.userTimingJsPerformanceTimeline=!0,o=["webkit","moz"],t=["getEntries","getEntriesByName","getEntriesByType"],r=0;r<t.length;r++)for(n=0;n<o.length;n++)i=o[n]+t[r].substr(0,1).toUpperCase()+t[r].substr(1),"function"==typeof e.performance[i]&&(e.performance[t[r]]=e.performance[i],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);a=function(e){p.push(e),"measure"===e.entryType&&(c=!0)};var u=function(){c&&(p.sort(function(e,r){return e.startTime-r.startTime}),c=!1)};if(m=function(e,n){for(r=0;r<p.length;)p[r].entryType===e&&("undefined"==typeof n||p[r].name===n)?p.splice(r,1):r++},"function"!=typeof e.performance.getEntries||s){var y=e.performance.getEntries;e.performance.getEntries=function(){u();var r=p.slice(0);return s&&y&&(Array.prototype.push.apply(r,y.call(e.performance)),r.sort(function(e,r){return e.startTime-r.startTime})),r}}if("function"!=typeof e.performance.getEntriesByType||s){var g=e.performance.getEntriesByType;e.performance.getEntriesByType=function(n){if("undefined"==typeof n||"mark"!==n&&"measure"!==n)return s&&g?g.call(e.performance,n):[];"measure"===n&&u();var o=[];for(r=0;r<p.length;r++)p[r].entryType===n&&o.push(p[r]);return o}}if("function"!=typeof e.performance.getEntriesByName||s){var d=e.performance.getEntriesByName;e.performance.getEntriesByName=function(n,o){if(o&&"mark"!==o&&"measure"!==o)return s&&d?d.call(e.performance,n,o):[];"undefined"!=typeof o&&"measure"===o&&u();var t=[];for(r=0;r<p.length;r++)"undefined"!=typeof o&&p[r].entryType!==o||p[r].name===n&&t.push(p[r]);return s&&d&&(Array.prototype.push.apply(t,d.call(e.performance,n,o)),t.sort(function(e,r){return e.startTime-r.startTime})),t}}}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,o=["webkit","moz","ms"],t=["mark","measure","clearMarks","clearMeasures"],r=0;r<t.length;r++)for(n=0;n<o.length;n++)i=o[n]+t[r].substr(0,1).toUpperCase()+t[r].substr(1),"function"==typeof e.performance[i]&&(e.performance[t[r]]=e.performance[i],e.performance.userTimingJsUserTimingPrefixed=!0);var l={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(r){var n=e.performance.now();if("undefined"==typeof r)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&r in e.performance.timing)throw new SyntaxError("Mark name is not allowed");l[r]||(l[r]=[]),l[r].push(n),a({entryType:"mark",name:r,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?l[e]=[]:l={},m("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(r,n,o){var t=e.performance.now();if("undefined"==typeof r)throw new SyntaxError("Measure must be specified");if(!n)return void a({entryType:"measure",name:r,startTime:0,duration:t});var i=0;if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");i=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in l))throw new Error(n+" mark not found");i=l[n][l[n].length-1]}var f=t;if(o)if(f=0,e.performance.timing&&o in e.performance.timing){if("navigationStart"!==o&&0===e.performance.timing[o])throw new Error(o+" has a timing of 0");f=e.performance.timing[o]-e.performance.timing.navigationStart}else{if(!(o in l))throw new Error(o+" mark not found");f=l[o][l[o].length-1]}var m=f-i;a({entryType:"measure",name:r,startTime:i,duration:m})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){m("measure",e)})}"function"==typeof define&&define.amd?define([],function(){return e.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=e.performance)}("undefined"!=typeof window?window:void 0);;
;
/* module-key = 'jira.webresources:content-retrievers', location = '/includes/ajs/contentretriever/ContentRetriever.js' */
define("jira/ajs/contentretriever/content-retriever",["jira/lib/class","jquery"],function(e,n){return e.extend({startingRequest:n.noop,finishedRequest:n.noop,cache:n.noop,isLocked:n.noop,content:n.noop})}),AJS.namespace("AJS.ContentRetriever",null,require("jira/ajs/contentretriever/content-retriever"));;
;
/* module-key = 'jira.webresources:content-retrievers', location = '/includes/ajs/contentretriever/AjaxContentRetriever.js' */
define("jira/ajs/contentretriever/ajax-content-retriever",["jira/ajs/contentretriever/content-retriever","jira/ajs/ajax/smart-ajax","jquery"],function(t,e,i){return t.extend({init:function(t){this.ajaxOptions=t,this.ajaxOptions.requestDelay||0===this.ajaxOptions.requestDelay||(this.ajaxOptions.requestDelay=75)},getAjaxOptions:function(){var t,e=this;return t="string"==typeof this.ajaxOptions?{url:this.ajaxOptions}:i.isFunction(this.ajaxOptions)?this.ajaxOptions():this.ajaxOptions,t.globalThrobber=!1,t.success=function(t,i,s){e._requestComplete(s,i,t,!0,null)},t.error=function(t,i){t.rc&&(t.status=t.rc),e._requestComplete(t,i,null,!1,null)},t},content:function(t){return i.isFunction(t)?(this.callback=t,this._makeRequest(t)):t&&this.callback&&(this.callback(t),delete this.callback),this.$content},startingRequest:function(t){t?this.startingCallback=t:this.startingCallback&&(this.locked=!0,this.startingCallback())},finishedRequest:function(t){t?this.finishedCallback=t:this.finishedCallback&&(this.locked=!1,this.finishedCallback())},failedRequest:function(t){t?this.failedCallback=t:this.failedCallback&&(this.locked=!1,this.failedCallback())},cache:function(t){return"undefined"!=typeof t&&(this.getAjaxOptions().cache=t),this.getAjaxOptions().cache},isLocked:function(){return this.locked},_requestComplete:function(t,s,a,n,r){if("abort"===s)return void(this.locked=!1);var o,u,c=this.getAjaxOptions();if(e.SmartAjaxResult&&(u=e.SmartAjaxResult.apply(window,arguments)),n)o=i.isFunction(c.formatSuccess)?c.formatSuccess(a):i("<div>"+a+"</div>");else{if(i.isFunction(c.formatError))o=c.formatError(a);else if(u){var l=401===u.status?"warning":"error";o=i('<div class="aui-message '+l+'"><span class="aui-icon icon-'+l+'"></span>'+e.buildSimpleErrorContent(u)+"</div>")}this.failedRequest()}this.content(o),this.finishedRequest()},_makeRequest:function(){function t(){e.startingRequest(),e.outstandingRequest=i.ajax(e.getAjaxOptions())}var e=this;this.getAjaxOptions();this.outstandingRequest&&(this.outstandingRequest.abort(),this.outstandingRequest=null),clearTimeout(this._queuedRequest),this.isLocked()?this._queuedRequest=setTimeout(function(){e._makeRequest()},this.ajaxOptions.requestDelay):t()}})}),AJS.namespace("AJS.AjaxContentRetriever",null,require("jira/ajs/contentretriever/ajax-content-retriever"));;
;
/* module-key = 'jira.webresources:content-retrievers', location = '/includes/ajs/contentretriever/DOMContentRetriever.js' */
define("jira/ajs/contentretriever/dom-content-retriever",["jira/ajs/contentretriever/content-retriever","jquery"],function(e,t){return e.extend({init:function(e){this.$content=t(e)},content:function(e){return t.isFunction(e)&&e(this.$content),this.$content}})}),AJS.namespace("AJS.DOMContentRetriever",null,require("jira/ajs/contentretriever/dom-content-retriever"));;
;
/* module-key = 'jira.webresources:content-retrievers', location = '/includes/ajs/contentretriever/DeferredContentRetriever.js' */
define("jira/ajs/contentretriever/deferred-content-retriever",["jira/ajs/contentretriever/content-retriever","jquery","underscore"],function(e,n,r){return e.extend({init:function(e){this.func=e},content:function(e){if(n.isFunction(e)){var t=this.func();t instanceof n?e(t):t.done(r.bind(function(n){e(n)},this))}},cache:function(){return!1}})}),AJS.namespace("AJS.DeferredContentRetriever",null,require("jira/ajs/contentretriever/deferred-content-retriever"));;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.StandardPositioning.js' */
define("jira/ajs/layer/inline-layer/standard-positioning",["jira/lib/class","jquery"],function(t,e){return t.extend({init:function(){this.rebuiltCallbacks=[]},left:function(){var t=this.offset();return{left:t.left,top:t.top+this.offsetTarget().outerHeight()}},right:function(){var t=this.offset();return{left:t.left-this.layer().outerWidth()+this.offsetTarget().outerWidth(),top:t.top+this.offsetTarget().outerHeight()}},window:function(){return window},offset:function(){var t=this.offsetTarget().offset();return this.offsetTarget().hasFixedParent()?(this.layer().css("position","fixed"),t.top=t.top-e(window).scrollTop()):this.layer().css("position","absolute"),t},rebuilt:function(t){var i=this;e.isFunction(t)?this.rebuiltCallbacks.push(t):e.each(this.rebuiltCallbacks,function(){this(i.layer())})},appendToBody:function(){this.layer().appendTo("body")},appendToPlaceholder:function(){this.layer().appendTo(this.$placeholder)},scrollTo:function(){}})});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.WindowPositioning.js' */
define("jira/ajs/layer/inline-layer/window-positioning",["jira/ajs/layer/inline-layer/standard-positioning","jquery"],function(t,e){return t.extend({_calculateOverflow:function(t){var i="fixed"===this.layer().css("position"),r=t.top+this.layer().outerHeight(!0),a=e(window).outerHeight(),n=e(window).scrollTop();return i?Math.max(0,r-a):Math.max(0,r-n-a)},left:function(){var t=this._super(),e=this._calculateOverflow(t);return e>0&&(t.left+=this.offsetTarget().outerWidth(),t.top-=e),t},right:function(){var t=this._super(),e=this._calculateOverflow(t);return e>0&&(t.left-=this.offsetTarget().outerWidth(),t.top-=e),t}})});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.IframePositioning.js' */
define("jira/ajs/layer/inline-layer/iframe-positioning",["jira/ajs/layer/inline-layer/standard-positioning","jira/util/navigator","jquery","jira/util/top-same-origin-window"],function(e,t,n,o){var i=o(window,!0),r=e.extend({offset:function(){var e=r.window(),t=r.topWindow(),o=n("iframe",t.document.body).filter(function(){return this.getAttribute("name")===e.name}),i=o.parent().offset(),l=this._super(),c=this._topDocumentScrollTop(),u=this._topDocumentScrollLeft(),a=this._iframeScrollTop(),d=this._iframeScrollLeft(),s=c-a,f=u-d;return{left:i.left+l.left+f,top:i.top+l.top+s}},_topDocumentScrollTop:function(){return this.isOffsetIncludingScroll()?0:Math.max(i.document.body.scrollTop,i.document.documentElement.scrollTop)},_topDocumentScrollLeft:function(){return this.isOffsetIncludingScroll()?0:Math.max(i.document.body.scrollLeft,i.document.documentElement.scrollLeft)},_iframeScrollTop:function(){return this.isOffsetIncludingScroll()?2*Math.max(window.document.body.scrollTop,window.document.documentElement.scrollTop):0},_iframeScrollLeft:function(){return this.isOffsetIncludingScroll()?2*Math.max(window.document.body.scrollLeft,window.document.documentElement.scrollLeft):0},isOffsetIncludingScroll:function(e){return"undefined"==typeof this.offsetIncludingScroll&&(this.offsetIncludingScroll=!0),"undefined"!=typeof e&&(this.offsetIncludingScroll=e),this.offsetIncludingScroll},appendToBody:function(){i.jQuery("body").append(this.layer())},window:function(){return i},scrollTo:function(){}});return t.isWebkit()&&(r=r.extend({appendToBody:function(){var e=this.layer();this.layer(this._rebuildLayerInParent()),i.jQuery("body").append(this.layer()),e.remove(),this.rebuilt()},appendToPlaceholder:function(){var e=this.layer();this.layer(this._rebuildLayerInIframe()),this.layer().appendTo(this.placeholder()),e.remove(),this.rebuilt()},_rebuildLayerInParent:function(){return i.jQuery("<div class='ajs-layer'>"+this.layer().html()+"</div>")},_rebuildLayerInIframe:function(){return n("<div class='ajs-layer'>"+this.layer().html()+"</div>")}})),t.isMozilla()&&(r=r.extend({appendToPlaceholder:function(){var e=this.layer();this.layer(e.clone(!0).appendTo(this.placeholder())),this.rebuilt(),window.setTimeout(function(){e.remove()},10)}})),r.window=function(){return window},r.topWindow=function(){return i},r});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.OptionsDescriptor.js' */
define("jira/ajs/layer/inline-layer/options-descriptor",["jira/ajs/layer/layer-constants","jira/ajs/descriptor","jira/ajs/contentretriever/ajax-content-retriever","jira/ajs/contentretriever/deferred-content-retriever","jira/ajs/contentretriever/dom-content-retriever","jira/ajs/layer/inline-layer/iframe-positioning","jira/ajs/layer/inline-layer/window-positioning","jira/ajs/layer/inline-layer/standard-positioning","aui/params","jquery"],function(t,e,i,r,n,o,s,p,a,h){return e.extend({init:function(t){if(this._super(t),!this.contentRetriever())if(this.ajaxOptions())this.contentRetriever(new i(this.ajaxOptions()));else if(h.isFunction(this.content()))this.contentRetriever(new r(this.content()));else{if(!this.content())throw new Error("InlineLayer.OptionsDescriptor: Expected either [ajaxOptions] or [contentRetriever] or [content] to be defined");this.contentRetriever(new n(this.content()))}if(!this.positioningController())if(!a.ignoreFrame&&this._inIFrame())this.positioningController(new o);else{var e=h("body"),c="hidden"===e.css("overflow")||"hidden"===e.css("overflowY");c?this.positioningController(new s):this.positioningController(new p)}!this.offsetTarget()&&this.content()instanceof h&&this.offsetTarget(this.content().prev())},_inIFrame:function(){var t=window;try{for(;t.parent.window!==t.window;)if(t=t.parent,t.AJS)return!0}catch(t){}return!1},_getDefaultOptions:function(){return{alignment:t.INTELLIGENT_GUESS,hideOnScroll:".form-body",cushion:20,width:200}},positioningController:function(t){return t?void(this.properties.positioningController=t):this.properties.positioningController},ajaxOptions:function(t){return t?void(this.properties.ajaxOptions=t):this.properties.ajaxOptions},content:function(t){if(t)t=h(t),t.length&&(this.properties.content=t);else if(this.properties.content&&(this.properties.content.length||h.isFunction(this.properties.content)))return this.properties.content},contentRetriever:function(t){return t?void(this.properties.contentRetriever=t):this.properties.contentRetriever},offsetTarget:function(t){if(t)t=h(t),t.length&&(this.properties.offsetTarget=t);else if(this.properties.offsetTarget&&(this.properties.offsetTarget.length||h.isFunction(this.properties.offsetTarget)))return this.properties.offsetTarget},cushion:function(t){return t?void(this.properties.cushion=t):this.properties.cushion},styleClass:function(t){return t?void(this.properties.styleClass=t):this.properties.styleClass},hideOnScroll:function(t){return t?void(this.properties.hideOnScroll=t):this.properties.hideOnScroll},alignment:function(t){return t?void(this.properties.alignment=t):this.properties.alignment},width:function(t){return t?void(this.properties.width=t):h.isFunction(this.properties.width)?this.properties.width.call(this):this.properties.width},allowDownsize:function(t){return t?void(this.properties.allowDownsize=t):this.properties.allowDownsize},customEvents:function(t){return t?void(this.properties.customEvents=t):this.properties.customEvents}})});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.js' */
define("jira/ajs/layer/inline-layer",["jira/ajs/layer/layer-constants","jira/ajs/control","jira/ajs/layer/hide-reasons","jira/ajs/layer/inline-layer/options-descriptor","jira/ajs/contentretriever/content-retriever","jira/util/events","jquery"],function(t,i,e,s,n,o,r){var h=i.extend({CLASS_SIGNATURE:"AJS_InlineLayer",SCROLL_HIDE_EVENT:"scroll.hide-dropdown",init:function(t){var i=this;if(t instanceof s?this.options=t:this.options=new s(t),this.offsetTarget(this.options.offsetTarget()),this.contentRetriever=this.options.contentRetriever(),r.extend(this,this.options.positioningController()),!(this.contentRetriever instanceof n))throw new Error("InlineLayer: Failed construction, Content retriever does not implement interface [AJS.ContentRetrieverInterface]");this.contentRetriever.startingRequest(function(){i._showLoading()}),this.contentRetriever.finishedRequest(function(){i._hideLoading()}),this.contentRetriever.failedRequest&&this.contentRetriever.failedRequest(function(){i.onerror()}),this.$layer=this._render("layer",this.options.alignment())},content:function(t){var i=this;return r.isFunction(t)?void this.contentRetriever.content(function(e){i.$content=e.removeClass("hidden"),t.call(i)}):this.$content},offsetTarget:function(){var t=this.options.offsetTarget();return r.isFunction(t)&&(t=t()),t},contentChange:function(t){var i=this;r.isFunction(t)?(this.contentChangeCallback||(this.contentChangeCallback=[]),this.contentChangeCallback.push(t)):t||(this.trigger("contentChanged",[this]),this.setWidth(this.options.width()),this.setPosition(),this.contentChangeCallback&&r.each(this.contentChangeCallback,function(t,e){e(i)}))},onhide:function(t){var i=this;r.isFunction(t)?(this.hideCallback||(this.hideCallback=[]),this.hideCallback.push(t)):!t&&this.hideCallback&&r.each(this.hideCallback,function(t,e){e(i)})},onerror:function(t){var i=this;r.isFunction(t)?(this.errorCallback||(this.errorCallback=[]),this.errorCallback.push(t)):!t&&this.errorCallback&&r.each(this.errorCallback,function(t,e){e(i)})},layer:function(t){return t?void(this.$layer=t):this.$layer},placeholder:function(t){return t?void this._throwReadOnlyError("placeholder"):this.$placeholder},isVisible:function(t){return"undefined"!=typeof t&&this._throwReadOnlyError("visible"),this.visible},scrollableContainer:function(t){return t&&this._throwReadOnlyError("scrollableContainer"),this.$scrollableContainer},isInitialized:function(t){return t&&this._throwReadOnlyError("initialized"),this.initialized},hide:function(t,i){var e,s=i&&i.target;if(!this.isVisible())return!1;if(e=r.Event(h.EVENTS.beforeHide),this.trigger(e,[this.layer(),t,this.options.id,s]),o.trigger(e,[this.layer(),t,this.options.id,s]),!e.isDefaultPrevented()){this.visible=!1,this._makeInactiveAndHideLayer();var n=this;setTimeout(function(){n.appendToPlaceholder()},0),this.layer().attr("aria-hidden","true"),this._unbindEvents(),this.onhide(),this.trigger("hideLayer",[this]),r(document).trigger("hideLayer",[this.CLASS_SIGNATURE,this]),this.trigger(h.EVENTS.hide,[this.layer(),t,this.options.id]),o.trigger(h.EVENTS.hide,[this.layer(),t,this.options.id]),h.current=null}},_makeInactiveAndHideLayer:function(){this.layer().removeClass(t.ACTIVE_CLASS).hide(),this.offsetTarget().removeClass(t.ACTIVE_CLASS)},refreshContent:function(t){var i=this;this.content(function(){0===this.layer().has(this.content()).length&&this.layer().html(this.content()),r.isFunction(t)&&t.call(i),this.contentChange()})},show:function(){var t,i=this;this.isVisible()||(t=r.Event(h.EVENTS.beforeShow),this.trigger(t,[this.layer(),this.options.id]),o.trigger(t,[this.layer(),this.options.id]),t.isDefaultPrevented()||(this.isInitialized()?this.contentRetriever.cache()===!1?this.refreshContent(function(){i._showContent()}):i._showContent():this._lazyInit(function(){i._showContent()})))},_showContent:function(){this.offsetTarget().is(":visible")?this._show():this._makeInactiveAndHideLayer()},toggle:function(t){null==t&&(t=!this.isVisible()),t?this.show():this.hide(e.toggle)},setPosition:function(){var i,e=r(window);if(this.isInitialized()&&this.offsetTarget()&&0!==this.offsetTarget().length){var s=this.offsetTarget().get(0).getBoundingClientRect(),n=this.layer().width(),o=s.right+n<e.width(),h=s.left-n>0;if(this.options.alignment()===t.RIGHT?i=h||!o?this.right():this.left():this.options.alignment()===t.LEFT?i=o||!h?this.left():this.right():this.options.alignment()===t.INTELLIGENT_GUESS&&(i=s.left+s.width/2>e.width()/2?this.right():this.left()),this.trigger("setLayerPosition",[i,this]),this.options.properties.setMaxHeightToWindow||this.options.properties.setMaxHeightToWindow!==!1&&r(".aui-blanket").is(":visible")){var a=e.scrollLeft();a>0&&(i.left-=a);var l,c=this.fixedParent();l=c.size()?0:e.scrollTop(),i.maxHeight=e.height()-i.top+l-this.options.cushion()}i.minHeight=this.options.properties.minHeight;var d=/iPhone|iPad/.test(navigator.userAgent);if(d){var f=document.body.getBoundingClientRect();i.left=i.left-f.left,i.top=i.top-f.top-50}this.layer().css(i)}},setOverflowAndHeight:function(){this.options.properties.maxInlineResultsDisplayed&&this.layer().addClass("limited")},fixedParent:function(){return this.offsetTarget().parents().filter(function(){return"fixed"===r(this).css("position")})},setWidth:function(t){this.layer().width(t)},_lazyInit:function(i){this.initializing||(this.initializing=!0,this.refreshContent(function(){var e=this;this.initializing=!1,this.initialized=!0,this.layer().insertAfter(this.offsetTarget()),this._supportsBoxShadow()&&this.layer().addClass(t.BOX_SHADOW_CLASS),this.$placeholder=r("<div class='ajs-layer-placeholder' />").insertAfter(this.offsetTarget()),this.$scrollableContainer=this.offsetTarget().closest(this.options.hideOnScroll()),this.rebuilt(function(t){e.layer(t)}),i()}))},_show:function(){h.current&&h.current.hide(),this.visible=!0,this.content().show(),this.appendToBody(),this.layer().addClass(t.ACTIVE_CLASS),this.offsetTarget().addClass(t.ACTIVE_CLASS),this.layer().show(),this.layer().attr("aria-hidden","false"),this.setWidth(this.options.width()),this.setPosition(),this.setOverflowAndHeight(),this._bindEvents(),AJS.dim.dim||this.scrollTo(),h.current=this,this.trigger("showLayer",[this]),r(document).trigger("showLayer",[this.CLASS_SIGNATURE,this]),this.trigger(h.EVENTS.show,[this.layer(),this.options.id]),o.trigger(h.EVENTS.show,[this.layer(),this.options.id])},_hideLoading:function(){this.$layer.removeClass(t.LOADING_CLASS),this.offsetTarget().removeClass(t.LOADING_CLASS)},_showLoading:function(){this.$layer.addClass(t.LOADING_CLASS),this.offsetTarget().addClass(t.LOADING_CLASS)},_unbindEvents:function(){this.$scrollableContainer.unbind(this.SCROLL_HIDE_EVENT),this._unassignCustomEvents(),this._unassignEvents("container",document),this._unassignEvents("win",window)},_bindEvents:function(){var t=this;this.$scrollableContainer.one(this.SCROLL_HIDE_EVENT,function(){t.hide()}),this._assignCustomEvents(),this._assignEvents("container",document),this._assignEvents("win",window)},_assignCustomEvents:function(){var t=this.options.customEvents();if(t){this._unassignCustomEvents();for(var i in t)for(var e in t[i])r(i).on(e,this._getCustomEventsDispatcher(i,e,t))}},_unassignCustomEvents:function(){var t=this.options.customEvents();if(t)for(var i in t)for(var e in t[i])r(i).off(e,this._getCustomEventsDispatcher(i,e,t))},_getCustomEventsDispatcher:function(t,i,e){var s="custom",n=s+"/"+t+"/"+i;if(this._dispatchers||(this._dispatchers={}),!this._dispatchers[n]){var o=this,h=e[t][i];this._dispatchers[n]=function(t){return h.call(o,t,r(this))}}return this._dispatchers[n]},_validateClickToClose:function(t){return t.target!==this.offsetTarget()[0]&&(t.target!==this.layer()[0]&&(!(this.offsetTarget().has(t.target).length>0)&&!(this.layer().has(t.target).length>0)))},keys:{Esc:function(t){this.hide(e.escPressed,t)}},_events:{container:{"aui:keydown":function(t){this._handleKeyEvent(t)},click:function(t){this._validateClickToClose(t)&&this.hide(e.clickOutside,t)}},win:{resize:function(){this.setPosition()},scroll:function(){this.setPosition()}}},_renders:{layer:function(){return r("<div />").addClass("ajs-layer").addClass(this.options.styleClass())}}});return h.EVENTS={beforeHide:"InlineLayer.beforeHide",hide:"InlineLayer.hide",beforeShow:"InlineLayer.beforeShow",show:"InlineLayer.show"},h});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.create.js' */
define("jira/ajs/layer/inline-layer-factory",["jira/ajs/layer/inline-layer","jira/util/objects","jquery","exports"],function(n,e,t,r){r.createInlineLayers=function(r){var a=[];return r.content&&(r.content=t(r.content),t.each(r.content,function(){var c=e.copyObject(r);c.content=t(this),a.push(new n(c))})),1===a.length?a[0]:a}});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/initInlineLayer.js' */
AJS.namespace("AJS.InlineLayer",null,require("jira/ajs/layer/inline-layer")),AJS.namespace("AJS.InlineLayer.create",null,require("jira/ajs/layer/inline-layer-factory").createInlineLayers),AJS.namespace("AJS.InlineLayer.OptionsDescriptor",null,require("jira/ajs/layer/inline-layer/options-descriptor")),AJS.namespace("AJS.InlineLayer.StandardPositioning",null,require("jira/ajs/layer/inline-layer/standard-positioning")),AJS.namespace("AJS.InlineLayer.WindowPositioning",null,require("jira/ajs/layer/inline-layer/window-positioning")),AJS.namespace("AJS.InlineLayer.IframePositioning",null,require("jira/ajs/layer/inline-layer/iframe-positioning")),JIRA.bind(AJS.InlineLayer.EVENTS.beforeHide,function(e){"undefined"!=typeof Calendar&&Calendar.current&&e.preventDefault()});;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/group/Group.js' */
define("jira/ajs/group",["jira/ajs/control","jquery"],function(t,i){return t.extend({init:function(){this.items=[],this.index=-1,this._assignEvents("instance",this)},addItem:function(t){this.items.push(t),this._assignEvents("item",t)},_removeItem:function(t){var e=i.inArray(t,this.items);if(e<0)throw new Error("Group: item ["+t+"] is not a member of this group");t.trigger("blur"),e<this.index&&this.index--,this.items.splice(e,1),this._unassignEvents("item",t)},removeItem:function(t){t.trigger("remove")},removeAllItems:function(){for(;this.items.length;)this.items[0].trigger("remove")},shiftFocus:function(t){if(this.index===-1&&1===t&&(t=0),this.items.length>0){var i=(Math.max(0,this.index)+this.items.length+t)%this.items.length;this.items[i].trigger("focus")}},prepareForInput:function(){this._assignEvents("keys",document)},_events:{instance:{focus:function(){0!==this.items.length&&(this.index<0?this.items[0].trigger("focus"):this._assignEvents("keys",document))},blur:function(){this.index>=0?this.items[this.index].trigger("blur"):this._unassignEvents("keys",document)}},keys:{"aui:keydown":function(t){this._handleKeyEvent(t)}},item:{focus:function(t){var e=this.index;this.index=i.inArray(t.target,this.items),e<0?this.trigger("focus"):e!==this.index&&this.items[e].trigger("blur")},blur:function(t){this.index===i.inArray(t.target,this.items)&&(this.index=-1,this.trigger("blur"))},remove:function(t){this._removeItem(t.target)}}},keys:{}})}),AJS.namespace("AJS.Group",null,require("jira/ajs/group"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/ItemDescriptor.js' */
define("jira/ajs/list/item-descriptor",["jira/ajs/descriptor","jquery"],function(e,t){return e.extend({init:function(e){e&&"object"==typeof e.meta&&(e.meta=JSON.stringify(e.meta)),this._super(e)},REQUIRED_PROPERTIES:{label:!0},_getDefaultOptions:function(){return{showLabel:!0}},styleClass:function(){return this.properties.styleClass},meta:function(){if(this.properties.meta)return JSON.parse(this.properties.meta)},value:function(){return this.properties.value},invalid:function(){return this.properties.invalid},labelSuffix:function(e){return"undefined"!=typeof e&&(this.properties.labelSuffix=e),this.properties.labelSuffix},title:function(){return this.properties.title},label:function(){return this.properties.label},type:function(){return this.properties.type},disabled:function(e){return e?void(this.properties.disabled=e):this.properties.disabled},allowDuplicate:function(){return this.properties.allowDuplicate},removeOnUnSelect:function(e){return"undefined"!=typeof e&&(this.properties.removeOnUnSelect=e),this.properties.removeOnUnSelect},icon:function(){return this.properties.icon},fallbackIcon:function(){return this.properties.fallbackIcon},selected:function(e){return"undefined"!=typeof e&&(this.properties.selected=e),this.properties.selected},model:function(e){return e?void(this.properties.model=e):this.properties.model},keywords:function(){return this.properties.keywords},href:function(){return this.properties.href},highlighted:function(e){return e===!1&&(this.properties.html&&!this.dontUpdateLabelOnHighlightedChange&&(this.properties.label=t("<div>"+this.properties.html+"</div>").text(),this.properties.html=null),this.properties.highlighted=!1),this.properties.highlighted&&this.properties.html},html:function(){return this.properties.html},fieldText:function(){return this.properties.fieldText},noExactMatch:function(){return this.properties.noExactMatch}})}),AJS.namespace("AJS.ItemDescriptor",null,require("jira/ajs/list/item-descriptor"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/MessageDescriptor.js' */
define("jira/ajs/list/message-descriptor",["jira/ajs/list/item-descriptor","jquery"],function(e,s){return e.extend({useAUI:function(){return this.properties.useAUI},messageID:function(){return this.properties.messageID},_getDefaultOptions:function(){return s.extend(this._super(),{useAUI:!0})}})}),AJS.namespace("AJS.MessageDescriptor",null,require("jira/ajs/list/message-descriptor"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/GroupDescriptor.js' */
define("jira/ajs/list/group-descriptor",["jira/ajs/descriptor","jira/ajs/list/item-descriptor"],function(t,e){return t.extend({_getDefaultOptions:function(){return{showLabel:!0,label:"",items:[]}},placement:function(){return this.properties.placement},styleClass:function(){return this.properties.styleClass},weight:function(){return this.properties.weight},label:function(){return this.properties.label},footerText:function(t){return t?void(this.properties.footerText=t):this.properties.footerText},footerHtml:function(t){return t?void(this.properties.footerHtml=t):this.properties.footerHtml},actionBarHtml:function(t){return t&&(this.properties.actionBarHtml=t),this.properties.actionBarHtml},showLabel:function(){return this.properties.showLabel},items:function(t){return t?(this.properties.items=t,this):this.properties.items},addItem:function(t){return this.properties.items.push(t),this},id:function(){return this.properties.id},setModel:function(t){this.properties.model=t},replace:function(){return this.properties.replace},uniqueItemScope:function(){return this.properties.uniqueItemScope},description:function(){return this.properties.description},model:function(t){return t?void(this.properties.model=t):this.properties.model}})}),AJS.namespace("AJS.GroupDescriptor",null,require("jira/ajs/list/group-descriptor"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/ItemDescriptorFactory.js' */
define("jira/ajs/list/item-descriptor-factory",["jira/ajs/list/item-descriptor","jira/ajs/list/message-descriptor"],function(e,s){function r(s,r){return s.isMessage?t(s,r):new e({label:s.label,styleClass:s.styleClass,value:s.value,keywords:s.keywords,meta:{groupIndex:r},type:s.hasOwnProperty("fieldType")?s.fieldType:null})}function t(e,r){return new s({label:e.label,styleClass:e.styleClass,useAUI:e.useAUI,messageID:e.messageID,value:e.value,keywords:e.keywords,meta:{groupIndex:r}})}return{createItemDescriptor:r,createMessageDescriptor:t}}),AJS.namespace("AJS.ItemDescriptor.create",null,require("jira/ajs/list/item-descriptor-factory").createItemDescriptor),AJS.namespace("AJS.MessageDescriptor.create",null,require("jira/ajs/list/item-descriptor-factory").createMessageDescriptor);;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/List.js' */
define("jira/ajs/list/list",["jira/util/logger","jira/util/formatter","jira/ajs/control","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/input/mouse","jira/util/assistive","jira/util/browser","jquery","underscore"],function(t,e,i,s,n,o,r,a,l,c){function h(t){return t.trim().toLowerCase().replace(/[\s\.]+/g,"-")}var u=0;return i.extend({MAX_RESULT_LIMIT:2e3,init:function(t){t=t||{},t?this.options=l.extend(!0,this._getDefaultOptions(t),t):this.options=this._getDefaultOptions(t),this.maxInlineResultsDisplayed=this.options.maxInlineResultsDisplayed||this.MAX_RESULT_LIMIT,this._renders=l.extend({},this._renders,this.options.renderers),this.disabled=!0,this.reset();var e=this;this.options.selectionHandler&&this.$container.delegate(this.options.itemSelector,this.options.selectionEvent,function(t){e.options.selectionHandler.call(e,t)}),this.motionDetector.wait(),this.$container.delegate(this.options.itemSelector,"mousemove",function(){e.disabled||!e.motionDetector.moved&&!a.isSelenium()||(e.index=l.inArray(this,e.$visibleItems),e.focus(!0))})},_getDefaultOptions:function(){return{selectionEvent:"click",delegateTarget:document,matchingStrategy:"(^|.*?(\\s+|\\())({0})(.*)",itemSelector:"li.aui-list-item",hasLinks:!0,stallEventBind:!0,expandAllResults:!1,suggestionRole:"option"}},index:0,moveToFirst:function(){this.$visibleItems.length>0&&(this.index=0,this.focus())},moveToNext:function(){this.index<this.maxIndex?(++this.index,this.focus()):this.options.expandAllResults&&this.hasTooManySuggestions?(this._expandAllResults(),++this.index,this.focus()):this.$visibleItems.length>1&&(this.index=0,this.focus())},container:function(t){return t?(this.$container=l(t),void(this.containerSelector=t)):this.$container},getItemsByDescriptor:function(t){var e=l();return this.$container.find(this.options.itemSelector).each(function(){var i=l.data(this,"descriptor");i&&i.value()===t.value()&&(e=e.add(this))}),e},scrollContainer:function(){return this.options.scrollContainer?this.$container.find(this.options.scrollContainer):this.$container.parent()},_isScrollConstrained:function(){var t=this.scrollContainer()[0];return t.clientHeight<t.scrollHeight},moveToPrevious:function(){this.index>0?(--this.index,this.focus()):this.$visibleItems.length>0&&(this.index=this.$visibleItems.length-1,this.focus())},scrollActiveItemIntoView:function(){var t=this.$visibleItems.filter(".active"),e=this.scrollContainer(),i=e.scrollTop();if(0!==t.length){if(!this._isScrollConstrained())return void t.scrollIntoView({callback:l.proxy(this.motionDetector,"wait")});if(0!==t.closest(e).length){if(t.is(e.find(this.items).first()))return void this._scrollContainerTo(0);var s=t.offset().top-e.offset().top,n=e.outerHeight()-t.outerHeight()-s;s>=0?n<0&&this._scrollContainerTo(i-n):this._scrollContainerTo(i+s)}}},_scrollContainerTo:function(t){var e=this.scrollContainer();e.scrollTop()!==t&&(this.motionDetector.unbind(),this.motionDetector.wait(),e.scrollTop(t))},focus:function(t){this.$visibleItems.removeClass("active");var e=this.$visibleItems.eq(this.index);e.addClass("active"),this.lastFocusedItemDescriptor=e.data("descriptor"),this.trigger("itemFocus",e,this.lastFocusedItemDescriptor),t||this.scrollActiveItemIntoView()},motionDetector:new o.MotionDetector,disable:function(){this.disabled||(this._unassignEvents("delegateTarget",this.options.delegateTarget),this.disabled=!0,this.lastFocusedItemDescriptor=null)},enable:function(){var t=this;t.disabled&&(this.options.stallEventBind?window.setTimeout(function(){t._assignEvents("delegateTarget",t.options.delegateTarget)},0):t._assignEvents("delegateTarget",t.options.delegateTarget),t.disabled=!1,this._scrollContainerTo(0))},getFocused:function(){return this.$visibleItems.filter(".active")},reset:function(t){this.$container=l(this.options.containerSelector),this.items=l(this.options.itemSelector,this.$container).not(".no-suggestions"),this.$visibleItems=this._computeVisibleItems(),this.groups=l(this.options.groupSelector,this.$container),this.maxIndex=this.$visibleItems.length-1,this.index=this.$visibleItems[t]?t:0,this.focus(!0)},_computeVisibleItems:function(){return this.items.not(".hidden, .disabled")},selectValue:function(e){var i=this.$container.find(this.options.itemSelector).filter(function(){return l(this).parent().data("descriptor").value()==e});i.length||t.log("WARN: No List item found with Decriptor value '"+e+"'"),i.click()},_getLinkFromItem:function(t){var e;return t=l(t),e=t.is("a")?t:t.find("a")},_makeResultDiv:function(t,e){function i(){c.length>0&&(r.append(a._generateUngroupedOptions(c,e)),c=[])}var o=l('<div class="aui-list-fixed" role="presentation">'),r=l('<div class="aui-list-scroll" tabindex="-1" role="presentation">'),a=this,c=[];return l.each(t,function(t,l){var h,u;l instanceof s?(i(),h="fixed"===l.placement()?o:r,u=a._generateOptGroup(l,e),h.append(u)):l instanceof n&&c.push(l)}),i(),0===o.children().length?r:o.add(r)},_addResultToContainer:function(t){if(0===t.not(".aui-list-fixed").find(this.options.itemSelector).length){var e=this.$container.find(".aui-list-scroll");0===e.length&&(e=l('<div class="aui-list-scroll" tabindex="-1" role="presentation">').appendTo(this.$container));var i=this._render("noSuggestion");r.readText(i.text()),e.html(i)}else t.find("ul:last").addClass("aui-last"),this.$container.html(t)},generateListFromJSON:function(t,e,i){this.suggestions=0,this.exactMatchIndex=-1,this.lastFocusedIndex=-1,this.lastQuery=e,this.lastData=t,this.forceAllResults=i,this.hasTooManySuggestions=!1;var s=this._makeResultDiv(t,e);this.$container.hide(),this._addResultToContainer(s,e),this.$container.show();var n=this.exactMatchIndex>=0?this.exactMatchIndex:this.lastFocusedIndex;this.reset(n)},appendToGroupDescriptor:function(t,e){var i=c.find(this.lastData,function(e){return e.id()===t});c.forEach(e,function(t){i.addItem(t)})},_highlight:function(t,e){return this.options.matchingHighlighter?this.options.matchingHighlighter(t,e):t.label().replace(e,function(t,e,i,s,n){var o=l("<div>");return e&&o.append(l("<span>").text(e)),s&&o.append(l("<em>").text(s)),n&&o.append(l("<span>").text(n)),o.html()})},_generateOption:function(t,e,i){var s;if(!t.highlighted()&&i&&i.test(t.label())&&(s=this._highlight(t,i)),this.exactMatchIndex<0){var n=l.trim(t.label()).toLowerCase();t.noExactMatch()||n!==l.trim(e).toLowerCase()?this.lastFocusedIndex<0&&this.lastFocusedItemDescriptor&&n===l.trim(this.lastFocusedItemDescriptor.label()).toLowerCase()&&(this.lastFocusedIndex=this.suggestions):this.exactMatchIndex=this.suggestions}return this.suggestions++,this._render("suggestion",t,s)},_filterOptions:function(t,i,s){if(!i)return t;for(var n=[],o=new RegExp(e.format(".*{0}.*",i),"i"),r=0,a=t.length;r<a;r++){var l=this._filterOption(t[r],o,s);l&&n.push(l)}return n},_filterOption:function(t,e,i){var s;if(t.highlighted())s=t;else if(i.test(t.label()))s=t;else if(t.keywords()){for(var n=[],o=""+t.keywords(),r=o.split(","),a=0;a<r.length;a++){var l=r[a];e.test(l)&&n.push(l)}n.length&&(t.labelSuffix(" "+n.join(", ")),s=t)}return s},_addOptionsToContainer:function(t,e,i,s){for(var n=this,o=this.maxInlineResultsDisplayed,a=!1,c=this.forceAllResults,h=[],u=0,d=t.length;u<d;u++){var p=t[u];if(!(u<o||c)){this.hasTooManySuggestions=!0;var g=n._render("tooManySuggestions",t.length-u);r.readText(g.text()),h.push(g[0]);break}var f=n._generateOption(p,i,s);f&&(a=!0,h.push(f[0]))}return e.html(l(h)),a},_filterAndAddOptions:function(t,i,s){var n,o;return s&&(n=RegExp.escape(s),o=new RegExp(e.format(this.options.matchingStrategy,n),"i"),t=this._filterOptions(t,n,o)),this.options.maxResultsDisplayedPerGroup&&(t=t.slice(0,this.options.maxResultsDisplayedPerGroup)),this._addOptionsToContainer(t,i,s,o)},_generateUngroupedOptions:function(t,e){var i=this._render("ungroupedSuggestions"),s=this._filterAndAddOptions(t,i,e);if(s)return i},_generateOptGroup:function(t,e){var i,s=l(),n=this._render("suggestionGroup",t),o=t.items();if(i=this._filterAndAddOptions(o,n,e))return t.label()&&t.showLabel()!==!1&&(s=s.add(this._render("suggestionGroupHeading",t))),t.footerText()?n.append(this._render("suggestionsGroupFooter",t.footerText())):t.footerHtml()&&n.append(t.footerHtml()),t.actionBarHtml()&&n.prepend(t.actionBarHtml()),s=s.add(n)},_expandAllResults:function(){this.generateListFromJSON(this.lastData,this.lastQuery,!0)},_events:{delegateTarget:{"aui:keydown":function(t){this._handleKeyEvent(t)}}},_renders:{suggestion:function(t,e){u+=1;var i=t.fieldText()||t.label(),s=AJS.escapeHtml(h(i)),n=l('<li class="aui-list-item"><a class="aui-list-item-link" role="presentation" /></li>').attr({role:this.options.suggestionRole,id:s+"-"+u}),o=n.children();if(n.addClass("aui-list-item-li-"+s),t.selected()&&n.addClass("aui-checked"),this.options.hasLinks&&o.attr("href",t.href()||"#"),t.styleClass()&&o.addClass(t.styleClass()),e?o.html(e):t.html()?o.html(t.html()):o.text(t.label()),t.labelSuffix()){var r=l("<span class='aui-item-suffix' />").text(t.labelSuffix());o.append(r)}if(t.icon()&&"none"!==t.icon()){var a=l('<img class="icon"  alt="" />');a.attr("src",t.icon()),o.addClass("aui-iconised-link").prepend(a)}return t.title()&&o.prop("title",t.title()),n.data("descriptor",t),n},noSuggestion:function(){return l('<li class="no-suggestions">').text("No Matches")},tooManySuggestions:function(t){if(this.options.expandAllResults){var i=this,s=l(["<button type='button' class='aui-button aui-button-link view-all'>",e.format("View all ({0} more)",t),"</button>"].join("")),n=l('<li class="no-suggestions"></li>').append(s);return s.click(function(t){i._expandAllResults(),t.stopPropagation()}),s=null,n}return l('<li class="no-suggestions">'+e.format("{0} more options. Continue typing to refine further.",t)+"</li>")},ungroupedSuggestions:function(){return l("<ul>")},suggestionGroup:function(t){return l("<ul/>").attr({id:h(t.label()),class:"aui-list-section","aria-label":t.label()}).addClass(t.styleClass()).data("descriptor",t)},suggestionGroupHeading:function(t){var e=l("<h5 />").text(t.label()).addClass(t.styleClass()).data("descriptor",t);return t.description()&&l("<span class='aui-section-description' />").text(" ("+t.description()+")").appendTo(e),e},suggestionsGroupFooter:function(t){return l("<li class='aui-list-section-footer' />").text(t)}},_acceptSuggestion:function(t){!t instanceof l&&(t=l(t));var e=this._getLinkFromItem(t);if(e.length){var i=new l.Event("click");e.trigger(i,[e]),i.isDefaultPrevented()||(window.location.href=e.attr("href"))}},getAllItems:function(){return this.$container.find(this.options.itemSelector)},_acceptUserInput:function(t){t.triggerHandler("blur")},_handleSectionByKeyboard:function(t){var e=this.getFocused(),i=l(t.target);if(0!==e.length){if(this._latestQuery&&l.trim(i.val())!==this._latestQuery){var s=i.val().toLowerCase().match(/\S+/g);if(s){var n=this.lastFocusedItemDescriptor&&this.lastFocusedItemDescriptor.html(),o=n?l("<div>").html(n):e,r=[];o.find("em,b").each(function(){var t=l(this),e=l(t.attr("nextSibling")).text().toLowerCase().match(/^\S*/)[0];l.each(t.text().toLowerCase().match(/\S+/g),function(t,i){r.push(i+e)})});for(var a=0;a<s.length;a++){for(var c=s[a],h=c.length,u=!1,d=0;d<r.length;d++)if(r[d].slice(0,h)===c){u=!0;break}if(!u)return void this._acceptUserInput(i)}}}this.scrollActiveItemIntoView(),this.options.selectionHandler&&!this.options.selectionHandler.call(this,t)||this._acceptSuggestion(e)}},_isValidInput:function(){return!this.disabled&&this.$container.is(":visible")},keys:{Down:function(t){this.moveToNext(),t.preventDefault()},Up:function(t){this.moveToPrevious(),t.preventDefault()},Return:function(t){this._handleSectionByKeyboard(t),t.preventDefault()}},_buildElementId:h})}),AJS.namespace("AJS.List",null,require("jira/ajs/list/list"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/PageableList.js' */
define("jira/ajs/list/pageable-list",["jira/util/formatter","jira/ajs/list/list","jira/ajs/list/group-descriptor","jquery","underscore"],function(t,e,i,s,n){return e.extend({init:function(t){var e={pageSize:50,pagingThreshold:100};t=s.extend(!0,e,t),this._super(t),this.pageSize=this.options.pageSize},generateListFromJSON:function(e,s,r){var a,o,h=[],g=0;if(this.pageNumber=this.pageNumber||1,s!==this.lastQuery&&(this.pageNumber=1),s){a=RegExp.escape(s),o=new RegExp(t.format(this.options.matchingStrategy,a),"i");for(var l=0;l<e.length;l++)h.push(new i(n.omit(e[l].allProperties(),"items"))),h[l].items(this._filterOptions(e[l].items(),a,o)),g+=h[l].items().length}else{h=e;for(var l=0;l<e.length;l++)g+=e[l].items().length}g<this.options.pagingThreshold&&(r=!0),this._super(h,s,r)},_filterAndAddOptions:function(e,i,s){var n;return s&&(n=new RegExp(t.format(this.options.matchingStrategy,RegExp.escape(s)),"i")),this._addOptionsToContainer(e,i,s,n)},_addOptionsToContainer:function(t,e,i,n){for(var r=!1,a=[],o=this.pageNumber*this.pageSize,h=0,g=t.length;h<g;h++){var l=t[h];if(this.forceAllResults||this.suggestions<o){var u=this._generateOption(l,i,n);u&&(r=!0,a.push(u[0]))}}return e.children().length?e.find(".aui-list-item:last").after(s(a)):e.html(s(a)),r},addNextPage:function(){var t,e,i,s=this.suggestions;this.pageNumber++;for(var n=0;n<this.lastData.length;n++)t=this.lastData[n],t.items().length>s&&(e=this.$container.find("#"+this._buildElementId(t.label())),0===e.length?(e=this._generateOptGroup(t,this.lastQuery),i="fixed"===t.placement()?this.$container.find(".aui-list-fixed"):this.$container.find(".aui-list-scroll"),i.append(e)):this._filterAndAddOptions(t.items().slice(s),e,this.lastQuery)),s-=t.items().length;return this.reset(this.index),this.suggestions},disable:function(){this._super(),this.pageNumber=1},showPageRenderError:function(){this.$container.find(".aui-last").append(this._render("errorRenderingPage"))},_renders:{errorRenderingPage:function(){return s("<li class='no-suggestions' />").text("Error rendering next page of results. Close dropdown and try again.")}},isDisplayedAllItems:function(){var t=n.reduce(this.lastData,function(t,e){return t+e.items().length},0);return t===this.suggestions}})});;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/ListWithMessages.js' */
define("jira/ajs/list/list-with-messages",["jira/ajs/list/list","jira/ajs/list/message-descriptor","jquery"],function(s,e,a){var t=s.extend({_filterOption:function(s,a,t){return s instanceof e?s:this._super(s,a,t)},_computeVisibleItems:function(){return this.items.not(".hidden, .disabled, .nofocus")},_generateOption:function(s,a,t){return s instanceof e?this._render(s.useAUI()?"AUImessage":"message",s):this._super(s,a,t)}});return t.prototype._renders.message=function(s){var e=s.messageID()||s.fieldText()||s.label(),t=AJS.escapeHtml(a.trim(e).toLowerCase()).replace(/[\s\.]+/g,"-"),i=a('<li class="aui-list-item nofocus">').addClass("aui-list-item-li-"+t),l=a('<span class="aui-list-item-message" />');return s.styleClass()&&l.addClass(s.styleClass()),l.text(s.label()),i.append(l).data("descriptor",s),i},t.prototype._renders.AUImessage=function(s){var e=s.messageID()||s.fieldText()||s.label(),t=AJS.escapeHtml(a.trim(e).toLowerCase()).replace(/[\s\.]+/g,"-"),i=a('<li class="aui-list-item nofocus aui-list-item-li-'+t+'">'),l=a('<div class="aui-list-item-aui-message aui-message" />'),n=a('<span class="aui-icon"/>'),r=a("<p />");return s.styleClass()?(l.addClass(s.styleClass()),n.addClass("icon-"+s.styleClass())):n.addClass("icon-generic"),r.text(s.label()),l.append(n).append(r),i.append(l).data("descriptor",s),i},t}),AJS.namespace("AJS.ListWithMessages",null,require("jira/ajs/list/list-with-messages"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.constants.js' */
define("jira/ajs/dropdown/dropdown-constants",{TRIGGER_SELECTOR:".aui-dropdown-trigger",CONTENT_SELECTOR:".aui-dropdown-content"});;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.ListItem.js' */
define("jira/ajs/dropdown/dropdown-list-item",["jira/ajs/layer/layer-constants","jira/ajs/control","jira/ajs/input/mouse","jquery","jira/util/top-same-origin-window"],function(t,e,s,i,n){var o=n(window),a=e.extend({init:function(t){this._setOptions(t),this.$element=i(this.options.element),this.hasFocus=!1,this._assignEvents("instance",this),this._assignEvents("element",this.$element)},_getDefaultOptions:function(){return{element:null,autoScroll:!0,focusClass:t.ACTIVE_CLASS}},_events:{instance:{focus:function(t){this.hasFocus=!0,this.$element.addClass(this.options.focusClass),t.noscrolling||(a.MOTION_DETECTOR.unbind(),this.isWaitingForMove=!0,this.options.autoScroll&&this.$element.scrollIntoView(a.SCROLL_INTO_VIEW_OPTIONS))},blur:function(){this.hasFocus=!1,this.$element.removeClass(this.options.focusClass)},accept:function(){var t=new i.Event("click"),e=this.$element.is("a[href]")?this.$element:this.$element.find("a[href]");e.trigger(t),t.isDefaultPrevented()||(o.location=e.attr("href"))}},element:{mousemove:function(){(this.isWaitingForMove&&a.MOTION_DETECTOR.moved&&!this.hasFocus||!this.hasFocus)&&(this.isWaitingForMove=!1,this.trigger({type:"focus",noscrolling:!0}))}}}});return a.MOTION_DETECTOR=new s.MotionDetector,a.SCROLL_INTO_VIEW_OPTIONS={duration:100,callback:function(){a.MOTION_DETECTOR.wait()}},a}),AJS.namespace("AJS.Dropdown.ListItem",null,require("jira/ajs/dropdown/dropdown-list-item"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.ListItemGroup.js' */
define("jira/ajs/dropdown/dropdown-list-item-group",["jira/ajs/group"],function(t){return t.extend({keys:{Up:function(t){this.shiftFocus(-1),t.preventDefault()},Down:function(t){this.shiftFocus(1),t.preventDefault()},Return:function(t){this.items[this.index].trigger("accept"),t.preventDefault()}}})}),AJS.namespace("AJS.Dropdown.ListItemGroup",null,require("jira/ajs/dropdown/dropdown-list-item-group"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.OptionsDescriptor.js' */
define("jira/ajs/dropdown/dropdown-options-descriptor",["jira/ajs/descriptor","jira/ajs/dropdown/dropdown-constants","jira/ajs/dropdown/dropdown-list-item-group","jira/ajs/contentretriever/ajax-content-retriever","jira/ajs/contentretriever/deferred-content-retriever","jira/ajs/contentretriever/dom-content-retriever","jquery"],function(t,e,r,i,n,o,s){return t.extend({init:function(t){if(this._super(t),!this.content()&&!this.trigger())throw new Error("Dropdown.OptionsDescriptor: expected either [content] or [trigger] to be defined.");this.trigger()&&!this.content()?this.content(this.trigger().next(e.CONTENT_SELECTOR)):this.content()&&!this.trigger()&&this.content(this.trigger().next(e.TRIGGER_SELECTOR)),this.trigger()&&!this.content()?(this.ajaxOptions()?this.ajaxOptions().url||(this.ajaxOptions().url=this.trigger().attr("href")):this.trigger().attr("href")&&this.ajaxOptions(this.trigger().attr("href")),this.contentRetriever(new i(this.ajaxOptions()))):this.content()&&(s.isFunction(this.content())?this.contentRetriever(new n(this.content())):this.contentRetriever(new o(this.content()))),this.listController()||this.listController(new r)},_getDefaultOptions:function(){return{trigger:null,ajaxOptions:null,autoScroll:!0}},content:function(t){return t?(t=s(t),void(t.length&&(this.properties.content=t))):this.properties.content},trigger:function(t){return t?void(this.properties.trigger=t):this.properties.trigger},contentRetriever:function(t){return t?void(this.properties.contentRetriever=t):this.properties.contentRetriever},listController:function(t){return t?void(this.properties.listController=t):this.properties.listController},focusFirstItem:function(t){return t?void(this.properties.focusFirstItem=t):this.properties.focusFirstItem},autoScroll:function(t){return"undefined"!=typeof t&&(this.properties.autoScroll=!!t),this.properties.autoScroll},ajaxOptions:function(t){return t?void(this.properties.ajaxOptions=t):this.properties.ajaxOptions},loop:function(t){return"undefined"==typeof t?this.properties.loop:void(this.properties.loop=t)},alignment:function(t){return t?void(this.properties.alignment=t):this.properties.alignment},eventDelegator:function(t){return"undefined"==typeof t?this.properties.eventDelegator:void(this.properties.eventDelegator=t)}})}),AJS.namespace("AJS.Dropdown.OptionsDescriptor",null,require("jira/ajs/dropdown/dropdown-options-descriptor"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.js' */
define("jira/ajs/dropdown/dropdown",["jira/ajs/control","jira/ajs/layer/inline-layer","jira/ajs/layer/layer-constants","jira/ajs/dropdown/dropdown-constants","jira/ajs/dropdown/dropdown-list-item","jira/ajs/dropdown/dropdown-options-descriptor","jquery"],function(t,r,o,i,e,n,s){var l=t.extend({CLASS_SIGNATURE:"AJS_DROPDOWN",init:function(t){var o,i=this;t instanceof n?this.options=t:this.options=new n(t),o=this.options.allProperties(),o.offsetTarget||(o.offsetTarget=o.trigger),this.layerController=new r(this.options.allProperties()),this.layerController._validateClickToClose=function(t){return t.target!==this.offsetTarget()[0]&&(t.target!==this.layer()[0]&&!(this.offsetTarget().has(t.target).length>0))},this.listController=this.options.listController(),this.listEnabler=function(t){i.listController._handleKeyEvent(t)},this.layerController.onhide(function(){i.hide()}),this.layerController.onerror(function(){s.isFunction(i.options.properties.onerror)&&i.options.properties.onerror(i)}),this.layerController.contentChange(function(){i.listController.removeAllItems(),i.layerController.layer().find("div > ul > li:visible:has(a)").each(function(){i.listController.addItem(new e({element:this,autoScroll:i.options.autoScroll()}))}),i.options.focusFirstItem()?i.listController.shiftFocus(0):i.listController.prepareForInput()}),this.trigger(this.options.trigger()),this._applyIdToLayer()},show:function(){this.trigger().addClass(o.ACTIVE_CLASS),s(this).trigger("showLayer"),this.layerController.show(),this.options.focusFirstItem()?this.listController.shiftFocus(0):this.listController.prepareForInput()},hide:function(){s(this).trigger("hideLayer"),this.trigger().removeClass(o.ACTIVE_CLASS),this.layerController.hide(),this.listController.trigger("blur")},toggle:function(){this.layerController.isVisible()?this.hide():this.show()},content:function(t){return t?void this.layerController.content(t):this.layerController.content()},trigger:function(t){return t?(this.options.trigger()&&this._unassignEvents("trigger",this.options.trigger()),this.options.trigger(s(t)),this.layerController.offsetTarget()||this.layerController.offsetTarget(this.options.trigger()),this._assignEvents("trigger",this.options.trigger()),void 0):this.options.trigger()},_applyIdToLayer:function(){this.trigger().attr("id")&&this.layerController.layer().attr("id",this.trigger().attr("id")+"_drop")},_events:{trigger:{click:function(t){t.preventDefault(),this.toggle()}}}});return s.extend(l,i),l}),AJS.namespace("AJS.DropDown",null,require("jira/ajs/dropdown/dropdown")),AJS.namespace("AJS.Dropdown",null,require("jira/ajs/dropdown/dropdown"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jquery"),d=[];return{current:null,addInstance:function(){d.push(this)},hideInstances:function(){var i=this;t(d).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(i){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var n=this.dropdown;o()||i||setTimeout(function(){var i=t(window),o=n.offset().top+n.prop("offsetHeight")-i.height()+10;i.scrollTop()<o&&t("html,body").animate({scrollTop:o},300,"linear")},100)}},hideDropdown:function(){this.displayed!==!1&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=t(o),this.dropdown.css({display:"none"}),t(document).keydown(function(i){9===i.keyCode&&n.hideDropdown()}),i.target?t.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",t(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),t(document.body).click(function(){n.displayed&&n.hideDropdown()})}}}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jira/dropdown/AutoComplete.js' */
define("jira/dropdown/auto-complete",["require"],function(o){var n=o("jira/util/objects"),t=o("jquery"),i=o("jira/dropdown");return function(o,e){var r=n.begetObject(i);return r.init=function(o,n){this.addInstance(this),this.dropdown=t(n).click(function(o){o.stopPropagation()}),this.dropdown.css({display:"none"}),o.target?t.aop.before(o,function(){r.displayed||r.displayDropdown(o.target.preventScroll)}):o.click(function(o){r.displayed||(r.displayDropdown(),o.stopPropagation())}),t(document.body).click(function(){r.displayed&&r.hideDropdown()})},r.init(o,e),r}}),AJS.namespace("JIRA.Dropdown.AutoComplete",null,require("jira/dropdown/auto-complete"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jira/dropdown/Standard.js' */
define("jira/dropdown/standard",["jira/dropdown","jira/util/objects"],function(r,n){return function(d,a){var e=n.begetObject(r);return e.init(d,a),e}}),AJS.namespace("JIRA.Dropdown.Standard",null,require("jira/dropdown/standard"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.create.js' */
define("jira/ajs/dropdown/dropdown-factory",["jira/ajs/dropdown/dropdown","jira/util/objects","jquery"],function(e,t,r){function n(n){var o=[];if(n.content&&!n.trigger)n.content=r(n.content),r.each(n.content,function(){var c=t.copyObject(n);c.content=r(this),o.push(new e(c))});else if(!n.content&&n.trigger)n.trigger=r(n.trigger),r.each(n.trigger,function(){var c=t.copyObject(n);c.trigger=r(this),o.push(new e(c))});else if(n.content&&n.trigger){if(n.content=r(n.content),n.trigger=r(n.trigger),n.content.length!==n.trigger.length)throw new Error("Dropdown.create: Expected the same number of content elements as trigger elements");n.trigger.each(function(c){var i=t.copyObject(n);i.trigger=r(this),i.content=n.content.eq(c),o.push(new e(i))})}return o}return{createDropdown:n}}),AJS.namespace("AJS.Dropdown.create",null,require("jira/ajs/dropdown/dropdown-factory").createDropdown);;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jira/dropdown/containDropdown.js' */
define("jira/dropdown/contain-dropdown",["jquery","exports"],function(o,n){function e(n,e,i){function c(){return n.$.offset().top-o(e).offset().top}var s,d,l,p=25;n.$.parents(e).length!==-1&&(s=o(e),d=c(),p=30,l=s.outerHeight()-d-p,l<=parseInt(n.$.prop("scrollHeight"),10)?r(n,l):i&&t(n),n.reset())}function r(o,n){o.$.css({height:n}),"scroll"!==o.$.css("overflowY")&&o.$.css({width:15+o.$.prop("scrollWidth"),overflowY:"scroll",overflowX:"hidden"})}function t(o){o.$.css({height:"",width:"",overflowY:"",overflowX:""})}n=e,n.containHeight=r,n.releaseContainment=t}),AJS.namespace("AJS.containDropdown",null,require("jira/dropdown/contain-dropdown")),AJS.namespace("JIRA.containDropdown",null,require("jira/dropdown/contain-dropdown"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jquery/plugins/linkedmenu/linkedMenu.js' */
!function(e){e.deactivateLinkedMenu=function(){},e.linkedMenuInstances=[],e.fn.linkedMenu=function(n){var o,u,s=this,t=!1,i=function(n){n=e(n),s.blur(),n.trigger("click","focus","mousedown")},c=function(e){var n;37!==e.keyCode&&39!==e.keyCode&&27!==e.keyCode||(37===e.keyCode?(n=o-1,o-1>=0?r(s[n])&&(o=n,i(s[o])):(n=s.length-1,r(s[n])&&(o=n,i(s[o])))):39===e.keyCode?(n=o+1,n<s.length?r(s[n])&&(o=n,i(s[o])):(n=0,r(s[n])&&(o=n,i(s[o])))):s.disableLinkedMenu(e),e.preventDefault())},r=function(e){if(e!==s[o])return!0},d=function(){r(this)&&(o=e.inArray(this,s),i(this))},l=function(){var u=e.inArray(this,e(n.reflectFocus));r(s[u])&&(o=u,i(s[o]))},a=function(){var i,r;t||(e.currentLinkedMenu=s,n.onFocusRemoveClass&&(i=e(n.onFocusRemoveClass),r=n.onFocusRemoveClass.match(/\.([a-z]*)$/),r&&r[1]&&i.length>0&&(e(n.onFocusRemoveClass).removeClass(r[1]),u=function(){e(i).addClass(r[1])})),t=!0,o=e.inArray(this,s),s.mouseover(d),e.browser.mozilla?e(document).keypress(c):e(document).keydown(c),e(document).mousedown(s.disableLinkedMenu),n.reflectFocus&&e(n.reflectFocus).mouseover(l))};return s.disableLinkedMenu=function(o){e(document).unbind("keypress",c),e(document).unbind("keydown",c),s.unbind("mouseover",d),e(document).unbind("mousedown",arguments.callee),n.reflectFocus&&e(n.reflectFocus).unbind("mouseover",l),u&&u(),s.blur(),delete e.currentLinkedMenu,window.setTimeout(function(){t=!1},200)},n=n||{},i=n.focusElement||i,s.click(a),s}}(jQuery);;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jquery/plugins/scrollintoview/scrollIntoView.js' */
!function(){function t(t){t=t||{},t.marginTop=t.marginTop||t.margin||0,t.marginBottom=t.marginBottom||t.margin||0;var e=r(o),n=r("#stalker"),l=e.scrollTop(),a=e.height(),s=Math.max(0,i(this[0])-t.marginTop),h=t.marginTop+this.outerHeight()+t.marginBottom,c=l;if(c+a<s+h&&(c=s+h-a),0!==n.length){var u=this[0],g=null;do"absolute"===r(u).css("position")&&(g=u);while(u=u.offsetParent);g&&i(g)>i(n[0])&&(s-=n.outerHeight())}return c>s&&(c=s),c}function i(t){var i=t,o=0;do o+=i.offsetTop;while(i=i.offsetParent);i=t;do i&&i.scrollTop&&(o-=i.scrollTop),i=i.parentNode;while(i&&i!=document.body);return o}var o=require("jira/util/top-same-origin-window")(window,!0),r=o.jQuery||window.jQuery;window.jQuery.fn.scrollIntoView=function(i){if(0===this.length)return this;var e=this.hasFixedParent();if(e){var n=r(this),l=r(e),a=l.outerHeight(),s=l.scrollTop(),h=s+a,c=n.position(),u=c.top+n.height(),g=u+s>h,p=c.top<0;g?l.scrollTop(s+u-a):p&&l.scrollTop(s+c.top)}else{if(i=i||{},!this.is(":visible")&&i.callback)return i.callback(),this;var d=r(o).scrollTop(),f=t.call(this,i),m=r("#stalker");if(f!==d){var T=this,w=r(o.document);w.trigger("moveToStarted",T),i.duration?w.find("body, html").stop(!0).animate({scrollTop:f},i.duration,"swing",function(){i.callback&&i.callback(),w.trigger("moveToFinished",T),m.trigger("positionChanged")}):w.find("body, html").prop("scrollTop",f)}else i.callback&&i.callback()}return this},r.fn.isInView=function(i){if(this.length>0&&!this.hasFixedParent()){i=i||{};var e=r(o).scrollTop(),n=t.call(this,i);return n===e}return this}}();;
;
/* module-key = 'jira.webresources:issue-table', location = 'includes/jira/dropdown/issueActionsDropdown.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Dropdowns&&(JIRA.Templates.Dropdowns={}),JIRA.Templates.Dropdowns.issueActionsDropdown=function(s,e){var a='<div class="aui-list"><ul class="aui-list-section"><li class="aui-list-item"><a class="aui-list-item-link issue-link" data-issue-key="'+soy.$$escapeHtml(s.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(s.key)+'" >'+soy.$$escapeHtml(s.viewIssue)+"</a></li></ul>",t=s.actions&&s.actions.length>0,l=s.operations&&s.operations.length>0;if(t){a+='<ul class="aui-list-section'+(l?"":" aui-last")+'">';for(var i=s.actions,o=i.length,n=0;n<o;n++){var c=i[n];a+='<li class="aui-list-item"><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/WorkflowUIDispatcher.jspa?id="+soy.$$escapeHtml(s.id)+"&amp;action="+soy.$$escapeHtml(c.action)+"&amp;atl_token="+soy.$$escapeHtml(s.atlToken)+"&amp;returnUrl="+soy.$$escapeHtml(s.returnUrl)+'" class="aui-list-item-link issueaction-workflow-transition" data-issueId="'+soy.$$escapeHtml(s.id)+'" data-issueKey="'+soy.$$escapeHtml(s.key)+'" >'+soy.$$escapeHtml(c.name)+"</a></li>"}a+="</ul>"}if(l){a+='<ul class="aui-list-section aui-last">';for(var p=s.operations,r=p.length,u=0;u<r;u++){var $=p[u];a+='<li class="aui-list-item"><a href="'+soy.$$escapeHtml($.url)+"&amp;returnUrl="+soy.$$escapeHtml(s.returnUrl)+"&amp;atl_token="+soy.$$escapeHtml(s.atlToken)+'" class="aui-list-item-link '+soy.$$escapeHtml($.styleClass)+'" data-issueId="'+soy.$$escapeHtml(s.id)+'" data-issueKey="'+soy.$$escapeHtml(s.key)+'" >'+soy.$$escapeHtml($.name)+"</a></li>"}a+="</ul>"}return a+="</div>"};;
;
/* module-key = 'jira.webresources:issue-table', location = '/includes/jira/fragments/issueActionsFragment.js' */
define("jira/fragments/issueActionsFragment",["require"],function(e){function n(e){var n=/selectedIssueId=[0-9]*/g;if(self!=top)return encodeURIComponent(s.location.href);var r=window.location.href,t=r;return/selectedIssueId=[0-9]*/.test(r)?t=r.replace(n,"selectedIssueId="+e):(t=r.lastIndexOf("?")>=0?r+"&":r+"?",t=t+"selectedIssueId="+e),encodeURIComponent(t)}const r=e("jira/featureflags/feature-manager");var t=e("jquery"),s=e("jira/util/top-same-origin-window")(window);return function(e){e.returnUrl=e.returnUrl||n(e.id);var s=e,i=!!r.isFeatureEnabled("return-new-issue-view-as-default_63doa")||"true"===t('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content");return i&&(s=t.extend({},e,{operations:e.operations.filter(function(e){return!e.url.includes("/EditIssue")})})),t(JIRA.Templates.Dropdowns.issueActionsDropdown(s))}}),AJS.namespace("JIRA.FRAGMENTS.issueActionsFragment",null,require("jira/fragments/issueActionsFragment"));;
;
/* module-key = 'jira.webresources:select-model', location = '/includes/ajs/select/SelectModel.js' */
define("jira/ajs/select/select-model",["jira/ajs/control","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/util/objects","jquery"],function(e,t,i,n,s){return e.extend({init:function(e){var t=this,i={};e&&(e instanceof s?i.element=e:e instanceof Element||"string"==typeof e?i.element=s(e):i=e),this._setOptions(i),this.$element=this.options.element.hide(),this.type=this.$element.attr("multiple")?"multiple":"single",this.id=this.$element.attr("id")||this.$element.attr("name"),"single"===this.type&&this.$element.attr("multiple","multiple"),this.$element.bind("reset",function(){t._parseDescriptors()}),this._parseDescriptors()},hasOptionByValue:function(e){return this.$element.find('option[value="'+e+'"]').length>0},getSelectedTexts:function(){for(var e=[],t=this.getDisplayableSelectedDescriptors(),i=0;i<t.length;i++)e.push(t[i].label());return e},putOption:function(e,t,i){var n;if(this.hasOptionByValue(e)){var r=this.getDescriptor(e);t||(t=r.label()),n=r.model()}else n=s("<option/>"),this.$element.append(n);i&&n.addClass("hidden"),t&&n.text(t),n.attr("value",e),this._parseOption(n)},changeSelectionByValue:function(e){var t=this.getDescriptor(e);if(t){var i=this.setSelected(t);return i||this.$element.trigger("change",t),!0}return!1},_getFreeInputEl:function(){return this.$element.find(".free-input")},removeFreeInputVal:function(){this._getFreeInputEl().remove()},updateFreeInput:function(e){var t=this._getFreeInputEl();e=s.trim(e),e?(t.length||(t=s("<option class='free-input' />").appendTo(this.$element)),t.attr({value:e,selected:"selected"})):t.remove()},_getDefaultOptions:function(){return{}},getSelectedValues:function(){for(var e=[],t=this.getDisplayableSelectedDescriptors(),i=0;i<t.length;i++)e.push(t[i].value());return e},setSelected:function(e){var t=this,i=!1,n=!1,r=this.$element.find("option").not(this._getExclusions()).filter(function(){return this.value===e.value()});if("single"===this.type){if(this.getValue()===e.value())return n;r=r.first(),this.$element.find("option:selected").not(this._getExclusions()).each(function(e,i){var n=s(this).data("descriptor");r[0]!==i&&t.setUnSelected(n)})}if(r.each(function(){var e=s(this);i=!0,n=!e.is(":selected"),e.attr("selected","selected").data("descriptor").selected(!0)}),!i){e.selected(!0),e.removeOnUnSelect(!0);var l=this._render("option",e);l.attr("selected","selected"),this.$element.append(l),n=!0}return e.highlighted(!1),n&&this.$element.trigger("change",e),n},setAllSelected:function(){var e=this;s(this.getDisplayableUnSelectedDescriptors()).each(function(){e.setSelected(this)})},setAllUnSelected:function(){var e=this;s(this.getDisplayableSelectedDescriptors()).each(function(){e.setUnSelected(this)})},setUnSelected:function(e){if(e){var t=this,i=e.value();this.$element.find("option:selected").not(this._getExclusions()).filter(function(){return s(this).attr("value")===i}).each(function(){var e=s(this);e.data("descriptor").selected(!1),t.options.removeOnUnSelect||e.data("descriptor").removeOnUnSelect()?e.remove():e.removeAttr("selected")})}},remove:function(e){e&&e.model()&&e.model().remove()},getDescriptor:function(e){var t;return e=s.trim(e.toLowerCase()),s.each(this.getAllDescriptors(!1),function(i,n){if(e===s.trim(n.label().toLowerCase())||e===s.trim(n.value().toLowerCase()))return t=n,!1}),t},_parseOption:function(e){var t,n,r;return e=s(e),this.options.removeNullOptions&&this._hasNullValue(e)?(e.remove(),null):(n=e.attr("data-icon"),r=e.attr("data-fallback-icon"),t=new i({styleClass:e.prop("className"),value:e.val(),invalid:e.hasClass("invalid_sel"),fieldText:e.attr("data-field-text"),title:e.attr("title"),meta:e.data("meta"),label:e.attr("data-field-label")||s.trim(e.text()),icon:n?n:e.css("backgroundImage").replace(/url\(['"]?(.*?)['"]?\)/,"$1"),fallbackIcon:r?r:"none",selected:e.prop("selected"),removeOnUnSelect:!!e.data("remove-on-unselect"),model:e}),e.data("descriptor",t),t)},_hasNullValue:function(e){return e.val()<0},_parseDescriptors:function(){function e(e){var n={label:e.attr("label"),placement:e.attr("data-placement"),footerText:e.attr("data-footer-text"),styleClass:e.prop("className"),model:e,items:i(e)},s=e.data("weight");s&&(n.weight=+s),e.data("descriptor",new t(n))}function i(e){var t=s("option",e),i=[];return s.each(t,function(){i.push(n._parseOption(this))}),i}var n=this,r=this.$element.children();r.each(function(t){var i=r.eq(t);i.is("optgroup")?e(i):i.is("option")&&(i.attr("data-placeholder")?(n.placeholder=i.text(),i.remove()):n._parseOption(i))})},getPlaceholder:function(){return this.placeholder},_getExclusions:function(){return".free-input"},getValue:function(){return"single"===this.type?this.$element.val()&&this.$element.val()[0]:this.$element.val()},getDisplayableSelectedDescriptors:function(){var e=[];return this.$element.find("option:selected").not(this._getExclusions()).each(function(){e.push(s.data(this,"descriptor"))}),e},getDisplayableUnSelectedDescriptors:function(){var e=[];return this.$element.find("option").not(":selected").not(this._getExclusions()).each(function(){e.push(s.data(this,"descriptor"))}),e},getAllDescriptors:function(e){var i,r=[];return this.$element.children().each(function(){var l,a=s(this);a.is("option")?a.data("descriptor")&&r.push(a.data("descriptor")):a.is("optgroup")&&(e!==!1&&(i=n.copyObject(a.data("descriptor").allProperties(),!1),i.items=[],l=new t(i),r.push(l)),a.children("option").each(function(){var t=s(this),i=t.data("descriptor");i&&(e!==!1?l.addItem(i):r.push(i))}))}),r},clearUnSelected:function(){this.$element.find("option:not(:selected)").not(this._getExclusions()).remove()},getUnSelectedDescriptors:function(){function e(e){var t=e.value().toLowerCase();return!(l[t]||a[t]&&e.allowDuplicate()===!1)&&(a[t]=!0,!0)}var i=this,r=[],l={},a={},o=this.getDisplayableSelectedDescriptors();s.each(o,function(e,t){l[t.value().toLowerCase()]=!0});var c=this.$element.children();return c.each(function(){var l,a,o=s(this);o.is("option")&&!this.selected?(l=s.data(this,"descriptor"),e(l)&&r.push(l)):o.is("optgroup")&&(a=n.copyObject(o.data("descriptor").allProperties(),!1),a.items=[],l=new t(a),r.push(l),o.find("option").not(i._getExclusions()).each(function(t){if(!t.selected){var i=s.data(this,"descriptor");e(i)&&l.addItem(i)}}))}),r},_renders:{option:function(e){var t=e.label(),i=e.fieldText()||t,n=new Option(i,e.value()),r=s(n),l=e.icon();return n.title=e.title(),i!=t&&r.data("field-label",t),e.selected()&&r.attr("selected","selected"),s.data(n,"descriptor",e),e.model(r),l&&r.css("backgroundImage","url("+l+")"),r},optgroup:function(e){var t=s("<optgroup />").addClass(e.styleClass()).attr("label",e.label());return e.model(t),t.data("descriptor",e),e.id()&&t.attr("id",e.id()),t}}})}),AJS.namespace("AJS.SelectModel",null,require("jira/ajs/select/select-model"));;
;
/* module-key = 'jira.webresources:select-model', location = '/includes/ajs/select/SuggestionCollectionModel.js' */
define("jira/ajs/select/suggestion-collection-model",["jira/ajs/control","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/util/objects","jquery","underscore"],function(e,t,s,i,r,n){return e.extend({init:function(e){e.element?e.element=r(e.element):e.element=r(e),this._setOptions(e),this.$element=this.options.element.hide(),this.type=this.$element.attr("data-multiple")?"multiple":"single",this.id=this.$element.attr("id")||this.$element.attr("name"),this.$optionsContainer=this.$element.siblings("#"+this.id+"-options"),this.selectedDescriptors=[],this.groupFilter=!1,this._parseDescriptors()},_getDefaultOptions:function(){return{}},_setValue:function(){var e=this.selectedDescriptors.map(function(e){return e.value()});this.$element.val(e.join(","))},getSelectedValues:function(){for(var e=[],t=0;t<this.selectedDescriptors.length;t++)e.push(this.selectedDescriptors[t].value());return e},setSelected:function(e,t){t="undefined"==typeof t||t,e=this._descriptor(e);var s=n.filter(this.getAllDescriptors(!1),function(t){return t.value()===e.value()});if(0===s.length)return!1;if("single"===this.type){if(e.value()===this.getValue())return!0;this.setAllUnSelected(),s=s.slice(0,1)}else s=n.filter(s,function(e){return e.selected()!==!0});return Array.prototype.push.apply(this.selectedDescriptors,s),n.each(s,function(e){e.selected(!0)}),this._setValue(),e.highlighted(!1),t&&this.$element.trigger("change",e),!0},setAllSelected:function(){var e=this;r(this.getDisplayableUnSelectedDescriptors()).each(function(){e.setSelected(this)})},setAllUnSelected:function(){n.each(this.selectedDescriptors,function(e){e.selected(!1)}),this.selectedDescriptors=[],this._setValue()},setUnSelected:function(e){e=this._descriptor(e);for(var t=0;t<this.selectedDescriptors.length;t++)this.selectedDescriptors[t].value()===e.value()&&(this.selectedDescriptors[t].selected(!1),this.selectedDescriptors.splice(t,1),t--);this._setValue()},remove:function(e){e=this._descriptor(e);for(var s=0;s<this.descriptors.length;s++)if(this.descriptors[s]instanceof t)for(var i=0;i<this.descriptors[s].items().length;i++)this.descriptors[s].items()[i].value()===e.value()&&(this.descriptors[s].items().splice(i,1),i--);else this.descriptors[s].value()===e.value()&&(this.descriptors.splice(s,1),s--)},getDescriptor:function(e){var t;return e=r.trim(e.toLowerCase()),r.each(this.getAllDescriptors(!1),function(s,i){if(e===r.trim(i.label().toLowerCase())||e===r.trim(i.value().toLowerCase()))return t=i,!1}),t},_parseDescriptors:function(){var e,i,r=[];if(r=this.$optionsContainer.data("suggestions")||[],this.descriptors=[],"string"==typeof r)try{r=JSON.parse(r),this.$optionsContainer.data("suggestions",r)}catch(e){r=[]}for(var n=0;n<r.length;n++)if("undefined"!=typeof r[n].items){e=new t({label:r[n].label}),i=r[n].items;for(var l=0;l<i.length;l++){var c=new s(i[l]);c.selected()===!0&&("single"===this.type&&this.selectedDescriptors.length>0?c.selected(!1):this.selectedDescriptors.push(c)),e.addItem(c)}this.descriptors.push(e)}else c=new s(r[n]),this.descriptors.push(c),c.selected()===!0&&("single"===this.type&&this.selectedDescriptors.length>0?c.selected(!1):this.selectedDescriptors.push(c));this._setValue()},getPlaceholder:function(){return this.placeholder},getValue:function(){return this.$element.val()},getDisplayableSelectedDescriptors:function(){return this.selectedDescriptors.slice()},getDisplayableUnSelectedDescriptors:function(){return n.filter(this.getAllDescriptors(!1),function(e){return this.selectedDescriptors.indexOf(e)===-1}.bind(this))},getAllDescriptors:function(e){var s=[];if(this.groupFilter!==!1)for(var i in this.descriptors)this.descriptors[i]instanceof t&&this.descriptors[i].label()==this.groupFilter&&(s=this.descriptors[i].items().slice());else if(e===!1)for(var i in this.descriptors)this.descriptors[i]instanceof t?s=s.concat(this.descriptors[i].items()):this.descriptors.hasOwnProperty(i)&&s.push(this.descriptors[i]);else s=this.descriptors.slice();return s},clearUnSelected:function(){var e=this;this.descriptors=n.filter(this.descriptors,function(s){return s instanceof t?(s.items(n.filter(s.items(),function(t){return e.selectedDescriptors.indexOf(t)!==-1})),!0):e.selectedDescriptors.indexOf(s)!==-1})},getUnSelectedDescriptors:function(){for(var e=this,s=[],i={},r={},l=function(e){var t=e.value().toLowerCase();return!(r[t]&&(!i[t]||e.allowDuplicate()!==!1))&&(i[t]=!0,!0)},c=0;c<this.selectedDescriptors.length;c++)r[this.selectedDescriptors[c].value().toLowerCase()]=!0;return n.each(this.descriptors,function(i){var r;i instanceof t?e.groupFilter===!1?(r=n.clone(i.allProperties()),r.items=n.filter(i.items(),l),s.push(new t(r))):e.groupFilter===i.label()&&(s=s.concat(n.filter(i.items(),l))):e.groupFilter===!1&&l(i)&&s.push(i)}),s},setFilterGroup:function(e){for(var s=0;s<this.descriptors.length;s++)if(this.descriptors[s]instanceof t&&this.descriptors[s].label()===e)return this.groupFilter=e,!0;return!1},clearFilterGroup:function(){this.groupFilter=!1},_descriptor:function(e){return"string"==typeof e&&(e=new s({value:e,label:e})),e}})});;
;
/* module-key = 'jira.webresources:general-configuration', location = '/includes/jira/general-configuration/Settings.js' */
JIRA.Settings={},JIRA.Settings.ApplicationTitle={get:function(){return AJS.Meta.get("app-title")}};;
;
/* module-key = 'jira.webresources:js-soy-templates', location = 'includes/templates/jira/links.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Links&&(JIRA.Templates.Links={}),JIRA.Templates.Links.helpLinkFromHelpPath=function(e,t){return""+JIRA.Templates.Links.helpLink({isLocal:e.helpPath.local,title:e.helpPath.title,description:e.helpPath.alt,url:e.helpPath.url,fragmentIdentifier:""+(e.fragmentIdentifier?soy.$$escapeHtml(e.fragmentIdentifier):"")})},JIRA.Templates.Links.helpLink=function(e,t){return'<a class="help-lnk'+(e.extraClasses?aui.renderExtraClasses(e):"")+'"'+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+' href="'+soy.$$escapeHtml(e.url)+(e.fragmentIdentifier?soy.$$escapeHtml(e.fragmentIdentifier):"")+'" title="'+(e.isLocal?AJS.format("Get local help about {0}",e.title):AJS.format("Get online help about {0}",e.title))+'" data-helplink="'+(e.isLocal?"local":"online")+'"'+(e.isLocal?"":' target="_jirahelp"')+aui.renderExtraAttributes(e)+'><span class="aui-icon aui-icon-small aui-iconfont-help">'+(e.description?soy.$$escapeHtml(e.description):"")+"</span></a>"},JIRA.Templates.Links.button=function(e,t){return""+aui.buttons.button(soy.$$augmentMap(e,{tagName:"a",extraAttributes:'href="'+soy.$$escapeHtml(e.url)+'"'}))},JIRA.Templates.Links.basicHelpLink=function(e,t){var a="",l=e.isLocal?"local":"online",i=e.isLocal?"_self":"_jirahelp",n=null!=e.title?e.title:"";return a+=aui.buttons.button(soy.$$augmentMap(e,{extraClasses:"help-lnk",type:"link",tagName:"a",text:e.desc,extraAttributes:{href:e.url,title:n,target:i,"data-helplink":l}}))};;
;
/* module-key = 'jira.webresources:js-soy-templates', location = 'includes/templates/jira/header/pageHeader.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Headers&&(JIRA.Templates.Headers={}),JIRA.Templates.Headers.pageHeader=function(e,a){return"<"+soy.$$escapeHtml(e.tagName?e.tagName:"header")+' class="'+soy.$$escapeHtml("aui-page-header"+(e.containsBreadcrumbs?" contains-breadcrumbs":""))+'" '+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+'><div class="aui-page-header-inner">'+(e.imageContent?'<div class="aui-page-header-image">'+soy.$$filterNoAutoescape(e.imageContent)+"</div>":"")+'<div class="aui-page-header-main">'+soy.$$filterNoAutoescape(e.mainContent)+"</div>"+(e.actionsContent||e.helpContent?'<div class="aui-page-header-actions">'+(e.actionsContent?soy.$$filterNoAutoescape(e.actionsContent):"")+(e.helpContent?soy.$$filterNoAutoescape(e.helpContent):"")+"</div>":"")+"</div></"+soy.$$escapeHtml(e.tagName?e.tagName:"header")+">"},JIRA.Templates.Headers.projectAvatar=function(e,a){return"<span"+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+' class="aui-avatar aui-avatar-large aui-avatar-project'+(e.isSystemAvatar?" jira-system-avatar":"")+aui.renderExtraClasses(e)+'"'+aui.renderExtraAttributes(e)+'><span class="aui-avatar-inner"><img id="project-avatar" alt="'+soy.$$escapeHtml(AJS.format("Uploaded image for project: \'\'{0}\'\'",e.avatarAlt))+'" src="'+soy.$$filterNoAutoescape(e.avatarUrl)+'" /></span>'+(e.projectTypeIcon?'<img src="data:image/svg+xml;base64,'+soy.$$escapeHtml(e.projectTypeIcon)+'" class="jira-project-avatar-icon" />':"")+"</span>"},JIRA.Templates.Headers.breadcrumbs=function(e,a){return'<div id="breadcrumbs-container"></div>'},JIRA.Templates.Headers.breadcrumbsProjectSettings=function(e,a){return'<div id="breadcrumbs-container" class="project-settings-breadcrumb"></div>'};;
;
/* module-key = 'jira.webresources:js-soy-templates', location = 'includes/templates/jira/jiraDialogs.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.JiraDialog&&(JIRA.Templates.JiraDialog={}),JIRA.Templates.JiraDialog.dialogChrome=function(o,e){return""+JIRA.Templates.JiraDialog.abstractDialogChrome(o)},JIRA.Templates.JiraDialog.formDialogChrome=function(o,e){return""+JIRA.Templates.JiraDialog.abstractDialogChrome(o)},JIRA.Templates.JiraDialog.abstractDialogChrome=function(o,e){return(o.titleText?'<div class="jira-dialog-heading"><h2>'+soy.$$escapeHtml(o.titleText)+"</h2></div>":"")+'<div class="jira-dialog-content">'+(o.formActionUrl?'<form class="aui" action="'+soy.$$escapeHtml(o.formActionUrl)+'" method="'+(o.formMethod?soy.$$escapeHtml(o.formMethod):"POST")+'"><div class="form-body">'+soy.$$filterNoAutoescape(o.bodyContent)+'</div><div class="form-footer buttons-container">'+soy.$$filterNoAutoescape(o.footerContent)+"</div></form>":soy.$$filterNoAutoescape(o.bodyContent)+(o.footerContent?'<div class="buttons-container">'+soy.$$filterNoAutoescape(o.footerContent)+"</div>":""))+"</div>"};;
;
/* module-key = 'jira.webresources:js-soy-templates', location = 'includes/jira/field/templates/statusCategoryField.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),"undefined"==typeof JIRA.Templates.Fields.Pickers&&(JIRA.Templates.Fields.Pickers={}),"undefined"==typeof JIRA.Templates.Fields.Pickers.Statuses&&(JIRA.Templates.Fields.Pickers.Statuses={}),JIRA.Templates.Fields.Pickers.Statuses.statusCategorySelectField=function(e,t){var s='<div class="field-group">'+aui.form.label({forField:e.id,isRequired:!0,content:"Category"})+JIRA.Templates.Fields.Pickers.Statuses.statusCategorySelect(e)+(e.statusCategoryHelpData?" "+JIRA.Templates.Links.helpLink(e.statusCategoryHelpData):"")+'<div class="description">',a="<b>"+soy.$$escapeHtml("To Do")+"</b>",o="<b>"+soy.$$escapeHtml("In Progress")+"</b>",l="<b>"+soy.$$escapeHtml("Done")+"</b>";return s+=soy.$$filterNoAutoescape(AJS.format("Helps identify where an issue is in its lifecycle. \u003cbr/\u003eIssues move from {0} to {1} when work starts on them, and later move to {2} when all work is complete.",a,o,l))+"</div>"+(e.errors&&e.errors.statusCategory?aui.form.fieldError({message:e.errors.statusCategory}):"")+"</div>"},JIRA.Templates.Fields.Pickers.Statuses.statusCategorySelect=function(e,t){for(var s='<select id="'+soy.$$escapeHtml(e.id)+'" name="'+soy.$$escapeHtml(e.id)+'" class="select">',a=e.statusCategoryOptions,o=a.length,l=0;l<o;l++){var i=a[l];s+=JIRA.Templates.Fields.Pickers.Statuses.statusCategoryOption(i)}return s+="</select>"},JIRA.Templates.Fields.Pickers.Statuses.statusCategoryOption=function(e,t){return'<option value="'+soy.$$escapeHtml(e.value)+'" data-key="'+soy.$$escapeHtml(e.key)+'" data-color-name="'+soy.$$escapeHtml(e.colorName)+'" data-sequence="'+soy.$$escapeHtml(e.sequence)+'"'+(e.selected?" selected":"")+(e.isPlaceholder?' data-placeholder="true"':"")+">"+soy.$$escapeHtml(e.text)+"</option>"};;
;
/* module-key = 'jira.webresources:jira-dialog-core', location = '/includes/jira/dialog/DialogFactory.js' */
define("jira/dialog/dialog-factory",{});;
;
/* module-key = 'jira.webresources:jira-dialog-core', location = '/includes/jira/dialog/DialogRegister.js' */
define("jira/dialog/dialog-register",{});;
;
/* module-key = 'jira.webresources:jira-dialog-core', location = '/includes/jira/dialog/Dialog.js' */
define("jira/dialog/dialog",["jira/jquery/deferred","jira/ajs/control","jira/ajs/layer/inline-layer","jira/util/data/meta","jira/ajs/ajax/smart-ajax","jira/loading/loading","jira/xsrf","jira/util/browser","jira/util/events","jira/util/navigator","aui/dropdown","jquery","underscore","wrm/require","jira/featureflags/feature-manager"],function(t,i,e,s,o,n,a,r,h,d,l,c,p,u,g){var f=AJS.bind,m=AJS.unbind,v=AJS.dim,_=AJS.layer,C=AJS.LayerManager.global,y=i.extend({_getDefaultOptions:function(){return{height:"auto",cached:!1,widthClass:"medium",modeless:!1,useReadyForInteractionMetric:!1,ajaxOptions:{data:{inline:!0,decorator:"dialog"}}}},init:function(t){if("string"==typeof t||t instanceof c?t={trigger:t}:t&&t.width&&(t.widthClass="custom"),this.classNames=y.ClassNames,this.OPEN_DIALOG_SELECTOR="."+this.classNames.DIALOG+"."+this.classNames.DIALOG_OPEN,this.options=c.extend(!0,this._getDefaultOptions(),t),this.options.width=y.WIDTH_PRESETS[this.options.widthClass]||t.width,"function"==typeof this.options.content?this.options.type="builder":this.options.content instanceof c||"object"==typeof this.options.content&&this.options.nodeName?this.options.type="element":(!this.options.type&&!this.options.content||"object"==typeof this.options.content&&this.options.content.url)&&(this.options.type="ajax"),this.options.trigger){var i=c.makeArray(this.options.trigger),e=this;c.each(i,function(t,i){e._assignEvents("trigger",i)})}this.onContentReadyCallbacks=[],this._assignEvents("container",document),this.initModeless(),this.defineResources(),this.options.prefetchResources&&this.downloadResources()},initModeless:function(){this.options.modeless=!!this.options.modeless,this.options.modeless&&(!1===this.options.windowTitle&&(this.options.windowTitle=document.title),this._temporarilyHidden=!1,this._auiDialogShowHandler=this._auiDialogHandlers.hideTemporarily.bind(this),this._auiDialogHideHandler=this._auiDialogHandlers.restoreVisibility.bind(this),this._auiDialogRemoveHandler=this._auiDialogHandlers.restoreVisibilityRebindable.bind(this),f("show.dialog",this._auiDialogShowHandler),f("hide.dialog",this._auiDialogHideHandler),f("remove.dialog",this._auiDialogRemoveHandler),AJS.dialog2&&(this._auiDialog2ShowHandler=this._auiDialog2Handlers.hideTemporarily.bind(this),this._auiDialog2HideHandler=this._auiDialog2Handlers.restoreVisibility.bind(this),AJS.dialog2.on("show",this._auiDialog2ShowHandler),AJS.dialog2.on("hide",this._auiDialog2HideHandler)))},_runContentReadyCallbacks:function(){var t=this;c.each(this.onContentReadyCallbacks,function(){this.call(t)})},_setContent:function(t,i){var e;if(!this.resourcesReady().isResolved())return this._showloadingIndicator(),void this.resourcesReady().done(this._setContent.bind(this,t,i));if(t)if(y.current===this){if(this.get$popup().show().css("visibility","hidden").addClass("popup-width-"+this.options.widthClass),this.$content=t,this.get$popupContent().html(t),i!==!1&&this.decorateContent&&this.decorateContent(),(e=this.get$popupContent().find("."+this.classNames.HEADING_AREA)).size()>0&&this.get$popupHeading().replaceWith(e),(e=this.get$popupContent().find("."+this.classNames.CONTENT_AREA)).size()>0&&(e.contents().insertAfter(e),e.remove()),this._positionInCenter(),i!==!1){c(document).trigger("dialogContentReady",[this]);const s=new CustomEvent("legacyJiraDialogContentReady",{detail:this});document.dispatchEvent(s),this._runContentReadyCallbacks()}this.get$popup().css("visibility",""),i!==!1&&c.isFunction(this.options.onContentRefresh)&&this.options.onContentRefresh.call(this),this._onShowContent()}else this.options.cached===!1&&delete this.$content;else this._contentRetrievers[this.options.type].call(this,this._setContent)},_ellipsify:function(t){t instanceof c||(t=this.get$popup()),c(".overflow-ellipsis",t).textOverflow({className:"ellipsified"})},_handleInitialDoneResponse:function(t,i,e){},getRequestUrlFromTrigger:function(){if(this.$activeTrigger&&this.$activeTrigger.length)return this.$activeTrigger.attr("href")||this.$activeTrigger.data("url")},_getRequestOptions:function(){var t={};return this._getAjaxOptionsObject()!==!1&&(t=c.extend(!0,t,this._getAjaxOptionsObject()),t.url||(t.url=this.getRequestUrlFromTrigger()),t)},_getAjaxOptionsObject:function(){var t=this.options.ajaxOptions;return c.isFunction(t)?t.call(this):t},_contentRetrievers:{element:function(t){this.$content||(this.$content=c(this.options.content).clone(!0)),t.call(this,this.$content)},builder:function(t){var i=this;this.$content||(this._showloadingIndicator(),this.options.content.call(this,function(e){i.$content=c(e),t.call(i,i.$content)}))},ajax:function(t){var i,e=this;this.$content||(i=this._getRequestOptions(),this._showloadingIndicator(),this.serverIsDone=!1,i.complete=function(s,n,a){if(a.successful){var r=e._detectRedirectInstructions(s);e.serverIsDone=r.serverIsDone,r.redirectUrl?e._performRedirect(r.redirectUrl):(i.dataType&&"json"===i.dataType.toLowerCase()&&e._buildContentFromJSON?e.$content=e._buildContentFromJSON(a.data):e.$content=a.data,e.serverIsDone?e._handleInitialDoneResponse(a.data,s,a):t.call(e,e.$content))}else{var h=o.buildDialogErrorContent(a);t.call(e,h)}},o.makeRequest(i))}},_detectRedirectInstructions:function(t){var i={serverIsDone:!1,redirectUrl:""},e=t.getResponseHeader("X-Atlassian-Dialog-Control");if(e){i.serverIsDone=!0;var s=e.indexOf("redirect:");0===s?i.redirectUrl=e.substr("redirect:".length):"permissionviolation"===e&&(i.redirectUrl=window.location.href)}return i},_performRedirect:function(t){r.reloadViaWindowLocation(t)},_renders:{popupHeading:function(){var t=c("<div />");return t.addClass(this.classNames.HEADING_AREA)},popupContent:function(){return c("<div />").addClass(this.classNames.CONTENT_AREA)},popup:function(){return c("<div />").attr("id",this.options.id||"").addClass(this.classNames.DIALOG).toggleClass(this.classNames.MODELESS_DIALOG,this.options.modeless).hide()}},_events:{trigger:{simpleClick:function(t,i){if(this.$activeTrigger=i,this.$activeTrigger.is("a")||(this.$activeTrigger=i.find("a")),this.options.analyticsComponent&&this.options.analyticsAction){var e;try{e=require("jira/components/analytics-tracker/tracker"),e.trackEvent(this.options.analyticsComponent,this.options.analyticsAction)}catch(t){e=null}}this.show(),t.preventDefault()}},container:{keydown:function(t){if(t.which===c.ui.keyCode.ESCAPE){var i=this.handleCancel();d.isIE()&&d.majorVersion()<12&&i===!1&&t.preventDefault()}}}},handleCancel:function(){return this.hide(!0,{reason:y.HIDE_REASON.escape})},_showloadingIndicator:function(){n.showLoadingIndicator()},_hideloadingIndicator:function(){n.hideLoadingIndicator()},_positionInCenter:function(){var t=c(window),i=this.get$popup(),e=this.getContentContainer(),s=this.getContentArea(),o=40,n=t.height(),a=0;if("number"==typeof this.options.width&&i.width(this.options.width),this.options.modeless)a=Math.round(n/2);else{i.css({marginLeft:-i.outerWidth()/2,marginTop:Math.max(-i.outerHeight()/2,o-n/2)});for(var r=i[0];r;)a+=r.offsetTop,r=r.offsetParent}var h=Math.max(n-a-o,y.CONSTRAINTS.MODELESS_MIN_HEIGHT),d=parseInt(s.css("padding-top"),10)+parseInt(s.css("padding-bottom"),10);s.css("maxHeight","");var l=h-(i.outerHeight()-e.outerHeight())-d;s.css("maxHeight",l),c(this).trigger("contentMaxHeightChanged",[l])},getContentArea:function(){return this.$popup.find(".form-body")},getContentContainer:function(){var t=this.$popup.find(".content-area-container");return 1===t.length?t:this.$popup.find(".form-body")},get$popup:function(){return this.$popup||(this.$popup=this._render("popup").appendTo("body"),this.$popup.addClass("box-shadow")),this.$popup},bindAnchorsToDialog:function(t){var i=this;t.click(function(t){i.$activeTrigger=c(this),delete i.$content,i._setContent(),t.preventDefault()})},get$popupContent:function(){return this.$popupContent||(this.$popupContent=this._render("popupContent").appendTo(this.get$popup())),this.$popupContent},get$popupHeading:function(){return this.$popupHeading||(this.$popupHeading=this._render("popupHeading").prependTo(this.get$popup())),this.$popupHeading},getLoadingIndicator:function(){return this.get$popupContent().find(".throbber:last")},showFooterLoadingIndicator:function(){var t=this.getLoadingIndicator();t.length&&(t.data("spinner")?t.hasClass("loading")||t.addClass("loading"):t.addClass("loading").spin())},hideFooterLoadingIndicator:function(){var t=this.getLoadingIndicator();t.length&&(t.removeClass("loading"),p.defer(function(){t.hasClass("loading")||t.spinStop()}))},_watchTab:function(t){var i,e,s;c(t.target).parents(this.get$popupContent()).length>0&&(i=c("html").hasClass("safari")?c(":input:visible:enabled, :checkbox:visible:enabled, :radio:visible:enabled",this.OPEN_DIALOG_SELECTOR):c("a:visible, :input:visible:enabled, :checkbox:visible:enabled, :radio:visible:enabled",this.OPEN_DIALOG_SELECTOR),e=i.first(),s=i.last(),(t.target===e[0]&&t.shiftKey||t.target===s[0]&&!t.shiftKey)&&(t.shiftKey?s.focus():e.focus(),t.preventDefault()))},_show:function(t){if(e.current&&e.current.hide(),l.current&&l.current.hide(),y.current){var i;if(y.current.options.stacked)i=y.current,i.stacked=!0,i.hide(!1),this.prev=i;else{y.stackroot=this;var s=y.current;for(i=s._removeStackState(),s.hide(!1);i;)s=i,i=s._removeStackState(),s._destroyIfNecessary()}}else this.stacked!==!0&&(y.stackroot=this,y.originalWindowTitle=document.title);this.options.modeless||(this.prev&&this.prev.options.modeless?v(!1):this.stacked!==!0&&v(!1)),y.current=this;var o=this.get$popup().addClass(this.classNames.DIALOG_OPEN);t||"blank"!==this.options.type&&!this.$content&&this.stacked!==!0?(delete this.$content,this._setContent()):(o.show(),this._positionInCenter(),this._onShowContent()),this.tabWatcher=function(t){9===t.keyCode&&y.current._watchTab(t)},c(document).bind("keydown",this.tabWatcher),c(this).trigger("Dialog.show",[this.$popup,this,this.id]),h.trigger("Dialog.show",[this.$popup,this,this.id]),this.options.modeless||r.disableKeyboardScrolling(),this.stacked=!1},show:function(t){var i=this.options.delayShowUntil,e=this;if(y.current===this)return!1;var s=new c.Event("beforeShow"),o=new c.Event("beforeShow");c(this).trigger(s),h.trigger(o,[this.options.id]),c(this).trigger("Dialog.beforeShow"),h.trigger("Dialog.beforeShow",[this.options.id]);var n=new CustomEvent("legacyJiraDialogBeforeShow",{detail:{id:this.options.id}});if(document.dispatchEvent(n),s.isDefaultPrevented()||o.isDefaultPrevented())return!1;if(this.downloadResources(),i){var a=i();"resolved"===a.state()?e._show(t):(this.options.modeless||v(!1),this._showloadingIndicator(),a.done(function(){e._show(t)}))}else e._show(t)},_setWindowTitle:function(){var t,i,e=this.options.windowTitle,o=this.get$popup();if(e!==!1&&("string"==typeof e?t=e:"function"==typeof e?t=e.call(this):(i=o.find("."+this.classNames.HEADING_AREA),i.length&&(t=i.text())),t)){var n=s.get("app-title"),a=[t];n&&a.push(n),document.title=a.join(" - ")}},_onShowContent:function(){this._setWindowTitle(),this._hideloadingIndicator(),this._ellipsify(),this.get$popup().addClass(this.classNames.CONTENT_READY)},_resetWindowTitle:function(){this.stacked!==!0&&y.stackroot===this&&y.originalWindowTitle&&(document.title!==y.originalWindowTitle&&(document.title=y.originalWindowTitle),delete y.originalWindowTitle)},notifyOfNewContent:function(){if(this.$content){this.decorateContent(),this._positionInCenter(),this._onShowContent(),c(document).trigger("dialogContentReady",[this]);const t=new CustomEvent("legacyJiraDialogContentReady",{detail:this});document.dispatchEvent(t)}},destroy:function(){this.options.modeless&&(AJS.dialog2&&(AJS.dialog2.off("show",this._auiDialog2ShowHandler),AJS.dialog2.off("hide",this._auiDialog2HideHandler),delete this._auiDialog2ShowHandler,delete this._auiDialog2HideHandler),m("show.dialog",this._auiDialogShowHandler),m("hide.dialog",this._auiDialogHideHandler),m("remove.dialog",this._auiDialogRemoveHandler),delete this._auiDialogShowHandler,delete this._auiDialogHideHandler,delete this._auiDialogRemoveHandler),this.$popup&&this.$popup.remove(),delete this.$popup,delete this.$popupContent,delete this.$popupHeading,delete this.$content},_destroyIfNecessary:function(){!this.options.cached&&this.destroy()},_removeStackState:function(){var t=this.prev;return delete this.prev,delete this.stacked,t},isCurrent:function(){return y.current===this},hide:function(t,i){if(y.current===this){var e=new c.Event("Dialog.beforeHide"),s=new c.Event("Dialog.beforeHide");i=i||{},h.trigger(e,[this.$popup,i.reason,this.options.id]),c(this).trigger(s,[this.$popup,i.reason,this.options.id]);var o;if(o=new CustomEvent("legacyJiraDialogBeforeHide",{detail:{popup:this.$popup,reason:i.reason,id:this.options.id}}),document.dispatchEvent(o),(i.reason===y.HIDE_REASON.escape||i.reason===y.HIDE_REASON.cancel)&&this.options.analyticsComponent&&this.options.analyticsAction){var n;try{n=require("jira/components/analytics-tracker/tracker"),n.trackEvent(this.options.analyticsComponent,this.options.analyticsAction+".cancel")}catch(t){n=null}}if(o&&o.defaultPrevented||e.isDefaultPrevented()||s.isDefaultPrevented())return!1;var d=c("input[name=atl_token]",this.OPEN_DIALOG_SELECTOR).attr("value");void 0!==d&&a.updateTokenOnPage(d),(t!==!1&&!this.prev&&!this.options.modeless||this.prev&&this.prev.options.modeless)&&AJS.undim(),this.get$popup().removeClass(this.classNames.DIALOG_OPEN).removeClass(this.classNames.CONTENT_READY).hide(),this._hideloadingIndicator(),this._resetWindowTitle(),c(document).trigger("hideAllLayers",[this.$popup,i.reason,this.options.id]),c(this).trigger("Dialog.hide",[this.$popup,i.reason,this.options.id]),h.trigger("Dialog.hide",[this.$popup,i.reason,this.options.id]);var l=new CustomEvent("legacyJiraDialogHide",{detail:{popup:this.$popup,reason:i.reason,id:this.options.id}});if(document.dispatchEvent(l),y.current=null,this.options.cached===!1&&this.stacked!==!0&&this.destroy(),this.options.modeless||r.enableKeyboardScrolling(),this.tabWatcher&&c(document).unbind("keydown",this.tabWatcher),this.stacked!==!0&&(this.prev?(this.prev.show(!!this.prev.options.reloadOnPop),delete this.prev):y.stackroot===this&&delete y.stackroot),this.options.elementToFocusOnClose)c(this.options.elementToFocusOnClose).focus();else if(this.$activeTrigger)this.$activeTrigger.focus();else if(this.options.id){var p=this.options.id,u="#"+p.substring(0,p.indexOf("-dialog"));u.length>1&&c(u).focus()}}},addHeading:function(t){var i=c("<div/>").html(t).contents(),e=c("<h2/>"),s=[];i.each(function(t){"div"===this.nodeName.toLowerCase()?s.push(this):e.append(this)}),this.get$popupHeading().html(s).append(e),e.attr("title",c.trim(e.text()))},onContentReady:function(t){c.isFunction(t)&&this.onContentReadyCallbacks.push(t)},_auiDialogHandlers:{hideTemporarily:function(t,i){this._temporarilyHidden||this._hideTemporarily()},restoreVisibility:function(t,i){if(this._temporarilyHidden){var e=C.getTopLayer(),s=!!e&&_(e);s&&s.isVisible()&&s.isBlanketed()||this._restoreVisibility()}},restoreVisibilityRebindable:function(t,i){this._restoreVisibility(t,i);var e=function(){f("remove.dialog",this._auiDialogRemoveHandler)};setTimeout(e.bind(this),0)}},_auiDialog2Handlers:{hideTemporarily:function(t,i){this._temporarilyHidden||this._hideTemporarily()},restoreVisibility:function(t,i){if(this._temporarilyHidden&&(!AJS.popup.current||!AJS.popup.current.element.is(":visible"))){for(;i;){var e=_(i);if(e.isVisible()&&e.isBlanketed())return;i=e.below()}this._restoreVisibility()}}},_hideTemporarily:function(){this.get$popup().addClass(this.classNames.DIALOG_NOT_VISIBLE),this._temporarilyHidden=!0},_restoreVisibility:function(){this.get$popup().removeClass(this.classNames.DIALOG_NOT_VISIBLE),this._temporarilyHidden=!1},defineResources:function(){p.isFunction(this.options.defineResources)&&this.options.defineResources.call(this)},requireContext:function(t){this.requireResource(t,"wrc!")},requireResource:function(t,i){this.wrmResources=this.wrmResources||[],this.wrmResources.push((i||"wr!")+t)},getRequiredResources:function(){return this.wrmResources||[]},downloadResources:function(){this.getRequiredResources().length>0&&!this.deferredResources&&(this.deferredResources=u(this.getRequiredResources()))},resourcesReady:function(){return this.deferredResources?this.deferredResources.promise():(new t).resolve().promise()}});return y.fn.dirtyFormWarning=function(){return this.bind("Dialog.beforeHide",function(t,i,e){if(!t.isDefaultPrevented()&&(e===y.HIDE_REASON.cancel||e===y.HIDE_REASON.escape)){var s=require("jira/jquery/plugins/isdirty"),o=s.getDirtyWarning();o&&!confirm(o)&&t.preventDefault()}})},y.ClassNames={DIALOG:"jira-dialog",HEADING_AREA:"jira-dialog-heading",CONTENT_AREA:"jira-dialog-content",DIALOG_OPEN:"jira-dialog-open",CONTENT_READY:"jira-dialog-content-ready",MODELESS_DIALOG:"jira-dialog-modeless",DIALOG_NOT_VISIBLE:"jira-dialog-not-visible"},y.WIDTH_PRESETS={small:360,medium:540,large:810},y.CONSTRAINTS={MODELESS_MIN_HEIGHT:240},y.HIDE_REASON={cancel:"cancel",escape:"esc",submit:"submit"},y}),AJS.namespace("AJS.FlexiPopup",null,require("jira/dialog/dialog")),AJS.namespace("JIRA.Dialog",null,require("jira/dialog/dialog"));;
;
/* module-key = 'jira.webresources:jira-dialog-config', location = '/includes/jira/dialog/IssueDialogUtil.js' */
define("jira/dialog/dialog-util",["jira/dialog/dialog-register","jira/jquery/deferred","jira/issuenavigator/issue-navigator","jquery"],function(e,i,s,t){var u={};return u.getDefaultAjaxOptions=function(){if(JIRA&&"function"==typeof e.getDefaultAjaxOptions&&u.getDefaultAjaxOptions!==e.getDefaultAjaxOptions)return e.getDefaultAjaxOptions.apply(this,arguments);var i=s.get$focusedRow(),t=this.options.url||this.getRequestUrlFromTrigger();if(/id=\{0\}/.test(t)){if(!i.length)return!1;t=t.replace(/(id=\{0\})/,"id="+i.attr("rel"))}if(s.isNavigator()){var r=/[?&]id=([0-9]+)/.exec(t);this.issueId=r&&2===r.length?r[1]:null,this.issueId!==i.attr("rel")&&(s.Shortcuts.focusRow(this.issueId),i=s.get$focusedRow()),this.issueKey=s.getSelectedIssueKey()}return{url:t,data:{decorator:"dialog",inline:"true"}}},u.BeforeShowIssueDialogHandler=function(){var e=[];return{add:function(i){return e.push(i),this},execute:function(){var s=[];return 0===e.length?i().resolve():(t.each(e,function(e,i){s.push(i())}),t.when.apply(t,s))}}}(),u.storeCurrentIssueIdOnSucessfulSubmit=function(){s.isNavigator()&&s.setIssueUpdatedMsg({issueMsg:this.options.issueMsg,issueId:this.issueId,issueKey:this.issueKey})},u}),AJS.namespace("JIRA.Dialogs",null,require("jira/dialog/dialog-register")),AJS.namespace("JIRA.Dialogs.getDefaultAjaxOptions",null,require("jira/dialog/dialog-util").getDefaultAjaxOptions),AJS.namespace("JIRA.Dialogs.BeforeShowIssueDialogHandler",null,require("jira/dialog/dialog-util").BeforeShowIssueDialogHandler),AJS.namespace("JIRA.Dialogs.storeCurrentIssueIdOnSucessfulSubmit",null,require("jira/dialog/dialog-util").storeCurrentIssueIdOnSucessfulSubmit);;
;
/* module-key = 'jira.webresources:set-focus', location = '/includes/jira/focus/setFocus.js' */
define("jira/focus/set-focus",["jira/dialog/dialog","jquery"],function(e,t){var n="form.dont-default-focus",o="input:not(#issue-filter-submit), select, textarea, button, a.cancel",s=["."+e.ClassNames.CONTENT_AREA,"form.aui","form"],i=[],u=function(e,n,o,s){var i=!1;return t(n,e).not(o).find(s).each(function(){var e=t(this);if(e.is(":enabled, a")&&e.is(":visible"))return e.focus(),e.is(":text, :password, textarea")&&(e.is(".focus-select-end")?e.setCaretToPosition(e[0].value.length):e.setSelectionRange(0,e[0].value.length)),i=!0,!1}),i},c=function(){for(var e=0,t=i[i.length-1];!u(t.context,t.parentElementSelectors[e],t.excludeParentSelector,t.focusElementSelector)&&e<t.parentElementSelectors.length;)e++};return{FocusConfiguration:function(){this.context=document,this.excludeParentSelector=n,this.focusElementSelector=o,this.parentElementSelectors=s.slice(0),this.focusNow=c},triggerFocus:function(){0===i.length&&i.push(new this.FocusConfiguration),i[i.length-1].focusNow()},pushConfiguration:function(e){i.push(e)},popConfiguration:function(){i.pop()}}}),AJS.namespace("JIRA.setFocus",null,require("jira/focus/set-focus"));;
;
/* module-key = 'jira.webresources:set-focus', location = '/includes/jira/focus/initSetFocus.js' */
!function(r,u){r(function(){u.triggerFocus()})}(require("jquery"),require("jira/focus/set-focus"));;
;
/* module-key = 'jira.webresources:select-pickers', location = 'includes/ajs/select/QueryableSelect.soy.js' */
if("undefined"==typeof AJS)var AJS={};"undefined"==typeof AJS.Templates&&(AJS.Templates={}),AJS.Templates.queryableSelect=function(e,t){for(var o="<select "+(e.name?'name="'+soy.$$escapeHtml(e.name)+'"':"")+" "+(e.id?'id="'+soy.$$escapeHtml(e.id)+'"':"")+' multiple="multiple">',p=e.descriptors,s=p.length,i=0;i<s;i++){var l=p[i];if(l.properties.items){o+='<optgroup label="'+soy.$$escapeHtml(l.properties.label)+'">';for(var r=l.properties.items,a=r.length,n=0;n<a;n++){var m=r[n];o+=AJS.Templates.option({option:m})}o+="</optgroup>"}else o+=AJS.Templates.option({option:l})}return o+="</select>"},AJS.Templates.option=function(e,t){return"<option "+(e.option.properties.className?'class="'+soy.$$escapeHtml(e.option.properties.className)+'"':"")+" "+(e.option.properties.title?'title="'+soy.$$escapeHtml(e.option.properties.title)+'"':"")+" "+(e.option.properties.meta?'data-meta="'+soy.$$escapeHtml(e.option.properties.meta)+'"':"")+" "+(e.option.properties.selected?'selected="selected"':"")+' value="'+soy.$$escapeHtml(e.option.properties.value)+'">'+soy.$$escapeHtml(e.option.properties.label)+"</option>"};;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/SelectHelper.js' */
define("jira/ajs/select/select-helper",function(){return{updateFreeInputVal:function(){this.options.submitInputVal&&this.model.updateFreeInput(this.$field.val())},removeFreeInputVal:function(){this.options.submitInputVal&&this.model.removeFreeInputVal()}}}),AJS.namespace("AJS.SelectHelper",null,require("jira/ajs/select/select-helper"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/ajax-descriptor-fetcher.js' */
define("jira/ajs/select/fetchers/ajax-descriptor-fetcher",["jira/util/logger","jira/jquery/deferred","jira/lib/class","jira/ajs/ajax/smart-ajax","jira/featureflags/feature-manager","jquery","underscore"],function(e,t,s,n,i,u,r){return s.extend({init:function(e){this.options=r.extend({keyInputPeriod:75,minQueryLength:1,data:{},dataType:"json"},e)},makeRequest:function(e,t,s){const i=Object.assign({},t);i.complete=r.bind(function(){this.outstandingRequest=null,JIRA.trace("jira.suggestionhandler.done")},this);const u=i.onSuccessCompleted,a=i.onErrorCompleted;delete i.onSuccessCompleted,delete i.onErrorCompleted,i.success=r.bind(function(t){var n;i.query?n=i.formatResponse(t,s):(this.lastResponse=i.formatResponse(t,s),n=this.lastResponse),u&&u.apply(this,arguments),e.resolve(n)},this);var o=i.error;i.error=function(t,s,i,u){var r=!1;u.aborted?"timeout"===u.statusText&&(o?o.apply(this,arguments):alert(n.buildSimpleErrorContent(u,{alert:!0})),r=!0):(o?o.apply(this,arguments):alert(n.buildSimpleErrorContent(u,{alert:!0})),r=!0),a&&a.apply(this,arguments),r&&e.resolve()},this.outstandingRequest=n.makeRequest(i)},incubateRequest:function(e,t,s,n){return clearTimeout(this.queuedRequest),n&&this.outstandingRequest&&(this.outstandingRequest.abort(),this.outstandingRequest=null),!t.query&&this.lastResponse?e.resolve(this.lastResponse):this.outstandingRequest?this.queuedRequest=setTimeout(r.bind(function(){this.incubateRequest(e,t,s,!0)},this),t.keyInputPeriod):("function"==typeof t.data?t.data=t.data(s):t.data.query=s,"function"==typeof t.url&&(t.url=t.url()),s.length>=parseInt(t.minQueryLength,10)||n?this.makeRequest(e,t,s):e.resolve()),e},execute:function(e,s){var n=t();return n.fail(r.bind(function(){clearTimeout(this.queuedRequest),this.outstandingRequest&&this.outstandingRequest.abort()},this)),this.incubateRequest(n,r.extend({},this.options),e,s),n}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/mixed-descriptor-fetcher.js' */
define("jira/ajs/select/fetchers/mixed-descriptor-fetcher",["jira/jquery/deferred","jira/lib/class","jira/ajs/select/fetchers/ajax-descriptor-fetcher","jquery","underscore"],function(e,t,i,r,s){return t.extend({init:function(e,t){this.ajaxFetcher=new i(e.ajaxOptions),this.options=e,this.model=t},execute:function(t,i){var r=e(),n=this.options.ajaxOptions.minQueryLength;if(n="number"==typeof n&&isFinite(n)?n:1,t.length>=n){var o=this.ajaxFetcher.execute(t,i).done(s.bind(function(e){var i;i=this.options.suggestionAtTop?[].concat(this.model.getAllDescriptors(),e):[].concat(e,this.model.getAllDescriptors()),r.resolve(i,t)},this));r.fail(function(){o.reject()})}else r.resolve(this.model.getUnSelectedDescriptors(),t);return r}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/func-descriptor-fetcher.js' */
define("jira/ajs/select/fetchers/func-descriptor-fetcher",["jira/jquery/deferred","jira/lib/class","jquery"],function(e,r,t){return r.extend({init:function(e){this.options=e},execute:function(r){var t=e();return t.resolve(this.options.suggestions(r),r),t}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/static-descriptor-fetcher.js' */
define("jira/ajs/select/fetchers/static-descriptor-fetcher",["jira/jquery/deferred","jira/lib/class","jquery"],function(e,t,r){return t.extend({init:function(e,t){this.model=t,this.model.$element.data("static-suggestions",!0)},execute:function(t){var r=e();return r.resolve(this.model.getUnSelectedDescriptors(),t),r}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/namespace.js' */
AJS.namespace("AJS.StaticDescriptorFetcher",null,require("jira/ajs/select/fetchers/static-descriptor-fetcher")),AJS.namespace("AJS.AjaxDescriptorFetcher",null,require("jira/ajs/select/fetchers/ajax-descriptor-fetcher")),AJS.namespace("AJS.MixedDescriptorFetcher",null,require("jira/ajs/select/fetchers/mixed-descriptor-fetcher")),AJS.namespace("AJS.FuncDescriptorFetcher",null,require("jira/ajs/select/fetchers/func-descriptor-fetcher"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/suggest-helper.js' */
define("jira/ajs/select/suggestions/suggest-helper",["jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/select/fetchers/mixed-descriptor-fetcher","jira/ajs/select/fetchers/ajax-descriptor-fetcher","jira/ajs/select/fetchers/func-descriptor-fetcher","jira/ajs/select/fetchers/static-descriptor-fetcher","underscore"],function(e,t,r,i,n,s,c){return{createDescriptorFetcher:function(e,t){return e.ajaxOptions&&e.ajaxOptions.url?t&&"mixed"===e.content?new r(e,t):new i(e.ajaxOptions):e.suggestions?new n(e):t?new s(e,t):void 0},extractItems:function(t){return c.flatten(c.map(t,function(t){return t instanceof e?t.items():[t]}))},mirrorQuery:function(r,i,n){var s=n?r.toUpperCase():r;return new e({label:"user inputted option",showLabel:!1,replace:!0}).addItem(new t({value:s,label:s,labelSuffix:" ("+i+")",title:s,allowDuplicate:!1,noExactMatch:!0}))},isSelected:function(e,t){return c.any(t,function(t){return e.value()===t.value()})},removeDuplicates:function(t,r){return r=r||[],c.filter(t,c.bind(function(t){return t instanceof e?(t.items(this.removeDuplicates(t.items(),r)),!0):c.include(r,t.value())?void 0:(t.value()&&r.push(t.value()),!0)},this))},removeSelected:function(r,i){return c.filter(r,c.bind(function(r){return!(r instanceof t&&this.isSelected(r,i))&&(r instanceof e&&r.items(this.removeSelected(r.items(),i)),!0)},this))}}});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/default-suggest-handler.js' */
define("jira/ajs/select/suggestions/default-suggest-handler",["jira/jquery/deferred","jira/lib/class","jira/ajs/select/suggestions/suggest-helper","jquery","underscore"],function(e,t,r,s,i){return t.extend({init:function(e){this.options=e,this.descriptorFetcher=r.createDescriptorFetcher(e)},validateMirroring:function(e){return this.options.userEnteredOptionsMsg&&e.length>0},formatSuggestions:function(e,t){return this.validateMirroring(t)&&e.push(r.mirrorQuery(t,this.options.userEnteredOptionsMsg,this.options.uppercaseUserEnteredOnSelect)),e},execute:function(t,r){var s=e(),n=this.descriptorFetcher.execute(t,r).done(i.bind(function(e){e&&(e=this.formatSuggestions(e,t)),s.resolve(e,t)},this));return s.fail(function(){n.reject()}),s}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/select-suggest-handler.js' */
define("jira/ajs/select/suggestions/select-suggest-handler",["jira/ajs/select/suggestions/default-suggest-handler","jira/ajs/select/suggestions/suggest-helper"],function(e,s){return e.extend({init:function(e,t){this.descriptorFetcher=s.createDescriptorFetcher(e,t),this.options=e,this.model=t},formatSuggestions:function(e,t){var i=this._super(e,t),r=this.model.getDisplayableSelectedDescriptors();return this.options.removeDuplicates&&(i=s.removeDuplicates(e)),s.removeSelected(i,r)}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/invite-capable-suggest-handler.js' */
define("jira/ajs/select/suggestions/invite-capable-suggest-handler",["jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/select/suggestions/suggest-helper","jira/ajs/list/item-descriptor","jira/util/formatter","underscore"],function(e,t,i,n,s){return e.extend({init:function(e,i){this.descriptorFetcher=t.createDescriptorFetcher(e,i),this.options=e,this.model=i},formatSuggestions:function(e,t){var r=this._super(e,t);return s.map(r,s.bind(function(e){return 0===e.items().length&&this._isValidEmail(t)?e.items([new i({value:t,label:t,html:"<div>"+n.format("Create \"{0}\"",t)+"</div>",allowDuplicate:!1,highlighted:!0})]):e},this))},_isValidEmail:function(e){function t(e,t){return e.substring(0,t.length)===t}function i(e,t){var i=e.length-t.length,n=e.indexOf(t,i);return n!==-1&&n===i}function n(e,t){var i=!1;return t.length<=e.length&&(i=e.indexOf(t)!==-1),i}var s=/^[a-zA-Z0-9_\-\+'`\?=\*%\$#!/^\{\|}~\.]+@([a-zA-Z0-9\-]+\.)+([a-zA-Z0-9]+)$/,r=!1;if(s.test(e)){var a=e.split("@")[0];r=!t(a,".")&&!i(a,".")&&!n(a,"..")}return r}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/assignee-suggest-handler.js' */
define("jira/ajs/select/suggestions/assignee-suggest-handler",["jira/util/formatter","jira/ajs/select/suggestions/select-suggest-handler"],function(e,s){return s.extend({formatSuggestions:function(s,t){var s=this._super(s,t);return 0===t.length&&s[0].footerText("Start Typing for Users"),s}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/checkbox-multi-select-suggest-handler.js' */
define("jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler",["jira/util/formatter","jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/select/suggestions/suggest-helper","jira/ajs/list/group-descriptor"],function(e,t,s,l){return t.extend({createClearAll:function(){return"<li class='check-list-group-actions'><a class='clear-all' href='#'>"+"Clear selected items"+"</a></li>"},formatSuggestions:function(e,t){var a=s.removeDuplicates(this.model.getDisplayableSelectedDescriptors()),r=new l({styleClass:"selected-group",items:a,actionBarHtml:a.length>1?this.createClearAll():null});if(e.splice(0,0,r),t.length>0){e=s.removeDuplicates(e);var i=s.extractItems(e).sort(function(e,t){return e=e.label().toLowerCase(),t=t.label().toLowerCase(),e.localeCompare(t)});e=[new l({items:i})]}return e}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/user-list-suggest-handler.js' */
define("jira/ajs/select/suggestions/user-list-suggest-handler",["jira/ajs/select/suggestions/select-suggest-handler"],function(e){return e.extend({emailExpression:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,validateMirroring:function(e){return this.options.freeEmailInput&&e.length>0&&this.emailExpression.test(e)}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/only-new-items-suggest-handler.js' */
define("jira/ajs/select/suggestions/only-new-items-suggest-handler",["jira/ajs/select/suggestions/select-suggest-handler","underscore"],function(e,s){return e.extend({validateMirroring:function(e){var t=this._super(e);if(t){var r=e.toLowerCase(),n=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),i=s.some(n,function(e){var s=e.label();return s&&s.toLowerCase()===r});return!i}return!1}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/namespace.js' */
AJS.namespace("AJS.SuggestHelper",null,require("jira/ajs/select/suggestions/suggest-helper")),AJS.namespace("AJS.DefaultSuggestHandler",null,require("jira/ajs/select/suggestions/default-suggest-handler")),AJS.namespace("AJS.SelectSuggestHandler",null,require("jira/ajs/select/suggestions/select-suggest-handler")),AJS.namespace("AJS.OnlyNewItemsSuggestHandler",null,require("jira/ajs/select/suggestions/only-new-items-suggest-handler")),AJS.namespace("AJS.CheckboxMultiSelectSuggestHandler",null,require("jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler")),AJS.namespace("JIRA.AssigneeSuggestHandler",null,require("jira/ajs/select/suggestions/assignee-suggest-handler")),AJS.namespace("AJS.UserListSuggestHandler",null,require("jira/ajs/select/suggestions/user-list-suggest-handler"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/QueryableDropdownSelect.js' */
define("jira/ajs/select/queryable-dropdown-select",["jira/util/formatter","jira/jquery/deferred","jira/ajs/control","jira/ajs/select/suggestions/default-suggest-handler","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/util/navigator","jira/util/assistive","jquery","jira/featureflags/feature-manager","underscore"],function(t,e,i,n,s,o,r,a,l,d,h){var u="-suggestions",g=0;return i.extend({INVALID_KEYS:{Shift:!0,Esc:!0,Right:!0},init:function(t){this.suggestionsVisible=!1,this._setOptions(t),this._createFurniture(),this._createDropdownController(),this._createSuggestionsController(),this._createListController(),this._assignEventsToFurniture(),this.options.width&&this.setFieldWidth(this.options.width),this.options.loadOnInit&&this.requestSuggestions(!0)},_createDropdownController:function(){var t=this;this.options.dropdownController?this.dropdownController=this.options.dropdownController:this.dropdownController=s.createInlineLayers({offsetTarget:this.$field,width:this.$field.innerWidth(),content:this.options.element}),this.dropdownController.onhide(function(){t.hideSuggestions()})},_createSuggestionsController:function(){this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options):new n(this.options)},_createListController:function(){var e=this,i=null;this.suggestionsHandler.suggestionHighlighter&&(i=this.suggestionsHandler.suggestionHighlighter.bind(this.suggestionsHandler)),this.listController=new o({containerSelector:this.options.element,groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,matchingHighlighter:i,eventTarget:this.$field,selectionHandler:function(){return e.$field.val("Loading...").css("color","#999"),e.hideSuggestions(),!0}})},_onItemFocus:function(t,e){var i=this.$field,n=e&&e.id?e.id:"null";a.wait(function(){i.attr("aria-activedescendant",n)})},setFieldWidth:function(t){this.$container.css({width:t,minWidth:t})},showErrorMessage:function(e){var i=this.$container.parent(".field-group");return this.hideErrorMessage(),this.$errorMessage.text(t.format(this.options.errorMessage,e||this.getQueryVal())),1===i.length?void i.append(this.$errorMessage):(0===i.length&&(i=this.$container.parent(".frother-control-renderer")),1===i.length?void this.$errorMessage.prependTo(i):void(0===i.length&&this.$container.parent().append(this.$errorMessage)))},hideErrorMessage:function(){this.$errorMessage&&this.$errorMessage.remove(),this.$container.parent().find(".error").remove()},_getDefaultOptions:function(){return g+=1,{id:g,keyInputPeriod:75,localListLiveUpdateLimit:25,localListLiveUpdateDelay:150}},_createFurniture:function(){this.$container=this._render("container").insertBefore(this.options.element),this.suggestionsContainerId=this.options.id+u,this.$field=this._render("field").appendTo(this.$container),this.$dropDownIcon=this._render("dropdownAndLoadingIcon",this._hasDropdownButton()).appendTo(this.$container),this.options.overlabel&&(this.$overlabel=this._render("overlabel").insertBefore(this.$field),this.$overlabel.overlabel())},_hasDropdownButton:function(){return this.options.showDropdownButton||this.options.ajaxOptions&&0===this.options.ajaxOptions.minQueryLength},_assignEventsToFurniture:function(){var t=this;this._assignEvents("ignoreBlurElement",this.dropdownController.$layer),this._assignEvents("container",this.$container),this._hasDropdownButton()&&(this._assignEvents("ignoreBlurElement",this.$dropDownIcon),this._assignEvents("dropdownAndLoadingIcon",this.$dropDownIcon)),setTimeout(function(){t._assignEvents("field",t.$field),t._assignEvents("keys",t.$field)},15),this.listController.bind("itemFocus",this._onItemFocus.bind(this))},requestSuggestions:function(t){var i=this,n=e();return this.outstandingRequest=this.suggestionsHandler.execute(this.getQueryVal(),t).done(function(t,e){e===i.getQueryVal()&&n.resolve(t,e)}),"resolved"!==this.outstandingRequest.state()&&(window.clearTimeout(this.loadingWait),this.loadingWait=window.setTimeout(function(){"pending"===i.outstandingRequest.state()&&i.showLoading()},150),this.outstandingRequest.always(function(){i.hideLoading()})),n},showLoading:function(){return this.$dropDownIcon.addClass("loading").removeClass("noloading"),this.$dropDownIcon.data("spinner")||this.$dropDownIcon.spin(),this.$field.attr("aria-busy","true"),this},hideLoading:function(){return this.$dropDownIcon.removeClass("loading").addClass("noloading"),this.$dropDownIcon.spinStop(),this.$field.attr("aria-busy","false"),this},_setSuggestions:function(t){t?(this.listController.generateListFromJSON(t,this.getQueryVal()),this.showSuggestions()):this.hideSuggestions(),this.$container.attr("data-query",this.getQueryVal())},disable:function(){this.disabled||(this.$container.addClass("aui-disabled"),this.$disabledBlanket=this._render("disabledBlanket").appendTo(this.$container),this.$field.attr("disabled",!0),this.dropdownController.hide(),this.disabled=!0)},enable:function(){this.disabled&&(this.$container.removeClass("aui-disabled"),this.$disabledBlanket.remove(),this.$field.attr("disabled",!1),this.disabled=!1)},getQueryVal:function(){return l.trim(this.$field.val())},_isValidInput:function(t){return this.$field.is(":visible")&&!("aui:keydown"===t.type&&this.INVALID_KEYS[t.key])},_handleCharacterInput:function(t){if(this.options&&this.options.disableSearch)return void this.hideSuggestions();var e=this.getQueryVal().length;e>=1||t?this.requestSuggestions(t).done(h.bind(function(t){this._setSuggestions(t)},this)):this.hideSuggestions()},_handleDown:function(t){this.suggestionsVisible||(this.listController._latestQuery="",this._handleCharacterInput(!0)),t.preventDefault()},_rejectPendingRequests:function(){this.outstandingRequest&&this.outstandingRequest.reject()},showSuggestions:function(){this.suggestionsVisible||(this.suggestionsVisible=!0,this.dropdownController.show(),this.dropdownController.setWidth(this.$field.innerWidth()),this.dropdownController.setPosition(),this.listController.enable(),this.$field.attr("aria-expanded","true"),this.$field.attr("aria-controls",this.suggestionsContainerId))},hideSuggestions:function(){this.suggestionsVisible&&(this._rejectPendingRequests(),this.suggestionsVisible=!1,this.$dropDownIcon.addClass("noloading"),this.dropdownController.hide(),this.listController.disable(),this.$field.removeAttr("aria-activedescendant"),this.$field.attr("aria-expanded","false"),this.$field.removeAttr("aria-controls"))},_deactivate:function(){this.hideSuggestions()},_handleEscape:function(t){this.suggestionsVisible&&(t.stopPropagation(),"keyup"===t.type&&(this.hideSuggestions(),r.isIE()&&r.majorVersion()<12&&this.$field.focus()))},acceptFocusedSuggestion:function(){var t=this.listController.getFocused();0!==t.length&&t.is(":visible")&&this.listController._acceptSuggestion(t)},keys:{Down:function(t){this._hasDropdownButton()&&this._handleDown(t)},Up:function(t){t.preventDefault()},Return:function(t){t.preventDefault()}},onEdit:function(){this._handleCharacterInput()},_events:{dropdownAndLoadingIcon:{click:function(t){this.suggestionsVisible?this.hideSuggestions():(this._handleDown(t),this.$field.focus()),t.stopPropagation()}},container:{disable:function(){this.disable()},enable:function(){this.enable()}},field:{blur:function(){this.ignoreBlurEvent?this.ignoreBlurEvent=!1:this._deactivate()},click:function(t){t.stopPropagation()},"keydown keyup":function(t){27===t.keyCode&&this._handleEscape(t)}},keys:{"aui:keydown input":function(t){this._handleKeyEvent(t)}},ignoreBlurElement:{mousedown:function(t){function e(t){t.returnValue=!1}if(r.isIE()&&r.majorVersion()<12){var i=l(t.target)[0]==l(this.dropdownController.$layer)[0];if(i&&(this.ignoreBlurEvent=!0),"undefined"==typeof document.addEventListener){if(!i){var n=this.$field.get(0);n.attachEvent("onbeforedeactivate",e),setTimeout(function(){n.detachEvent("onbeforedeactivate",e)},0)}return}}t.preventDefault()}}},_renders:{disabledBlanket:function(){return l("<div class='aui-disabled-blanket' />").height(this.$field.outerHeight())},overlabel:function(){return l("<span class='overlabel' />").text(this.options.overlabel).attr({"data-target":this.options.id+"-field",id:this.options.id+"-overlabel"})},baseField:function(t){var e=document.createElement(t||"input");return l(e).attr({autocomplete:"off",role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":"false"})},field:function(){return this._render("baseField").attr({class:"text",id:this.options.id+"-field",type:"text"})},container:function(){return l("<div class='queryable-select' id='"+this.options.id+"-queryable-container' />")},dropdownAndLoadingIcon:function(t){return l('<span class="icon noloading"><span>More</span></span>').toggleClass("drop-menu",!!t)},suggestionsContainer:function(t){return l("<div />").attr({class:"aui-list",id:t+u,tabindex:"-1",role:"listbox"})}}})}),AJS.namespace("AJS.QueryableDropdown",null,require("jira/ajs/select/queryable-dropdown-select")),AJS.namespace("AJS.QueryableDropdownSelect",null,require("jira/ajs/select/queryable-dropdown-select"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/MultiSelect.Lozenge.js' */
define("jira/ajs/select/multi-select/lozenge",["jira/util/formatter","jira/util/assistive","jira/ajs/control","jquery"],function(e,t,n,s){var i,o=0;return n.extend({init:function(e){this.id=o,o+=1,this._setOptions(e),this.$lozenge=this._render("lozenge"),this.$removeButton=this._render("removeButton"),this.$removeButton.tooltip(),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$removeButton.appendTo(this.$lozenge),this.$lozenge.appendTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{lozenge:function(){var n=AJS.escapeHtml(this.options.label);AJS.escapeHtml(this.options.title)||"";return i||(i=t.createOrUpdateLabel("Press delete or backspace to remove this option")),s('<li class="item-row" role="option"><button type="button" tabindex="-1" class="value-item"><span><span class="value-text">'+n+"</span></span></button></li>").attr({"aria-describedby":i,id:"item-row-"+this.id})},removeButton:function(){return s('<em class="item-delete" aria-label=" "></em>')}},_events:{instance:{focus:function(){this.$lozenge.addClass(this.options.focusClass)},blur:function(){this.$lozenge.removeClass(this.options.focusClass)},remove:function(){this.$lozenge.remove()}},lozenge:{click:function(){this.trigger("focus")}},removeButton:{click:function(){this.trigger("remove")}}}})}),AJS.namespace("AJS.MultiSelect.Lozenge",null,require("jira/ajs/select/multi-select/lozenge"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/MultiSelect.LozengeGroup.js' */
define("jira/ajs/select/multi-select/lozenge-group",["jira/ajs/group"],function(t){return t.extend({keys:{Left:function(){this.index>0&&this.shiftFocus(-1)},Right:function(){this.index===this.items.length-1?this.items[this.index].trigger("blur"):this.shiftFocus(1)},Backspace:function(){var t=this.index;t>0?this.shiftFocus(-1):this.items.length>1&&this.shiftFocus(1),this.items[t].trigger("remove")},Return:function(){this.items[this.index].trigger("blur")},Del:function(){var t=this.index;t+1<this.items.length&&this.shiftFocus(1),this.items[t].trigger("remove")}}})}),AJS.namespace("AJS.MultiSelect.LozengeGroup",null,require("jira/ajs/select/multi-select/lozenge-group"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/MultiSelect.js' */
define("jira/ajs/select/multi-select",["jira/util/formatter","jira/ajs/layer/layer-constants","jira/ajs/select/multi-select/lozenge","jira/ajs/select/multi-select/lozenge-group","jira/ajs/select/queryable-dropdown-select","jira/ajs/select/select-helper","jira/ajs/select/select-model","jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/ajs/list/item-descriptor","jira/util/objects","jira/util/assistive","jquery"],function(e,t,i,s,n,o,r,l,a,u,d,h,c,p){return n.extend({init:function(e){return this._setOptions(e)===this.INVALID?this.INVALID:(p.extend(this,o),this.options.element=p(this.options.element),this.lozengeGroup=this.options.itemGroup,this.prevQuery=void 0,this._createSelectModel(),this.options.disabled?(this._createFurniture(!0),this):(this._createFurniture(),this._createSuggestionsController(),this._createListController(),this._createDropdownController(),this._assignEventsToFurniture(),this._setInitState(),this.options.width&&this.setFieldWidth(this.options.width),void this.model.$element.addClass("multi-select-select").trigger("initialized",[this])))},_createSelectModel:function(){this.model=new r({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect})},_setInitState:function(){this._restoreSelectedOptions(),this.options.inputText&&(this.$field.val(this.options.inputText),this.updateFreeInputVal())},_createListController:function(){var e=this;this.listController=new u({containerSelector:p(".aui-list",this.$container),groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,expandAllResults:this.options.expandAllResults,selectionHandler:function(t){return e._selectionHandler(this.getFocused(),t),!1}})},_createDropdownController:function(){var e=this;this.dropdownController=a.createInlineLayers({alignment:t.LEFT,offsetTarget:this.$field,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,content:p(".aui-list",this.$container)}),this.options.layerId&&(this.dropdownController.options.id=this.options.layerId),this.dropdownController.onhide(function(){e.hideSuggestions()})},_createSuggestionsController:function(){this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options,this.model):new l(this.options,this.model)},_getDefaultOptions:function(){return p.extend(!0,this._super(),{minRoomForText:50,errorMessage:"The value {0} is invalid.",showDropdownButton:!0,itemGroup:new s,suggestionsHandler:l,itemBuilder:function(e){return new i({label:e.label(),title:e.title(),container:this.$selectedItemsContainer})}})},_createFurniture:function(e){var t=this.model.$element.attr("id");if(this.model.$element.prev().hasClass("ajs-multi-select-placeholder")&&this.model.$element.prev().remove(),e)this.model.$element.replaceWith(this._render("disableSelectField",t));else{this.$container=this._render("container",t),this.$field=this._render("field",t).appendTo(this.$container);var i=this._render("suggestionsContainer",t);this.$container.append(i),this.suggestionsContainerId=i.attr("id"),this.$container.insertBefore(this.model.$element),this.$dropDownIcon=this._render("dropdownAndLoadingIcon",this._hasDropdownButton()).appendTo(this.$container),this.$errorMessage=this._render("errorMessage",t),this.$selectedItemsWrapper=this._render("selectedItemsWrapper").appendTo(this.$container),this.$selectedItemsContainer=this._render("selectedItemsContainer").appendTo(this.$selectedItemsWrapper)}},_assignEventsToFurniture:function(){var e=this;this._super(),this._assignEvents("body",document),this._assignEvents("selectedItemsContainer",this.$selectedItemsContainer),this._assignEvents("lozengeGroup",this.lozengeGroup),this.model.$element.bind("updateOptions",function(t){e.options=p.extend(!0,e.options,e.model.$element.getOptionsFromAttributes()),e._createSuggestionsController()}).bind("selectOption",function(t,i){e.addItem(i)}).bind("removeOption",function(t,i){e.removeItem(i)}).bind("clearSelection",function(){e.clearLozenges()}).bind("showSuggestions",function(t){e._handleDown(t)}).bind("hideSuggestions",function(){e.hideSuggestions()})},_getUserInputValue:function(){return this.options.uppercaseUserEnteredOnSelect?this.$field.val().toUpperCase():this.$field.val()},clear:function(){this.$field.val(""),this.hideSuggestions(),this.clearSelection()},clearSelection:function(){this.model.setAllUnSelected(),this.updateItemsIndent(),this.model.$element.trigger("unselect",[this])},clearLozenges:function(){this.lozengeGroup.removeAllItems(),this.clear()},removeItem:function(e){var t=this;this.model.setUnSelected(e),window.setTimeout(function(){t.updateItemsIndent()},0),this.model.$element.trigger("unselect",[e,this])},_restoreSelectedOptions:function(){var e=this;p.each(this.model.getDisplayableSelectedDescriptors(),function(){e.addItem(this,!0)}),this.updateItemsIndent()},_shouldEnableLozengeGroup:function(){return this.lozengeGroup.items.length>0&&this.lozengeGroup.index<0&&(0===this.$field.val().length||0===this.getCaret(this.$field[0]))},_handleBackSpace:function(){var e=this;this._shouldEnableLozengeGroup()&&setTimeout(function(){e.lozengeGroup.shiftFocus(-1)},0)},_handleLeft:function(){if(this._shouldEnableLozengeGroup()){var e=this;setTimeout(function(){e.lozengeGroup.shiftFocus(-1)},0)}},updateItemsIndent:function(){var e=20,t=this._getInputIndent(),i=t.top+e;i+=this.$container&&this.$container.closest(".inline-edit-fields").size()?0:6,this.$field.css({paddingTop:t.top,paddingLeft:t.left}),this.$field.css({height:i}),this.currentTopOffset&&this.currentTopOffset!==t.top&&this.$container.trigger("multiSelectHeightUpdated",[this]),this.currentTopOffset=t.top},_isItemPresent:function(e){var t=!1,i=e.value();return p.each(this.lozengeGroup.items,function(){if(this.value===i)return t=!0,!1}),t},addItem:function(e,t){if(e instanceof d&&(e=h.copyObject(e.allProperties(),!1)),e.value=p.trim(e.value),e.label=p.trim(e[this.options.itemAttrDisplayed])||e.value,e.title=p.trim(e.title)||e.label,e=new d(e),!this._isItemPresent(e)){var i=this.options.itemBuilder.call(this,e);this.lozengeGroup.addItem(i),this._assignEvents("lozenge",i),this.model.setSelected(e),this.updateItemsIndent(),this.dropdownController.setPosition(),i.value=e.value(),t||this.model.$element.trigger("selected",[e,this])}},_addMultipleItems:function(e,t){var i=this;p.each(e,function(e,s){t&&(s.removeOnUnSelect=!0),i.addItem(s)})},_getInputIndent:function(){var e,t,i,s,n=21,o=5,r=4,l=this.lozengeGroup.items.length-1;return i={top:r,left:o},l>=0&&(s=this.lozengeGroup.items[l].$lozenge,e=s.prop("offsetTop"),t=s.prop("offsetLeft")+s.outerWidth(),t>this.$container.width()-n-this.options.minRoomForText&&(e+=s.prop("offsetHeight"),t=0),i.top+=e,i.left+=t),i},_selectionHandler:function(e,t){var i=this;e.each(function(){i.addItem(p.data(this,"descriptor"))}),this.$field.val("").focus().scrollIntoView({margin:20}),this.hideSuggestions(),this.hideErrorMessage(),this.updateFreeInputVal(),this.model.$element.trigger("change"),t.preventDefault()},isValidItem:function(e){var t=this.listController.getFocused().data("descriptor");return!!t&&(e=e.toLowerCase(),e===p.trim(t.label.toLowerCase())||e===p.trim(t.value.toLowerCase()))},handleFreeInput:function(){var e,t=p.trim(this.$field.val());t&&(e=this.model.getDescriptor(t),e?(this.addItem(e),this.model.$element.trigger("change"),this.$field.val(""),this.hideErrorMessage(),this.updateFreeInputVal()):this.options.submitInputVal||this.showErrorMessage(t))},submitForm:function(){0!==this.$field.val().length||this.suggestionsVisible||p(this.$field[0].form).submit()},_handleCharacterInput:function(e,t){this._super(e,t),this.updateFreeInputVal()},_deactivate:function(){this.handleFreeInput(),this.lozengeGroup.trigger("blur"),this.hideSuggestions()},keys:{Left:function(){this._handleLeft()},Backspace:function(){this._handleBackSpace()},Return:function(e){this.submitForm(),e.preventDefault()},Tab:function(e){this.acceptFocusedSuggestion()}},_events:{body:{tabSelect:function(){this.$field.is(":visible")&&this.updateItemsIndent()},multiSelectRevealed:function(){this.$field.is(":visible")&&this.updateItemsIndent()}},field:{blur:function(){this.ignoreBlurEvent?(this.ignoreBlurEvent=!1,this.$field.focus()):this._deactivate()},"aui:keydown aui:keypress":function(e){this.lozengeGroup.index>=0&&(e.key in this.lozengeGroup.keys?e.preventDefault():"Return"===e.key?(this.submitForm(),e.preventDefault()):(this.onEdit(e),this.lozengeGroup.trigger("blur")))},click:function(){this.prevQuery=void 0,this.lozengeGroup.trigger("blur"),this.$field.focus()}},lozengeGroup:{focus:function(){this.$field.focus(),this.hideSuggestions(),this._unassignEvents("keys",this.$field),this.$field.attr("aria-controls",this.suggestionsContainerId)},blur:function(){this._assignEvents("keys",this.$field),this.$field.removeAttr("aria-controls"),this.$field.val()&&this.$field.val()!=this.prevQuery&&(this.prevQuery=this.$field.val(),this._handleCharacterInput())}},lozenge:{remove:function(e){this.removeItem(this.model.getDescriptor(e.target.value)),this.$field.focus()},focus:function(e){c.wait(function(){this.$field.attr("aria-activedescendant",e.currentTarget.$lozenge.attr("id"))}.bind(this))},blur:function(){this.$field.removeAttr("aria-activedescendant")}},selectedItemsContainer:{click:function(e){e.target===e.currentTarget&&(this.lozengeGroup.trigger("blur"),this.$field.focus())}}},_renders:{errorMessage:function(e){return p('<div class="error" />').attr("id",e+"-error")},selectedItemsWrapper:function(){return p('<div class="representation"></div>')},selectedItemsContainer:function(){return p('<ul class="items" role="listbox" />')},field:function(e){return this._render("baseField","textarea").attr({id:e+"-textarea",class:"text long-field",wrap:"off"})},disableSelectField:function(e){return p("<input type='text' class='long-field' />").attr({name:e,id:e})},container:function(e){return p('<div class="jira-multi-select long-field" id="'+e+'-multi-select">')},suggestionsContainer:function(e){return p('<div class="aui-list" tabindex="-1" />').attr("id",e+"-suggestions")}}})}),AJS.namespace("AJS.MultiSelect",null,require("jira/ajs/select/multi-select"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/jira/field/IssuePicker.js' */
define("jira/field/issue-picker",["jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery","jira/libs/parse-uri"],function(e,s,i,t,r,n){var a=t(),u=e.extend({_formatResponse:function(e){var t=[],u=function(){var e=n(window.location);return e.protocol+"://"+e.authority}();return e&&e.sections&&r(e.sections).each(function(e,n){var p=new s({weight:e,label:n.label,description:n.sub});n.issues&&n.issues.length>0&&r(n.issues).each(function(){p.addItem(new i({highlighted:!0,value:this.key,label:this.key+" - "+this.summaryText,icon:this.img?u+a+this.img:null,html:this.keyHtml+" - "+this.summary}))}),t.push(p)}),t},_getDefaultOptions:function(){return r.extend(!0,this._super(),{ajaxOptions:{formatResponse:this._formatResponse}})},_launchPopup:function(){function e(e,s){return null==e?s:e}var s,i,t,n,p=this;u.callback=function(e){"string"==typeof e&&(e=JSON.parse(e)),p._addMultipleItems(e,!0),p.$field.focus()},n=this.options.ajaxOptions.data,s=a+"/secure/popups/IssuePicker.jspa?",i={singleSelectOnly:"false",decorator:"popup",currentIssue:n.currentIssueKey||"",showSubTasks:e(n.showSubTasks,!1),showSubTasksParent:e(n.showSubTaskParent,!1)},n.currentProjectId&&(i.currentProjectId=n.currentProjectId),n.issueTypeId&&(i.issueTypeId=n.issueTypeId),s+=r.param(i),t=window.open(s,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width="+this.options.popupWidth+",height="+this.options.popupHeight+",scrollbars=yes,resizable"),t.opener=self,t.focus()},_createFurniture:function(e){var s;this._super(e),s=this._render("popupLink"),this._assignEvents("popupLink",s),this.$container.addClass("jira-issue-picker"),this.$container.addClass("hasIcon"),this.$container.after(s)},handleFreeInput:function(){var e=this.$field.val().toUpperCase().match(/\S+/g);e&&this._addMultipleItems(r.map(e,function(e){return{value:e,label:e}})),this.$field.val("")},_events:{popupLink:{click:function(e){this._launchPopup(),e.preventDefault()}}},_renders:{popupLink:function(){return r("<a class='issue-picker-popup' />").attr({href:"#",title:this.options.popupLinkMessage}).text(""+this.options.popupLinkMessage)}}});return u.callback=null,u}),AJS.namespace("jira.issuepicker",null,require("jira/field/issue-picker")),AJS.namespace("AJS.IssuePicker",null,require("jira/field/issue-picker")),AJS.namespace("JIRA.IssuePicker",null,require("jira/field/issue-picker"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/SingleSelect.js' */
define("jira/ajs/select/single-select",["jira/util/formatter","jira/ajs/layer/layer-constants","jira/ajs/select/queryable-dropdown-select","jira/ajs/select/select-helper","jira/ajs/select/select-model","jira/ajs/select/suggestion-collection-model","jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/ajs/list/item-descriptor","jira/util/navigator","jquery"],function(e,t,i,s,n,o,r,a,l,d,h,c){return i.extend({init:function(e){return this._setOptions(e)===this.INVALID?this.INVALID:(this._createSelectModel(),this.options.disabled?(this._createFurniture(!0),this):(c.extend(this,s),this._createFurniture(),this._createSuggestionsController(),this._createDropdownController(),this._createListController(),this._assignEventsToFurniture(),this._setInitState(),this.options.width&&this.setFieldWidth(this.options.width),this.$overlabel&&this.$overlabel.overlabel(this.$field),this.options.uneditable&&this.disable(),void this.model.$element.addClass("aui-ss-select").trigger("initialized",[this])))},disable:function(){this.$container.find(".drop-menu").addClass("hidden"),this.$container.find("input").attr("disabled","disabled"),this.$container.find("input").attr("aria-disabled","true"),this._super()},enable:function(){this.$container.find(".drop-menu").removeClass("hidden"),this.$container.find("input").removeAttr("disabled"),this.$container.find("input").removeAttr("aria-disabled"),this._super()},_setInitState:function(){this.options.editValue?(this._setEditingMode(),this.$field.val(this.options.editValue)):this.getSelectedDescriptor()?this.setSelection(this.getSelectedDescriptor()):(this._setEditingMode(),this.options.inputText&&this.$field.val(this.options.inputText))},_createSelectModel:function(){this.options.model?this.model=new this.options.model({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect}):this.model=new n({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect})},_createDropdownController:function(){this.dropdownController=a.createInlineLayers({alignment:t.LEFT,offsetTarget:this.$field,content:c(".aui-list",this.$container),setMaxHeightToWindow:this.options.setMaxHeightToWindow,minHeight:this.options.minHeight})},_createSuggestionsController:function(){this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options,this.model):new r(this.options,this.model)},_assignEventsToFurniture:function(){var e=this;this._super(),this.model.$element.bind("reset",function(){var t=e.getSelectedDescriptor();t&&e.setSelection(e.getSelectedDescriptor())}).bind("showSuggestions",function(t){e._handleDown(t)}).bind("hideSuggestions",function(){e.hideSuggestions()}).bind("set-selection-value",function(t,i){e._setDescriptorWithValue(i)})},setFieldWidth:function(e){this.$container.css({maxWidth:e}),this.$field.css({maxWidth:e})},_createListController:function(){var e=this;this.listController=new l({containerSelector:c(".aui-list",this.$container),groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,matchItemText:this.options.matchItemText,hasLinks:this.options.hasLinks,selectionHandler:function(t){var i=this.getFocused(),s=i.data("descriptor");return e.setSelection(s),e.$field.select(),t.preventDefault(),!1}})},getSelectedDescriptor:function(){return this.model.getDisplayableSelectedDescriptors()[0]},getDisplayVal:function(e){return e[this.options.itemAttrDisplayed||"label"]()},_getDefaultOptions:function(){return c.extend(!0,this._super(),{errorMessage:"The value {0} is invalid.",revertOnInvalid:!1,showDropdownButton:!0,showIcon:!0})},_createFurniture:function(e){var t=this.model.$element.attr("id");const i=this.model.$element.attr("aria-labelledby");this.model.$element.data("aui-ss",!0),this.$container=this._render("container",this.model.id);var s=this.model.$element.data("container-class");if(s&&this.$container.addClass(s),e){var n=this.model.$element.val()&&this.model.$element.val()[0];n=n||"",this.model.$element.replaceWith(this._render("disableSelectField",t,n))}else{var o=this.model.getPlaceholder();this.$field=this._render("field",this.model.id,o).appendTo(this.$container);var r=this._render("suggestionsContainer",this.model.id);this.suggestionsContainerId=r.attr("id"),this.$container.append(r),this.$field.attr("aria-controls",r.attr("id")),i&&this.$field.attr("aria-labelledby",i),this.$container.insertBefore(this.model.$element),this.$dropDownIcon=this._render("dropdownAndLoadingIcon",this._hasDropdownButton()).appendTo(this.$container),this.$errorMessage=this._render("errorMessage")}},getQueryVal:function(){return this.$container.hasClass("aui-ss-editing")?c.trim(this.$field.val()):""},_setSuggestions:function(e,t){e?(this._super(e,t),this.model.$element.trigger("suggestionsRefreshed",[this])):this.hideSuggestions()},_setEditingMode:function(){this.$container.addClass("aui-ss-editing").removeClass("aui-ss-has-entity-icon"),this.$field.css("paddingLeft")},_hasIcon:function(){var e,t=this.getSelectedDescriptor();if(t&&this.options.showIcon)return e=t.icon(),e&&"none"!==e},_setReadOnlyMode:function(){this.$container.removeClass("aui-ss-editing"),this._hasIcon()&&(this.$container.addClass("aui-ss-has-entity-icon"),h.isIE()&&h.majorVersion()>8&&this.$container.append(this.$field.detach()))},submitForm:function(){this.suggestionsVisible||(this.handleFreeInput(),c(this.$field[0].form).submit())},selectValue:function(e){this.listController.selectValue(e)},setSelection:function(e,t){t="undefined"==typeof t||t,"string"==typeof e&&(e=new d({value:e,label:e})),this.removeFreeInputVal(),this.$field.val(e.fieldText()||this.getDisplayVal(e)),this.$field.trigger("change"),this.model.setSelected(e,t)&&this.hideErrorMessage(),this._hasIcon()&&(this.$entityIcon&&this.$entityIcon.remove(),this.$entityIcon=this._render("entityIcon",e.icon()).appendTo(this.$container)),this._setReadOnlyMode(),this.hideSuggestions(),this.lastSelection=e,this.model.$element.trigger("selected",[e,this])},clear:function(){this.$field.val(""),this.hideSuggestions(),this.clearSelection()},clearSelection:function(){var e=this;e._setEditingMode(),e.model.setAllUnSelected(),e.model.$element.trigger("unselect",[this])},_handleServerSuggestions:function(e){this.cleanUpModel(),this._super(e)},cleanUpModel:function(){this.options.ajaxOptions.query&&this.model.clearUnSelected()},onEdit:function(){this.getSelectedDescriptor()&&this.clearSelection(),this._super(),this.model.$element.trigger("query")},handleFreeInput:function(e){e=e||c.trim(this.$field.val()),this.options.revertOnInvalid&&!this.model.getDescriptor(e)?this.setSelection(this.lastSelection||""):this.$container.hasClass("aui-ss-editing")&&(this._setDescriptorWithValue(e)?this.hideErrorMessage():this.options.submitInputVal||this.showErrorMessage(e))},_setDescriptorWithValue:function(e){var t=this.model.getDescriptor(e);return!!t&&(this.setSelection(t),!0)},_handleCharacterInput:function(e){this._super(e),this.$container.hasClass("aui-ss-editing")&&this.updateFreeInputVal()},_deactivate:function(){this.handleFreeInput(),this.hideSuggestions()},keys:{Return:function(e){this.submitForm(),e.preventDefault()},Tab:function(){this.acceptFocusedSuggestion()}},_events:{field:{focus:function(){var e=this;window.setTimeout(function(){e.$field.is(":focus")&&e.$field.select()},0)},click:function(){this._handleCharacterInput(!0)}}},_renders:{label:function(e,t){return c("<label />").attr("for",t).text(e).addClass("overlabel")},errorMessage:function(){return c('<div class="error" />')},entityIcon:function(e){var t=c('<img class="aui-ss-entity-icon" alt=""/>');return t.attr("src",e),t},field:function(e,t){var i=this._render("baseField").attr({class:"text aui-ss-field ajs-dirty-warning-exempt",id:e+"-field",type:"text"});return t&&i.attr("placeholder",t),i},disableSelectField:function(e,t){return c("<input type='text' class='text long-field' />").attr({value:t,name:e,id:e})},container:function(e){return c('<div class="aui-ss'+(this.options.ajaxOptions?" ajax-ss":"")+'" id="'+e+'-single-select">')},dropdownAndLoadingIcon:function(e){return c('<span class="icon aui-ss-icon noloading"><span>More</span></span>').toggleClass("drop-menu",!!e)}}})}),AJS.namespace("AJS.SingleSelect",null,require("jira/ajs/select/single-select"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/ScrollableSingleSelect.js' */
define("jira/ajs/select/scrollable-single-select",["jira/jquery/deferred","jira/ajs/select/single-select","jira/ajs/layer/inline-layer-factory","jira/ajs/list/pageable-list","jquery","underscore"],function(e,t,s,i,n,o){return t.extend({init:function(e){var t={newResultsThreshold:90};e=n.extend(!0,t,e),this._super(e),this.newResultsThreshold=e.newResultsThreshold},_assignEventsToFurniture:function(){var e,t=this;this._super(),this.dropdownController.$layer.on("scroll",function(){100*this.scrollTop/t.newResultsThreshold>this.scrollHeight-this.clientHeight&&(e&&!e.isResolved()||(e=t._fetchNewContent().done(function(){t.listController.isDisplayedAllItems()&&"function"==typeof t.scrolledToBottomHandler&&t.scrolledToBottomHandler()}).fail(function(s){t.listController.showPageRenderError(),t.model.$element.one("suggestionsRefreshed",function(){e=void 0})})))})},_createListController:function(){var e=this;this.listController=new i({containerSelector:n(".aui-list",this.$container),groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,pageSize:this.options.pageSize,pagingThreshold:this.options.pagingThreshold,matchItemText:this.options.matchItemText,hasLinks:this.options.hasLinks,selectionHandler:function(t){var s=this.getFocused(),i=s.data("descriptor");return e.setSelection(i),e.$field.select(),t.preventDefault(),!1}})},_fetchNewContent:function(){var t=e();return o.defer(function(){try{this.listController.addNextPage(),t.resolve()}catch(e){t.reject(e)}}.bind(this)),t}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/CheckboxMultiSelect.js' */
define("jira/ajs/select/checkbox-multi-select",["jira/util/formatter","jira/ajs/select/queryable-dropdown-select","jira/ajs/select/select-helper","jira/ajs/select/select-model","jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler","jira/ajs/list/list","jira/ajs/list/item-descriptor","jira/util/events","jira/util/events/types","jquery","underscore"],function(e,t,i,n,s,o,l,r,a,c,d){return t.extend({init:function(e){var t=this;c.extend(this,i),this._setOptions(e);var o=c(this.options.element);if(!o.attr("multiple"))throw"Cannot create CheckboxMultiSelect without multiple-select select element.";return this.options.element=c(this.options.element).hide(),this.model=new n({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect}),this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options,this.model):new s(this.options,this.model),this.options.element.bind("updateOptions",function(){t._setOptions(e)}).bind("selectOption",function(e,i){t.selectItem(i)}).bind("removeOption",function(e,i){t.unselectItem(i)}).bind("clear",function(){t.clear()}),this._createFurniture(),this._createDropdownController(),this._createListController(),this._assignEventsToFurniture(),this.render(),this.model.$element.addClass("check-list-select-select").trigger("initialized",[this]),r.trigger(a.CHECKBOXMULITSELECT_READY,[this.model.$element,this]),this},_createListController:function(){var e=this,t=null;this.suggestionsHandler.suggestionHighlighter&&(t=this.suggestionsHandler.suggestionHighlighter.bind(this.suggestionsHandler)),this.listController=new o({stallEventBind:this.options.stallEventBind,containerSelector:c(".aui-list",this.$container),scrollContainer:".aui-list-scroll",selectionEvent:"change",delegateTarget:this.$field,hasLinks:!1,itemSelector:".check-list-item",groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,matchingHighlighter:t,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,expandAllResults:this.options.expandAllResults,renderers:this._getCustomRenders(),selectionHandler:function(t){var i;return i="change"===t.type?c(t.target).closest(this.options.itemSelector):this.getFocused(),e._selectionHandler(i,t),!1}})},_createDropdownController:function(){this.dropdownController={show:c.noop,setWidth:c.noop,setPosition:c.noop,hide:c.noop}},_getCustomRenders:function(){return{suggestion:this._renders.suggestionItem,suggestionItemElement:this._renders.suggestionItemElement.bind(this),suggestionItemResolver:this._renders.suggestionItemResolver.bind(this)}},_handleCharacterInput:function(e){c.each(this.listController.$container.find(".invalid-item"),function(){c(this).tipsy("hide")}),c.each(this.listController.$container.find(".deprecated-item"),function(){c(this).tipsy("hide")}),this.requestSuggestions(e).done(d.bind(function(e){this._setSuggestions(e)},this)),this.$dropDownIcon.toggleClass("clear-field aui-iconfont-remove",!!this.getQueryVal()),this.$dropDownIcon.toggleClass("aui-iconfont-search",!this.getQueryVal()),this.listController.moveToFirst()},_getDefaultOptions:function(){return c.extend(!0,this._super(),{errorMessage:"The value {0} is invalid.",stallEventBind:!0})},_createFurniture:function(){var e=this.model.$element.attr("id");this.$container=this._render("container",e),this.$fieldContainer=this._render("fieldContainer").appendTo(this.$container),this.$fieldContainer.attr("data-no-focus-lock",!0),this.$field=this._render("field",e,this._getPlaceholderText()).appendTo(this.$fieldContainer);var t=this._render("suggestionsContainer",e);this.suggestionsContainerId=t.attr("id"),this.$container.append(t),this.$field.attr("aria-controls",t.attr("id")),this.$container.insertBefore(this.model.$element),this.$dropDownIcon=this._render("dropdownAndLoadingIcon").appendTo(this.$fieldContainer)},_getPlaceholderText:function(){var t=c.trim(this.model.$element.data("placeholder-text"));return t&&""!==t?t:"Search"},_assignEventsToFurniture:function(){var e=this;this._assignEvents("body",document),this.options.stallEventBind?window.setTimeout(function(){e._assignEvents("field",e.$field)._assignEvents("keys",e.$field)._assignEvents("container",e.$container)._assignEvents("fieldIcon",e.$dropDownIcon)},0):e._assignEvents("field",e.$field)._assignEvents("keys",e.$field)._assignEvents("fieldIcon",e.$dropDownIcon),this.listController.$container.delegate(".clear-all","click",function(t){t.preventDefault();var i=c(t.target);i.hasClass("disabled")||(i.parent().remove(),e.clear())}),this.listController.bind("itemFocus",this._onItemFocus.bind(this))},clear:function(){var e=this,t=this.model.getDisplayableSelectedDescriptors();this.model.setAllUnSelected(),0===this.$field.val().length?(this.$field.val(""),this.listController.$container.find(":checkbox").removeAttr("checked")):(this.clearQueryField(),this.listController.moveToFirst()),this._toggleClearButton(),c.each(t,function(){e.model.$element.trigger("unselect",[this,e,!0])})},clearQueryField:function(){this.$field.val(""),this._handleCharacterInput(!0),this.$field.focus()},unselectItem:function(e){this.model.setUnSelected(e),this.model.$element.trigger("unselect",[e,this,!1]),this.$container.find(".aui-list input[type=checkbox]").each(function(){this.value===e.value()&&(this.checked=!1)})},showLoading:function(){return this.$dropDownIcon.addClass("loading").removeClass("noloading"),this},hideLoading:function(){return this.$dropDownIcon.removeClass("loading").addClass("noloading"),this},_handleEscape:function(e){function t(e){27===e.keyCode&&(e.stopPropagation(),i.off("keyup",t))}var i=this.$field;"keydown"===e.type&&""!==i.val()&&(e.stopPropagation(),i.val(""),i.on("keyup",t),this._handleCharacterInput(!0))},selectItem:function(e,t){this.model.setSelected(e),t||this.model.$element.trigger("selected",[e,this]),this.$container.find(".aui-list input[type=checkbox]").each(function(){this.value===e.value()&&(this.checked=!0)})},_selectionHandler:function(e,t){var i=this;e.each(function(){var e=c.data(this,"descriptor"),n=c(this).find(":input");(i._directCheckboxClick||t.shiftKey)&&(e.properties.fromCheckbox=!0),i._setDescriptorSelection(e,n)}),this._toggleClearButton()},_toggleClearButton:function(){var e=this.model.getSelectedValues().length>0;this.listController.$container.find(".clear-all").attr("tabindex",e?null:-1).closest(".check-list-group-actions").toggleClass("hidden",!e)},_setDescriptorSelection:function(e,t){e.selected()?(this.unselectItem(e),t.removeAttr("checked")):(this.selectItem(e),t.attr("checked","checked"))},render:function(){this._handleCharacterInput(!0)},_events:{field:{keydown:function(e){function t(){""!==c.trim(i.$field.val())&&(i.$field.val(""),i._handleCharacterInput(!0))}if(13===e.keyCode){e.preventDefault();var i=this;this.model.$element.bind("unselect selected",t),setTimeout(function(){i.model.$element.unbind("unselect selected",t)},0)}}},container:{mousedown:function(e){function t(e){"mouseup"===e.type&&(i._directCheckboxClick=!0,setTimeout(function(){i._directCheckboxClick=!1},40)),c(document).unbind("mouseup mouseleave",t)}var i=this;c(e.target).is("input[type=checkbox]")&&c(document).unbind("mouseup mouseleave",t).bind("mouseup mouseleave",t),e.target!==this.$field.get(0)&&e.preventDefault()},click:function(){this.$field.get(0)!==document.activeElement&&this.$field.focus()}},fieldIcon:{click:function(e){c(e.target).hasClass("clear-field")&&this.clearQueryField()}}},_renders:{errorMessage:function(e){return c('<div class="error" />').attr("id",e+"-error")},fieldContainer:function(){return c("<div class='check-list-field-container' />")},field:function(e,t){return this._render("baseField").attr({placeholder:t,"aria-label":t,class:"aui-field check-list-field",id:e+"-input"})},disableSelectField:function(e){return c("<input type='text' class='long-field' />").attr({name:e,id:e})},container:function(e){return c('<div class="check-list-select" />').attr("id",e+"-multi-select")},suggestionItemElement:function(e,t){var i,n=c("<input type='checkbox' tabindex='0'/>").val(e.value()),s=c('<li class="check-list-item" role="option" />').attr("id",e.value()+"-"+this.options.id),o=c("<label class='item-label' />");e.styleClass()&&s.addClass(e.styleClass()),t?o.html(t):e.html()?o.html(e.html()):o.text(e.label()),e.selected()&&n.attr("checked","checked"),e.icon()&&"none"!==e.icon()&&(i=c("<img height='16' width='16' align='absmiddle' />").attr("src",e.icon()),e.fallbackIcon()&&"none"!==e.fallbackIcon()&&i.one("error",function(){this.src=e.fallbackIcon()}),o.prepend(i)),e.title()&&(o.attr("title",e.title()),o.attr("data-descriptor-title",e.title()),o.tipsy()),e.disabled()&&(s.addClass("disabled"),n.attr("disabled","disabled"));var l=e.meta()&&e.meta().isDeprecated;return l&&(s.addClass("disabled"),n.attr("disabled","disabled"),s.addClass("deprecated-disabled"),n.addClass("deprecated-disabled")),o.prepend(n),s.append(o),s},suggestionItemResolver:function(e,t){return this._render("suggestionItemElement",e,t)},suggestionItem:function(t,i){var n,s=this._render("suggestionItemResolver",t,i),o=s.find("label"),l=t.meta()&&t.meta().isDeprecated;if(t.invalid()||t.disabled()||l){s.addClass("has-invalid-item"),l?(o.append("<span class='deprecated-item'></span>"),n=o.find(".deprecated-item")):(o.append("<span class='invalid-item'></span>"),n=o.find(".invalid-item")),d.defer(function(){s.attr("original-title",s.attr("title")),s.removeAttr("title")});var r;t.title()?(r=t.title(),o.attr("original-title",r),o.removeAttr("title")):r=e.format("{0} \'\'{1}\'\' is not valid for your current Project(s) and/or Issue Type(s) selection","Value",t.label())}return s.data("descriptor",t)},dropdownAndLoadingIcon:function(){return c('<span class="icon-default aui-icon aui-icon-small aui-iconfont-search noloading"></span>')}},handleFreeInput:c.noop,hideSuggestions:c.noop,showErrorMessage:c.noop,_deactivate:c.noop})}),AJS.namespace("AJS.CheckboxMultiSelect",null,require("jira/ajs/select/checkbox-multi-select"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/CheckboxMultiSelectStatusLozenge.js' */
define("jira/ajs/select/checkbox-multi-select-status-lozenge",["jira/ajs/select/checkbox-multi-select","jquery"],function(e,t){return e.extend({_getCustomRenders:function(){var e=this._super();return e.suggestionItemStatusLozenge=this._renders.suggestionItemStatusLozenge,e},_renders:{suggestionItemStatusLozenge:function(e){var s=t("<input type='checkbox' tabindex='-1' />").val(e.value()),a=t('<li class="check-list-item" role="option" />').attr("id",e.value()+"-"+this.options.id),l=t("<label class='item-label' />");return e.styleClass()&&a.addClass(e.styleClass()),l.html(JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus:e.model().data("simple-status"),isSubtle:!0})),e.selected()&&s.attr("checked","checked"),e.title()&&l.attr("data-descriptor-title",e.title()),e.disabled()&&(a.addClass("disabled"),s.attr("disabled","disabled")),l.prepend(s),a.append(l),a},suggestionItemResolver:function(e,t){return e.model().data("simple-status")?this._render("suggestionItemStatusLozenge",e):this._render("suggestionItemElement",e,t)}}})}),AJS.namespace("AJS.CheckboxMultiSelectStatusLozenge",null,require("jira/ajs/select/checkbox-multi-select-status-lozenge"));;
;
/* module-key = 'jira.webresources:shifter', location = 'includes/jira/shifter/shifter.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Shifter&&(JIRA.Templates.Shifter={}),JIRA.Templates.Shifter.dialog=function(e,t){return'<div class="aui-blanket shifter-dialog-blanket" tabindex="0" aria-hidden="false"></div><div class="shifter-dialog" id="'+soy.$$escapeHtml(e.id)+'"><form class="aui ajs-dirty-warning-exempt"><div id="'+soy.$$escapeHtml(e.id)+'-suggestions" class="aui-list"></div></form><div class="hint-container overflow-ellipsis" title="'+soy.$$escapeHtml("Pressing period (.) opens this dialog box")+'">'+soy.$$filterNoAutoescape("Pressing period (\u003ckbd\u003e.\u003c/kbd\u003e) opens this dialog box")+"</div></div>"},JIRA.Templates.Shifter.groupHeading=function(e,t){return'<div class="shifter-group-heading"><h5>'+soy.$$escapeHtml(e.groupName)+"</h5>"+(e.groupContext?'<span class="shifter-group-context">'+soy.$$escapeHtml(e.groupContext)+"</span>":"")+"</div>"};;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/ShifterAnalytics.js' */
define("jira/shifter/shifter-analytics",["jira/util/strings","jira/util/data/meta","underscore","exports"],function(e,t,i,n){function o(e){return f.indexOf(e)>=0}function r(e){return g.indexOf(e)>=0}function s(t,i,n){return i=a(i),t=t.toLowerCase(),o(n)||r(t)?t:"edit-fields"!==n||e.startsWith(i,"customfield_")?e.hashCode(t):i}function a(e){return i.isObject(e)&&i.has(e,"url")?e.url:i.isString(e)?e.toLowerCase():""}function c(e,t){l.sendUIEvent({source:"dotDialog",actionSubject:"link",action:"clicked",actionSubjectId:"suggestion",attributes:t})}function u(){var i,n=t.get("user-locale");return e.contains(n,"_")&&(i=n.split("_")[0]),i||"en"}function d(){if(document.getElementById("global-issue-navigator-container")){if("/issues/"===window.location.pathname)return"issueNavigatorListViewScreen";if(window.location.pathname.startsWith("/browse/"))return"issueNavigatorDetailViewScreen"}return""}var l=require("jira/analytics/web-client"),f=["admin","issue-actions"],g=["done","start progress","ready for review","stop progress","reopen","approve","reject","reopen and start progress"];n.shortcutPressed=function(){l.sendUIEvent({source:"dotDialog",actionSubject:"keyboardShortcut",action:"pressed",actionSubjectId:"dotDialogKeyboardShortcut"})},n.show=function(){l.sendScreenEvent({name:"dotDialog",attributes:{action:"viewed",screen:d()}})},n.userTyping=function(){l.sendUIEvent({source:"dotDialog",actionSubject:"searchBox",action:"typed"})},n.selection=function(e,t,i,n){if(i&&t&&e){var o={group:i,selected:s(e,t,i),lang:u()};n&&(o.fieldType=n),c("selection",o)}},n.selection.privacyPolicySafeGroups=f,n.selection.privacyPolicySafeLabels=g});;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/ShifterSelect.js' */
define("jira/shifter/shifter-select",["jira/util/formatter","jira/ajs/select/queryable-dropdown-select","jira/ajs/list/list-with-messages","jira/ajs/list/message-descriptor","jquery","underscore","jira/featureflags/feature-manager"],function(e,t,o,i,n,r,s){return t.extend({init:function(t){r.extend(t,{dropdownController:{setWidth:n.noop,setPosition:n.noop,onhide:n.noop,hide:n.noop,show:n.noop}}),this._super(t),this.$field.attr("aria-controls",this.options.element.attr("id")),this.$field.attr("placeholder","Find Actions..."),this.$dropDownIcon.click(r.bind(this.clear,this)),this._handleCharacterInput()},onEdit:function(){this.toggleClearButton(),this._handleCharacterInput()},clear:function(){this.$field.val("").focus(),this.onEdit()},toggleClearButton:function(){this.$dropDownIcon.toggleClass("aui-iconfont-remove",!!this.$field.val())},showLoading:function(){this._super(),this.$dropDownIcon.removeClass("aui-iconfont-remove")},hideLoading:function(){this._super(),this.toggleClearButton()},_handleCharacterInput:function(){this._super(!0),0===this.getQueryVal().length&&this.listController.moveToFirst()},_createListController:function(){var t=this;this.listController=new o({containerSelector:this.options.element,groupSelector:"ul.aui-list-section",scrollContainer:".aui-list-scroll",matchingStrategy:this.options.matchingStrategy,maxResultsDisplayedPerGroup:this.options.maxResultsDisplayedPerGroup,eventTarget:this.$field,hasLinks:!1,renderers:{suggestionGroupHeading:this._renders.suggestionGroupHeading},selectionHandler:function(o){var r=n(o.currentTarget).data();if(r&&r.descriptor instanceof i)return!1;var a=this.getFocused().data("descriptor"),l=a.meta().groupIndex,u=t.options.groups[l],d=a.value(),c=a.label(),h=s.isFeatureEnabled("issue.details-dot-menu-dialog-analytics")?a.type():null;t.$dropDownIcon.removeClass("aui-iconfont-remove"),t.$field.val("Loading...").prop("disabled",!0),t.options.onSelection(u,d,c,h)}})},hideSuggestions:n.noop,_renders:{suggestionGroupHeading:function(e){return n(JIRA.Templates.Shifter.groupHeading({groupName:e.label(),groupContext:e.description()})).data("descriptor",e)},dropdownAndLoadingIcon:function(e){return n('<span class="icon noloading aui-icon aui-icon-small"><span>More</span></span>')}}})}),AJS.namespace("JIRA.ShifterComponent.ShifterSelect",null,require("jira/shifter/shifter-select"));;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/ShifterDialog.js' */
define("jira/shifter/shifter-dialog",["jira/jquery/deferred","jira/lib/class","jira/data/session-storage","jira/shifter/shifter-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor-factory","jira/shifter/shifter-analytics","jira/featureflags/feature-manager","jquery","underscore"],function(t,e,i,s,n,r,o,a,u,d){var h=50;return e.extend({BLUR_DELAY:h,init:function(t,e,i){this.id=t,this.groups=e,this.options=i,this.userKeyStrokes=-1,o.show(),this._render(),this._destroyOnBlur(),this._preventFocusOnNonInputElements(),u(document).on("mousedown.shifterdialog."+t,d.bind(this._destroyOnMousedownOutside,this))},focus:function(){this.$dialog&&this.$dialog.find("input").focus()},destroy:function(){var t=this.$dialog;t&&(t.remove(),this.$dialog=null,u(document).off("mousedown.shifterdialog."+this.id))},destroyed:function(){return!this.$dialog},saveLastQuery:function(t){i.setItem("JIRA.Shifter.lastQuery",t)},getLastQuery:function(){return i.getItem("JIRA.Shifter.lastQuery")},enterLoadingState:function(){var t=this.$dialog;t.addClass("loading-action"),t.find(".aui-list").slideUp(200)},_isKeyboardButton:function(t){return t>47&&t<58||32===t||13===t||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223},_render:function(){var t=JIRA.Templates.Shifter.dialog({id:this.id}),e=this.$dialog=u(t).appendTo("body"),i=this.shifterSelect=new s({id:this.id,element:e.find(".aui-list"),groups:this.groups,suggestionsHandler:this._makeSuggestionsHandler(),onSelection:d.bind(this._onSelection,this),maxResultsDisplayedPerGroup:this.options.maxResultsDisplayedPerGroup});this.getLastQuery()&&(i.$field.val(this.getLastQuery()).select(),i.onEdit()),i.$field.on("keyup",d.bind(function(t){var e=t.which;e===u.ui.keyCode.ESCAPE&&(t.stopPropagation(),this.destroy()),this.userKeyStrokes<1&&this._isKeyboardButton(e)&&(this.userKeyStrokes++,1===this.userKeyStrokes&&o.userTyping())},this)),AJS.currentLayerItem&&AJS.currentLayerItem.hide&&AJS.currentLayerItem.hide(),this._closeDropdownsIfNeeded()},_closeDropdownsIfNeeded:function(){u(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")},_destroyOnBlur:function(){this.$dialog.find("input").blur(d.bind(function(){setTimeout(d.bind(function(){this.$dialog&&!u.contains(this.$dialog[0],document.activeElement)&&this.destroy()},this),this.BLUR_DELAY)},this))},_destroyOnMousedownOutside:function(t){0===this.$dialog.find(t.target).length&&t.target!==this.$dialog&&this.destroy()},_preventFocusOnNonInputElements:function(){var t=this.$dialog.find("input");this.$dialog.mousedown(function(e){u.inArray(e.target,t)===-1&&e.preventDefault()})},_makeSuggestionsHandler:function(){var i=this.groups;return e.extend({execute:function(e){var s=[],o=t(),a=i.length;return d.map(i,function(t,i){var u=t.getSuggestions(e);return u.done(function(e){d.isArray(e)&&(s.push(new n({label:t.name,description:t.context,weight:t.weight,items:d.map(e,function(t){return r.createItemDescriptor(t,i)})})),s.sort(function(t,e){return t.weight()-e.weight()}))}).always(function(){a--,0===a&&o.resolve(s,e)})}),o}})},_onSelection:function(t,e,i,s){o.selection(i,e,t.id,s),this.saveLastQuery(i);var n=t.onSelection(e,i);n&&d.isFunction(n.always)?(this.enterLoadingState(),n.always(d.bind(this.destroy,this))):this.destroy()}})}),AJS.namespace("JIRA.ShifterComponent.ShifterDialog",null,require("jira/shifter/shifter-dialog"));;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/ShifterController.js' */
define("jira/shifter/shifter-controller",["jira/lib/class","jira/shifter/shifter-dialog","jira/shifter/shifter-analytics","jira/featureflags/feature-manager","underscore"],function(e,i,t,r,s){return e.extend({MAX_RESULTS_PER_GROUP:5,init:function(e){this.id=e,this.groupFactories=[]},register:function(e){return this.groupFactories.push(e),e},unregister:function(e){return this.groupFactories=s.without(this.groupFactories,e),e},show:function(){var e=window.location.pathname,n=window.location.search,o=e.indexOf("/RapidBoard")!==-1&&n.indexOf("view")===-1,a=e.indexOf("/board")!==-1,u=!1;if(!(o&&(u=n.indexOf("selectedIssue")!==-1)||a&&(u=n.indexOf("issue-key")!==-1||n.indexOf("selectedIssue")!==-1))){var c=r.getFlagValue("nin.global-scope_aqec8")&&e.indexOf("/issues/")!==-1&&window.__SPA__===!0;if(!c){var d="(browse)/([^/]+-[0-9]+)",f="/jira/servicedesk/(.+)/([^/]+-[0-9]+)",h="projects/.*/issues",l=s.chain(this.groupFactories).map(function(e){return e()}).compact().flatten().value(),g=l.find(function(e){return"edit-fields"===e.id});if(g||!(e.match(d)||e.match(f)||e.match(h)||n.indexOf("issue-key")!==-1||n.indexOf("selectedIssue")!==-1)){if(t.shortcutPressed(),!this.dialog||this.dialog.destroyed()){var p=s.chain(this.groupFactories).map(function(e){return e()}).compact().flatten().value().sort(function(e,i){return e.weight-i.weight});this.dialog=new i(this.id,p,{maxResultsDisplayedPerGroup:this.MAX_RESULTS_PER_GROUP})}this.dialog.focus()}}}},hide:function(){this.dialog&&this.dialog.destroy()}})}),AJS.namespace("JIRA.ShifterComponent.ShifterController",window,require("jira/shifter/shifter-controller"));;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/shifter.js' */
!function(){var r=null;define("jira/shifter",["jira/shifter/shifter-controller"],function(e){return null===r&&(r=new e("shifter-dialog",(!0))),r})}(),AJS.namespace("JIRA.Shifter",null,require("jira/shifter"));;
;
/* module-key = 'jira.webresources:inline-attach', location = '/includes/ajs/attachment/InlineAttach.js' */
define("jira/attachment/inline-attach",["jira/util/formatter","jira/lib/class","jira/xsrf","jira/util/navigator","jquery","wrm/context-path"],function(t,e,r,n,i,o){var a=e.extend({init:function(t){var e=i(t);a.AjaxPresenter.isSupported(e)?new a.AjaxPresenter(e):new a.FormPresenter(e)}});return i.extend(a,{MAX_UPLOADS:2,DISPLAY_WAIT:600,rescope:function(t,e){return t?e?i.proxy(t,e):t:i.noop},copyArrayLike:function(t){return i.makeArray(t)},Renderers:{container:function(){return i("<div class='field-group'/>")}}}),a.Presenter=e.extend({init:function(){this.cancelled=!1,this.running=[],this.waiting=[]},_addUpload:function(t){return this.cancelled||(this.running.length>=a.MAX_UPLOADS?this.waiting.push(t):(this.running.push(t),t.upload())),this.running.length>0},_finishUpload:function(t){if(!this.cancelled&&(a.Presenter.removeFromArray(this.waiting,t),a.Presenter.removeFromArray(this.running,t)&&this.waiting.length>0)){var e=this.waiting.shift();this.running.push(e),e.upload()}return this.running.length>0},_cancel:function(){this.cancelled=!0;var t,e=a.copyArrayLike(this.waiting);for(t=0;t<e.length;t++)e[t].abort();var r=a.copyArrayLike(this.running);for(t=0;t<r.length;t++)r[t].abort();this.waiting=[],this.running=[]}}),i.extend(a.Presenter,{removeFromArray:function(t,e){var r=i.inArray(e,t);return r>=0?t.splice(r,1):null}}),a.FormPresenter=a.Presenter.extend({init:function(t){this._super(),this.form=new a.Form(new a.FileInput(t,(!1))),this.form.fileSelector.onChange(i.proxy(this._attach,this)),this.form.onCancel(i.proxy(this._cancel,this))},_attach:function(t){if(this.form.clearErrors(),!this.cancelled){var e=this.form,r=this._createSubmitData(),n=e.cloneFileInput();e.fileSelector.clear();var i=e.addStaticProgress(t),o=new a.Timer(function(){!this.cancelled&&i.show()},this),s=new a.FormUpload({$input:n,url:a.FormPresenter.DEFAULT_URL,params:r,scope:this,before:function(){!this.cancelled&&i.start()},success:function(r){this.cancelled||(r.id&&r.name?e.addTemporaryFileCheckbox(r.id,r.name,i):r.errorMsg?e.addErrorWithFileName(r.errorMsg,t,i):e.addError(a.Text.tr("upload.error.bad.response",t),i))},error:function(r){this.cancelled||(r.indexOf("SecurityTokenMissing")>=0?e.addError(a.Text.tr("upload.xsrf.timeout",t),i):e.addError(a.Text.tr("upload.error.unknown",t),i))},after:function(){o.cancel(),i.remove(),this.cancelled||this._finishUpload(s)||e.enable()}});i.onCancel(function(){s.abort()}),this._addUpload(s)&&(o.schedule(a.DISPLAY_WAIT),e.disable()),e.fileSelector.focus()}},_cancel:function(){this._super(),this.form.enable()},_createSubmitData:function(){var t={atl_token:this.form.getAtlToken(),formToken:this.form.getFormToken()};if(this.form.issueId)t.id=this.form.issueId;else{if(!this.form.projectId)throw"Unable to find either an issueId or projectId to submit the attachment to.";t.create=!0,t.projectId=this.form.projectId}return t}}),a.FormPresenter.DEFAULT_URL=o()+"/secure/AttachTemporaryFile.jspa?decorator=none",a.AjaxPresenter=a.Presenter.extend({init:function(t){this._super(),this.form=new a.Form(new a.FileInput(t,(!0))),this.form.fileSelector.onChange(i.proxy(this._attach,this)),this.form.onCancel(i.proxy(this._cancel,this))},_attach:function(t){this.form.clearErrors(),this.cancelled||(t&&t.length>0&&(t=this._checkAndFilterFiles(t),t&&this._uploadFiles(t)),this.form.fileSelector.clear().focus())},_checkAndFilterFiles:function(t){if(t.length>a.AjaxPresenter.MAX_SELECTED_FILES)return this.form.addError(a.Text.tr("upload.error.too.many.files",t.length,a.AjaxPresenter.MAX_SELECTED_FILES)),null;for(var e=this.form.maxSize,r=[],n=0;n<t.length;n++)try{var i=t[n];if(0===i.size)this.form.addError(a.Text.tr("upload.empty.file",i.name));else if(e>0&&i.size>e){var o=a.Text.fileSize(e,i.size);this.form.addError(a.Text.tr("upload.too.big",i.name,o[1],o[0]))}else r.push({name:i.name,size:i.size,file:i})}catch(t){this.form.addError(a.AjaxUpload.getClientErrorMessage(t,i))}return 0===r.length?null:r},_createSubmitData:function(){var t={atl_token:this.form.getAtlToken(),formToken:this.form.getFormToken()};if(this.form.issueId)t.issueId=this.form.issueId;else{if(!this.form.projectId)throw"Unable to find either an issueId or projectId to submit the attachment to.";t.projectId=this.form.projectId}return t},_uploadFiles:function(t){var e=this.form,r=this._createSubmitData(),n=this,o=!1;i.each(t,function(){var t=e.addProgress(this),s=this,l=new a.Timer(function(){n.cancelled||t.show()}),u=new a.AjaxUpload({file:s.file,params:i.extend({filename:s.name,size:s.size},r),scope:n,url:a.AjaxPresenter.DEFAULT_URL,before:function(){!this.cancelled&&t.start()},progress:function(e){!this.cancelled&&t.update(e)},success:function(r,n){this.cancelled||(201===n?void 0!==r.id&&void 0!==r.name?e.addTemporaryFileCheckbox(r.id,r.name,t,s.file):e.addError(a.Text.tr("upload.error.bad.response",s.name),t):(r.token&&e.setAtlToken(r.token),r.errorMessage?e.addErrorWithFileName(r.errorMessage,s.name,t):e.addError(this._getErrorFromStatus(n,s),t)))},error:function(r,n){if(!this.cancelled)if(n<0)e.addError(r,t);else{var i=this._getErrorFromStatus(n,s);i?e.addError(i,t):e.addError(a.Text.tr("upload.error.unknown",s.name),t)}},after:function(){l.cancel(),t.finish().remove(),this.cancelled||this._finishUpload(u)||e.enable()}});t.onCancel(function(){u.abort()}),n._addUpload(u)&&(o=!0,l.schedule(a.DISPLAY_WAIT))}),o&&this.form.disable()},_getErrorFromStatus:function(t,e){var r;return r=0===t?a.Text.tr("upload.error.server.no.reply",e.name):400===t?a.Text.tr("upload.error.badrequest",e.name):401===t?a.Text.tr("upload.error.auth",e.name):a.Text.tr("upload.error.unknown.status",e.name,t)},_cancel:function(){this._super(),this.form.enable()}}),i.extend(a.AjaxPresenter,{DEFAULT_URL:contextPath+"/rest/internal/2/AttachTemporaryFile",MAX_SELECTED_FILES:100,isSupported:function(t){return!!(t&&t[0]&&t[0].files)&&a.AjaxUpload.isSupported()}}),a.FileInput=e.extend({init:function(t,e){this.$element=t,this.$container=t.parent(),e&&void 0!==this.$element[0].files?(this.$element.attr("multiple","multiple"),this.multiple=!0):this.multiple=!1},clear:function(){return this.$element.val(""),this},getFiles:function(){return this.$element[0].files},hasFiles:function(){return this.getFiles().length>0},onChange:function(t){var e=this;return this.$element.change(function(){e.multiple?t.call(e,this.files):t.call(e,e.getFileName())}),this},focus:function(){if(this._isIE()){var t=this.$element;setTimeout(function(){t.focus()},0)}else this.$element.focus();return this},cloneInput:function(){var t=this.$element;return t.replaceWith(this.$element=t.clone(!0)),t.unbind(),t},getFileName:function(){var t=/^c:\\fakepath\\(?!$)/i;return function(){var e=this.$element.val();return e=e.replace(t,""),this._isIE()&&e.indexOf("\\")>=0&&(e=e.substring(e.lastIndexOf("\\")+1)),e}}(),_isIE:function(){return n.isIE()&&n.majorVersion()<11},before:function(t){t&&(t.$element&&(t=t.$element),this.$container.before(t))}}),function(){var t={showPercentage:!1,height:"2px"},r=0;a.ProgressBar=e.extend({init:function(){var e=this.$element=this._renderers.container();this.$progress=this._renderers.progress().appendTo(e),this.$progress.progressBar(0,t),this.hidden=!0,this.old=0},value:function(e){e>100?e=100:e<0&&(e=0),this.hidden&&(this.$progress.show(),this.hidden=!1),this.old!==e&&(this.$progress.progressBar(e,t),e>=100&&this.$progress.fadeOut(),this.old=e)},_renderers:{container:function(){return i("<div>").addClass("file-progress")},progress:function(){return i("<div>").attr("id","upload-progress-"+r++).hide()}}})}(),a.UploadProgress=e.extend({init:function(t){var e=this.$element=a.Renderers.container().hide(),r=this.progress=new a.ProgressBar,n=this._renders.content(t.name);this.$content=n.$content,this.$cancel=n.$cancel,e.append(n.$element).append(r.$element),this.total=t.size,this.current=0,this.name=t.name,this.timer=new a.Timer(this._update,this),this.rateNumerator=0,this.rateDenominator=0,this._title(a.Text.tr("upload.progress.title.waiting"))},start:function(){return this.started=this._now(),this.startedSize=0,this},update:function(t){return this.timer.cancel(),this._update(t)},_update:function(t){var e=this._now();void 0===t?t=this.current:t!==this.current&&(this.lastUpdate=e,this.current=t);var r,n,i=a.Text,o=Math.min(100,Math.round(t/this.total*100)),s=i.currentOutOfTotalSize(t,this.total);this.progress.value(o);var l=(e-this.started)/1e3;l>=2&&(this.startedSize>0&&this._addRate((t-this.startedSize)/l),this.started=e,this.startedSize=t);var u=this._calcRate();if(t>=a.UploadProgress.DATA_MIN&&u>0){var h=Math.max(1,(this.total-t)/u);r=i.rate(u),n=i.time(h)}return e-this.lastUpdate>=a.UploadProgress.STALLED_TIMEOUT?(this._content(i.tr("upload.file.stalled",this.name)),r?this._title(i.tr("upload.progress.title.known.stalled",r,s)):this._title(i.tr("upload.progress.title.unknown.stalled",s))):r?(this._title(i.tr("upload.progress.title.known",r,s,n)),this._content(i.tr("upload.file.remaining",this.name,n))):(this._title(s),this._content(this.name)),t<this.total&&this.timer.schedule(a.UploadProgress.UPLOAD_REFRESH),this},finish:function(){return this.progress.value(100),this.timer.cancel(),this},onCancel:function(t){var e=this;return this.$cancel.click(function(r){r.preventDefault(),t.call(e)}),this},remove:function(){return this.$element.remove(),this},hide:function(){return this.$element.hide(),this},show:function(){return this.$element.fadeIn(),this},_title:function(t){return this.$element.attr("title",t),this},_content:function(t){return this.$content.text(t),this},_addRate:function(t){var e=a.UploadProgress.WEIGHT;this.rateNumerator=this.rateNumerator*e+t,this.rateDenominator=this.rateDenominator*e+1},_calcRate:function(){if(0===this.rateDenominator)return 0;var t=this.rateNumerator/this.rateDenominator;return Math.abs(t)<.005?0:t},_now:function(){return(new Date).getTime()},_renders:{content:function(t){var e=a.Text.tr("upload.file.waiting",t),r=i("<div class='loading file' />"),n=i("<span />").text(e),o=i("<a href='#'/>").text(a.Text.tr("upload.cancel"));return r.append(n).append(" ").append(o),{$element:r,$content:n,$cancel:o}}}}),i.extend(a.UploadProgress,{STALLED_TIMEOUT:1e4,UPLOAD_REFRESH:2e3,DATA_MIN:20480,WEIGHT:.7}),a.UnknownProgress=e.extend({init:function(t){var e=this._renders.content(t);this.$element=e.$element,this.$cancel=e.$cancel,this.$content=e.$content,this.fileName=t,this._title(a.Text.tr("upload.progress.title.waiting"))},remove:function(){return this.$element.remove(),this},hide:function(){return this.$element.hide(),this},show:function(){return this.$element.fadeIn(),this},start:function(){return this._title(a.Text.tr("upload.progress.title.running")),this._content(this.fileName),this},onCancel:function(t){var e=this;return this.$cancel.click(function(r){r.preventDefault(),t.call(e)}),this},_title:function(t){return this.$element.attr("title",t),this},_content:function(t){return this.$content.text(t),this},_renders:{content:function(t){var e=a.Text.tr("upload.file.waiting",t),r=i("<a href='#'/>").text(a.Text.tr("upload.cancel")),n=i("<div class='loading file' />"),o=i("<span />").text(e);n.append(o).append(" ").append(r);var s=a.Renderers.container().append(n);return{$element:s,$cancel:r,$content:o}}}}),a.Form=e.extend({init:function(t){if(this.fileSelector=t,this.$form=t.$element.closest("form"),this.maxSize=parseInt(this.$form.find("#attach-max-size").text()||i("#attach-max-size").text()),isNaN(this.maxSize))throw"Unable to find maximum upload size on form.";var e=!1,r=parseInt(this.$form.find(":input[name=id]").val());if(isNaN(r)||(e=!0,this.issueId=r),r=parseInt(this.$form.find(":input[name=pid]").val()),isNaN(r)||(e=!0,this.projectId=r),!e)throw"Unable to find either an issueId or projectId to submit the attachment to."},getAtlToken:function(){var t=this.$form.find("input[name='atl_token']");return t.length>0?t.val():atl_token()},setAtlToken:function(t){var e=this.$form.find("input[name='atl_token']");return e.length>0?e.val(t):r.updateTokenOnPage(t),this},getFormToken:function(){var t=this.$form.find("input[name='formToken']");return t.length>0?t.val():null},disable:function(){return this._getFormSubmits().attr("disabled","disabled"),this},enable:function(){return this._getFormSubmits().removeAttr("disabled"),this},addProgress:function(t){var e=new a.UploadProgress(t);return this._addElement(e.$element),e},addStaticProgress:function(t){var e=new a.UnknownProgress(t);return this._addElement(e.$element),e},addTemporaryFileCheckbox:function(t,e,r,n){var o=this.addLocalThumbnailImage(e,n),s=a.Renderers.container(),l=i("<label>").attr("for","filetoconvert-"+t).text(e),u=i("<input type='checkbox' class='checkbox' name='filetoconvert' checked='checked'>").attr({id:"filetoconvert-"+t,value:t,title:a.Text.tr("upload.checkbox.title")});return s.append(u).append(l),o&&s.append(i("<br/>")).append(o),s.hide(),this._replaceElement(s,r),this},addLocalThumbnailImage:function(t,e){var r=null;if(window.URL=window.webkitURL||window.URL,e&&window.URL&&window.URL.createObjectURL){var n=/image.*/;if(e.type.match(n)){var o=this,s=t+" - "+a.Text.fileSize(e.size)+" - "+e.type,l=document.createElement("img");l.title=s,l.alt=s,l.onload=function(t){var e=o.getAspectRatio(100,100,l.width,l.height);l.width=Math.round(l.width/e),l.height=Math.round(l.height/e),r.show(),window.URL.revokeObjectURL(l.src)},l.src=window.URL.createObjectURL(e),r=i(l).hide()}}return r},getAspectRatio:function(t,e,r,n){return r>t?Math.round(r/t):n>e?Math.round(n/e):1},addErrorWithFileName:function(t,e,r){return t.indexOf(e)===-1&&(t=a.Text.tr("upload.error.server",e,t)),this.addError(t,r)},addError:function(t,e){var r=a.Renderers.container();return r.addClass("error").append(i("<div>").text(t)).hide(),this._replaceElement(r,e),r},clearErrors:function(){return this.$form.find("div.error").remove(),this},cloneFileInput:function(){return this.fileSelector.cloneInput()},onCancel:function(t){var e=this.$form.find("a.cancel");return e.click(i.proxy(t,this)),this},_getFormSubmits:function(){return this.$form.find("input[type=submit]")},_addElement:function(t){this.fileSelector.before(t)},_replaceElement:function(t,e){e&&e.$element?e.$element.replaceWith(t):this._addElement(t),t.fadeIn()}}),a.FormUpload=e.extend({init:function(t){var e=t.scope||null,r=a.rescope;this.$input=t.$input,this.url=t.url,this.params=t.params||{},this.successcb=r(t.success,e),this.errorcb=r(t.error,e),this.before=r(t.before,e),this.after=r(t.after,e),this.abortcb=r(t.abort,e),this.aborted=!1,this.$form=null,this.xhr=null},upload:function(){if(!this.aborted){var t=this.url,e=i.param(this.params);e&&(t=t+"?"+e);var r=this.$form=this._renders.form(t),n=this;this._addToBody(r.append(this.$input)),r.ajaxForm({dataType:"json",data:this.params,timeout:0,beforeSend:function(t){n.xhr=t},beforeSubmit:function(){n.before()},error:function(t){if(n.aborted)n.abortcb();else{var e=t&&t.responseText||"";n.errorcb(e)}},success:function(t){n.successcb(t||{})},complete:function(){n.$form&&(n.$form.remove(),n.$form=null),n.after()}}),r.submit()}},abort:function(){this.aborted||(this.aborted=!0,this.xhr?(this.xhr.abort(),this.xhr=null):(this.abortcb(),this.after()))},_addToBody:function(t){i("body").append(t)},_renders:{form:function(t){return i("<form method='post' enctype='multipart/form-data'/>").attr("action",t).hide()}}}),a.AjaxUpload=e.extend({init:function(t){var e=t.scope||null,r=a.rescope;this.file=t.file,this.url=t.url,this.params=t.params||{},this.beforecb=r(t.before,e),this.progresscb=r(t.progress,e),this.errorcb=r(t.error,e),this.successcb=r(t.success,e),this.abortcb=r(t.abort,e),this.finalcb=r(t.after,e),this.aborted=!1},upload:function(){if(!this.aborted&&!this.xhr){var t=this.xhr=a.AjaxUpload.xhr();t.upload.onprogress=i.proxy(this._upload,this),t.onreadystatechange=i.proxy(this._statechange,this);var e=this.url,r=i.param(this.params);r&&(e=e+"?"+r),this.beforecb();try{t.open("POST",e,!0),t.setRequestHeader("Content-Type",this.file.type||"application/octet-stream"),t.send(this.file)}catch(t){this._clienterror(t,this.file)}}},abort:function(){this.aborted||(this.aborted=!0,this.xhr?this.xhr.abort():(this.abortcb(),this.finalcb()))},_statechange:function(){if(4===this.xhr.readyState){if(this.aborted)this.abortcb();else{try{this.successcb(JSON.parse(this.xhr.responseText),this.xhr.status,this.xhr)}catch(t){this.errorcb(this.xhr.responseText,this.xhr.status,this.xhr)}this.xhr.upload.onprogress=this.xhr.statechange=null}this.finalcb()}},_clienterror:function(t,e){this.errorcb(a.AjaxUpload.getClientErrorMessage(t,e),-1,this.xhr),this.finalcb()},_upload:function(t){t.lengthComputable&&this.progresscb(t.loaded)}}),i.extend(a.AjaxUpload,{isSupported:function(){return a.AjaxUpload._fileApiSupport(window)&&a.AjaxUpload._xhrSupport()},xhr:function(){var t=a.AjaxUpload._xhrJquery();return t||(t=a.AjaxUpload._xhrDirect),a.AjaxUpload.xhr=t,t()},getClientErrorMessage:function(t,e){var r;try{r=e.name}catch(t){r="<unknown>"}return"NS_ERROR_FILE_ACCESS_DENIED"===t.name?a.Text.tr("upload.error.no.access",r):"NS_ERROR_FILE_NOT_FOUND"===t.name||"NS_ERROR_FILE_TARGET_DOES_NOT_EXIST"===t.name?a.Text.tr("upload.error.does.not.exist",r):a.Text.tr("upload.error.client.unknown",r,t.message||t)},_xhrJquery:function(){var t=i.ajaxSettings;return t&&t.xhr||null},_xhrDirect:function(){try{return new XMLHttpRequest}catch(t){return null}},_xhrSupport:function(){try{var t=a.AjaxUpload.xhr();if(t&&t.upload)return!0}catch(t){}return!1},_fileApiSupport:function(t){return t.File&&t.FileList&&(!n.isMozilla()||t.FileReader)}}),a.Timer=e.extend({init:function(t,e){this.callback=a.rescope(t,e||this),this._callback=i.proxy(this._callback,this),this.timeoutId=null},cancel:function(){return null!==this.timeoutId&&(this._endTimeout(this.timeoutId),this.timeoutId=null),this},schedule:function(t){return this.cancel(),this.timeoutId=this._startTimeout(this._callback,t),this},_callback:function(){this.timeoutId=null,this.callback()},_startTimeout:function(t,e){return window.setTimeout(t,e)},_endTimeout:function(t){window.clearTimeout(t)}}),a.Text=function(){var e=1024,r=1024*e,n=1024*r,i=Math.floor(.995*e),o=Math.floor(.995*r),s=Math.floor(.995*n);return{"upload.empty.file":"Cannot attach empty file {0}.","upload.too.big":"{0} is too large to attach. Attachment is {1} but the largest allowed attachment is {2}.","upload.error.bad.response":"Cannot attach file {0}: Unexpected server response.","upload.error.unknown.status":"Cannot attach file {0}: Unknown server error ({1}).","upload.error.auth":"Cannot attach file {0}: You do not have permission to attach a file to the issue.","upload.error.badrequest":"Cannot attach file {0}. Browser made bad request to the server.","upload.error.server":"Cannot attach file {0}: {1}","upload.cancel":"Cancel","upload.file.remaining":"{0} - {1} left.","upload.file.waiting":"{0} - waiting.","upload.file.stalled":"{0} - stalled.","upload.checkbox.title":"Clear check box to prevent file being attached","upload.xsrf.timeout":"Cannot attach file {0}: Your session has timed out or you were logged out. Please save your work and reload the page.","upload.error.unknown":"Cannot attach file {0}: Unknown server error.","upload.progress.title.waiting":"Waiting for other uploads to complete.","upload.progress.title.running":"Uploading.","upload.progress.title.unknown.stalled":"{0}, stalled.","upload.progress.title.known":"{0} - {1}, {2} left.","upload.progress.title.known.stalled":"{0} - {1}, stalled.","upload.kilobyte":"{0} kB","upload.kilobyte.part":"{0}/{1} kB","upload.megabyte":"{0} MB","upload.megabyte.part":"{0}/{1} MB","upload.gigabyte":"{0} GB","upload.gigabyte.part":"{0}/{1} GB","upload.seconds":"{0} sec","upload.minutes":"{0} min","upload.hours":"{0} hr","upload.hours.minutes":"{0} hr {1} min","upload.bytes.per.second":"{0} B/sec","upload.kilobytes.per.second":"{0} kB/sec","upload.megabytes.per.second":"{0} MB/sec","upload.error.no.access":"Browser does not have permission to access {0}.","upload.error.does.not.exist":"{0} does not exist.","upload.error.client.unknown":"An unknown error occured on the browser while trying to attach {0}: {1}.","upload.error.too.many.files":"You are trying to attach {0} files. Only {1} files can be attached at a time.","upload.error.server.no.reply":"Cannot attach file {0}: Unable to communicate with Jira.","upload.error.unsupported.browser":"You are using browser that does not support file upload.",tr:function(e){if(0!==arguments.length){if(1===arguments.length)return this[e]||e;if(this[e]){var r=a.copyArrayLike(arguments);return r[0]=this[e],t.format.apply(AJS,r)}return e}},fileSize:function(){if(0!==arguments.length){var t,n=a.Text._classifySize(arguments[0]);if(t=n.unit===e?"upload.kilobyte":n.unit===r?"upload.megabyte":"upload.gigabyte",1===arguments.length)return this.tr(t,n.convert(arguments[0]));for(var i=new Array(arguments.length),o=0;o<arguments.length;o++)i[o]=this.tr(t,n.convert(arguments[o]));return i}},currentOutOfTotalSize:function(t,n){var i,o=this._classifySize(n);return i=o.unit===e?"upload.kilobyte.part":o.unit===r?"upload.megabyte.part":"upload.gigabyte.part",this.tr(i,o.convert(t),o.convert(n))},_classifySize:function(t){var i;return i=t<=o?e:t<=s?r:n,{unit:i,convert:function(t){return a.Text._toDisplay(t/i)}}},time:function(t){if(t<60)return this.tr("upload.seconds",Math.floor(t));var e=t/60;if(e<60)return this.tr("upload.minutes",Math.floor(e));var r=Math.floor(e/60);return e=Math.floor(e%60),e>0?this.tr("upload.hours.minutes",r,e):this.tr("upload.hours",r)},rate:function(t){return t<=i?this.tr("upload.bytes.per.second",a.Text._toDisplay(t)):t<=o?this.tr("upload.kilobytes.per.second",a.Text._toDisplay(t/e)):this.tr("upload.megabytes.per.second",a.Text._toDisplay(t/r))},_toDisplay:function(t){return t<.005?"0":(Math.round(100*t)/100).toFixed(2)}}}(),a}),AJS.namespace("AJS.InlineAttach",null,require("jira/attachment/inline-attach"));;
;
/* module-key = 'jira.webresources:inline-attach', location = '/includes/jquery/plugins/attachment/jquery.inlineAttach.js' */
define("jira/jquery/plugins/attachment/inline-attach",["jira/attachment/inline-attach","jquery"],function(n,t){t.fn.inlineAttach=function(){var t=[];return this.each(function(){t.push(new n(this))}),t}}),function(){require("jira/jquery/plugins/attachment/inline-attach")}();;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/FormDialog.js' */
define("jira/dialog/form-dialog",["jira/util/formatter","jira/dialog/dialog","jira/flag","jira/message","jira/ajs/ajax/smart-ajax","jira/focus/set-focus","jira/util/browser","jira/util/events","jira/util/navigator","jira/skate","jquery","jira/libs/parse-uri","jira/featureflags/feature-manager","jira/util/events"],function(t,e,i,n,o,s,r,a,u,l,c,h,d,g){return e.extend({defineResources:function(){this._super.apply(this,arguments),this.isIssueDialog()&&this.requireContext("jira.edit.issue"),this.shouldLoadHeritageFormDialogContext()&&this.requireContext("jira.heritage.form.dialog")},_getDefaultOptions:function(){return c.extend(this._super(),{autoClose:!1,targetUrl:"",handleRedirect:!1,onUnSuccessfulSubmit:function(){},onSuccessfulSubmit:function(){},onDialogFinished:function(){var t=this._getTargetUrlValue();this.hide(),t?(a.trigger("page-unload.location-change.from-dialog",[this.$popup]),window.location.href=t):(a.trigger("page-unload.refresh.from-dialog",[this.$popup]),r.reloadViaWindowLocation())},submitAjaxOptions:{type:"post",data:{inline:!0,decorator:"dialog"},dataType:"html"},isIssueDialog:!1,shouldLoadHeritageFormDialogContext:!1})},_getFormDataAsObject:function(){var t={};return c(this.$form.serializeArray()).each(function(){var e=t[this.name];e?c.isArray(e)?e.push(this.value):e=[e,this.value]:e=this.value,t[this.name]=e}),t},_getRelativePath:function(){var t=this._getRequestOptions();return h(t.url).directory},_getPath:function(t){var e=this._getRelativePath();return 0===t.indexOf(e)?t:e+t},_submitForm:function(t){this.cancelled=!1,this.xhr=null,this.redirected=!1,this.serverIsDone=!1;var e=this._getFormDataAsObject();if(this.options.analyticsComponent&&this.options.analyticsAction){var i;try{i=require("jira/components/analytics-tracker/tracker");var n={commentId:e.commentId};"edit-comment"===this.options.id&&(n.commentLength=e.comment.length),i.trackEvent(this.options.analyticsComponent,this.options.analyticsAction+".submit",n)}catch(t){i=null}}var s=this,r=c.extend(!0,{},this.options.submitAjaxOptions),a=c.extend(!0,r,{url:this._getPath(this.$form.attr("action")),data:e,complete:function(t,i,n){if(s.hideFooterLoadingIndicator(),!s.cancelled)if(s._showMessagesFromXhrResponse(t),n.successful){s.$form.trigger("fakesubmit");const o=(d.getFlagValue("odin.ec.client.integration.cbb")||"").split(",");Array.isArray(o)&&o.length>0?s._handleServerSuccess(n.data,t,i,n,e.id):s._handleServerSuccess(n.data,t,i,n),s.redirected||s._handleSubmitResponse(n.data,t,n)}else s._handleServerError(t,i,n.errorThrown,n);s.$form.removeClass("submitting")}});a.data.decorator="dialog",a.data.inline=!0,this.showFooterLoadingIndicator(),this.xhr=o.makeRequest(a),t.preventDefault()},_showMessagesFromXhrResponse:function(t){var e=t.getResponseHeader("X-Atlassian-Messages");if(e){var n=JSON.parse(e);i.showMessages(n)}},_handleServerError:function(t,e,i,n){this.options.onUnSuccessfulSubmit&&this.options.onUnSuccessfulSubmit.call(t,e,i,n);var s=o.buildDialogErrorContent(n,!0),r=this.get$popupContent().find(".form-body");1!==r.length&&(r=this.get$popupContent());var a=1===r.length&&!n.hasData;a?r.prepend(s):this.setSubmitResponseContent(s)},setSubmitResponseContent:function(t){this.options.formatSubmitResponseContent&&(t=this.options.formatSubmitResponseContent.call(this,t)),this._setContent(t)},isIssueDialog:function(){return!!this.options.isIssueDialog},shouldLoadHeritageFormDialogContext:function(){return!!this.options.shouldLoadHeritageFormDialogContext},_handleServerSuccess:function(t,e,i,o,s){const r=(d.getFlagValue("odin.ec.client.integration.cbb")||"").split(",");Array.isArray(r)&&r.includes("delete-issues")&&g.trigger("issueDeleted",s);var a=this._detectMsgInstructions(e);a&&n.showMsgOnReload(a.msg,{type:a.type,closeable:a.closeable,target:a.target});var u=this._detectRedirectInstructions(e);this.serverIsDone=u.serverIsDone,u.redirectUrl?(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,t,e,i,o),this._performRedirect(u.redirectUrl)):this.serverIsDone||this.setSubmitResponseContent(t)},_detectMsgInstructions:function(t){var e={msg:t.getResponseHeader("X-Atlassian-Dialog-Msg-Html")};if(e.msg)return e.type=t.getResponseHeader("X-Atlassian-Dialog-Msg-Type").toUpperCase(),e.closeable="true"===t.getResponseHeader("X-Atlassian-Dialog-Msg-Closeable"),e.target=t.getResponseHeader("X-Atlassian-Dialog-Msg-Target"),e},_handleInitialDoneResponse:function(t,e,i){this._handleSubmitResponse(t,e,i)},_handleSubmitResponse:function(t,e,i){this.serverIsDone&&(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,t,e,i),this.options.autoClose&&this.hide(),this.options.onDialogFinished&&this.options.onDialogFinished.call(this,t,e,i))},_performRedirect:function(t){this.options.stayVisibleOnRedirect||this.hide(),this.redirected=!0,this._super(t)},_hasTargetUrl:function(){return this._getTargetUrlHolder().length>0},_getTargetUrlHolder:function(){return c(this.options.targetUrl)},_getTargetUrlValue:function(){return this._getTargetUrlHolder().val()},decorateContent:function(){var i,n,o,s,r,a=this;this.$form=c("form",this.get$popupContent()),this._constructHeading(),this.$form.submit(function(t){var e=new c.Event("before-submit");if(a.$form.trigger(e,[t,a]),e.isDefaultPrevented())t.preventDefault();else{a.$form.addClass("submitting");var i=c(":submit",a.$form);i.attr("disabled","disabled"),a.options.submitHandler?(a.showFooterLoadingIndicator(),a.options.submitHandler.call(a,t,function(){a.isCurrent()&&(a.hideFooterLoadingIndicator(),a.$form.removeClass("submitting"))})):a._submitForm(t)}}),n=c(".cancel",this.get$popupContent()),n.click(function(t){a.xhr&&a.xhr.abort(),a.xhr=null,a.cancelled=!0,a.hide(!0,{reason:e.HIDE_REASON.cancel}),t.preventDefault()}),u.isIE()&&u.majorVersion()<12&&n.focus(function(t){t.altKey&&n.click()}),i=this.get$popupContent().find(".button, .aui-button"),o=this.get$popupContent().find("div.buttons"),0===n.length&&0===i.length&&(0===o.length&&(s=c('<div class="buttons-container form-footer"><div class="buttons"/></div>').appendTo(this.get$popupContent()),o=s.find(".buttons")),AJS.populateParameters(),r=c("<button class='aui-button aui-button-link cancel' id='aui-dialog-close'>"+"Close"+"</button>"),o.append(r),r=c(".cancel",this.get$popupContent()),r.click(function(t){a.hide(!0,{reason:e.HIDE_REASON.cancel}),t.preventDefault()})),o.prepend(c("<span class='icon throbber'/>")),this.get$popupContent().on("click",".shortcut-tip-trigger",function(e){e.preventDefault(),a.get$popupContent().isDirty()&&!confirm("You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog.")||(a.hide(),c("#keyshortscuthelp").click())}),s instanceof c||(s=o.closest(".buttons-container, .form-footer"),s.size()||(s=o)),this.$buttonContainer=s},getButtonsContainer:function(){return this.$buttonContainer},_constructHeading:function(){var t,e;if(t=c(":header:first",this.get$popupContent()),t.length>0)for(this.addHeading(t.contents()),e=t.parent(),t.remove();e.is(":empty");)t=e.parent(),e.remove(),e=t},_setContent:function(t,i){this._super(t,i),t&&e.current===this&&e.current===this&&this._focusFirstField()},_focusFirstField:function(t){var e=new s.FocusConfiguration;t?e.focusElementSelector=t:this.$activeTrigger&&this.$activeTrigger.attr("data-field")&&(e.focusElementSelector="[name='"+this.$activeTrigger.attr("data-field")+"']"),e.parentElementSelectors.unshift(".aui-dialog-content"),e.context=this.get$popup()[0],l.init&&l.init(e.context),s.pushConfiguration(e),s.triggerFocus(),s.triggerFocus()},hide:function(t,e){return this._super(t,e)!==!1&&void s.popConfiguration()}})}),AJS.namespace("AJS.FormPopup",null,require("jira/dialog/form-dialog")),AJS.namespace("JIRA.FormDialog",null,require("jira/dialog/form-dialog"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/ErrorDialog.js' */
define("jira/dialog/error-dialog",["jira/util/formatter","jira/dialog/dialog","jira/ajs/ajax/ajax-util","jira/lib/class","jira/util/browser","jquery"],function(r,o,e,i,a,n){var t=i.extend({init:function(e){var i,t=e.message||"The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.";i=!e.mode||["warning","error","info"].indexOf(e.mode)<0?"error":e.mode,this.dialog=new o({id:"error-dialog",content:function(r){var o=n(JIRA.Templates.ErrorDialog.serverErrorModalDialog({message:t,mode:i}));o.find(".error-dialog-refresh").click(function(r){r.preventDefault(),a.reloadViaWindowLocation()}),r(o)}}),this.dialog.addHeading("Error"),this.dialog.handleCancel=n.noop},hide:function(){return this.dialog.hide(),this},show:function(){return this.dialog.show(),this}});return t.openErrorDialogForXHR=function(r){return new t({message:e.getErrorMessageFromXHR(r)}).show()},t}),AJS.namespace("JIRA.ErrorDialog",null,require("jira/dialog/error-dialog"));;
;
/* module-key = 'jira.webresources:dialogs', location = 'includes/jira/dialog/ErrorDialog.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ErrorDialog&&(JIRA.Templates.ErrorDialog={}),JIRA.Templates.ErrorDialog.serverErrorModalDialog=function(e,o){return'<div class="form-body"><div class="aui-message '+soy.$$escapeHtml(e.mode)+'"><span class="aui-icon icon-error"></span> '+soy.$$escapeHtml(e.message)+'</div></div><div class="buttons-container form-footer"><div class="buttons"><a href="#" class="error-dialog-refresh aui-button aui-button-link">'+soy.$$escapeHtml("Refresh")+"</a></div></div>"};;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/ajs/ajax/SmartAjaxWebSudo.js' */
define("jira/ajs/ajax/smart-ajax/web-sudo",["jira/jquery/deferred","jira/ajs/ajax/smart-ajax","jira/ajs/ajax/ajax-util","jira/dialog/dialog","jira/dialog/form-dialog","jira/util/browser","jquery"],function(e,a,o,t,n,s,i){return{showWebSudoDialog:function(e){var o=e.context||this,u=new n({id:"smart-websudo",type:"ajax",ajaxOptions:{url:contextPath+"/secure/admin/WebSudoAuthenticate!default.jspa?close=true"},submitHandler:function(t,n){t.preventDefault();var s=i(t.target);a.makeRequest({url:s.attr("action"),data:s.serialize(),type:"POST",complete:function(a){"Has-Authentication"===a.getResponseHeader("X-Atlassian-WebSudo")?i.isFunction(e.success)?e.success.call(o,function(){n(),u.hide()}):(n(),u.hide()):u._setContent(a.responseText,!0)}})}});i.isFunction(e.cancel)&&i(u).one("Dialog.hide",function(a,n,u){u!=t.HIDE_REASON.cancel&&u!=t.HIDE_REASON.escape||(a=i.Event(),(e.cancel.call(o,a)===!1||!a.isDefaultPrevented())&&s.reloadViaWindowLocation(n.find(".cancel").attr("href")))}),i.isFunction(e.beforeShow)&&e.beforeShow.call(o),u.show(),i.isFunction(e.show)&&e.show.call(o)},handleWebSudoError:function(e,o,t,n,s){var u={success:function(t){o&&i.isFunction(o.success)?o.success.apply(this,arguments):t(),a.makeRequest(e)},cancel:function(){i.isFunction(e.complete)&&e.complete.call(this,t,n,s),o&&i.isFunction(o.cancel)&&o.cancel.apply(this,arguments)},beforeShow:function(){o&&i.isFunction(o.beforeShow)&&o.beforeShow.apply(this,arguments)},show:function(){o&&i.isFunction(o.show)&&o.show.apply(this,arguments)},context:this};this.showWebSudoDialog(u)},makeWebSudoRequest:function(e,o){return a.makeChainableRequest(e)}}}),AJS.namespace("JIRA.SmartAjax.showWebSudoDialog",null,require("jira/ajs/ajax/smart-ajax/web-sudo").showWebSudoDialog),AJS.namespace("JIRA.SmartAjax.handleWebSudoError",null,require("jira/ajs/ajax/smart-ajax/web-sudo").handleWebSudoError),AJS.namespace("JIRA.SmartAjax.makeWebSudoRequest",null,require("jira/ajs/ajax/smart-ajax/web-sudo").makeWebSudoRequest);;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/IssueActionsDialog.js' */
require(["jira/util/formatter","wrm/context-path","jira/jquery/deferred","jquery","underscore","jira/ajs/ajax/smart-ajax","jira/shifter"],function(e,s,t,r,i,n,a){a.register(function(){function a(e){for(var s=0;s<e.length;s++){var t=i.reduce(e[s].split("."),function(e,s){return void 0!==e?e[s]:void 0},window);if(i.isFunction(t)){var r=t();if(null!=r)return r}}}var o=t(),u=t(),l=a(["JIRA.Issues.getSelectedIssueKey","JIRA.Issue.getIssueKey","JIRA.IssueNavigator.getSelectedIssueKey"]),I=a(["JIRA.Issues.getSelectedIssueKey","JIRA.Issue.getIssueId","JIRA.IssueNavigator.getSelectedIssueId"]);if(null==I||JIRA.Issues.Api.isNewIssueViewEnabled())return null;var c=e.format(s()+"/rest/api/1.0/issues/{0}/ActionsAndOperations?atl_token={1}",I,atl_token());n.makeRequest({dataType:"json",url:c}).done(function(e){var t=i.map(e.operations,function(e){return{label:e.name,value:{styleClass:e.styleClass,url:e.url}}}),r=i.map(e.actions,function(t){var r=s()+"/secure/WorkflowUIDispatcher.jspa?id="+e.id+"&action="+t.action+"&atl_token="+e.atlToken;return{label:t.name,value:{styleClass:"issueaction-workflow-transition",url:r}}});o.resolve(t),u.resolve(r)}).fail(function(s,t){var r;r=JIRA&&JIRA.Templates&&JIRA.Templates.ViewIssue&&JIRA.Templates.ViewIssue.Body&&JIRA.Templates.ViewIssue.Body.errorsLoading?JIRA.Templates.ViewIssue.Body.errorsLoading({isTimeout:"timeout"===t}):"Unable to retrieve issue.",o.resolve([{label:r,messageID:"error-loading-issue",useAUI:!1,isMessage:!0}]),u.reject()});var d=function(e,s){var t=r("<a>",{text:s,class:e.styleClass,href:e.url,css:{display:"none"}});t.appendTo("body").get(0).click(),t.remove()};return[{id:"issue-actions",name:"Issue Actions",context:l,weight:200,getSuggestions:function(){return o},onSelection:d},{id:"issue-transitions",name:"Workflow",context:l,weight:220,getSuggestions:function(){return u},onSelection:d}]})});;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/LabelsDialog.js' */
define("jira/dialog/labels-dialog",["jira/dialog/form-dialog","jira/issue","jira/issuenavigator/issue-navigator","jira/util/events","jira/util/events/types","jquery"],function(i,t,e,s,n,o){return i.extend({init:function(i){this._super(i),this.issueId=null,this.customFieldId=null,this.labelsProvider=this.initLabelsProvider(),this.labelPicker=null},initLabelsProvider:function(){return this.options.labelsProvider&&o.isFunction(this.options.labelsProvider)?this.options.labelsProvider:this.options.labels?this._getLabelsFromOptions:this._getLabelsFromTrigger},_getLabelsFromOptions:function(){return o(this.options.labels)},_getLabelsFromTrigger:function(){return this.$activeTrigger.closest(".labels-wrap")},decorateContent:function(){this._super();var i=this.get$popupContent();this.issueId=i.find("input[name=id]").val();var t=i.find("input[name=customFieldId]");1===t.length?this.customFieldId=t.val():this.customFieldId=null},focusLabelPicker:function(){this.get$popupContent().find("textarea").focus()},show:function(){this._super()&&this.focusLabelPicker()},_handleSubmitResponse:function(i,l,a){if(this.serverIsDone){this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,i,l,a);var r=this.get$popupContent().find("input[name=id]").val(),u=this.get$popupContent().find("input[name=noLink]").val();this.options.autoClose&&this.hide();var d={id:r,decorator:"none",noLink:u};this.customFieldId&&(d.customFieldId=this.customFieldId);var h=this,c=h.labelsProvider(this);o(o.ajax({url:contextPath+"/secure/EditLabels!viewLinks.jspa",data:d,success:function(i){var l=o("<div>").html(i).find(".labels-wrap");e.isNavigator()&&l.find("a.edit-labels").remove(),c.html(l.html()),n.REFRESH_ISSUE_PAGE&&s.trigger(n.REFRESH_ISSUE_PAGE,[t.getIssueId()])}})).throbber({target:c})}},handleCancel:function(){this._super(),this.$content=null}})}),AJS.namespace("AJS.LabelsPopup",null,require("jira/dialog/labels-dialog")),AJS.namespace("JIRA.LabelsDialog",null,require("jira/dialog/labels-dialog"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/ScreenshotDialog.js' */
define("jira/dialog/screenshot-window",["jira/dialog/dialog","jira/ajs/layer/inline-layer","jquery"],function(e,r,i){return function(n){this.$trigger=i(n.trigger),i(document).delegate(n.trigger,"click",function(n){n.preventDefault(),e.current&&e.current.hide(),r.current&&r.current.hide(),window.open(i(this).attr("href")+"&decorator=popup","screenshot","width=800,height=700,scrollbars=yes,status=yes")})}}),AJS.namespace("jira.app.attachments.screenshot.ScreenshotWindow",null,require("jira/dialog/screenshot-window")),AJS.namespace("JIRA.ScreenshotDialog",null,require("jira/dialog/screenshot-window"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/userhover/userhover.js' */
define("jira/userhover/userhover",["jira/container-api","jquery","wrm/context-path","jira/featureflags/feature-manager"],function(e,r,t,n){var i=t(),o=e.APIs.getProfilecardAPI,a=function(e){if(e){var r=0,t=e,n=window,i=e.getBoundingClientRect(),o=i.x||i.left;do r+=t.offsetLeft,t=t.offsetParent,null==t&&(t=n.frameElement,n=n.parent);while(t);return r-o}},u=function(e,r,t){return r.querySelectorAll('.user-hover[rel="'+e.getAttribute("rel")+'"]').length<t},l=function(){};return l._api=null,l._observer=null,l.observe=function(e,r){if(!l._observer||1===r.length){var t=r[0];if(t){var n=t.querySelectorAll('[rel="'+e.getAttribute("rel")+'"]').length,i={attributes:!0,childList:!0,subtree:!0};l._observer=new MutationObserver(function(){l._api&&u(e,t,n)&&l._api.hideProfileCard()}),l._observer.observe(t,i)}}},l._showProfileCardIfHoveringOnTrigger=function(e,r,t){r.parentElement.querySelector(":hover")===r&&l._api.setData(e,r,t)},l.show=function(e){var t=r(e).data("user"),n=encodeURIComponent(e.getAttribute("rel"));o().then(function(o){var u=a(e)||0,f=u+"px, 8px";l._api=o,t&&t.accountId?l._showProfileCardIfHoveringOnTrigger(t,e,f):r.get(i+"/rest/api/2/user?username="+n,function(r){l._showProfileCardIfHoveringOnTrigger(r,e,f)})})},l});;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/userhover/initUserhover.js' */
!function(e,r){e(document).delegate(".user-hover[rel]",{mouseenter:function(){r.show(this);var s=e(".user-hover[rel]").closest(".sd-items-listing"),o=e(".user-hover[rel]").closest("#peopledetails");r.observe(this,s.length>0?s:o)}})}(require("jquery"),require("jira/userhover/userhover"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/teamhover/teamhover.js' */
define("jira/teamhover/teamhover",["jira/container-api","jquery","jira/featureflags/feature-manager"],function(e,r,t){var n=e.APIs.getTeamProfileCardAPI,a=t.isFeatureEnabled("ptc.enabled.legacy-profile.card"),i=".team-hover",o=function(e){if(e){var r=0,t=e,n=window,a=e.getBoundingClientRect(),i=a.x||a.left;do r+=t.offsetLeft,t=t.offsetParent,null==t&&(t=n.frameElement,n=n.parent);while(t);return r-i}},l=function(e,r,t){return r.querySelectorAll(i+'[rel="'+e.getAttribute("rel")+'"]').length<t},f=function(){};return f._api=null,f._observer=null,f.observe=function(e,r){if(!f._observer||1===r.length){var t=r[0];if(t){var n=t.querySelectorAll('[rel="'+e.getAttribute("rel")+'"]').length,a={attributes:!0,childList:!0,subtree:!0};f._observer=new MutationObserver(function(){f._api&&l(e,t,n)&&f._api.hideProfileCard()}),f._observer.observe(t,a)}}},f._showProfileCardIfHoveringOnTrigger=function(e,r,t){r.parentElement.querySelector(":hover")===r&&f._api.setData(e,r,t)},f.show=function(e){if(a){var t=r(e).data("team");n().then(function(r){var n=o(e)||0,a=n+"px, 8px";f._api=r,t&&t.teamId&&f._showProfileCardIfHoveringOnTrigger(t,e,a)})}},f});;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/teamhover/initTeamhover.js' */
!function(e,t,i,a){var r=".team-hover";e(document).delegate(r+"[rel]",{mouseenter:function(){t.show(this)},click:function(){var t=e(this).data("subjectid");i.sendUIEvent({action:"clicked",actionSubject:"teamProfileLink",actionSubjectId:t,source:"globalIssueNavigator"})}}),a("team-field-tooltip",{type:a.type.CLASSNAME,attached:function(t){e(t).tooltip()}})}(require("jquery"),require("jira/teamhover/teamhover"),require("jira/analytics/web-client"),require("jira/skate"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/LinkIssueDialog.js' */
!function(){function e(e,i){var t=!1;return c.each(i,function(i,n){if(n.id===e)return n.isSelected=!0,t=!0,!1}),t||(i[0].isSelected=!0),i}function i(e){var i=c.Deferred();return o.makeRequest({url:contextPath+"/rest/viewIssue/1/remoteIssueLink/linkType?issueId="+e,complete:function(e,t,n){n.successful?i.resolve(n.data):i.reject(o.buildDialogErrorContent(n))}}),i.promise()}function t(e){var i=c.Deferred(),t=a.getDefaultAjaxOptions.call(e);return t.complete=function(e,t,n){n.successful?i.resolve(n.data):i.reject(o.buildDialogErrorContent(n))},o.makeRequest(t),i.promise()}function n(e){return e.$activeTrigger.attr("id")}var s=require("jira/dialog/dialog-factory"),r=require("jira/dialog/form-dialog"),a=require("jira/dialog/dialog-util"),o=require("jira/ajs/ajax/smart-ajax"),u=require("jira/issue"),l=require("jira/issuenavigator/issue-navigator"),c=require("jquery");s.createLinkIssueDialog=function(s){return new r({id:"link-issue-dialog",isIssueDialog:!0,trigger:s,onSuccessfulSubmit:function(e,i){"warning"!==i.getResponseHeader("X-Atlassian-Dialog-Msg-Type")&&a.storeCurrentIssueIdOnSucessfulSubmit.apply(this,arguments)},issueMsg:"thanks_issue_linked",widthClass:"large",stacked:!0,content:function(s){var r=this,a=u.getIssueId()||l.getSelectedIssueId();t(r).done(function(t){i(a).done(function(i){i=e(n(r),i),s(JIRA.Templates.LinkIssue.dialog({linkTypes:i,tabContent:t})),c.each(i,function(e,i){var t;i.isSelected===!0&&(t="[name='"+i.focusedFieldName+"']",0===c(t).length&&(t="#"+i.id),r._focusFirstField(t))})}).fail(function(e){s(e)})}).fail(function(e){s(e)})},formatSubmitResponseContent:function(e){return this.get$popupContent().find(".dialog-pane").html(e),this.get$popupContent().html()},onContentRefresh:function(){this.bindAnchorsToDialog(this.get$popupContent().find(".dialog-menu-item "))}})},AJS.namespace("JIRA.Dialogs.createLinkIssueDialog",null,s.createLinkIssueDialog)}();;
;
/* module-key = 'jira.webresources:dialogs', location = 'includes/jira/dialog/linkissue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.LinkIssue&&(JIRA.Templates.LinkIssue={}),JIRA.Templates.LinkIssue.dialog=function(e,i){for(var s='<div class="aui-group"><div class="aui-item dialog-menu-group"><ul class="dialog-menu">',l=e.linkTypes,a=l.length,t=0;t<a;t++){var u=l[t];s+='<li><button id="'+soy.$$escapeHtml(u.id)+'" data-url="'+soy.$$escapeHtml(u.url)+'" class="dialog-menu-item '+(u.isSelected?"selected":"")+'">'+soy.$$escapeHtml(u.label)+"</button></li>"}return s+='</ul></div><div class="aui-item dialog-pane">'+soy.$$filterNoAutoescape(e.tabContent)+"</div></div>"};;
;
/* module-key = 'jira.webresources:default-comment-security-level', location = '/includes/ajs/select/security/DefaultCommentSecurityLevelModel.js' */
define("jira/ajs/select/security/default-comment-security-level-model",["jira/issue","jira/lib/class","jira/util/strings","jquery","wrm/context-path"],function(e,t,n,i,a){return t.extend({DEFAULT_COMMENT_SECURITY_LEVEL_KEY_PREFIX:"default-comment-security-level-",_currentDefault:null,_preferenceKey:null,init:function(e){this.NOT_SELECTED_DEFAULT=new this.LvlObj("",""),this._preferenceKey=this.DEFAULT_COMMENT_SECURITY_LEVEL_KEY_PREFIX+e},LvlObj:function(e,t){this.level=e,this.levelName=t},_isLvlObjValid:function(e){return!(void 0==e.level||void 0==e.levelName)},_getDefaultStoreRequest:function(e){return i.ajax({url:a()+"/rest/api/2/mypreferences?key="+this._preferenceKey,type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(e)})},_getDefaultLoadRequest:function(){return i.ajax({url:a()+"/rest/api/2/mypreferences?key="+this._preferenceKey,type:"GET",contentType:"application/json",dataType:"json"})},updateDefault:function(e,t,n){this._sendDefaultChangedAnalytics(e),this._getDefaultStoreRequest(e).done(function(n){this._currentDefault=e,t()}.bind(this)).fail(function(e){n(e)})},getDefault:function(e,t){null==this._currentDefault?this._getDefaultLoadRequest().done(function(t){this._isLvlObjValid(t)?this._currentDefault=t:this._currentDefault=this.NOT_SELECTED_DEFAULT,e(this._currentDefault)}.bind(this)).fail(function(n){404==n.status?(this._currentDefault=this.NOT_SELECTED_DEFAULT,e(this._currentDefault)):t(n)}.bind(this)):e(this._currentDefault)},getCurrentDefault:function(){return this._currentDefault},_sendDefaultChangedAnalytics:function(t){var i=n.hashCode(this._preferenceKey);AJS.trigger("analyticsEvent",{name:"jira.issue.comment.level.default.set",data:{newDefaultlevelHash:n.hashCode(t.level.toString()),projectIdHash:i,issueIdHash:n.hashCode(e.getIssueId().toString()),wasSetToByAll:""===t.level}})}})});;
;
/* module-key = 'jira.webresources:default-comment-security-level', location = '/includes/ajs/select/security/DefaultCommentSecurityLevelControl.js' */
define("jira/ajs/select/security/default-comment-security-level-control",["jira/util/formatter","jira/ajs/select/security/default-comment-security-level-model","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/lib/class","jquery","underscore","wrm/data"],function(e,t,n,i,l,a,o,s){var r=s.claim("jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink");return l.extend({_InitialLoadDefaultLevelView:l.extend({init:function(e){this.$containerSpan=e},startLoading:function(){this.$containerSpan.html(JIRA.Templates.CommentSecurityLevel.initialLoadDefaultStart()),this.$containerSpan.find(".default-comment-level-spinner").spin({top:"0px",left:"0px"})},endLoading:function(){this.$containerSpan.find(".default-comment-level-load").addClass("hidden")}}),_SaveDefaultLevelControl:l.extend({init:function(e,t,n){this.$containerSpan=e,this.defaultLevelModel=t,this.currentSelection=n,this._putLinkToSetDefault(),this._putHelpLink()},_putLinkToSetDefault:function(){this.$containerSpan.append(JIRA.Templates.CommentSecurityLevel.linkToSetDefault()),this.$containerSpan.find(".default-comment-level-switch").bind("click",function(e){e.preventDefault(),this._onUpdateBegin(),this.defaultLevelModel.updateDefault(this.currentSelection,this._onUpdateSuccess.bind(this),this._onUpdateFail.bind(this))}.bind(this))},_putHelpLink:function(){this.$containerSpan.append(JIRA.Templates.Links.helpLink(r));var t=this.$containerSpan.find(".default-comment-level-help");t.attr("title","Makes the selected restriction level your default for this project"),t.tooltip({trigger:"hover",gravity:"nw",fade:!1})},_putStatusSpan:function(e){this.$containerSpan.html(JIRA.Templates.CommentSecurityLevel.defaultLevelStatus(e));var t=this.$containerSpan.find(".default-comment-level-status");t.attr("status",e.status),setTimeout(function(){t.addClass("fade-out")},2e3)},_onUpdateBegin:function(){this.$containerSpan.find(".default-comment-level-switch").addClass("disabled-link"),0==this.$containerSpan.find(".default-comment-level-spinner").length&&(this.$containerSpan.prepend(JIRA.Templates.CommentSecurityLevel.defaultLevelSpinner()),this.$containerSpan.find(".default-comment-level-spinner").spin())},_onUpdateSuccess:function(){this._putStatusSpan({text:"Done",status:"success",span_classes:"",icon_classes:"aui-icon aui-icon-small aui-iconfont-approve",text_classes:"default-saved-message"})},_onUpdateFail:function(e){new i({content:n.buildDialogErrorContent(e)}).show(),this.$containerSpan.find(".default-comment-level-spinner").remove(),this.$containerSpan.find(".default-comment-level-switch").removeClass("disabled-link")}}),enabled:!0,projectId:null,$rootSpan:null,$errorSpan:null,selectionSpi:null,defaultLevelModel:null,init:function(e,n,i){return this.$rootSpan=e,this.$errorSpan=n,this.projectId=e.data("project-id"),o.isNumber(this.projectId)?(this.selChanged=!1,this.selectionSpi=i,void(this.defaultLevelModel=new t(this.projectId))):void(this.enabled=!1)},selectionChanged:function(){this.selChanged=!0},loadAndApplyDefault:function(t){t&&this.selectionSpi.selectUnavailble("Unknown");var l=this._createContainer(),a=new this._InitialLoadDefaultLevelView(l);a.startLoading(),this.defaultLevelModel.getDefault(function(e){t?this.selChanged||this._applyDefaultToSelection(e):this.selectionSpi.repickSelection(),a.endLoading()}.bind(this),function(e){new i({content:n.buildDialogErrorContent(e)}).show(),a.endLoading()}.bind(this))},flushViewWithNewControl:function(e){var t=this.defaultLevelModel.getCurrentDefault();if(t&&e.value()!=t.level&&"none"!=e.value()){var n=this._createContainer(),i=new this.defaultLevelModel.LvlObj(e.value(),e.label());new this._SaveDefaultLevelControl(n,this.defaultLevelModel,i)}else this.$rootSpan.empty();this.$errorSpan.empty()},_applyDefaultToSelection:function(e){if(this.selectionSpi.hasSecurityLevel(e.level)){this.selectionSpi.selectLevel(e.level);var t=this.selectionSpi.getSelectedLevelName();t!=e.levelName&&(e.levelName=t,this.defaultLevelModel.updateDefault(e,function(){},function(){}))}else this.selectionSpi.selectUnavailble(e.levelName),this.$errorSpan.html(JIRA.Templates.CommentSecurityLevel.unavailable({name:e.levelName}))},_createContainer:function(){var e=a(JIRA.Templates.CommentSecurityLevel.defaultLevelContainer());return this.$rootSpan.html(e),e}})});;
;
/* module-key = 'jira.webresources:default-comment-security-level', location = '/includes/ajs/select/security/SecuritySelectAdapter.js' */
define("jira/ajs/select/security/select-adapter",["jira/lib/class"],function(e){return e.extend({_selectedModel:null,init:function(e){this._selectModel=e},hasSecurityLevel:function(e){return this._selectModel.hasOptionByValue(e)},selectUnavailble:function(e){this._selectModel.putOption("none",e,!0),this._selectModel.changeSelectionByValue("none")},selectLevel:function(e){this._selectModel.changeSelectionByValue(e)},repickSelection:function(){this._selectModel.changeSelectionByValue(this.getSelectedLevel())},getSelectedLevel:function(){return this._selectModel.getSelectedValues()[0]},getSelectedLevelName:function(){return this._selectModel.getSelectedTexts()[0]}})});;
;
/* module-key = 'jira.webresources:default-comment-security-level', location = 'includes/ajs/select/security/CommentSecurityLevel.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.CommentSecurityLevel&&(JIRA.Templates.CommentSecurityLevel={}),JIRA.Templates.CommentSecurityLevel.defaultLevelSpinner=function(e,t){return'<span class="icon default-comment-level-spinner"></span>'},JIRA.Templates.CommentSecurityLevel.initialLoadDefaultStart=function(e,t){return'<span class="default-comment-level-load">'+JIRA.Templates.CommentSecurityLevel.defaultLevelSpinner(null)+'<span class="default-comment-level-load-text">'+soy.$$escapeHtml("Loading your default...")+"</span></span>"},JIRA.Templates.CommentSecurityLevel.linkToSetDefault=function(e,t){return""+aui.buttons.button({text:"Make this my default",type:"link",extraClasses:"default-comment-level-switch"})},JIRA.Templates.CommentSecurityLevel.defaultLevelStatus=function(e,t){return'<span class="default-comment-level-status '+soy.$$escapeHtml(e.span_classes)+'"><span class="default-comment-level-status-icon '+soy.$$escapeHtml(e.icon_classes)+'"></span><span class="default-comment-level-status-text '+soy.$$escapeHtml(e.text_classes)+'">'+soy.$$escapeHtml(e.text)+"</span></span>"},JIRA.Templates.CommentSecurityLevel.unavailable=function(e,t){return'<span class="security-level-unavailble"><span class="aui-icon aui-icon-small aui-iconfont-error"></span><span class="security-level-unavailble-text">'+soy.$$escapeHtml(AJS.format("Your selected security level is unavailable, please change it",e.name))+"</span></span>"},JIRA.Templates.CommentSecurityLevel.defaultLevelContainer=function(e,t){return'<span class="default-comment-level-container"></span>'};;
;
/* module-key = 'jira.webresources:dropdown-select', location = '/includes/ajs/select/DropdownSelect.js' */
define("jira/ajs/select/dropdown-select",["jira/ajs/layer/layer-constants","jira/ajs/control","jira/ajs/select/select-model","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jquery"],function(e,t,n,i,r,s){return t.extend({init:function(t){var o=this;this.model=new n(t),this.model.$element.hide(),this._createFurniture(),this.dropdownController=i.createInlineLayers({alignment:e.LEFT,width:200,hideOnScroll:".issue-container",content:s(".aui-list",this.$container)}),this.dropdownController.layer().addClass("select-menu"),this.listController=new r({containerSelector:s(".aui-list",this.$container),groupSelector:"ul.opt-group",itemSelector:"li:not(.no-suggestions)",selectionHandler:function(e){o._selectionHandler(this.getFocused(),e),e.preventDefault()}}),this._assignEventsToFurniture()},show:function(){this.listController.generateListFromJSON(this.model.getAllDescriptors()),this.dropdownController.show(),this.listController.index=0,this.listController.focus(),this.listController.enable()},_assignEventsToFurniture:function(){this._assignEvents("trigger",this.$trigger)},_createFurniture:function(){var e=this.model.$element.attr("id");this.$container=this._render("container",e),this.$trigger=this.model.$element.prev("a").appendTo(this.$container),this.$container.append(this._render("suggestionsContainer",e)),this.$container.insertBefore(this.model.$element)},_renders:{container:function(e){return s('<div class="select-menu" />').attr("id",e+"-multi-select")},suggestionsContainer:function(e){return s('<div class="aui-list aui-list-checked" tabindex="-1" />').attr("id",e+"-suggestions")}},_selectionHandler:function(e){var t=this,n=0;this.model.setSelected(e.data("descriptor")),this.dropdownController.content().find(".aui-checked").removeClass(".aui-checked"),e.addClass(".aui-checked");var i=window.setInterval(function(){n++,e.toggleClass(".aui-checking"),n>2&&(clearInterval(i),t.dropdownController.hide())},80)},_events:{trigger:{click:function(e){this.show(),e.preventDefault(),e.stopPropagation()}}}})}),AJS.namespace("AJS.SelectMenu",null,require("jira/ajs/select/dropdown-select")),AJS.namespace("AJS.DropdownSelect",null,require("jira/ajs/select/dropdown-select"));;
;
/* module-key = 'jira.webresources:dropdown-select', location = '/includes/ajs/select/SecurityLevelSelect.js' */
define("jira/ajs/select/security-level-select",["jira/util/formatter","jira/util/strings","jira/issue","jira/featureflags/feature-manager","jira/ajs/select/security/default-comment-security-level-control","jira/ajs/select/security/select-adapter","jira/ajs/select/dropdown-select","jquery"],function(e,t,l,i,n,a,r,s){return r.extend({$securityLevelDiv:null,$commentLevelSelect:null,$triggerIcon:null,$currentLevelSpan:null,defaultEnabled:!1,applyDefault:!1,loadDefault:!1,_defaultSecurityLevelControl:null,_createFurniture:function(){AJS.populateParameters(),this._super()},init:function(e){this._super(e);var t=s(e);if(this.$securityLevelDiv=t.parent(),this.$triggerIcon=this.$securityLevelDiv.find(".security-level-drop-icon"),this.$currentLevelSpan=this.$securityLevelDiv.find(".current-level"),this.defaultEnabled=!!t.data("enable-default"),this.applyDefault=!!t.data("apply-default"),this.model.$element.bind("change",function(e,t){this._updateView(t)}.bind(this)),this.defaultEnabled&&i.isFeatureEnabled("viewissue.comment.defaultlevel")){var l=this.$securityLevelDiv.find(".default-comment-level"),r=this.$securityLevelDiv.next(".security-level-inline-error");this._defaultSecurityLevelControl=new n(l,r,new a(this.model)),this._defaultSecurityLevelControl.loadAndApplyDefault(this.applyDefault),this.model.$element.bind("change",function(e,t){this._defaultSecurityLevelControl.flushViewWithNewControl(t)}.bind(this))}},_updateView:function(t){var l=""==t.value();if(l){this.$triggerIcon.removeClass("aui-iconfont-locked").addClass("aui-iconfont-unlocked");var i="Viewable by All Users";this.$triggerIcon.text(e.format("This comment will be {0}",i)),this.$currentLevelSpan.text(i)}else{this.$triggerIcon.removeClass("aui-iconfont-unlocked").addClass("aui-iconfont-locked");var n=s("<div/>").text(t.label()).html(),a=e.format("Restricted to \u003cspan class=\'redText\'\u003e{0}\u003c/span\u003e",n),r=s("<div/>").html(a).text();this.$triggerIcon.text(e.format("This comment will be {0}",r)),this.$currentLevelSpan.html(a)}},_handleDownKey:function(e){e.keyCode!==s.ui.keyCode.DOWN||this.dropdownController.isVisible()||(e.preventDefault(),e.stopPropagation(),this.show())},_selectionHandler:function(e){this._super(e),this._defaultSecurityLevelControl&&this._defaultSecurityLevelControl.selectionChanged(),this._sendSelectionChangedAnalytics(e.data("descriptor").value())},_sendSelectionChangedAnalytics:function(e){var i=null!=this._defaultSecurityLevelControl,n=i?this._defaultSecurityLevelControl.defaultLevelModel.getCurrentDefault().level:"";AJS.trigger("analyticsEvent",{name:"jira.issue.comment.level.changed",data:{defaultWasSelected:e===n,issueIdHash:t.hashCode(l.getIssueId().toString()),defaultEnabled:i}})},_events:{trigger:{keydown:function(e){this._handleDownKey(e)},keypress:function(e){this._handleDownKey(e)}}}})}),AJS.namespace("AJS.SecurityLevel",null,require("jira/ajs/select/security-level-select")),AJS.namespace("AJS.SecurityLevelSelect",null,require("jira/ajs/select/security-level-select"));;
;
/* module-key = 'jira.webresources:user-management', location = '/includes/jira/common/Users.js' */
AJS.namespace("JIRA.Users.LoggedInUser.userName",null,require("jira/util/users/logged-in-user").username),AJS.namespace("JIRA.Users.LoggedInUser.isAnonymous",null,require("jira/util/users/logged-in-user").isAnonymous);;
;
/* module-key = 'jira.webresources:mentions-base', location = '/includes/jira/mention/Mention.js' */
define("jira/mention/mention",["jira/ajs/control","jira/dialog/dialog","jira/mention/mention-user","jira/mention/mention-group","jira/mention/mention-matcher","jira/mention/scroll-pusher","jira/mention/contextual-mention-analytics-event","jira/mention/uncomplicated-inline-layer","jira/ajs/layer/inline-layer/standard-positioning","jira/ajs/dropdown/dropdown-list-item","jira/util/events","jira/util/navigator","jira/analytics/typeahead-helper","jira/analytics/web-client","jira/featureflags/feature-manager","aui/progressive-data-set","jquery","underscore","wrm/context-path"],function(e,t,r,n,i,a,s,o,l,u,c,h,d,g,f,m,y,p,v){"use strict";function C(e){var t,r="";return e&&(t=e instanceof y?e.get(0):e,r=t.querySelector("a").getAttribute("rel")),r}function _(e){var t,r="";if(e){t=e instanceof y?e.get(0):e;var n=t.querySelector("a").getAttribute("rel"),i=t.querySelector("a").getAttribute("data-display-name");r=i+"|~accountid:"+n}return r}function w(){return R}function x(e,t){var r=S(e.get("highestIssueInvolvementRank"),t.get("highestIssueInvolvementRank"),function(e,t){return e-t});return 0===r&&(r=S(e.get("latestCommentCreationTime"),t.get("latestCommentCreationTime"),function(e,t){return t-e}),0===r&&(r=e.get("displayName").localeCompare(t.get("displayName")))),r}function S(e,t,r){return void 0!==e?void 0!==t?r(e,t):-1:void 0!==t?1:0}function b(e){return!!e}function I(e){var t={model:r,comparator:x};return b(e)?(t.queryEndpoint=v()+"/rest/internal/2/user/mention/search",t.queryParamKey="query"):(t.queryEndpoint=v()+"/rest/api/2/user/viewissue/search",t.queryParamKey="query"),t}var U="issueCommentTextArea",j="issueDescriptionTextArea",A="data-issueid",T="data-projectid",N="data-issuekey",k="data-projectkey",P={actionSubject:"mention",containerType:"project",objectType:"issue"},R=!1,E={},$=null;return e.extend({CLASS_SIGNATURE:"AJS_MENTION",lastInvalidUsername:"",lastRequestMatch:!0,lastValidUsername:"",init:function(e){var t=I(e);this.listController=new n,this.isRolesEnabled=b(e),this.dataSource=new m([],p.extend({queryData:this._getQueryParams.bind(this),matcher:this._matcher.bind(this)},t)),this.dataSource.bind("respond",function(e){var t=e.results,r=e.query;if(r&&w()){t.length?(this.lastInvalidUsername="",this.lastValidUsername=r,this.lastRequestMatch=!0):(r&&this.dataSource.hasQueryCache(r)&&(!this.lastInvalidUsername||r.length<=this.lastInvalidUsername.length)&&(this.lastInvalidUsername=r),this.lastRequestMatch=!1);var n=this.generateSuggestions(t,r);this.updateSuggestions(n)}}.bind(this)),this.dataSource.bind("activity",function(e){e.activity?this.layerController._showLoading():this.layerController._hideLoading()}.bind(this))},updateSuggestions:function(e){this.layerController&&(this.layerController.content(e),this.layerController.show(),this.layerController.refreshContent())},_getQueryParams:function(){return this.restParams},_setQueryParams:function(){var e={issueKey:this.$textarea.attr(N),projectKey:this.$textarea.attr(k),maxResults:10};t.current&&"create-issue-dialog"===t.current.options.id&&delete e.issueKey,this.restParams=e},_composeCustomEventForFollowScroll:function(e){e=e||{};var t=this.$textarea.attr("follow-scroll");return t&&t.length&&(e[t]={scroll:function(){this.setPosition()}}),e},_matcher:function(e,t){return this._stringPartStartsWith(e.get("name"),t)||this._stringPartStartsWith(e.get("displayName"),t)||p.chain(e.get("issueInvolvements")).filter(function(e){return"assignee"===e.id||"reporter"===e.id}).any(function(e){return 0===e.label.indexOf(t)}).value()},textarea:function(e){var r=this;if(!e)return this.$textarea;this.$textarea=y(e);var n=this;if(y("#mentionDropDown").remove(),this.$textarea.attr("push-scroll"))var i=new l,s=a(this.$textarea,10);this.layerController=new o({offsetTarget:this.textarea(),allowDownsize:!0,positioningController:i,customEvents:this._composeCustomEventForFollowScroll(),width:function(){return r.$textarea.width()}}),this.layerController.bind("showLayer",function(){n._getTypeAheadAnalyticsHelper().search(n._getCurrentUserName()||""),r.listController.trigger("focus"),r._assignEvents("win",window)}).bind("hideLayer",function(){r.listController.trigger("blur"),r._unassignEvents("win",window),s&&s.reset()}).bind("contentChanged",function(){if(r.layerController.$content){var e,t=r.listController.index,n=r.listController.highlighted||r.listController.items[t],i=n?C(n.$element):"";r.listController.removeAllItems(),r.layerController.$content.off("click.jiraMentions"),r.layerController.$content.on("click.jiraMentions","li",function(e){var t=e.currentTarget;r._acceptSuggestion(t),e.preventDefault()}),r.layerController.$content.find("li").each(function(){var t=this,n=C(t),a=new u({element:t,autoScroll:!0});n===i&&(e=a),r.listController.addItem(a)}),r.listController.prepareForInput(),e?e.trigger("focus"):r.listController.shiftFocus(0)}}).bind("setLayerPosition",function(e,r,n){if(t.current&&t.current.$form){var i=t.current.$popup.find(".buttons-container:visible");i.length&&r.top>i.offset().top&&(r.top=i.offset().top)}r.left<0&&(r.left=0),r.left+n.layer().width()>y(window).width()&&(r.left=Math.max(y(window).width()-n.layer().width(),0)),s&&s.push(r.top+n.layer().outerHeight(!0))}),this.layerController.layer().attr("id","mentionDropDown"),this._assignEvents("inlineLayer",r.layerController.layer()),this._assignEvents("textarea",r.$textarea),this._setQueryParams(),this._seedData().then(function(e){var t=[];t.push.apply(t,e),r.dataSource.add(t)})},generateSuggestions:function(e,t,r){var n=function(e){var n={text:e};if(!r&&e&&e.length){var i=this._indexOfFirstMatch(e.toLowerCase(),t.toLowerCase());if(i!==-1){var a=i+t.length;n={prefix:e.substring(0,i),match:e.substring(i,a),suffix:e.substring(a)}}}return n}.bind(this),i=p.map(e,function(e){var t=e.toJSON();return t.fullName=t.displayName,t.name=t.accountId,t.username=t.accountId,t.displayName=n(t.displayName),t.issueRoles=p.map(t.roles,function(e){return n(e.label)}),t});return this._getTypeAheadAnalyticsHelper().searched(i.map(function(e){return e.id})),y(JIRA.Templates.mentionsSuggestions({suggestions:i,query:t,activity:this.dataSource.activeQueryCount>0,isRolesEnabled:this.isRolesEnabled}))},_indexOfFirstMatch:function(e,t){for(var r,n=/ |@|\.|-|"|,|'|\(/,i=0;;){if(0===e.indexOf(t))return i;if(r=e.search(n),r===-1)return-1;i=i+r+1,e=e.substring(r+1)}},_seedData:function(){var e,t=this._getQueryParams().issueKey;return t?(E[t]||(E[t]=y.ajax({method:"GET",url:v()+"/rest/internal/2/user/mention/search",data:this._getQueryParams(),dataType:"json",contentType:"application/json; charset=UTF-8"})),e=E[t].promise()):e=(new y.Deferred).reject(),e},_acceptSuggestion:function(e){this._hide(),s.fireUserMayAcceptSuggestionByUsingContextualMentionEvent(this._getCurrentUserName()),this._getTypeAheadAnalyticsHelper().selected(y(e).index()),this._replaceCurrentUserName(_(e)),this.listController.removeAllItems(),R=!1},_replaceCurrentUserName:function(e){var t=this._rawInputValue(),r=this._getCaretPosition(),n=t.substr(0,r),a=i.getLastWordBoundaryIndex(n,!0),s=t.substr(0,a+1).replace(/\r\n/g,"\n"),o="["+e+"]",l=t.substr(r);this._rawInputValue([s,o,l].join("")),this._setCursorPosition(s.length+o.length)},_setCursorPosition:function(e){var t=this.$textarea.get(0);if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var r=t.createTextRange();r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",e),r.select()}},_getTypeAheadAnalyticsHelper:function(){if(!$){var e=p.defaults({objectId:this.$textarea.attr(A),containerId:this.$textarea.attr(T),source:this._getTypeAheadAnalyticsSource()},P);$=new d(g.sendTrackEvent,e)}return $},_getCaretPosition:function(){var e,t,r,n,i,a=this.$textarea.get(0),s=this._rawInputValue();return"number"==typeof a.selectionStart?a.selectionStart:document.selection&&a.createTextRange?(t=document.selection.createRange(),t?(i=a.createTextRange(),i.moveToBookmark(t.getBookmark()),i.compareEndPoints("StartToEnd",a.createTextRange())>=0?s.length:(n=s.replace(/\r\n/g,"\n"),r=i.moveStart("character",-s.length),e=n.slice(0,-r).split("\n").length-1,e-r)):s.length):0},_rawInputValue:function(){var e=this.$textarea.get(0);return"string"==typeof arguments[0]&&(e.value=arguments[0]),e.value},fetchUserNames:function(e){this._getTypeAheadAnalyticsHelper().search(e),this.dataSource.query(e)},_getCurrentUserName:function(){return this.currentUserName},_hide:function(){this.layerController.hide()},_show:function(){this.layerController.show()},_keyUp:function(){var e=this._getCaretPosition(),t=this._getUserNameFromInput(e),r=y.trim(t||"");if(this._isNewRequestRequired(r))this.fetchUserNames(r),R=!0;else if(this._showHintSuggestions(t)){var n=this.dataSource.first(5);this._getTypeAheadAnalyticsHelper().search("");var i=this.generateSuggestions(n,r,!0);this.updateSuggestions(i),R=!0}else this._keepSuggestWindowOpen(r)||(this._hide(),R=!1);this.lastQuery=r,delete this.willCheck},_showHintSuggestions:function(e){return"string"==typeof e&&0===e.length},_keepSuggestWindowOpen:function(e){return!!e&&(!!this.layerController.isVisible()&&(this.dataSource.activeQueryCount||this.lastRequestMatch))},_isNewRequestRequired:function(e){if(!e)return!1;if(e=y.trim(e),e===this.lastQuery)return!1;if(this.lastInvalidUsername){if(0===e.indexOf(this.lastInvalidUsername)&&this.lastInvalidUsername.length<e.length)return!1}else if(!this.lastRequestMatch&&e===this.lastValidUsername)return!0;return!0},_stringPartStartsWith:function(e,t){return e=y.trim(e||"").toLowerCase(),t=(t||"").toLowerCase(),!(!e||!t)&&this._indexOfFirstMatch(e,t)!==-1},_getUserNameFromInput:function(e){return"number"!=typeof e&&(e=this._getCaretPosition()),this.currentUserName=i.getUserNameFromCurrentWord(this._rawInputValue(),e)},_getTypeAheadAnalyticsSource:function(){var e=this.$textarea.attr("id");return"comment"===e?U:"description"===e?j:"UNKNOWN"},_events:{win:{resize:function(){this.layerController.setWidth(this.$textarea.width())}},textarea:{keydown:function(e){e.keyCode===y.ui.keyCode.ESCAPE?this.layerController.isVisible()&&(t.current&&c.one("Dialog.beforeHide",function(e){e.preventDefault()}),this.$textarea.one("keyup",function(e){e.keyCode===y.ui.keyCode.ESCAPE&&(e.stopPropagation(),c.trigger("Mention.afterHide"))})):this.willCheck||(this.willCheck=p.defer(p.bind(this._keyUp,this)),p.defer(p.bind(function(){var t=this._getUserNameFromInput(this._getCaretPosition());s.fireContextualMentionIsBeingLookedUpAnalyticsEvent(t,e.keyCode,e.ctrlKey,e.metaKey)},this)))},focus:function(){this._keyUp()},mouseup:function(){this._keyUp()},blur:function(){this.listController.removeAllItems(),this.lastQuery=this.lastValidUsername=this.lastInvalidUsername=""}},inlineLayer:{mousedown:function(e){e.preventDefault()}}}})});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-progressive-data-set', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/progressive-data-set.js' */
("undefined"===typeof window?global:window).__c35ee65482ba222c97e480e4544e6569=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=f(__922acd0053a6de3ea4c53d8902766ab6),g=f(__e3ce9f42f29f6bd2118d84461512f4a4),i=f(__4d02fe17b8e885a34493e34af3d145dd),h=g.default.Collection.extend({initialize:function(a,b){b||(b={});b.matcher&&(this.matcher=b.matcher);b.model&&(this.model=b.model);this._idAttribute=(new this.model).idAttribute;
this._maxResults=b.maxResults||5;this._queryData=b.queryData||{};this._queryParamKey=b.queryParamKey||"q";this._queryEndpoint=b.queryEndpoint||"";this.value=null;this.queryCache={};this.activeQueryCount=0;c.default.bindAll(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(a){var b,d;this.value=a;d=this.getFilteredResults(a);this.respond(a,d);a&&(this._queryEndpoint&&!this.hasQueryCache(a)&&this.shouldGetMoreResults(d))&&(b=this.fetch(a),this.activeQueryCount++,this.trigger("activity",
{activity:!0}),b.always(c.default.bind(function(){this.activeQueryCount--;this.trigger("activity",{activity:!!this.activeQueryCount})},this)),b.done(c.default.bind(function(b,d,c){this.addQueryCache(a,b,c)},this)),b.done(c.default.bind(function(){a=this.value;d=this.getFilteredResults(a);this.respond(a,d)},this)))},getQueryData:function(a){var b=c.default.isFunction(this._queryData)?this._queryData(a):this._queryData,b=c.default.extend({},b);b[this._queryParamKey]=a;return b},fetch:function(a){a=
{add:!0,update:!0,remove:!1,data:this.getQueryData(a)};return g.default.Collection.prototype.fetch.call(this,a)},respond:function(a,b){this.trigger("respond",{query:a,results:b});return b},matcher:function(){},getFilteredResults:function(a){var b=[];if(!a)return b;b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&(b=c.default.first(b,this._maxResults));return b},addQueryCache:function(a,b,d){var e=this.queryCache,b=this.parse(b,d);e[a]=c.default.pluck(b,this._idAttribute)},
hasQueryCache:function(a){return this.queryCache.hasOwnProperty(a)},findQueryCache:function(a){return this.queryCache[a]},shouldGetMoreResults:function(a){return a.length<this._maxResults},setMaxResults:function(a){this._maxResults=a;this.value&&this.respond(this.value,this.getFilteredResults(this.value))}});(0,i.default)("ProgressiveDataSet",h);e.default=h;return e=e["default"]}.call(this);;
;
/* module-key = 'jira.webresources:data-sets', location = '/includes/ajs/contentretriever/ProgressiveDataSet.js' */
AJS.namespace("JIRA.ProgressiveDataSet",null,require("aui/progressive-data-set"));;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/UncomplicatedInlineLayer.js' */
define("jira/mention/uncomplicated-inline-layer",["jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jquery"],function(n,e,t){return n.extend({init:function(t){t||(t={}),t.contentRetriever=new e,n.prototype.init.call(this,t)},content:function(){return arguments.length&&(this.$content=arguments[0]),this.$content},refreshContent:function(n){this.layer().empty().append(this.content()),t.isFunction(n)&&n.call(this),this.contentChange(),this.setPosition()}})}),AJS.namespace("JIRA.UncomplicatedInlineLayer",null,require("jira/mention/uncomplicated-inline-layer"));;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/Mention.Group.js' */
define("jira/mention/mention-group",["jira/ajs/group"],function(t){return t.extend({_makeSelection:function(t){this.items&&this.items[this.index]&&(this.items[this.index].trigger("accept"),t.preventDefault())},shiftFocus:function(i){t.prototype.shiftFocus.call(this,i);var e=this.items[this.index];e&&(this.highlighted=this.items[this.index])},keys:{Up:function(t){this.shiftFocus(-1),t.preventDefault()},Down:function(t){this.shiftFocus(1),t.preventDefault()},Return:function(t){this._makeSelection(t)},Tab:function(t){this._makeSelection(t)}}})}),AJS.namespace("JIRA.MentionGroup",null,require("jira/mention/mention-group"));;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/contextual-mention-analytics-event.js' */
define("jira/mention/contextual-mention-analytics-event",["jquery","underscore"],function(e,n){var t=/^(assi(gnee?)|repo(rter?))$/,i=n.debounce(function(e,n,i,r){var a=o(n)||c(n,i,r),u=t.test(e);a===!1&&u&&AJS.trigger("analytics",{name:"issue.comment.contextualMention.lookup"})},500),o=function(n){return n===e.ui.keyCode.BACKSPACE},c=function(e,n,t){return e==="A".charCodeAt()&&(n||t)||n||t};return{fireAcceptedContextualMentionAnalyticsEvent:function(){AJS.trigger("analytics",{name:"issue.comment.contextualMention.accepted"})},fireContextualMentionIsBeingLookedUpAnalyticsEvent:function(e,n,t,o){i(e,n,t,o)},fireUserMayAcceptSuggestionByUsingContextualMentionEvent:function(e){n.any(["assignee","reporter"],function(n){if(0===n.indexOf(e)&&n!==e)return AJS.trigger("analytics",{name:"issue.comment.contextualMention.mayAccepted"}),!0})}}});;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/mention-matcher.js' */
define("jira/mention/mention-matcher",["jquery"],function(t){return{AT_USERNAME_START_REGEX:/^@(.*)/i,AT_USERNAME_REGEX:/[^\[]@(.*)/i,WIKI_MARKUP_REGEX:/\[[~@]+([^~@]*)/i,ACCEPTED_USER_REGEX:/\[~[^~\]]*\]/i,WORD_LIMIT:3,getUserNameFromCurrentWord:function(e,n){var r,i=e.substr(0,n),E=this.getLastWordBoundaryIndex(i,!1),s=i.charAt(E-1),u=null;if(!s||!/\w/i.test(s)){if(r=this._removeAcceptedUsernames(i.substr(E)),/[\r\n]/.test(r))return null;t.each([this.AT_USERNAME_START_REGEX,this.AT_USERNAME_REGEX,this.WIKI_MARKUP_REGEX],function(t,e){var n=e.exec(r);if(n)return u=n[1],!1})}return null!=u&&this.lengthWithinLimit(u,this.WORD_LIMIT)?u:null},lengthWithinLimit:function(e,n){var r=t.trim(e).split(/\s+/);return r.length<=~~n},getLastWordBoundaryIndex:function(t,e){var n=t.lastIndexOf("@"),r=t.lastIndexOf("[~");return e&&(n-=1,r-=1),n>r?n:r},_removeAcceptedUsernames:function(t){var e=this.ACCEPTED_USER_REGEX.exec(t);return e?t.split(e)[1]:t}}});;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/mention-user.js' */
define("jira/mention/mention-user",["backbone","underscore"],function(e,n){return e.Model.extend({idAttribute:"accountId",initialize:function(){this.on("change:issueInvolvements",function(e,t){var i=n.union(e.previous("issueInvolvements"),t);e.attributes.issueInvolvements=n.uniq(i,!1,function(e){return e.id})})},parse:function(e,n){return e.issueInvolvements||(e.issueInvolvements=[]),e},toJSON:function(){var e=n.clone(this.attributes);return e.roles=e.issueInvolvements,delete e.issueInvolvements,e}})});;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/scroll-pusher.js' */
define("jira/mention/scroll-pusher",["jquery"],function(e){return function(t,n){function r(e,t){"undefined"==typeof t&&(t=n);var r=u.offset().top+u.outerHeight(),i=e-r;i+t>0&&(h||(h=u.height()),u.height(u.height()+i+t))}function i(){h&&u.height(h)}n=n||0;var h,u=e(t.attr("push-scroll"));return{push:r,reset:i}}});;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/namespace.js' */
AJS.namespace("JIRA.MentionUserModel",null,require("jira/mention/mention-user")),AJS.namespace("JIRA.Mention",null,require("jira/mention/mention")),AJS.namespace("JIRA.Mention.Matcher",null,require("jira/mention/mention-matcher")),AJS.namespace("JIRA.Mention.ScrollPusher",null,require("jira/mention/scroll-pusher")),AJS.namespace("JIRA.Mention.ContextualMentionAnalyticsEvent",null,require("jira/mention/contextual-mention-analytics-event"));;
;
/* module-key = 'jira.webresources:mentions-feature', location = 'includes/jira/mention/Mention.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),JIRA.Templates.mentionsSuggestions=function(e,s){var t='<div class="aui-list">';if(e.suggestions.length>0){t+='<ul class="aui-list-section aui-last">';for(var i=e.suggestions,a=i.length,n=0;n<a;n++){var l=i[n];if(t+='<li class="aui-list-item jira-mention-suggestion"><a class="aui-list-item-link aui-iconised-link" style="background-image: url('+soy.$$escapeHtml(l.avatarUrls["16x16"])+'); overflow:hidden; text-overflow: ellipsis" rel="'+soy.$$escapeHtml(l.accountId)+'" data-display-name="'+soy.$$escapeHtml(l.fullName)+'"',l.roles){t+=' data-issue-roles="';for(var o=l.roles,r=o.length,m=0;m<r;m++){var u=o[m];t+=soy.$$escapeHtml(u.id)+" "}t+='"'}t+=' href="#" >'+JIRA.Templates.highlitEntryWithNoUsername(l)+"</a></li>"}t+="</ul>"}else t+=JIRA.Templates.noSuggestions({activity:e.activity,query:""+soy.$$escapeHtml(e.query)});return t+=(e.isRolesEnabled?'<div class="aui-list-section-footer">'+soy.$$escapeHtml(AJS.format("Try typing @{0} or @{1}","assignee","reporter"))+"</div>":"")+"</div>"},JIRA.Templates.noSuggestions=function(e,s){return e=e||{},""+(0==e.query.length?'<div class="no-suggestions">'+soy.$$escapeHtml("Type to start searching.")+"</div>":e.activity?'<div class="no-suggestions searching">'+soy.$$filterNoAutoescape(AJS.format("Searching for {0}{1}{2}...","<strong>",e.query,"</strong>"))+"</div>":'<div class="no-suggestions">'+soy.$$filterNoAutoescape(AJS.format("Found no matching users for {0}{1}{2}.","<strong>",e.query,"</strong>"))+"</div>")},JIRA.Templates.highlitEntry=function(e,s){return'<span class="jira-mention-suggestion-user">'+JIRA.Templates.highlightMention({match:e.displayName})+" - "+soy.$$escapeHtml(e.emailAddress)+JIRA.Templates.highlightMention({prefix:" (",match:e.name,suffix:")"})+"</span>"+(e.issueRoles?JIRA.Templates.renderIssueRoles(e):"")},JIRA.Templates.highlitEntryWithNoUsername=function(e,s){return'<span class="jira-mention-suggestion-user">'+JIRA.Templates.highlightMention({match:e.displayName})+" - "+soy.$$escapeHtml(e.emailAddress)+"</span>"+(e.issueRoles?JIRA.Templates.renderIssueRoles(e):"")},JIRA.Templates.highlightMention=function(e,s){return""+(e.match.text||e.match.match?(e.prefix?soy.$$escapeHtml(e.prefix):"")+(e.match.match?soy.$$escapeHtml(e.match.prefix)+"<mark>"+soy.$$escapeHtml(e.match.match)+"</mark>"+soy.$$escapeHtml(e.match.suffix):soy.$$escapeHtml(e.match.text))+(e.suffix?soy.$$escapeHtml(e.suffix):""):"")},JIRA.Templates.renderIssueRoles=function(e,s){for(var t='<span class="jira-mention-issue-roles">',i=e.issueRoles,a=i.length,n=0;n<a;n++){var l=i[n];t+=' <span class="aui-lozenge aui-lozenge-complete'+(l.match?"":" aui-lozenge-subtle")+'">'+JIRA.Templates.highlightMention({prefix:"",match:l,suffix:""})+"</span>"}return t+="</span>"};;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/Mention.Element.js' */
define("jira/mention/mention-element",["jira/mention/mention","jira/skate","underscore"],function(e,t,n){function o(t){var n=t.getAttribute("data-issuekey");t._controller||(t._controller=new e(n)),t._controller.textarea(t)}return t("mentionable",{type:t.type.CLASSNAME,created:function(e){},attached:function(e){document.activeElement===e&&o(e)},events:{focus:function(e,t){o(e)}}})});;
;
/* module-key = 'jira.webresources:mentions', location = '/includes/jira/mention/initMentions.js' */
require(["wrm/require"],function(e){e(["wrc!jira.webresources:mentions-feature"],function(){require(["jira/mention/mention-element"])})});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-banner', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/banner.js' */
("undefined"===typeof window?global:window).__3ad706cbf23ce48c5828dc88c7c5b7ee=function(){function b(a){return a&&a.__esModule?a:{"default":a}}function e(a){a=(0,c.default)((0,g.default)('<div class="aui-banner aui-banner-{type}" role="banner">{body}</div>').fill({type:"error","body:html":a.body||""}).toString());(0,c.default)("#"+f).find(".aui-banner").get().forEach(function(a){"true"===a.getAttribute("aria-hidden")&&(0,c.default)(a).remove()});var b=(0,c.default)("#"+f);if(!b.length)throw Error("You must implement the application header");
a.prependTo(b);(0,h.recomputeStyle)(a);a.attr("aria-hidden","false");return a[0]}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var c=b(__307d3e18fd611f85395c67cddeb1fe24),h=__c0311e8841bd8637e025a8fb1474f693,i=b(__574ac67f906effeb9d8ec2753b23cf28),j=b(__4d02fe17b8e885a34493e34af3d145dd),g=b(__eb201a36d4829c396b434af7bad3dea4),f="header";(0,i.default)("aui/banner",e);(0,j.default)("banner",e);d.default=e;return d=d["default"]}.call(this);;
;
/* module-key = 'jira.webresources:keyboard-shortcut-toggle', location = '/includes/ajs/keyboardshortcut/KeyboardShortcuts.toggle.js' */
define("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle",["exports"],function(e){var r=!1;e.disable=function(){r=!0},e.enable=function(){r=!1},e.areKeyboardShortcutsDisabled=function(){return r}}),AJS.namespace("AJS.enableKeyboardShortcuts",null,require("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle").enable),AJS.namespace("AJS.disableKeyboardShortcuts",null,require("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle").disable);;
;
/* module-key = 'jira.webresources:assignee-picker', location = '/includes/jira/field/AssigneePicker.js' */
define("jira/field/assignee-picker",["jira/util/formatter","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestions/assignee-suggest-handler","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/featureflags/feature-manager","aui/params","jquery","underscore","wrm/context-path","aui/populate-parameters","jira/featureflags/feature-manager"],function(e,t,i,s,n,a,r,o,u,l,g){function p(e){return u.find(e,function(e){return"assignee-group-search"===e.id()})}return t.extend({init:function(t){function a(e){r.actionDescriptorId=void 0,g();var t={projectKeys:r.projectKeys,issueKey:r.assigneeEditIssueKey,actionDescriptorId:r.actionDescriptorId,maxResults:50,startAt:0===h._pagination.numberOfShowingItems?0:h._pagination.numberOfShowingItems+1};return p(t,e)}function p(e,t){return u.extend({query:t},e)}function c(e,t){var i=t.accountId;return u.extend({value:i},e)}function d(t){var i=[];if(t.length){for(var a=new s({weight:1,id:"assignee-group-search",uniqueItemScope:"container",replace:!0,label:"All Users"}),r=0,o=t.length;r<o;r++){var u=t[r],l=u.displayName,g=u.emailAddress,p=l;g&&(p+=" - "+g);var d={fieldText:l,label:p,allowDuplicate:!1,icon:u.avatarUrls["16x16"]};a.addItem(new n(c(d,u)))}i.push(a)}return i}var h=this,m=t.element instanceof o?t.element:o(t.element);h._pagination={lastQuery:null,numberOfShowingItems:0,allResultsDisplayed:!1,requestNextPagePromise:null},t=o.extend(!0,{},{submitInputVal:!0,showDropdownButton:!!m.data("show-dropdown-button"),errorMessage:"User \'\'{0}\'\' cannot be assigned this issue",localDataGroupId:"assignee-group-suggested",content:"mixed",suggestionAtTop:!0,removeDuplicates:!0,ajaxOptions:{url:function(){r.assigneeEditIssueKey=void 0,g();var e=r.assigneeEditIssueKey?"search":"multiProjectSearch";return l()+"/rest/api/latest/user/assignable/"+e},query:!0,minQueryLength:0,data:a,formatResponse:d}},t),"-1"==t.editValue&&(t.editValue=!1,m.val("-1")),this._super(t),this.suggestionsHandler=new i(this.options,this.model)},requestSuggestions:function(e){return this._pagination.lastQuery!=this.getQueryVal()&&this._resetPagination(),this._super(e).done(u.bind(function(e){var t=p(e);if(t){var i=t.items();i&&i.length&&(this._pagination.numberOfShowingItems+=i.length)}return e},this))},scrolledToBottomHandler:function(){this._pagination.requestNextPagePromise&&!this._pagination.requestNextPagePromise.isResolved()||this._pagination.allResultsDisplayed||(this._pagination.requestNextPagePromise=this.requestSuggestions(!0).done(u.bind(function(e){var t=p(e);if(t){var i=t.items();i&&i.length?(this.listController.appendToGroupDescriptor("assignee-group-search",i),this.listController.addNextPage()):this._pagination.allResultsDisplayed=!0}else this._pagination.allResultsDisplayed=!0},this)))},_handleCharacterInput:function(e){this._pagination.lastQuery!=this.getQueryVal()?this._super(e):e&&this.showSuggestions()},handleFreeInput:function(e){""===o.trim(e||this.$field.val())?this.setSelection(this.model.getDescriptor("-1")):this._super(e),this._resetPagination()},cleanUpModel:function(){},_resetPagination:function(){this._pagination.lastQuery=this.getQueryVal(),this._pagination.numberOfShowingItems=0,this._pagination.allResultsDisplayed=!1,this._pagination.requestNextPagePromise=null}})}),AJS.namespace("JIRA.AssigneePicker",null,require("jira/field/assignee-picker"));;
;
/* module-key = 'jira.webresources:assignee-picker', location = '/includes/jira/field/initAssigneePickers.js' */
define("jira/field/init-assignee-pickers",["jira/field/assignee-picker","jira/util/users/logged-in-user","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/featureflags/feature-manager","jira/skate"],function(e,i,n,t,a,r,s,c){function u(e){var i=e.indexOf("#");return i!==-1?e.substring(i):e}function l(e){r("#assign-to-me-trigger",e).click(function(n){n.preventDefault();var t=r(this).attr("href"),a=u(t),s=i.accountId(),c=r(a,e);r(a+"-single-select",e).length?c.trigger("set-selection-value",s):c.val(s).change()})}function d(e){r(".assignee-edit-group",e).each(function(){var i=r(this),n=i.attr("rel");r("#assignee_userpicker_dummy_"+n+"_container",e).click(function(){r("#assignee_radio_picker_"+n,e).attr("checked","checked")}),i.parents("form[name=jiraform]").submit(function(){i.find("input[name=assignee_radio]:checked").each(function(){this.id=="assignee_radio_picker_"+n?r("#"+n,e).val(r("#hidden-assignee_userpicker_dummy_"+n,e).val()):r("#"+n,e).val(r(this).val())})})})}c("js-assignee-picker",{type:c.type.CLASSNAME,created:function(i){var n=r(i),t=n.data("editValue"),a=new e({element:n,editValue:t});r(document).trigger("ready.single-select.assignee",a)}}),n.bind(t.NEW_CONTENT_ADDED,function(e,i,n){n!==a.panelRefreshed&&(l(i),d(i))})});;
;
/* module-key = 'jira.webresources:assignee-picker', location = '/includes/jira/field/init/init-assignee-picker-webresource.js' */
require("jira/field/init-assignee-pickers");;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/ajs/dark-features.js' */
define("jira/ajs/dark-features",["jira/util/data/meta"],function(e){function a(){try{var a=JSON.parse(e.get("enabled-dark-features"));if("object"==typeof a)return a}catch(e){}return[]}for(var r=a(),t={},n=0,u=r.length;n<u;n++)t[r[n]]=!0;return{isEnabled:function(e){return!!t[e]},enable:function(e){e&&!t[e]&&(t[e]=!0)},disable:function(e){e&&t[e]&&delete t[e]}}}),AJS.namespace("AJS.DarkFeatures",null,require("jira/ajs/dark-features"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jquery/plugins/expandoninput/expandOnInput.js' */
!function(t){function i(){var i=t(this),e=this;setTimeout(function(){i.keyup(),e.scrollTop=e.scrollHeight},0)}function e(){var s=t(this),a="border-box"===(s.css("boxSizing")||s.css("-mozBoxSizing")||s.css("-webkitBoxSizing")||s.css("-msBoxSizing"));this.scrollHeight;var h,r=parseInt(s.css("maxHeight"),10)||s.data("expandOnInput_maxHeight")||t(window).height()-160;if(a){var o=s.outerHeight();h=Math.max(o+this.scrollHeight-this.clientHeight,o)}else{var c=s.height();h=Math.max(this.scrollHeight-(s.innerHeight()-c),c)}if(h<r)s.css({overflow:"hidden",height:h+"px"});else{var l=this.selectionStart;s.css({"overflow-y":"auto",height:r+"px"}),s.unbind(n,e),s.unbind("paste",i),this.selectionStart!==l&&(this.selectionStart=l,this.selectionEnd=l),h=r}if(s.trigger("expandedOnInput"),!s.data("hasFixedParent")){var d=t(window),g=d.scrollTop(),u=s.offset().top+h-d.height()+29;g<u&&d.scrollTop(u)}s.trigger("stalkerHeightUpdated")}var n="input keyup";t.fn.expandOnInput=function(s){var a=this.filter("textarea");return a.unbind(n,e).bind(n,e),(t.browser.mozilla||t.browser.msie)&&a.unbind("paste",i).bind("paste",i),a.unbind("refreshInputHeight").bind("refreshInputHeight",function(){t(this).css("height",""),e.call(this)}),a.data("expandOnInput_maxHeight",s),a.each(function(){var i=t(this);i.each(function(){var i=t(this);i.data("hasFixedParent",!!i.hasFixedParent())}),""!==i.val()&&e.call(this)}),this}}(jQuery);;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jquery/plugins/isdirty/isDirty.js' */
define("jira/jquery/plugins/isdirty",["jira/util/logger","jira/util/formatter","jira/util/events","jira/util/browser","jquery"],function(e,r,n,t,i){function a(){var e=h;return h=g,"***\n\n"+e+"\n\n***"}function o(e){var r=i(e),n=i(e.form),t=e.type;if(n.hasClass(u)||r.hasClass(u))return!1;if(n.hasClass(f))return!0;if(r.is(":hidden")&&!r.hasClass(l))return!1;if(!r.parent().length)return!1;if(n.has(".error, .errMsg, .errorMessage, .errLabel, .ajaxerror").length>0||n.prev(".error").length>0||n.children(".error").length>0)return!0;if(("hidden"===t||"submit"===t||"button"===t)&&!r.hasClass(l))return!1;if("select-one"===t||"select-multiple"===t){for(var a=e.options,o=0;o<a.length;o++){var s=a[o];if(s.selected!==s.defaultSelected)return!0}return!1}return"checkbox"===t||"radio"===t?e.checked!==e.defaultChecked:e.value!==e.defaultValue}function s(){e.log("the cancel event on forms is deprecated"),i(this.form||this).closest("form").trigger("cancel")}var u="ajs-dirty-warning-exempt",l="ajs-dirty-warning-whitelist",f="ajs-dirty-warning-by-default",c="ajs-dirty-warning-subsequent-submits-allowed",d=!1,g="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost.",h=g;i.fn.isDirty=function(){for(var e=this.find("*").andSelf().filter(":input"),r=0;r<e.length;r++)if(o(e[r]))return!0;return!1},i.fn.removeDirtyWarning=function(){return i(this.form||this).closest("form").addClass(u),this},n.bind("page-unload.location-change.from-dialog",function(){window.onbeforeunload=function(){}}),n.bind("page-unload.refresh.from-dialog",function(){h="The data in the dialog box was successfully submitted, although this page requires a refresh to display the results.\n\nYou had entered new data on the page before you opened the dialog box. If you continue, your page data will be lost."});var m={getInputsToCheck:function(){return i("input[type='text'], textarea[name], ."+l)},getDirtyWarning:function(){for(var e=m.getInputsToCheck(),r=0,n=e.size();r<n;r++)if(!d&&o(e[r]))return a();d&&(d=!1)},ClassNames:{SANCTIONED:l,EXEMPT:u,BY_DEFAULT:f,SUBSEQUENT_SUBMITS_ALLOWED:c}};return t.isSelenium()||(window.onbeforeunload=m.getDirtyWarning),i(document).delegate("form","submit",function(){function e(e){return e.parents(".jira-dialog.jira-dialog-open").length<=0}function r(e){return e.hasClass(c)}var n=i(this);e(n)&&!r(n)&&(d=!0)}),i(function(){i(".cancel").bind("click",s)}),i(function(){i("#cancelButton").bind("mousedown keydown click",s)}),m}),AJS.namespace("JIRA.DirtyForm",null,require("jira/jquery/plugins/isdirty"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jquery/plugins/overlabel/overlabel.js' */
!function(a){a.fn.overlabel=function(e){return this.each(function(){var t=a(this),d=e||a("#"+(t.data("target")||t.attr("for")));t.removeClass("overlabel").addClass("overlabel-apply").click(function(a){d.attr("disabled")||d.focus(),a.preventDefault()}),d.width()&&t.width(d.width()),d.on({focus:function(){t.addClass("hidden")},"blur change":function(){var e=a(this);""===e.val()?t.removeClass("hidden"):t.addClass("hidden")}}),d.val()&&""!==d.val()&&t.addClass("hidden")}),this}}(jQuery);;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/toggleblock/ToggleBlock.js' */
define("jira/toggleblock/toggle-block",["jira/util/logger","jira/lib/class","jira/util/events","jira/util/events/types","jira/data/local-storage","jquery","jira/libs/parse-uri"],function(t,e,i,o,s,n,r){function a(t){var e=t.data.instance;n(this).hasClass(e.options.collapsedClass)&&e.expand(this)}function l(t){var e=t.data.instance;e.options.originalTargetIgnoreSelector&&n(t.originalTarget).is(e.options.originalTargetIgnoreSelector)||(e.toggle(t.target),t.preventDefault())}function c(t){t.data.instance._collapseTwiciBlocksFromStorage()}return e.extend({getDefautOptions:function(){return{blockSelector:".twixi-block",triggerSelector:".twixi",eventType:"click",collapsedClass:"collapsed",expandedClass:"expanded",storageCollectionName:"twixi-blocks",autoFocusTrigger:!0}},_collapseTwiciBlocksFromStorage:function(){var t,e=s.getItem(this.options.storageCollectionName)||"";return e=e.replace(/\./g,"\\."),/#\w+/.test(e)&&(t=n(e),t.is(this.options.blockSelector)&&(this.isPermlink()||t.removeClass(this.options.expandedClass).addClass(this.options.collapsedClass))),this},_updateTwixiBlockIdInStorage:function(t){if(!this.isPermlink()){if(!/#\w+/.test(t))return this;var e=s.getItem(this.options.storageCollectionName)||"",i=(","+e+",").indexOf(","+t+",")+1;e=i?e.indexOf(","+t)+1?e.replace(","+t,""):e.replace(t,""):e.length?e+","+t:t,s.setItem(this.options.storageCollectionName,e)}return this},contract:function(t){return t=n(t),t.is(this.options.blockSelector)&&(t.removeClass(this.options.expandedClass).addClass(this.options.collapsedClass),this.options.persist!==!1&&this._updateTwixiBlockIdInStorage("#"+t.attr("id"))),n(t).trigger("contractBlock"),this},expand:function(t){return t=n(t),t.is(this.options.blockSelector)&&(t.removeClass(this.options.collapsedClass).addClass(this.options.expandedClass),this.options.persist!==!1&&this._updateTwixiBlockIdInStorage("#"+t.attr("id"))),n(t).trigger("expandBlock"),this},toggle:function(t){var e=n(t).closest(this.options.blockSelector);return e.hasClass(this.options.collapsedClass)?this.expand(e):this.contract(e),this.options.autoFocusTrigger&&e.find(this.options.triggerSelector+":visible").focus(),this},isPermlink:function(){return this.checkIsPermlink(location.href)},checkIsPermlink:function(t){var e=r(t).queryKey;return e.hasOwnProperty("focusedCommentId")||e.hasOwnProperty("focusedWorklogId")},addTrigger:function(t,e){var i=this,o=0;return t&&(e=e||"click","dblclick"===e&&(document.selection?n(document).delegate(t,"dblclick",function(){document.selection.empty()}):n(document).delegate(t,"mousedown",function(){var t=(new Date).getTime(),e=t-o>750;return o=t,e})),n(document).delegate(t,e,function(){i.toggle(this)})),this},addCallback:function(t,e){return n.aop.after({target:this,method:t},e),this},isUnique:function(t){var e=n(document).data("toggleBlockUids")||[];return n.inArray(t,e)===-1},setUid:function(t){var e=n(document).data("toggleBlockUids")||[];e.push(t),n(document).data("toggleBlockUids",e)},init:function(e){var s=this;e=e||{},this.options=n.extend(this.getDefautOptions(),e);var r=this.options.triggerSelector;return this.isUnique(r)?(this.setUid(r),n(document).delegate(this.options.blockSelector,"reveal",{instance:this},a),n(document).delegate(this.options.triggerSelector,this.options.eventType,{instance:this},l),i.bind(o.REFRESH_TOGGLE_BLOCKS,{instance:this},c),void(this.options.persist!==!1&&n(function(){s._collapseTwiciBlocksFromStorage()}))):void("undefined"!=typeof console&&t.warn&&t.warn("Your are trying to create a ToggleBlock with selector '"+this.options.triggerSelector+"'.One already exists with this trigger so has been ignored."))}})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/toggleblock/namespaces.js' */
AJS.namespace("JIRA.ToggleBlock",null,require("jira/toggleblock/toggle-block"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/togglelist/ToggleList.js' */
define("jira/togglelist/toggle-list",["jira/lib/class","jquery"],function(e,i){return e.extend({init:function(e){var i=e.more,o=e.showMoreContainer||e.showMoreLink,t=e.showLessContainer||e.showLessLink,n=e.showMoreLink,s=e.showLessLink;if(!i||!i.length)return o.hide(),void t.hide();i.hide(),o.show(),t.hide();var l=function(e){e.preventDefault(),i.toggle(),o.toggle(),t.toggle()};n.click(l),s.click(l)}})}),AJS.namespace("JIRA.ToggleList",null,require("jira/togglelist/toggle-list"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/wikipreview/wikiPreview.js' */
define("jira/wikipreview/wiki-preview",["jira/util/formatter","wrm/context-path","jquery"],function(e,i,n){return function(r,t){var s,a,o,d,c=!1,l=function(){s=n("#"+r.fieldId,t),a=n("#"+r.fieldId+"-wiki-edit",t),o=n("#"+r.trigger,t)},u=function(){var e;return{show:function(){e||(e=n("<div>").html("&nbsp;").css({height:"300px"}).insertBefore(a)),e.css({display:"block"})},hide:function(){e.css({display:"none"})}}}(),p=function(){c?(a.find(".content-inner").css({maxHeight:""}),this.showInput()):(a.find(".content-inner").css({maxHeight:s.css("maxHeight")}),this.showPreview())},w=function(i){a.originalHeight=a.height(),u.show(),a.addClass("previewClass"),d=s.val(),s.hide(),o.removeClass("loading").addClass("selected"),h(e.format("Back to edit {0}",r.fieldId)),a.find(".content-inner").html(i),u.hide(),c=!0,n(document).trigger("showWikiPreview",[a]),setTimeout(function(){o.focus()},0)},f=function(e){return function(i,n,r){o.removeClass("loading"),d=s.val(),n&&alert(n),r&&alert(r),e.showInput()}},h=function(e){o.find(".wiki-renderer-icon").text(e)};return{showPreview:function(){var e=this,a=n("#pid",t).val(),o=n("#issuetype",t).val();n.isArray(a)&&(a=a[0]),n.isArray(o)&&(o=o[0]),n("#"+r.trigger,t).addClass("loading"),n.ajax({url:i()+"/rest/api/1.0/render",contentType:"application/json",type:"POST",data:JSON.stringify({rendererType:r.rendererType,unrenderedMarkup:s.val(),issueKey:r.issueKey,projectId:a,issueType:o}),dataType:"html",success:w,error:f(e)})},showInput:function(i){a&&(u.show(),a.css({height:""}),a.removeClass("previewClass").find(".content-inner").empty(),s=n("#"+r.fieldId,t),s.val(d),s.show(),s.focus(),o.removeClass("selected"),h(e.format("Preview {0}",r.fieldId)),u.hide(),c=!1,n(document).trigger("showWikiInput",[a]))},init:function(){var e,i=this;r instanceof n&&(r=n.readData(r)),e=n("#"+r.trigger,t),e.click(function(n){e.hasClass("loading")||(l(),p.call(i)),n.preventDefault()})}}}}),AJS.namespace("jira.app.wikiPreview",null,require("jira/wikipreview/wiki-preview")),AJS.namespace("JIRA.wikiPreview",null,require("jira/wikipreview/wiki-preview"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/common/app.js' */
!function(){function e(){k("label.overlabel").overlabel()}function t(){var e=k("div.results"),t=e.width();e.bind("resultsWidthChanged",function(){var e=k(this);e.css("width",100/t*(t-(parseInt(k(document.documentElement).prop("scrollWidth"),10)-k(window).width()))+"%")}),k(window).resize(function(){e.trigger("resultsWidthChanged")}),e.trigger("resultsWidthChanged"),k("#issuenav").bind("contractBlock expandBlock",function(){k(".results").trigger("resultsWidthChanged")})}function i(){k(".fieldTabs li").click(function(e){e.preventDefault(),e.stopPropagation();var t=k(this);t.hasClass("active")||(k(".fieldTabs li.active").removeClass("active"),t.addClass("active"),k(".fieldTabArea.active").removeClass("active"),k("#"+t.attr("rel")).addClass("active"))})}function n(){k("form").handleAccessKeys(),W.bind("dialogContentReady",function(){k("form",this.$content).handleAccessKeys({selective:!1})})}function a(){W.keydown(function(e){S.current&&27===e.which&&!k(e.target).is(":input")&&S.current.hide()})}function r(){new x({blockSelector:".twixi-block",storageCollectionName:"twixi"}).addCallback("toggle",function(){A.getStalker().trigger("stalkerHeightUpdated")}).addTrigger(".action-head .action-details","click"),new x({blockSelector:"#issue-filter .toggle-wrap:not(#navigator-filter-subheading-textsearch-group)",triggerSelector:".toggle-trigger",collapsedClass:"expanded",expandedClass:"collapsed",storageCollectionName:"navSimpleSearch"}),new x({blockSelector:".twixi-block",triggerSelector:".twixi-trigger",storageCollectionName:"twixi"}),new x({blockSelector:"#issuenav",triggerSelector:"a.toggle-lhc",collapsedClass:"lhc-collapsed",storageCollectionName:"lhc-state",autoFocusTrigger:!1}),k(".error","#issue-filter").parents(".toggle-wrap").removeClass("collapsed").addClass("expanded"),k("fieldset.content-toggle input[type='radio']").live("change",function(){var e=k(this);e.closest(".content-toggle").find("input[type='radio']").each(function(){var e=k(this);k("#"+e.attr("name")+"-"+e.val()+"-content").addClass("hidden")}),k("#"+e.attr("name")+"-"+e.val()+"-content").removeClass("hidden")})}function o(){k("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value").attr("disabled","disabled"),k("#log-work-adjust-estimate-"+k("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked").val()+"-value").removeAttr("disabled"),k("input[name=worklog_adjustEstimate],input[name=adjustEstimate]").change(function(){k("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value").attr("disabled","disabled"),k("#log-work-adjust-estimate-"+k(this).val()+"-value").removeAttr("disabled")})}function s(){var e=k("input:checked");0!==e.length&&("forgot-login-rb-forgot-password"===e.attr("id")?(k("#username,#password").addClass("hidden"),k("#password").removeClass("hidden")):"forgot-login-rb-forgot-username"===e.attr("id")&&(k("#username,#password").addClass("hidden"),k("#username").removeClass("hidden"))),k("#forgot-login-rb-forgot-password").change(function(){k("#username,#password").addClass("hidden"),k("#password").removeClass("hidden")}),k("#forgot-login-rb-forgot-username").change(function(){k("#username,#password").addClass("hidden"),k("#username").removeClass("hidden")})}function l(){k("input.upfile").each(function(){var e=k(this),t=e.closest(".field-group");e.change(function(){e.val().length>0&&t.next(".field-group").removeClass("hidden")})})}function c(){W.on("keypress","textarea",N.submitOnCtrlEnter),k("#jqltext").keypress(N.submitOnEnter)}function d(){var e=k("#browser-warning");k(".icon-close",e).click(function(){e.slideUp("fast"),E.save("UNSUPPORTED_BROWSER_WARNING","handled")})}function u(){k("form").submit(function(e){var t=new k.Event("before-submit");k(this).trigger(t),t.isDefaultPrevented()&&e.preventDefault()})}function f(){var e="#comment, #environment, #description",t=200;W.bind("tabSelect",function(t,i){i.pane.find(e).expandOnInput()}),k(e).expandOnInput(t),W.bind("dialogContentReady",function(i,n){n.get$popupContent().bind("tabSelect",function(i,n){n.pane.find(e).expandOnInput(t)}).find(e).expandOnInput(t)}),W.bind("showWikiInput",function(t,i){i.find(e).expandOnInput()})}function g(){I.bind("dialogContentReady",function(){j.setup()})}function h(){var e=k("form.aui"),t=k("a.cancel",e);O.isIE()&&O.majorVersion()<12&&t.attr("accessKey")&&t.focus(function(e){e.altKey&&(k(this).mousedown(),window.location.href=t.attr("href"))})}function p(){var e=function(e){k(e).closest(".availableActionRow").find("td:first :checkbox").attr("checked",!0)},t=k("#availableActionsTable tr.availableActionRow");t.children("td:last-child").find(":input").change(function(t){e(this)})}function v(){var e=function(e){k(e).closest("tr").prev().find("td:first :checkbox").attr("checked",!0)},t=k("#availableActionsTable .availableActionRowMultiSelect");t.children("td:last-child").find(":input").change(function(t){e(this)})}function m(){k("#availableActionsTable .availableActionMultiSelect select").change(function(e){var t=k(this);t.closest("tr").next().toggleClass("hidden","removeall"===t.val())})}function b(){k(".clickable").click(function(){window.location.href=k(this).find("a").attr("href")})}function w(e){k(".projects-list-trigger",e).each(function(){var e=k(this);e.click(!1);var t=e.attr("href");S(this,t.substring(1),function(e,i,n){e.html(k(t).html()),n()},{onHover:!0,hideDelay:500,width:240})})}function C(){W.on("click","[data-helplink=local]",function(e){var t=this.getAttribute("href"),i=window.open(t,"jiraLocalHelp","resizable, scrollbars=yes");return i.focus(),e.preventDefault(),!1})}var k=require("jquery"),S=(require("aui/params"),require("aui/inline-dialog")),j=require("aui/tabs"),x=require("jira/toggleblock/toggle-block"),y=require("jira/ajs/browser/describe-browser"),A=require("jira/issue"),q=require("jira/message"),E=require("jira/data/cookie"),N=require("jira/util/forms"),R=require("jira/util/data/meta"),I=require("jira/util/events"),O=require("jira/util/navigator"),T=require("jira/skate"),W=k(document);T("shared-item-trigger",{type:T.type.CLASSNAME,attached:function(e){var t=e.getAttribute("href");S(e,t.substring(1),function(e,i,n){e.html(k(t).html()),n()},{width:240})}}),k(function(){r(),e(),t(),i(),n(),o(),s(),l(),c(),d(),u(),f(),h(),p(),v(),m(),a(),b(),C(),w()}),y(),g(),T("js-filter-form-edit",{type:T.type.CLASSNAME,extends:"form",events:{submit:function(e,t){if(!t.defaultPrevented){var i=AJS.escapeHtml(e.elements.filterName.value);q.showMsgOnReload(AJS.format("Changes to {0} have been saved.",i),{type:"SUCCESS",closeable:!0,target:"body:not(:has(#filter-edit))"})}}}}),T("js-filter-form-subscription",{type:T.type.CLASSNAME,extends:"form",events:{submit:function(e,t){if(!t.defaultPrevented){var i=e.elements.groupName.value||R.get("remote-user-fullname");q.showMsgOnReload(AJS.format("A subscription has been added for \u003cstrong\u003e{0}\u003c/strong\u003e.",AJS.escapeHtml(i)),{type:"SUCCESS",closeable:!0,target:"body:not(:has(#filter-subscription))"})}}}})}();;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/common/page.js' */
define("jira/common/page",["jira/util/logger","jquery"],function(e,n){var t={relatedContentCssSelector:".content-container > .content-related",mainContentCssSelector:".content-container > .content-body"},a={relatedContentCssSelector:".aui-page-panel > .aui-page-panel-inner > .aui-page-panel-nav",mainContentCssSelector:".aui-page-panel > .aui-page-panel-inner > .aui-page-panel-content"},o=function(o){var r=n(t[o]);return r.size()?e.log("This page is using a deprecated page layout markup pattern. It should be updated to use AUI page layout."):r=n(a[o]),r},r=JIRA&&JIRA.Page;return n.extend({},r,t,a,{relatedContentElement:function(){return o("relatedContentCssSelector")},mainContentElement:function(){return o("mainContentCssSelector")}})}),AJS.namespace("JIRA.Page",null,require("jira/common/page"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initGenericDialogs.js' */
define("jira/dialog/init-generic-dialogs",["jira/dialog/dialog-register","jira/dialog/dialog-util","jira/dialog/form-dialog","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery","exports"],function(i,e,t,a,o,r){r.init=function(){i.keyboardShortcuts=new t({id:"keyboard-shortcuts-dialog",trigger:"#keyshortscuthelp",widthClass:"large",onContentRefresh:function(){var i=this.get$popupContent();o("a.submit-link",i).click(function(e){e.preventDefault(),o("form",i).submit()})},onSuccessfulSubmit:function(){a.areKeyboardShortcutsDisabled()?a.enable():a.disable()}}),i.deleteIssueLink=new t({type:"ajax",id:"delete-issue-link-dialog",trigger:"#linkingmodule .delete-link > a",ajaxOptions:e.getDefaultAjaxOptions,isIssueDialog:!0}),new t({id:"credits-dialog",trigger:"#view_credits",widthClass:"creditsContainer",onContentRefresh:function(){!o("html").hasClass("safari")}}),new t({id:"about-dialog",trigger:"#view_about",ajaxOptions:{url:this.href,data:{decorator:"dialog",inline:"false"}},widthClass:"large"}),o(document).on("click","a.trigger-dialog",function(i){i.preventDefault();var e=void 0!==i.target&&o(i.target).hasClass("stacked-dialog"),a=new t({id:this.id+"-dialog",ajaxOptions:{url:this.href,data:{decorator:"dialog",inline:"false"}},stacked:e});a.show()})}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initDashboardDialogs.js' */
define("jira/dialog/init-dashboard-dialogs",["jira/dialog/dialog-register","jira/dialog/form-dialog","jquery","exports"],function(e,a,t,d){d.init=function(){document.getElementById("dashboard")&&(e.deleteDashboard=new a({type:"ajax"}),t(document).delegate("#delete_dashboard","click",function(a){a.stopPropagation(),a.preventDefault(),e.deleteDashboard.$activeTrigger=t("#delete_dashboard"),e.deleteDashboard.init({type:"ajax",id:"delete-dshboard",ajaxOptions:{url:e.deleteDashboard.$activeTrigger.attr("href")},targetUrl:"input[name=targetUrl]"}),e.deleteDashboard.show()}))}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initNonDashboardDialogs.js' */
define("jira/dialog/init-non-dashboard-dialogs",["jira/dialog/dialog-register","jira/dialog/dialog-factory","jira/dialog/dialog-util","jira/dialog/form-dialog","jira/dialog/labels-dialog","jira/dialog/screenshot-window","jira/issuenavigator/issue-navigator","jquery","exports"],function(e,s,i,t,a,o,l,u,n){n.init=function(){function n(e){var s=e.$activeTrigger,i=s.closest(".labels-wrap"),t=0!==s.parents("#view-subtasks").length;return t?i=s.parents("tr").find(".labels-wrap"):s.hasClass("issueaction-edit-labels")&&(i=u(l.isNavigator()?"#issuetable tr.issuerow.focused td.labels .labels-wrap":"#wrap-labels .labels-wrap")),i.length>0&&i}document.getElementById("dashboard")||(e.linkIssue=s.createLinkIssueDialog("a.issueaction-link-issue"),e.deleteIssue=new t({id:"delete-issue-dialog",trigger:"a.issueaction-delete-issue",targetUrl:"#delete-issue-return-url",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_deleted",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0}),e.cloneIssue=new t({id:"clone-issue-dialog",trigger:"a.issueaction-clone-issue",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_cloned",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0}),e.assignIssue=new t({id:"assign-dialog",trigger:"a.issueaction-assign-issue",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0,widthClass:"large"}),e.assignIssueToMe=new t({id:"assign-dialog",trigger:"a.issueaction-assign-to-me",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0}),e.logWork=new t({id:"log-work-dialog",trigger:"a.issueaction-log-work",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_worklogged",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0,widthClass:"large"}),e.attachFile=new t({id:"attach-file-dialog",trigger:"a.issueaction-attach-file",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",isIssueDialog:!0,widthClass:"large"}),e.attachScreenshot=new o({id:"attach-screenshot-window",trigger:"a.issueaction-attach-screenshot"}),e.manageAttachment=new t({id:"manage-attachment-dialog",trigger:"#manage-attachment-link",stacked:!0,reloadOnPop:!0,isIssueDialog:!0,widthClass:"large"}),e.comment=new t({id:"comment-add-dialog",trigger:"a.issueaction-comment-issue:not(.inline-comment)",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_commented",isIssueDialog:!0,widthClass:"large"}).dirtyFormWarning(),e.editLabels=new a({id:"edit-labels-dialog",trigger:"a.issueaction-edit-labels,a.edit-labels",autoClose:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_labelled",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,labelsProvider:n,isIssueDialog:!0}),e.editComment=new t({type:"ajax",id:"edit-comment",trigger:".action-links .edit-comment",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0,widthClass:"large",analyticsComponent:"viewissue.comment",analyticsAction:"edit"}).dirtyFormWarning(),e.editLogWork=new t({id:"edit-log-work-dialog",trigger:".action-links .edit-worklog-trigger",isIssueDialog:!0,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,widthClass:"large"}),e.deleteLogWork=new t({id:"delete-log-work-dialog",trigger:".action-links .delete-worklog-trigger",isIssueDialog:!0,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,widthClass:"large"}),e.deleteComment=new t({type:"ajax",id:"delete-comment-dialog",trigger:".action-links [id^='delete_comment']",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0,widthClass:"large",analyticsComponent:"viewissue.comment",analyticsAction:"delete"}).dirtyFormWarning(),e.watchIssue=new t({ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,trigger:".issueaction-watch-issue:not([id='toggle-watch-issue'])",isIssueDialog:!0}),e.stopWatchingIssue=new t({ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,trigger:".issueaction-unwatch-issue:not([id='toggle-watch-issue'])",isIssueDialog:!0}),e.addVoteForIssue=new t({ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,trigger:".issueaction-vote-issue:not([id='toggle-vote-issue'])",isIssueDialog:!0}),e.removeVoteForIssue=new t({ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,trigger:".issueaction-unvote-issue:not([id='toggle-vote-issue'])",isIssueDialog:!0}),new t({type:"ajax",id:"delete-attachment-dialog",trigger:"#attachmentmodule .attachment-delete a, #issue-attachments-table a.delete",isIssueDialog:!0}))}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initWorkflowTransitionDialogs.js' */
define("jira/dialog/init-workflow-transition-dialogs",["jira/dialog/dialog-register","jira/dialog/dialog-util","jira/dialog/form-dialog","jira/issuenavigator/issue-navigator","aui/tabs","jquery","exports","jira/libs/parse-uri"],function(i,t,a,e,o,s,r,n){var l="a.issueaction-workflow-transition";r.init=function(){s(document).delegate(l,"click",function(e){e.preventDefault();var r=s(e.target).closest(l),u=n(r.attr("href")).queryKey.action;if(u){var g="workflow-transition-"+u+"-dialog",f=s(this);i[g]||(i[g]=new a({id:g,trigger:['a[href*="action='+u+'&"].issueaction-workflow-transition','a[href$="action='+u+'"].issueaction-workflow-transition'],widthClass:"large",handleRedirect:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:t.BeforeShowIssueDialogHandler.execute,issueMsg:"thanks_issue_transitioned",onContentRefresh:function(){o.setup()},isIssueDialog:!0}),i[g].$activeTrigger=f,i[g].show())}})}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initDialogBehaviour.js' */
define("jira/dialog/init-dialog-behaviour",["jira/dialog/dialog-register","jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator","jquery","underscore","exports"],function(i,e,n,o,r,t,a){a.init=function(){r(window).resize(t.debounce(function(){e.current&&e.current._positionInCenter()},200)),r.each(i,function(i,a){a instanceof e&&t.result(a,"isIssueDialog")&&r(a).bind("beforeShow",function(){return o.isRowSelected()||!!n.getIssueId()})})}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initDialogs.js' */
AJS.$(function(){require("jira/dialog/init-generic-dialogs").init(),require("jira/dialog/init-dashboard-dialogs").init(),require("jira/dialog/init-non-dashboard-dialogs").init(),require("jira/dialog/init-workflow-transition-dialogs").init(),require("jira/dialog/init-dialog-behaviour").init()});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dropdown/element/default-dropdown.js' */
define("jira/dropdown/element/default-dropdown",["jira/util/logger","jira/ajs/layer/layer-constants","jira/ajs/dropdown/dropdown","jira/skate","jquery"],function(t,n,a,o,e){return o("js-default-dropdown",{type:o.type.CLASSNAME,created:function(t){},attached:function(o){var r=e(o),d=r.next(".aui-list"),i=r.attr("data-alignment")||n.RIGHT,l=!!r.data("hasDropdown");0===d.length&&t.warn("Dropdown init failed. Could not find content. Printing culprit...",o),l||(r.data("hasDropdown",!0),new a({trigger:r,content:d,alignment:i,setMaxHeightToWindow:r.attr("data-contain-to-window"),hideOnScroll:r.attr("data-hide-on-scroll")||".issue-container"}))}})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dropdown/element/issue-actions-trigger.js' */
define("jira/dropdown/element/issue-actions-trigger",["jira/fragments/issueActionsFragment","jira/ajs/dropdown/dropdown","jira/skate","jquery"],function(r,e,n,s){function a(){var r={};return JIRA.Issues&&JIRA.Issues.Api&&(r.ajaxOptions={},r.ajaxOptions.formatError=JIRA.Issues.Api.showInlineIssueLoadError),r}var i=r;return n("issue-actions-trigger",{type:n.type.CLASSNAME,attached:function(r){var n=s(r),t={hideOnScroll:".issue-container",trigger:n,ajaxOptions:{dataType:"json",cache:!1,formatSuccess:i},onerror:function(r){r.layerController.initialized=!0,r.hide()}};t=s.extend(!0,t,a()),new e(t),n.addClass("trigger-happy")}})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dropdown/DropdownFactory.js' */
define("jira/dropdown/dropdown-factory",["jira/ajs/layer/layer-constants","jira/ajs/dropdown/dropdown","jquery","exports"],function(n,d,o,i){i.bindGenericDropdowns=o.noop,i.bindIssueActionsDds=o.noop,i.bindNavigatorOptionsDds=function(){var i=o("#navigator-options");d.create({trigger:i.find(".aui-dd-link"),content:i.find(".aui-list"),alignment:n.RIGHT}),i.find("a.aui-dd-link").linkedMenu()},i.bindConfigDashboardDds=function(){o("#dashboard").find(".aui-dd-parent").dropDown("Standard",{trigger:"a.aui-dd-link"})}}),AJS.namespace("JIRA.Dropdowns",null,require("jira/dropdown/dropdown-factory"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dropdown/initDropdowns.js' */
require(["jira/dropdown/element/default-dropdown","jira/dropdown/element/issue-actions-trigger","jira/dropdown/dropdown-factory","jquery"],function(o,d,n,r){r(function(){n.bindNavigatorOptionsDds(),n.bindConfigDashboardDds()})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jquery/plugins/togglefield/toggleField.js' */
!function(e){e.fn.toggleField=function(n){var t=this,n=e(n),r=function(){return n.prop("disabled",function(){return t.prop("checked")===!1?(t.parent().addClass("disabled"),!0):(t.parent().removeClass("disabled"),!1)}()),arguments.callee}();return e(document[this.attr("name")]).click(r).change(r),this}}(jQuery);;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/project/character-map.js' */
define("jira/util/strings/character-map",function(){var a={};return a[199]="C",a[231]="c",a[252]="u",a[251]="u",a[250]="u",a[249]="u",a[233]="e",a[234]="e",a[235]="e",a[232]="e",a[226]="a",a[228]="a",a[224]="a",a[229]="a",a[225]="a",a[239]="i",a[238]="i",a[236]="i",a[237]="i",a[196]="A",a[197]="A",a[201]="E",a[230]="ae",a[198]="Ae",a[244]="o",a[246]="o",a[242]="o",a[243]="o",a[220]="U",a[255]="Y",a[214]="O",a[241]="n",a[209]="N",a});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/project/ProjectKeyGenerator.js' */
define("jira/project/project-key-generator",["jira/util/strings/character-map","jira/lib/class","jquery","underscore"],function(e,t,n,r){function i(e){return e.join("").length}function h(e){return r.reject(e,function(e){return n.inArray(e,g)!==-1})}function s(e){var t="";return n.each(e,function(e,n){t+=n.charAt(0)}),t}function a(e){var t,n=!1;for(t=0;t<e.length;t++)if(u(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e}function u(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1}var g=["THE","A","AN","AS","AND","OF","OR"];return t.extend({init:function(e){e=n.extend({},e),this.desiredKeyLength="number"==typeof e.desiredKeyLength?e.desiredKeyLength:4,this.maxKeyLength="number"==typeof e.maxKeyLength?e.maxKeyLength:0},generateKey:function(t){if(t=n.trim(t),!t)return"";for(var r=[],u=0,g=t.length;u<g;u++){var c=e[t.charCodeAt(u)];r.push(c?c:t[u])}t=r.join("");var o=[];n.each(t.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&o.push(t))}),this.desiredKeyLength&&i(o)>this.desiredKeyLength&&(o=h(o));var f;if(0===o.length)f="";else if(1===o.length){var d=o[0];f=this.desiredKeyLength&&d.length>this.desiredKeyLength?a(d):d}else f=s(o);return this.maxKeyLength&&f.length>this.maxKeyLength&&(f=f.substr(0,this.maxKeyLength)),f}})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/project/namespace.js' */
AJS.namespace("JIRA.ProjectKeyGenerator",null,require("jira/project/project-key-generator"));;
;
/* module-key = 'jira.webresources:jira-global', location = 'includes/jira/project/templates/projectSample.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.CreateProject&&(JIRA.Templates.CreateProject={}),JIRA.Templates.CreateProject.projectSample=function(e,a){return e=e||{},'<div class="aui-message hint sample-project-container"><span class="aui-icon icon-hint"></span><p class="title">'+soy.$$escapeHtml("Project preview")+"</p><p>"+soy.$$escapeHtml("With the values you\'ve set, an issue in your project might look like this:")+'</p><div class="aui-panel sample-project"><div class="item-header"><div class="avatar"><img id="project-avatar" alt="" class="project-avatar-48" height="48" src="'+soy.$$escapeHtml(e.avatarUrl)+'" width="48"/></div><ul class="breadcrumbs"><li><a id="project-name-val">'+soy.$$escapeHtml(e.projectName)+'</a></li><li><a id="key-val">'+soy.$$escapeHtml(e.projectKey)+'</a></li></ul><h1 class="item-summary"><a>'+(e.issueTitle?soy.$$escapeHtml(e.issueTitle):soy.$$escapeHtml("Example"))+'</a></h1><div class="command-bar"></div></div></div></div>'};;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/field/templates/create-project-template-wrapper.js' */
define("jira/field/create-project/templates",[],function(){"use strict";return window.JIRA.Templates.CreateProject});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/project/ProjectSample.js' */
define("jira/project/project-sample",["jira/lib/class","jquery","jira/field/create-project/templates"],function(e,t,a){return e.extend({init:function(e){this.defaultName="My Project",this.defaultKey="MP",this.defaultAvatarSrc="",this.nameValue="",this.keyValue="",this.avatarSrc="",this.$container=e.element,this.$container.html(a.projectSample({projectName:this.defaultName,projectKey:this.defaultKey,issueName:e.issueName})),this.$sampleElement=this.$container.find(".sample-project"),this.$sampleElementName=this.$sampleElement.find("#project-name-val"),this.$sampleElementKey=this.$sampleElement.find("#key-val"),this.$sampleElementAvatar=this.$sampleElement.find("#project-avatar"),this.events=e.events,this.events.bind("updated.Name",t.proxy(function(){this.updateSampleName(arguments[1])},this)),this.events.bind("updated.Key",t.proxy(function(){this.updateSampleKey(arguments[1])},this)),this.events.bind("updated.Avatar",t.proxy(function(){this.updateSampleAvatar(arguments[1])},this))},_render:function(){var e=this.nameValue||this.defaultName,t=this.keyValue||this.defaultKey,a=this.avatarSrc||this.defaultAvatarSrc;t=(t||"")+"-1",t=t.toUpperCase(),this.$sampleElementName.text(e),this.$sampleElementKey.text(t),this.$sampleElementAvatar.attr("src",a)},updateSampleName:function(e){this.nameValue=t.trim(e),this._render()},updateSampleKey:function(e){this.keyValue=t.trim(e),this._render()},updateSampleAvatar:function(e){this.avatarSrc=e,this._render()}})}),AJS.namespace("JIRA.ProjectSample",null,require("jira/project/project-sample"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/field/CreateProjectField.js' */
define("jira/field/create-project-field",["jira/util/formatter","jira/lib/class","jira/ajs/dark-features","jira/project/project-key-generator","jira/project/project-sample","aui/inline-dialog","jquery","jira/field/create-project/templates","wrm/context-path"],function(e,t,i,n,a,r,s,o,l){return t.extend({TIMEOUT_MS:100,projectNames:[],maxNameLength:80,init:function(e){this.$element=e.element,this.$nameElement=this.$element.find("input.text[name='name']"),this.$keyElement=this.$element.find("input.text[name='key']"),this.$keyEditedElement=this.$element.find("input[name='keyEdited']"),this.$avatarElement=this.$element.find(".jira-inline-avatar-picker-trigger"),this.eventBus={src:s(this),trigger:function(e,t){this.src.trigger(e,t)},bind:function(e,t){this.src.bind(e,t)}};var t=+this.$keyElement.attr("maxlength");t||(t=10),this.keygen=new n({desiredKeyLength:4,maxKeyLength:t}),this.lastKeyValidated="",i.isEnabled("addproject.project.sample")&&(this.sample=new a({element:this.$element.find("#sample-project-container"),events:this.eventBus})),this.$keyElement.attr("style","text-transform: uppercase"),this.initialName=this.$nameElement.val(),this.initialKey=this.$keyElement.val(),this.$element.find(".error").addClass("description initial-error"),this.showInitialError(this.$nameElement),this.showInitialError(this.$keyElement),this.$nameElement.focus(s.proxy(this._bindNameHook,this)),this.$nameElement.blur(s.proxy(this._unbindHook,this)),this.$keyElement.focus(s.proxy(this._bindKeyHook,this)),this.$keyElement.blur(s.proxy(this._unbindHook,this)),this.$keyElement.blur(s.proxy(this.autofillKeyIfNeeded,this));var l=this.$keyElement.parent().find("#add-project-key-icon").removeAttr("target data-helplink");l.length&&new r(l,"project-key-help-popup",function(e,t,i){e.html(o.keyHelp()),i()},{width:330,offsetX:-30}),this.$avatarElement.size()&&(this.eventBus.trigger("updated.Avatar",this.$avatarElement.attr("src")),this.$avatarElement.bind("AvatarSelected",s.proxy(function(){this.eventBus.trigger("updated.Avatar",this.$avatarElement.attr("src"))},this))),this._loadExistingProjects()},_loadExistingProjects:function(){var e=this;s.ajax({url:l()+"/rest/api/latest/project",success:function(t){t=t||[];for(var i=0,n=t.length;i<n;i++)e.projectNames.push(t[i].name.toUpperCase())}})},_bindNameHook:function(e){this._bindHook(e,this.onNameTimeout)},_bindKeyHook:function(e){var t=s(e.target);t.data("lastValue",t.val()),this._bindHook(e,this.onKeyTimeout)},_bindHook:function(e,t){var i,n=this,a=s(e.target);i=function(){n._unbindHook(e),t.apply(n),a.is(":visible")&&a.data("checkHook",setTimeout(i,n.TIMEOUT_MS))},a.data("checkHook")||a.data("checkHook",setTimeout(i,0))},_unbindHook:function(e){var t=s(e.target);clearTimeout(t.data("checkHook")),t.removeData("checkHook")},shouldUpdateKey:function(){return"true"!=this.$keyEditedElement.val()},setKeyEdited:function(e){this.$keyElement.data("lastValue")!==e&&this.$keyEditedElement.val(e?"true":"false"),this.$keyElement.data("lastValue",e)},updateKey:function(e){this.$keyElement.val(e),this.validateKey(e),this.eventBus.trigger("updated.Key",e)},autofillKeyIfNeeded:function(){if(this.shouldUpdateKey()){var e=this.keygen.generateKey(this.$nameElement.val());e.length>1?this.updateKey(e):this.$keyElement.val("")}},onNameTimeout:function(){var e=this.$nameElement.val();this.validateName(e),this.eventBus.trigger("updated.Name",e),this.autofillKeyIfNeeded()},onKeyTimeout:function(){var e=this.$keyElement.val();this.setKeyEdited(e),this.validateKey(e),this.eventBus.trigger("updated.Key",e)},validateName:function(t){if(t!=this.initialName||!this.$nameElement.parent().find(".error").size()){if(t.length>this.maxNameLength)return void this.showInlineError(this.$nameElement,this.initialName,e.format("The project name must not exceed {0} characters in length.",this.maxNameLength));for(var i=0,n=this.projectNames.length;i<n;i++)if(t.toUpperCase()==this.projectNames[i])return void this.showInlineError(this.$nameElement,this.initialName,"A project with that name already exists.");this.hideInlineError(this.$nameElement)}},validateKey:function(e){var t=this,i=t.lastKeyValidated!==e;this.lastKeyValidated=e,i&&(e?s.ajax({url:l()+"/rest/api/latest/projectvalidate/key?key="+e.toUpperCase(),success:function(e){e.errors&&e.errors.projectKey?t.showInlineError(t.$keyElement,t.initialKey,e.errors.projectKey):t.hideInlineError(t.$keyElement)}}):t.hideInlineError(t.$keyElement))},showInlineError:function(e,t,i){var n=e.parent().find(".initial-error");if(e.val()===t&&n.length)this.showInitialError(e);else{var a=e.parent().find(".error.description");a.length||(a=s("<div class='error description'></div>"),e.parent().append(a)),a.text(i),e.parent().find(".description").hide(),n.hide(),a.show()}},hideInlineError:function(e){e.parent().find(".description").show(),e.parent().find(".error.description").hide()},showInitialError:function(e){var t=e.parent().find(".initial-error");t.length&&(e.parent().find(".description").hide(),e.parent().find(".error.description").hide(),t.show())}})}),AJS.namespace("JIRA.CreateProjectField",null,require("jira/field/create-project-field"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/field/initCreateProjectField.js' */
define("jira/field/init-create-project-field",["jira/field/create-project-field","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,t,n,r){i.bind(t.NEW_CONTENT_ADDED,function(i,t,a){a!==n.panelRefreshed&&t.find("#add-project-fields").each(function(){new e({element:r(this)})})})});;
;
/* module-key = 'jira.webresources:jira-global', location = 'includes/jira/field/templates/createProject.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.CreateProject&&(JIRA.Templates.CreateProject={}),JIRA.Templates.CreateProject.keyHelp=function(e,t){return'<div class="project-key-help"><p><b>'+soy.$$escapeHtml("What\'s a project key?")+"</b></p><ul><li>"+soy.$$escapeHtml("It prefixes each issue in the project")+"</li><li>"+soy.$$escapeHtml("It can be changed, but this is not a trivial task")+"</li></ul></div>"};;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/field/init/init-create-project-field-webresource.js' */
require("jira/field/init-create-project-field");;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jquery"),d=[];return{current:null,addInstance:function(){d.push(this)},hideInstances:function(){var i=this;t(d).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(i){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var n=this.dropdown;o()||i||setTimeout(function(){var i=t(window),o=n.offset().top+n.prop("offsetHeight")-i.height()+10;i.scrollTop()<o&&t("html,body").animate({scrollTop:o},300,"linear")},100)}},hideDropdown:function(){this.displayed!==!1&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=t(o),this.dropdown.css({display:"none"}),t(document).keydown(function(i){9===i.keyCode&&n.hideDropdown()}),i.target?t.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",t(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),t(document.body).click(function(){n.displayed&&n.hideDropdown()})}}}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/objects","jquery","jira/featureflags/feature-manager"],function(e,t,n,o){return function(){var i,s=function(e,t){s.t&&(clearTimeout(s.t),s.t=void 0),s.t=setTimeout(e,1e3*t)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeInputField:function(e,t){e&&t&&(this.field.val(t).focus(),this.hiddenField&&(this.hiddenField.val(e),this.hiddenField.trigger("change")),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(n){var o=this,i=t.copyObject(n);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){o.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&n.error&&n.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function t(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),n(this).removeClass("active")}function r(e){var t=d.suggestionNodes[e.data.index],n=Array.isArray(t)&&t.length>2;if(d.strictModeEnabledForUserPickers){var o=d.suggestionNodes[e.data.index];d.completeInputField(o[1],o[3])}else if(n){var i=t.length>3?t[3]:void 0;d.completeInputField(t[1],i)}else d.completeField&&d.completeField(d.suggestionNodes[d.selectedIndex][1])}var d=this,l=function(e,t){var n=d.autoSelectFirst===!1?-1:0;return d.allowArrowCarousel?e>t?n:e<n?t:e:e>t?t:e<n?(d.responseContainer.scrollTop(0),n):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&(h()||p()?g(d.suggestionNodes[d.selectedIndex])||d.suggestionNodes[d.selectedIndex][0].addClass("active"):d.suggestionNodes[d.selectedIndex][0].addClass("active"))},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},c=function(){return o.isFeatureEnabled("jira.jql.autoselectfirst")},p=function(){return o.isFeatureEnabled("com.atlassian.rm.jpo.soft-deprecate-jql-parenty-clauses")},h=function(){return o.isFeatureEnabled("com.atlassian.rm.jpo.soft-deprecate-jql-parent-link")},f=function(e){return p()&&g(e)||h()&&g(e)},g=function(e){return e.length>0&&e[0].length>0&&"className"in e[0][0]&&e[0][0].className.includes("deprecated-dropdown-option")},v=function(e){if(d.responseContainer.is(":visible")&&13===e.keyCode){if(u()&&!d.pendingRequest){var t=d.suggestionNodes[d.selectedIndex][1],n=Array.isArray(t)&&t.length>2;if(f(d.suggestionNodes[d.selectedIndex]))return e.preventDefault(),void e.stopPropagation();if(d.strictModeEnabledForUserPickers){var o=d.suggestionNodes[d.selectedIndex];d.completeInputField(o[1],o[3])}else if(n){var i=t.length>3?t[3]:void 0;d.completeInputField(t[1],i)}else d.completeField&&d.completeField(d.suggestionNodes[d.selectedIndex][1]);c()&&d.dispatcher(d.field.val())}e.preventDefault(),e.stopPropagation()}},m=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),40===e.keyCode){if(a(d.selectedIndex+1),d.selectedIndex>=0){var t=d.responseContainer.height(),n=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();n-t>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-t+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(38===e.keyCode){if(a(d.selectedIndex-1),d.selectedIndex>=0){var o=d.suggestionNodes[d.selectedIndex][0].position().top;o<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+o-2)}e.preventDefault()}else if(9===e.keyCode)if(u()){var i=d.suggestionNodes[d.selectedIndex][1],s=Array.isArray(i)&&i.length>2;if(d.strictModeEnabledForUserPickers){var r=d.suggestionNodes[d.selectedIndex];d.completeInputField(r[1],r[3])}else if(s){var l=i.length>3?i[3]:void 0;d.completeInputField(i[1],l)}else d.completeField&&d.completeField(d.suggestionNodes[d.selectedIndex][1]);e.preventDefault()}else d.dropdownController.hideDropdown()};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var C=0;C<d.suggestionNodes.length;C++){var w={instance:this,index:C};f(d.suggestionNodes[C])?this.suggestionNodes[C][0].unbind("click").unbind("mouseover").unbind("mouseout").bind("mousedown",function(e){e.preventDefault()}):this.suggestionNodes[C][0].bind("mouseover",w,t).bind("mouseout",w,s).bind("click",w,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(n(this.field).keypress(v),n(this.field).keydown(m),this.keyboardHandlerBinded=!0),a(d.autoSelectFirst===!1?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=n(document.createElement("div")),this.responseContainer.addClass("suggestions medium-long-field"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(t){return this.field.val().length>=this.minQueryLength&&(t.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||38!==t.keyCode&&40!==t.keyCode)||e.call(this)),t}}(),addMultiSelectAdvice:function(e){var t=this,o=function(e){if(!o.isAlerting){o.isAlerting=!0;var i=n(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+e+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),o.isAlerting=!1})},4)})}};n.aop.before({target:this,method:"dispatcher"},function(t){var o=this.field.val();return t[0]=n.trim(o.slice(o.lastIndexOf(e)+1)),t}),n.aop.before({target:this,method:"completeInputField"},function(t){var i=t[0],s=this.field.val().split(e),r=n(s).map(function(){return n.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(o(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){n.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),n.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready")}),e}),n.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeInputField"},function(e){return this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeField"},function(e){return this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&27!==e.keyCode||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),27===e.keyCode&&e.stopPropagation()),e})},init:function(e){var t=this,o=13,s=9;this.set(e),this.field=this.field||n("#"+this.fieldID);var r=this.field.val();this.field.attr("autocomplete","off").keyup(function(e){t.disabled||(e.keyCode!==o&&e.keyCode!==s&&t.strictModeEnabledForUserPickers&&!t.field.val()&&t.hiddenField.val(""),t.keyUpHandler(e))}).keydown(function(e){r=t.field.val();var n=27;e.keyCode===n&&t.responseContainer&&t.responseContainer.is(":visible")&&e.preventDefault()}).click(function(e){i===t&&e.stopPropagation()}).blur(function(){t.pendingRequest&&t.pendingRequest.abort()}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var s=t.begetObject(e);return s.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var s=t.getAjaxParams();s.data.query=e,s.success=function(s){t.saveResponse(e,s),t.responseContainer.scrollTop(0),t.renderSuggestions(s)},t._makeRequest(s)},t.queryDelay))},s.getAjaxParams=function(){},s.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},s.saveResponse=function(e,t){"string"==typeof e&&"object"==typeof t&&(this.requested||(this.requested={}),this.requested[e]=t)},s}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this)),a=n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container");a.find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId),t&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", "))))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),s.issuePickerEnabled===!0&&d({fieldID:s.fieldId,delimChar:s.singleSelectOnly===!0?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","jquery"],function(e,t,i,r,a,o){var s=function(t){function s(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var n=a.begetObject(e),l=!0;return n.getAjaxParams=function(){var e={url:contextPath+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"};return l&&(e.headers={"x-atlassian-force-account-id":"true"}),e},n.renderSuggestions=function(e){if(s(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,a=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=o("<ul/>").appendTo(this.responseContainer),o(e.users).each(function(){l?a.push([o("<li/>").html(this.html).appendTo(t),this.accountId,this.accountId,this.displayName]):a.push([o("<li/>").html(this.html).appendTo(t),null!=this.name?this.name:"",this.accountId,this.displayName])})),e.footer&&this.responseContainer.append(o("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),a.length>0&&(n.addSuggestionControls(a),o(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),a},t.minQueryLength=2,t.queryDelay=.25,n.init(t),n};return s.init=function(e){o("fieldset.user-picker-params",e).each(function(){var i=t(o(this)),r=i.fieldId||i.fieldName,a=o("#"+r+"_container");a.find("a.popup-trigger").click(function(e){var t,s=contextPath;if(e.preventDefault(),i.formName||(i.formName=a.find("#"+r).parents("form").attr("name")),s+=i.actionToOpen?i.actionToOpen:"/secure/popups/UserPickerBrowser.jspa",s+="?formName="+i.formName+"&",s+="multiSelect="+i.multiSelect+"&",s+="decorator=popup&",s+="element="+r,i.fieldConfigId&&(s+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(o.isArray(i.projectId))for(var n in i.projectId)s+="&projectId="+n;else s+="&projectId="+i.projectId;t=window.open(s,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()});var n=e?e.find("#"+r):null,l=e?e.find("#hidden-"+r):null,d=i["enable-strict-mode-for-this-user-picker"];i.userPickerEnabled===!0&&s({field:n,hiddenField:l,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:i.multiSelect===!1?void 0:",",ajaxData:{fieldName:i.fieldName},strictModeEnabledForUserPickers:d})})},s}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t,i){i!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(JIRA.UserAutoComplete.init(t),JIRA.IssueAutoComplete.init(t))}),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t,i){i!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&AJS.$("fieldset.user-searcher-params",t).each(function(){var e=JIRA.parseOptionsFromFieldset(AJS.$(this)),i=AJS.$("#"+e.fieldId+"_container",t);if(e.userPickerEnabled===!0)var r=JIRA.UserAutoComplete({fieldID:e.fieldId,delimChar:e.multiSelect===!0?",":void 0,ajaxData:{fieldName:e.fieldName}});var s=function(i){var s=AJS.$("#"+e.fieldId,t),o=AJS.$("#"+e.fieldId+"Image",t),l=AJS.$("#"+e.fieldId+"GroupImage",t),a=AJS.$("#"+e.fieldId+"_desc",t);"select.list.none"===i?(s.val("").attr("disabled","true"),o.hide(),l.hide(),a.hide()):(s.removeAttr("disabled"),"select.list.group"===i?(o.hide(),l.show(),e.userPickerEnabled===!0&&(r.disable(),a.hide())):(o.show(),l.hide(),e.userPickerEnabled===!0&&(r.enable(),a.show())))};AJS.$("#"+e.userSelect,t).change(function(){var e=AJS.$(this).find("option:selected").attr("rel");s(e)}).find("option:selected").each(function(){s(AJS.$(this).attr("rel"))}),i.find("a.user-popup-trigger").click(function(t){var i=contextPath+"/secure/popups/UserPickerBrowser.jspa?";i+="formName="+e.formName+"&",i+="multiSelect="+e.multiSelect+"&",i+="decorator=popup&",i+="element="+e.fieldId;var r=window.open(i,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");r.opener=self,r.focus(),t.preventDefault()}),i.find("a.group-popup-trigger").click(function(t){var i=contextPath+"/secure/popups/GroupPickerBrowser.jspa?";i+="formName="+e.formName+"&",i+="multiSelect="+e.multiSelect+"&",i+="decorator=popup&",i+="element="+e.fieldId;var r=window.open(i,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");r.opener=self,r.focus(),t.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function(e,t){t("group-label-lozenge",{type:t.type.CLASSNAME,attached:function(t){e(t).tooltip({gravity:"w",html:!0})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = 'includes/jira/admin/group-browser/group-label-lozenge.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),JIRA.Templates.groupLabelLozenge=function(e,l){return""+aui.lozenges.lozenge({text:e.label.text,title:e.label.title,isSubtle:!0,extraClasses:"group-label-lozenge"})};;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function(i){i(function(){i(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:!1})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = 'includes/jira/field/templates/groupPickerUtil.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.GroupPickerUtil&&(JIRA.Templates.GroupPickerUtil={}),JIRA.Templates.GroupPickerUtil.formatResponseWithLabels=function(e,s){return""+JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(e,{showLabels:!0}))},JIRA.Templates.GroupPickerUtil.formatResponse=function(e,s){var t='<div class="group-suggestion-item"><span class="group-suggestion-item__name">'+soy.$$filterNoAutoescape(e.html)+"</span>";if(e.showLabels){t+='<span class="group-suggestion-item__labels group-labels-lozenges">';for(var a=e.labels,o=a.length,l=0;l<o;l++){var p=a[l];t+=JIRA.Templates.groupLabelLozenge({label:p})+" "}t+="</span>"}return t+="</div>"};;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/group-picker-util-template-wrapper.js' */
define("jira/field/group-picker-util/templates",[],function(){"use strict";return window.JIRA.Templates.GroupPickerUtil});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
define("jira/field/group-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery","jira/field/group-picker-util/templates"],function(e,t,i,r){var n=function(n,a){var s=[],u=a?r.formatResponseWithLabels:r.formatResponse;return i(n).each(function(r,n){var a=new t({weight:r,label:n.header});i(n.groups).each(function(){a.addItem(new e({value:this.name,label:this.name,title:this.name,html:u(this),highlighted:!0}))}),s.push(a)}),s};return{formatResponseWithLabels:function(e){return n(e,!0)},formatResponse:function(e,t){return n(e,t)},formatResponseWithoutLabels:function(e){return n(e,!1)}}}),AJS.namespace("JIRA.GroupPickerUtil",null,require("jira/field/group-picker-util"));;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
define("jira/field/init-multi-group-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,r,s){function n(i){i.find(".js-default-multi-group-picker").each(function(){var i=e(this),a=i.data("show-labels")===!0,r=i.data("user-name");new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,ajaxOptions:{data:function(e){return{userName:r,query:e,exclude:i.val()}},url:contextPath+"/rest/api/2/groups/picker",query:!0,formatResponse:a?s.formatResponseWithLabels:s.formatResponseWithoutLabels}})})}r.bind(a.NEW_CONTENT_ADDED,function(e,t,a){a!==i.panelRefreshed&&n(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
define("jira/field/init-single-group-pickers",["jira/ajs/select/single-select","jquery","jira/ajs/list/item-descriptor","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,n,r,s){function l(a){a.find(".js-default-single-group-picker").each(function(){var a=t(this),n=a.find("option[data-empty]"),r=a.data("show-labels")===!0,l=a.data("user-name");new e({element:this,itemAttrDisplayed:"label",revertOnInvalid:!0,ajaxOptions:{data:function(e){return{userName:l,query:e,exclude:a.val()}},url:contextPath+"/rest/api/2/groups/picker",query:!0,formatResponse:function(e){var t=s.formatResponse(e,r);return n.length&&""!==a.val()&&t.push(new i({value:"",label:n.text(),highlighted:!0})),t}}})})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/init/init-group-pickers-webresource.js' */
require("jira/field/init-multi-group-pickers"),require("jira/field/init-single-group-pickers");;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,t,i){function a(t,a){i(t).each(function(){a.addItem(new e({value:this.accountId,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))})}return{formatResponse:function(a){var r=[];return i(a).each(function(a,n){var l=new t({weight:a,label:n.footer});i(n.users).each(function(){l.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),r.push(l)}),r},formatResponseByAccountId:function(e){var r=[];return i(e).each(function(e,i){var n=new t({weight:e,label:i.footer});a(i.users,n),r.push(n)}),r},inviteCapableFormatResponseByAccountId:function(e){var r=[];return i(e).each(function(e,i){var n=new t({weight:e,label:i.footer,showLabel:i.total>0});a(i.users,n),r.push(n)}),r}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/rolePickerUtils.js' */
define("jira/field/role-picker-utils",["jira/ajs/list/item-descriptor","jira/analytics/web-client","jquery"],function(e,i,s){return{formatResponse:function(r){r&&i.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDown",actionSubject:"dropdown",action:"clicked"});var t=[];return s(r).each(function(){var i="";this.currentUserRole&&(i='<div class="flex-row"><div class="current-user">'+"You"+"</div></div>");var s='<div class="add-issue-restriction-flex-body"><div class="add-issue-restriction-role-picker flex-column"><div><span class="add-issue-restriction-name">'+AJS.escapeHtml(String(this.name))+'</span></div><div><span class="add-issue-restriction-description">'+AJS.escapeHtml(String(this.description))+"</span></div></div> "+i+"</div>";t.push(new e({value:this.id,label:this.name,allowDuplicate:!1,html:s}))}),t}}}),AJS.namespace("JIRA.RolePickerUtils",null,require("jira/field/role-picker-utils"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","jira/ajs/select/single-select","jira/ajs/select/suggestions/invite-capable-suggest-handler","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,a,s,n,r,i,u){function o(s){var n="/rest/api/1.0/users/picker";e(".js-default-user-picker",s).each(function(){var a=e(this);if(!a.data("aui-ss")){var s={showAvatar:!0,excludeConnectUsers:a.data("exclude-connect-users")},r=a.data("inputValue");new t({element:a,submitInputVal:!0,showDropdownButton:!!a.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,data:s,formatResponse:i.formatResponse},inputText:r})}}),e(".js-default-user-picker-by-account-id",s).each(function(){var a=e(this);if(!a.data("aui-ss")){var s={showAvatar:!0,excludeConnectUsers:a.data("exclude-connect-users")},r=a.data("inputValue");new t({element:a,submitInputVal:!0,showDropdownButton:!!a.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,headers:{"x-atlassian-force-account-id":!0},data:s,formatResponse:i.formatResponseByAccountId},inputText:r})}}),e(".js-invite-capable-user-picker-by-account-id",s).each(function(){var s=e(this);if(!s.data("aui-ss")){var r={showAvatar:!0,excludeConnectUsers:s.data("exclude-connect-users")},o=s.data("inputValue");new t({element:s,submitInputVal:!0,showDropdownButton:!!s.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,headers:{"x-atlassian-force-account-id":!0},data:r,formatResponse:i.inviteCapableFormatResponseByAccountId},inputText:o,suggestionsHandler:a})}})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,a){a!==s.panelRefreshed&&o(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),a=e("jira/ajs/select/multi-select"),i=e("jira/util/formatter");return a.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:contextPath+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,i,n,r,s,a){function u(i){i.find(".js-default-multi-user-picker").each(function(){e(this);new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:contextPath+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e}},formatResponse:a.formatResponse}})}),i.find(".js-default-multi-user-picker-by-accountId").each(function(){e(this);new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:contextPath+"/rest/api/1.0/users/picker",query:!0,headers:{"x-atlassian-force-account-id":!0},data:function(e){return{showAvatar:!0,query:e}},formatResponse:a.formatResponseByAccountId}})})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiRolePickers.js' */
define("jira/field/init-multi-role-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/role-picker-utils","jira/analytics/web-client"],function(e,t,i,s,n,c,o){function r(e){e.find(".js-default-multi-role-picker").each(function(){AJS.$(".js-default-multi-role-picker").each(function(){const e=this.getAttribute("data-project-key")||null;e&&(o.sendScreenEvent({name:"issueRestrictionsDropDown",attributes:{projectKey:e,projectType:"software"}}),new AJS.MultiSelect({element:this,itemAttrDisplayed:"label",showDropdownButton:!0,ajaxOptions:{data:function(e){return{query:e}},error:function(t){o.sendOperationalEvent({source:"issueRestrictionsDropDown",actionSubject:"issueRestrictionRoleDetailsFailure",action:"clicked",attributes:{location:"global-issue-create",projectKey:e,error:t}})}.bind(this),url:contextPath+"/rest/api/3/project/"+e+"/internal/roledetails",query:!1,headers:{"x-atlassian-force-account-id":!0},formatResponse:c.formatResponse,removeOnUnSelect:!0,allowDuplicate:!1}}),this.selected=function(){o.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDownRestrictionsAdded",actionSubject:"dropdown",action:"clicked",attributes:{location:"global-issue-create",projectKey:e}})},this.unselect=function(){o.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDownRestrictionsRemoved",actionSubject:"dropdown",action:"clicked",attributes:{location:"global-issue-create",projectKey:e}})},this.$select=AJS.$("#issuerestriction-multi-select"),this.$select.bind("selected",this.selected),this.$select.bind("unselect",this.unselect)),AJS.$(this).attr("select2","true")})})}n.bind(s.NEW_CONTENT_ADDED,function(e,t,s){s!==i.panelRefreshed&&r(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers"),require("jira/field/init-multi-role-pickers");;
;
/* module-key = 'jira.webresources:team-pickers', location = '/includes/jira/field/team/utils.js' */
define("jira/field/team/utils",["jquery","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor"],function(e,a,t){return{formatResponse:function(e){const i=new t({weight:1,label:"Suggestions"});return e.forEach(function(e){i.addItem(new a({value:e.id.replace(/^ari:cloud:teams::team\//,"").replace(/^ari:cloud:identity::team\//,""),label:e.displayName,icon:e.smallAvatarImageUrl,allowDuplicate:!1,highlighted:!0}))}),[i]},formatURSResponse:function(e){const i=new t({weight:1,label:"Suggestions"});return e.recommendedUsers.forEach(function(e){i.addItem(new a({value:e.id.replace(/^ari:cloud:teams::team\//,"").replace(/^ari:cloud:identity::team\//,""),label:e.displayName,icon:e.smallAvatarImageUrl,allowDuplicate:!1,highlighted:!0}))}),[i]}}});;
;
/* module-key = 'jira.webresources:team-pickers', location = '/includes/jira/field/team/initPickers.js' */
define("jira/field/team/init-pickers",["jquery","jira/ajs/select/single-select","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/team/utils","jira/analytics/web-client","jira/featureflags/feature-manager"],function(e,t,n,a,i,r,c,s,o){function u(e){const t="/gateway/api/graphql",n="query orgId($cloudIds: [ID!]) { tenantContexts(cloudIds: $cloudIds) { orgId } }";return fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:n,variables:{cloudIds:[e]}})}).then(function(e){return e.ok?e.json():null}).catch(function(e){return null})}function l(e,t){return{url:"/gateway/api/v1/recommendations",query:!0,type:"POST",contentType:"application/json; charset=utf-8",data:function(n){return JSON.stringify({includeGroups:!1,includeTeams:!0,includeUsers:!1,maxNumberOfResults:100,performSearchQueryOnly:!1,searchQuery:{queryString:n},context:{contextType:"team",principalId:"Context",productKey:"jira",siteId:t,organizationId:e}})},formatResponse:c.formatURSResponse}}function d(n,a,i){const r=l(n,a),c={itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,showIcon:!1,ajaxOptions:r};i.find(".js-default-team-picker").each(function(){const n=this;new t(Object.assign({element:n},c));var a=!1;e(n).change(function(){a=!0,s.sendUIEvent({source:"QuickCreateIssue",actionSubject:"userPicker",action:"clicked",attributes:{context:"team"}})});const i=e(n).parent().find("input");e(i).focus(function(){a=!1}),e(i).blur(function(){a||s.sendUIEvent({source:"QuickCreateIssue",actionSubject:"userPicker",action:"cancelled",attributes:{context:"team"}})})})}r.bind(i.NEW_CONTENT_ADDED,function(e,t,n){var i,r=AJS.Meta.get("cloud-id");n!==a.panelRefreshed&&u(r).then(function(e){e&&e.data&&e.data.tenantContexts&&(i=e.data.tenantContexts[0].orgId),d(i,r,t)})})});;
;
/* module-key = 'jira.webresources:ie-imitation-placeholder', location = '/includes/jira/field/IEImitationPlaceholder.js' */
require(["jquery"],function(e){e.fn.ieImitationPlaceholder=function(){function a(){var a=e(this);""===a.val()&&(a.val(a.attr("placeholder")),a.addClass("input-placeholder"))}function l(){var a=e(this);a.val()===a.attr("placeholder")&&(a.val(""),a.removeClass("input-placeholder"))}function i(){t.each(l)}if(e.browser.msie){var r=this,t=r.find("[placeholder]");t.focus(l),t.blur(a),r.submit(i),t.each(a)}}});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
define("jira/field/project-issue-type-select",["jira/lib/class"],function(e){return e.extend({init:function(e){var s,t=this;this.$project=e.project,this.issueTypeSelect=e.issueTypeSelect,this.$projectIssueTypesSchemes=e.projectIssueTypesSchemes,this.$issueTypeSchemeIssueDefaults=e.issueTypeSchemeIssueDefaults,this.$defaultIssueTypes=e.defaultIssueTypes,this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html()),this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]"),this.defaultIssueTypes=JSON.parse(this.$defaultIssueTypes.html()||"[]"),t.$project.length>0&&(s=t.$project.val(),0===t.$projectIssueTypesSchemes.length?t.setIssueTypeForProject(s):t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(s)),this.$project.change(function(){var e=t.$project.val();0===t.$projectIssueTypesSchemes.length?t.setIssueTypeForProject(e):t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(e))}))},getIssueTypeSchemeForProject:function(e){return this.projectIssueTypeSchemes[e]},getDefaultIssueTypeForProject:function(e){return this.defaultIssueTypes[e]},getDefaultIssueTypeForProjectWithSchemeId:function(e){return this.issueTypesSchemeDefaults[e]},setIssueTypeForProject:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueTypeWithProjectId(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setIssueTypeScheme:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueType(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueTypeWithProjectId:function(e){var s=this.getDefaultIssueTypeForProject(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)},setDefaultIssueType:function(e){var s=this.getDefaultIssueTypeForProjectWithSchemeId(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)}})}),AJS.namespace("JIRA.ProjectIssueTypeSelect",null,require("jira/field/project-issue-type-select"));;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
define("jira/field/init-project-issue-type-select",["jira/ajs/select/suggestion-collection-model","jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/project-issue-type-select"],function(e,t,s,i,l,r,d){function n(i){var l=i||t("body");l.find(".issuetype-field").each(function(i){var r=l.find(".project-field, .project-field-readonly"),n=t(this),a=l.find("#"+n.attr("id")+"-projects"),o=l.find("#"+n.attr("id")+"-defaults"),p=l.find(".qf-field.qf-field-issuetype"),u=l.find("input#request-or-issue-type-field"),f=l.find("div#request-or-issue-type-field-options");if(u.length){var c=new s({element:u,revertOnInvalid:!0,model:e});p.hide(),u.data("options",f.data("suggestions"));var y=l.find("input.request-type-field"),j=c.model.selectedDescriptors&&c.model.selectedDescriptors[0];j&&(y.attr("value",j.properties.payload.requestTypeKey),n.attr("value",j.properties.payload.issueTypeId))}else{var v=new s({element:n,revertOnInvalid:!0,model:e});v.model.remove(""),r.length>0&&new d({project:r.eq(i),issueTypeSelect:v,projectIssueTypesSchemes:a,issueTypeSchemeIssueDefaults:o,defaultIssueTypes:o})}})}r.bind(l.NEW_CONTENT_ADDED,function(e,t,s){s!==i.panelRefreshed&&n(t)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initIssueTypePickers.js' */
;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
define("jira/field/init-project-pickers",["jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t,l){function s(n){n.find(".project-field").each(function(){new e({element:this,revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:i})})}l.bind(t.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/init/init-jira-project-issuetype-fields-webresource.js' */
require("jira/field/init-project-issue-type-select"),require("jira/field/init-project-pickers");;
;
/* module-key = 'jira.webresources:jira-fields', location = 'includes/jira/field/field-templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),JIRA.Templates.Fields.username=function(e,s){return""+(e.escape?soy.$$escapeHtml(e.displayName):soy.$$filterNoAutoescape(e.displayName))},JIRA.Templates.Fields.recipientUsername=function(e,s){return'<li data-username="'+soy.$$escapeHtml(e.username)+'" title='+soy.$$escapeHtml(e.username)+'><span><span class="user-hover" rel="'+soy.$$escapeHtml(e.username)+'"><img alt="" src="'+soy.$$escapeHtml(e.icon)+'" title="'+JIRA.Templates.Fields.username(e)+'"><span title="'+JIRA.Templates.Fields.username(e)+'">'+JIRA.Templates.Fields.username(e)+"</span></span>"+(e.readOnly?"":'<button type="button" class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml(AJS.format("Remove watcher: {0}",e.username))+"</span></button>")+"</span></li>"},JIRA.Templates.Fields.recipientEmail=function(e,s){return'<li data-email="'+soy.$$escapeHtml(e.email)+'" title='+soy.$$escapeHtml(e.email)+'><span><img src="'+soy.$$escapeHtml(e.icon)+'" title="'+soy.$$escapeHtml(e.email)+'"><span title="'+soy.$$escapeHtml(e.email)+'">'+soy.$$escapeHtml(e.email)+'</span><span class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete"></span></span></span></li>'};;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPickerFactory.js' */
define("jira/field/label-picker-factory",["jira/field/label-picker","jira/data/parse-options-from-fieldset","jquery","exports"],function(e,i,t,a){a.createPicker=function(a,r){var s=i(a),d=t("#"+s.id,r),l=s.issueId,c={};/customfield_\d/.test(s.id)&&(c.customFieldId=parseInt(s.id.replace("customfield_",""),10)),new e({element:d,ajaxOptions:{url:contextPath+"/rest/api/1.0/labels"+(l?"/"+l:"")+"/suggest",data:c}})}});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.Item.js' */
define("jira/field/multi-user-list-picker/item",["jira/util/data/meta","jira/ajs/control","jquery"],function(e,t,i){return t.extend({init:function(e){this._setOptions(e),this.$lozenge=this._render("item"),this.$removeButton=this.$lozenge.find(".remove-recipient"),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$lozenge.prependTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{item:function(){var t,n=this.options.descriptor;return n.noExactMatch()!==!0?(t={escape:!1,username:n.value(),icon:n.icon(),displayName:AJS.escapeHtml(n.label())},i(JIRA.Templates.Fields.recipientUsername(t))):(t={email:n.value(),icon:e.get("default-avatar-url")},i(JIRA.Templates.Fields.recipientEmail(t)))}},_events:{instance:{remove:function(){this.$lozenge.remove()}},removeButton:{click:function(e){e.stopPropagation(),this.trigger("remove")}}}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.js' */
define("jira/field/multi-user-list-picker",["jira/util/formatter","jira/field/multi-user-list-picker/item","jira/ajs/select/suggestions/user-list-suggest-handler","jira/ajs/select/multi-select","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jira/ajs/group","jquery"],function(e,t,i,r,s,n,a,l){return r.extend({init:function(r){function u(e){var t=[];return l(e).each(function(e,i){var r=new n({weight:e,label:i.footer});l(i.users).each(function(){r.addItem(new s({value:this.accountId,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),t.push(r)}),t}var o="/rest/api/1.0/users/picker";l.extend(r,{itemAttrDisplayed:"label",userEnteredOptionsMsg:"Email address",showDropdownButton:!1,removeOnUnSelect:!0,ajaxOptions:{url:contextPath+o,query:!0,headers:{"x-atlassian-force-account-id":!0},data:{showAvatar:!0},formatResponse:u},suggestionsHandler:i,itemGroup:new a,itemBuilder:function(e){return new t({descriptor:e,container:this.$selectedItemsContainer})}}),this._super(r)},_createFurniture:function(e){this._super(e),this.options.description&&this._render("description",this.options.description).insertAfter(this.$field)},updateItemsIndent:l.noop,_renders:{selectedItemsWrapper:function(){return l('<div class="recipients" />')},selectedItemsContainer:function(){return l("<ol />")},description:function(e){return l("<div />").addClass("description").text(e)}}})}),AJS.namespace("JIRA.MultiUserListPicker",null,require("jira/field/multi-user-list-picker")),AJS.namespace("JIRA.MultiUserListPicker.Item",null,require("jira/field/multi-user-list-picker/item"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCascadingSelects.js' */
define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function a(i){e(i||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){function i(){var i,n=t.find("option:selected").attr("class");n!==a&&(i=e("<span />").insertAfter(d),d.detach(),d.find("option").each(function(e,i){i.parentNode.removeChild(this)}),d.insertAfter(i),i.remove(),c.filter("."+t.find("option:selected").attr("class")).appendTo(d),s.hasClass(t.find("option:selected").attr("class"))?d.val(s.val()):d.val(d.find("option:first").val()),a=n)}var n=e(this),t=n.find(".cascadingselect-parent"),a=(t.find("option"),""),d=n.find(".cascadingselect-child"),c=d.find("option"),s=d.find(":selected");t.bind("cascadingSelectChanged",i).change(function(){e(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&a(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/ComponentPicker.js' */
define("jira/field/component-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,n,s,i,r){return s.extend({init:function(e){this._super(e),this.suggestionsHandler=new n(this.options,this.model)},_getDefaultOptions:function(t){var n=!1;return t&&t.element&&(n=r(t.element).data("create-permission")),n?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Component"}):this._super(t)},_selectionHandler:function(e,n){var s=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor"),o=i.find(s,function(e){return e.label()===r.label()});o||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Component.new.selected",[r.value()])),this._super(e,n)}})}),AJS.namespace("JIRA.ComponentPicker",null,require("jira/field/component-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initComponentPickers.js' */
define("jira/field/init-component-pickers",["jira/field/component-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,n,r,t,i,o){function l(r){new e({element:r,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid component.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var n,r=o(e);return n=r.is("select")?r:r.find("select")}function c(e,n){n=n||s.join(", "),o(n,e).each(function(){var e=a(this);e.length&&l(e)})}var s=["div.aui-field-componentspicker.frother-control-renderer","td.aui-field-componentspicker.frother-control-renderer","tr.aui-field-componentspicker.frother-control-renderer"];r.bind(t.NEW_CONTENT_ADDED,function(e,n,r){r!==i.panelRefreshed&&c(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initMultiselectPickers.js' */
define("jira/field/init-multi-select-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/util/formatter"],function(e,t,i,n,l,r){function s(e){new t({element:e,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,submitInputVal:!0,expandAllResults:!0})}function a(t){var i,n=e(t);return i=n.is("select")?n:n.find("select")}function u(t,i){i=i||c.join(", "),e(i,t).each(function(){var e=a(this);e.length&&s(e)})}var c=["div.aui-field-multiselectpicker.frother-control-renderer"];l.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initDatePickers.js' */
define("jira/field/init-date-pickers",["jquery","jira/data/parse-options-from-fieldset","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,t,d,n){function a(t){e(t||document.body).find("div.aui-field-datepicker").add("tr.aui-field-datepicker").add("td.aui-field-datepicker").each(function(){function d(){a.prop("disabled",r.is(":checked"))}var n=e(this),a=n.find("input:text"),r=n.find("#useCurrentDate"),f=i(n.find("fieldset.datepicker-params"));f.context=t,Calendar.setup(f),r.length&&(d(),r.click(d))})}n.bind(d.NEW_CONTENT_ADDED,function(e,i,d){d!==t.panelRefreshed&&a(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLegacyGroupPickers.js' */
define("jira/field/init-legacy-group-pickers",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,r,t){function n(i){e(i||document.body).find("div.aui-field-grouppicker").add("tr.aui-field-grouppicker").add("td.aui-field-grouppicker").each(function(){function i(e){e.preventDefault(),window.open(n,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes")}var r=e(this),t=r.find("a.grouppicker-trigger"),n=t.attr("href");t.click(i)})}t.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==i.panelRefreshed&&n(r)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initIssuePickers.js' */
define("jira/field/init-issue-pickers",["jira/field/issue-picker","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/util/formatter"],function(e,i,n,t,s,r){function u(i){s(i||document.body).find(".aui-field-issuepicker").each(function(){new e({element:s(this),userEnteredOptionsMsg:"Enter issue key",uppercaseUserEnteredOnSelect:!0})})}i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&u(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLabelPickers.js' */
define("jira/field/init-label-pickers",["jira/field/label-picker-factory","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,a){function t(e){var i,n=a(e);return i=n.is(c)?n:n.find(c)}function l(i,n){n=n||".aui-field-labelpicker",a(n,i).each(function(){var n=t(this);n.length>0&&e.createPicker(n,i)})}var c="fieldset.labelpicker-params";i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==r.panelRefreshed&&l(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/VersionPicker.js' */
define("jira/field/version-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,s,i,n,r){return i.extend({init:function(e){this._super(e),this.suggestionsHandler=new s(this.options,this.model)},_getDefaultOptions:function(t){var s=!1;return t&&t.element&&(s=r(t.element).data("create-permission")),s?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Version"}):this._super(t)},_selectionHandler:function(e,s){var i=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor"),l=n.find(i,function(e){return e.label()===r.label()});l||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Version.new.selected",[r.value()])),this._super(e,s)}})}),AJS.namespace("JIRA.VersionPicker",null,require("jira/field/version-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initVersionPickers.js' */
define("jira/field/init-version-pickers",["jira/field/version-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,t,s){function l(n){new e({element:n,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var i,n=s(e);return i=n.is("select")?n:n.find("select")}function o(e,i){i=i||".aui-field-versionspicker.frother-control-renderer",s(i,e).each(function(){var e=a(this);e.length&&l(e)})}n.bind(r.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&o(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCommentControls.js' */
define("jira/field/init-comment-controls",["jira/skate","jira/ajs/select/security-level-select","jira/wikipreview/wiki-preview"],function(e,i,t){e("jira-wikifield",{type:e.type.CLASSNAME,created:function(e){var i={fieldId:e.getAttribute("field-id"),trigger:e.querySelector(".wiki-preview").id,issueKey:e.getAttribute("issue-key"),rendererType:e.getAttribute("renderer-type")};t(i,e).init()}}),e("security-level",{type:e.type.CLASSNAME,created:function(e){var t=e.querySelector("#commentLevel");t&&new i(t)}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLogWorkControls.js' */
define("jira/field/init-log-work-controls",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,a,i){function n(e,t){var a=i(e).find("#worklog-logworkcontainer"),n=i(e).find("#worklog-timetrackingcontainer"),d=i(e).find("#log-work-activate");t?(a.removeClass("hidden"),n.addClass("hidden"),d.prop("checked",!0)):(a.addClass("hidden"),n.removeClass("hidden"),d.prop("checked",!1))}function d(e){i("#log-work-adjust-estimate-new-value, #log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked",e).val()+"-value",e).removeAttr("disabled"),i("input[name=worklog_adjustEstimate],input[name=adjustEstimate]",e).change(function(){i("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i(this).val()+"-value",e).removeAttr("disabled")}),i("#delete-log-work-adjust-estimate-new-value").change(function(){i("#delete-log-work-adjust-estimate-new").prop("checked",!0)}),i("#delete-log-work-adjust-estimate-manual-value").change(function(){i("#delete-log-work-adjust-estimate-manual").prop("checked",!0)}),i(e).find("#log-work-activate").change(function(){n(e,i(this).is(":checked"))})}e.bind(t.VALIDATE_TIMETRACKING,function(e,t){n(t,!0)}),e.bind(t.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&d(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initPriorityPickers.js' */
define("jira/field/init-priority-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function r(i){i.find("select#priority").each(function(i,n){new e({element:n,revertOnInvalid:!0})})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&r(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initParentPickers.js' */
define("jira/field/init-parent-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,n,i,t){function s(n){n.find("select#parent").each(function(n,i){new e({element:i,revertOnInvalid:!0})})}t.bind(i.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initInlineAttach.js' */
define("jira/field/init-inline-attach",["jquery","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/analytics","jira/jquery/plugins/attachment/inline-attach"],function(i,n,e,t,a){function r(i){i.find("input[type=file]:not('.ignore-inline-attach')").inlineAttach()}n.bind(e.NEW_CONTENT_ADDED,function(i,n,e){if(e!==t.panelRefreshed)try{r(n)}catch(i){a.send({name:"field.inline.attach.error",properties:{reason:i}})}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/issue/initIssueFields.js' */
require(["jira/skate","jira/ajs/select/single-select","jira/ajs/select/multi-select","jira/util/formatter","jquery"],function(e,t,l,s,a){e("single-select-issue-field",{type:e.type.CLASSNAME,attached:function(e){a(e).hasClass("aui-ss-select")||new t({element:e,revertOnInvalid:!0})}}),e("multi-select-issue-field",{type:e.type.CLASSNAME,attached:function(e){a(e).hasClass("multi-select-select")||new l({element:e,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,expandAllResults:!0})}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/init/init-jira-fields-webresource.js' */
require("jira/field/init-cascading-selects"),require("jira/field/init-component-pickers"),require("jira/field/init-multi-select-pickers"),require("jira/field/init-date-pickers"),require("jira/field/init-legacy-group-pickers"),require("jira/field/init-issue-pickers"),require("jira/field/init-label-pickers"),require("jira/field/init-version-pickers"),require("jira/field/init-comment-controls"),require("jira/field/init-log-work-controls"),require("jira/field/init-priority-pickers"),require("jira/field/init-parent-pickers"),require("jira/field/init-inline-attach");try{const featureManager=require("jira/featureflags/feature-manager");featureManager.isFeatureEnabled("jira.teams.enable-new-custom-field-types")&&require("jira/field/team/init-pickers")}catch(i){const logger=require("jira/util/safe-logger");logger.safeError("webapp-webresources.init-jira-fields","Failed to require jira/field/team/init-pickers")};
;
/* module-key = 'jira.webresources:user-message-flags', location = '/includes/jira/admin/admin-flags.js' */
require(["jira/util/logger","wrm/data","jquery","jira/flag"],function(s,a,e,i){"use strict";e(function(){var c=a.claim("jira.webresources:user-message-flags.adminLockout")||{};if(c.noprojects){var n=JIRA.Templates.Flags.Admin,r=n.adminIssueAccessFlagTitle({}),l=n.adminIssueAccessFlagBody({manageAccessUrl:c.manageAccessUrl}),g=i.showWarningMsg(r,l,{dismissalKey:c.flagId});e(g).find("a").on("click",function(){g.dismiss()})}s.trace("admin.flags.done")})});;
;
/* module-key = 'jira.webresources:user-message-flags', location = 'includes/jira/admin/admin-flags.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Flags&&(JIRA.Templates.Flags={}),"undefined"==typeof JIRA.Templates.Flags.Admin&&(JIRA.Templates.Flags.Admin={}),JIRA.Templates.Flags.Admin.adminIssueAccessFlagTitle=function(e,s){return""+soy.$$escapeHtml("Your current restrictions")},JIRA.Templates.Flags.Admin.adminIssueAccessFlagBody=function(e,s){var a="";'<a href="'+soy.$$escapeHtml(AJS.contextPath())+"/"+soy.$$escapeHtml(e.manageAccessUrl)+'">';return a+='<p id="admin-noprojects">'+soy.$$escapeHtml("You\'ve logged in as an administrator, but you don\'t have access to any Jira applications. You can perform administration tasks, but you won\'t be able to view or edit issues.")+'</p><p><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/"+soy.$$escapeHtml(e.manageAccessUrl)+'">'+soy.$$escapeHtml("Manage your application access.")+"</a></p>"};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board-adg3-no-condition', location = 'jira-agile-module/includes/js/sidebar/create-board-adg3.js' */
define("jira-agile/sidebar/create-board-adg3",["wrm/require","jira/analytics"],function(r,i){"use strict";var t="gh.rapid.board.create";function d(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];function a(){e?GH.StartWizardView.startWizardWithoutProjectCreate():GH.StartWizardView.startWizardWithUserConfigCheck(),i.send({name:"jira.frontend.fe.navigation.scope-switcher.action.click",properties:{actionId:t,pageMode:GH&&GH.RapidBoard&&GH.RapidBoard.State&&GH.RapidBoard.State.getMode&&GH.RapidBoard.State.getMode()||"other"}}),AJS.$(GH).unbind("WizardViewLoaded",a)}return AJS.dim(),r(["wr!com.pyxis.greenhopper.jira:gh-create-board"],function(){if(GH.StartWizardView)return a;AJS.$(GH).bind("WizardViewLoaded",a)}())}return{handleCreateBoardAction:function(e,a){if(a.actionId===t)return e.preventDefault(),d(!0)},openCreateBoardModal:d}}),function(){var a=require("jira-agile/sidebar/create-board-adg3");AJS.$(function(){JIRA&&JIRA.API&&JIRA.API.getSidebar().done(function(e){e.on(e.events.SCOPE_SWITCHER_SELECT_ACTION,a.handleCreateBoardAction,!0)})})}();;
;
/* module-key = 'jira.webresources:field-templates', location = 'includes/jira/field/templates/singleUserPicker.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),"undefined"==typeof JIRA.Templates.Fields.Pickers&&(JIRA.Templates.Fields.Pickers={}),"undefined"==typeof JIRA.Templates.Fields.Pickers.User&&(JIRA.Templates.Fields.Pickers.User={}),JIRA.Templates.Fields.Pickers.User.single=function(e,s){for(var t='<select id="'+soy.$$escapeHtml(e.field.id)+'" name="'+soy.$$escapeHtml(e.field.name)+'" class="single-user-picker js-'+(e.type?soy.$$escapeHtml(e.type):"default-user-picker")+'"'+(e.inputText?' data-input-text="'+soy.$$escapeHtml(e.inputText)+'"':"")+(e.editValue?' data-edit-value="'+soy.$$escapeHtml(e.editValue)+'"':"")+(e.showDropdownButton?' data-show-dropdown-button="true"':"")+(e.userType?' data-user-type="'+soy.$$escapeHtml(e.userType)+'"':"")+(e.containerClass?' data-container-class="'+soy.$$escapeHtml(e.containerClass)+'"':"")+">",a=e.options,l=a.length,o=0;o<l;o++){var i=a[o];if(i.optionGroup){t+='<optgroup id="'+soy.$$escapeHtml(e.field.id)+"-group-"+soy.$$escapeHtml(i.id)+'" label="'+soy.$$escapeHtml(i.display)+'"'+(i.footer?' data-footer-text="'+soy.$$escapeHtml(i.footer)+'"':"")+(i.weight!=-1?' data-weight="'+soy.$$escapeHtml(i.weight)+'"':"")+">";for(var p=i.groupOptions,d=p.length,r=0;r<d;r++){var n=p[r];t+=JIRA.Templates.Fields.Pickers.User.option(n)}t+="</optgroup>"}else t+=JIRA.Templates.Fields.Pickers.User.option(i)}return t+="</select>"},JIRA.Templates.Fields.Pickers.User.option=function(e,s){return"<option "+(e.loggedInUser?'class="current-user" ':"")+(e.selected?'selected="selected" ':"")+'value="'+soy.$$escapeHtml(e.optionName)+'" data-field-text="'+soy.$$escapeHtml(e.displayName)+'" data-field-label="'+soy.$$escapeHtml(e.displayName)+(e.emailAddress?" - "+soy.$$escapeHtml(e.emailAddress):"")+'" data-icon="'+soy.$$escapeHtml(e.avatarURL)+'" >'+soy.$$escapeHtml(e.displayName)+"</option>"};;
;
/* module-key = 'jira.webresources:field-templates', location = 'includes/jira/field/templates/assigneeField.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),"undefined"==typeof JIRA.Templates.Fields.Pickers&&(JIRA.Templates.Fields.Pickers={}),"undefined"==typeof JIRA.Templates.Fields.Pickers.User&&(JIRA.Templates.Fields.Pickers.User={}),JIRA.Templates.Fields.Pickers.User.assignee=function(e,s){return""+JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(e,{options:e.assigneeOptions.options,showDropdownButton:!0,userType:"assignee",type:"assignee-picker",containerClass:"long-field"}))+(e.isLoggedInUserAssignable?'<a href="#'+soy.$$escapeHtml(e.field.id)+'" id="assign-to-me-trigger">'+soy.$$escapeHtml("Assign to me")+"</a>":"")+'<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="'+soy.$$escapeHtml(e.projectKeys)+'"/>'+(e.issueKey?'<input type="hidden" title="assigneeEditIssueKey" value="'+soy.$$escapeHtml(e.issueKey)+'"/>':"")+(e.actionDescriptorId?'<input type="hidden" title="actionDescriptorId" value="'+soy.$$escapeHtml(e.actionDescriptorId)+'"/>':"")+"</fieldset>"};;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/user-picker-template-wrapper.js' */
define("jira/field/user-picker/templates",[],function(){"use strict";return window.JIRA.Templates.Fields.Pickers.User});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/lib/jquery.dotdotdot-1.5.7.js' */
!function(t){function e(t,e,n){var o=t.children(),i=!1;t.empty();for(var d=0,a=o.length;d<a;d++){var l=o.eq(d);if(t.append(l),n&&t.append(n),r(t,e)){l.remove(),i=!0;break}n&&n.remove()}return i}function n(e,i,d,a,l){var u=e.contents(),f=!1;e.empty();for(var c="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style",s=0,h=u.length;s<h&&!f;s++){var p=u[s],g=t(p);"undefined"!=typeof p&&(e.append(g),l&&e[e.is(c)?"after":"append"](l),3==p.nodeType?r(d,a)&&(f=o(g,i,d,a,l)):f=n(g,i,d,a,l),f||l&&l.remove())}return f}function o(t,e,n,d,u){var f=!1,c=t[0];if("undefined"==typeof c)return!1;for(var s="letter"==d.wrap?"":" ",h=l(c).split(s),p=-1,g=-1,v=0,w=h.length-1;v<=w;){var m=Math.floor((v+w)/2);if(m==g)break;g=m,a(c,h.slice(0,g+1).join(s)+d.ellipsis),r(n,d)?w=g:(p=g,v=g)}if(p==-1||1==h.length&&0==h[0].length){var y=t.parent();t.remove();var b=u?u.length:0;if(y.contents().size()>b){var x=y.contents().eq(-1-b);f=o(x,e,n,d,u)}else{var c=y.prev().contents().eq(-1)[0];if("undefined"!=typeof c){var T=i(l(c),d);a(c,T),y.remove(),f=!0}}}else{var T=i(h.slice(0,p+1).join(s),d);f=!0,a(c,T)}return f}function r(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function a(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function l(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function u(e,n){return"undefined"!=typeof e&&(!!e&&("string"==typeof e?(e=t(e,n),!!e.length&&e):"object"==typeof e&&("undefined"!=typeof e.jquery&&e)))}function f(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],o=0,r=n.length;o<r;o++){var i=parseInt(t.css(n[o]),10);isNaN(i)&&(i=0),e-=i}return e}function c(t,e){return!!t&&(e="string"==typeof e?"dotdotdot: "+e:["dotdotdot:",e],"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&window.console.log(e),!1)}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(o){if(0==this.length)return o&&o.debug===!1||c(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(o)});var i=this;i.data("dotdotdot")&&i.trigger("destroy.dot"),i.bind_events=function(){return i.bind("update.dot",function(o,d){o.preventDefault(),o.stopPropagation(),l.maxHeight="number"==typeof l.height?l.height:f(i),l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||d instanceof HTMLElement)&&(d=t("<div />").append(d).contents()),d instanceof t&&(a=d)),v=i.wrapInner('<div class="dotdotdot" />').children(),v.empty().append(a.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var u=!1,c=!1;return h.afterElement&&(u=h.afterElement.clone(!0),h.afterElement.remove()),r(v,l)&&(c="children"==l.wrap?e(v,l,u):n(v,i,v,l,u)),v.replaceWith(v.contents()),v=null,t.isFunction(l.callback)&&l.callback.call(i[0],c,a),h.isTruncated=c,c}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(i[0],h.isTruncated),h.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(i[0],a),a}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),i.unwatch().unbind_events().empty().append(a).data("dotdotdot",!1)}),i},i.unbind_events=function(){return i.unbind(".dot"),i},i.watch=function(){if(i.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),o=e.height();e.bind("resize.dot"+h.dotId,function(){n==e.width()&&o==e.height()&&l.windowResizeFix||(n=e.width(),o=e.height(),g&&clearInterval(g),g=setTimeout(function(){i.trigger("update.dot")},10))})}else p=d(i),g=setInterval(function(){var t=d(i);p.width==t.width&&p.height==t.height||(i.trigger("update.dot"),p=d(i))},100);return i},i.unwatch=function(){return t(window).unbind("resize.dot"+h.dotId),g&&clearInterval(g),i};var a=i.contents(),l=t.extend(!0,{},t.fn.dotdotdot.defaults,o),h={},p={},g=null,v=null;return h.afterElement=u(l.after,i),h.isTruncated=!1,h.dotId=s++,i.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&i.watch(),i},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1};var s=1,h=t.fn.html;t.fn.html=function(t){return"undefined"!=typeof t?this.data("dotdotdot")&&"function"!=typeof t?this.trigger("update",[t]):h.call(this,t):h.call(this)};var p=t.fn.text;t.fn.text=function(e){if("undefined"!=typeof e){if(this.data("dotdotdot")){var n=t("<div />");return n.text(e),e=n.html(),n.remove(),this.trigger("update",[e])}return p.call(this,e)}return p.call(this)}}}(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/soy/ProjectTemplatesList.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ProjectTemplates&&(JIRA.Templates.ProjectTemplates={}),JIRA.Templates.ProjectTemplates.renderProjectTemplates=function(e,t){return""+(0==soy.$$getMapKeys(e.projectTemplates).length?JIRA.Templates.errorMsg({closeable:!1,msg:"No project templates could be found."}):JIRA.Templates.ProjectTemplates.renderTemplates(e))},JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType=function(e,t){var a="";if(0==e.projectTemplatesByType.length)a+=JIRA.Templates.errorMsg({closeable:!1,msg:"No project templates could be found."});else for(var s=e.projectTemplatesByType,p=s.length,l=0;l<p;l++){var m=s[l];a+='<div class="template-group" id="project-template-group-'+soy.$$escapeHtml(m.projectTypeBean.projectTypeKey)+'"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, '+soy.$$escapeHtml(m.projectTypeBean.icon)+' "/><span>'+soy.$$escapeHtml(m.projectTypeBean.projectTypeDisplayKey)+"</span></h6></div>"+JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates:m.projectTemplates,projectTypeKey:m.projectTypeBean.projectTypeKey})+"</div>"}return a},JIRA.Templates.ProjectTemplates.renderTemplates=function(e,t){return'<div class="pt-templates-list">'+JIRA.Templates.ProjectTemplates.renderItems(e)+"</div>"},JIRA.Templates.ProjectTemplates.renderItems=function(e,t){var a='<ol class="templates" tabindex="100">',s=4;if(e.projectTemplates.length>s&&"business"==e.projectTypeKey)a+=JIRA.Templates.ProjectTemplates.renderBusinessTemplatesWithViewMoreTemplate({templates:e.projectTemplates,maxItemsWithoutViewMoreLink:s});else for(var p=e.projectTemplates,l=p.length,m=0;m<l;m++){var o=p[m];a+=JIRA.Templates.ProjectTemplates.renderItem({templateItem:o})}return a+="</ol>"},JIRA.Templates.ProjectTemplates.renderItem=function(e,t){return'<li class="template '+(e.additionalClasses?soy.$$escapeHtml(e.additionalClasses):"")+'"'+(e.templateItem.itemModuleCompleteKey?'data-item-module-complete-key="'+soy.$$escapeHtml(e.templateItem.itemModuleCompleteKey)+'"':"")+(e.templateItem.projectTemplateModuleCompleteKey?'data-project-template-module-complete-key="'+soy.$$escapeHtml(e.templateItem.projectTemplateModuleCompleteKey)+'"':"")+(e.templateItem.createProject?'data-create-project="'+soy.$$escapeHtml(e.templateItem.createProject)+'"':"")+(e.templateItem.demoProject?'data-demo-project="'+soy.$$escapeHtml(e.templateItem.demoProject)+'"':"")+(e.templateItem.backgroundIconUrl?'data-background-icon-url="'+soy.$$escapeHtml(e.templateItem.backgroundIconUrl)+'"':"")+(e.templateItem.name?'data-name="'+soy.$$escapeHtml(e.templateItem.name)+'"':"")+(e.templateItem.description?'data-description="'+soy.$$escapeHtml(e.templateItem.description)+'"':"")+(e.templateItem.longDescriptionContent?'data-long-description-content="'+soy.$$escapeHtml(e.templateItem.longDescriptionContent)+'"':"")+(e.templateItem.infoSoyPath?'data-info-soy-path="'+soy.$$escapeHtml(e.templateItem.infoSoyPath)+'"':"")+(e.templateItem.projectTypeKey?'data-project-type="'+soy.$$escapeHtml(e.templateItem.projectTypeKey)+'"':"")+'><img class="template-preview" src="'+soy.$$escapeHtml(e.templateItem.iconUrl)+'" /><div class="template-meta"><div class="template-name">'+soy.$$escapeHtml(e.templateItem.name)+'</div><div class="template-description">'+soy.$$escapeHtml(e.templateItem.description)+"</div></div></li>"},JIRA.Templates.ProjectTemplates.renderBusinessTemplatesWithViewMoreTemplate=function(e,t){for(var a="",s=e.templates.length,p=0;p<s;p++){var l=e.maxItemsWithoutViewMoreLink-1;a+=JIRA.Templates.ProjectTemplates.renderItem({templateItem:e.templates[p],additionalClasses:""+(p>=l?"more-business-templates":"")})}return a+=JIRA.Templates.ProjectTemplates.renderViewMoreBusinessTemplatesItem(null)},JIRA.Templates.ProjectTemplates.renderViewMoreBusinessTemplatesItem=function(e,t){var a="",s="More project templates",p="Choose from other project types, such as content management or recruitment.";return a+='<li id="view-more-business-templates" class="template"><div class="template-preview"></div><div class="template-meta"><div class="template-name">'+soy.$$escapeHtml(s)+'</div><div class="template-description">'+soy.$$escapeHtml(p)+"</div></div></li>"},JIRA.Templates.ProjectTemplates.loadingTemplatesList=function(e,t){return'<div class="wait-container"><img class="wait-icon" src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/wait.gif"><span class="wait-text">'+soy.$$escapeHtml("Loading project templates")+"&hellip;</span></div>"},JIRA.Templates.ProjectTemplates.footerLinks=function(e,t){return'<div class="footer-links">'+(e.projectImportAvailable?'<a class="import-project-trigger button-panel-link" href="'+soy.$$escapeHtml(AJS.contextPath())+'/secure/admin/views/ExternalImport1.jspa">'+soy.$$escapeHtml("Import a project")+"</a>|":"")+'<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">'+soy.$$escapeHtml("Create with shared configuration")+"</span> "+soy.$$escapeHtml("Create with shared configuration")+"</a>"+(e.showDemoLink&&e.projectImportAvailable?'| <a class="add-demo-project-trigger button-panel-link" href="#">'+soy.$$escapeHtml("Create sample data")+"</a>":"")+"</div>"},JIRA.Templates.ProjectTemplates.addWorkflowsLink=function(e,t){return'<a class="add-workflow-link" href="'+soy.$$escapeHtml(e.baseUrl)+'/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">'+soy.$$escapeHtml("View Marketplace Workflows")+"</a>"};;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/soy/AddProject.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ProjectTemplates&&(JIRA.Templates.ProjectTemplates={}),JIRA.Templates.ProjectTemplates.addProjectForm=function(e,t){var r=""+(e.warnUserUnableToAccessApplication?JIRA.Templates.ProjectTemplates.warnApplicationAccess(e):"");if(e.errors.errorMessages)for(var a=e.errors.errorMessages,o=a.length,i=0;i<o;i++){var s=a[i];r+=JIRA.Templates.errorMsg({closeable:!1,msg:s})}return r+='<div class="add-project-wrapper"><div class="add-project-form-wrapper">'+aui.form.form({content:""+aui.form.fieldset({legendContent:"",content:""+JIRA.Templates.ProjectTemplates.longTextField({id:"name",name:"name",isRequired:!1,maxLength:e.maxNameLength,labelContent:"Name",descriptionText:AJS.format("Max. {0} characters.",e.maxNameLength),value:e.currentName?e.currentName:"",errorTexts:e.errors.errors.projectName?[e.errors.errors.projectName]:[]})+JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id:"key",name:"key",isRequired:!1,maxLength:e.maxKeyLength,labelContent:"Key",descriptionText:AJS.format("Max. {0} characters.",e.maxKeyLength),helpTitle:"What\'s a project key?",value:e.currentKey?e.currentKey:"",errorTexts:e.errors.errors.projectKey?[e.errors.errors.projectKey]:[]})+(e.shouldShowLead?JIRA.Templates.ProjectTemplates.projectLeadField({field:e.projectLeadPickerField,isRequired:!1,errorTexts:e.errors.errors.projectLead?[e.errors.errors.projectLead]:[],options:e.leadOptions}):"")+'<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="'+soy.$$escapeHtml(e.projectTemplateWebItemKey)+'"><input type="hidden" name="projectTemplateModuleKey" value="'+soy.$$escapeHtml(e.projectTemplateModuleKey)+'"><input type="submit" class="pt-hidden-submit offscreen-left">'}),id:"add-project-form"})+"</div>"+(e.projectTemplateDescriptionContent?'<div class="add-project-description-wrapper"><div class="project-template-title"><h3>'+soy.$$escapeHtml(e.projectTemplateTitle)+'</h3></div><div class="project-template-description">'+soy.$$filterNoAutoescape(e.projectTemplateDescriptionContent)+"</div></div>":"")+"</div>"},JIRA.Templates.ProjectTemplates.keyHelp=function(e,t){return'<div class="project-key-help"><h6>'+soy.$$escapeHtml("PROJECT KEY")+"</h6><p>"+soy.$$filterNoAutoescape("The project key is a unique code that distinguishes a project from another.\u003cbr/\u003eIt also prefixes all issues in the project.")+"</p></div>"},JIRA.Templates.ProjectTemplates.projectLeadField=function(e,t){var r=""+aui.form.label({forField:e.field.name+"-field",isRequired:e.isRequired,content:"Project lead"})+JIRA.Templates.Fields.Pickers.User.single({field:e.field,options:e.options,editValue:e.value})+aui.form.fieldDescription({message:"Enter the username of the project lead."});if(e.errorTexts)for(var a=e.errorTexts,o=a.length,i=0;i<o;i++){var s=a[i];r+=aui.form.fieldError({message:s})}var n=""+aui.form.fieldGroup({content:r});return n},JIRA.Templates.ProjectTemplates.warnApplicationAccess=function(e,t){var r="",a=""+JIRA.Templates.Links.basicHelpLink({url:"/admin/apps",desc:"Update your access",title:"Update your access",isLocal:!1}),o=""+(null!=e.applicationName&&e.applicationName.length>2?soy.$$filterNoAutoescape(AJS.format("Uh-oh. You can create this project, but it won\'\'t be fully functional until you have the right access for {0}. {1} now or contact your site administrator.",e.applicationName,a)):soy.$$filterNoAutoescape(AJS.format("Uh-oh. You can create this project, but it won\'\'t be fully functional until you have the right access for this application. {0} now or contact your site administrator.",a)));return r+=aui.message.hint({id:"project-create-admin-access-error",content:""+soy.$$filterNoAutoescape(o)})},JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon=function(e,t){var r=""+aui.form.label({forField:e.name,isRequired:e.isRequired,content:e.labelContent})+aui.form.input({id:e.id,name:e.name,type:"text",maxLength:e.maxLength,value:e.value})+'<a class="help-lnk" title="'+soy.$$escapeHtml(e.helpTitle)+'" id="'+soy.$$escapeHtml(e.id)+'-help-icon"><span class="aui-icon aui-icon-help">'+soy.$$escapeHtml(e.helpTitle)+"</span></a>"+(e.descriptionText?aui.form.fieldDescription({message:e.descriptionText}):"");if(e.errorTexts)for(var a=e.errorTexts,o=a.length,i=0;i<o;i++){var s=a[i];r+=aui.form.fieldError({message:s})}var n=""+aui.form.fieldGroup({content:r});return n},JIRA.Templates.ProjectTemplates.longTextField=function(e,t){var r=""+aui.form.label({forField:e.name,isRequired:e.isRequired,content:e.labelContent})+aui.form.input({id:e.id,name:e.name,type:"text",maxLength:e.maxLength,value:e.value,extraClasses:"long-field"})+(e.descriptionText?aui.form.fieldDescription({message:e.descriptionText}):"");if(e.errorTexts)for(var a=e.errorTexts,o=a.length,i=0;i<o;i++){var s=a[i];r+=aui.form.fieldError({message:s})}var n=""+aui.form.fieldGroup({content:r});return n},JIRA.Templates.ProjectTemplates.spinner=function(e,t){return"<span id='"+soy.$$escapeHtml(e.id)+"' class='icon throbber loading'></span>"},JIRA.Templates.ProjectTemplates.formatAnchor=function(e,t){return'<a href="'+soy.$$escapeHtml(e.href)+'"'+(e.title?' title="'+soy.$$escapeHtml(e.title)+'"':"")+">"+soy.$$escapeHtml(e.body)+"</a>"};;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/soy/CreateSharedProject.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ProjectTemplates&&(JIRA.Templates.ProjectTemplates={}),JIRA.Templates.ProjectTemplates.createSharedProjectForm=function(e,t){return'<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">'+aui.form.form({content:""+aui.form.fieldset({content:"<p>"+soy.$$escapeHtml("Select the existing project that you\'d like to share configurations with.")+'<a class="help-lnk" title="'+soy.$$escapeHtml("What will be shared?")+'" id="shared-help-icon"><span class="aui-icon aui-icon-help">'+soy.$$escapeHtml("What will be shared?")+"</span></a></p>"+aui.form.fieldGroup({extraClasses:"project-picker-group",content:""+aui.form.label({forField:"project-picker",isRequired:!1,content:"Choose a project"})+aui.form.input({id:"project-picker",name:"project",type:"text"})+'<div id="project-picker-options" data-suggestions="'+soy.$$escapeHtml(e.projectSuggestions)+'"></div>'})+'<p class="create-shared-info">'+soy.$$escapeHtml("When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.")+"</p>"}),id:"create-shared-project-form"})+"</div></div>"},JIRA.Templates.ProjectTemplates.loading=function(e,t){return'<div><div class="dialog-spinner"></div></div>'},JIRA.Templates.ProjectTemplates.noProjects=function(e,t){return"<p>"+soy.$$escapeHtml("Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\'s configuration.")+"</p>"},JIRA.Templates.ProjectTemplates.sharedHelp=function(e,t){return'<div class="shared-help"><p><strong>'+soy.$$escapeHtml("What will be shared?")+"</strong></p><p>"+soy.$$escapeHtml("Configuration refers to the set of schemes used by a project")+"</p><ul><li>"+soy.$$escapeHtml("Permission Scheme")+"</li><li>"+soy.$$escapeHtml("Notification Scheme")+"</li><li>"+soy.$$escapeHtml("Issue Security Scheme")+"</li><li>"+soy.$$escapeHtml("Workflow Scheme")+"</li><li>"+soy.$$escapeHtml("Issue Type Scheme")+"</li><li>"+soy.$$escapeHtml("Issue Type Screen Scheme")+"</li><li>"+soy.$$escapeHtml("Field Configuration Scheme")+"</li></ul></div>"};;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/config.js' */
define("jira/project-templates/config",{model:{}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-key-generator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(A,e){var R={};return R.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"],R.CHARACTER_MAP={},R.CHARACTER_MAP[199]="C",R.CHARACTER_MAP[231]="c",R.CHARACTER_MAP[252]="u",R.CHARACTER_MAP[251]="u",R.CHARACTER_MAP[250]="u",R.CHARACTER_MAP[249]="u",R.CHARACTER_MAP[233]="e",R.CHARACTER_MAP[234]="e",R.CHARACTER_MAP[235]="e",R.CHARACTER_MAP[232]="e",R.CHARACTER_MAP[226]="a",R.CHARACTER_MAP[228]="a",R.CHARACTER_MAP[224]="a",R.CHARACTER_MAP[229]="a",R.CHARACTER_MAP[225]="a",R.CHARACTER_MAP[239]="i",R.CHARACTER_MAP[238]="i",R.CHARACTER_MAP[236]="i",R.CHARACTER_MAP[237]="i",R.CHARACTER_MAP[196]="A",R.CHARACTER_MAP[197]="A",R.CHARACTER_MAP[201]="E",R.CHARACTER_MAP[230]="ae",R.CHARACTER_MAP[198]="Ae",R.CHARACTER_MAP[244]="o",R.CHARACTER_MAP[246]="o",R.CHARACTER_MAP[242]="o",R.CHARACTER_MAP[243]="o",R.CHARACTER_MAP[220]="U",R.CHARACTER_MAP[255]="Y",R.CHARACTER_MAP[214]="O",R.CHARACTER_MAP[241]="n",R.CHARACTER_MAP[209]="N",R.desiredKeyLength=4,R.maxKeyLength=10,R.getTotalLength=function(A){return A.join("").length},R.removeIgnoredWords=function(C){return e.reject(C,function(e){return A.inArray(e,R.IGNORED_WORDS)!==-1})},R.createAcronym=function(e){var R="";return A.each(e,function(A,e){R+=e.charAt(0)}),R},R.getFirstSyllable=function(A){var e,C=!1;for(e=0;e<A.length;e++)if(R.isVowelOrY(A[e]))C=!0;else if(C)return A.substring(0,e+1);return A},R.isVowelOrY=function(A){return A&&1===A.length&&A.search("[AEIOUY]")!==-1},R.init=function(A,e){R.desiredKeyLength=A,R.maxKeyLength=e},R.generate=function(e){if(e=A.trim(e),!e)return"";for(var C=[],r=0,n=e.length;r<n;r++){var t=R.CHARACTER_MAP[e.charCodeAt(r)];C.push(t?t:e[r])}e=C.join("");var i=[];A.each(e.split(/\s+/),function(A,e){e&&(e=e.replace(/[^a-zA-Z]/g,""),e=e.toUpperCase(),e.length&&i.push(e))}),R.desiredKeyLength&&R.getTotalLength(i)>R.desiredKeyLength&&(i=R.removeIgnoredWords(i));var E;if(0==i.length)E="";else if(1==i.length){var a=i[0];E=R.desiredKeyLength&&a.length>R.desiredKeyLength?R.getFirstSyllable(a):a}else E=R.createAcronym(i);return R.maxKeyLength&&E.length>R.maxKeyLength&&(E=E.substr(0,R.maxKeyLength)),E},R});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/dialog-view.js' */
define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(e,i){return new e({el:i(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/dialog-view-impl.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore"],function(e,t,o){var i=AJS.Dialog,r=AJS.trigger;return t.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},initialize:function(){JIRA.API&&JIRA.API.getSidebar&&JIRA.API.getSidebar().then(function(e){e.on(e.events.JIRA_SUMMON_CREATE_PROJECT_DIALOG,function(){this.getDialogController().handleProjectTemplateTriggered()}.bind(this),!0)}.bind(this))},draw:function(){var e=new i({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:!1,keypressListener:o.bind(this._onKeyPressed,this)}),t=e.popup.element;return e.addPage("project-templates-page"),e.addHeader("Create project","add-project-dialog-header"),e.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content"),this._dialog=e,this._$dialogElement=t,e.show(),e},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(e){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:!1,msg:e}))},get$PTContent:function(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(e){var t=27;return!this._dialog||e.keyCode!==t||(this.getDialogController().hideDialogFromNewUser("dismissed"),this._dialog.remove(),!1)},_onKeydownInTemplatesList:function(e){var t=13;return!this._dialog||e.keyCode!==t||(this._$dialogElement.find(".pt-submit-button:visible").click(),!1)},_onClickAddProject:function(e){e.preventDefault(),this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){r("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){r("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(e){e.preventDefault();var t=this.getDialogController().dialog;t&&t.popup&&t.popup.element&&t.remove(),this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(e){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(e){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/dialog-controller.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(e,t,a,i,o,r,n,l){function d(e,t){AJS.trigger("analyticsEvent",{name:e,data:t})}var s,c=AJS.contextPath(),m=AJS.isDevMode,p=AJS.log,u=function(){return s||(s=l.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}),s},h=o.extend({WELCOME_REST_URL:c+"/rest/welcome/1.0/show/welcome",onboarding:{isOptimusPrimeOnboarding:!1},initialize:function(){n.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser"),i.getBoolean("show-welcome-screen")&&this.handleProjectTemplateTriggered()},handleProjectTemplateTriggered:function(e){e&&e.onboarding&&(this.onboarding=e.onboarding),this.demoProject=!1,d("jira.project.templates.dialog.create.show"),this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(e){e&&e.onboarding&&(this.onboarding=e.onboarding),this.demoProject=!0;var t=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,t),this._addAnalyticsToCreateDemoShow(t)},_addAnalyticsToCreateDemoShow:function(e){e.done(function(e){var t={},a=function(e){return e.projectTemplatesGroupedByType.map(function(e){return e.projectTemplates.map(function(e){return e.itemModuleCompleteKey}).join()}).join()};t.demoSets=a(e),t.instanceCreatedDate=u().instanceCreatedDate,d("jira.project.templates.dialog.create.demo.show",t)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(a,i){var o=this.onboarding;i=i||this.getTemplateController().loadProjectTemplatesData(),this.dialog=e.draw(),i.fail(n.bind(function(e){this._handleUnknownErrorOfPTRetrieval()},this)),i.done(function(e){this.$dialogElement=this.dialog.popup.element;var i;n.isUndefined(t.model.selectedTemplate)||(i=t.model.selectedTemplate),t.model=e,t.model.selectedTemplate=i,this.getTemplateController().init(e,a,o)}.bind(this))},handleCreateShared:function(){d("jira.project.templates.dialog.create.shared.clicked"),this.demoProject=!1,this.openWithCreateShared()},openWithCreateShared:function(){var e=require("jira/project-templates/create-shared-controller");e.initCreateShared()},callbackWithResize:function(e){return n.bind(n.wrap(e,function(e){e.call(this),this.dialog.updateHeight()}),this)},addPage:function(e){var t=this.dialog.addPage(e.name).page[this.dialog.curpage];this.dialog.addHeader(e.title,"add-project-dialog-header"),this.dialog.addPanel(e.panelName,"","pt-content"),e.backButton&&this._addBackButton(t,{panelName:e.panelName}),this.dialog.addButton(e.submitButtonText,this.callbackWithResize(e.submitButtonCallback),e.submitButtonClass+" pt-submit-button");var a=this.$dialogElement.find("."+e.submitButtonClass);return a.removeClass("button-panel-button").addClass("aui-button aui-button-primary"),a.focus(),this.onboarding.isOptimusPrimeOnboarding||this.dialog.addCancel("Cancel",n.bind(function(e){this.hideDialogFromNewUser("dismissed"),this.dialog.remove()},this)),t},_backButtonOnClickCallback:function(t,a){if(this.onboarding.isOptimusPrimeOnboarding&&"ProjectTemplatesListPanel"===a.panelName){var i=function(){this.dialog.remove()}.bind(this);return i}return n.bind(function(){d(this.demoProject?"jira.project.templates.dialog.demo.back":"jira.project.templates.dialog.create.back");var a=e.get$PTContent();a.css("background-image","none"),this.dialog.prevPage(),t.remove(),this.dialog.page.pop()},this)},_addBackButton:function(e,t){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(e,t)),"add-project-back-button");var a=this.$dialogElement.find(".add-project-back-button");a.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){e.showErrorMessage("An error occurred while trying to contact Jira")},hideDialogFromNewUser:function(e){"dismissed"===e?d(this.demoProject?"jira.project.templates.dialog.demo.dismissed":"jira.project.templates.dialog.create.dismissed"):"importproject"===e?d("jira.project.templates.dialog.import.clicked"):"templateselected"===e&&d(this.demoProject?"jira.project.templates.dialog.demo.templateselected":"jira.project.templates.dialog.create.templateselected"),i.getBoolean("show-welcome-screen")&&r.ajax({url:this.WELCOME_REST_URL+"/"+e,type:"DELETE",success:function(){m&&m()&&p("don't show project template dialog anymore")}})},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new h});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/add-project-view.js' */
define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(e,t,i){return new e({el:i(document),dialogView:t})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/add-project-view-impl.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(e,t,n,i,a,r,o,l){var d=AJS.InlineDialog;return r.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:void 0,isSubmitting:!1,initialize:function(e){l.bindAll(this,"bindHook")},addPostDrawCallback:function(e){this.postDrawCallbacks.push(e)},prepareDialog:function(t){this.page=e.addPage({name:"add-project",title:t,panelName:"add-project",backButton:!0,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(r){function s(e){return e.errors||(e.errors={}),e}this.isSubmitting=!1,e.dialog.gotoPage(this.page.id);var m=r.webItemData.projectTemplateModuleCompleteKey||r.webItemData.itemModuleCompleteKey,c=l.find(t.model.projectTemplatesGroupedByType,function(e){return l.any(e.projectTemplates,function(e){return e.itemModuleCompleteKey===m})}),u=c&&c.applicationInfo||{},p={maxNameLength:t.model.maxNameLength,maxKeyLength:t.model.maxKeyLength,shouldShowLead:t.model.shouldShowProjectLead,projectTemplateWebItemKey:t.model.selectedTemplate||r.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:m,projectTemplateTitle:r.webItemData.name,projectTemplateDescriptionContent:r.webItemData.longDescriptionContent,currentKey:r.currentKey||"",currentName:r.currentName||"",errors:s(r.errors),projectLeadPickerField:{id:"lead",name:"lead"},leadOptions:[{selected:!0,displayName:r.currentUserDisplayName,optionName:r.currentUserName,avatarURL:r.currentUserAvatarUrl}],applicationName:u.applicationName||"",warnUserUnableToAccessApplication:!u.canUserUseApplication},h=JIRA.Templates.ProjectTemplates.addProjectForm(p);if(e.dialog.getPanel(this.page.id,0).html(h),r.webItemData&&r.webItemData.backgroundIconUrl){var f=e.$dialogElement.find(".pt-content");f.css("background-image",'url("'+r.webItemData.backgroundIconUrl+'")')}var g=o("#add-project-form");n.trigger(i.NEW_CONTENT_ADDED,[g]),this.nameElement=e.$dialogElement.find("#name"),this.keyElement=e.$dialogElement.find("#key"),this.keyEditedElement=e.$dialogElement.find("#keyEdited"),this.leadDisplayElement=e.$dialogElement.find("#lead-field"),this.leadValueElement=e.$dialogElement.find("#lead");var b=this.keyElement.parent().find(".aui-icon-help");b.length&&new d(b,"project-key-help-popup",function(e,t,n){e.html(JIRA.Templates.ProjectTemplates.keyHelp()),n()},{width:280,gravity:"w"}),this.keyElement.attr("style","text-transform: uppercase");var E=a("jira/project-templates/add-project-controller");this.nameElement.focus(l.bind(function(e){this.bindHook(e,E.nameTimeout)},this));var y=this;this.nameElement.change(function(e){E.validateName(),y.unbindHook(e)}),this.nameElement.focus(),this.keyElement.focus(l.bind(function(e){var t=o(e.target);t.data("lastValue",t.val()),this.bindHook(e,E.keyTimeout)},this)),this.keyElement.blur(l.bind(function(e){this.unbindHook(e)},this)),this.keyElement.change(function(){E.validateKey(),E.autofillKeyIfNeeded()}),l.isEmpty(this.postDrawCallbacks)||l.each(this.postDrawCallbacks,function(e){e({projectType:r&&r.webItemData&&(r.webItemData.projectTemplateModuleCompleteKey||r.webItemData.itemModuleCompleteKey)})}),e.dialog.updateHeight()},onSubmitForm:function(e){var t=a("jira/project-templates/add-project-controller");return t.submit(),!1},get$SubmitButton:function(){return e.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return e.$dialogElement.find(".add-project-back-button")},bindHook:function(e,t){var n=o(e.target),i=l.bind(function(){this.unbindHook(e),t.apply(),n.is(":visible")&&n.data("checkHook",setTimeout(i,this.TIMEOUT_MS))},this);n.data("checkHook")||n.data("checkHook",setTimeout(i,0))},unbindHook:function(e){var t=o(e.target);clearTimeout(t.data("checkHook")),t.removeData("checkHook")},showInlineError:function(e,t){if(!this.isSubmitting){var n=e.parent().find(".error");n.length||(n=o("<div class='error'></div>"),e.parent().append(n)),n.text(t),n.show()}},showInlineErrorForName:function(e){this.showInlineError(this.nameElement,e)},showInlineErrorForKey:function(e){this.showInlineError(this.keyElement,e)},hideInlineError:function(e){e.parent().find(".error").hide()},hideInlineErrorForName:function(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function(){this.hideInlineError(this.keyElement)},setName:function(e){this.nameElement.val(e)},getName:function(){return this.nameElement.val()},setKey:function(e){this.keyElement.val(e)},getKey:function(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function(){return this.leadDisplayElement.val()},getLeadUserName:function(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function(){var t=e.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(l.isUndefined(t))return"";var n=t.match(/^url\((.+)\)$/);return n&&n[1]?n[1]:""},setKeyEdited:function(e){this.keyEditedElement.val(e)},getKeyEdited:function(){return this.keyEditedElement.val()},setKeyEdited:function(){var e=this.getKey();this.keyElement.data("lastValue")!==e&&this.keyEditedElement.val(e?"true":"false"),this.keyElement.data("lastValue",e)},hasNameErrors:function(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function(){return o("#add-project-form")},get$FormFields:function(){return e.$dialogElement.find(":input")},enterLoadingState:function(){var e=this.get$SubmitButton();if(e.attr("disabled"))return!1;var t=this.get$BackButton();return e.attr("disabled","disabled"),t.attr("disabled","disabled"),t.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"})),this.get$FormFields().attr("disabled","disabled"),this.isSubmitting=!0,!0},hideLoadingState:function(){e.$dialogElement.find("#addproject-loading").remove(),this.get$SubmitButton().removeAttr("disabled"),this.get$BackButton().removeAttr("disabled"),this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function(){o.fn.removeDirtyWarning&&this.getAddProjectForm().removeDirtyWarning()},hasInlineErrors:function(){return 0!==e.$dialogElement.find(".field-group .error:visible").length}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/add-project-controller.js' */
define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(e,r){return new e({el:r(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/add-project-controller-impl.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jira/analytics/web-client","jira/featureflags/feature-manager","jquery","underscore"],function(e,t,r,a,i,o,s,n,c){var d=AJS.contextPath(),l=AJS.trigger;return i.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(e){this._window=e.window||window,c.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(e){this.existingProjectData=e,this._initAddProject("Create with shared configuration")},initProjectTemplate:function(e){this.existingProjectData=void 0,this.webItemData=e,this._initAddProject(e.name)},_initAddProject:function(r){this.desiredKeyLength=4,this.lastKeyValidated="",this._getExistingProjects(),t.init(this.desiredKeyLength,a.model.maxKeyLength),e.prepareDialog(r),e.draw({webItemData:this.webItemData||{},maxKeyLength:a.model.maxKeyLength,maxNameLength:a.model.maxNameLength,currentUserName:a.model.currentUserName,currentUserDisplayName:a.model.currentUserDisplayName,currentUserAvatarUrl:a.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){a.model.currentUserDisplayName="",a.model.currentUserName="",a.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return e.getLeadDisplayName()&&""!=e.getAvatarUrlOfSelectedLead()},submit:function(t){var r;r=this.existingProjectData?{key:e.getKey(),name:e.getName(),lead:e.getLeadUserName()&&e.getLeadUserName()[0]}:jQuery.param(e.getAddProjectForm().serializeArray().map(function(e){return"key"===e.name&&(e.value=e.value.toUpperCase()),e})),e.hasInlineErrors()||e.enterLoadingState()&&(this._hasFullyConfiguredProjectLead()?(a.model.currentUserDisplayName=e.getLeadDisplayName(),a.model.currentUserName=a.model.currentUserDisplayName?e.getLeadUserName():"",a.model.currentUserAvatarUrl=e.getAvatarUrlOfSelectedLead()):this._resetProjectLeadValues(),this.existingProjectData?n.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(r)}).then(this.projectCreatedHandler,this.projectValidationFailedHandler):n.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:r,headers:{"X-Atlassian-Token":"no-check"}}).then(this.projectCreatedHandler,this.projectValidationFailedHandler))},registerPostProjectCreationCallback:function(e){this.postProjectCreationCallbacks.push(e)},registerProjectKeyValidationCallback:function(e){this.projectKeyValidationCallbacks.push(e)},localStoragePrefix:"jira.projecttemplates.",isSimplified:function(){return"com.pyxis.greenhopper.jira:simplified-project-template"===this.webItemData.projectTemplateModuleCompleteKey},projectCreatedHandler:function(t){this.existingProjectData?l("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"}):this.webItemData.demoProject?l("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"}):l("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"});var a={action:"created",source:"createProjectModal",actionSubject:"project",containerType:"project",containerId:String(t.projectId),attributes:{}};this.existingProjectData?(a.attributes.sharedConfigurationProjectId=this.existingProjectData.existingProjectId,a.attributes.createdUsing="sharedConfiguration"):this.webItemData.demoProject?a.attributes.createdUsing="sample":(a.attributes.projectTemplateKey=this.webItemData.projectTemplateModuleCompleteKey,a.attributes.createdUsing="template",a.attributes.projectType=this.webItemData.projectType,a.attributes.simplified=this.isSimplified(),a.attributes.projectAccessLevel=this.isSimplified()?"open":""),o.sendTrackEvent(a),e.avoidDirtyFormWarning();var i=this.localStoragePrefix,s=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];c.map(s,function(e){t.remoteProjectLinks&&t.remoteProjectLinks[e]&&localStorage.setItem(i+e,t.remoteProjectLinks[e])}),c.isEmpty(this.postProjectCreationCallbacks)?this._window.location=d+t.returnUrl:(r.dialog.addPage("post-project-created-page"),c.each(this.postProjectCreationCallbacks,function(e){e(r.dialog,t.returnUrl,t.projectId,t.projectKey,t.projectName)}))},projectValidationFailedHandler:function(t,r){this.existingProjectData?l("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"}):this.webItemData.demoProject?l("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"}):l("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"});var i={};if(this.isBadRequest(t))i=JSON.parse(t.responseText);else if(this.isUnDefinedServerSideError(t))i={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]};else{if(this.isDefinedServerSideError(t)){var o=JSON.parse(t.responseText);return JIRA.Messages.showReloadErrorMsg(o.message),e.avoidDirtyFormWarning(),void(this._window.location=d+o.returnUrl)}i=this.isTimeoutError(r)?{errorMessages:["Request timeout when creating project"]}:{errorMessages:[AJS.format("Error creating project, {0}",t.responseText)]}}e.draw({webItemData:this.webItemData||{},errors:i,currentName:e.getName(),currentKey:e.getKey(),currentUserDisplayName:a.model.currentUserDisplayName,currentUserName:a.model.currentUserName,currentUserAvatarUrl:a.model.currentUserAvatarUrl}),e.hideLoadingState()},isBadRequest:function(e){return 400===e.status},isUnDefinedServerSideError:function(e){if(500===e.status)try{JSON.parse(e.responseText)}catch(e){return!0}return!1},isDefinedServerSideError:function(e){return 500===e.status&&!c.isUndefined(JSON.parse(e.responseText).message)},isTimeoutError:function(e){return"timeout"===e},_updateAndValidateKey:function(t){e.setKey(t),this.validateKey()},_shouldUpdateKey:function(){return"true"!=e.getKeyEdited()},autofillKeyIfNeeded:function(){if(this._shouldUpdateKey()){var r=t.generate(e.getName());r.length>1?this._updateAndValidateKey(r):e.setKey("")}},_doesProjectNameExists:function(e){var t;for(t in this.projectNamesUpperCased)if(e.toUpperCase()==this.projectNamesUpperCased[t])return!0;return!1},validateName:function(){var t=n.trim(e.getName());if(t)return t.length<a.model.minNameLength?void e.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",a.model.minNameLength)):t.length>a.model.maxNameLength?void e.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",a.model.maxNameLength)):this._doesProjectNameExists(t)?void e.showInlineErrorForName("A project with that name already exists."):void e.hideInlineErrorForName()},_performKeyValidationChecks:function(t){var r=n.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+t.toUpperCase()});r.done(c.bind(function(r){if(r.errors&&r.errors.projectKey)e.showInlineErrorForKey(r.errors.projectKey);else{var a=!1;c.each(this.projectKeyValidationCallbacks,function(r){var i=r(t.toUpperCase());i.errors&&i.errors.projectKey&&(a=!0,e.showInlineErrorForKey(i.errors.projectKey))}),a||e.hideInlineErrorForKey()}},this))},validateKey:function(){var t=e.getKey();this.lastKeyValidated!==t&&(t?(this.lastKeyValidated=t,this._performKeyValidationChecks(t)):e.hideInlineErrorForKey())},nameTimeout:function(){this.autofillKeyIfNeeded()},keyTimeout:function(){e.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0)return this.projectNamesUpperCased;var e=n.ajax({url:d+"/rest/api/latest/project"});e.done(c.bind(function(e){this.projectNamesUpperCased=c.map(e,function(e){return e.name.toUpperCase()})},this))}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/template-info-view.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(t,e,n,a,i){var o=AJS.trigger;return n.View.extend({initialize:function(t){i.bindAll(this,"draw","onNext")},draw:function(e,n){var a=t.addPage({name:"template-info",title:n,panelName:"template-info",backButton:!0,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"}),i=this._nameToObj(e)();t.dialog.getPanel(a.id,0).html(i),t.dialog.gotoPage(a.id)},_nameToObj:function(t){return i.reduce(t.split("."),function(t,e){if(t)return t[e]},window)},onNext:function(t){o("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var n=e("jira/project-templates/template-info-controller");return n.next(),!1}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/template-info-controller.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,t,n,a){var i=t.extend({init:function(e){a.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(t){this.projectTemplateData=t;var n=new e;n.draw(t.infoSoyPath,t.name)},next:function(){var e=n("jira/project-templates/select-project-template-controller");e.openAddProjectPage(this.projectTemplateData)}});return new i});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/select-project-template-view.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(e,t,i,a,o,r,n){var l=AJS.contextPath(),s=AJS.preventDefault,c=AJS.trigger;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(i,o,n){function s(){return d.isProjectTypesEnabled(i)?JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:i.projectTemplatesGroupedByType}):JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:i.projectTemplates})}function p(e){return!e.isOptimusPrimeOnboarding||e.isOptimusPrimeOnboarding&&e.hasProjectsInSystem}var d=a("jira/project-templates/select-project-template-controller");this.page=e.addPage({name:this.DIALOG_BODY_CLASS,title:i.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:n.isOptimusPrimeOnboarding,submitButtonText:"Next",submitButtonCallback:d.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"}),e.dialog.getPanel(this.page.id,0).html(s()),t.model.projectCount>=2&&!i.demoProjects&&r(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:l})).appendTo(e.$dialogElement.find(".dialog-title"));var m=e.$dialogElement.find(".create-project-dialog-create-button"),u=this;this.getTemplateItems().click(function(){var e=r(this);e.addClass("selected"),u.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){m.click()}).focus(function(){r(this).click()});var f=this.get$TemplatesContainer();!i.demoProjects&&p(n)&&r(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:!0,projectImportAvailable:i.projectImportAvailable})).prependTo(e.$dialogElement.find(".dialog-button-panel")),this.bindKeyboardEvents(f),d.isProjectTypesEnabled(i)?0==i.projectTemplatesGroupedByType.length&&m.attr("disabled","disabled"):0==i.projectTemplates.length&&m.attr("disabled","disabled"),this.focusOnFirstTemplate(f,o),e.dialog.updateHeight(),this.truncateTemplateDescriptions(),this.resizeTemplateWidths();var h=e.$dialogElement.find("#view-more-business-templates");h.click(function(){c("analyticsEvent",{name:"jira.project.templates.dialog.create.more-business-templates.clicked"}),e.$dialogElement.find("#project-template-group-business").addClass("view-more-business-templates-selected"),requestAnimationFrame(function(){e.dialog.updateHeight(),this.resizeTemplateWidths()}.bind(this)),this.focusOnFirstTemplate(this.get$TemplatesContainer())}.bind(this))},get$TemplatesContainer:function(){return e.$dialogElement.find(".templates")},focusOnFirstTemplate:function(e,t){t?this.getFirstTemplateItemOfProjectType(t).click():this.getFirstTemplateItem().click(),setTimeout(function(){e.focus()},0)},getSelectedTemplateData:function(){var t=e.$dialogElement.find(".template.selected");return t.data()},getMoveDeltaForKey:function(e){switch(e){case 37:return-1;case 39:return 1;case 38:return-this.ROW_LENGTH;case 40:return+this.ROW_LENGTH}return 0},bindKeyboardEvents:function(e){e.bind("keydown",n.bind(function(t){var i=this.getMoveDeltaForKey(t.which);if(i)return this.moveSelection(e,i),s(t)},this))},moveSelection:function(e,t){var i=e.find(".template"),a=i.filter(".selected"),o=i.index(a)+t;if(o<i.length&&o>=0){var r=i.eq(o);r.click().focus(),this.scrollToSelectedElement(r)}},scrollToSelectedElement:function(e){var t=r(".dialog-panel-body.pt-content"),i=t.offset().top,a=e.offset().top,o=a+e.height(),n=i+t.height();a<i?t.scrollTop(t.scrollTop()-(i-a)):o>i+t.height()&&t.scrollTop(t.scrollTop()+o-n)},get$NextButton:function(){return e.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var t=AJS.Meta.get("user-locale"),i="word";"ja_JP"===t&&(i="letter"),e.$dialogElement.find(".template-description").each(function(){r(this).dotdotdot({wrap:i,lastCharacter:{remove:[" ",",",";",".","!","?","。"],noEllipsis:[]}})})},getTemplatesDialogContainer:function(){return e.$dialogElement.find("."+this.DIALOG_BODY_CLASS).find(".dialog-panel-body.pt-content").get(0)},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(e){return this.getTemplateItems().filter("#project-template-group-"+e+" *").first()},getTemplateItems:function(){return e.$dialogElement.find(".template")},widthOfScrollbarForElement:function(e){var t=e.offsetWidth,i=e.clientWidth;return t-i},widthOfDialogAvailableForTemplateList:function(){var e=this.getTemplatesDialogContainer(),t=this.widthOfScrollbarForElement(e),i=r(e).width()||this.DIALOG_WIDTH;return i-t},widthOfTemplateItem:function(){var e=this.widthOfDialogAvailableForTemplateList()/this.ROW_LENGTH;return e-this.borderWidthOfTemplateItem()},borderWidthOfTemplateItem:function(){var e=this.getFirstTemplateItem().css("border-top-width");return parseInt(e,10)},resizeTemplateWidths:function(){this.getTemplateItems().each(n.bind(function(e,t){r(t).css("width",this.widthOfTemplateItem())},this))}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/select-project-template-controller.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(e,t,o,r,a,l,n,i,p){var c=n(),s={init:function(t,o,r){this.onboarding=r,e.draw(t,o,r)},isProjectTypesEnabled:function(e){return null!=e.projectTemplatesGroupedByType},loadProjectTemplatesData:function(){return i.ajax({url:c+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function(){return i.ajax({url:c+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).then(function(e){return e.demoProjects=!0,e})},dialogSubmitted:function(){var o=e.getSelectedTemplateData();r.hideDialogFromNewUser("templateselected"),s.raiseAtlassianEvent(o.itemModuleCompleteKey),p.isUndefined(o.infoSoyPath)?s.openAddProjectPage(o):t.initTemplateInfo(o)},openAddProjectPage:function(e){return e?void(e.createProject?(o.initProjectTemplate(e),this.onboarding&&"function"==typeof this.onboarding.handleSuccessfulProjectCreation&&o.registerPostProjectCreationCallback(this.onboarding.handleSuccessfulProjectCreation)):(r.dialog.addPage("blank-template-page"),i("body").trigger(e.itemModuleCompleteKey,r.dialog))):void a.showErrorMessage("An error occurred while trying to contact Jira")},raiseAtlassianEvent:function(e){l.model.selectedTemplate=e,AJS.EventQueue&&AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:e}})}};return s});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/create-shared-view.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(e,t,r,o,a,i,n){"use strict";var l=AJS.InlineDialog,s=AJS.trigger,c=i.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:void 0,prepareDialog:function(t){var r=a("jira/project-templates/create-shared-controller");this.page=e.addPage({name:"create-shared-project",title:t,panelName:"create-shared-project",backButton:!0,submitButtonText:"Next",submitButtonCallback:r.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(t){e.dialog.gotoPage(this.page.id);var r=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(t.projectSuggestions)});e.dialog.getPanel(this.page.id,0).html(r),this._createProjectPicker();var o=e.$dialogElement.find("#shared-help-icon");o.length&&new l(o,"shared-project-help-popup",function(e,t,r){e.html(JIRA.Templates.ProjectTemplates.sharedHelp()),r()},{width:330,offsetX:-30}),e.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors(),this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var t=JIRA.Templates.ProjectTemplates.noProjects();e.dialog.getPanel(this.page.id,0).html(t),e.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(t){e.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:!1,msg:t}))},drawLoading:function(){e.dialog.gotoPage(this.page.id);var t=JIRA.Templates.ProjectTemplates.loading();e.dialog.getPanel(this.page.id,0).html(t),e.$dialogElement.find(".dialog-spinner").spin(),e.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){e.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return e.$dialogElement.find("#project-picker")},onSubmitForm:function(e){this._clearFormErrors();var t=a("jira/project-templates/create-shared-controller");return t.dialogSubmitted(),!1},_getExtraInfoMessage:function(){return e.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide(),this.projectSelect=new r({element:this._getProjectPickerInput(),revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:o}),this.projectSelect.$field.focus();var e=this;this._getProjectPickerInput().on("selected",function(t,r){r.value()&&(s("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"}),e._getExtraInfoMessage().show())})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new c({el:n(document),dialogView:t})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/create-shared-controller.js' */
define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(e,r){return new e({el:r(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/create-shared-controller-impl.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,t,r,i,a){"use strict";var n=AJS.contextPath();return r.extend({init:function(e){this._window=e.window||window,a.bindAll(this,"dialogSubmitted")},initCreateShared:function(){t.prepareDialog("Create with shared configuration");var e=this;this._getProjectSuggestions().done(function(r){e._hasSuggestions(r)?t.draw({projectSuggestions:r}):t.drawEmptyInfo()}).fail(function(){t.drawError("An error occurred while trying to contact Jira")}),t.drawLoading()},_hasSuggestions:function(e){var t=!1;return i.each(e,function(e,r){r&&r.items&&r.items.length>0&&(t=!0)}),t},_getProjectSuggestions:function(){return i.ajax({url:n+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var r=t.getSelectedProject();r?e.initCreateShared({existingProjectId:r}):t.showProjectMissingError()}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){function e(e,o){return JIRA.Templates.ProjectTemplates.formatAnchor({href:e,body:o,title:o})}function o(o,t,r,a){var c=[];return c.push("a Jira project"),o&&c.push(e(o,"a Confluence space")),t&&c.push(e(t,"a FishEye repository")),r&&c.push(e(r,"a Crucible project")),a&&c.push(e(a,"a Bamboo project")),c}function t(e,t,r,c){var l="The following entities were created: {0} and {1}.",m=o(e,t,r,c),n=m.pop();return m.length>0?a(l,m.join(", "),n):null}function r(e){var o=$(e).offset();o&&window.scrollTo(o.left,o.top)}var a=AJS.format,c=require("jira/project-templates/add-project-controller"),l=localStorage.getItem(c.localStoragePrefix+"confluenceProject"),m=localStorage.getItem(c.localStoragePrefix+"fisheyeProject"),n=localStorage.getItem(c.localStoragePrefix+"crucibleProject"),s=localStorage.getItem(c.localStoragePrefix+"bambooProject");localStorage.removeItem(c.localStoragePrefix+"confluenceProject"),localStorage.removeItem(c.localStoragePrefix+"fisheyeProject"),localStorage.removeItem(c.localStoragePrefix+"crucibleProject"),localStorage.removeItem(c.localStoragePrefix+"bambooProject");var g;(l||m||n||s)&&(g=t(l,m,n,s),g&&JIRA.Messages.showSuccessMsg(g,{closeable:!0}),r("#project-config-webpanel-summary-settings"))});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/namespace.js' */
AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller")),AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view")),AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller")),AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view")),AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config")),AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view")),AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller")),AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator")),AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller")),AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view")),AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller")),AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-create-bridge.js' */
!function(){function e(e){n(e)}var n,t=new Promise(function(e){n=e});t.done=function(e){return this.then(e)},define("jira/project-templates/new-project-create/bridge",function(){return e}),define("jira/project-templates/new-project-create",function(){return t})}();;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-create-experience.js' */
define("jira/project-templates/project-create-experience",[],function(){return{trigger:function(e){e.preventDefault(),JIRA.API.getSidebar().then(function(e){e.openDrawerForProjectCreate(!0)})}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-create-onboarding-experience.js' */
define("jira/project-templates/project-create-onboarding-experience",["jquery","jira/project-templates/dialog-controller","jira/project-templates/new-project-create"],function(e,r,t){function n(e){AJS.trigger("analyticsEvent",{name:e})}var o="jira.project.templates.onboarding.",a=o+"new-project-create.",c=a+"opened",i=a+"created",l=a+"cancelled",d=a+"load-error";return{trigger:function(o){o&&o.preventDefault(),n(c);var a=e("#onboarding");t.then(function(e){a.hide();var r=document.getElementById("new-project-create");e.renderNewProjectCreate(r,function(e){n(i),window.location.assign(e.returnUrl)},function(){n(l),a.show()})}).catch(function(){n(d),a.show(),r.handleProjectTemplateTriggered()})}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-create-experience-init.js' */
require(["jquery","jira/project-templates/project-create-experience","jira/project-templates/project-create-onboarding-experience","jira/featureflags/feature-manager","wrm/context-path","jira/analytics/web-client"],function(e,o,t,r,n,a){e(document).ready(function(){function a(e,o){AJS&&AJS.trigger&&"function"==typeof AJS.trigger&&AJS.trigger("analyticsEvent",{name:e,data:o})}function c(){const e=document.querySelector(".optimus-onboardingBackground");e&&(e.style.display="none")}function i(){const e=document.querySelector(".optimus-onboardingBackground");e&&(e.style.display="initial")}e(".trigger-project-create-experience").click(o.trigger);const l="experiment"===r.getFlagValue("jwm-onboarding-made-for-you-category");if(l||new URLSearchParams(document.location.search).has("templateId")){const d="cyoaFirstUseFlow",g=new URLSearchParams(document.location.search).get("templateId");c(),e.ajax({url:n()+"/rest/onboarding/1.0/flow/"+d+"/complete",type:"POST",statusCode:{401:function(){Browser.reloadViaWindowLocation(n()+"/login.jsp?os_destination="+encodeURIComponent(window.location.href))}}}).done(function(){t.trigger(),i(),a("jira-platform.fe.web.onboarding.cyoa-flow.wacToProduct.jwm.redirection",{templateId:g})}).fail(function(e){i(),a("jira-platform.fe.web.onboarding.cyoa-flow.wacToProduct.completeCyoa.failed",{templateId:g,error:e&&e.responseText})})}e(document).on("click",".trigger-onboarding-project-create-experience",t.trigger)})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'jira-agile-module/includes/js/gh-globalkeyboardshortcuts.js' */
!function(s){s.namespace("gh.app.globalkeyboardshortcuts");var o=gh.app.globalkeyboardshortcuts;o.findSelectedIssueId=function(){var e;return e=!(e=jira&&jira.app&&jira.app.issuenavigator&&jira.app.issuenavigator.getSelectedIssueId?jira.app.issuenavigator.getSelectedIssueId():e)&&jira&&jira.app&&jira.app.issue&&jira.app.issue.getIssueId?jira.app.issue.getIssueId():e},o.goToAgile=function(){var e=(contextPath||"")+"/secure/RapidBoard.jspa";window.location.href=e},o.followLink=function(e){e=s(e);0<e.length&&("a"===e[0].nodeName.toLowerCase()||"link"===e[0].nodeName.toLowerCase())&&(e.click(),window.location.href=e.attr("href"))},o.sendToTop=function(e,s,t){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop)return GH.Shortcut.sendToTop(e,t),void o.closeDialogAndPopMessage();"Action"===e&&(s=s||o.findSelectedIssueId(),contextPath=contextPath||"",JIRA.SmartAjax.makeRequest({type:"post",contentType:"application/json",url:contextPath+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:s}),success:o.handleRankSuccess}),AJS.$(AJS).trigger("gh.global.rankissues",{action:"rankToTop"+(e||""),count:1}))},o.sendToBottom=function(e,s,t){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom)return GH.Shortcut.sendToBottom(e,t),void o.closeDialogAndPopMessage();"Action"===e&&(s=s||o.findSelectedIssueId(),contextPath=contextPath||"",JIRA.SmartAjax.makeRequest({type:"post",contentType:"application/json",url:contextPath+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:s}),success:o.handleRankSuccess}),AJS.$(AJS).trigger("gh.global.rankissues",{action:"rankToBottom"+(e||""),count:1}))},o.closeDialogAndPopMessage=function(){JIRA.IssueNavigator.isNavigator()?AJS.reloadViaWindowLocation():(JIRA.Dialog&&JIRA.Dialog.current&&JIRA.Dialog.current.hide(),window.GH?(GH.Message&&GH.Message.showIssueMessage?GH.Message.showIssueMessage():GH.RapidBoard&&GH.Notification&&GH.Notification.showIssueMessage&&GH.Notification.showIssueMessage(),window.Boards&&Boards.refreshAll()):JIRA.IssueNavigator&&JIRA.IssueNavigator.Shortcuts&&JIRA.IssueNavigator.Shortcuts.flashIssueRow&&JIRA.IssueNavigator.Shortcuts.flashIssueRow())},o.handleRankSuccess=function(e,s,t){o.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated"),o.closeDialogAndPopMessage()},o.storeSuccessMessage=function(e,s,t){var o=JIRA.SessionStorage;o.setItem("selectedIssueId",e),o.setItem("selectedIssueKey",s),o.setItem("selectedIssueMsg",t)},AJS.$(function(){AJS.$(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(e){e.preventDefault();e=AJS.$(this).attr("data-issueid");o.sendToTop("Action",e)}),AJS.$(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(e){e.preventDefault();e=AJS.$(this).attr("data-issueid");o.sendToBottom("Action",e)})})}(AJS.$);;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'gadgets-embedded-plugin/js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){if(!isRpcRequest(gadgets.json.parse(packet.data))){return }if(packet.origin===location.origin){process(gadgets.json.parse(packet.data))}else{AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function isRpcRequest(request){return request&&typeof request.s==="string"&&typeof request.f==="string"&&request.a instanceof Array}function process(rpc){if(isRpcRequest(rpc)){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'gadgets-embedded-plugin/js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'gadgets-embedded-plugin/js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'gadgets-embedded-plugin/js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'gadgets-embedded-plugin/js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-standalone-resources', location = 'gadgets-embedded-plugin/js/gadgets-standalone.js' */
new gadgets.IfrGadgetService();gadgets.IfrGadgetService.prototype.setTitle=function(title){};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:project-page', location = 'jira-projects-module/sidebar/navigation/items.js' */
AJS.$(function(n){n(document).on("click",'.aui-nav > [aria-expanded] > a.aui-nav-item[href="#"]',function(a){a.preventDefault(),AJS.navigation(n(this).siblings(".aui-nav")).toggle()})});;
;
/* module-key = 'com.atlassian.auiplugin:ajs-raf', location = 'auiplugin/node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__0e57a5ff611a3173e3f9aa2306aea259=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-is-input', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/internal/is-input.js' */
("undefined"===typeof window?global:window).__f268bb685e7e11f511cb91a156a783b0=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return"value"in a||a.isContentEditable};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-raf-raf', location = 'auiplugin/node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__0e57a5ff611a3173e3f9aa2306aea259=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-has-touch', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/internal/has-touch.js' */
("undefined"===typeof window?global:window).__29f0b74d9ef495751062ec4e83e0b098=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=window.DocumentTouch;a.default="ontouchstart"in window||b&&document instanceof b;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-mediaQuery', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/internal/mediaQuery.js' */
("undefined"===typeof window?global:window).__e67a99ea27950f14c1291fb7cebabf6d=function(){var a={};Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){if(window.matchMedia)return window.matchMedia(a).matches;var b=document.createElement("style");b.type="text/css";b.id="testMedia";b.innerText="@media "+a+" { #testMedia { width: 1px; } }";document.head.appendChild(b);a="1px"===window.getComputedStyle(b,null).width;b.parentNode.removeChild(b);return a};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-sidebar', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/sidebar.js' */
("undefined"===typeof window?global:window).__c0275cfdb12ae34a5641a8e219403604=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function c(a){this.$el=(0,e.default)(a);if(this.$el.length){this.$body=(0,e.default)("body");this.$wrapper=this.$el.children(".aui-sidebar-wrapper");this.$body.addClass("aui-page-sidebar");this._previousOffsetTop=this._previousViewportWidth=this._previousViewportHeight=this._previousScrollTop=null;this.submenus=new g;var b=this;if((0,e.default)(".aui-sidebar").length){b.$el.on("hover click focus",
b.collapsedTriggersSelector,function(a){a=(0,e.default)(a.target);r(b,a)});if(y.default&&(0,z.default)("only screen and (max-device-width:1024px)"))(0,e.default)("body").addClass("aui-page-sidebar-touch");var d=null,c=function(){null===d&&(d=requestAnimationFrame(function(){b.reflow();d=null}))};(0,e.default)(window).on("scroll resize",c);b.reflow();if(b.isAnimated())b.$el.on("transitionend webkitTransitionEnd",function(){b.$el.trigger(e.default.Event(l+(b.isCollapsed()?"collapse-end":"expand-end")))});
b.$el.on("click",".aui-sidebar-toggle",function(a){a.preventDefault();b.toggle()});(0,e.default)(".aui-page-panel").click(function(){!b.isCollapsed()&&b.isViewportNarrow()&&b.collapse()});var s=function(a){a.which===AJS.keyCode.LEFT_SQUARE_BRACKET&&(!a.shiftKey&&!a.ctrlKey&&!a.metaKey&&!(0,A.default)(a.target))&&b.toggle()};(0,e.default)(document).on("keypress",s);b._remove=function(){this._removeAllTooltips();(0,e.default)(this.inlineDialogSelector).remove();this.$el.off();this.$el.remove();(0,e.default)(document).off("keypress",
s);(0,e.default)(window).off("scroll resize",c)};b.$el.on("touchend",function(a){b.isCollapsed()&&(b.expand(),a.preventDefault())});b.$el.on("mouseenter focus",b.collapsedTriggersSelector,function(){if(b.isCollapsed()){var a=(0,e.default)(this);0!==m(a).length||t(a)}});b.$el.on("click blur mouseleave",b.collapsedTriggersSelector,function(){b.isCollapsed()&&u((0,e.default)(this))});b.$el.on("mouseenter focus",b.toggleSelector,function(){var a=(0,e.default)(this);b.isCollapsed()?a.data("tooltip","Expand sidebar ( [ )"):
a.data("tooltip","Collapse sidebar ( [ )");t(a)});b.$el.on("click blur mouseleave",b.toggleSelector,function(){u((0,e.default)(this))});b.$el.on("keydown",b.collapsedTriggersSelector,function(a){if(b.isCollapsed()){var d=a.target,c=v(d);if(c){var f=(0,e.default)(c);a.keyCode===AJS.keyCode.TAB&&(!a.shiftKey&&!a.altKey)&&c.open&&(a.preventDefault(),f.attr("persistent",""),f.find(":aui-tabbable").first().focus(),setTimeout(function(){f.removeAttr("persistent")},100),f.on("keydown",
function(a){if(a.keyCode===AJS.keyCode.TAB&&a.shiftKey&&a.target===f.find(":aui-tabbable")[0]||a.keyCode===AJS.keyCode.TAB&&(!a.shiftKey&&!a.altKey)&&a.target===f.find(":aui-tabbable").last()[0])d.focus(),(0,e.default)(this).off("keydown"),p()}))}}})}var f=this;(0,e.default)(f.collapsedTriggersSelector).each(function(){var a=(0,e.default)(this);r(f,a)})}}function w(a){return e.default.map(a.split(" "),function(a){return l+a}).join(" ")}function g(){this.inlineDialog=null}function m(a){return a.is("a")?
a.next(".aui-nav"):a.children(".aui-nav, hr")}function v(a){a=a.getAttribute("aria-controls");return document.getElementById(a)}function p(){var a=document.querySelectorAll(c.prototype.inlineDialogSelector);Array.prototype.forEach.call(a,function(a){a.open=!1})}function r(a,b){if(!b.data("_aui-sidebar-submenu-constructed")&&(b.data("_aui-sidebar-submenu-constructed",!0),0!==m(b).length)){var d=document.createElement("aui-inline-dialog"),g=(0,B.default)("sidebar-submenu");b.attr("aria-controls",g);
b.attr("data-aui-trigger","");x.default.init(b);d.setAttribute("id",g);d.setAttribute("alignment","right top");d.setAttribute("aria-hidden","true");a.isCollapsed()&&d.setAttribute("responds-to","hover");(0,e.default)(d).addClass(c.prototype.inlineDialogClass);document.body.appendChild(d);x.default.init(d);d.addEventListener("aui-layer-show",function(c){if(a.isCollapsed()){b.addClass("active");d.innerHTML=C;var f=b.is("a")?b.text():b.children(".aui-nav-heading").text(),c=(0,e.default)(d).find(".aui-navgroup-inner");
c.children(".aui-nav-heading").attr("title",f).children("strong").text(f);f=m(b);f=AJS.clone(f);f.hasClass("aui-expander-content")&&(f.find(".aui-expander-cutoff").remove(),f.removeClass("aui-expander-content"));f.appendTo(c)}else c.preventDefault()});d.addEventListener("aui-layer-hide",function(){b.removeClass("active")});return d}}function t(a){a.tipsy(D).tipsy("show");(a=a.data("tipsy")&&a.data("tipsy").$tip)&&a.css({opacity:""}).addClass("tooltip-shown")}function u(a){var b=a.data("tipsy")&&a.data("tipsy").$tip;
if(b){var d=b.css("transition-duration");d&&(d=0<=d.indexOf("ms")?parseInt(d.substring(0,d.length-2),10):1E3*parseInt(d.substring(0,d.length-1),10),setTimeout(function(){a.tipsy("hide")},d));b.removeClass("tooltip-shown")}}var o={};"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=j(__307d3e18fd611f85395c67cddeb1fe24);__f673a5150978887490995d88aeec0c8d;__0e57a5ff611a3173e3f9aa2306aea259;__d74c881c8f23921c15438d0f30c99f80;var k;var h=__c8cfa00f1eba9ac7af89ee3d0d33961d;if(h&&h.__esModule)k=
h;else{var n={};if(null!=h)for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&(n[k]=h[k]);n.default=h;k=n}var h=j(__4d02fe17b8e885a34493e34af3d145dd),y=j(__29f0b74d9ef495751062ec4e83e0b098),A=j(__f268bb685e7e11f511cb91a156a783b0),z=j(__e67a99ea27950f14c1291fb7cebabf6d),x=j(__c1ce1f1e3e613f564fc234ff043570f1),B=j(__9fa5e8acd81f0f9028180b8fcdcd9cb4),n=j(__e3152236c406a356c24f20f7bfcccf21),E="undefined"!==typeof document.documentElement.style.transition||"undefined"!==typeof document.documentElement.style.webkitTransition,
l="_aui-internal-sidebar-";c.prototype.on=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=w(a);this.$el.on.apply(this.$el,[a].concat(b));return this};c.prototype.off=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=w(a);this.$el.off.apply(this.$el,[a].concat(b));return this};c.prototype.setHeight=function(a,b,d){a=Math.max(0,d-a);this.$wrapper.height(b-a);return this};c.prototype.setPosition=function(a){a=a||window.pageYOffset;this.$wrapper.toggleClass("aui-is-docked",
a>this.$el.offset().top);return this};c.prototype.setCollapsedState=function(a){var b={collapsed:{},expanded:{}};b.collapsed.narrow={narrow:e.default.noop,wide:function(b){b._expand(a,!0)}};b.collapsed.wide={narrow:e.default.noop,wide:e.default.noop};b.expanded.narrow={narrow:e.default.noop,wide:function(a){a.$body.removeClass("aui-sidebar-collapsed");a.$el.removeClass("aui-sidebar-fly-out")}};b.expanded.wide={narrow:function(a){a._collapse(!0)},wide:e.default.noop};var d=this.isCollapsed()?"collapsed":
"expanded",c=this.isViewportNarrow(this._previousViewportWidth)?"narrow":"wide",g=this.isViewportNarrow(a)?"narrow":"wide";b[d][c][g](this);return this};c.prototype._collapse=function(a){if(this.isCollapsed())return this;var b=e.default.Event(l+"collapse-start",{isResponsive:a});this.$el.trigger(b);if(b.isDefaultPrevented())return this;this.$body.addClass("aui-sidebar-collapsed");this.$el.attr("aria-expanded","false");this.$el.removeClass("aui-sidebar-fly-out");this.$el.find(this.submenuTriggersSelector).attr("tabindex",
0);(0,e.default)(this.inlineDialogSelector).attr("responds-to","hover");this.isAnimated()||this.$el.trigger(e.default.Event(l+"collapse-end",{isResponsive:a}));return this};c.prototype.collapse=function(){return this._collapse(!1)};c.prototype._expand=function(a,b){var d=e.default.Event(l+"expand-start",{isResponsive:b});this.$el.trigger(d);if(d.isDefaultPrevented())return this;d=this.isViewportNarrow(a);this.$el.attr("aria-expanded","true");this.$body.toggleClass("aui-sidebar-collapsed",d);this.$el.toggleClass("aui-sidebar-fly-out",
d);this.$el.find(this.submenuTriggersSelector).removeAttr("tabindex");(0,e.default)(this.inlineDialogSelector).removeAttr("responds-to");this.isAnimated()||this.$el.trigger(e.default.Event(l+"expand-end",{isResponsive:b}));return this};c.prototype.expand=function(){this.isCollapsed()&&this._expand(this._previousViewportWidth,!1);return this};c.prototype.isAnimated=function(){return E&&this.$el.hasClass("aui-is-animated")};c.prototype.isCollapsed=function(){return"false"===this.$el.attr("aria-expanded")};
c.prototype.isViewportNarrow=function(a){a=void 0===a?this._previousViewportWidth:a;return 1240>a};c.prototype._removeAllTooltips=function(){(0,e.default)(this.tooltipSelector).remove()};c.prototype.responsiveReflow=function(a,b){if(a){if(!this.isCollapsed()&&this.isViewportNarrow(b)){var d=this.isAnimated();d&&this.$el.removeClass("aui-is-animated");this.collapse();d&&(this.$el[0].offsetHeight,this.$el.addClass("aui-is-animated"))}}else b!==this._previousViewportWidth&&this.setCollapsedState(b)};
c.prototype.reflow=function(a,b,d,c){var a=void 0===a?window.pageYOffset:a,b=void 0===b?document.documentElement.clientHeight:b,c=void 0===c?document.documentElement.scrollHeight:c,d=void 0===d?window.innerWidth:d,e=this.$el.offset().top,f=null===this._previousViewportWidth;if(!(a===this._previousScrollTop&&b===this._previousViewportHeight&&e===this._previousOffsetTop)){this.isCollapsed()&&(!f&&a!==this._previousScrollTop)&&(p(),this._removeAllTooltips());var g=this.$body.hasClass("aui-page-sidebar-touch"),
c=a!==this._previousScrollTop&&(0>a||a+b>c);if(!g&&(f||!c))this.setHeight(a,b,e),this.setPosition(a)}"false"!==this.$el.attr("data-aui-responsive")?this.responsiveReflow(f,d):(f=!this.isCollapsed()&&this.isViewportNarrow(d),this.$el.toggleClass("aui-sidebar-fly-out",f));this._previousScrollTop=a;this._previousViewportHeight=b;this._previousViewportWidth=d;this._previousOffsetTop=e;return this};c.prototype.toggle=function(){this.isCollapsed()?(this.expand(),this._removeAllTooltips()):this.collapse();
return this};c.prototype.submenuTriggersSelector=".aui-sidebar-group:not(.aui-sidebar-group-tier-one)";c.prototype.collapsedTriggersSelector=[c.prototype.submenuTriggersSelector,".aui-sidebar-group.aui-sidebar-group-tier-one > .aui-nav > li > a",".aui-sidebar-footer > .aui-sidebar-settings-button"].join(", ");c.prototype.toggleSelector=".aui-sidebar-footer > .aui-sidebar-toggle";c.prototype.tooltipSelector=".aui-sidebar-section-tooltip";c.prototype.inlineDialogClass="aui-sidebar-submenu-dialog";c.prototype.inlineDialogSelector=
"."+c.prototype.inlineDialogClass;g.prototype.submenu=function(a){i();return m(a)};g.prototype.hasSubmenu=function(a){i();return 0!==m(a).length};g.prototype.submenuHeadingHeight=function(){i();return 34};g.prototype.isShowing=function(){i();return c.prototype.isSubmenuVisible()};g.prototype.show=function(a,b){i();v(b).open=!0};g.prototype.hide=function(){i();p()};g.prototype.inlineDialogShowHandler=function(){i()};g.prototype.inlineDialogHideHandler=function(){i()};g.prototype.moveSubmenuToInlineDialog=
function(){i()};g.prototype.restoreSubmenu=function(){i()};c.prototype.getVisibleSubmenus=function(){return Array.prototype.filter.call(document.querySelectorAll(c.prototype.inlineDialogSelector),function(a){return a.open})};c.prototype.isSubmenuVisible=function(){return 0<this.getVisibleSubmenus().length};var C='<div class="aui-inline-dialog-contents"><div class="aui-sidebar-submenu" ><div class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong></strong></div></div></div></div></div>',
D={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){var a=(0,e.default)(this);return a.is("a")?a.attr("title")||a.find(".aui-nav-item-label").text()||a.data("tooltip"):a.children(".aui-nav").attr("title")||a.children(".aui-nav-heading").text()}},q=(0,n.default)("sidebar",c);(0,e.default)(function(){q(".aui-sidebar")});var i=k.getMessageLogger("Sidebar.submenus",{removeInVersion:"6.0",sinceVersion:"5.8"});(0,h.default)("sidebar",q);o.default=q;return o=o["default"]}.call(this);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:ajs-helper', location = 'jira-issue-navigator-components-module/util/ajshelper.js' */
define("jira/components/utils/ajshelper",[],function(){"use strict";function e(){return function(e,n){if(n){var r=n.data||{};r.searchSessionId=r.searchSessionId||t.Meta.get("search-session-id"),r.searchObjectId=r.searchObjectId||t.Meta.get("search-object-id"),r.searchContainerId=r.searchContainerId||t.Meta.get("search-container-id"),r.searchContentType=r.searchContentType||t.Meta.get("search-content-type"),n.data=r}t.trigger(e,n)}}var t=window.AJS;return{escapeHtml:t.escapeHtml.bind(t),LEFT:t.LEFT,Templates:t.Templates,HIDE_REASON:t.HIDE_REASON,trigger:e(),log:t.log.bind(t),extractBodyFromResponse:t.extractBodyFromResponse,whenIType:function(){return t.whenIType},activeShortcuts:function(){return t.activeShortcuts}}});
//# sourceMappingURL=ajshelper-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:underscore-1.5.2', location = 'atlassian-jslibs/libs/underscore/1.5.2/underscore.js' */
!function(n){define("atlassian/libs/underscore-1.5.2",function(){var t={};return n.call(t),"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports.noConflict():exports.noConflict():t._.noConflict()})}(function(){(function(){var n=this,t=n._,r={},e=Array.prototype,i=Object.prototype,u=Function.prototype,o=e.push,a=e.slice,c=e.concat,l=i.toString,f=i.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,y=e.every,g=e.some,m=e.indexOf,x=e.lastIndexOf,w=Array.isArray,b=Object.keys,_=u.bind,j=function(n){return n instanceof j?n:this instanceof j?void(this._wrapped=n):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.5.2";var A=j.each=j.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var i=0,u=n.length;i<u;i++)if(t.call(e,n[i],i,n)===r)return}else for(var o=j.keys(n),i=0,u=o.length;i<u;i++)if(t.call(e,n[o[i]],o[i],n)===r)return};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,i,u){e.push(t.call(r,n,i,u))}),e)};var E="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var i=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),i?n.reduce(t,r):n.reduce(t);if(A(n,function(n,u,o){i?r=t.call(e,r,n,u,o):(r=n,i=!0)}),!i)throw new TypeError(E);return r},j.reduceRight=j.foldr=function(n,t,r,e){var i=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),i?n.reduceRight(t,r):n.reduceRight(t);var u=n.length;if(u!==+u){var o=j.keys(n);u=o.length}if(A(n,function(a,c,l){c=o?o[--u]:--u,i?r=t.call(e,r,n[c],c,l):(r=n[c],i=!0)}),!i)throw new TypeError(E);return r},j.find=j.detect=function(n,t,r){var e;return O(n,function(n,i,u){if(t.call(r,n,i,u))return e=n,!0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,i,u){t.call(r,n,i,u)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,i){return!t.call(r,n,e,i)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var i=!0;return null==n?i:y&&n.every===y?n.every(t,e):(A(n,function(n,u,o){if(!(i=i&&t.call(e,n,u,o)))return r}),!!i)};var O=j.some=j.any=function(n,t,e){t||(t=j.identity);var i=!1;return null==n?i:g&&n.some===g?n.some(t,e):(A(n,function(n,u,o){if(i||(i=t.call(e,n,u,o)))return r}),!!i)};j.contains=j.include=function(n,t){return null!=n&&(m&&n.indexOf===m?n.indexOf(t)!=-1:O(n,function(n){return n===t}))},j.invoke=function(n,t){var r=a.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,function(n){return n[t]})},j.where=function(n,t,r){return j.isEmpty(t)?r?void 0:[]:j[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},j.findWhere=function(n,t){return j.where(n,t,!0)},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&j.isEmpty(n))return-(1/0);var e={computed:-(1/0),value:-(1/0)};return A(n,function(n,i,u){var o=t?t.call(r,n,i,u):n;o>e.computed&&(e={value:n,computed:o})}),e.value},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&j.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,i,u){var o=t?t.call(r,n,i,u):n;o<e.computed&&(e={value:n,computed:o})}),e.value},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return arguments.length<2||r?n[j.random(n.length-1)]:j.shuffle(n).slice(0,Math.max(0,t))};var k=function(n){return j.isFunction(n)?n:function(t){return t[n]}};j.sortBy=function(n,t,r){var e=k(t);return j.pluck(j.map(n,function(n,t,i){return{value:n,index:t,criteria:e.call(r,n,t,i)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var i={},u=null==r?j.identity:k(r);return A(t,function(r,o){var a=u.call(e,r,o,t);n(i,a,r)}),i}};j.groupBy=F(function(n,t,r){(j.has(n,t)?n[t]:n[t]=[]).push(r)}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=null==r?j.identity:k(r);for(var i=r.call(e,t),u=0,o=n.length;u<o;){var a=u+o>>>1;r.call(e,n[a])<i?u=a+1:o=a}return u},j.toArray=function(n){return n?j.isArray(n)?a.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:a.call(n,0,t)},j.initial=function(n,t,r){return a.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:a.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return a.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?o.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,a.call(arguments,1))},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var i=r?j.map(n,r,e):n,u=[],o=[];return A(i,function(r,e){(t?e&&o[o.length-1]===r:j.contains(o,r))||(o.push(r),u.push(n[e]))}),u},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=a.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.indexOf(t,n)>=0})})},j.difference=function(n){var t=c.apply(e,a.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;r<n;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,i=n.length;e<i;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,i=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=r<0?Math.max(0,i+r):r}if(m&&n.indexOf===m)return n.indexOf(t,r);for(;e<i;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(x&&n.lastIndexOf===x)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var i=e?r:n.length;i--;)if(n[i]===t)return i;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),i=0,u=new Array(e);i<e;)u[i++]=n,n+=r;return u};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,a.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=a.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(a.call(arguments)));R.prototype=n.prototype;var i=new R;R.prototype=null;var u=n.apply(i,r.concat(a.call(arguments)));return Object(u)===u?u:i}},j.partial=function(n){var t=a.call(arguments,1);return function(){return n.apply(this,t.concat(a.call(arguments)))}},j.bindAll=function(n){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=a.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(a.call(arguments,1)))},j.throttle=function(n,t,r){var e,i,u,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:new Date,o=null,u=n.apply(e,i)};return function(){var l=new Date;a||r.leading!==!1||(a=l);var f=t-(l-a);return e=this,i=arguments,f<=0?(clearTimeout(o),o=null,a=l,u=n.apply(e,i)):o||r.trailing===!1||(o=setTimeout(c,f)),u}},j.debounce=function(n,t,r){var e,i,u,o,a;return function(){u=this,i=arguments,o=new Date;var c=function(){var l=new Date-o;l<t?e=setTimeout(c,t-l):(e=null,r||(a=n.apply(u,i)))},l=r&&!e;return e||(e=setTimeout(c,t)),l&&(a=n.apply(u,i)),a}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return function(){var r=[n];return o.apply(r,arguments),t.apply(this,r)}},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},j.keys=b||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),i=0;i<r;i++)e[i]=n[t[i]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),i=0;i<r;i++)e[i]=[t[i],n[t[i]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,i=r.length;e<i;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(a.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,a.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,a.call(arguments,1));for(var i in n)j.contains(r,i)||(t[i]=n[i]);return t},j.defaults=function(n){return A(a.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var i=l.call(n);if(i!=l.call(t))return!1;switch(i){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var u=r.length;u--;)if(r[u]==n)return e[u]==t;var o=n.constructor,a=t.constructor;if(o!==a&&!(j.isFunction(o)&&o instanceof o&&j.isFunction(a)&&a instanceof a))return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==i){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=w||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return void 0===n},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),i=0;i<n;i++)e[i]=t.call(r,i);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=j.invert(I.escape);var T={escape:new RegExp("["+j.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(I.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(T[n],function(t){return I[n][t]})}}),j.result=function(n,t){if(null!=n){var r=n[t];return j.isFunction(r)?r.call(n):r}},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return o.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\t|\u2028|\u2029/g,D=/^\s*(\w|\$)+\s*$/;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var i=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),u=0,o="__p+='";n.replace(i,function(t,r,e,i,a){return o+=n.slice(u,a).replace(C,function(n){return"\\"+B[n]}),r&&(o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(o+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),u=a+t.length,t}),o+="';\n";var a=r.variable;if(a){if(!D.test(a))throw new Error(a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{e=new Function(a,"_",o)}catch(n){throw n.source=o,n}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+a+"){\n"+o+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:underscore', location = 'jira-issue-navigator-components-module/libs/underscore.js' */
define("jira/components/libs/underscore",["require"],function(e){"use strict";return e("atlassian/libs/underscore-1.5.2")});
//# sourceMappingURL=underscore-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:analytics-tracker', location = 'jira-issue-navigator-components-module/analytics-tracker/tracker.js' */
define("jira/components/analytics-tracker/tracker",["jira/components/libs/underscore","jira/issue","jira/components/utils/ajshelper","jquery","jira/customevents/trigger-custom-event"],function(e,t,n,r,i){"use strict";function o(){if(!h)try{h=require("jira/api/projects")}catch(e){h=null}}function a(){return g?g:(o(),h?h.getCurrentProjectId():void 0)}function c(){return j?j:(o(),h?h.getCurrentProjectType():void 0)}function s(){return k?k:t?t.getIssueId():void 0}function u(e){if(e.attr("class")||e.attr("id"))return e;var t=e.parent().closest("[class], [id]");return t.length?t:e}function d(e){var t=r(e.target).closest(p),n=u(t);v("viewissue","generic-action",{className:n.attr("class")||"no-element-className",id:n.attr("id")||"no-element-id"}),w=!1}function l(){r(".issue-container").off("click",p,d).on("click",p,d),r("#create_link").off("click",d).on("click",d),y&&clearTimeout(y),y=setTimeout(function(){w&&v("viewissue","inactive-timeout")},m)}function v(t,r,o){var u=f+"."+t+"."+r;I=I||Math.round(performance.now());var d=Math.round(performance.now())-I;o=o||{};var l={projectId:o.projectId||a(),projectType:o.projectType||c(),issueId:o.issueId||s(),userAgent:window.navigator.userAgent,timeSinceIssueLoaded:d},v=e.extend(l,o);n.trigger("analyticsEvent",{name:u,data:v}),i.trigger("legacy-gas-v2-event",u,v)}var f="jira.platform.fe.web",m=3e5,p="a, .editable-field, button",g=void 0,j=void 0,k=void 0,w=void 0,y=void 0,I=void 0,h=void 0;return{initialize:function(e,t,n){g=e,j=t,k=n,w=!0,I=Math.round(performance.now()),l()},trackEvent:v}});
//# sourceMappingURL=tracker-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = 'jira-projects-module/sidebar/component/component.js' */
define("jira/projects/sidebar/component",["underscore","jira/projects/data/WRM"],function(e,t){"use strict";var r=Boolean(t.data.claim("is-global-sidebar"));return JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(e,t){this.hasASelectedItem()||(t.isInitial=!0),this.retriggerPreventable("before:select",t),t.isPrevented||this.deselectAllGroups()},select:function(e,t){this.trigger("select",t)},"before:deselect":function(e,t){this.retriggerPreventable("before:deselect",t)},deselect:function(e,t){this.trigger("deselect",t)},"before:navigate":function(e,t){this.retriggerPreventable("before:navigate",t)},"before:navigate:prevented":function(e,t){this.trigger("before:navigate:prevented",t)}},events:{"click .js-nav-project-title-link":"_clickProjectName","click .js-nav-project-avatar-link":"_clickProjectAvatar","click a[data-link-id='com.atlassian.jira.jira-projects-plugin:summary-page']":"_clickProjectSummary"},initialize:function(){this.render({force:!0});try{this.tracker=require("jira/components/analytics-tracker/tracker")}catch(e){}this.bindUIElements();var t=AJS.sidebar(".aui-sidebar");e.each(["expand-end","collapse-end","collapse-start"],function(e){t.on(e,function(){this.trigger(e)}.bind(this))}.bind(this))},render:function(t){t=e.defaults({},t,{force:!1});var r="el"in t,i=r||t.force===!0,n=this.children.length>0;if(!i)return this;var a=this.triggerPreventable("before:render");if(a.isPrevented)return this;if(n){var c=this.triggerPreventable("before:detach");if(c.isPrevented)return this;this.destroyChildren({checkEmpty:!1}),this.trigger("detach")}if(r){var o=jQuery(t.el);this.$el.replaceWith(o),this.setElement(o)}return this.$(".aui-sidebar-group").each(e.bind(function(e,t){var r=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:t}),i=!!this.getGroup(r.id);i&&AJS.warn&&AJS.warn('Duplicated IDs detected. There are more than one NavigationGroup with id data-id="'+r.id+'"'),this.proxyChildEvents(r),this.children.add(r,r.id)},this)),this.trigger("render"),this},reflow:function(){AJS.sidebar(".aui-sidebar").reflow()},isCollapsed:function(){return AJS.sidebar(".aui-sidebar").isCollapsed()},deselectAllGroups:function(){this.children.call("deselect")},on:function(){return JIRA.Projects.Libs.Marionette.CompositeView.prototype.on.apply(this,arguments)},off:function(){return JIRA.Projects.Libs.Marionette.CompositeView.prototype.off.apply(this,arguments)},replaceGroup:function(e,t){var r=this.getGroup(e);r.$el.replaceWith(t.$el),t.cid=r.cid,this.children.remove(r),this.children.add(t,t.id)},getGroup:function(e){return this.children.findByCustom(e)},getGroupAt:function(e){return this.children.findByIndex(e)},getItem:function(e){return this.getDefaultGroup().getItem(e)},getElement:function(){return this._trackDeprecated("getElement"),this.el},getDefaultGroup:function(){return this.getGroup("sidebar-navigation-panel")},isProjectSidebar:function(){return!r},getSelectedScopeFilterId:function(){return this._trackDeprecated("getSelectedScopeFilterId"),this.$(".scope-filter a.scope-filter-trigger").attr("data-scope-filter-id")},setReportsItemLink:function(e){this._trackDeprecated("setReportsItemLink");var t=this.getGroup("sidebar-navigation-panel"),r=t.getItem("com.atlassian.jira.jira-projects-plugin:report-page");"undefined"==typeof r&&(r=t.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")),r&&r.attr("href",e)},getAUISidebar:function(){return this._trackDeprecated("getAUISidebar"),AJS.sidebar(".aui-sidebar")},getContentContainer:function(){return this._trackDeprecated("getContentContainer"),this.$(".aui-sidebar-body .sidebar-content-container")},getSelectedNavigationItem:function(){return this.getDefaultGroup().getSelectedNavigationItem()},hasASelectedItem:function(){return this.getDefaultGroup().hasASelectedItem()},dim:function(){this._trackDeprecated("dim"),this.$el.attr({dimmed:"","aria-hidden":"true"})},undim:function(){this._trackDeprecated("undim"),this.$el.removeAttr("dimmed"),this.$el.removeAttr("aria-hidden")},_clickProjectName:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.projectName")},_clickProjectAvatar:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.avatar")},_clickProjectSummary:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.projectSummary")},_trackDeprecated:function(e){AJS.warn("The Sidebar method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.method.deprecated",data:{method:e}})}})}),AJS.namespace("JIRA.Projects.Sidebar.Component",null,require("jira/projects/sidebar/component"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = 'jira-projects-module/sidebar/component/navigation-item.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationItem"),JIRA.Projects.Sidebar.Component.NavigationItem=JIRA.Projects.Libs.Marionette.CompositeView.extend({ui:{link:"a.aui-nav-item"},events:{'simpleClick @ui.link:not([target="_blank"])':function(e){e.preventDefault(),this.navigate()}},initialize:function(){this.id=this.$el.find(">a").attr("data-link-id"),this.bindUIElements()},onDestroy:function(){this.unbind()},getElement:function(){return this._trackDeprecated("getElement"),this.el},navigate:function(){if(this.select()){var e=this.triggerPreventable("before:navigate");if(e.isPrevented)return!1;var t=this.ui.link.attr("href");return t&&require("jira/util/browser").reloadViaWindowLocation(t),!0}},select:function(){var e=this.triggerPreventable("before:select");return!e.isPrevented&&(this.$el.addClass("aui-nav-selected"),this.trigger("select",e),!0)},deselect:function(){if(!this.isSelected())return!0;var e=this.triggerPreventable("before:deselect");return!e.isPrevented&&(this.$el.removeClass("aui-nav-selected"),this.$el.find("a").blur(),this.trigger("deselect",e),!0)},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},removeBadge:function(){this.$el.find(".aui-badge").remove()},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected())return this},hasASelectedItem:function(){return this.isSelected()},attr:function(e,t){var i=this.ui.link.attr(e,t);return t?i:this},_trackDeprecated:function(e){AJS.warn("The Sidebar item method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.item.method.deprecated",data:{method:e}})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = 'jira-projects-module/sidebar/component/navigation-group.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup"),JIRA.Projects.Sidebar.Component.NavigationGroup=JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(e,t){if(this.retriggerPreventable("before:select",t),!t.isPrevented){var i=this.deselect();i||t.preventDefault()}},select:function(e,t){this.trigger("select",t)},"before:deselect":function(e,t){this.retriggerPreventable("before:deselect",t)},deselect:function(e,t){this.trigger("deselect",t)},"before:navigate":function(e,t){this.retriggerPreventable("before:navigate",t)},"before:navigate:prevented":function(e,t){this.trigger("before:navigate:prevented",t)}},initialize:function(){this.id=this.$el.attr("data-id"),this.$(">ul>li").each(_.bind(function(e,t){var i=JIRA.Projects.Sidebar.Component.NavigationGroup.build(t),n=!!this.getItem(i.id);n&&AJS.warn&&AJS.warn("Duplicated IDs detected. There are more than one NavigationItem with id data-link-id='"+i.id+"'"),this.proxyChildEvents(i),this.children.add(i,i.id)},this))},onDestroy:function(){this.unbind()},getElement:function(){return this._trackDeprecated("getElement"),this.el},deselect:function(){var e=this.triggerPreventable("before:deselect");if(e.isPrevented)return!1;var t=!0;return this.children.each(function(e){t=e.deselect()&&t}),t},getItem:function(e){return this.children.findByCustom(e)},getItemAt:function(e){return this.children.findByIndex(e)},getSelectedNavigationItem:function(){var e=this.children.find(function(e){return e.hasASelectedItem()});if(e)return e.getSelectedNavigationItem()},hasASelectedItem:function(){return this.children.any(function(e){return e.hasASelectedItem()})},_trackDeprecated:function(e){AJS.warn("The Sidebar group method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.group.method.deprecated",data:{method:e}})}},{build:function(e){var t;return t=AJS.$(e).find("ul").length?new JIRA.Projects.Sidebar.Component.NavigationSubgroup({el:e}):new JIRA.Projects.Sidebar.Component.NavigationItem({el:e})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = 'jira-projects-module/sidebar/component/navigation-subgroup.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationSubgroup"),JIRA.Projects.Sidebar.Component.NavigationSubgroup=JIRA.Projects.Sidebar.Component.NavigationGroup.extend({childEvents:{"before:select":function(e,t){JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents["before:select"].apply(this,arguments),t.isPrevented||this.expand()}},initialize:function(){this.childEvents=_.extend({},JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents,this.childEvents),JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.initialize.apply(this,arguments),this.id=this.$el.find(">a[data-link-id]").attr("data-link-id")},expand:function(){this.$el.attr("aria-expanded","true")},collapse:function(){this.$el.attr("aria-expanded","false")},isExpanded:function(){return"true"===this.$el.attr("aria-expanded")},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected())return this;var e=this.children.find(function(e){return e.hasASelectedItem()});return e?e.getSelectedNavigationItem():void 0},hasASelectedItem:function(){return!!this.isSelected()||this.children.any(function(e){return e.hasASelectedItem()})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-api', location = 'jira-projects-module/sidebar/api.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar"),AJS.namespace("JIRA.API");var e=AJS.$.Deferred();JIRA.API.getSidebar=JIRA.API.getSidebar||function(){return e.promise()},JIRA.Projects.Sidebar.initAPI=function(r){JIRA.API.Sidebar=r,e.resolve(JIRA.API.Sidebar)}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = 'jira-projects-module/sidebar/analytics/analytics.js' */
!function(e){"use strict";function r(e){return JIRA.Projects.Sidebar.Analytics.Hash.prefixedHash(e||"NONE")}function i(e,r){AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar."+e,data:r})}function o(){return"atl.jira.proj.config"===e('meta[name="admin.active.section"]').attr("content")}function t(e){return n.indexOf([c,e].join("."))!==-1}AJS.namespace("JIRA.Projects.Sidebar.Analytics");var c="proj.config";JIRA.Projects.Sidebar.Analytics=function(a){var s=AJS.sidebar(a),p=e();if(p=p.add(s.$el),p=p.add(s.submenus.inlineDialog),!JIRA.API.Sidebar)throw new Error("Error: cannot start analytics before JIRA.Projects.Sidebar.initAPI is called");JIRA.API.Sidebar.isProjectSidebar()?i("load.project",{projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType()}):i("load.global"),p.on("click","a",function(){var a=r(e(this).attr("data-link-id")),s={id:a.hash,prefix:a.prefix},p=AJS.Meta.get("sidebar-source-page");if(p)s.sidebarSourcePage=p;else if(e(".issue-tools button.expand").length>0)s.sidebarSourcePage="search-el";else if(e(".navigation-tools button.collapse").length>0)s.sidebarSourcePage="fullscreen-el";else if(o()){var j=e('meta[name="admin.active.tab"]').attr("content");j=j.replace("com.atlassian.servicedesk.project-ui:",""),t(j)?s.sidebarSourcePage=[c,j].join("."):s.sidebarSourcePage=c}n.indexOf(s.sidebarSourcePage)===-1&&(s.sidebarSourcePage="unknown"),i("click.link",s)})};var n=["search-el","fullscreen-el","search","fullscreen","rapid-board","service-desk","proj.config","proj.config.view_project_summary","proj.config.view_project_issuetypes","proj.config.project-issuetypes-expand","proj.config.view_project_workflows","proj.config.view_project_screens","proj.config.view_project_fields","proj.config.view_project_versions","proj.config.view_project_components","proj.config.view_project_roles","proj.config.view_project_permissions","proj.config.view_project_issuesecurity","proj.config.view_project_notifications","proj.config.devstatus-admin-page-link","proj.config.hipchat-project-admin-page-link","proj.config.view_issue_collectors","proj.config.sd-project-request-types-item","proj.config.sd-project-request-security-item","proj.config.sd-project-portal-settings-item","proj.config.sd-project-feedback-settings-item","proj.config.sd-project-email-settings-item","proj.config.sd-project-confluence-kb-item","proj.config.sd-project-sidebar-sla","proj.config.sd-project-automation-item"]}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = 'jira-projects-module/sidebar/analytics/hash.js' */
!function(){"use strict";function n(n,r){return 0===n.indexOf(r)}function r(r,t){return r.substring(n(r,t)?t.length:0)}function t(n){var r,t=0;if(!n)return"";for(var e=0;e<n.length;e+=1)r=n.charCodeAt(e),t=32*t-t+r,t|=0;return t}AJS.namespace("JIRA.Projects.Sidebar.Analytics");var e=[];JIRA.Projects.Sidebar.Analytics.Hash={prefixedHash:function(i){var a=_.find(e,_.partial(n,i))||"";return{prefix:a,hash:a+t(r(i,a))}},addPrefix:function(n){n&&!_.contains(e,n)&&e.push(n)},clearPrefixes:function(){e.length=0}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-expansion-manager', location = 'jira-projects-module/sidebar/expansion-manager.js' */
!function(){"use strict";var e="jira-sidebar-collapsed";AJS.namespace("JIRA.Projects.Sidebar"),JIRA.Projects.Sidebar.initExpansionManager=function(){var a=Boolean(WRM.data.claim("sidebar-collapsed-by-default"));JIRA.Projects.Sidebar.ExpansionManager=function(n,i){function o(a){a.isResponsive&&"true"===i[e]&&a.preventDefault()}function r(a){a.isResponsive||n.isViewportNarrow()||(i[e]=n.isCollapsed().toString())}function s(){n.reflow()&&n.isViewportNarrow()||(a&&void 0===i[e]||"true"===i[e]?n.collapse():n.expand())}i||(i=window.localStorage),s(),n.on("expand-start",o),n.on("expand-end collapse-end",r)}},JIRA.Projects.Sidebar.initExpansionManager()}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.Sidebar&&(JIRA.Projects.Sidebar={}),"undefined"==typeof JIRA.Projects.Sidebar.ScopeFilter&&(JIRA.Projects.Sidebar.ScopeFilter={}),"undefined"==typeof JIRA.Projects.Sidebar.ScopeFilter.Templates&&(JIRA.Projects.Sidebar.ScopeFilter.Templates={}),JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer=function(e,l){return'<div class="aui-sidebar-group aui-sidebar-group-actions collapsed-scope-filter-container"></div>'},JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList=function(e,l){e=e||{};var t="";if(e.selectableScopes||e.createActions){if(t+='<div class="aui-nav-heading" title="'+soy.$$escapeHtml("Boards in this project")+'"><strong class="collapsed-scope-header">'+soy.$$escapeHtml("Boards in this project")+'</strong></div><ul class="aui-nav collapsed-scope-list" title="'+soy.$$escapeHtml("Select a board")+'">',e.selectedScope){t+='<li class="scope-filter selected-scope-filter" title="'+soy.$$escapeHtml(e.selectedScope.label)+'">'+soy.$$escapeHtml(e.selectedScope.label)+"</li>";for(var s=e.selectableScopes,a=s.length,c=0;c<a;c++){var o=s[c];t+=JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass:"scope-filter",anchorClass:o.styleClass,label:o.label,link:o.link})}}if(e.createActions)for(var i=e.createActions,r=i.length,p=0;p<r;p++){var n=i[p];t+=JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass:"create-scope-action",anchorClass:n.styleClass,label:n.label,link:n.link})}t+="</ul>"}return t},JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem=function(e,l){return'<li class="'+soy.$$escapeHtml(e.itemClass)+'"><a href="'+soy.$$escapeHtml(e.link)+'" title="'+soy.$$escapeHtml(e.label)+'"'+(e.anchorClass?' class="'+soy.$$escapeHtml(e.anchorClass)+'"':"")+">"+soy.$$escapeHtml(e.label)+"</a></li>"};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/model.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.Model=function(e){this.selectedScope=e.selectedScope,this.createScopeActions=e.createScopeActions,this.selectedScope?this.selectableScopes=_.reject(e.scopes,function(e){return e.label===this.selectedScope.label&&e.link===this.selectedScope.link},this):this.selectableScopes=e.scopes;var t=this.createScopeActions.length>0,c=this.selectableScopes.length>0;this.displayWhenSidebarIsCollapsed=t||c},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectedScope=function(){return this.selectedScope},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectableScopes=function(){return this.selectableScopes},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getCreateScopeActions=function(){return this.createScopeActions},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.shouldDisplayWhenSidebarIsCollapsed=function(){return this.displayWhenSidebarIsCollapsed}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/collapsed-view.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList,serializeData:function(){return{selectedScope:this.model.getSelectedScope(),selectableScopes:this.model.getSelectableScopes(),createActions:this.model.getCreateScopeActions()}},onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/collapsed-controller.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedController=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.scopeFilter=e.scopeFilter;var t=JIRA.Projects.Libs.Marionette.Region.extend({attachHtml:function(e){this.$el.empty().append(e.$el)}});this.collapsedScopeFilterContainer=new t({el:e.collapsedScopeFilterContainer})},render:function(){var e=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedView({model:this.scopeFilter});this.collapsedScopeFilterContainer.show(e)},remove:function(){this.collapsedScopeFilterContainer.empty(),this.collapsedScopeFilterContainer.$el.empty()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/collapsed-initializer.js' */
!function(){"use strict";function e(e){var i=AJS.$(JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer());return e.prepend(i),i}function i(e,i){e.on("collapse-start",function(){i.render(),JIRA.trace("sidebar.scopefilter.collapsed")}),e.on("expand-end",function(){i.remove()})}AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.sidebarAPI=e.sidebarAPI,this.scopeFilterData=e.scopeFilterData,this.$sidebarContentContainer=e.$sidebarContentContainer},run:function(){if(this.sidebarAPI.isProjectSidebar()){var t=new JIRA.Projects.Sidebar.ScopeFilter.Model(this.scopeFilterData);if(t.shouldDisplayWhenSidebarIsCollapsed()){var r=e(this.$sidebarContentContainer),o=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedController({scopeFilter:t,collapsedScopeFilterContainer:r});i(this.sidebarAPI,o),this.sidebarAPI.isCollapsed()&&o.render()}}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/scope-filter-analytics.js' */
!function(){"use strict";function e(){var e=!0;AJS.$("body").on("click.expanded-filter-list","#sidebar-scope-filter-list a",function(e){n(AJS.$(e.target))}),AJS.$("body").on("aui-dropdown2-show","#sidebar-scope-filter-list",function(){o(e)}),AJS.$("body").on("aui-dropdown2-hide","#sidebar-scope-filter-list",function(){a(e)})}function i(){var e=!1;AJS.$("body").on("click.collapsed-filter-list","aui-inline-dialog#sidebar-submenu1 a",function(e){t(AJS.$(e.target))}),AJS.$("body").on("aui-show","aui-inline-dialog#sidebar-submenu1",function(){o(e)}),AJS.$("body").on("aui-hide","aui-inline-dialog#sidebar-submenu1",function(){a(e)})}function n(e){if(1===e.parent().parent().parent().index())c(!0);else{var i=e.parent().index(),n=e.data("scope-filter-id");r(!0,n,i)}}function t(e){if(e.parent().hasClass("create-scope-action"))c(!1);else{var i=e.parent().index(),n=JIRA.Projects.Sidebar.ScopeFilter.Analytics.scopes[i].id,t=i-1;r(!1,n,t)}}function o(e){s("","open",{expanded:e})}function a(e){s("","close",{expanded:e})}function c(e){s("create","click",{expanded:e})}function r(e,i,n){s("scope","click",{expanded:e,scopeId:i,scopePosition:n})}function s(e,i,n){var t="sidebar.scopeFilter"+(e?"."+e:"");d.trackEvent(t,i,n)}var d=require("jira/components/analytics-tracker/tracker");AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.Analytics"),JIRA.Projects.Sidebar.ScopeFilter.Analytics={initScopeFilterAnalytics:function(n){this.scopes=n,e(),i()}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/collapsed-init.js' */
!function(){"use strict";JIRA.API.getSidebar().done(function(e){var t=WRM.data.claim("scope-filter-data");if(t){var i=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer({sidebarAPI:e,scopeFilterData:t,$sidebarContentContainer:e.getContentContainer()});i.run(),JIRA.Projects.Sidebar.ScopeFilter.Analytics.initScopeFilterAnalytics(t.scopes)}})}();;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-dialog2', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/dialog2.js' */
("undefined"===typeof window?global:window).__bdbf9d213bf319eb4577ef21ac6c491c=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){var c=this.$el=a?(0,g.default)(a):(0,g.default)(aui.dialog.dialog2({}));g.default.each(i,function(a,b){var d="data-"+a;c[0].hasAttribute(d)||c.attr(d,b)})}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var g=f(__307d3e18fd611f85395c67cddeb1fe24),j=f(__574ac67f906effeb9d8ec2753b23cf28),k=f(__4d02fe17b8e885a34493e34af3d145dd),
b=f(__fe0cd0a7ef176e2ef4e0e105d1ce31f5),l=f(__e3152236c406a356c24f20f7bfcccf21),i={"aui-focus":"false","aui-blanketed":"true"};e.prototype.on=function(a,c){(0,b.default)(this.$el).on(a,c);return this};e.prototype.off=function(a,c){(0,b.default)(this.$el).off(a,c);return this};e.prototype.show=function(){(0,b.default)(this.$el).show();return this};e.prototype.hide=function(){(0,b.default)(this.$el).hide();return this};e.prototype.remove=function(){(0,b.default)(this.$el).remove();return this};e.prototype.isVisible=
function(){return(0,b.default)(this.$el).isVisible()};var d=(0,l.default)("dialog2",e);d.on=function(a,c){b.default.on(a,".aui-dialog2",c);return this};d.off=function(a,c){b.default.off(a,".aui-dialog2",c);return this};(0,g.default)(document).on("click",".aui-dialog2-header-close",function(a){a.preventDefault();d((0,g.default)(this).closest(".aui-dialog2")).hide()});d.on("show",function(a,c){var b;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(a){b=c.find(a+" :aui-tabbable");
return b.length});b&&b.first().focus()});d.on("hide",function(a,c){var d=(0,b.default)(c);c.data("aui-remove-on-hide")&&d.remove()});(0,j.default)("aui/dialog2",d);(0,k.default)("dialog2",d);h.default=d;return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'auiplugin/src/soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.Sidebar&&(JIRA.Projects.Sidebar={}),"undefined"==typeof JIRA.Projects.Sidebar.ProjectShortcuts&&(JIRA.Projects.Sidebar.ProjectShortcuts={}),"undefined"==typeof JIRA.Projects.Sidebar.ProjectShortcuts.Templates&&(JIRA.Projects.Sidebar.ProjectShortcuts.Templates={}),JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content=function(t,e){var o="";if(t.canManage||t.numberOfShortcuts>0){if(o+='<div class="aui-sidebar-group jira-sidebar-group-with-divider project-shortcuts-group'+(0==t.numberOfShortcuts?" project-shortcuts-group_empty":"")+'" data-id="project-shortcuts-group"><div class="aui-nav-heading">'+soy.$$escapeHtml("Project Shortcuts")+'</div><ul class="aui-nav project-shortcuts-list">',t.shortcuts)for(var s=t.shortcuts,a=s.length,i=0;i<a;i++){var r=s[i];o+=JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut({id:r.id,name:r.name,url:r.url,icon:r.icon,canManage:t.canManage,iconsMap:t.iconsMap,isWithIcon:t.isWithIcons})}o+=(t.canManage?'<li><a class="aui-nav-item project-shortcuts-group__add" href="#" data-link-id="project-shortcut-add"><span class="aui-icon aui-icon-large aui-iconfont-add-small"></span><span class="aui-nav-item-label">'+soy.$$escapeHtml("Add shortcut")+"</span></a></li>":"")+"</ul></div>"}return o},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut=function(t,e){return'<li class="project-shortcut"><a class="aui-nav-item project-shortcuts-group__link" href="'+soy.$$escapeHtml(t.url)+'" title="'+soy.$$escapeHtml(t.name)+'" target="_blank" data-shortcut-id="'+soy.$$escapeHtml(t.id)+'" data-link-id="project-shortcut-'+soy.$$escapeHtml(t.id)+'">'+(t.isWithIcon?'<span class="aui-icon aui-icon-large '+JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon({iconId:t.icon,iconsMap:t.iconsMap})+'" data-project-shortcuts-icon-id="'+soy.$$escapeHtml(t.icon)+'">'+soy.$$escapeHtml("Project shortcut icon")+"</span>":"")+'<span class="aui-nav-item-label">'+soy.$$escapeHtml(t.name)+"</span></a>"+(t.canManage?'<a href="#project-shortcuts-dropdown_'+soy.$$escapeHtml(t.id)+'" aria-owns="project-shortcuts-dropdown_'+soy.$$escapeHtml(t.id)+'" aria-haspopup="true" class="aui-dropdown2-trigger project-shortcuts-group__actions"><span>'+soy.$$escapeHtml("Actions")+'</span></a><div id="project-shortcuts-dropdown_'+soy.$$escapeHtml(t.id)+'" class="aui-dropdown2 aui-style-default project-shortcuts-group__dropdown"><ul class="aui-list-truncate"><li><a class="project-shortcuts-group__actions__edit" href="#">'+soy.$$escapeHtml("Edit")+'</a></li><li><a class="project-shortcuts-group__actions__delete  " href="#">'+soy.$$escapeHtml("Delete")+"</a></li></ul></div>":"")+"</li>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon=function(t,e){t=t||{};var o="";if(t.iconsMap){var s=t.iconId&&t.iconsMap[t.iconId]?t.iconId:"1";o+=t.iconsMap[s]?soy.$$escapeHtml(t.iconsMap[s].className):""}return o},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields=function(t,e){return'<div class="project-shortcuts-field-group">'+aui.form.textField({name:"project-shortcuts-url-"+t.action,id:"project-shortcuts-url-"+t.action,labelContent:"Web address",placeholderText:"e.g. http://www.atlassian.com",extraClasses:"project-shortcuts-url",value:t.url?t.url:"",errorTexts:t.errors.urlError?[t.errors.urlError]:[]})+'<div class="field-group project-shortcuts-name">'+aui.form.label({forField:"project-shortcuts-name-"+t.action,content:"Name"})+'<div class="project-shortcuts-name-icon-block"><div class="project-shortcuts-icon-picker-block"></div>'+aui.form.input({name:"project-shortcuts-name-"+t.action,id:"project-shortcuts-name-"+t.action,placeholderText:"e.g. Atlassian website",extraClasses:"project-shortcuts-name-input"+(t.isWithIcon?" project-shortcuts-name-input-with-icon":""),value:t.name?t.name:"",type:"text"})+"</div>"+(t.errors.iconError?aui.form.fieldError({message:t.errors.iconError}):"")+(t.errors.nameError?aui.form.fieldError({message:t.errors.nameError}):"")+"</div></div>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker=function(t,e){return"<span>"+JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList(t)+"</span>"+aui.dropdown2.trigger({menu:{id:"project-shortcuts-icons-list-"+t.cid},extraClasses:"aui-button project-shortcuts-icons-picker",iconClasses:"aui-icon aui-icon-large  "+soy.$$escapeHtml(t.icon.className),extraAttributes:{href:"#"}})},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList=function(t,e){for(var o='<div id="project-shortcuts-icons-list-'+soy.$$escapeHtml(t.cid)+'" aria-hidden="true" class="aui-style-default aui-dropdown2 project-shortcuts-icons-list aui-dropdown2-section"><ul>',s=t.iconsList,a=s.length,i=0;i<a;i++){var r=s[i];o+='<li><a class="project-shortcuts-icons-icon" data-project-shortcuts-icons-id="'+soy.$$escapeHtml(r.name)+'"><span class="aui-icon aui-icon-large '+soy.$$escapeHtml(r.className)+'">'+soy.$$escapeHtml("Project shortcut icon")+"</span></a></li>"}return o+="</ul></div>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog=function(t,e){return'<section role="dialog" id="add-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="add-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"></div><div id="image-behind-bottom"></div></div><div id="add-shortcut-image-container"><div id="add-shortcut-dialog-image"></div></div><form action="" method="post" class="aui"><h1>'+soy.$$escapeHtml("Add shortcut")+"</h1><fieldset>"+JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(t,{action:"add"}))+'</fieldset><button type="submit" class="project-shortcuts-hidden-submit" tabindex="-1"></button></form></div><div class="aui-dialog2-footer"><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-primary project-shortcuts-submit">'+soy.$$escapeHtml("Add")+'</button><button class="aui-button aui-button-text aui-button-subtle project-shortcuts-cancel">'+soy.$$escapeHtml("Cancel")+"</button></div></div></div></section>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome=function(t,e){return'<section role="dialog" id="edit-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">'+soy.$$escapeHtml("Edit shortcut")+"</h2></header></section>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog=function(t,e){return'<section role="dialog" id="add-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="add-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"></div><div id="image-behind-bottom"></div></div><div id="add-shortcut-image-container"><div id="add-shortcut-dialog-image"></div></div><form class="aui" method="post"><h1>'+soy.$$escapeHtml("Edit shortcut")+"</h1>"+JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(t,{action:"edit"}))+'<button type="submit" class="project-shortcuts-hidden-submit" tabindex="-1"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button project-shortcuts-delete">'+soy.$$escapeHtml("Delete")+'</button><button class="aui-button aui-button-primary project-shortcuts-submit">'+soy.$$escapeHtml("Save")+'</button><button class="aui-button aui-button-link project-shortcuts-cancel aui-button-subtle">'+soy.$$escapeHtml("Cancel")+"</button></div></footer></section>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog=function(t,e){return'<section role="dialog" id="delete-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">'+soy.$$escapeHtml("Delete shortcut")+'</h2></header><div class="aui-dialog2-content"><p>'+soy.$$escapeHtml("Are you sure you want to delete this shortcut?")+'</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">'+soy.$$escapeHtml("Delete")+'</button><button class="aui-button aui-button-link project-shortcuts-cancel aui-button-subtle">'+soy.$$escapeHtml("Cancel")+"</button></div></footer></section>"};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/dialogs/Add.js' */
define("jira/projects/sidebar/projectShortcuts/dialogs/add",["underscore","jquery","jira/projects/libs/marionette","aui/flag"],function(e,t,i,o){return i.Controller.extend({initialize:function(t){e.bindAll(this,"hide","refresh","focusForm");var i=this;this.analyticsSave=!1,this.sidebarItem=t.sidebarItem,this.projectKey=t.projectKey,this.collection=t.collection,this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent({model:this.model,errorModel:this.errorModel}),this.view.render(),this.dialog=AJS.dialog2(i.view.$el),this.dialog.show(),this.view.ui.url.focus(),this.dialog.on("hide",function(){i.trigger("dialog:close",i.analyticsSave)}),this.listenTo(this.view,"render",this.refresh),this.listenTo(this.view,"cancel",this.hideAndRender),this.listenTo(this.model,"save:success",function(){var e=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(this.model.toJSON(),{projectKey:this.projectKey});this.model.clear(),this.collection.add(e),this._addToADG3Sidebar(e),o({type:"success",title:"You have added the shortcut",body:"Nicely done! Your team is going to love this.",close:"auto"}),this.analyticsSave=!0,this.hide()})},_addToADG3Sidebar:function(e){JIRA.API.getSidebar().done(function(t){var i="sidebar-project-shortcuts",o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link."+e.id,r={id:o,name:e.get("name"),url:e.get("url"),icon:"shortcut",canEdit:!0};t.addItem(i,r,!0)})},show:function(){this.dialog.show()},hide:function(){this.view.hideIconPicker(),this.dialog.hide()},refresh:function(){this.view.hideIconPicker()},hideAndRender:function(){this.hide()},focusForm:function(){this.view.ui.url.focus()}})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add",null,require("jira/projects/sidebar/projectShortcuts/dialogs/add"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/services/AvailableIcons.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons");var t=[],n={},e=!1;JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons={initialize:function(e){t=e||t,n={},_.each(e,function(t){n[t.name]=t})},getIconsList:function(){return t},getIconsMap:function(){return n},getAllIconsClasses:function(){return _.reduce(t,function(t,n){return t+n.className+" "},"")},getIconFromName:function(t){return this.getIconsMap()[t]?this.getIconsMap()[t]:this.getIconsList()[0]?this.getIconsList()[0]:{}},setWithIcons:function(t){e=t},isWithIcons:function(){return e}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/entities/Shortcut.js' */
!function(){"use strict";function t(t){var e;try{e=JSON.parse(t.responseText)}catch(t){e={message:"We couldn\'t complete the action as there seems to be a communication issue."}}return e}AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut=Backbone.Model.extend({defaults:{url:"",name:"",icon:"",type:""},initialize:function(t,e){if(!e||!e.projectKey)throw"Project key is required";this.projectKey=e.projectKey},urlRoot:function(){return AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(this.projectKey)+"/shortcut"},clear:function(){this.unset("id"),this.set("url",this.defaults.url),this.set("name",this.defaults.name),this.set("icon",this.defaults.icon),this.set("type",this.defaults.type)},save:function(){if(1!=this.saving){this.saving=!0;var e=this;e.trigger("save:start");var s=this.isNew()?"create":"update";this.sync(s,e).always(function(){e.saving=!1,e.trigger("save:finish")}).done(function(t){e.set(t,{silent:!0}),JIRA.trace("jira.projects.shortcuts."+s+".success"),e.trigger("save:success")}).fail(function(r){var i=t(r);JIRA.trace("jira.projects.shortcuts."+s+".fail"),e.trigger("save:failure",i)})}},destroy:function(){if(1!=this.saving){this.saving=!0;var e=this;e.trigger("remove:start");var s=Backbone.Model.prototype.destroy.apply(this,arguments);return s.always(function(){e.saving=!1,e.trigger("remove:finish")}).done(function(){e.trigger("remove:success")}).fail(function(s){var r=t(s);e.trigger("remove:failure",r)}),s}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/entities/ShortcutErrors.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors=Backbone.Model.extend({defaults:{urlError:"",nameError:"",iconError:"",generalError:""},initialize:function(r,e){var s=e.model;this.listenTo(s,"save:failure remove:failure",function(r){this.set({urlError:r.errors&&r.errors.url,nameError:r.errors&&r.errors.name,iconError:r.errors&&r.errors.icon,generalError:r.message||r.errorMessages&&r.errorMessages.length>0?r.message||r.errorMessages[0]:void 0})}),this.listenTo(s,"save:success remove:success",this.clear)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/entities/Shortcuts.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts=Backbone.Collection.extend({model:JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut,initialize:function(t,e){this.projectKey=e.projectKey}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/IconPickerContent.js' */
!function(i){"use strict";function c(i,c){var e,o=5,n=i.ui.iconList.find(".active"),s=i.ui.iconList.find("li").size();switch(c.keyCode){case AJS.keyCode.LEFT:e=-1;break;case AJS.keyCode.RIGHT:e=1;break;case AJS.keyCode.DOWN:e=o;break;case AJS.keyCode.UP:e=-o;break;default:e=0}var a=n.closest("li").index()+e;(a<0||a>=s)&&(a+=s,a%=s),n.removeClass(t),i.ui.icon.eq(a).addClass(t)}var e="projectShortcutsIconsId",t="active aui-dropdown2-active";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker,ui:{icon:".project-shortcuts-icons-icon",iconList:".project-shortcuts-icons-list",iconPicker:".project-shortcuts-icons-picker"},modelEvents:{"change:icon":function(){var i=this._modelIcon(),c=this.ui.iconPicker.children();c.removeClass(this.iconFactory.getAllIconsClasses()),c.addClass(i.className),this.ui.iconPicker.data(e,i.name)},"save:start":function(){this.ui.iconPicker.attr("aria-disabled",!0)},"save:finish":function(){this.ui.iconPicker.attr("aria-disabled",!1)}},events:{"keydown @ui.iconPicker":function(i){if(this.isPickerActive())switch(i.keyCode){case AJS.keyCode.LEFT:case AJS.keyCode.RIGHT:case AJS.keyCode.DOWN:case AJS.keyCode.UP:c(this,i),i.stopPropagation(),i.preventDefault(),this.ui.iconList.trigger("aui-dropdown2-item-selected");break;case AJS.keyCode.ESCAPE:this.hideIconPicker(),i.stopPropagation(),i.preventDefault()}}},initialize:function(i){this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons,this.analytics=JIRA.Projects.Sidebar.ProjectShortcuts.Analytics},onRender:function(){var c=this;this.ui.icon.on("click",function(){var t=i(this).data(e);c.analytics.iconChangeConfirmed(c.model,t),c.analyticsOldIconId="",c.analyticsIconClicked=!0,c.model.set("icon",t),c.ui.iconPicker.focus()}),this.ui.iconList.on("aui-dropdown2-show",function(){c.ui.iconPicker.focus(),c.analyticsIconClicked=!1,c.analytics.iconPickerOpened(c.model)}),this.ui.iconList.on("aui-dropdown2-hide",function(){c.analytics.iconPickerClosed(c.model,c.analyticsIconClicked)}),this.analyticsOldIconId="",this.ui.iconList.on("aui-dropdown2-item-selected",function(i){var t=AJS.$(this).find(".active").data(e);c.analyticsOldIconId&&c.analyticsOldIconId!==t&&c.analytics.iconChanged(c.model,t,c.analyticsOldIconId),c.analyticsOldIconId=t}),this.ui.iconPicker.data(e,this.model.get("icon"))},hideIconPicker:function(){this.isPickerActive()&&this.ui.iconPicker.trigger("aui-button-invoke")},isPickerActive:function(){return this.ui.iconPicker.hasClass("active")},_modelIcon:function(){return this.iconFactory.getIconFromName(this.model.get("icon"))},onFormSubmit:function(){this.model.set("icon",this.ui.iconPicker.data(e)||"")},focus:function(){this.ui.iconPicker.focus()},serializeData:function(){return{iconsList:this.iconFactory.getIconsList(),icon:this._modelIcon(),cid:this.cid}}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/DialogContent.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent=JIRA.Projects.Libs.Marionette.LayoutView.extend({ui:{form:"form",inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel",url:".project-shortcuts-url input",name:".project-shortcuts-name input"},regions:{iconPicker:".project-shortcuts-icon-picker-block"},events:{"click @ui.cancel":function(t){t.preventDefault(),this.model.clear(),this.setNameAutomagically=!0,this.errorModel.clear(),this.trigger("cancel")},"click @ui.submit":"formSubmit","submit @ui.form":"formSubmit","blur @ui.url":function(){this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function(){this.model.set("url",this.ui.url.val()),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function(){this.setNameAutomagically=!1,this.model.set("name",this.ui.name.val())},"keydown @ui.name":function(t){this.iconPickerContent&&t.shiftKey&&t.keyCode===AJS.keyCode.TAB&&(t.preventDefault(),this.iconPickerContent.focus())},"keydown @ui.url":function(t){this.iconPickerContent&&(t.shiftKey||t.keyCode!==AJS.keyCode.TAB||(t.preventDefault(),this.iconPickerContent.focus()))}},modelEvents:{"save:start":function(){this.ui.inputs.prop("disabled",!0),this.ui.submit.addClass("loading"),this.ui.submit.spin({className:"spinner"})},"save:finish":function(){this.ui.inputs.prop("disabled",!1),this.ui.submit.removeClass("loading"),this.ui.submit.spinStop({className:"spinner"})},"save:failure":function(){if(this.render(),this.errorModel.get("generalError")){var t=require("aui/flag");t({type:"error",title:"We couldn\'t save the shortcut for you",close:"auto",body:this.errorModel.get("generalError")})}return this.errorModel.get("nameError")&&this.ui.name.focus(),this.errorModel.get("urlError")&&this.ui.url.focus(),this},"save:success":function(){this.setNameAutomagically=!0}},initialize:function(t){this.errorModel=t.errorModel;var e=this.model.get("name");this.setNameAutomagically=0==e.length,this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},serializeData:function(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action,isWithIcon:this.iconFactory.isWithIcons()})},onRender:function(){this.iconFactory.isWithIcons()?(this.iconPickerContent=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent({model:this.model,action:this.action,observable:this}),this.getRegion("iconPicker").show(this.iconPickerContent)):delete this.iconPickerContent},hideIconPicker:function(){this.iconPickerContent&&this.iconPickerContent.hideIconPicker()},setName:function(t){this.ui.name.val(t),this.model.set("name",t)},setUrl:function(t){this.ui.url.val(t),this.model.set("url",t)},ensureProtocolPrefix:function(){var t=this.ui.url.val().trim();t.length>0&&!JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlPattern.test(t)&&this.setUrl("http://"+t)},tryToAutomagicallyDeriveNameFromUrl:function(){var t=this.ui.url.val().trim();if(this.setNameAutomagically)if(JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.test(t)){var e=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.exec(t);this.setName(e[3])}else this.setName(t)},formSubmit:function(t){t.preventDefault(),this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl(),this.iconPickerContent&&this.iconPickerContent.onFormSubmit(),this.model.set({url:this.ui.url.val(),name:this.ui.name.val()}),this.model.save()}},{urlPattern:/^[a-zA-Z0-9]+:(\/\/)?([^\/]*).*/,urlOptionalProtocolPattern:/^([a-zA-Z0-9]+:(\/\/)?)?([^\/]*).*/})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/AddDialogContent.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/EditDialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content",["underscore"],function(e){"use strict";var t=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent,r=t.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog});return r.extend({ui:e.extend({},t.prototype.ui,{delete:".project-shortcuts-delete"})})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/dialogs/Edit.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/edit",["jquery","jira/projects/sidebar/project-shortcuts/views/edit-dialog-content","jira/projects/libs/marionette","aui/flag","jira/api/projects"],function(e,t,o,i,s){"use strict";return o.Controller.extend({initialize:function(o){var r=this;_.bindAll(this,"hide"),this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(o.model.toJSON(),{projectKey:o.model.projectKey||o.model.collection.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors((void 0),{model:this.model}),this.view=new t({model:this.model,errorModel:this.errorModel}),this.analyticsSave=!1,this.view.render();var c=e(JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome({}));this.view.$el.appendTo(c),this.dialog=AJS.dialog2(c),this.dialog.show(),this.view.ui.url.focus();var d=s.getCurrentProjectType(),l=s.getCurrentProjectId();this.view.ui.delete.on("click",function(e){r.hide(),e.preventDefault(),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.delete.dialog.opened",data:{isSave:!1,shortcutId:r.model.get("id"),projectId:l,projectType:d}});var t=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:r.model});r.listenToOnce(t,"dialog:close",function(e){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.delete.dialog.closed",data:{isSave:e,shortcutId:r.model.get("id"),projectId:l,projectType:d}})})}),this.listenTo(this.model,"remove:success",function(){o.model.collection&&o.model.collection.remove(r.model),i({type:"success",body:"Shortcut deleted.",close:"auto"})}),this._onResizeWindow=function(){r.hideIconPicker()},e(window).on("resize",this._onResizeWindow),this.listenTo(this.view,"cancel",this.hide),this.listenTo(this.model,"save:success",function(){i({type:"success",body:"You have updated the shortcut.",close:"auto"}),this.analyticsSave=!0,this.hide(),o.model.set(r.model.toJSON())}),this.dialog.on("hide",function(){r.trigger("dialog:close",r.analyticsSave)})},hideIconPicker:function(){this.view.hideIconPicker()},hide:function(){this.dialog.hide(),e(window).off("resize",this._onResizeWindow)}})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit",null,require("jira/projects/sidebar/project-shortcuts/dialogs/edit"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/Shortcut.js' */
!function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut");var o=require("jira/projects/sidebar/project-shortcuts/dialogs/edit");JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut,initialize:function(){_.bindAll(this,"toggleDropdown"),this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},ui:{del:".project-shortcuts-group__actions__delete",edit:".project-shortcuts-group__actions__edit",trigger:".project-shortcuts-group__actions",dropdown:".project-shortcuts-group__dropdown",link:".project-shortcuts-group__link"},modelEvents:{change:"render"},events:{"click @ui.link":function(){this.trigger("click:link",this.model)}},onRender:function(){var t=this;this.unwrapTemplate();var i=e(window),r=e(".aui-sidebar-body");this.ui.trigger.on("click",function(e){t.trigger("dropdown:click",t.model)}),this.ui.edit.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var i=new o({model:t.model});t.trigger("edit:open",t.model),t.listenToOnce(i,"dialog:close",function(e){t.trigger("edit:close",t.model,e)})}),this.ui.del.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var o=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:t.model});t.trigger("delete:open",t.model),t.listenToOnce(o,"dialog:close",function(e){t.trigger("delete:close",t.model,e)})}),this.ui.dropdown.on({"aui-dropdown2-show":function(){t.$el.addClass("aui-nav-selected"),r.one("scroll",t.toggleDropdown),i.one("scroll",t.toggleDropdown),t.ui.trigger.focus()},"aui-dropdown2-hide":function(){t.$el.removeClass("aui-nav-selected"),r.off("scroll",t.toggleDropdown),i.off("scroll",t.toggleDropdown)}})},serializeData:function(){var e=_.extend(this.model.toJSON(),{canManage:!0,isWithIcon:this.iconFactory.isWithIcons()});return this.iconFactory.isWithIcons()&&(e=_.extend(e,{iconsMap:JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.getIconsMap()})),e},toggleDropdown:function(){this.ui.trigger.trigger("aui-button-invoke")}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/ShortcutsList.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.List");var e=require("jira/projects/sidebar/projectShortcuts/dialogs/add");JIRA.Projects.Sidebar.ProjectShortcuts.Views.List=JIRA.Projects.Libs.Marionette.CompositeView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content,childView:JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut,ui:{itemsContainer:".aui-nav",description:".project-shortcuts-group__description",add:".project-shortcuts-group__add"},collectionEvents:{"add remove":function(){(0==this.collection.length&&0!=this.lastCollectionLength||0!=this.collection.length&&0==this.lastCollectionLength)&&(this.lastCollectionLength=this.collection.length,this.ui.description.toggleClass("hidden",this.collection.length>0),this.$el.toggleClass("project-shortcuts-group_empty",0==this.collection.length))}},initialize:function(){var e=this;JIRA.API.getSidebar().done(function(o){o.on("expand-end",function(){t(".aui-sidebar-submenu-dialog .project-shortcuts-group__dropdown").remove()},!0),o.on("collapse-start",function(){e.$(".project-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke")},!0)}),this.lastCollectionLength=this.collection.length},attachElContent:function(e){var o=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:e});return JIRA.API.Sidebar.replaceGroup(this.options.targetGroup,o),this.$el=t(o.getElement()),this},onRender:function(){var t=new e({sidebarItem:JIRA.API.Sidebar.getGroup("project-shortcuts-group",!0).getItem("project-shortcut-add",!0),projectKey:this.collection.projectKey,collection:this.collection});this.listenTo(t,"dialog:open",function(){this.trigger("add:open")}),this.listenTo(t,"dialog:close",function(t){this.trigger("add:close",t)})},serializeData:function(){return{canManage:!0,numberOfShortcuts:this.collection.length}},attachBuffer:function(t,e){this.ui.itemsContainer.prepend(e)},onAddChild:function(t){this.ui.add.parent().before(t.$el)}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/dialogs/Delete.js' */
!function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete"),JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog,ui:{inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel"},events:{"click @ui.cancel":function(e){e.preventDefault(),this.trigger("dialog:close",!1),this.dialog.hide()},"click @ui.submit":function(e){e.preventDefault(),this.trigger("dialog:close",!0),this.model.destroy({wait:!0})}},modelEvents:{"remove:start":function(){this.ui.inputs.prop("disabled",!0),this.ui.submit.addClass("loading"),this.ui.submit.spin({className:"spinner"})},"remove:finish":function(){this.ui.inputs.prop("disabled",!1),this.ui.submit.removeClass("loading"),this.ui.submit.spinStop({className:"spinner"}),this.dialog.hide(),JIRA.trace("jira.projects.shortcuts.deleted")},"remove:failure":function(e){if(e.message||e.errorMessages&&e.errorMessages.length>0){var t=require("aui/flag");t({type:"error",title:"We couldn\'t delete the shortcut for you",close:"auto",body:e.message||e.errorMessages[0]})}}},initialize:function(){this.render(),this.$el.appendTo("body"),this.dialog=AJS.dialog2(this.$el),this.dialog.show();var e=this;this.dialog.on("hide",function(){_.defer(function(){e.destroy()})})},onRender:function(){this.unwrapTemplate()}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-adg3', location = 'jira-projects-module/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics");var t="a.project-shortcuts-group__link",e=!1,i=require("jira/api/projects");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics={initialize:function(){},initShortcutClick:function(c,o){var r=AJS.sidebar(o),n=AJS.$(c),s=this;n.on("click",t,function(c){var o=n.find(t),d=AJS.$(this);i.getCurrentProjectId(),i.getCurrentProjectType();s._triggerAnalyticsEvent("jira.projects.shortcut.clicked",{shortcutId:d.data("shortcutId"),shortcutPosition:d.closest("li").index()+1,shortcutIconName:e?d.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:o.size(),isWithIcons:e,isSidebarCollapsed:r.isCollapsed(),projectId:s.projectId,projectType:s.projectType})})},initDialogActions:function(t){var i=this,c=function(t,c){var o=t.collection.indexOf(t)+1;return{isWithIcons:e,isSave:c,shortcutId:t.get("id"),shortcutPosition:o,shortcutCount:t.collection.size(),projectId:i.projectId,projectType:i.projectType}};t.on("childview:dropdown:click",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.dropdown.clicked",c(e,!1))}),t.on("childview:edit:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.opened",c(e,!1))}),t.on("childview:edit:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.closed",c(e,o))}),t.on("childview:delete:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.opened",c(e))}),t.on("childview:delete:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.closed",c(e,o))}),t.on("add:open",function(){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.opened",{isWithIcons:e,projectId:i.projectId,projectType:i.projectType})}),t.on("add:close",function(t){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.closed",{isWithIcons:e,isSave:t,projectId:i.projectId,projectType:i.projectType})})},iconChanged:function(t,e,i){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.changed",{iconName:e,oldIconName:i,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconChangeConfirmed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.confirmed",{oldIconName:t.get("icon"),iconName:e,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:projectType})},iconPickerOpened:function(t){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.opened",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconPickerClosed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.closed",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,isSave:e,projectId:this.projectId,projectType:this.projectType})},_triggerAnalyticsEvent:function(t,e){AJS.trigger("analyticsEvent",{name:t,data:e})}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-adg3', location = 'jira-projects-module/sidebar/project-shortcuts/project-shortcuts-init-adg3.js' */
require(["jira/featureflags/feature-manager","jira/projects/sidebar/projectShortcuts/dialogs/add","jira/api/projects"],function(t,e,r){var o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link.",i="project.shortcut.default.link",n=r.getCurrentProjectKey(),a=r.getCurrentProjectType(),c=r.getCurrentProjectId(),s=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts([],{projectKey:n}),d=function(t){t.on(t.events.JIRA_SUMMON_ADD_SHORTCUT_DIALOG,function(t,r){if("com.atlassian.jira.jira-projects-plugin:project-shortcut-type"===r.shortcutTypeId){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.opened",data:{projectId:c,projectType:a}});var o=new e({projectKey:n,collection:s});o.on("dialog:close",function(t){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.closed",data:{isSave:t,projectId:c,projectType:a}})})}},!0)},u=function(t){t.on(t.events.EDIT,function(e){var r=e.target.getId();if(r&&0===r.indexOf(o)){var d=r.substr(o.length),u=t.getItem(r,!0),j=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut({id:d,name:u.name,type:i,url:u.url},{projectKey:n});s.add(j),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.opened",data:{isSave:!1,shortcutId:j.get("id"),projectId:c,projectType:a}});var l=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit({model:j});l.on("dialog:close",function(t){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.closed",data:{isSave:t,shortcutId:j.get("id"),projectId:c,projectType:a}})}),j.on("change",function(){t.replaceItem(r,{id:r,name:j.get("name"),url:j.get("url"),canEdit:!0},!0)}),s.on("remove",function(e){t.deleteItem(o+e.get("id"),!0)})}},!0)},o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link.",j="com.atlassian.jira.jira-projects-plugin:source.code.link.",l=function(t){t.on(t.events.BEFORE_NAVIGATE,function(e){var r=e.target.getId(),i=!1,n="";if(r.indexOf(o)>=0?(i=!0,n=o):j.indexOf(j)>=0&&(i=!0,n=j),i){var a={},c=t.findParentOf(r,!0),s=t.getItem(r,!0),d=c.links.filter(function(t){return t.indexOf(n)>=0});a.shortcutId=r.substring(n.length),a.shortcutPosition=d.indexOf(r),a.shortcutIconName=s.icon||"",a.shortcutCount=d.length,a.isWithIcons=!1,AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.clicked",data:a})}}.bind(this),!0)}.bind(this);JIRA.API.getSidebar().done(function(t){d(t),u(t),l(t)})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:report-page-assets', location = 'jira-projects-module/page/project/report/analytics.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Report"),JIRA.Projects.Report.Analytics=function(){return new Promise(function(e){require(["jira/analytics/web-client"],function(r){t(".reports .reports__list__report").on("click",function(e){const o=t(this),c=o.attr("data-report-key"),n=o.closest("ul").attr("data-category-key"),i=o.closest("li").prevAll().length+1;AJS.trigger("analyticsEvent",{name:"jira.projects.report.clicked",data:{report:c,category:n,listPosition:i}}),r.sendUIEvent({source:"allReportsScreen",action:"clicked",actionSubject:"button",actionSubjectId:"reportButton",attributes:{report:c,category:n,listPosition:i}})}),e()})})},t(JIRA.Projects.Report.Analytics)}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-storage', location = 'jira-projects-module/sidebar/reports/reports-link-storage.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Reports"),JIRA.Projects.Sidebar.Reports={storeLastViewedReportLink:function(e,r){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||r&&r.isProjectSidebar(!0)){var t=this._createLastViewedReportKey(r);require("jira/data/local-storage").setItem(t,e),this._setReportsItemLink(e,r)}JIRA.trace("jira.projects.sidebar.reports.link.stored")},restoreLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e),t=require("jira/data/local-storage").getItem(r);t&&this._setReportsItemLink(t,e)}JIRA.trace("jira.projects.sidebar.reports.link.restored")},removeLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e);require("jira/data/local-storage").removeItem(r)}JIRA.trace("jira.projects.sidebar.reports.link.remove")},getLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e),t=require("jira/data/local-storage").getItem(r);if(t)return t}return""},_createLastViewedReportKey:function(e){var r=JIRA.API.Sidebar?JIRA.API.Sidebar.getSelectedScopeFilterId():e?e.getSelectedScopeFilterId(!0):"",t=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key")||"uc.context",i="last.viewed.report."+t;return r&&(i+="."+r),i},_setReportsItemLink:function(e,r){if(!JIRA.API.Sidebar)return"";var t=JIRA.API.Sidebar.getGroup("sidebar-navigation-panel"),i=t.getItem("com.atlassian.jira.jira-projects-plugin:report-page");"undefined"==typeof i&&(i=t.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")),i&&i.attr("href",e)}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link', location = 'jira-projects-module/sidebar/reports/reports-link.js' */
define("jira/projects/sidebar/reports/reports-link",["underscore"],function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ReportsLink"),JIRA.Projects.Sidebar.ReportsLink={CONSTANT:{REPORTS_NAVGROUP_IDS:["com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:user-container-sidebar-report"],COMPARE_PARAMS:["chart","rapidView","view"],AGILE_SECTION_IN_UC_SIDEBAR_ID:"uc_report_agile_sidebar_links",OVERVIEW_PAGE_REGEX:/projects\/.+selectedItem=com.atlassian.jira.jira-projects-plugin:report-page/i},_location:function(){if("undefined"!=typeof window)return window.location},_isSameReport:function(t,r){var i=this._getUrlParams(t),n=this._getUrlParams(r);return e.filter(this.CONSTANT.COMPARE_PARAMS,function(e){return i[e]&&n[e]&&i[e]===n[e]}).length===this.CONSTANT.COMPARE_PARAMS.length},_getUrlParams:function(e){var t=e.split("?");try{return 1===t.length?{}:JSON.parse('{"'+t[1].replace(/#.*$/,"").replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,t){return""===e?t:decodeURIComponent(t)})}catch(e){return{}}},handleOverviewPage:function(e){var t=this.CONSTANT.OVERVIEW_PAGE_REGEX.test(this._location().href);t&&JIRA.Projects.Sidebar.Reports.removeLastViewedReportLink(e)},handleNonAgileReports:function(e){var t=this._location().pathname,r=0===t.indexOf(AJS.contextPath()+"/secure/ConfigureReport");if(r){JIRA.Projects.Sidebar.Reports.removeLastViewedReportLink(e);var i=this._location().href.replace(/^.*\/\/[^\/]+/,"");JIRA.Projects.Sidebar.Reports.storeLastViewedReportLink(i,e)}},handleAdg2:function(e){JIRA.Projects.Sidebar.Reports.restoreLastViewedReportLink(e)},handleClickingOnReports:function(t,r){if(e.contains(this.CONSTANT.REPORTS_NAVGROUP_IDS,r.target.getId(!0))){var i=AJS.contextPath(),n=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key"),o=this._location().href.replace(/^.*\/\/[^\/]+/,""),a=JIRA.Projects.Sidebar.Reports.getLastViewedReportLink(t);if(n){var s=i+"/projects/"+n+"?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page";a=a||s}else{var c=t.getGroup(this.CONSTANT.AGILE_SECTION_IN_UC_SIDEBAR_ID,!0);!a&&c&&c.links&&c.links.length&&(a=c.links[0].url)}a===o||this._isSameReport(a,o)||(r.preventDefault(),this._location().assign(a))}},handleSwitchingBoards:function(e,t){e.preventDefault(),AJS.$.ajax({url:AJS.contextPath()+"/rest/greenhopper/1.0/rapidview/addtohistory",type:"POST",data:JSON.stringify({rapidViewId:t.id}),dataType:"json",contentType:"application/json"}).done(function(){JIRA.Projects.Sidebar.ReportsLink._location().reload()})},handleReportsLink:function(e){this.handleOverviewPage(e),this.handleNonAgileReports(e),this.handleAdg2(e);var t=this;e.on("before:nested",function(r){t.handleClickingOnReports(e,r)},!0);var r=this.CONSTANT.OVERVIEW_PAGE_REGEX.test(this._location().href),i=this._location().pathname,n=0===i.indexOf(AJS.contextPath()+"/secure/ConfigureReport");(r||n)&&e.on("scope-switcher:before:navigate",this.handleSwitchingBoards,!0)}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-init', location = 'jira-projects-module/sidebar/reports/reports-link-init.js' */
AJS.$(function(){"use strict";require("jira/projects/sidebar/reports/reports-link"),JIRA.API.getSidebar().done(function(e){JIRA.Projects.Sidebar.ReportsLink.handleReportsLink(e)})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'jira-development-integration-plugin/templates/viewissue/devstatus-panel.soy' */
// This file was automatically generated from devstatus-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }


JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon';
}


JIRA.Templates.DevStatus.connectionProblemAsWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsWarning.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsWarning';
}


JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages = function(opt_data, opt_ignored) {
  return '' + (((! opt_data.errorInstances || opt_data.errorInstances.length == 0) && (! opt_data.notConfiguredInstances || opt_data.notConfiguredInstances.length == 0)) ? '<p class="connection-error">' + soy.$$filterNoAutoescape('JIRA is having difficulty contacting the applications that supply development status information.') + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : ((opt_data.errorInstances.length > 0) ? '<p class="connection-error">' + JIRA.Templates.DevStatus.connectionProblemMultipleInstances({instances: opt_data.errorInstances}) + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : '') + ((opt_data.notConfiguredInstances && opt_data.notConfiguredInstances.length > 0) ? '<p class="config-errors">' + JIRA.Templates.DevStatus.configProblem(opt_data) + '</p>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages.soyTemplateName = 'JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages';
}


JIRA.Templates.DevStatus.contactAdmin = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + soy.$$filterNoAutoescape(AJS.format('If this condition persists, please contact your {0}JIRA administrators{1}.',opt_data.showContactAdminForm ? '<a id="contact-admin" href="' + "" + '/secure/ContactAdministrators!default.jspa">' : '',opt_data.showContactAdminForm ? '</a>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.contactAdmin.soyTemplateName = 'JIRA.Templates.DevStatus.contactAdmin';
}


JIRA.Templates.DevStatus.connectionProblem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.adminError) {
    output += JIRA.Templates.DevStatus.connectionProblemAdminError(opt_data);
  } else {
    output += '<p class="connection-error">' + ((! opt_data.instances || opt_data.instances.length == 0) ? soy.$$filterNoAutoescape('JIRA is having difficulty contacting the applications that supply development status information.') : JIRA.Templates.DevStatus.connectionProblemMultipleInstances(opt_data)) + ' ';
    var contactAdminAnchor__soy57 = '<a id="contact-admin" href="' + soy.$$escapeHtml("") + '/secure/ContactAdministrators!default.jspa">';
    output += soy.$$filterNoAutoescape(AJS.format('If this condition persists, please contact your {0}JIRA administrators{1}.',opt_data.showContactAdminForm ? contactAdminAnchor__soy57 : '',opt_data.showContactAdminForm ? '</a>' : '')) + '</p>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblem.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblem';
}


JIRA.Templates.DevStatus.connectionProblemAdminError = function(opt_data, opt_ignored) {
  var output = '<p class="connection-error admin-error">' + soy.$$escapeHtml(opt_data.adminError.message) + '</p><p class="configure-applinks-link"><a href="' + soy.$$escapeHtml("") + '/plugins/servlet/applinks/listApplicationLinks">' + soy.$$escapeHtml('Configure Application Links') + '</a></p>';
  if (opt_data.adminError.details) {
    output += '<p class="connection-error"><a id="replace-text-trigger" data-replace-text="' + soy.$$escapeHtml('Hide error details') + '" class="aui-expander-trigger" aria-controls="expander-with-replace-text-content">' + soy.$$escapeHtml('Show error details') + '</a></p><div id="expander-with-replace-text-content" class="aui-expander-content admin-error-details"><ul>';
    var detailList79 = opt_data.adminError.details;
    var detailListLen79 = detailList79.length;
    for (var detailIndex79 = 0; detailIndex79 < detailListLen79; detailIndex79++) {
      var detailData79 = detailList79[detailIndex79];
      output += '<li>' + soy.$$escapeHtml(detailData79) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAdminError.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAdminError';
}


JIRA.Templates.DevStatus.configProblem = function(opt_data, opt_ignored) {
  var output = '';
  var servers__soy86 = opt_data.notConfiguredInstances;
  output += '<span class="description">';
  var server0__soy88 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[0]});
  if (servers__soy86.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}.',server0__soy88));
  } else {
    var server1__soy96 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[1]});
    if (servers__soy86.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0} and {1}.',server0__soy88,server1__soy96));
    } else {
      var server2__soy104 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[2]});
      output += (servers__soy86.length == 3) ? soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}, {1}, and {2}.',server0__soy88,server1__soy96,server2__soy104)) : soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}, {1}, {2}, and {3} other {3,choice,1#application|1\x3capplications}.',server0__soy88,server1__soy96,server2__soy104,servers__soy86.length - 3));
    }
  }
  output += '</span> <span class="hints">';
  var helpUrl__soy115 = ({"alt":"Get help!","title":"JIRA Application Development panel displays error - Couldn't read data","url":"https://confluence.atlassian.com/display/JIRAKB/JIRA+Application+Development+panel+displays+error+-+Couldn%27t+read+data"});
  output += soy.$$filterNoAutoescape(AJS.format('Learn {0}about this issue{1} or go to {2}application links{3} to fix it.','<a href="' + helpUrl__soy115.url + '" target="_blank">','</a>','<a href="' + "" + '/plugins/servlet/applinks/listApplicationLinks">','</a>')) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.configProblem.soyTemplateName = 'JIRA.Templates.DevStatus.configProblem';
}


JIRA.Templates.DevStatus.connectionProblemMultipleInstances = function(opt_data, opt_ignored) {
  var output = '';
  var instance0__soy120 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[0]});
  if (opt_data.instances.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0}.',instance0__soy120));
  } else {
    var instance1__soy128 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[1]});
    if (opt_data.instances.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0} and {1}.',instance0__soy120,instance1__soy128));
    } else {
      var instance2__soy136 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[2]});
      output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0}, {1}, {3,choice,0#and {2}|1#{2}, and another application|1\x3c{2}, and {3} more applications}.',instance0__soy120,instance1__soy128,instance2__soy136,opt_data.instances.length - 3));
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemMultipleInstances.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemMultipleInstances';
}


JIRA.Templates.DevStatus.connectionProblemSingleInstance = function(opt_data, opt_ignored) {
  return '<span class="instance" data-name="' + soy.$$escapeHtml(opt_data.instance.name) + '"><a href="' + soy.$$escapeHtml(opt_data.instance.baseUrl) + '" title="' + soy.$$escapeHtml(opt_data.instance.name) + '">' + soy.$$escapeHtml(opt_data.instance.name) + '</a></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemSingleInstance.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemSingleInstance';
}


JIRA.Templates.DevStatus.lastUpdated = function(opt_data, opt_ignored) {
  return '' + ((opt_data.lastUpdated) ? '<dd class="sub-text' + ((opt_data.extraClass) ? ' ' + soy.$$escapeHtml(opt_data.extraClass) : '') + '">' + JIRA.Templates.DevStatus.transitionContainer({content: '<div>' + soy.$$escapeHtml(opt_data.text) + ' <time class="livestamp date user-tz allow-future" ' + ((opt_data.datetimeFormat) ? 'data-datetime-format="' + soy.$$escapeHtml(opt_data.datetimeFormat) + '" ' : '') + 'datetime="' + soy.$$escapeHtml(opt_data.lastUpdated) + '">$' + soy.$$escapeHtml(opt_data.lastUpdated) + '</time></div>'}) + '</dd>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.lastUpdated.soyTemplateName = 'JIRA.Templates.DevStatus.lastUpdated';
}


JIRA.Templates.DevStatus.transitionContainer = function(opt_data, opt_ignored) {
  return '<div class="rolling-container sliding-container"><div class="rolling-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.transitionContainer.soyTemplateName = 'JIRA.Templates.DevStatus.transitionContainer';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'jira-development-integration-plugin/templates/viewissue/devstatus-cta-dialog.soy' */
// This file was automatically generated from devstatus-cta-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Dialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Dialog == 'undefined') { JIRA.Templates.DevStatus.Dialog = {}; }


JIRA.Templates.DevStatus.Dialog.content = function(opt_data, opt_ignored) {
  var output = '<div class="jira-dialog-heading">' + ((opt_data.prompt) ? '<h2>' + soy.$$escapeHtml(opt_data.prompt) + '</h2>' : '') + '</div><div class="jira-dialog-content"><ul class="targets">';
  var remoteAppList10 = opt_data.remoteApps;
  var remoteAppListLen10 = remoteAppList10.length;
  for (var remoteAppIndex10 = 0; remoteAppIndex10 < remoteAppListLen10; remoteAppIndex10++) {
    var remoteAppData10 = remoteAppList10[remoteAppIndex10];
    output += '<li>' + JIRA.Templates.DevStatus.Dialog.remoteApp(remoteAppData10) + '</li>';
  }
  output += '</ul><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-link cancel" id="aui-dialog-close">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.content.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.content';
}


JIRA.Templates.DevStatus.Dialog.remoteApp = function(opt_data, opt_ignored) {
  return '<a class="target ' + ((opt_data.primary) ? 'primary' : '') + '" data-application-type="' + soy.$$escapeHtml(opt_data.applicationType) + '" href="' + soy.$$escapeHtml(opt_data.url) + '">' + ((opt_data.iconUrl) ? '<img class="application-icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '">' : '<span class="application-icon ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span>') + '<div class="title" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</div><div class="base-url" title="' + soy.$$escapeHtml(opt_data.baseUrl) + '">' + soy.$$escapeHtml(opt_data.baseUrl) + '</div></a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.remoteApp.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.remoteApp';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'jira-development-integration-plugin/templates/common/devstatus-common.soy' */
// This file was automatically generated from devstatus-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Common == 'undefined') { JIRA.Templates.DevStatus.Common = {}; }


JIRA.Templates.DevStatus.Common.learnMoreLink = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.devToolsLearnMoreLink) ? ' <a href="' + soy.$$escapeHtml(opt_data.devToolsLearnMoreLink) + '" class="learn-more-link" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Common.learnMoreLink.soyTemplateName = 'JIRA.Templates.DevStatus.Common.learnMoreLink';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-backbone-define', location = 'jira-development-integration-plugin/js/util/DevStatusBackboneDefine.js' */
"use strict";Backbone&&!Backbone.define&&(Backbone.define=function(name,ctor){eval("Backbone['Class: "+name+"'] = function() { Backbone['Class: "+name+"'].__ctor.apply(this, arguments); }");var cls=Backbone["Class: "+name];cls.__ctor=ctor,ctor.prototype.name=name,cls.prototype=ctor.prototype,_.extend(cls,ctor),_.each(ctor.prototype,function(t,e){"function"==typeof t&&(t.displayName=name+"."+e)});var context=window,parts=name.split(".");return _.each(parts,function(t,e){e===parts.length-1?context[t]=cls:context=null==context[t]?context[t]={}:context[t]}),cls});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:event-publisher', location = 'jira-development-integration-plugin/js/util/EventPublisher.js' */
"use strict";define("jira-development-status/util/event-publisher",function(){return{trigger:AJS.trigger}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-wrm', location = 'jira-development-integration-plugin/js/util/DevStatusWRM.js' */
"use strict";define("jira-development-status/util/WRM",["underscore","jira-development-status/util/event-publisher"],function(e,r){var n="wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources-ctx",i="jira.devsummary.dialog-resources.wrm.load",t=function(){return window.performance.now()},a=function(e){var r=t();WRM.require([n],function(){o(r),e&&e()})},u=function(e){var n=Math.round(t()-e);r.trigger("analyticsEvent",{name:i,data:{durationInMillis:n}})},o=e.once(u);return{ANALYTIC_EVENT:i,requireDetailDialogResources:a}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'jira-development-integration-plugin/js/analytics/devstatus-rest-duration-analytics.js' */
"use strict";define("jira/dev-status/rest-duration-analytics",["jquery","underscore","jira/dev-status/time-tracking-analytics-event"],function(e,r,t){var n={ISSUE_SUMMARY_EVENT:"issue.summary.fetch.duration",ISSUE_DETAIL_EVENT:"issue.detail.fetch.duration",RR_TAB_EVENT:"release.report.tab.content.fetch.duration",ISSUE_BULK_SUMMARY_EVENT:"issue.bulksummary.fetch.duration",STALE_ISSUE_EVENT:"issue.stale.issue.fetch.duration"},s={},u=function(e){return e.indexOf("rest/dev-status/1.0/")>=0},a=function(e){return e.indexOf("rest/release-report/1.0")>=0},i=function(e){return e&&e.responseText?e.responseText.length:0},E=function(e,t){if(t){r.isArray(t)||(t=[t]);var n={};return e.split("?")[1].split("&").map(function(e){return e.split("=")}).filter(function(e){return r.include(t,e[0])}).reduce(function(e,t){var s=n[t[0]];s?r.isArray(s)?s.push(t[1]):n[t[0]]=[s,t[1]]:n[t[0]]=t[1]},{}),n}},o=function(e){return e.indexOf("issue/detail")>=0?n.ISSUE_DETAIL_EVENT:e.indexOf("issue/summary")>=0?n.ISSUE_SUMMARY_EVENT:e.indexOf("issue/bulksummary")>=0?n.ISSUE_BULK_SUMMARY_EVENT:e.indexOf("issue/stale-issues")>=0?n.STALE_ISSUE_EVENT:e.indexOf("release-report/1.0/tab/content")>=0?n.RR_TAB_EVENT:void 0},c=function(e,n,u){n||(n=[]),r.isArray(n)||(n=[n]),n.push("_");var a=E(e,n),i=new t(o(e),a._,r.extend(a,u));i.start(),s[i.getFullId()]=i},l=function(e){var r=o(e);if(r){var n=E(e,"_");return s[t.generateFullId(r,n?n._:void 0)]}},d=function(e,r){var t=l(e);t&&(t.endAndFire(r),delete s[t.getFullId()])},S=function(e){return e.status>=200&&e.status<300},_=function(e,r,t){c(t.url)},f=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasData:!(!s||!s.summary),hasErrors:!!(s&&s.errors&&s.errors.length)};d(t.url,u)},T=function(e,r,t){c(t.url,["applicationType","dataType"])},h=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasData:!!(s&&s.detail&&s.detail.length),hasErrors:!!(s&&s.errors&&s.errors.length)};d(t.url,u)},v=function(e,t,n){var s=E(n.url,["issueId"]).issueId,u=s?r.isArray(s)?s.length:1:0;c(n.url,[],{issues:u})},I=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasErrors:!!(s&&s.errors&&s.errors.length),changedIssues:n&&s.changedIssues?s.changedIssues.length:0,changed:n&&s.changed,devSummaryStale:n&&s.devSummaryStale};d(t.url,u)},U=function(e,r,t){c(t.url)},A=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),issues:n&&s?s.length:0};d(t.url,u)},p=function(e,r,t){c(t.url,"selectedTab")},N=function(e,r,t){var n=S(r),s={successful:n,contentLength:i(r)};d(t.url,s)},g={};g[n.ISSUE_DETAIL_EVENT]=T,g[n.ISSUE_SUMMARY_EVENT]=_,g[n.ISSUE_BULK_SUMMARY_EVENT]=v,g[n.STALE_ISSUE_EVENT]=U,g[n.RR_TAB_EVENT]=p;var V={};V[n.ISSUE_DETAIL_EVENT]=h,V[n.ISSUE_SUMMARY_EVENT]=f,V[n.ISSUE_BULK_SUMMARY_EVENT]=I,V[n.STALE_ISSUE_EVENT]=A,V[n.RR_TAB_EVENT]=N;var m=function(e,r,t,n){if(u(n.url)||a(n.url)){var s=e?g:V,i=s[o(n.url)];i&&i(r,t,n)}};e(document).ajaxSend(m.bind(null,!0)),e(document).ajaxComplete(m.bind(null,!1))});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'jira-development-integration-plugin/js/analytics/devstatus-analytics.js' */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/dev-status/analytics",["require","exports"],function(e,i){var t=e("jira/util/events"),n=e("jira/util/events/types"),a=e("jira/util/data/meta"),l=e("jira/analytics/web-client"),c=e("jquery"),s=e("underscore"),r=".edit-permission-link",u={SCREEN:1,UI:2,TRACK:3,OPERATIONAL:4};i.Analytics={fireEvent:function(e,i,t,n,a,c){var s="object"!==("undefined"==typeof c?"undefined":_typeof(c))?{}:c;switch(e){case u.SCREEN:l.sendScreenEvent({name:n+i,source:i,action:t,actionSubject:n,actionSubjectId:a,attributes:s});break;case u.UI:l.sendUIEvent({source:i,action:t,actionSubject:n,actionSubjectId:a,attributes:s});break;case u.TRACK:l.sendTrackEvent({source:i,action:t,actionSubject:n,actionSubjectId:a,attributes:s});break;case u.OPERATIONAL:l.sendOperationalEvent({source:i,action:t,actionSubject:n,actionSubjectId:a,attributes:s})}},fireAgileDevStatusLinkClicked:function(){return i.Analytics.fireEvent(u.UI,"Panel","clicked","agileIcon","devstatus")}},i.SummaryAnalytics={fireSummaryShownEvent:function(e){var t=e.isAssignee,n=e.eventProperties;return n=s.extend({},t,n),i.Analytics.fireEvent(u.SCREEN,"Panel","shown","Summary","devstatus",n)},fireSummaryClickedEvent:function(e,t){var n=a.get("fusion-analytics-new-context-link"),l="clicked";return n&&(a.set("fusion-analytics-new-context-link",void 0),t.isNewContext=n),i.Analytics.fireEvent(u.UI,"devstatus",l,"summaryPanelLink",e,t)},fireDetailTabClicked:function(e,t){return i.Analytics.fireEvent(u.UI,"devstatus","clicked","detailTab",t,{applicationName:e})}},i.BuildsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("builds",e)},fireDetailProjectClicked:function(){return i.Analytics.fireEvent(u.UI,"buildsDetailModule","clicked","link","project")},fireDetailPlanClicked:function(){return i.Analytics.fireEvent(u.UI,"buildsDetailModule","clicked","link","plan")},fireDetailBuildClicked:function(){return i.Analytics.fireEvent(u.UI,"buildsDetailModule","clicked","link","build")}},i.DeploymentsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("deployments",e)},fireDetailProjectClicked:function(){return i.Analytics.fireEvent(u.UI,"deploymentsDetailModule","clicked","link","project")},fireDetailEnvironmentClicked:function(){return i.Analytics.fireEvent(u.UI,"deploymentsDetailModule","clicked","link","environment")},fireDetailReleaseClicked:function(){return i.Analytics.fireEvent(u.UI,"deploymentsDetailModule","clicked","link","release")}},i.CommitsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("commits",e)},fireDetailRepoClicked:function(e){return i.Analytics.fireEvent(u.UI,"commitsDetailModule","clicked","link","repo",{applicationName:e})},fireDetailCommitClicked:function(e){return i.Analytics.fireEvent(u.UI,"commitsDetailModule","clicked","link","commit",{applicationName:e})},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"commits")},fireDetailFileExpandedClicked:function(e){return i.Analytics.fireEvent(u.UI,"commitsDetailModule","clicked","link","fileExpanded",{applicationName:e})},fireDetailFilesExpandedClicked:function(e){return i.Analytics.fireEvent(u.UI,"commitsDetailModule","clicked","link","filesExpanded",{applicationName:e})},fireDetailFileClicked:function(e){return i.Analytics.fireEvent(u.UI,"commitsDetailModule","clicked","link","file",{applicationName:e})},fireDetailReviewsShown:function(e){return i.Analytics.fireEvent(u.SCREEN,"Details","shown","Commit","reviews",{applicationName:e})},fireDetailReviewClicked:function(e){return i.Analytics.fireEvent(u.UI,"commitsDetailModule","clicked","link","review",{applicationName:e})},fireDetailBranchesShown:function(e){return i.Analytics.fireEvent(u.SCREEN,"Details","shown","Commit","branches",{applicationName:e})},fireDetailCreateReviewClicked:function(e,t){return i.Analytics.fireEvent(u.TRACK,"commitsDetailModule","created","review",null,{applicationName:e,allCommits:t})}},i.ReviewsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("reviews",e)},fireDetailReviewClicked:function(){return i.Analytics.fireEvent(u.UI,"reviewsDetailModule","clicked","link","review",null)}},i.BranchesAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("branches",e)},_fireDetailClickedEvent:function(e,t){return i.Analytics.fireEvent(u.UI,"branchesDetailModule","clicked","link",t,{applicationName:e})},_fireDetailClickedEventAssignable:function(e,t,n,a){return i.Analytics.fireEvent(u.UI,"branchesDetailModule","clicked","link",e,{applicationName:t,isAssignee:"undefined"!=typeof n?n:null,isAssignable:"undefined"!=typeof a?a:null})},fireDetailRepoClicked:function(e){this._fireDetailClickedEvent(e,"repo")},fireDetailBranchClicked:function(e){this._fireDetailClickedEvent(e,"branch")},fireDetailPullRequestLozengeClick:function(e){this._fireDetailClickedEvent(e,"pullRequestLozenge")},fireDetailReviewLozengeClick:function(e){this._fireDetailClickedEvent(e,"reviewLozenge")},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"branches")},fireDetailCreatePullRequestClicked:function(e,i,t){this._fireDetailClickedEventAssignable("createPullRequest",e,i,t)},fireDetailCreateReviewClicked:function(e,i,t){this._fireDetailClickedEventAssignable("createReview",e,i,t)}},i.PullRequestsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("pullRequests",e)},fireDetailPullRequestClicked:function(e){return i.Analytics.fireEvent(u.UI,"pullRequestsDetailModule","clicked","link","pullRequest",{applicationName:e})},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"pullRequests")}},i.LearnMoreAnalytics={fireLearnMoreEvent:function(e,t){var n=e.split(".");return i.Analytics.fireEvent(u.UI,n[1],n[2],"learnMore",null,t)}},i.CtaDialogAnalytics={issueDetails:{},fireCreateBranchEvent:function(e,t){var n=e.split(".");t="object"!==("undefined"==typeof t?"undefined":_typeof(t))?{}:t;var a=c.extend({currentUser:this.issueDetails.isAssignee?"assignee":"nonassignee",issueStatus:this.issueDetails.status,issueType:this.issueDetails.type},t);return i.Analytics.fireEvent(u.UI,"devstatus",n[0],n[1],"createbranch",a)},_populateIssueDetails:function(e){this.issueDetails={status:""+e.data("issueStatus"),type:""+e.data("issueType"),isAssignee:e.data("isAssignee")}},_initHandler:function(e,i,t,n){if(t&&i.not(document).is(t)){var a=this;i.find(n).on("simpleClick",function(){var e=c(this);a._fireCreateBranchEvent(e)})}},_fireCreateBranchEvent:function(e){this._populateIssueDetails(e);var i="clicked",t=a.get("fusion-analytics-new-context-link");t?(a.set("fusion-analytics-new-context-link",void 0),i+=".newcontext"):i+=".link",this.fireCreateBranchEvent(i)},initialize:function(e,a,l){var r=this;t.bind(n.NEW_CONTENT_ADDED,s.bind(function(i,t){this._initHandler(i,t,e,a)},this)),t.bind("GH.DetailView.updated",s.bind(function(i){this._initHandler(i,c(e),e,a)},this)),c(a).on("simpleClick",function(){var e=c(this);r._fireCreateBranchEvent(e)}),c(document).on("click","#"+l+" .jira-dialog-content .target",function(){var e=c(this);r.fireCreateBranchEvent("dialog.click",{title:e.find(".title").attr("title"),applicationType:e.data("applicationType")})}),c(document).on("click","#"+l+" .jira-dialog-content button.cancel",function(){r.fireCreateBranchEvent("dialog.cancel")}),c(document).on("click",".cta-tooltip .cta-learn-more-link",function(){i.LearnMoreAnalytics.fireLearnMoreEvent("click.ctahelptipbranching")})}},i.AdminAnalytics={initialize:function(){var e=this,t=c("#project-config-panel-dev-status");t.find(r).on("click",function(){e.fireEvent(u.UI,"adminConfig","click","link","editPermission",{withPermissions:c("ul.permissions-list li.devstatus-admin-permission-item").length>0})}),t.find(".learn-more-link").on("click",function(){i.LearnMoreAnalytics.fireLearnMoreEvent("click.adminappvertisementlink")}),t.find("#project-config-applinks-connect").on("click",function(){e.fireEvent(u.UI,"adminConfig","click","buttonDropDown","connect",null)}),t.find(".devstatus-admin-connect-button-option").on("click",function(){var i=c(this).data("key")||"unknown";e.fireEvent(u.UI,"adminConfig","click","button","connect."+i,null)})}},i.AdminSummaryAnalytics={initialize:function(){c("#project-config-webpanel-devstatus-admin-summary-panel").find(r).on("click",function(){i.AdminAnalytics.fireAdminEvent(u.UI,"adminConfig","click","link","editPermissionSummary",{withPermissions:!1})})}}}),function(e){AJS.namespace("JIRA.DevStatus.AdminAnalytics",null,e.AdminAnalytics),AJS.namespace("JIRA.DevStatus.AdminSummaryAnalytics",null,e.AdminSummaryAnalytics),AJS.namespace("JIRA.DevStatus.Analytics",null,e.Analytics),AJS.namespace("JIRA.DevStatus.BranchesAnalytics",null,e.BranchesAnalytics),AJS.namespace("JIRA.DevStatus.BuildsAnalytics",null,e.BuildsAnalytics),AJS.namespace("JIRA.DevStatus.CommitsAnalytics",null,e.CommitsAnalytics),AJS.namespace("JIRA.DevStatus.CtaDialogAnalytics",null,e.CtaDialogAnalytics),AJS.namespace("JIRA.DevStatus.DeploymentsAnalytics",null,e.DeploymentsAnalytics),AJS.namespace("JIRA.DevStatus.LearnMoreAnalytics",null,e.LearnMoreAnalytics),AJS.namespace("JIRA.DevStatus.PullRequestsAnalytics",null,e.PullRequestsAnalytics),AJS.namespace("JIRA.DevStatus.ReviewsAnalytics",null,e.ReviewsAnalytics),AJS.namespace("JIRA.DevStatus.SummaryAnalytics",null,e.SummaryAnalytics)}(require("jira/dev-status/analytics"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'jira-development-integration-plugin/js/analytics/time-tracking-analytics-event.js' */
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();define("jira/dev-status/time-tracking-analytics-event",["underscore","jquery","jira/dev-status/analytics"],function(t,e,n){return function(){function e(t,n,r){_classCallCheck(this,e),this.category=t,2===arguments.length&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(r=n,n=void 0),this.id=n,this.data=r||{}}return _createClass(e,[{key:"start",value:function(t){return this.addData(t),this.startTime=window.performance.now(),this}},{key:"end",value:function(t){return this.addData(t),this.endTime=window.performance.now(),this.data.timeElapsed=Math.round(this.endTime-this.startTime),this}},{key:"endAndFire",value:function(t){return this.end(t).fire()}},{key:"fire",value:function(){return n.Analytics.fireEvent(this.category,this.data),this}},{key:"addData",value:function(e){return t.extend(this.data,e),this}},{key:"getFullId",value:function(){return this.constructor.generateFullId(this.category,this.id)}}],[{key:"generateFullId",value:function(t,e){return t+(e?"_"+e:"")}}]),e}()});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'jira-development-integration-plugin/js/analytics/AnalyticsModel.js' */
"use strict";define("jira/devstatus/analytics-model",["backbone","underscore","jira/dev-status/rest-duration-analytics"],function(t,e){return t.Model.extend({TO_ANALYTIC_KEY_OVERRIDE:{repository:"commit"},DEV_INFO_TYPES_WITH_INSTANCE_TYPE_DATA:["build"],properties:["issue","summary","instanceType"],initialize:function(t){this.devStatusContainer=t.devStatusContainer,this.devStatusData=t.devStatusData,this._getAllAnalyticData()},getIssue:function(){return this.get("issue")},getSummary:function(){return this.get("summary")},getInstanceType:function(){return this.get("instanceType")},_getAllAnalyticData:function(){this.set("issue",this._getAnalyticIssueData()),this._initListenerToData()},_getAnalyticIssueData:function(){return{isAssignee:this.devStatusContainer.data("is-assignee"),isAssignable:this.devStatusContainer.data("is-assignable"),issueStatus:this.devStatusContainer.data("issue-status"),issueType:this.devStatusContainer.data("issue-type"),issueId:this.devStatusContainer.data("issue-id"),projectId:this.devStatusContainer.data("project-id")}},_getAnalyticSummaryData:function(t){var a=this,s={};return e.each(t.summary,function(t,e){s[a.TO_ANALYTIC_KEY_OVERRIDE[e]||e]=t.overall.count>0}),s},_getAnalyticInstanceTypeData:function(t){var a=this,s={};return e.each(t.summary,function(t,n){a.DEV_INFO_TYPES_WITH_INSTANCE_TYPE_DATA.indexOf(n)>-1&&void 0!==t.byInstanceType&&e.each(t.byInstanceType,function(t,e){s[(a.TO_ANALYTIC_KEY_OVERRIDE[n]||n)+"_"+e+"_count"]=t.count})}),s},_initListenerToData:function(){var t=this;this.devStatusData.on("requestSuccess",function(){t.set("summary",t._getAnalyticSummaryData(t.devStatusData.get("aggregatedData"))),t.set("instanceType",t._getAnalyticInstanceTypeData(t.devStatusData.get("aggregatedData")))})}})}),Backbone.define("JIRA.DevStatus.AnalyticsModel",require("jira/devstatus/analytics-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/DateUtils.js' */
"use strict";define("jira/dev-status/util/date",["jquery"],function(t){return{addTooltip:function(a){var e=a.find("time.livestamp");e.livestamp(),e.each(function(){var a=t(this),e=a.attr("datetime"),i=isNaN(e)?e:+e,r=moment(i);a.attr("title",r.format(JIRA.DevStatus.Date.format))})},format:"LLL"}}),function(t){AJS.namespace("JIRA.DevStatus.Date",null,t)}(require("jira/dev-status/util/date"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/dev-status-console.js' */
"use strict";define("jira-development-status/util/console",[],function(){if(console)return console;var e=function(){};return{log:e,info:e,warn:e,debug:e,error:e}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/dev-status-constants.js' */
"use strict";define("jira-development-status/util/constants",function(){return{PLUGIN_KEY:"com.atlassian.jira.plugins.jira-development-integration-plugin",RELEASE_REPORT_SELECTED_TAB:"release-report-selected-tab"}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/LocalStorage.js' */
"use strict";define("jira-development-status/util/local-storage",[],function(){return localStorage?localStorage:{setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/ApplinksUtils.js' */
"use strict";define("jira-development-status/util/applinks-utils",[],function(){return ApplinksUtils});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/DevStatusLocalStorage.js' */
"use strict";define("jira-development-status/util/dev-status-local-storage",["underscore","jira-development-status/util/console","jira-development-status/util/local-storage"],function(e,t,r){var o=e.extend({},r);return o.setItem=function(e,o){try{r.setItem(e,o)}catch(a){var l="";(22===a.code||1014===a.code&&"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&(l=". Browser local storage is full. For more information please follow https://confluence.atlassian.com/jirakb/functionality-in-jira-fails-due-to-exceeding-chrome-quota-762874705.html"),t.error("Couldn't store '"+e+"' & '"+o+"' key-value pair locally: "+a.name+l)}},o.getItem=function(e){try{return r.getItem(e)}catch(o){t.error("Couldn't retrieve locally stored value for key '"+e+"': "+o.name)}},o.removeItem=function(e){try{r.removeItem(e)}catch(o){t.error("Couldn't remove locally stored value for key '"+e+"': "+o.name)}},o.clear=function(){try{r.clear()}catch(e){t.error("Couldn't clear local storage: "+e.name)}},o});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/Listeners.js' */
"use strict";define("jira/devstatus/util/listeners",["underscore"],function(t){return Class.extend({init:function(){this._listening=[]},startListening:function(t,i,n,s){var e={start:function(){return t.on(i,n,s),this},stop:function(){return t.off(i,n,s),this}};this._listening.push(e.start())},stopListening:function(){t.each(this._listening,function(t){t.stop()}),this._listening=[]}})}),Backbone.define("JIRA.DevStatus.Util.Listeners",require("jira/devstatus/util/listeners"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/DevStatusNavigation.js' */
"use strict";define("jira-development-status/util/navigate",["underscore"],function(n){return{getUrl:function(){return window.location.href},reload:function(){n.defer(function(){window.location.reload()})},navigate:function(t){n.defer(function(){window.location=t})},redirectToLogin:function(){this.navigate(AJS.contextPath()+"/login.jsp?permissionViolation=true&os_destination="+encodeURIComponent(window.location.href))}}}),function(n){AJS.namespace("JIRA.DevStatus.Navigate",null,n)}(require("jira-development-status/util/navigate"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/DevStatusURLUtils.js' */
"use strict";define("jira/dev-status/util/url",["jquery","underscore"],function(e,t){return{getDetailDialogParam:function(){var e=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl()),t=parseUri(e);return t&&t.queryKey&&t.queryKey.devStatusDetailDialog},getUrlWithDetailDialogParam:function(e){var t=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl()),r=parseUri(t);return r.queryKey.devStatusDetailDialog=encodeURIComponent(e),this.createUrlFromParsedUri(r)},getCreateReviewDetailUrl:function(e){return this.getUrlWithDetailDialogParam("create-review-"+e)},isCreateReviewDetailDialogLink:function(e){return e&&e.lastIndexOf&&0===e.lastIndexOf("create-review-",0)},getCreateReviewDetailDialogApplicationType:function(e){return e.substring("create-review-".length)},_removeKickAssIHashFromUrl:function(e){return e.replace("i#","")},createUrlFromParsedUri:function(r){var a=[];e.each(r.queryKey,function(r,i){t.isObject(i)?e.each(i,function(e,t){a.push(r+"="+t)}):a.push(r+"="+i)});var i="";return r.protocol&&(i+=r.protocol+"://"),r.authority&&(i+=r.authority),r.path&&(i+=r.path),a.length>0&&(i+="?"+a.join("&")),r.anchor&&(i+="#"+r.anchor),i}}}),function(e){AJS.namespace("JIRA.DevStatus.URL",null,e)}(require("jira/dev-status/util/url"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/Sanitize.js' */
"use strict";define("jira-development-status/util/sanitize",["underscore"],function(t){function n(t){return c.indexOf(t[0])>-1}function r(t){if(!t)return"about:blank";var r,e,i=t.replace(u,"").trim();return n(i)?i:(e=i.match(o))?(r=e[0],a.test(r)?"about:blank":i):"about:blank"}function e(n,e){for(var i=t.clone(n),a=e||[],u=0;u<a.length;u++){var o=a[u];n.hasOwnProperty(o)&&"string"==typeof i[o]&&(i[o]=r(i[o]))}return i}function i(n,r){return t.map(n,function(t){return e(t,r)})}var a=/^(%20|\s)*(javascript|data)/im,u=/[^\x20-\x7E]/gim,o=/^([^:]+):/gm,c=[".","/"];return{sanitizeUrl:r,sanitizeObject:e,sanitizeCollection:i}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'jira-development-integration-plugin/js/util/ES6Utils.js' */
"use strict";define("jira/dev-status/util/es6",["exports"],function(e){e.stringStartsWith=function(e,t){return e.slice(0,0+t.length)===t},e.findIndex=function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},e.requestIdleCallback=function(e){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:fusion-widget-common-clientside', location = 'jira-development-integration-plugin/templates/fusion-widget/fusion-widget-common.soy' */
// This file was automatically generated from fusion-widget-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.FusionWidget.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.FusionWidget == 'undefined') { JIRA.Templates.FusionWidget = {}; }
if (typeof JIRA.Templates.FusionWidget.Common == 'undefined') { JIRA.Templates.FusionWidget.Common = {}; }


JIRA.Templates.FusionWidget.Common.branches = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#branch|1\x3cbranches}','<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.branches.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.branches';
}


JIRA.Templates.FusionWidget.Common.buildsText = function(opt_data, opt_ignored) {
  var output = '';
  var tagStart__soy6 = '<span class="count">';
  var tagEnd__soy7 = '</span>';
  output += (opt_data.successfulBuildCount > 0) ? (opt_data.failedBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds}',tagStart__soy6,opt_data.successfulBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds}',tagStart__soy6,opt_data.count,tagEnd__soy7)) : (opt_data.failedBuildCount > 0) ? (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.count,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} incomplete',tagStart__soy6,opt_data.count,tagEnd__soy7));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsText';
}


JIRA.Templates.FusionWidget.Common.buildsIconClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.failedBuildCount > 0) ? 'aui-iconfont-error' : (opt_data.successfulBuildCount > 0) ? 'aui-iconfont-approve' : (opt_data.unknownBuildCount > 0) ? 'aui-iconfont-devtools-task-cancelled' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsIconClass.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsIconClass';
}


JIRA.Templates.FusionWidget.Common.commits = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#commit|1\x3ccommits}','<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.commits.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.commits';
}


JIRA.Templates.FusionWidget.Common.deployments = function(opt_data, opt_ignored) {
  var output = '';
  var instanceOne__soy43 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[0], showProjects: opt_data.showProjects});
  var instanceTwo__soy47 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[1], showProjects: opt_data.showProjects});
  var instanceThree__soy51 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[2], showProjects: opt_data.showProjects});
  output += soy.$$filterNoAutoescape(AJS.format('{5}Deployed{6} to {0,choice,1#{1}|2#{1} and {2}|3#{1}, {2} and {3}|3\x3c{1}, {2}, {3}, and {4} more}',opt_data.successfulCount,instanceOne__soy43,instanceTwo__soy47,instanceThree__soy51,opt_data.successfulCount - 3,opt_data.anchorStart,opt_data.anchorEnd));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deployments.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deployments';
}


JIRA.Templates.FusionWidget.Common.deploymentsInstance = function(opt_data, opt_ignored) {
  return '' + ((opt_data.environment) ? '<span class="environment" ' + ((opt_data.showProjects) ? 'title="' + soy.$$escapeHtml(AJS.format('Project: {0}',opt_data.environment.project)) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.environment.title) + '</span>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deploymentsInstance.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deploymentsInstance';
}


JIRA.Templates.FusionWidget.Common.pullRequestsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#pull request|1\x3cpull requests}','<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsText';
}


JIRA.Templates.FusionWidget.Common.reviewsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#review|1\x3creviews}','<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsText';
}


JIRA.Templates.FusionWidget.Common.reviewsState = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.stateLozenge({isSubtle: opt_data.isSubtle, lozengeClass: opt_data.stateClasses[opt_data.state], text: opt_data.stateText[opt_data.state], classes: opt_data.classes, tooltip: opt_data.tooltip, tooltipClass: opt_data.tooltipClass, tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsState.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsState';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'OPEN', MERGED: 'MERGED', DECLINED: 'DECLINED'}, classes: 'pullrequest-state'});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'Under Review', MERGED: 'MERGED', DECLINED: 'DECLINED'}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-current', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: 'Open', CLOSED: 'Closed', DRAFT: 'Draft', DEAD: 'Abandoned', REJECTED: 'Rejected', UNKNOWN: 'Unknown', APPROVAL: 'Approval', SUMMARIZE: 'Summarize'}});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-complete', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: 'Under Review', CLOSED: 'Closed', DRAFT: 'Draft', DEAD: 'Abandoned', REJECTED: 'Rejected', UNKNOWN: 'Unknown', APPROVAL: 'Under Review', SUMMARIZE: 'Under Review'}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.stateLozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-overflow ' + ((opt_data.isSubtle) ? 'aui-lozenge-subtle' : '') + ' ' + soy.$$escapeHtml(opt_data.lozengeClass) + ' ' + ((opt_data.tooltip) ? soy.$$escapeHtml(opt_data.tooltipClass) : '') + ' ' + ((opt_data.classes) ? soy.$$escapeHtml(opt_data.classes) : '') + '"' + ((opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipText) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.stateLozenge.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.stateLozenge';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-instance-picker-view', location = 'jira-development-integration-plugin/js/viewissue/dialog/InstancePickerView.js' */
"use strict";define("jira/devstatus/instance-picker-view",["backbone","jquery","underscore","jira-development-status/util/navigate","jira-development-status/util/sanitize"],function(e,t,s,i,n){return e.View.extend({ARROW_KEY_UP_CODE:38,ARROW_KEY_DOWN_CODE:40,template:JIRA.Templates.DevStatus.Dialog.content,events:{"keydown .jira-dialog-content":"_onTargetKeyboardSelect","focus .target":"_onTargetFocus"},initialize:function(e){this.currentSelected=null,this.link=e.activeTrigger,this.cta=e.cta,this.processTargets=e.processTargets,this.issueId=e.issueId,this.uniqueResultAction=e.uniqueResultAction||function(e){i.navigate(e.url)}},render:function(){var e=this._getIssueId(this.link),i=t.Deferred();return this._fetchTargets(this.cta,e).done(s.bind(function(e){this.processTargets&&(e.remoteApps=this.processTargets(e.remoteApps));var s=this._isUniqueResult(e);if(s)this.uniqueResultAction(s);else{var n=t(this.template(e));i.resolve(n)}},this)).fail(function(e){i.resolve(e)}),i.promise()},_fetchTargets:function(e,s){var i=t.Deferred();return t.ajax({url:contextPath+"/rest/dev-status/1.0/issue/targets?cta="+encodeURIComponent(e)+"&issueId="+encodeURIComponent(s)}).done(function(e){e.remoteApps=n.sanitizeCollection(e.remoteApps,["baseUrl","iconUrl","url"]),i.resolve(e)}).fail(function(e,t){i.reject(JIRA.SmartAjax.buildDialogErrorContent(e).html())}),i.promise()},_getIssueId:function(e){return this.issueId||e&&e.data("issueid")||t("#devstatus-container").data("issue-id")},_isUniqueResult:function(e){return 1===e.remoteApps.length&&e.remoteApps[0]},_toggleEntry:function(e,t,s){var i=e.eq(t);s&&i.focus(),i.addClass("selected"),this.currentSelected=i},_removeSelected:function(){this.currentSelected&&(this.currentSelected.removeClass("selected"),this.currentSelected=null)},_onTargetKeyboardSelect:function(e){if("keydown"===e.type){var t=0;if(e.keyCode===this.ARROW_KEY_UP_CODE?t=-1:e.keyCode===this.ARROW_KEY_DOWN_CODE&&(t=1),0!==t){e.preventDefault();var s=this.$el.find(".target"),i=s.index(this.$el.find(".selected"));i!==-1&&s.eq((i+t)%s.size()).focus()}}},_onTargetFocus:function(e){this._removeSelected(),this._toggleEntry(t(e.target),0,!1)}})}),Backbone.define("JIRA.DevStatus.InstancePickerView",require("jira/devstatus/instance-picker-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/dialog/CreateBranchFormDialog.js' */
"use strict";define("jira/devstatus/create-branch-form-dialog",["backbone","jquery","require","jira/dialog/form-dialog","jira-development-status/util/WRM"],function(e,t,i,a,r){return e.View.extend({initialize:function(e){AJS.namespace("JIRA.DevStatus.CtaDialog"),this.parentContainerSelector=e.parentContainerSelector,this.panelSelector=e.panelSelector,this.linkSelector=e.linkSelector,this.dialogId="devstatus-cta-dialog",JIRA.DevStatus.CtaDialogAnalytics.initialize(this.parentContainerSelector,this.linkSelector,this.dialogId),this._initFormDialog()},_initFormDialog:function(){var e=this,n=JIRA.DevStatus.CtaDialog.dialog=new a({id:this.dialogId,width:560,content:function(a){var o=this;r.requireDetailDialogResources(function(){var r=i("jira/devstatus/instance-picker-view");o.pickerView=new r({el:o.$popup,activeTrigger:o.$activeTrigger,cta:e._getCta(o.$activeTrigger)}),o.pickerView.render().always(function(e){a(e),t(n.$popup).find(".target").eq(0).focus(),JIRA.DevStatus.CtaDialogAnalytics.fireCreateBranchEvent("dialog.open")})})},trigger:this.linkSelector,autoClose:!0})},_getCta:function(e){var t=e.data("cta");if(t)return t;var i=e.attr("href"),a=i&&/\#([a-zA-Z\.]+)/.exec(i);return a&&a[1]}})}),Backbone.define("JIRA.DevStatus.CreateBranchFormDialog",require("jira/devstatus/create-branch-form-dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/DevStatusModule.js' */
"use strict";define("jira/devstatus/dev-status-module",["backbone","jquery","require","underscore","jira/util/data/meta"],function(t,e,i,a,s){return t.Model.extend({initialize:function(t){a.defaults(this,t),this._listeners=new JIRA.DevStatus.Util.Listeners;var e=i("jira/devstatus/create-branch-form-dialog");this.createBranchFormDialog=new e(t),this.devSummaryJson=null,this.triggerHelpTipShown=!1,this.aitHelptip=null,this._initFocusHandler()},initializePanel:function(t){return this._listeners.stopListening(),this._renderedData=null,this._getContainers(t),this._createCreateBranchView(t),this.devSummaryJson=this.devStatusContainer.find(".dev-summary.json-blob").data("json"),this._createDevStatusData(t),this._createAnalyticsModel(t),this._createSummaryViews(t),this._setupDataEventHandlers(),this.devStatusPanelVisibilityToggler=t.devStatusPanelVisibilityToggler,this._startDevStatus(),this},_createCreateBranchView:function(t){var e=i("jira/devstatus/create-branch-view");this.createBranchView=new e({el:this.createBranchContainer,showTooltip:t.showTooltip})},_createDevStatusData:function(t){this.devStatusData=new JIRA.DevStatus.DevStatusData({issueId:this.devStatusContainer.data("issue-id"),issueKey:this.devStatusContainer.data("issue-key")})},_createSummaryViews:function(t){var i=this,s=this.devStatusContainer.data();this._summaryModules=a.clone(this.statusPanelContainer.find(".status-panel").map(function(){var t=e(this);return new(JIRA.DevStatus[t.data("module")])({dataAttrs:s,el:t,analyticsModel:i.analyticsModel})})),this._errorModule=new JIRA.DevStatus.SummaryErrorModule({el:this.messagePanelContainer,dataAttrs:s})},_createAnalyticsModel:function(t){this.analyticsModel=new JIRA.DevStatus.AnalyticsModel({devStatusContainer:this.devStatusContainer,devStatusData:this.devStatusData})},_getContainers:function(t){this.devStatusContainer=t.container,this.parentContainer=t.container.closest(this.parentContainerSelector),this.createBranchContainer=t.container.find(this.linkSelector),this.statusPanelContainer=t.container.find(this.statusPanelSelector),this.headerContainer=this.parentContainer.find(t.headerSelector),this.messagePanelContainer=t.container.find(".message-panel")},_onLoadingStarted:function(){this._startLoadingModuleData()},_onLoadingSuccess:function(t,e,i){var a=this.devStatusData.get("aggregatedData");this._renderModules({success:!0,renderData:a}),this._postRender(!e,i,a)},_onLoadingFailure:function(){this._renderModules({success:!1}),this._postRender(!1,!0)},_setupDataEventHandlers:function(){this._listeners.startListening(this.devStatusData,"beforeRequest",this._onLoadingStarted,this),this._listeners.startListening(this.devStatusData,"requestSuccess",this._onLoadingSuccess,this),this._listeners.startListening(this.devStatusData,"requestFail",this._onLoadingFailure,this)},_startDevStatus:function(){var t=!this.devSummaryJson||this.devSummaryJson.isStale===!0;this.devSummaryJson&&this.devStatusData.setAggregateData(this.devSummaryJson.cachedValue,!0,!t),t&&(this._startLoadingModuleData(),this.devStatusData.retrieveAggregateData())},_initFocusHandler:function(){var t=JIRA.DevStatus.DevStatusModule.MAX_REFRESH_WINDOW;e(window).on("focus",a.throttle(a.bind(this.refreshSummaryData,this),t,{trailing:!1}))},refreshSummaryData:function(){this.devStatusData&&this.devStatusData.retrieveAggregateData()},_postRender:function(t,e,i){function s(){e&&(u.addClass("js-animation-completed"),r._attachAutomaticTransitionsHelpTip(i))}var n=this._isAnySummaryViewVisibleOnPanel()||this._isAnyErrorViewVisible(),r=this;if(n){var o=this.analyticsModel.getIssue();JIRA.DevStatus.SummaryAnalytics.fireSummaryShownEvent({isAssignee:o.isAssignee,eventProperties:a.extend({},o,this.analyticsModel.getSummary(),this.analyticsModel.getInstanceType())}),this._openDetailDialogUrlLink()}this._togglePanelEmptyStatus(!this._isAnySummaryViewVisibleOnPanel());var u=this.parentContainer,l=n||this.createBranchContainer.size()>0;this.devStatusPanelVisibilityToggler&&u.is(":visible")!==l?(this.devStatusPanelVisibilityToggler(this.parentContainer,l,t,s),!l&&this.aitHelptip&&this.aitHelptip.isVisible()&&this.aitHelptip.hide()):s()},_attachAutomaticTransitionsHelpTip:function(t){var i=this.parentContainer.is(":visible"),s=this._shouldRenderAITTooltip(t);!s&&this.aitHelptip&&this.aitHelptip.isVisible()?this.aitHelptip.hide():s&&!this.triggerHelpTipShown&&JIRA.DevStatus.showAITTooltip&&i&&(a.defer(a.bind(function(){this.aitHelptip=new AJS.HelpTip({id:"automaticTransitionDevSummaryTooltip",title:"Automate your status updates",bodyHtml:JIRA.Templates.DevStatus.Tooltip.automaticTransitions({aitHelpLinkUrl:this.devStatusContainer.data("ait-help-url-json")}),anchor:"#viewissue-devstatus-panel_heading .toggle-title",isSequence:!0,callbacks:{init:function(){e("#trigger-docs-link").on("click",function(){AJS.trigger("analyticsEvent",{name:"devstatus.automatic.transitions.learn.more.clicked",data:{}})})}},inlineDialogOpts:{width:400}}),AJS.HelpTip.Manager.showSequences()},this)),this.triggerHelpTipShown=!0)},_shouldRenderAITTooltip:function(t){return!!t&&(t.summary.branch.overall.count>0||t.summary.repository.overall.count>0||t.summary.pullrequest.overall.count>0||t.summary.review.overall.count>0)},_getModuleByType:function(t){return a.find(this._summaryModules,function(e){return e.data&&e.data.getType&&a.isEqual(e.data.getType(),t)})},_openDetailDialogUrlLink:function(){var t=s.get("fusion-open-detail-dialog");if(t){var e;if(JIRA.DevStatus.URL.isCreateReviewDetailDialogLink(t)?e=this._getModuleByType("repository"):(e=this._getModuleByType(t),e&&s.set("fusion-open-detail-dialog",void 0)),e){var i=e.view;i&&i.isVisible()&&(s.set("fusion-analytics-new-context-link",!0),i.getSummaryLink().click())}}},_togglePanelEmptyStatus:function(t){this.statusPanelContainer&&this.statusPanelContainer.toggleClass("empty-status",t)},_isAnySummaryViewVisibleOnPanel:function(){return!!a.find(this._summaryModules,function(t){return t.isViewVisible()})},_isAnyErrorViewVisible:function(){return this._errorModule.isViewVisible()},_renderModules:function(t){var e=this._renderedData=t.renderData||this._renderedData;a.each(this._summaryModules,function(t){t.render(e)}),this._errorModule.render(t.success?e:void 0)},_startLoadingModuleData:function(){a.each(this._summaryModules,function(t){t.startLoading()})}},{MAX_REFRESH_WINDOW:3e4})}),Backbone.define("JIRA.DevStatus.DevStatusModule",require("jira/devstatus/dev-status-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/DevStatusData.js' */
"use strict";define("jira/devstatus/dev-status-data",["backbone","jquery","underscore"],function(e,t,s){return e.Model.extend({properties:["aggregatedData"],namedEvents:["beforeRequest","requestFail","requestSuccess"],initialize:function(e){this.issueId=e.issueId,this.issueKey=e.issueKey},retrieveAggregateData:function(){var e=AJS.contextPath()+"/rest/dev-status/1.0/issue/summary?issueId="+this.issueId;return this.trigger("beforeRequest"),t.ajax(e).done(s.bind(this.setAggregateData,this)).fail(s.bind(this.setAggregateDataError,this)).promise()},setAggregateData:function(e,t,s){this.set("aggregatedData",e),this.trigger("requestSuccess",this,t===!0,!!s)},setAggregateDataError:function(e,t){this.set("aggregatedData",void 0),this.trigger("requestFail",this,e)}})}),Backbone.define("JIRA.DevStatus.DevStatusData",require("jira/devstatus/dev-status-data"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/CreateBranchView.js' */
"use strict";define("jira/devstatus/create-branch-view",["backbone","underscore","jira/util/data/meta"],function(t,e,i){return t.View.extend({initialize:function(t){this.tooltipShown=!t.showTooltip,this.linkTextSelector=".devstatus-cta-link-text",this.issueContainer=".issue-container",this._processLinkForNavigableURL(),this._initTooltip(),e.defer(e.bind(this._openCreateBranchDialog,this))},getCreateBranchLink:function(){return this.$el},_processLinkForNavigableURL:function(){this.getCreateBranchLink().data("cta",this._getCta(this.$el)),this.getCreateBranchLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam("create-branch"))},_openCreateBranchDialog:function(){var t=i.get("fusion-open-detail-dialog");"create-branch"===t&&(i.set("fusion-open-detail-dialog",void 0),i.set("fusion-analytics-new-context-link",!0),this.getCreateBranchLink().click())},_initTooltip:function(){!this.tooltipShown&&this.$el.length>0&&e.defer(e.bind(function(){var t=this.$el.data("cta");t&&(new AJS.HelpTip({id:t+".tooltip",title:"Start development",bodyHtml:JIRA.Templates.DevStatus.Tooltip.createBranch(),anchor:this.$el.find(this.linkTextSelector),isSequence:!0,inlineDialogOpts:{container:this.issueContainer,width:400}}),this.tooltipShown=!0,AJS.HelpTip.Manager.showSequences())},this))},_getCta:function(t){var e=t.attr("href"),i=e&&/\#([a-zA-Z\.]+)/.exec(e);return i&&i[1]}})}),Backbone.define("JIRA.DevStatus.CreateBranchView",require("jira/devstatus/create-branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/BasePanelModule.js' */
"use strict";define("jira/devstatus/base-panel-module",["backbone","underscore"],function(e,t){return e.Model.extend({initialize:function(e){this.options=t.defaults({},e),this.data=this.createModel()},render:function(e){this.startViews(),this.data.updateData(e),this.view.render()},startLoading:function(){this.data.startLoadingData&&this.data.startLoadingData()},startViews:function(){this.view||(this.view=this.createView())},stopViews:function(){this.view&&(this.view.undelegateEvents(),this.view.$el.empty(),this.view.hide(),this.view=null)},isViewVisible:function(){return this.view&&this.view.isVisible()},createView:function(){},createModel:function(){}})}),Backbone.define("JIRA.DevStatus.BasePanelModule",require("jira/devstatus/base-panel-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/BaseSummaryView.js' */
"use strict";define("jira/devstatus/base-summary-view",["backbone","jquery","underscore"],function(t,e,i){return t.View.extend({template:void 0,events:{"simpleClick .summary":"_onSummaryLinkClick"},initialize:function(t){this.options=i.clone(t),this.model.on("change:hasData",this._addOrRemoveHasDataClass,this),this.model.on("change:dataLoading",this._addOrRemoveDataLoadingClass,this),this.transitionView=new JIRA.DevStatus.SummaryTransitionView({model:this.model,el:this.$el})},render:function(){var t=this.isVisible();if(t){var s=e(this.template(i.extend({issueKey:this.options.dataAttrs.issueKey},this.model.getOverall())));this._shouldAnimateDataTransition()?this.transitionView.renderVisible(s):(this.$el.html(s),JIRA.DevStatus.Date.addTooltip(s)),this._renderNavigableSummaryLink(),this.show()}else this._isHidden()||(this._shouldAnimateDataTransition()?this.transitionView.renderHidden(i.bind(this.hide,this)):this.hide());this._addOrRemoveDataLoadingClass(),this._addOrRemoveHasDataClass()},getDefaultDetailDialogParameters:function(){return{issueKey:this.options.dataAttrs.issueKey,issueId:this.options.dataAttrs.issueId,tabs:this.model.get("byInstanceType"),dataType:this.model.getType(),showContactAdminForm:this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm}},getSummaryLink:function(){return this.$el.find("a.summary")},isVisible:function(){return this.model.getOverall().count>0},_addOrRemoveHasDataClass:function(){var t=this.model.get("hasData");this.$el.toggleClass("js-has-data",t)},_renderNavigableSummaryLink:function(){this.getSummaryLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam(this.model.getType()))},_addOrRemoveDataLoadingClass:function(){var t=this.model.get("dataLoading");this.$el.toggleClass("data-loading",t)},_onSummaryLinkClick:function(t){t.preventDefault(),console.log("Summary view not supported: ",this)},_shouldAnimateDataTransition:function(){return!!this.model.getPreviousOverall()},_isHidden:function(){return this.$el.hasClass("hidden")},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}})}),Backbone.define("JIRA.DevStatus.BaseSummaryView",require("jira/devstatus/base-summary-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/SummaryTransitionView.js' */
"use strict";define("jira/devstatus/summary-transition-view",["backbone","jquery","underscore","jira/dev-status/util/date"],function(i,t,n,s){return i.View.extend({slideTransitionTime:500,initialize:function(){},renderVisible:function(i){var e=!t.contains(document,this.$el[0]);this._hasPreviousData()?this._hasDataChanged()&&(this._prepareContentsForTransition(i,this.$el),this.$el.addClass("roll-transition")):(this._preStartSlideTransition(),this.$el.addClass("slide-down-transition"),e=!0),this.$el.html(i),s.addTooltip(i),e?n.defer(n.bind(this._initiateTransition,this)):this._initiateTransition()},renderHidden:function(i){var t=this;this.$el.slideUp(this.slideTransitionTime,function(){t.$el.css("display",""),i()})},_initiateTransition:function(){if(this.$el.hasClass("slide-down-transition"))this._postStartSlideTransition(),this.$el.removeClass("slide-down-transition"),this._startSlideDownTransition(this.$el,0);else{this.$el.hasClass("roll-transition")&&(this.$el.removeClass("roll-transition"),this._startRollTransition());var i=this.$el.find(".sliding-container");if(i.length>0){var n=this;i.each(function(i,s){var e=t(s),a=e.data("prevHeight");n._startSlideDownTransition(e,a)})}}},_startSlideDownTransition:function(i,t){var n=i.height();t!==n&&i.height(t).animate({height:n},this.slideTransitionTime,function(){i.css("height","auto"),i.find(".rolling-content").removeClass("transit")})},_startRollTransition:function(){this.$el.find(".rolling-container").each(n.bind(function(i,n){var s=t(n),e=s.find(".rolling-content"),a=e.find(":not(.old-content)"),r=a.height();s.height(r),e.addClass("transit"),a.css("margin-top","-"+r+"px").animate({"margin-top":"0"},this.slideTransitionTime,function(){s.css("height","auto"),s.find(".old-content").remove(),e.removeClass("transit"),a.css("margin-top","")})},this))},_prepareContentsForTransition:function(i,n){i=t("<div></div>").append(i);var s=i.find(".sliding-container"),e=n.find(".sliding-container");s.each(function(i,n){var s=e.get(i);if(s){var a=t(s);t(n).data("prevHeight",a.height())}});var a=i.find(".rolling-container"),r=n.find(".rolling-container");a.each(function(i,n){var s=t(n).find(".rolling-content"),e=r.get(i);if(e){var a=t(e).find(".rolling-content").children();a.addClass("old-content"),s.append(a)}})},_hasPreviousData:function(){var i=this.model.getPreviousOverall();return i&&i.count>0},_hasDataChanged:function(){return!n.isEqual(this.model.getOverall(),this.model.getPreviousOverall())},_preStartSlideTransition:function(){this.$el.css("height","0"),this.$el.css("opacity","0")},_postStartSlideTransition:function(){this.$el.css("height",""),this.$el.css("opacity","")}})}),Backbone.define("JIRA.DevStatus.SummaryTransitionView",require("jira/devstatus/summary-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/BaseSummaryModule.js' */
"use strict";define("jira/devstatus/base-summary-module",["underscore","jira/devstatus/base-panel-module"],function(e,t){return t.extend({model:void 0,viewType:void 0,createModel:function(){return new this.model({})},createView:function(){return new this.viewType(e.extend(e.clone(this.options),{model:this.data}))}})}),Backbone.define("JIRA.DevStatus.BaseSummaryModule",require("jira/devstatus/base-summary-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/BaseSummaryModel.js' */
"use strict";define("jira/devstatus/base-summary-model",["backbone"],function(e){return e.Model.extend({typeId:void 0,properties:["byInstanceType","overall","previousOverall","hasData","dataLoading"],startLoadingData:function(){this.set("dataLoading",!0)},updateData:function(e){if(this.set("hasData",void 0!==e),this.set("dataLoading",!1),this.set("previousOverall",this.getOverall()),e&&e.summary&&e.summary[this.typeId]){var t=e.summary[this.typeId];this.set("byInstanceType",t.byInstanceType),this.set("overall",t.overall)}else this.set("byInstanceType",{}),this.set("overall",{count:0})},getType:function(){return this.typeId},getOverall:function(){return this.get("overall")},getPreviousOverall:function(){return this.get("previousOverall")}})}),Backbone.define("JIRA.DevStatus.BaseSummaryModel",require("jira/devstatus/base-summary-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/SummaryErrorModule.js' */
"use strict";define("jira/devstatus/summary-error-module",["jira/devstatus/base-panel-module"],function(t){return t.extend({createModel:function(){return new JIRA.DevStatus.SummaryErrorModel({})},createView:function(){var t=this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm;return new JIRA.DevStatus.SummaryErrorView({model:this.data,el:this.options.el,showContactAdminForm:t})}})}),Backbone.define("JIRA.DevStatus.SummaryErrorModule",require("jira/devstatus/summary-error-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/SummaryErrorModel.js' */
"use strict";define("jira/devstatus/summary-error-model",["backbone","underscore"],function(r,e){return r.Model.extend({properties:["hasErrors","errorInstances","configInstances"],defaults:function(){return{hasErrors:!1,errorInstances:[],configInstances:[]}},updateData:function(r){var t=this._extractErrors(r&&r.errors),s=this._extractErrors(r&&r.configErrors);this.set("hasErrors",!r||!e.isEmpty(t)||!e.isEmpty(s)),this.set("errorInstances",t),this.set("configInstances",s)},_extractErrors:function(r){return r?e.map(e.filter(r,function(r){return r.error}),function(r){return r.instance}):[]}})}),Backbone.define("JIRA.DevStatus.SummaryErrorModel",require("jira/devstatus/summary-error-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/SummaryErrorView.js' */
"use strict";define("jira/devstatus/summary-error-view",["jira/devstatus/base-summary-view","underscore"],function(e,r){return e.extend({initialize:function(e){this.showContactAdminForm=e.showContactAdminForm},render:function(){return this.isVisible()?(this.$el.html(JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon({instances:this.hasForceGenericErrorMessage()?null:this.model.get("errorInstances"),notConfiguredInstances:this.model.get("configInstances"),showContactAdminForm:this.showContactAdminForm})),this.show()):this.hide(),this},hasForceGenericErrorMessage:function(){return r.some(this.model.get("errorInstances"),function(e){return!!e.forceGenericErrorMessage})},isVisible:function(){return this.model.get("hasErrors")}})}),Backbone.define("JIRA.DevStatus.SummaryErrorView",require("jira/devstatus/summary-error-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'jira-development-integration-plugin/js/viewissue/DevStatusInit.js' */
"use strict";!function(){JIRA.DevStatus.setDetailDialogParam=function(){AJS.Meta.set("fusion-open-detail-dialog",JIRA.DevStatus.URL.getDetailDialogParam())},JIRA.DevStatus.setDetailDialogParam()}(),AJS.$(function(){function e(e){return e.find("body").hasClass("page-type-dashboard")}function t(e){return e.find("body").hasClass("ghx-agile")}function a(e){return e.find("body").hasClass("ka ajax-issue-search-and-view")}function n(){return AJS.Meta.get("is-servicedesk-rendered")}function i(e,t,a){JIRA.DevStatus.devStatusModule.initializePanel({container:e,showTooltip:JIRA.DevStatus.showTooltip,headerSelector:t,devStatusPanelVisibilityToggler:a})}function s(e,t,a,n){_.defer(function(){var i=a?1e3:0,s={duration:i,complete:n};t?e.slideDown(s):e.slideUp(s)})}JIRA.DevStatus.showTooltip=!0,JIRA.DevStatus.showAITTooltip=!0;var o={devStatusContainer:"#devstatus-container",parentContainer:"[id$='devstatus-panel']",link:"a.devstatus-cta-link",statusPanel:".status-panels",viewIssueHeader:".mod-header",agileHeader:".ghx-header",agileNavMenuLink:'a[href="#ghx-tab-com-atlassian-jira-plugins-jira-development-integration-plugin-greenhopper-devstatus-panel"]'};JIRA.DevStatus.documentReadyInit=function(u){if(JIRA.DevStatus.devStatusModule=new JIRA.DevStatus.DevStatusModule({parentContainerSelector:o.parentContainer,linkSelector:o.link,panelSelector:o.devStatusContainer,statusPanelSelector:o.statusPanel}),e(u)||t(u))u.find("body").on("click.rapidboardSpa",o.agileNavMenuLink,JIRA.DevStatus.Analytics.fireAgileDevStatusLinkClicked),JIRA.DevStatus.showTooltip=!1,JIRA.DevStatus.showAITTooltip=!1;else if(a(u)&&JIRA.Issues.Api.isFullScreenIssueVisible()){var l=AJS.$(o.devStatusContainer);l.length>0&&i(l,o.viewIssueHeader,s)}n()&&(JIRA.DevStatus.showTooltip=!1,JIRA.DevStatus.showAITTooltip=!1),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t){return!!t.not(document).is(o.parentContainer)&&(i(t.find(o.devStatusContainer),o.viewIssueHeader,s),JIRA.DevStatus.showTooltip=!1,!0)}),JIRA.bind("GH.DetailView.updated",function(e,t){var a=AJS.$(o.devStatusContainer);a.length&&i(a,o.agileHeader)}),require(["jira-development-status/util/WRM"],function(e){e.requireDetailDialogResources()})},AJS.$(function(){JIRA.DevStatus.documentReadyInit(AJS.$(document))})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/commit/CommitModel.js' */
"use strict";define("jira/devstatus/commit-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"repository"})}),Backbone.define("JIRA.DevStatus.CommitModel",require("jira/devstatus/commit-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'jira-development-integration-plugin/templates/viewissue/commit/devstatus-panel-commit.soy' */
// This file was automatically generated from devstatus-panel-commit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Commit.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Commit == 'undefined') { JIRA.Templates.DevStatus.Commit = {}; }


JIRA.Templates.DevStatus.Commit.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Commits related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.commits(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Latest', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Commit.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Commit.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/commit/CommitView.js' */
"use strict";define("jira/devstatus/commit-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,i){return t.extend({template:JIRA.Templates.DevStatus.Commit.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;i.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-commit-view");a.detailDialogCommitView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-commit-detail-dialog",count:a.model.getOverall().count})),JIRA.DevStatus.CommitsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogCommitView.show()})}})}),Backbone.define("JIRA.DevStatus.CommitView",require("jira/devstatus/commit-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/commit/CommitModule.js' */
"use strict";define("jira/devstatus/commit-module",["jira/devstatus/base-summary-module","jira/devstatus/commit-model","jira/devstatus/commit-view"],function(e,t,i){return e.extend({model:t,viewType:i})}),Backbone.define("JIRA.DevStatus.CommitModule",require("jira/devstatus/commit-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/pullrequest/PullRequestModel.js' */
"use strict";define("jira/devstatus/pull-request-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"pullrequest"})}),Backbone.define("JIRA.DevStatus.PullRequestModel",require("jira/devstatus/pull-request-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'jira-development-integration-plugin/templates/viewissue/pullrequest/devstatus-panel-pullrequest.soy' */
// This file was automatically generated from devstatus-panel-pullrequest.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.PullRequest.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.PullRequest == 'undefined') { JIRA.Templates.DevStatus.PullRequest = {}; }


JIRA.Templates.DevStatus.PullRequest.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Pull requests related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.pullRequestsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Updated', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.PullRequest.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.PullRequest.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/pullrequest/PullRequestView.js' */
"use strict";define("jira/devstatus/pull-request-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,u){return t.extend({template:JIRA.Templates.DevStatus.PullRequest.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;u.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-pull-request-view");a.detailDialogPullRequestView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-pullrequest-detail-dialog",count:a.model.getOverall().count,reviewersThreshold:2})),JIRA.DevStatus.PullRequestsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogPullRequestView.show()})}})}),Backbone.define("JIRA.DevStatus.PullRequestView",require("jira/devstatus/pull-request-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/pullrequest/PullRequestModule.js' */
"use strict";define("jira/devstatus/pull-request-module",["jira/devstatus/base-summary-module","jira/devstatus/pull-request-model","jira/devstatus/pull-request-view"],function(e,u,t){return e.extend({model:u,viewType:t})}),Backbone.define("JIRA.DevStatus.PullRequestModule",require("jira/devstatus/pull-request-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/review/ReviewModel.js' */
"use strict";define("jira/devstatus/review-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"review"})}),Backbone.define("JIRA.DevStatus.ReviewModel",require("jira/devstatus/review-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'jira-development-integration-plugin/templates/viewissue/review/devstatus-panel-review.soy' */
// This file was automatically generated from devstatus-panel-review.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Review.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Review == 'undefined') { JIRA.Templates.DevStatus.Review = {}; }


JIRA.Templates.DevStatus.Review.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Reviews related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.reviewsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.Review.reviewDate(soy.$$augmentMap(opt_data, {showUpdatedText: true})) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Review.summaryPanel';
}


JIRA.Templates.DevStatus.Review.reviewDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.dueDate && ! opt_data.completed) ? JIRA.Templates.DevStatus.lastUpdated({text: 'Due', lastUpdated: opt_data.dueDate, extraClass: opt_data.overDue ? 'overdue' : undefined, datetimeFormat: 'fullAge'}) : (opt_data.lastUpdated) ? JIRA.Templates.DevStatus.lastUpdated({text: opt_data.showUpdatedText ? 'Updated' : '', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.reviewDate.soyTemplateName = 'JIRA.Templates.DevStatus.Review.reviewDate';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/review/ReviewView.js' */
"use strict";define("jira/devstatus/review-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,i){return t.extend({template:JIRA.Templates.DevStatus.Review.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;i.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-review-view");a.detailDialogReviewView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-review-detail-dialog",count:a.model.getOverall().count,reviewersThreshold:2,completed:a.model.getOverall().completed})),JIRA.DevStatus.ReviewsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogReviewView.show()})}})}),Backbone.define("JIRA.DevStatus.ReviewView",require("jira/devstatus/review-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/review/ReviewModule.js' */
"use strict";define("jira/devstatus/review-module",["jira/devstatus/base-summary-module","jira/devstatus/review-model","jira/devstatus/review-view"],function(e,i,t){return e.extend({model:i,viewType:t})}),Backbone.define("JIRA.DevStatus.ReviewModule",require("jira/devstatus/review-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/branch/BranchModel.js' */
"use strict";define("jira/devstatus/branch-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"branch"})}),Backbone.define("JIRA.DevStatus.BranchModel",require("jira/devstatus/branch-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'jira-development-integration-plugin/templates/viewissue/branch/devstatus-panel-branch.soy' */
// This file was automatically generated from devstatus-panel-branch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Branches.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Branches == 'undefined') { JIRA.Templates.DevStatus.Branches = {}; }


JIRA.Templates.DevStatus.Branches.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Branches related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.branches(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Updated', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Branches.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Branches.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/branch/BranchView.js' */
"use strict";define("jira/devstatus/branch-view",["require","underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,a,t,i){return t.extend({template:JIRA.Templates.DevStatus.Branches.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var r=this;i.requireDetailDialogResources(function(){var t=e("jira/devstatus/detail-dialog-branch-view");r.detailDialogBranchView=new t(a.extend(r.getDefaultDetailDialogParameters(),{id:"devstatus-branch-detail-dialog",count:r.model.getOverall().count,analyticIssueData:r.options.analyticsModel.getIssue()})),JIRA.DevStatus.BranchesAnalytics.fireSummaryClickedEvent(r.options.analyticsModel.getSummary()),r.detailDialogBranchView.show()})}})}),Backbone.define("JIRA.DevStatus.BranchView",require("jira/devstatus/branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/branch/BranchModule.js' */
"use strict";define("jira/devstatus/branch-module",["jira/devstatus/base-summary-module","jira/devstatus/branch-model","jira/devstatus/branch-view"],function(e,a,t){return e.extend({model:a,viewType:t})}),Backbone.define("JIRA.DevStatus.BranchModule",require("jira/devstatus/branch-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/build/BuildModel.js' */
"use strict";define("jira/devstatus/build-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"build"})}),Backbone.define("JIRA.DevStatus.BuildModel",require("jira/devstatus/build-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'jira-development-integration-plugin/templates/viewissue/build/devstatus-panel-build.soy' */
// This file was automatically generated from devstatus-panel-build.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Build.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Build == 'undefined') { JIRA.Templates.DevStatus.Build = {}; }


JIRA.Templates.DevStatus.Build.summaryPanel = function(opt_data, opt_ignored) {
  var output = '<dl><dt>';
  var param4 = '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Builds related to {0}',opt_data.issueKey)) + '">';
  var countText__soy8 = '' + JIRA.Templates.FusionWidget.Common.buildsText(opt_data);
  param4 += soy.$$filterNoAutoescape(countText__soy8) + '</a> ' + JIRA.Templates.DevStatus.Build.statusIcon(opt_data) + '</div>';
  output += JIRA.Templates.DevStatus.transitionContainer({content: param4});
  output += '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Latest', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Build.summaryPanel';
}


JIRA.Templates.DevStatus.Build.statusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var iconClass__soy27 = '' + JIRA.Templates.FusionWidget.Common.buildsIconClass(opt_data);
  output += '<span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(iconClass__soy27) + '">' + soy.$$escapeHtml(opt_data.iconText) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.statusIcon.soyTemplateName = 'JIRA.Templates.DevStatus.Build.statusIcon';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/build/BuildView.js' */
"use strict";define("jira/devstatus/build-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,i,t){return i.extend({template:JIRA.Templates.DevStatus.Build.summaryPanel,_onSummaryLinkClick:function(i){i.preventDefault();var a=this;t.requireDetailDialogResources(function(){var i=require("jira/devstatus/detail-dialog-build-view");a.detailDialogBuildView=new i(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-build-detail-dialog",count:a.model.getOverall().count})),JIRA.DevStatus.BuildsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogBuildView.show()})}})}),Backbone.define("JIRA.DevStatus.BuildView",require("jira/devstatus/build-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/build/BuildModule.js' */
"use strict";define("jira/devstatus/build-module",["jira/devstatus/base-summary-module","jira/devstatus/build-model","jira/devstatus/build-view"],function(e,u,d){return e.extend({model:u,viewType:d})}),Backbone.define("JIRA.DevStatus.BuildModule",require("jira/devstatus/build-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/deployment/DeploymentModel.js' */
"use strict";define("jira/devstatus/deployment-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"deployment-environment"})}),Backbone.define("JIRA.DevStatus.DeploymentModel",require("jira/devstatus/deployment-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'jira-development-integration-plugin/templates/viewissue/deployment/devstatus-panel-deployment.soy' */
// This file was automatically generated from devstatus-panel-deployment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Deployment.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Deployment == 'undefined') { JIRA.Templates.DevStatus.Deployment = {}; }


JIRA.Templates.DevStatus.Deployment.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dd>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content" title="' + soy.$$escapeHtml(AJS.format('Deployments related to {0}',opt_data.issueKey)) + '">' + ((opt_data.topEnvironments.length) ? JIRA.Templates.FusionWidget.Common.deployments({anchorStart: '<a class="summary">', anchorEnd: '</a>', showProjects: opt_data.showProjects, successfulCount: opt_data.successfulCount, topEnvironments: opt_data.topEnvironments}) : soy.$$escapeHtml('No deployments contain latest commits')) + '</div>'}) + '</dd></dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Deployment.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Deployment.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/deployment/DeploymentView.js' */
"use strict";define("jira/devstatus/deployment-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,a){return t.extend({template:JIRA.Templates.DevStatus.Deployment.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var i=this;a.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-deployment-view");i.detailDialogDeploymentView=new t(e.extend(i.getDefaultDetailDialogParameters(),{id:"devstatus-deployment-detail-dialog",count:i.model.getOverall().count})),JIRA.DevStatus.DeploymentsAnalytics.fireSummaryClickedEvent(i.options.analyticsModel.getSummary()),i.detailDialogDeploymentView.show()})}})}),Backbone.define("JIRA.DevStatus.DeploymentView",require("jira/devstatus/deployment-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'jira-development-integration-plugin/js/viewissue/summary/deployment/DeploymentModule.js' */
"use strict";define("jira/devstatus/deployment-module",["jira/devstatus/base-summary-module","jira/devstatus/deployment-model","jira/devstatus/deployment-view"],function(e,t,d){return e.extend({model:t,viewType:d})}),Backbone.define("JIRA.DevStatus.DeploymentModule",require("jira/devstatus/deployment-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-cta-tooltip-resources', location = 'jira-development-integration-plugin/templates/viewissue/devstatus-cta-tooltips.soy' */
// This file was automatically generated from devstatus-cta-tooltips.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Tooltip.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Tooltip == 'undefined') { JIRA.Templates.DevStatus.Tooltip = {}; }


JIRA.Templates.DevStatus.Tooltip.createBranch = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'create-branch', content: '<span class="branch-illustration"></span><div class="branch-text"><p>' + soy.$$escapeHtml('Create a branch for this issue in your source repository') + '.<br /> <a class="cta-learn-more-link" href="https://www.atlassian.com/git/workflows" target="_blank">' + soy.$$escapeHtml('Learn more about branching strategies') + '.</a></p></div>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.createBranch.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.createBranch';
}


JIRA.Templates.DevStatus.Tooltip.automaticTransitions = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'dev-summary-automatic-transitions', content: '<p>' + soy.$$escapeHtml('Now JIRA can automatically update your issue status when pull requests and other actions occur.') + '</p><p><a href="' + soy.$$escapeHtml(opt_data.aitHelpLinkUrl.url) + '" id="trigger-docs-link" target="_blank" title="' + soy.$$escapeHtml('Learn about automating your workflow') + '">' + soy.$$escapeHtml('Learn about automating your workflow') + '</a></p>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.automaticTransitions.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.automaticTransitions';
}


JIRA.Templates.DevStatus.Tooltip.tooltipLayout = function(opt_data, opt_ignored) {
  return '<div class="cta-tooltip' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.tooltipLayout.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.tooltipLayout';
}
;
;
/* module-key = 'com.atlassian.plugin.jslibs:bluebird-2.3.6', location = 'atlassian-jslibs/libs/bluebird/js/browser/bluebird.js' */
!function(t){define("atlassian/libs/bluebird-2.3.6",function(){var e={};return t(e),"undefined"!=typeof exports?module.exports.noConflict():e.Promise.noConflict()})}(function(t){/**
 * @preserve The MIT License (MIT)
 *
 * Copyright (c) 2014 Petka Antonov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;"undefined"!=typeof t?r=t:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.Promise=e()}}(function(){var t,e,r;return function t(e,r,i){function n(s,a){if(!r[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){var r=e[s][1][t];return n(r?r:t)},u,u.exports,t,e,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,r){"use strict";e.exports=function(t){function e(t){var e=new r(t),i=e.promise();return i.isRejected()?i:(e.setHowMany(1),e.setUnwrap(),e.init(),i)}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,r){"use strict";function i(){this._isTickUsed=!1,this._schedule=n,this._length=0,this._lateBuffer=new o(16),this._functionBuffer=new o(65536);var t=this;this.consumeFunctionBuffer=function(){t._consumeFunctionBuffer()}}var n=t("./schedule.js"),o=t("./queue.js"),s=t("./util.js").errorObj,a=t("./util.js").tryCatch1,c="undefined"!=typeof process?process:void 0;i.prototype.haveItemsQueued=function(){return this._length>0},i.prototype.invokeLater=function(t,e,r){void 0===c||null==c.domain||t.domain||(t=c.domain.bind(t)),this._lateBuffer.push(t,e,r),this._queueTick()},i.prototype.invoke=function(t,e,r){void 0===c||null==c.domain||t.domain||(t=c.domain.bind(t));var i=this._functionBuffer;i.push(t,e,r),this._length=i.length(),this._queueTick()},i.prototype._consumeFunctionBuffer=function(){for(var t=this._functionBuffer;t.length()>0;){var e=t.shift(),r=t.shift(),i=t.shift();e.call(r,i)}this._reset(),this._consumeLateBuffer()},i.prototype._consumeLateBuffer=function(){for(var t=this._lateBuffer;t.length()>0;){var e=t.shift(),r=t.shift(),i=t.shift(),n=a(e,r,i);if(n===s){if(this._queueTick(),null==e.domain)throw n.e;e.domain.emit("error",n.e)}}},i.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},i.prototype._reset=function(){this._isTickUsed=!1,this._length=0},e.exports=new i},{"./queue.js":25,"./schedule.js":28,"./util.js":35}],3:[function(t,e,r){"use strict";var i=t("./promise.js")();e.exports=i},{"./promise.js":20}],4:[function(t,e,r){"use strict";var i=Object.create;if(i){var n=i(null),o=i(null);n[" size"]=o[" size"]=0}e.exports=function(e){function r(t){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,t))}function i(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))}function s(t,e,r){var i=r[t];if("function"!=typeof i){if(!_(t))return null;if(i=e(t),r[t]=i,r[" size"]++,r[" size"]>512){for(var n=Object.keys(r),o=0;o<256;++o)delete r[n[o]];r[" size"]=n.length-256}}return i}function a(t){return s(t,r,n)}function c(t){return s(t,i,o)}function u(t){return t[this.pop()].apply(t,this)}function l(t){return t[this]}function h(t){return t[this]}var f=t("./util.js"),p=f.canEvaluate,_=f.isIdentifier;e.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),i=1;i<e;++i)r[i-1]=arguments[i];if(p){var n=a(t);if(null!==n)return this._then(n,void 0,void 0,r,void 0)}return r.push(t),this._then(u,void 0,void 0,r,void 0)},e.prototype.get=function(t){var e,r="number"==typeof t;if(r)e=h;else if(p){var i=c(t);e=null!==i?i:l}else e=l;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":35}],5:[function(t,e,r){"use strict";e.exports=function(e,r){var i=t("./errors.js"),n=i.canAttach,o=t("./async.js"),s=i.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;r._attachExtraTrace(t),r._rejectUnchecked(t)},e.prototype.cancel=function(t){return this.isCancellable()?(t=void 0!==t?n(t)?t:new Error(t+""):new s,o.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=new e(r);return t._propagateFrom(this,6),t._follow(this),t._unsetCancellable(),t},e.prototype.fork=function(t,e,r){var i=this._then(t,e,r,void 0,void 0);return i._setCancellable(),i._cancellationParent=void 0,i}}},{"./async.js":2,"./errors.js":10}],6:[function(t,e,r){"use strict";e.exports=function(){function e(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var i=/\[object [a-zA-Z0-9$_]+\]/;if(i.test(e))try{var n=JSON.stringify(t);e=n}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+r(e)+">, no stack trace)"}function r(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function i(t,e){this.captureStackTrace(i,e)}var n=t("./util.js").inherits,o=t("./es5.js").defineProperty,s=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),a=null,c=null;n(i,Error),i.prototype.captureStackTrace=function(t,e){u(this,t,e)},i.possiblyUnhandledRejection=function(t){if("object"==typeof console){var e;if("object"==typeof t||"function"==typeof t){var r=t.stack;e="Possibly unhandled "+c(r,t)}else e="Possibly unhandled "+String(t);"function"==typeof console.error||"object"==typeof console.error?console.error(e):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(e)}},i.combine=function(t,e){for(var r=t.length-1,i=e.length-1;i>=0;--i){var n=e[i];if(t[r]!==n)break;t.pop(),r--}t.push("From previous event:");for(var o=t.concat(e),c=[],i=0,u=o.length;i<u;++i)s.test(o[i])&&a.test(o[i])||i>0&&!a.test(o[i])&&"From previous event:"!==o[i]||c.push(o[i]);return c},i.protectErrorMessageNewlines=function(t){for(var e=0;e<t.length&&!a.test(t[e]);++e);if(!(e<=1)){for(var r=[],i=0;i<e;++i)r.push(t.shift());t.unshift(r.join("\0"))}},i.isSupported=function(){return"function"==typeof u};var u=function t(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){a=/^\s*at\s*/,c=function(t,r){return"string"==typeof t?t:void 0!==r.name&&void 0!==r.message?r.name+". "+r.message:e(r)};var r=Error.captureStackTrace;return function(t,e){r(t,e)}}var i=new Error;if("string"==typeof i.stack&&"function"==typeof"".startsWith&&i.stack.startsWith("stackDetection@")&&"stackDetection"===t.name){o(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),a=/@/;var n=/[@\n]/;return c=function(t,r){return"string"==typeof t?r.name+". "+r.message+"\n"+t:void 0!==r.name&&void 0!==r.message?r.name+". "+r.message:e(r)},function(t){for(var e=(new Error).stack,r=e.split(n),i=r.length,o="",s=0;s<i;s+=2)o+=r[s],o+="@",o+=r[s+1],o+="\n";t.stack=o}}return c=function(t,r){return"string"==typeof t?t:"object"!=typeof r&&"function"!=typeof r||void 0===r.name||void 0===r.message?e(r):r.name+". "+r.message},null}();return i}},{"./es5.js":12,"./util.js":35}],7:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}function i(t,e){var r={},i=s(t,r,e);if(i===a)return i;var n=c(r);return n.length?(a.e=new u("Catch filter must inherit from Error or be a simple predicate function"),a):i}var n=t("./util.js"),o=t("./errors.js"),s=n.tryCatch1,a=n.errorObj,c=t("./es5.js").keys,u=o.TypeError;return r.prototype.doFilter=function(t){for(var r=this._callback,n=this._promise,c=n._boundTo,u=0,l=this._instances.length;u<l;++u){var h=this._instances[u],f=h===Error||null!=h&&h.prototype instanceof Error;if(f&&t instanceof h){var p=s(r,c,t);return p===a?(e.e=p.e,e):p}if("function"==typeof h&&!f){var _=i(h,t);if(_===a){var d=o.canAttach(a.e)?a.e:new Error(a.e+"");this._promise._attachExtraTrace(d),t=a.e;break}if(_){var p=s(r,c,t);return p===a?(e.e=p.e,e):p}}}return e.e=t,e},r}},{"./errors.js":10,"./es5.js":12,"./util.js":35}],8:[function(t,e,r){"use strict";var i=t("./util.js"),n=i.isPrimitive,o=i.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},r=function(){throw this},i=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype.return=t.prototype.thenReturn=function(t){return o&&n(t)?this._then(i(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return o&&n(t)?this._then(i(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":35}],9:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,i){return r(t,i,null,e)}}},{}],10:[function(t,e,r){"use strict";function i(t){try{_(t,"isOperational",!0)}catch(t){}}function n(t){return null!=t&&(t instanceof c||t.isOperational===!0)}function o(t){return t instanceof Error}function s(t){return o(t)}function a(t,e){function r(i){return this instanceof r?(this.message="string"==typeof i?i:e,this.name=t,void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(i)}return p(r,Error),r}function c(t){this.name="OperationalError",this.message=t,this.cause=t,this.isOperational=!0,t instanceof Error?(this.message=t.message,this.stack=t.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var u,l,h=t("./es5.js").freeze,f=t("./util.js"),p=f.inherits,_=f.notEnumerableProp,d=a("CancellationError","cancellation error"),v=a("TimeoutError","timeout error"),y=a("AggregateError","aggregate error");try{u=TypeError,l=RangeError}catch(t){u=a("TypeError","type error"),l=a("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(y.prototype[m[g]]=Array.prototype[m[g]]);y.prototype.length=0,y.prototype.isOperational=!0;var j=0;y.prototype.toString=function(){var t=Array(4*j+1).join(" "),e="\n"+t+"AggregateError of:\n";j++,t=Array(4*j+1).join(" ");for(var r=0;r<this.length;++r){for(var i=this[r]===this?"[Circular AggregateError]":this[r]+"",n=i.split("\n"),o=0;o<n.length;++o)n[o]=t+n[o];i=n.join("\n"),e+=i+"\n"}return j--,e},p(c,Error);var b="__BluebirdErrorTypes__",w=Error[b];w||(w=h({CancellationError:d,TimeoutError:v,OperationalError:c,RejectionError:c,AggregateError:y}),_(Error,b,w)),e.exports={Error:Error,TypeError:u,RangeError:l,CancellationError:w.CancellationError,OperationalError:w.OperationalError,TimeoutError:w.TimeoutError,AggregateError:w.AggregateError,originatesFromRejection:n,markAsOriginatingFromRejection:i,canAttach:s}},{"./es5.js":12,"./util.js":35}],11:[function(t,e,r){"use strict";e.exports=function(e){function r(t){var r=new i(t),n=e.rejected(r),o=n._peekContext();return null!=o&&o._attachExtraTrace(r),n}var i=t("./errors.js").TypeError;return r}},{"./errors.js":10}],12:[function(t,e,r){var i=function(){"use strict";return void 0===this}();if(i)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i};else{var n={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e},c=function(t,e,r){return t[e]=r.value,t},u=function(t){return t},l=function(t){try{return Object(t).constructor.prototype}catch(t){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}};e.exports={isArray:h,keys:a,defineProperty:c,freeze:u,getPrototypeOf:l,isES5:i}}},{}],13:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,i){return r(this,t,i,e)},t.filter=function(t,i,n){return r(t,i,n,e)}}},{}],14:[function(t,e,r){"use strict";e.exports=function(e,r,i){function n(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function c(t,e,r){var i;return i=f&&p(e)?r?s(e):a(e):r?n:o,t._then(i,_,void 0,e,void 0)}function u(t){var n=this.promise,o=this.handler,s=n._isBound()?o.call(n._boundTo):o();if(void 0!==s){var a=i(s,void 0);if(a instanceof e)return c(a,t,n.isFulfilled())}return n.isRejected()?(r.e=t,r):t}function l(t){var r=this.promise,n=this.handler,o=r._isBound()?n.call(r._boundTo,t):n(t);if(void 0!==o){var s=i(o,void 0);if(s instanceof e)return c(s,t,!0)}return t}var h=t("./util.js"),f=h.wrapsPrimitiveReceiver,p=h.isPrimitive,_=h.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?u:l,e?u:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":35}],15:[function(t,e,r){"use strict";e.exports=function(e,r,i,n){function o(t,r){for(var i=h,s=e,a=r.length,c=0;c<a;++c){var u=f(r[c],void 0,t);if(u===i)return s.reject(i.e);var l=n(u,o);if(l instanceof s)return l}return null}function s(t,r,n){var o=this._promise=new e(i);o._setTrace(void 0),this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof n?[n].concat(p):p}var a=t("./errors.js"),c=a.TypeError,u=t("./util.js").deprecated,l=t("./util.js"),h=l.errorObj,f=l.tryCatch1,p=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===h){this._generator=void 0;var r=a.canAttach(t.e)?t.e:new Error(t.e+"");return this._promise._attachExtraTrace(r),void this._promise._reject(t.e,r)}var i=t.value;if(t.done===!0)this._generator=void 0,this._promise._tryFollow(i)||this._promise._fulfill(i);else{var s=n(i,void 0);if(!(s instanceof e)&&(s=o(s,this._yieldHandlers),null===s))return void this._throw(new c("A value was yielded that could not be treated as a promise"));s._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){a.canAttach(t)&&this._promise._attachExtraTrace(t),this._continue(f(this._generator.throw,this._generator,t))},s.prototype._next=function(t){this._continue(f(this._generator.next,this._generator,t))},e.coroutine=function(t,e){if("function"!=typeof t)throw new c("generatorFunction must be a function");var r=Object(e).yieldHandler,i=s;return function(){var e=t.apply(this,arguments),n=new i((void 0),(void 0),r);return n._generator=e,n._next(void 0),n.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new c("fn must be a function");p.push(t)},e.spawn=function(t){if(u("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof t)return r("generatorFunction must be a function");var i=new s(t,this),n=i.promise();return i._run(e.spawn),n}}},{"./errors.js":10,"./util.js":35}],16:[function(t,e,r){"use strict";e.exports=function(e,r,i,n){var o=t("./util.js"),s=o.canEvaluate,a=o.tryCatch1,c=o.errorObj;if(s){for(var u=function(t){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))},l=function(t){for(var e=[],r=1;r<=t;++r)e.push("holder.p"+r);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,e.join(", ")))},h=[],f=[void 0],p=1;p<=5;++p)h.push(u(p)),f.push(l(p));var _=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};_.prototype.callers=f,_.prototype.checkFulfillment=function(t){var e=this.now;e++;var r=this.total;if(e>=r){var i=this.callers[r],n=a(i,void 0,this);n===c?t._rejectUnchecked(n.e):t._tryFollow(n)||t._fulfillUnchecked(n)}else this.now=e}}e.join=function(){var t,o=arguments.length-1;if(o>0&&"function"==typeof arguments[o]&&(t=arguments[o],o<6&&s)){var a=new e(n);a._setTrace(void 0);for(var c=new _(o,t),u=a._reject,l=h,f=0;f<o;++f){var p=i(arguments[f],void 0);p instanceof e?p.isPending()?p._then(l[f],u,void 0,a,c):p.isFulfilled()?l[f].call(a,p._settledValue,c):(a._reject(p._settledValue),p._unsetRejectionIsUnhandled()):l[f].call(a,p,c)}return a}for(var d=arguments.length,v=new Array(d),y=0;y<d;++y)v[y]=arguments[y];var a=new r(v).promise();return void 0!==t?a.spread(t):a}}},{"./util.js":35}],17:[function(t,e,r){"use strict";e.exports=function(e,r,i,n,o){function s(t,e,r,i){this.constructor$(t),this._callback=e,this._preservedValues=i===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:f,this._init$(void 0,-2)}function a(t,e,r,i){var n="object"==typeof r&&null!==r?r.concurrency:0;return n="number"==typeof n&&isFinite(n)&&n>=1?n:0,new s(t,e,n,i)}var c=t("./util.js"),u=c.tryCatch3,l=c.errorObj,h={},f=[];c.inherits(s,r),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,r){var i=this._values;if(null!==i){var o=this.length(),s=this._preservedValues,a=this._limit;if(i[r]===h){if(i[r]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return i[r]=t,void this._queue.push(r);null!==s&&(s[r]=t);var c=this._callback,f=this._promise._boundTo,p=u(c,f,t,r,o);if(p===l)return this._reject(p.e);var _=n(p,void 0);if(_ instanceof e){if(_.isPending())return a>=1&&this._inFlight++,i[r]=h,_._proxyPromiseArray(this,r);if(!_.isFulfilled())return _._unsetRejectionIsUnhandled(),this._reject(_.reason());p=_.value()}i[r]=p}var d=++this._totalResolved;d>=o&&(null!==s?this._filter(i,s):this._resolve(i))}},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){var i=t.pop();this._promiseFulfilled(r[i],i)}},s.prototype._filter=function(t,e){for(var r=e.length,i=new Array(r),n=0,o=0;o<r;++o)t[o]&&(i[n++]=e[o]);i.length=n,this._resolve(i)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?i("fn must be a function"):a(this,t,e,null).promise()},e.map=function(t,e,r,n){return"function"!=typeof e?i("fn must be a function"):a(t,e,r,n).promise()}}},{"./util.js":35}],18:[function(t,e,r){"use strict";e.exports=function(e){function r(t){throw t}function i(t,e){if(!s.isArray(t))return n(t,e);var i=s.tryCatchApply(this,[null].concat(t),e);i===l&&a.invokeLater(r,void 0,i.e)}function n(t,e){var i=this,n=void 0===t?u(i,e,null):c(i,e,null,t);n===l&&a.invokeLater(r,void 0,n.e)}function o(t,e){var i=this,n=u(i,e,t);n===l&&a.invokeLater(r,void 0,n.e)}var s=t("./util.js"),a=t("./async.js"),c=s.tryCatch2,u=s.tryCatch1,l=s.errorObj;e.prototype.nodeify=function(t,e){if("function"==typeof t){var r=n;void 0!==e&&Object(e).spread&&(r=i),this._then(r,o,void 0,t,this._boundTo)}return this}}},{"./async.js":2,"./util.js":35}],19:[function(t,e,r){"use strict";e.exports=function(e,r){var i=t("./util.js"),n=t("./async.js"),o=t("./errors.js"),s=i.tryCatch1,a=i.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(t)},e.prototype._clearFirstHandlerData$Base=e.prototype._clearFirstHandlerData,e.prototype._clearFirstHandlerData=function(){this._clearFirstHandlerData$Base(),this._progressHandler0=void 0},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var r=t.value,i=t.handler,n=t.promise,c=t.receiver,u=s(i,c,r);if(u===a){if(null!=u.e&&"StopProgressPropagation"!==u.e.name){var l=o.canAttach(u.e)?u.e:new Error(u.e+"");n._attachExtraTrace(l),n._progress(u.e)}}else u instanceof e?u._then(n._progress,null,null,n,void 0):n._progress(u)},e.prototype._progressUnchecked=function(t){if(this.isPending())for(var i=this._length(),o=this._progress,s=0;s<i;s++){var a=this._progressHandlerAt(s),c=this._promiseAt(s);if(c instanceof e)"function"==typeof a?n.invoke(this._doProgressWith,this,{handler:a,promise:c,receiver:this._receiverAt(s),value:t}):n.invoke(o,c,t);else{var u=this._receiverAt(s);"function"==typeof a?a.call(u,t,c):u instanceof e&&u._isProxied()?u._progressUnchecked(t):u instanceof r&&u._promiseProgressed(t,c)}}}}},{"./async.js":2,"./errors.js":10,"./util.js":35}],20:[function(t,e,r){"use strict";function i(t){try{Promise===t&&(Promise=n)}catch(t){}return t}var n;"undefined"!=typeof Promise&&(n=Promise),e.exports=function(){function e(t){if("function"!=typeof t)throw new w("the promise constructor requires a resolver function");if(this.constructor!==e)throw new w("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,t!==c&&this._resolveFromResolver(t)}function r(t){return t[0]}function n(){return new e.PromiseInspection(this)}var o=t("./util.js"),s=t("./async.js"),a=t("./errors.js"),c=function(){},u={},l={e:null},h=t("./thenables.js")(e,c),f=t("./promise_array.js")(e,c,h),p=t("./captured_trace.js")(),_=t("./catch_filter.js")(l),d=t("./promise_resolver.js"),v=o.isArray,y=o.errorObj,m=o.tryCatch1,g=o.tryCatch2,j=o.tryCatchApply,b=a.RangeError,w=a.TypeError,F=a.CancellationError,k=a.TimeoutError,E=a.OperationalError,P=a.originatesFromRejection,T=a.markAsOriginatingFromRejection,R=a.canAttach,x=o.thrower,A=t("./errors_api_rejection")(e),C=function(){return new w("circular promise resolution chain")};e.prototype.bind=function(t){var i=h(t,void 0),n=new e(c);if(i instanceof e){var o=i.then(function(t){n._setBoundTo(t)}),s=e.all([this,o]).then(r);n._follow(s)}else n._follow(this),n._setBoundTo(t);return n._propagateFrom(this,3),n},e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype.catch=function(t){var r=arguments.length;if(r>1){var i,n=new Array(r-1),o=0;for(i=0;i<r-1;++i){var s=arguments[i];if("function"!=typeof s){var a=new w("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(a),e.reject(a)}n[o++]=s}n.length=o,t=arguments[i],this._resetTrace();var c=new _(n,t,this);return this._then(void 0,c.doFilter,void 0,c,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(n,n,void 0,this,void 0)},e.prototype.then=function(t,e,r){return this._then(t,e,r,void 0,void 0)},e.prototype.done=function(t,e,r){var i=this._then(t,e,r,void 0,void 0);i._setIsFinal()},e.prototype.spread=function(t,e){return this._then(t,e,void 0,u,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this._settledValue,t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this._settledValue,t.isRejected=!0),t},e.prototype.all=function(){return new f(this).promise()},e.is=function(t){return t instanceof e},e.all=function(t){return new f(t).promise()},e.prototype.error=function(t){return this.caught(P,t)},e.prototype._resolveFromSyncValue=function(t){if(t===y)this._cleanValues(),this._setRejected(),this._settledValue=t.e,this._ensurePossibleRejectionHandled();else{var r=h(t,void 0);r instanceof e?this._follow(r):(this._cleanValues(),this._setFulfilled(),this._settledValue=t)}},e.method=function(t){if("function"!=typeof t)throw new w("fn must be a function");return function(){var r;switch(arguments.length){case 0:r=m(t,this,void 0);break;case 1:r=m(t,this,arguments[0]);break;case 2:r=g(t,this,arguments[0],arguments[1]);break;default:for(var i=arguments.length,n=new Array(i),o=0;o<i;++o)n[o]=arguments[o];r=j(t,n,this)}var s=new e(c);return s._setTrace(void 0),s._resolveFromSyncValue(r),s}},e.attempt=e.try=function(t,r,i){if("function"!=typeof t)return A("fn must be a function");var n=v(r)?j(t,r,i):m(t,i,r),o=new e(c);return o._setTrace(void 0),o._resolveFromSyncValue(n),o},e.defer=e.pending=function(){var t=new e(c);return t._setTrace(void 0),new d(t)},e.bind=function(t){var r=h(t,void 0),i=new e(c);if(i._setTrace(void 0),r instanceof e){var n=r.then(function(t){i._setBoundTo(t)});i._follow(n)}else i._setBoundTo(t),i._setFulfilled();return i},e.cast=function(t){var r=h(t,void 0);if(!(r instanceof e)){var i=r;r=new e(c),r._setTrace(void 0),r._setFulfilled(),r._cleanValues(),r._settledValue=i}return r},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var r=new e(c);if(r._setTrace(void 0),T(t),r._cleanValues(),r._setRejected(),r._settledValue=t,!R(t)){var i=new Error(t+"");r._setCarriedStackTrace(i)}return r._ensurePossibleRejectionHandled(),r},e.onPossiblyUnhandledRejection=function(t){p.possiblyUnhandledRejection="function"==typeof t?t:void 0};var O;e.onUnhandledRejectionHandled=function(t){O="function"==typeof t?t:void 0};var S=!("undefined"==typeof process||"string"!=typeof process.execPath||"object"!=typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);e.longStackTraces=function(){if(s.haveItemsQueued()&&S===!1)throw new Error("cannot enable long stack traces after promises have been created");S=p.isSupported()},e.hasLongStackTraces=function(){return S&&p.isSupported()},e.prototype._then=function(t,r,i,n,o){var a=void 0!==o,u=a?o:new e(c);if(!a){if(S){var l=this._peekContext()===this._traceParent;u._traceParent=l?this._traceParent:this}u._propagateFrom(this,7)}var h=this._addCallbacks(t,r,i,u,n);return this.isResolved()&&s.invoke(this._queueSettleAt,this,h),u},e.prototype._length=function(){return 262143&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=this._bitField&-262144|262143&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=this._bitField&-67108865},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-2097153,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-524289},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},e.prototype._unsetCarriedStackTrace=function(){this._bitField=this._bitField&-1048577,this._fulfillmentHandler0=void 0},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[(t<<2)+t-5+4];return this._isBound()&&void 0===e?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[(t<<2)+t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[(t<<2)+t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[(t<<2)+t-5+1]},e.prototype._addCallbacks=function(t,e,r,i,n){var o=this._length();if(o>=262138&&(o=0,this._setLength(0)),0===o)this._promise0=i,void 0!==n&&(this._receiver0=n),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof r&&(this._progressHandler0=r);else{var s=(o<<2)+o-5;this[s+3]=i,this[s+4]=n,this[s+0]="function"==typeof t?t:void 0,this[s+1]="function"==typeof e?e:void 0,this[s+2]="function"==typeof r?r:void 0}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=262138&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var i=(r<<2)+r-5;this[i+3]=e,this[i+4]=t,this[i+0]=this[i+1]=this[i+2]=void 0}this._setLength(r+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._proxyPromise=function(t){t._setProxied(),this._setProxyHandlers(t,-15)},e.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=8388608|this._bitField,this._boundTo=t):this._bitField=this._bitField&-8388609},e.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},e.prototype._resolveFromResolver=function(t){function e(t){i._tryFollow(t)||i._fulfill(t)}function r(t){var e=R(t)?t:new Error(t+"");i._attachExtraTrace(e),T(t),i._reject(t,e===t?void 0:e)}var i=this;this._setTrace(void 0),this._pushContext();var n=g(t,void 0,e,r);if(this._popContext(),void 0!==n&&n===y){var o=n.e,s=R(o)?o:new Error(o+"");i._reject(o,s)}},e.prototype._spreadSlowCase=function(t,e,r,i){var n=new f(r).promise(),o=n._then(function(){return t.apply(i,arguments)},void 0,void 0,u,void 0);e._follow(o)},e.prototype._callSpread=function(t,r,i){var n=this._boundTo;if(v(i))for(var o=0,s=i.length;o<s;++o)if(h(i[o],void 0)instanceof e)return void this._spreadSlowCase(t,r,i,n);return r._pushContext(),j(t,i,n)},e.prototype._callHandler=function(t,e,r,i){var n;return e!==u||this.isRejected()?(r._pushContext(),n=m(t,e,i)):n=this._callSpread(t,r,i),r._popContext(),n},e.prototype._settlePromiseFromHandler=function(t,r,i,n){if(!(n instanceof e))return void t.call(r,i,n);var o=this._callHandler(t,r,n,i);if(!n._isFollowing())if(o===y||o===n||o===l){var s=o===n?C():o.e,a=R(s)?s:new Error(s+"");o!==l&&n._attachExtraTrace(a),n._rejectUnchecked(s,a);
}else{var c=h(o,n);if(c instanceof e){if(c.isRejected()&&!c._isCarryingStackTrace()&&!R(c._settledValue)){var a=new Error(c._settledValue+"");n._attachExtraTrace(a),c._setCarriedStackTrace(a)}n._follow(c),n._propagateFrom(c,1)}else n._fulfillUnchecked(o)}},e.prototype._follow=function(t){this._setFollowing(),t.isPending()?(this._propagateFrom(t,1),t._proxyPromise(this)):t.isFulfilled()?this._fulfillUnchecked(t._settledValue):this._rejectUnchecked(t._settledValue,t._getCarriedStackTrace()),t._isRejectionUnhandled()&&t._unsetRejectionIsUnhandled(),S&&null==t._traceParent&&(t._traceParent=this)},e.prototype._tryFollow=function(t){if(this._isFollowingOrFulfilledOrRejected()||t===this)return!1;var r=h(t,void 0);return r instanceof e&&(this._follow(r),!0)},e.prototype._resetTrace=function(){S&&(this._trace=new p(void 0===this._peekContext()))},e.prototype._setTrace=function(t){if(S){var e=this._peekContext();this._traceParent=e;var r=void 0===e;void 0!==t&&t._traceParent===e?this._trace=t._trace:this._trace=new p(r)}return this},e.prototype._attachExtraTrace=function(t){if(S){var e=this,r=t.stack;r="string"==typeof r?r.split("\n"):[],p.protectErrorMessageNewlines(r);for(var i=1,n=1;null!=e&&null!=e._trace;)r=p.combine(r,e._trace.stack.split("\n")),e=e._traceParent,n++;var o=Error.stackTraceLimit||10,s=(o+i)*n,a=r.length;a>s&&(r.length=s),a>0&&(r[0]=r[0].split("\0").join("\n")),r.length<=i?t.stack="(No stack trace)":t.stack=r.join("\n")}},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&this._setBoundTo(t._boundTo),(2&e)>0&&this._setTrace(t)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var r=this.isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),i=this._settledValue,n=this._receiverAt(t),o=this._promiseAt(t);if("function"==typeof r)this._settlePromiseFromHandler(r,n,i,o);else{var s=!1,a=this.isFulfilled();void 0!==n&&(n instanceof e&&n._isProxied()?(n._unsetProxied(),a?n._fulfillUnchecked(i):n._rejectUnchecked(i,this._getCarriedStackTrace()),s=!0):n instanceof f&&(a?n._promiseFulfilled(i,o):n._promiseRejected(i,o),s=!0)),s||(a?o._fulfill(i):o._reject(i,this._getCarriedStackTrace()))}t>=4&&this._queueGC()},e.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},e.prototype._setProxied=function(){this._bitField=4194304|this._bitField},e.prototype._unsetProxied=function(){this._bitField=this._bitField&-4194305},e.prototype._isGcQueued=function(){return(this._bitField&-1073741824)===-1073741824},e.prototype._setGcQueued=function(){this._bitField=this._bitField|-1073741824},e.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),s.invokeLater(this._gc,this,void 0))},e.prototype._gc=function(){for(var t=5*this._length()-5,e=0;e<t;e++)delete this[e];this._clearFirstHandlerData(),this._setLength(0),this._unsetGcQueued()},e.prototype._clearFirstHandlerData=function(){this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0},e.prototype._queueSettleAt=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),s.invoke(this._settlePromiseAt,this,t)},e.prototype._fulfillUnchecked=function(t){if(this.isPending()){if(t===this){var e=C();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=t;var r=this._length();r>0&&s.invoke(this._settlePromises,this,r)}},e.prototype._rejectUncheckedCheckError=function(t){var e=R(t)?t:new Error(t+"");this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(this.isPending()){if(t===this){var r=C();return this._attachExtraTrace(r),this._rejectUnchecked(r)}if(this._cleanValues(),this._setRejected(),this._settledValue=t,this._isFinal())return void s.invokeLater(x,void 0,void 0===e?t:e);var i=this._length();void 0!==e&&this._setCarriedStackTrace(e),i>0?s.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},e.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},e.prototype._settlePromises=function(){for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},e.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==p.possiblyUnhandledRejection&&s.invokeLater(this._notifyUnhandledRejection,this,void 0)},e.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof O&&s.invokeLater(O,void 0,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue,e=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==e&&(this._unsetCarriedStackTrace(),t=e),"function"==typeof p.possiblyUnhandledRejection&&p.possiblyUnhandledRejection(t,this)}};var U=[];return e.prototype._peekContext=function(){var t=U.length-1;if(t>=0)return U[t]},e.prototype._pushContext=function(){S&&U.push(this)},e.prototype._popContext=function(){S&&U.pop()},e.noConflict=function(){return i(e)},e.setScheduler=function(t){if("function"!=typeof t)throw new w("fn must be a function");s._schedule=t},p.isSupported()||(e.longStackTraces=function(){},S=!1),e._makeSelfResolutionError=C,t("./finally.js")(e,l,h),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,f,h,c),e.RangeError=b,e.CancellationError=F,e.TimeoutError=k,e.TypeError=w,e.OperationalError=E,e.RejectionError=E,e.AggregateError=a.AggregateError,o.toFastProperties(e),o.toFastProperties(e.prototype),e.Promise=e,t("./timers.js")(e,c,h),t("./race.js")(e,c,h),t("./call_get.js")(e),t("./generators.js")(e,A,c,h),t("./map.js")(e,f,A,h,c),t("./nodeify.js")(e),t("./promisify.js")(e,c),t("./props.js")(e,f,h),t("./reduce.js")(e,f,A,h,c),t("./settle.js")(e,f),t("./some.js")(e,f,A),t("./progress.js")(e,f),t("./cancel.js")(e,c),t("./filter.js")(e,c),t("./any.js")(e,f),t("./each.js")(e,c),t("./using.js")(e,A,h),e.prototype=e.prototype,e}},{"./any.js":1,"./async.js":2,"./call_get.js":4,"./cancel.js":5,"./captured_trace.js":6,"./catch_filter.js":7,"./direct_resolve.js":8,"./each.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./join.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,"./promise_array.js":21,"./promise_resolver.js":22,"./promisify.js":23,"./props.js":24,"./race.js":26,"./reduce.js":27,"./settle.js":29,"./some.js":30,"./synchronous_inspection.js":31,"./thenables.js":32,"./timers.js":33,"./using.js":34,"./util.js":35}],21:[function(t,e,r){"use strict";e.exports=function(e,r,i){function n(t){switch(t){case-1:return;case-2:return[];case-3:return{}}}function o(t){var i=this._promise=new e(r),n=void 0;t instanceof e&&(n=t,i._propagateFrom(n,5)),i._setTrace(n),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=t("./errors.js").canAttach,a=t("./util.js"),c=a.isArray;return o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function t(r,o){var s=i(this._values,void 0);if(s instanceof e){if(this._values=s,s._setBoundTo(this._promise._boundTo),!s.isFulfilled())return s.isPending()?void s._then(t,this._reject,void 0,this,o):(s._unsetRejectionIsUnhandled(),void this._reject(s._settledValue));if(s=s._settledValue,!c(s)){var a=new e.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(a)}}else if(!c(s)){var a=new e.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(a)}if(0===s.length)return void(o===-5?this._resolveEmptyArray():this._resolve(n(o)));for(var u=this.getActualLength(s.length),l=u,h=this.shouldCopyValues()?new Array(u):this._values,f=!1,p=0;p<u;++p){var _=i(s[p],void 0);_ instanceof e?_.isPending()?_._proxyPromiseArray(this,p):(_._unsetRejectionIsUnhandled(),f=!0):f=!0,h[p]=_}this._values=h,this._length=l,f&&this._scanDirectValues(u)},o.prototype._settlePromiseAt=function(t){var r=this._values[t];r instanceof e?r.isFulfilled()?this._promiseFulfilled(r._settledValue,t):r.isRejected()&&this._promiseRejected(r._settledValue,t):this._promiseFulfilled(r,t)},o.prototype._scanDirectValues=function(t){for(var e=0;e<t&&!this._isResolved();++e)this._settlePromiseAt(e)},o.prototype._isResolved=function(){return null===this._values},o.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},o.prototype.__hardReject__=o.prototype._reject=function(t){this._values=null;var e=s(t)?t:new Error(t+"");this._promise._attachExtraTrace(e),this._promise._reject(t,e)},o.prototype._promiseProgressed=function(t,e){this._isResolved()||this._promise._progress({index:e,value:t})},o.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)}},o.prototype._promiseRejected=function(t,e){this._isResolved()||(this._totalResolved++,this._reject(t))},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(t){return t},o}},{"./errors.js":10,"./util.js":35}],22:[function(t,e,r){"use strict";function i(t){return t instanceof Error&&_.getPrototypeOf(t)===Error.prototype}function n(t){var e;return e=i(t)?new h(t):t,u.markAsOriginatingFromRejection(e),e}function o(t){function e(e,r){if(null!==t){if(e){var i=n(c(e));t._attachExtraTrace(i),t._reject(i)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;a<o;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(r);t=null}}return e}var s,a=t("./util.js"),c=a.maybeWrapAsError,u=t("./errors.js"),l=u.TimeoutError,h=u.OperationalError,f=t("./async.js"),p=a.haveGetters,_=t("./es5.js");if(s=p?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},p){var d={get:function(){return o(this.promise)}};_.defineProperty(s.prototype,"asCallback",d),_.defineProperty(s.prototype,"callback",d)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var e=this.promise;e._tryFollow(t)||f.invoke(e._fulfill,e,t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var e=this.promise;u.markAsOriginatingFromRejection(t);var r=u.canAttach(t)?t:new Error(t+"");e._attachExtraTrace(r),f.invoke(e._reject,e,t),r!==t&&f.invoke(this._setCarriedStackTrace,this,r)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");f.invoke(this.promise._progress,this.promise,t)},s.prototype.cancel=function(){f.invoke(this.promise.cancel,this.promise,void 0)},s.prototype.timeout=function(){this.reject(new l("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},s.prototype._setCarriedStackTrace=function(t){this.promise.isRejected()&&this.promise._setCarriedStackTrace(t)},e.exports=s},{"./async.js":2,"./errors.js":10,"./es5.js":12,"./util.js":35}],23:[function(t,e,r){"use strict";e.exports=function(e,r){function i(t){return t.replace(/([$])/,"\\$")}function n(t){try{return t.__isPromisified__===!0}catch(t){return!1}}function o(t,e,r){var i=m.getDataPropertyOrDefault(t,e+r,P);return!!i&&n(i)}function s(t,e,r){for(var i=0;i<t.length;i+=2){var n=t[i];if(r.test(n))for(var o=n.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new F("Cannot promisify an API that has normal methods with '"+e+"'-suffix")}}function a(t,e,r,i){for(var a=m.inheritedDataKeys(t),c=[],u=0;u<a.length;++u){var l=a[u],h=t[l];"function"!=typeof h||n(h)||o(t,l,e)||!i(l,h,t)||c.push(l,h)}return s(c,e,r),c}function c(t){for(var e=[t],r=Math.max(0,t-1-5),i=t-1;i>=r;--i)i!==t&&e.push(i);for(var i=t+1;i<=5;++i)e.push(i);return e}function u(t){return m.filledRange(t,"arguments[","]")}function l(t){return m.filledRange(t,"_arg","")}function h(t){return"number"==typeof t.length?Math.max(Math.min(t.length,1024),0):0}function f(t){return m.isIdentifier(t)?"."+t:"['"+t.replace(/(['\\])/g,"\\$1")+"']"}function p(t,i,n,o,s){function a(e){var r,n=u(e).join(", "),o=e>0?", ":"";return r="string"==typeof t?"                                                          \n                this.method({{args}}, fn);                                   \n                break;                                                       \n            ".replace(".method",f(t)):i===y?"                                                         \n                callback.call(this, {{args}}, fn);                           \n                break;                                                       \n            ":void 0!==i?"                                                         \n                callback.call(receiver, {{args}}, fn);                       \n                break;                                                       \n            ":"                                                         \n                callback({{args}}, fn);                                      \n                break;                                                       \n            ",r.replace("{{args}}",n).replace(", ",o)}function p(){for(var e="",r=0;r<d.length;++r)e+="case "+d[r]+":"+a(d[r]);var n;return n="string"==typeof t?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",f(t)):i===y?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ",e+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",n)}var _=Math.max(0,h(o)-1),d=c(_),v="string"==typeof n&&m.isIdentifier(n)?n+s:"promisified";return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function FunctionName(Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(void 0);                                       \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",v).replace("Parameters",l(_)).replace("[CodeForSwitchCase]",p()))(e,t,i,j,b,g,r)}function _(t,i){function n(){var n=i;i===y&&(n=this),"string"==typeof t&&(t=n[t]);var o=new e(r);o._setTrace(void 0);var s=g(o);try{t.apply(n,j(arguments,s))}catch(t){var a=b(t);o._attachExtraTrace(a),o._reject(a)}return o}return n.__isPromisified__=!0,n}function d(t,e,r,n){for(var o=new RegExp(i(e)+"$"),s=a(t,e,o,r),c=0,u=s.length;c<u;c+=2){var l=s[c],h=s[c+1],f=l+e;t[f]=n===T?T(l,y,l,h,e):n(h)}return m.toFastProperties(t),t}function v(t,e){return T(t,e,void 0,t)}var y={},m=t("./util.js"),g=t("./promise_resolver.js")._nodebackForPromise,j=m.withAppended,b=m.maybeWrapAsError,w=m.canEvaluate,F=t("./errors").TypeError,k="Async",E=function(t,e){return m.isIdentifier(t)&&"_"!==t.charAt(0)&&!m.isClass(e)},P={__isPromisified__:!0},T=w?p:_;e.promisify=function(t,e){if("function"!=typeof t)throw new F("fn must be a function");return n(t)?t:v(t,arguments.length<2?y:e)},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new F("the target of promisifyAll must be an object or a function");e=Object(e);var r=e.suffix;"string"!=typeof r&&(r=k);var i=e.filter;"function"!=typeof i&&(i=E);var n=e.promisifier;if("function"!=typeof n&&(n=T),!m.isIdentifier(r))throw new RangeError("suffix must be a valid identifier");for(var o=m.inheritedDataKeys(t,{includeHidden:!0}),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&m.isClass(a)&&(d(a.prototype,r,i,n),d(a,r,i,n))}return d(t,r,i,n)}}},{"./errors":10,"./promise_resolver.js":22,"./util.js":35}],24:[function(t,e,r){"use strict";e.exports=function(e,r,i){function n(t){for(var e=u.keys(t),r=e.length,i=new Array(2*r),n=0;n<r;++n){var o=e[n];i[n]=t[o],i[n+r]=o}this.constructor$(i)}function o(t){var r,o=i(t,void 0);return c(o)?(r=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new n(o).promise(),o instanceof e&&r._propagateFrom(o,4),r):a("cannot await properties of a non-object")}var s=t("./util.js"),a=t("./errors_api_rejection")(e),c=s.isObject,u=t("./es5.js");s.inherits(n,r),n.prototype._init=function(){this._init$(void 0,-3)},n.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){for(var i={},n=this.length(),o=0,s=this.length();o<s;++o)i[this._values[o+n]]=this._values[o];this._resolve(i)}}},n.prototype._promiseProgressed=function(t,e){this._isResolved()||this._promise._progress({key:this._values[e+this.length()],value:t})},n.prototype.shouldCopyValues=function(){return!1},n.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return o(this)},e.props=function(t){return o(t)}}},{"./errors_api_rejection":11,"./es5.js":12,"./util.js":35}],25:[function(t,e,r){"use strict";function i(t,e,r,i,n){for(var o=0;o<n;++o)r[o+i]=t[o+e]}function n(t){this._capacity=t,this._length=0,this._front=0,this._makeCapacity()}n.prototype._willBeOverCapacity=function(t){return this._capacity<t},n.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},n.prototype.push=function(t,e,r){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var n=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[n+0&o]=t,this[n+1&o]=e,this[n+2&o]=r,this._length=i},n.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},n.prototype.length=function(){return this._length},n.prototype._makeCapacity=function(){for(var t=this._capacity,e=0;e<t;++e)this[e]=void 0},n.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<3)},n.prototype._resizeTo=function(t){var e=this._front,r=this._capacity,n=new Array(r),o=this.length();if(i(this,0,n,0,r),this._capacity=t,this._makeCapacity(),this._front=0,e+o<=r)i(n,e,this,0,o);else{var s=o-(e+o&r-1);i(n,e,this,0,s),i(n,0,this,s,o-s)}},e.exports=n},{}],26:[function(t,e,r){"use strict";e.exports=function(e,r,i){function n(t,n){var u=i(t,void 0);if(u instanceof e)return a(u);if(!s(t))return o("expecting an array, a promise or a thenable");var l=new e(r);void 0!==n?l._propagateFrom(n,7):l._setTrace(void 0);for(var h=l._fulfill,f=l._reject,p=0,_=t.length;p<_;++p){var d=t[p];(void 0!==d||c.call(t,p))&&e.cast(d)._then(h,f,void 0,l,null)}return l}var o=t("./errors_api_rejection.js")(e),s=t("./util.js").isArray,a=function(t){return t.then(function(e){return n(e,t)})},c={}.hasOwnProperty;e.race=function(t){return n(t,void 0)},e.prototype.race=function(){return n(this,void 0)}}},{"./errors_api_rejection.js":11,"./util.js":35}],27:[function(t,e,r){"use strict";e.exports=function(e,r,i,n,o){function s(t,r,i,s){this.constructor$(t),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===i,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var a=n(i,void 0),c=!1,u=a instanceof e;u&&(a.isPending()?a._proxyPromiseArray(this,-1):a.isFulfilled()?(i=a.value(),this._gotAccum=!0):(a._unsetRejectionIsUnhandled(),this._reject(a.reason()),c=!0)),u||this._zerothIsAccum||(this._gotAccum=!0),this._callback=r,this._accum=i,c||this._init$(void 0,-5)}function a(t,e,r,n){if("function"!=typeof e)return i("fn must be a function");var o=new s(t,e,r,n);return o.promise()}var c=t("./util.js"),u=c.tryCatch4,l=c.tryCatch3,h=c.errorObj;c.inherits(s,r),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,r){var i=this._values;if(null!==i){var o,s=this.length(),a=this._preservedValues,c=null!==a,f=this._gotAccum,p=this._valuesPhase;if(!p)for(p=this._valuesPhase=Array(s),o=0;o<s;++o)p[o]=0;if(o=p[r],0===r&&this._zerothIsAccum?(f||(this._accum=t,this._gotAccum=f=!0),p[r]=0===o?1:2):r===-1?f||(this._accum=t,this._gotAccum=f=!0):0===o?p[r]=1:(p[r]=2,f&&(this._accum=t)),f){for(var _,d=this._callback,v=this._promise._boundTo,y=this._reducingIndex;y<s;++y)if(o=p[y],2!==o){if(1!==o)return;if(t=i[y],t instanceof e){if(!t.isFulfilled())return t.isPending()?void 0:(t._unsetRejectionIsUnhandled(),this._reject(t.reason()));t=t._settledValue}if(c?(a.push(t),_=l(d,v,t,y,s)):_=u(d,v,this._accum,t,y,s),_===h)return this._reject(_.e);var m=n(_,void 0);if(m instanceof e){if(m.isPending())return p[y]=4,m._proxyPromiseArray(this,y);if(!m.isFulfilled())return m._unsetRejectionIsUnhandled(),this._reject(m.reason());_=m.value()}this._reducingIndex=y+1,this._accum=_}else this._reducingIndex=y+1;this._reducingIndex<s||this._resolve(c?a:this._accum)}}},e.prototype.reduce=function(t,e){return a(this,t,e,null)},e.reduce=function(t,e,r,i){return a(t,e,r,i)}}},{"./util.js":35}],28:[function(t,e,r){"use strict";var i,n;if("object"==typeof process&&"string"==typeof process.version)i=function(t){process.nextTick(t)};else if("undefined"!=typeof MutationObserver&&(n=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(n=WebKitMutationObserver))i=function(){var t=document.createElement("div"),e=void 0,r=new n(function(){var t=e;e=void 0,t()});return r.observe(t,{attributes:!0}),function(r){e=r,t.classList.toggle("foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");i=function(t){setTimeout(t,0)}}e.exports=i},{}],29:[function(t,e,r){"use strict";e.exports=function(e,r){function i(t){this.constructor$(t)}var n=e.PromiseInspection,o=t("./util.js");o.inherits(i,r),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},i.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){var r=new n;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)}},i.prototype._promiseRejected=function(t,e){if(!this._isResolved()){var r=new n;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)}},e.settle=function(t){return new i(t).promise()},e.prototype.settle=function(){return new i(this).promise()}}},{"./util.js":35}],30:[function(t,e,r){"use strict";e.exports=function(e,r,i){function n(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return i("expecting a positive integer");var r=new n(t),o=r.promise();return o.isRejected()?o:(r.setHowMany(e),r.init(),o)}var s=t("./util.js"),a=t("./errors.js").RangeError,c=t("./errors.js").AggregateError,u=s.isArray;s.inherits(n,r),n.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=u(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},n.prototype.init=function(){this._initialized=!0,this._init()},n.prototype.setUnwrap=function(){this._unwrap=!0},n.prototype.howMany=function(){return this._howMany},n.prototype.setHowMany=function(t){this._isResolved()||(this._howMany=t)},n.prototype._promiseFulfilled=function(t){this._isResolved()||(this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values)))},n.prototype._promiseRejected=function(t){if(!this._isResolved()&&(this._addRejected(t),this.howMany()>this._canPossiblyFulfill())){for(var e=new c,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},n.prototype._fulfilled=function(){return this._totalResolved},n.prototype._rejected=function(){return this._values.length-this.length()},n.prototype._addRejected=function(t){this._values.push(t)},n.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},n.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},n.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},n.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=n}},{"./errors.js":10,"./util.js":35}],31:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(this._bitField=t._bitField,this._settledValue=t.isResolved()?t._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}e.prototype.isFulfilled=t.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype.isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype.isPending=function(){return 0===(402653184&this._bitField)},e.prototype.value=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},e.prototype.error=e.prototype.reason=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},e.prototype.isResolved=t.prototype.isResolved=function(){return(402653184&this._bitField)>0},t.PromiseInspection=e}},{}],32:[function(t,e,r){"use strict";e.exports=function(e,r){function i(t){try{return t.then}catch(t){return u.e=t,u}}function n(t,n){if(l(t)){if(t instanceof e)return t;if(o(t)){var a=new e(r);return a._setTrace(void 0),t._then(a._fulfillUnchecked,a._rejectUncheckedCheckError,a._progressUnchecked,a,null),a._setFollowing(),a}var h=i(t);if(h===u)return void 0!==n&&c(h.e)&&n._attachExtraTrace(h.e),e.reject(h.e);if("function"==typeof h)return s(t,h,n)}return t}function o(t){return h.call(t,"_promise0")}function s(t,r,i){function n(r){if(!u){if(u=!0,t===r){var n=e._makeSelfResolutionError();return void 0!==i&&i._attachExtraTrace(n),void a.promise._reject(n,void 0)}a.resolve(r)}}function o(t){if(!u){u=!0;var e=c(t)?t:new Error(t+"");void 0!==i&&i._attachExtraTrace(e),a.promise._reject(t,e)}}function s(t){if(!u){var e=a.promise;"function"==typeof e._progress&&e._progress(t)}}var a=e.defer(),u=!1;try{r.call(t,n,o,s)}catch(t){if(!u){u=!0;var l=c(t)?t:new Error(t+"");void 0!==i&&i._attachExtraTrace(l),a.promise._reject(t,l)}}return a.promise}var a=t("./util.js"),c=t("./errors.js").canAttach,u=a.errorObj,l=a.isObject,h={}.hasOwnProperty;return n}},{"./errors.js":10,"./util.js":35}],33:[function(t,e,r){"use strict";var i=function(t,e){var r=arguments.length,i=arguments[2],n=arguments[3],o=r>=5?arguments[4]:void 0;setTimeout(function(){t(i,n,o)},0|e)};e.exports=function(e,r,n){var o=(t("./util.js"),t("./errors.js")),s=(t("./errors_api_rejection")(e),e.TimeoutError),a=function(t,e,r){if(t.isPending()){"string"!=typeof e&&(e="operation timed out after "+r+" ms");var i=new s(e);o.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._cancel(i)}},c=function(t,e){e._fulfill(t)},u=e.delay=function(t,o){void 0===o&&(o=t,t=void 0),o=+o;var s=n(t,void 0),a=new e(r);return s instanceof e?(a._propagateFrom(s,7),a._follow(s),a.then(function(t){return e.delay(t,o)})):(a._setTrace(void 0),i(c,o,t,a),a)};e.prototype.delay=function(t){return u(this,t)},e.prototype.timeout=function(t,n){t=+t;var o=new e(r);return o._propagateFrom(this,7),o._follow(this),i(a,t,o,n,t),o.cancellable()}}},{"./errors.js":10,"./errors_api_rejection":11,"./util.js":35}],34:[function(t,e,r){"use strict";e.exports=function(e,r,i){function n(t){for(var r=t.length,i=0;i<r;++i){var n=t[i];if(n.isRejected())return e.reject(n.error());t[i]=n.value()}return t}function o(t){setTimeout(function(){throw t},0)}function s(t){var e=i(t,void 0);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function a(t,r){function n(){if(a>=c)return u.resolve();var l=s(t[a++]);if(l instanceof e&&l._isDisposable()){try{l=i(l._getDisposer().tryDispose(r),void 0)}catch(t){return o(t)}if(l instanceof e)return l._then(n,o,null,null,null)}n()}var a=0,c=t.length,u=e.defer();return n(),u.promise}function c(t){var e=new _;return e._settledValue=t,e._bitField=268435456,a(this,e).thenReturn(t)}function u(t){var e=new _;return e._settledValue=t,e._bitField=134217728,a(this,e).thenThrow(t)}function l(t,e){this._data=t,this._promise=e}function h(t,e){this.constructor$(t,e)}var f=t("./errors.js").TypeError,p=t("./util.js").inherits,_=e.PromiseInspection;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},l.prototype.tryDispose=function(t){var e=this.resource(),r=null!==e?this.doDispose(e,t):null;return this._promise._unsetDisposable(),this._data=this._promise=null,
r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},p(h,l),h.prototype.doDispose=function(t,e){var r=this.data();return r.call(t,t,e)},e.using=function(){var t=arguments.length;if(t<2)return r("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return r("fn must be a function");t--;for(var o=new Array(t),s=0;s<t;++s){var a=arguments[s];if(l.isDisposer(a)){var h=a;a=a.promise(),a._setDisposable(h)}o[s]=a}return e.settle(o).then(n).spread(i)._then(c,u,void 0,o,void 0)},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-262145,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this);throw new f}}},{"./errors.js":10,"./util.js":35}],35:[function(t,e,r){"use strict";function i(t,e,r){try{return t.call(e,r)}catch(t){return F.e=t,F}}function n(t,e,r,i){try{return t.call(e,r,i)}catch(t){return F.e=t,F}}function o(t,e,r,i,n){try{return t.call(e,r,i,n)}catch(t){return F.e=t,F}}function s(t,e,r,i,n,o){try{return t.call(e,r,i,n,o)}catch(t){return F.e=t,F}}function a(t,e,r){try{return t.apply(r,e)}catch(t){return F.e=t,F}}function c(t){return"string"==typeof t?t:""+t}function u(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function l(t){return!u(t)}function h(t){return u(t)?new Error(c(t)):t}function f(t,e){var r,i=t.length,n=new Array(i+1);for(r=0;r<i;++r)n[r]=t[r];return n[r]=e,n}function p(t,e,r){if(!j.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:r:void 0}function _(t,e,r){if(u(t))return t;var i={value:r,configurable:!0,enumerable:!1,writable:!0};return j.defineProperty(t,e,i),t}function d(t){throw t}function v(t){try{if("function"==typeof t){var e=j.keys(t.prototype);return e.length>0&&!(1===e.length&&"constructor"===e[0])}return!1}catch(t){return!1}}function y(t){function e(){}return e.prototype=t,e}function m(t){return T.test(t)}function g(t,e,r){for(var i=new Array(t),n=0;n<t;++n)i[n]=e+n+r;return i}var j=t("./es5.js"),b=function(){try{var t={};return j.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),w="undefined"==typeof navigator,F={e:{}},k=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)i.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var i={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},E=function(){return"string"!==this}.call("string"),P=function(){return j.isES5?function(t,e){for(var r=[],i=Object.create(null),n=Object(e).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=t;){var o;try{o=n(t)}catch(t){return r}for(var s=0;s<o.length;++s){var a=o[s];if(!i[a]){i[a]=!0;var c=Object.getOwnPropertyDescriptor(t,a);null!=c&&null==c.get&&null==c.set&&r.push(a)}}t=j.getPrototypeOf(t)}return r}:function(t){var e=[];for(var r in t)e.push(r);return e}}(),T=/^[a-z$_][a-z$_0-9]*$/i,R={isClass:v,isIdentifier:m,inheritedDataKeys:P,getDataPropertyOrDefault:p,thrower:d,isArray:j.isArray,haveGetters:b,notEnumerableProp:_,isPrimitive:u,isObject:l,canEvaluate:w,errorObj:F,tryCatch1:i,tryCatch2:n,tryCatch3:o,tryCatch4:s,tryCatchApply:a,inherits:k,withAppended:f,asString:c,maybeWrapAsError:h,wrapsPrimitiveReceiver:E,toFastProperties:y,filledRange:g};e.exports=R},{"./es5.js":12}]},{},[3])(3)}),"undefined"!=typeof t&&null!==t?t.P=t.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)});;
;
/* module-key = 'com.atlassian.jira.jira-onboarding-assets-plugin:promise', location = 'jira-onboarding-assets-module/lib/bluebird-promise-amd.js' */
define('bluebird/Promise', ["atlassian/libs/bluebird-2.3.6"], function(bluebird) {
    return bluebird;
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/templates/repository-shortcuts/repository-shortcuts.soy' */
// This file was automatically generated from repository-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Software.RepositoryShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Software == 'undefined') { JIRA.Software = {}; }
if (typeof JIRA.Software.RepositoryShortcuts == 'undefined') { JIRA.Software.RepositoryShortcuts = {}; }
if (typeof JIRA.Software.RepositoryShortcuts.Templates == 'undefined') { JIRA.Software.RepositoryShortcuts.Templates = {}; }


JIRA.Software.RepositoryShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManageShortcuts || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider repo-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' repo-shortcuts-group_empty' : '') + '" data-id="repo-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml('Source code') + '</div><ul class="aui-nav repo-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList14 = opt_data.shortcuts;
      var shortcutListLen14 = shortcutList14.length;
      for (var shortcutIndex14 = 0; shortcutIndex14 < shortcutListLen14; shortcutIndex14++) {
        var shortcutData14 = shortcutList14[shortcutIndex14];
        output += JIRA.Software.RepositoryShortcuts.Templates.shortcut({canManageShortcuts: opt_data.canManageShortcuts, canManageDVCS: opt_data.canManageDVCS, id: shortcutData14.id, name: shortcutData14.name, url: shortcutData14.url, dvcsType: shortcutData14.dvcsType, shouldWarnPotentialConnection: shortcutData14.shouldWarnPotentialConnection, isFirstSyncRunning: shortcutData14.isFirstSyncRunning});
      }
    }
    output += ((opt_data.canManageShortcuts) ? '<li><a class="aui-nav-item repo-shortcuts-group__add" href="#" data-link-id="repo-shortcut-add">' + aui.icons.icon({useIconFont: true, size: 'large', icon: 'add-small'}) + '<span class="aui-nav-item-label">' + soy.$$escapeHtml('Add source code') + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.content.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.content';
}


JIRA.Software.RepositoryShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy37 = "" + '/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts/images';
  output += '<li class="repo-shortcut"><a class="aui-nav-item repo-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="repo-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.dvcsType == 'bitbucket') ? '<span class="aui-icon aui-icon-large aui-iconfont-bitbucket">' + soy.$$escapeHtml('Bitbucket source code link') + '</span>' : (opt_data.dvcsType == 'github') ? '<img class="aui-icon" src="' + soy.$$escapeHtml(imgBaseUrl__soy37) + '/octocat-icon.svg" alt="' + soy.$$escapeHtml('GitHub source code link') + '" />' : '<span class="aui-icon aui-icon-large aui-iconfont-link">' + soy.$$escapeHtml('Unknown source code link') + '</span>') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManageShortcuts) ? '<a href="#repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-owns="repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger repo-shortcuts-group__actions" style="' + ((opt_data.isFirstSyncRunning || opt_data.shouldWarnPotentialConnection) ? 'right: 40px' : '') + '"><span>' + soy.$$escapeHtml('Actions') + '</span></a><div id="repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default repo-shortcuts-group__dropdown"><ul class="aui-list-truncate">' + ((opt_data.shouldWarnPotentialConnection) ? '' : '') + '<li><a class="repo-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml('Edit') + '</a></li><li><a class="repo-shortcuts-group__actions__delete" href="#">' + soy.$$escapeHtml('Delete') + '</a></li></ul></div>' : '') + ((opt_data.isFirstSyncRunning) ? '<a class="repo-shortcuts-group__warning syncing-trigger" href="#syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning" original-title="warning">$' + soy.$$escapeHtml('Sync in progress') + '</span></a>' + JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog(opt_data) : '') + ((opt_data.shouldWarnPotentialConnection) ? '<a class="repo-shortcuts-group__warning suggest-connection-trigger" href="#suggest-connection-dialog-' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="suggest-connection-dialog-' + soy.$$escapeHtml(opt_data.id) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning" original-title="warning">$' + soy.$$escapeHtml('Sync in progress') + '</span></a>' : '') + '</li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.shortcut';
}


JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  var output = '<div class="repo-shortcuts-field-group">';
  var urlErrorId__soy112 = 'repo-shortcuts-url-error';
  var nameErrorId__soy113 = 'repo-shortcuts-name-error';
  output += aui.form.textField({name: 'repo-shortcuts-url-' + opt_data.action, id: 'repo-shortcuts-url-' + opt_data.action, labelContent: opt_data.urlLabel ? opt_data.urlLabel : 'Repo link', placeholderText: 'e.g. https://bitbucket.org/org/projectrepository', extraClasses: 'repo-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : [], errorId: urlErrorId__soy112, extraInputAttributes: {'aria-describedby': urlErrorId__soy112}}) + '<div class="field-group repo-shortcuts-name">' + aui.form.label({forField: 'repo-shortcuts-name-' + opt_data.action, content: opt_data.nameLabel ? opt_data.nameLabel : 'Label'}) + '<div class="repo-shortcuts-name-icon-block"><div class="repo-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'repo-shortcuts-name-' + opt_data.action, id: 'repo-shortcuts-name-' + opt_data.action, placeholderText: 'e.g. Project repository', extraClasses: 'repo-shortcuts-name-input' + (opt_data.isWithIcon ? ' repo-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text', extraAttributes: {'aria-describedby': nameErrorId__soy113}}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError, id: nameErrorId__soy113}) : '') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields';
}


JIRA.Software.RepositoryShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-header-image add-repo"></div><form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml('Create a repo link') + '</h3><p>' + soy.$$escapeHtml('Add a link to this project\x27s repo so your team can easily find their code.') + '</p><fieldset>' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons repo-shortcuts-buttons">' + aui.buttons.button({text: 'Link repo', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.addDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.isAddDialog ? 'add-repository-dialog' : 'edit-repository-dialog') + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="manage-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"></div><div id="image-behind-bottom"></div></div><div id="manage-repository-image-container"><div id="manage-repository-dialog-image"></div></div><form action="" method="post" class="aui"><h1 id="manage-repository-dialog-title">' + soy.$$escapeHtml(opt_data.isAddDialog ? 'Connect a repository' : 'Edit repository') + '</h1><p id="manage-repository-dialog-description">' + soy.$$escapeHtml('Linking a repository will show information about your branches, commits and pull requests in Jira issues.') + '</p><fieldset>' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: opt_data.isAddDialog ? 'add' : 'edit', urlLabel: 'Repository link', nameLabel: 'Name'})) + '</fieldset><button type="submit" class="repo-shortcuts-hidden-submit" tabindex="-1"></button></form></div><div class="aui-dialog2-footer"><div class="buttons-container"><div class="buttons">' + ((! opt_data.isAddDialog) ? '<button class="aui-button repo-shortcuts-delete">' + soy.$$escapeHtml('Delete') + '</button>' : '') + '<button class="aui-button aui-button-primary repo-shortcuts-submit">' + soy.$$escapeHtml(opt_data.isAddDialog ? 'Connect' : 'Update') + '</button><button class="aui-button aui-button-text aui-button-subtle repo-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog(soy.$$augmentMap(opt_data, {isAddDialog: true}));
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog(soy.$$augmentMap(opt_data, {isAddDialog: false}));
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-header-image connection-request"></div><h3 class="repo-shortcuts-connectionRequestHeading">' + soy.$$escapeHtml('Linked but not integrated') + '</h3><p class="repo-shortcuts-connectionRequestDescription">' + soy.$$escapeHtml(AJS.format('Your repo is now linked, but your team can get visibility of development progress in their issues when {0} and Jira are integrated.',opt_data.dvcsName)) + '</p>' + ((opt_data.isIntegration) ? aui.buttons.button({text: AJS.format('Integrate Jira with {0}',opt_data.dvcsName), type: 'primary', extraClasses: 'repo-connection-start'}) : aui.buttons.button({text: 'Sync repository with Jira', type: 'primary', extraClasses: 'repo-connection-start'})) + aui.buttons.button({text: 'No thanks', type: 'link', extraClasses: 'repo-connection-cancel'});
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '" class="repo-shortcuts-syncing-dialog" responds-to="hover"><div class="repo-shortcuts-syncing-dialog-header"></div><h3>' + soy.$$escapeHtml(AJS.format('Syncing Jira with {0}',opt_data.dvcsType)) + '</h3><p>' + soy.$$escapeHtml(AJS.format('We\x27re busy syncing Jira with {0} \u2013 larger repos will take an hour or two. Once done, your team will',opt_data.dvcsType)) + '&nbsp;<a href="https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+JIRA+applications+with+Bitbucket+Cloud">' + soy.$$escapeHtml('enjoy greater confidence') + '</a>&nbsp;' + soy.$$escapeHtml('in their development process, and they can start') + '&nbsp;<a href="https://confluence.atlassian.com/display/BITBUCKET/Processing+JIRA+Software+issues+with+Smart+Commit+messages">' + soy.$$escapeHtml('using issue keys') + '</a>&nbsp;' + soy.$$escapeHtml('in commit messages right now!') + '</p>' + ((opt_data.canManageDVCS) ? aui.buttons.button({text: 'See syncing progress', type: 'link', href: '/secure/admin/ConfigureDvcsOrganizations!default.jspa'}) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-repo-shortcuts-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Edit repo link') + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome';
}


JIRA.Software.RepositoryShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog2-content"><form class="aui" method="post">' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="repo-shortcuts-hidden-submit" tabindex="-1"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + aui.buttons.button({text: 'Save', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></footer>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.editDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-repo-shortcuts-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete repo link') + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('Are you sure you want to delete this repo link?') + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + aui.buttons.button({text: 'Delete', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.deleteDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy273 = "" + '/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts/images';
  output += '<div class="aui-dialog2-content"><img src="' + soy.$$escapeHtml(imgBaseUrl__soy273) + '/integrate-product-with-jira.svg" style="width: 100%" /><div class="description-container">' + ((opt_data.canUserManageDVCSAccounts && ! opt_data.isIntegration) ? '<p>' + soy.$$escapeHtml(AJS.format('A shortcut to your {0} repository has been created.',opt_data.dvcsName)) + '</p><p>' + soy.$$escapeHtml(AJS.format('Next, sync your Jira Cloud and {0} repository.',opt_data.dvcsName)) + '</p>' : '') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent';
}


JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent = function(opt_data, opt_ignored) {
  return '<header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main" style="overflow: visible">' + ((opt_data.isIntegration) ? soy.$$escapeHtml(AJS.format('Integrate Jira with {0}',opt_data.dvcsName)) : soy.$$escapeHtml('Sync repository with Jira')) + '</h2></header>' + JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent(opt_data) + '<footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + ((opt_data.canUserManageDVCSAccounts && opt_data.isIntegration) ? aui.buttons.button({text: AJS.format('Integrate with {0}',opt_data.dvcsName), type: 'primary', extraClasses: 'repo-connect-start'}) : (opt_data.canUserManageDVCSAccounts && ! opt_data.isIntegration) ? aui.buttons.button({text: 'Start syncing', type: 'primary', extraClasses: 'repo-connect-start'}) : '<div></div>') + ((opt_data.canUserManageDVCSAccounts) ? aui.buttons.button({text: 'Edit repository', type: 'link', extraClasses: 'repo-connect-edit aui-button-subtle'}) : aui.buttons.button({text: 'Maybe later', type: 'link', extraClasses: 'repo-connect-cancel'})) + '</div></footer>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/services/URLMatcher.js' */
"use strict";define("repository-shortcuts/services/url-matcher",[],function(){return{parseUrl:function(t){function s(t,s,e){if(t&&t[1]&&s.indexOf(t[1])===-1&&e.indexOf(t[2])===-1)return{dvcsOrg:t[1],dvcsRepo:t[2]}}function e(){var e=/https:\/\/bitbucket\.org(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["snippets","account","dashboard"],i=["profile"];return s(r,c,i)}function r(){var e=/https:\/\/github\.com(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["pulls","issues","notifications","explore","integrations","settings","blog","about","site","security"],i=[];return s(r,c,i)}if("string"!=typeof t)throw new Error("parseUrl expects URLs to be strings");return e()?{dvcsType:"bitbucket",dvcsOrg:e().dvcsOrg,dvcsRepo:e().dvcsRepo}:r()?{dvcsType:"github",dvcsOrg:r().dvcsOrg,dvcsRepo:r().dvcsRepo}:{dvcsType:"unsupported"}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/services/DVCSAccountMatcher.js' */
"use strict";define("repository-shortcuts/services/dvcs-account-matcher",["jquery","underscore","wrm/context-path","repository-shortcuts/services/url-matcher"],function(t,e,r,n){var s=window.Promise;return{matchUrlAgainstNetwork:function(c){function i(n){var c=r()+"/rest/bitbucket/1.0/repository/summary/find?type="+n.dvcsType+"&orgName="+n.dvcsOrg+"&repoSlug="+n.dvcsRepo;return s.resolve(t.get(c)).then(function(t){return e.extend({},n,t)})["catch"](function(t){return t&&404===t.status?o(n):n})}function o(e){var n=r()+"/rest/bitbucket/1.0/organization/find?name="+e.dvcsOrg+"&type="+e.dvcsType;return s.resolve(t.get(n)).then(function(t){var r=t.dvcsType,n=t.name,s=t.approvalState,c=r===e.dvcsType,i=n===e.dvcsOrg,o="APPROVED"===s;return e.isOrganisationLinked=c&&i&&o,e})["catch"](function(t){return e})}function u(e){var n=r()+"/rest/devinfoadmin/1.0/githubAppDetails";return s.resolve(t.get(n)).then(function(t){var r=t.githubAppInstalled;return r&&(e.isOrganisationLinked=!0,e.isRepositoryLinked=!0),e.githubAppInstalled=r,e})["catch"](function(t){return e})}try{var a=n.parseUrl(c);return"unsupported"===a.dvcsType?s.resolve(a):"github"===a.dvcsType?u(a):a.dvcsRepo?i(a):o(a)}catch(p){return s.reject(p)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/services/DVCSIntegrator.js' */
"use strict";define("repository-shortcuts/services/dvcs-integrator",["jquery","bluebird/Promise","wrm/context-path","aui/flag"],function(t,e,o,n){function r(r){var i=r.dvcsRepoId,a=r.dvcsRepo;return e.resolve(t.ajax({type:"POST",contentType:"application/json",url:o()+"/rest/bitbucket/1.0/repo/"+i+"/autolink",data:JSON.stringify({payload:!0})})).then(function(){t.ajax({type:"POST",url:o()+"/rest/bitbucket/1.0/repository/"+i+"/softsync"}),n({type:"success",title:"You have added the repository",body:"Nicely done! Your team is going to love this.",close:"auto"})})["catch"](function(t){return n({type:"error",body:AJS.format("Failed to link \u003cstrong\u003e{0}\u003c/strong\u003e repo with Jira",a)}),e.reject(t)})}function i(t){if(void 0===t)return"";var e=t.length;if(0===e)return"";if(1===e)return"/"===t?"":t;var o="/"===t.charAt(0),n="/"===t.charAt(e-1);return t.substring(o?1:0,n?e-1:e)}function a(t,e,o,n,r){var a=i(n),c=t+"//"+i(e)+"/"+i(o),s=i(c);return s+"/"+a+"?atl_token="+r}function c(t){var e=""+o(),n=window.location.host,r=window.location.protocol,i=a(r,n,e,s,t);window.location.href=i}var s="/plugins/servlet/upm/marketplace/plugins/com.github.integration.production";return{startBBOrganisationLink:function(t){var e=""+window.location.origin+o(),n=e+"/rest/aci/1.0/installation/jira-bitbucket-connector-plugin/descriptor",r=document.getElementById("atlassian-token").getAttribute("content"),i=e+"/secure/BitbucketPostInstallApprovalAction.jspa?jiraInitiated=true&customReturnUrl="+(window.location.href+"&atl_token="+r),a="https://bitbucket.org/site/addons/authorize";window.location.href=a+"?account="+t+"&descriptor_uri="+encodeURIComponent(n)+"&redirect_uri="+encodeURIComponent(i)},startBBRepositoryLink:function(t){var e=t.dvcsRepoId,o=t.dvcsRepo;return r({dvcsRepoId:e,dvcsRepo:o})},startGithubOrganisationLink:function(){var t=document.getElementById("atlassian-token").getAttribute("content");c(t)},startGithubRepositoryLink:function(t){var e=(t.dvcsRepoId,t.dvcsRepo,document.getElementById("atlassian-token").getAttribute("content"));c(e)},normalize:function(t){return i(t)},buildAbsoluteAddOnMarketplaceUrl:function(t,e,o,n,r){return a(t,e,o,n,r)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/services/RepoShortcutUpdateHandler.js' */
"use strict";define("repository-shortcuts/services/repo-shortcut-update-handler",["repository-shortcuts/views/connection-modal","aui/flag"],function(e,t){return function(t,r){t.attributes;if(!t.hasLinkedAllComponents()){var o={repoShortcutModel:t,canUserManageDVCSAccounts:r},n=new e(o);r&&n.render()}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/models/RepositoryShortcut.js' */
"use strict";define("repository-shortcuts/models/repository-shortcut",[],function(){return JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut.extend({defaults:{url:"",name:"",icon:"",type:"source.code.link",dvcsType:"unsupported",isPendingApproval:!1,dvcsOrg:void 0,dvcsRepo:void 0,dvcsRepoId:void 0,isOrganisationLinked:void 0,isRepositoryLinked:void 0,isFirstSyncRunning:void 0,githubAppInstalled:!1},clear:function(){this.unset("id"),this.set(this.defaults)},hasLinkedOrg:function(){var t=this.attributes;return t.dvcsOrg&&t.isOrganisationLinked},hasNotLinkedOrg:function(){var t=this.attributes;return t.dvcsOrg&&!t.isOrganisationLinked},hasLinkedOrgAndNotRepo:function(){var t=this.attributes;return this.hasLinkedOrg()&&t.dvcsRepo&&!t.isRepositoryLinked},isGithub:function(){var t=this.attributes;return"github"===t.dvcsType},hasLinkedAllComponents:function(){function t(){return s.dvcsRepo&&s.isRepositoryLinked}function i(){return!s.dvcsRepo}var s=this.attributes;return this.isGithub()?s.githubAppInstalled:this.hasLinkedOrg()&&(t()||i())}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/models/RepositoryShortcuts.js' */
"use strict";define("repository-shortcuts/models/repository-shortcuts",["repository-shortcuts/models/repository-shortcut"],function(t){return JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts.extend({model:t,initialize:function(t,e){var i=this;this.projectKey=e.projectKey,this.canUserManageDVCSAccounts=e.canUserManageDVCSAccounts,this.listenTo(this,"dvcsremote:change",function(t){i._handleRepoLinkChangeOrAdd(t)})},_handleRepoLinkChangeOrAdd:function(t){var e=function(t,e){return t.get("dvcsType")===e.get("dvcsType")&&t.get("dvcsOrg")===e.get("dvcsOrg")},i=function(t,i){return e(t,i)&&t.get("dvcsRepo")===i.get("dvcsRepo")};this.forEach(function(n){t.id!==n.id&&(i(t,n)?n.set({isOrganisationLinked:t.get("isOrganisationLinked"),isRepositoryLinked:t.get("isRepositoryLinked"),dvcsRepoId:t.get("dvcsRepoId"),isFirstSyncRunning:t.get("isFirstSyncRunning")}):e(t,n)&&n.set({isOrganisationLinked:t.get("isOrganisationLinked")}))})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/views/RepositoryShortcutsList.js' */
"use strict";define("repository-shortcuts/views/repository-shortcut-list",["jquery","repository-shortcuts/views/repository-shortcut","repository-shortcuts/dialogs/add"],function(t,e,o){return JIRA.Projects.Sidebar.ProjectShortcuts.Views.List.extend({template:JIRA.Software.RepositoryShortcuts.Templates.content,childView:e,ui:{itemsContainer:".aui-nav",add:".repo-shortcuts-group__add"},collectionEvents:{add:function(){0!==this.collection.length&&this.$el.hasClass("repo-shortcuts-group_empty")&&this.$el.removeClass("repo-shortcuts-group_empty")},remove:function(){0!==this.collection.length||this.$el.hasClass("repo-shortcuts-group_empty")||this.$el.addClass("repo-shortcuts-group_empty")}},initialize:function(){var e=this;JIRA.API.getSidebar().done(function(o){var r=o.getAUISidebar(!0);r.on("expand-end",function(){t(".aui-sidebar-submenu-dialog .repo-shortcuts-group__dropdown").remove(),t(".aui-sidebar-submenu-dialog .repo-shortcuts-syncing-dialog").remove()}),r.on("collapse-start",function(){e.$(".repo-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke"),e._addConnectionsAvailableMarkerOnSidebarIcon()})})},onRender:function(){var t=this,e=new o({sidebarItem:JIRA.API.Sidebar.getGroup(this.options.targetGroup,!0).getItem("repo-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection}),r=JIRA.API.Projects.getCurrentProjectId();this.listenTo(e,"dialog:open",function(){t.trigger("add:open"),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.add-link.click",data:{projectId:r}})}),this.listenTo(e,"dialog:close",function(e){t.trigger("add:close",e),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.add-link.close",data:{projectId:r,isSave:e}})}),this._addConnectionsAvailableMarkerOnSidebarIcon()},serializeData:function(){return{canManageShortcuts:!0,numberOfShortcuts:this.collection.length}},_addConnectionsAvailableMarkerOnSidebarIcon:function(){var t=this.collection.some(function(t){return t.hasNotLinkedOrg()||t.hasLinkedOrgAndNotRepo()});t&&this.$el.addClass("connections-available")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/views/RepositoryShortcut.js' */
"use strict";define("repository-shortcuts/views/repository-shortcut",["jquery","underscore","repository-shortcuts/dialogs/connection","repository-shortcuts/dialogs/edit","repository-shortcuts/services/dvcs-integrator"],function(e,t,o,r,i){function n(e){return"bitbucket"===e||"github"===e}return JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut.extend({template:JIRA.Software.RepositoryShortcuts.Templates.shortcut,initialize:function(){t.bindAll(this,"toggleDropdown")},ui:{integrate:".repo-shortcuts-group__actions__integrate",del:".repo-shortcuts-group__actions__delete",edit:".repo-shortcuts-group__actions__edit",trigger:".repo-shortcuts-group__actions",dropdown:".repo-shortcuts-group__dropdown",link:".repo-shortcuts-group__link",connectionDialogTrigger:".suggest-connection-trigger"},templateHelpers:function(){var e=this.model.attributes,t=this.model.collection.canUserManageDVCSAccounts,o=n(e.dvcsType);if(t&&this.model.isGithub()){var r=e.githubAppInstalled;return{warnOnGithubConnection:r}}var i=!(!e.isOrganisationLinked||e.dvcsRepo&&!e.isRepositoryLinked),s=t&&o&&!i;return{shouldWarnPotentialConnection:s}},onRender:function(){this.unwrapTemplate();var t=this,n=e(window),s=e(".aui-sidebar-body");new o({$trigger:this.ui.connectionDialogTrigger,repoShortcutModel:this.model}),this.ui.integrate.on("click",function(e){var o=t.model.attributes;if(e.preventDefault(),t.ui.trigger.blur(),"bitbucket"===o.dvcsType&&t.model.hasNotLinkedOrg())i.startBBOrganisationLink(o.dvcsOrg);else if("bitbucket"===o.dvcsType&&t.model.hasLinkedOrgAndNotRepo())i.startBBRepositoryLink(t.model.attributes).then(function(){t.model.set({isRepositoryLinked:!0}),t.model.trigger("dvcsremote:change",t.model)});else{if("github"!==o.dvcsType)throw"Unsupported DVCS Type";o.githubAppInstalled||i.startGithubOrganisationLink()}}),this.ui.edit.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var o=new r({repoShortcutModel:t.model,canUserManageDVCSAccounts:t.model.collection.canUserManageDVCSAccounts});t.trigger("edit:open",t.model),t.listenToOnce(o,"dialog:close",function(e){t.trigger("edit:close",t.model,e)})}),this.ui.del.on("click",function(e){e.preventDefault(),t.ui.trigger.blur(),new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:t.model})}),this.ui.dropdown.on({"aui-dropdown2-show":function(){t.$el.addClass("aui-nav-selected"),s.one("scroll",t.toggleDropdown),n.one("scroll",t.toggleDropdown),t.ui.trigger.focus()},"aui-dropdown2-hide":function(){t.$el.removeClass("aui-nav-selected"),s.off("scroll",t.toggleDropdown),n.off("scroll",t.toggleDropdown)}}),this.ui.connectionDialogTrigger.on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.warning.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t.model.id}})}),this.ui.link.on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.shortcut.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t.model.id,shortcutType:t.model.dvcsType}})})},serializeData:function(){var e=t.extend(this.model.toJSON(),{canManageShortcuts:!0,canManageDVCS:this.model.collection.canUserManageDVCSAccounts});return e}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/views/DialogContent.js' */
"use strict";define("repository-shortcuts/views/dialog-content",["repository-shortcuts/services/url-matcher","repository-shortcuts/services/dvcs-account-matcher"],function(t,e){var r=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent;return r.extend({ui:{form:"form",inputs:"input, button",submit:".repo-shortcuts-submit",cancel:".repo-shortcuts-cancel",url:".repo-shortcuts-url input",name:".repo-shortcuts-name input"},events:{"click @ui.cancel":function(t){t.preventDefault(),this.model.clear(),this.setNameAutomagically=!0,this.errorModel.clear(),this.trigger("cancel")},"click @ui.submit":"_handleFormSubmit","submit @ui.form":"_handleFormSubmit","blur @ui.url":function(){this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function(){this.model.set("url",this.ui.url.val()),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function(){this.setNameAutomagically=!1,this.model.set("name",this.ui.name.val())}},initialize:function(t){var e=t.errorModel,r=t.canUserManageDVCSAccounts;this.canUserManageDVCSAccounts=r,this.errorModel=e;var i=this.model.get("name");this.setNameAutomagically=0===i.length},serializeData:function(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action})},onRender:function(){},hideIconPicker:function(){},_handleFormSubmit:function(r){var i=this,o=function(t){i.model.set({url:i.ui.url.val(),name:i.ui.name.val()}),i.model.set(t),i.model.save()};r.preventDefault(),this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl(),this.model.set(this.model.defaults);var s=this.ui.url.val();if(this.canUserManageDVCSAccounts)e.matchUrlAgainstNetwork(s).then(function(t){return o(t)})["catch"](function(){return o({})});else{var a=t.parseUrl(s);o(a)}},tryToAutomagicallyDeriveNameFromUrl:function(){var e=this.ui.url.val().trim();if(this.setNameAutomagically){var i=t.parseUrl(e);if(i.dvcsRepo)this.setName(i.dvcsRepo);else{if(!i.dvcsOrg)return r.prototype.tryToAutomagicallyDeriveNameFromUrl.call(this);this.setName(i.dvcsOrg)}}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/views/AddDialogContent.js' */
"use strict";define("repository-shortcuts/views/add-dialog-content",["repository-shortcuts/views/dialog-content"],function(t){var e=JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog;return t.extend({template:e})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/views/EditDialogContent.js' */
"use strict";define("repository-shortcuts/views/edit-dialog-content",["repository-shortcuts/views/dialog-content"],function(t){return t.extend({template:JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog,ui:_.extend({},t.prototype.ui,{"delete":".repo-shortcuts-delete"})})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/views/ConnectionDialogContent.js' */
"use strict";define("repository-shortcuts/views/connection-dialog-content",["repository-shortcuts/services/dvcs-integrator"],function(t){return JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog,ui:{start:".repo-connection-start",cancel:".repo-connection-cancel"},events:{"click @ui.start":function(t){t.preventDefault(),this.triggerSubmitAnalyticEvent(),this.startConnection(),this.trigger("connection:start")},"click @ui.cancel":function(t){t.preventDefault(),this.triggerCancelAnalyticEvent(),this.trigger("connection:cancel")}},triggerSubmitAnalyticEvent:function(){this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-integrate.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-sync.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},triggerCancelAnalyticEvent:function(){this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-integrate.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-sync.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},templateHelpers:function(){return{dvcsName:this.dvcsName,isIntegration:this.isIntegration}},initialize:function(e){var n=e.repoShortcutModel,i=function(t){t.set({isRepositoryLinked:!0}),t.trigger("dvcsremote:change",t)},r=n.attributes;if(this.dvcsName="bitbucket"===r.dvcsType?"Bitbucket":"GitHub",this.isIntegration=n.hasNotLinkedOrg(),"bitbucket"===r.dvcsType&&n.hasNotLinkedOrg())this.startConnection=function(){return t.startBBOrganisationLink(r.dvcsOrg)};else if("bitbucket"===r.dvcsType&&n.hasLinkedOrgAndNotRepo())this.startConnection=function(){t.startBBRepositoryLink(n.attributes).then(function(){return i(n)})};else{if("github"!==r.dvcsType)throw"Unsupported DVCS Type";r.githubAppInstalled||(this.startConnection=function(){t.startGithubOrganisationLink()})}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/views/modal-dialogs/ConnectionModal.js' */
"use strict";define("repository-shortcuts/views/connection-modal",["underscore","aui/flag","repository-shortcuts/services/dvcs-integrator"],function(t,e,i){var n="aui-dialog2-small";return JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent,tagName:"section",attributes:{role:"dialog","class":"aui-layer aui-dialog2 "+n+" repo-integration-dialog","aria-hidden":"true","data-aui-modal":"false","data-aui-focus-selector":".aui-dialog2-content .repo-connect-start"},ui:{submit:".repo-connect-start",cancel:".repo-connect-cancel",edit:".repo-connect-edit"},events:{"click @ui.submit":function(t){t.preventDefault(),this.triggerSubmitAnalyticEvent(),this.handleSubmit()},"click @ui.cancel":function(t){t.preventDefault(),this.triggerCancelAnalyticEvent(),this._removeAndHide()},"click @ui.edit":function(t){t.preventDefault(),this._removeAndHide(),this.triggerEditAnalyticEvent(),this.repoShortcutModel.trigger("edit:start",this.repoShortcutModel.id)}},templateHelpers:function(){return{dvcsName:this.dvcsName,canUserManageDVCSAccounts:this.canUserManageDVCSAccounts,isIntegration:this.isIntegration}},_removeAndHide:function(){var t=this;AJS.dialog2(this.$el).hide(),setTimeout(function(){return t.destroy()})},triggerSubmitAnalyticEvent:function(){this.canUserManageDVCSAccounts&&(this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}))},triggerEditAnalyticEvent:function(){this.canUserManageDVCSAccounts&&(this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}))},triggerCancelAnalyticEvent:function(){this.canUserManageDVCSAccounts&&(this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}))},initialize:function(t){var e=this,n=t.repoShortcutModel,r=t.canUserManageDVCSAccounts;this.repoShortcutModel=n;var a=function(t){t.set({isRepositoryLinked:!0}),t.trigger("dvcsremote:change",t),e._removeAndHide()},c=n.attributes;if(this.dvcsName="bitbucket"===c.dvcsType?"Bitbucket":"GitHub",this.canUserManageDVCSAccounts=r,this.isIntegration=n.hasNotLinkedOrg(),"bitbucket"===c.dvcsType&&n.hasNotLinkedOrg()&&r)this.handleSubmit=function(){return i.startBBOrganisationLink(c.dvcsOrg)};else if("bitbucket"===c.dvcsType&&n.hasLinkedOrgAndNotRepo()&&r)this.handleSubmit=function(){i.startBBRepositoryLink(n.attributes).then(function(){return a(n)})["catch"](function(){return e._removeAndHide()})};else{if("github"!==c.dvcsType)throw"Unsupported DVCS Type";c.githubAppInstalled||(this.handleSubmit=function(){i.startGithubOrganisationLink()})}},onRender:function(){AJS.dialog2(this.$el).show()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/dialogs/Add.js' */
"use strict";define("repository-shortcuts/dialogs/add",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/add-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler"],function(e,t,s,i){return JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add.extend({initialize:function(r){_.bindAll(this,"hide","refresh","focusForm");var o=this;this.analyticsSave=!1,this.sidebarItem=r.sidebarItem,this.projectKey=r.projectKey,this.collection=r.collection,this.model=new t(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new s({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts}),this.view.render();var c=e(window),n=e(document),a=e(".aui-sidebar-body");this.dialog=AJS.InlineDialog(this.sidebarItem.ui.link,"repo-shortcuts-group__add-dialog",function(e,t,s){return o.sidebarItem.$el.addClass("aui-nav-selected"),o.view.render(),o.view.$el.appendTo(e),o.view.ui.url.focus(),c.on("scroll.repo-shortcuts",function(){o.refresh()}),a.on("scroll.repo-shortcuts",function(){o.hide()}),n.on("showLayer",o.focusForm),c.on("resize",o.refresh),s(),!1},{gravity:"w",autoWidth:!0,initCallback:function(){o.trigger("dialog:open"),o.analyticsSave=!1},hideCallback:function(){o.sidebarItem.$el.removeClass("aui-nav-selected"),o.sidebarItem.ui.link.blur(),c.off("scroll.repo-shortcuts"),a.off("scroll.repo-shortcuts"),n.off("showLayer",o.focusForm),o.trigger("dialog:close",o.analyticsSave)},persistent:!0,closeOnTriggerClick:!0}),this.listenTo(this.view,"render",this.refresh),this.listenTo(this.view,"cancel",this.hideAndRender),this.listenTo(this.model,"save:success",function(){var e=new t(this.model.toJSON(),{projectKey:this.projectKey});this.collection.add(e),this.model.clear(),this.analyticsSave=!0,this.hide(),"bitbucket"!==e.attributes.dvcsType&&"github"!==e.attributes.dvcsType||i(e,this.collection.canUserManageDVCSAccounts),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.link-repo.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),dvcsType:e.attributes.dvcsType}})}),this.listenTo(this.sidebarItem,"before:select",function(e){return e.preventDefault()}),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide),e(".repo-shortcuts-group").on("click","li",this.hide)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/dialogs/AddModal.js' */
"use strict";define("repository-shortcuts/dialogs/add-modal",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/add-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler","aui/flag"],function(e,t,o,s,i){return JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.collection=e.collection,this.projectKey=e.projectKey,this.projectId=e.projectId,this.analyticsSave=!1,this.model=new t(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new o({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts}),this.view.render(),this.dialog=AJS.dialog2(this.view.$el),this.listenTo(this.model,"save:success",function(){var e=new t(this.model.toJSON(),{projectKey:this.projectKey});this.collection.add(e),this.model.clear(),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.link-repo.click",data:{projectId:this.projectId,dvcsType:e.attributes.dvcsType}}),this.analyticsSave=!0,this._closeDialog(),"bitbucket"===e.attributes.dvcsType||"github"===e.attributes.dvcsType?(s(e,this.collection.canUserManageDVCSAccounts),e.hasLinkedAllComponents()&&i({type:"success",title:"You have added the repository",body:"Nicely done! Your team is going to love this.",close:"manual"})):i({type:"success",title:"You have added the shortcut",body:"Nicely done! Your team is going to love this.",close:"manual"})}),this.listenTo(this.view,"cancel",this._closeDialog),this.listenTo(this.dialog,"hide",this._cleanUpDialog)},show:function(){this.dialog.show(),this.view.ui.url.focus(),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.add-link.click",data:{projectId:this.projectId}})},_closeDialog:function(){this.dialog.hide()},_cleanUpDialog:function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.add-link.close",data:{projectId:this.projectId,isSave:this.analyticsSave}}),e("#add-repository-dialog").parent().remove()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/dialogs/Edit.js' */
"use strict";define("repository-shortcuts/dialogs/edit",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/edit-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler","aui/flag"],function(e,t,o,r,s){return JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit.extend({initialize:function(i){var c=this,d=i.repoShortcutModel,n=i.canUserManageDVCSAccounts;_.bindAll(this,"hide"),this.model=new t(d.toJSON(),{projectKey:d.projectKey||d.collection.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors((void 0),{model:this.model}),this.view=new o({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:n}),this.view.render();var a=e(JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome({}));this.view.$el.appendTo(a),this.dialog=AJS.dialog2(a),this.dialog.show(),this.view.ui.url.focus();var l=JIRA.API.Projects.getCurrentProjectId();this.view.ui["delete"].on("click",function(e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.click",data:{projectId:l,shortcutId:c.model.id}}),e.preventDefault(),c.hide();var t=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:c.model});c.listenToOnce(t,"dialog:close",function(e){e?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.confirm",data:{projectId:l,shortcutId:c.model.id}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.cancel",data:{projectId:l,shortcutId:c.model.id}})})}),this.listenTo(this.model,"remove:success",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.success",data:{projectId:l,shortcutId:c.model.id}}),d.collection.remove(d),s({type:"success",body:"Shortcut deleted.",close:"manual"})}),this.listenTo(this.model,"save:start",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.save",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:c.model.id}})}),this.listenTo(this.view,"cancel",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:d.id}}),c.hide()}),this.listenTo(this.model,"save:success",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.success",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:c.model.id}}),c.hide(),d.set(c.model.toJSON()),"bitbucket"===d.get("dvcsType")||"github"===d.get("dvcsType")?(r(d,n),d.hasLinkedAllComponents()&&s({type:"success",body:"You have updated the repository",close:"manual"})):s({type:"success",body:"You have updated the shortcut",close:"manual"})}),this.dialog.on("hide",function(){return c.trigger("dialog:close",c.analyticsSave)})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'jira-development-integration-plugin/js/repository-shortcuts/dialogs/Connection.js' */
"use strict";define("repository-shortcuts/dialogs/connection",["jquery","underscore","repository-shortcuts/views/connection-dialog-content"],function(i,e,o){return JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(t){var r=this,s=t.$trigger,n=t.repoShortcutModel;e.bindAll(this,"hide");var c=this,l={gravity:"w",persistent:!0,closeOnTriggerClick:!0,initCallback:function(){c.trigger("dialog:open"),c.analyticsSave=!1},hideCallback:function(){i(window).off("scroll.repo-shortcuts"),i(".aui-sidebar-body").off("scroll.repo-shortcuts"),i(document).off("showLayer",c.focusForm),c.trigger("syncDialog:close")}},a=function(e,o,t){var s=i(window),n=i(".aui-sidebar-body");return e.addClass("connection-dialog"),r.view.render(),r.view.$el.appendTo(e),s.on("resize",r.refresh),s.on("scroll.repo-shortcuts",r.refresh),n.on("scroll.repo-shortcuts",r.hide),t(),!1},d="suggest-connection-dialog-"+n.id;this.view=new o({repoShortcutModel:n}),this.listenTo(this.view,"connection:start",this.hide),this.listenTo(this.view,"connection:cancel",this.hide),this.dialog=AJS.InlineDialog(s,d,a,l),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide)},hide:function(){this.dialog.hide()},refresh:function(){this.dialog.refresh()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-shortcut-utils', location = 'jira-development-integration-plugin/js/repository-shortcuts/utils/ShortcutUtils.js' */
"use strict";define("repository-shortcuts/utils/repository-shortcut-utils",["exports"],function(t){t.mapDvcsTypeToIcon=function(t){switch(t){case"bitbucket":return"bitbucket";case"github":return"repos";default:return"shortcut"}},t.shouldShowSync=function(t,e){var s=t.attributes,i="bitbucket"===s.dvcsType||"github"===s.dvcsType,o=Boolean(s.isOrganisationLinked&&(!s.dvcsRepo||s.isRepositoryLinked));return e&&i&&!o}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3', location = 'jira-development-integration-plugin/js/repository-shortcuts/views/RepositoryShortcutsSidebarGroup.js' */
"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}define("repository-shortcuts/views/repository-shortcut-sidebar-group",["underscore","jira/dev-status/util/es6","repository-shortcuts/views/connection-modal","repository-shortcuts/dialogs/edit","repository-shortcuts/utils/repository-shortcut-utils"],function(t,e,o,n,r){var i="com.atlassian.jira.jira-projects-plugin:source.code.link.",c="sidebar-project-shortcuts";return JIRA.Projects.Libs.Marionette.CompositeView.extend({initialize:function(){var t=this;JIRA.API.getSidebar().done(function(e){t._updateAllRepoShortcutItems(e),t._initialiseSyncRepoDialog(e),t._initialiseEditRepoDialog(e),t.collection.on("change",function(o){return t._updateRepoShortcutItem(o,e)},!0).on("add",function(o){return t._addNewShortcutToSidebar(o,e)},!0).on("remove",function(o){return t._removeShortcutFromSidebar(o.id,e)},!0).on("edit:start",function(e){t._showEditShortcutDialog(e,"integrationDialog")},!0)})},_updateAllRepoShortcutItems:function(t){var o=this;if(!this.collection.isEmpty()){var n=t.getGroup(c,!0).links.slice(0),a=n.filter(function(t){return e.stringStartsWith(t.id,i)});if(0!==a.length){var s=a[0].canEdit,u=this.collection.map(function(t){return{id:""+i+t.id,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),canEdit:s,showSync:r.shouldShowSync(t,o.collection.canUserManageDVCSAccounts)}}),d=e.findIndex(n,function(t){return t.id===a[0].id});n.splice.apply(n,[d,a.length].concat(_toConsumableArray(u)));var l=t.getGroup(c,!0);t.replaceGroup(c,t.createGroup({id:c,name:l.getName(),links:n,section:!0},!0),!0)}}},_updateRepoShortcutItem:function(t,e){e.replaceItem(""+i+t.id,{id:""+i+t.id,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),canEdit:!0,showSync:r.shouldShowSync(t,this.collection.canUserManageDVCSAccounts)},!0)},_initialiseSyncRepoDialog:function(t){var e=this;t.on(t.events.SYNC,function(t){var n=e._getRepoShortcutId(t.target.getId(!0));if(n){var r=e.collection.models.find(function(t){return t.get("id")===n}),i=new o({repoShortcutModel:r,canUserManageDVCSAccounts:e.collection.canUserManageDVCSAccounts});i.render()}},!0)},_initialiseEditRepoDialog:function(t){var e=this;t.on(t.events.EDIT,function(t){e._showEditShortcutDialog(e._getRepoShortcutId(t.target.getId(!0)),"sidebar")},!0)},_showEditShortcutDialog:function(t,e){if(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t,referrer:e}});var o=this.collection.models.find(function(e){return e.get("id")===t});new n({repoShortcutModel:o,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts})}},_getRepoShortcutId:function(t){return e.stringStartsWith(t,i)?t.substr(i.length):null},_addNewShortcutToSidebar:function(t,o){var n=""+i+t.id,a={id:n,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),showSync:r.shouldShowSync(t,this.collection.canUserManageDVCSAccounts),canEdit:!0},s=o.getGroup(c,!0).links,u=e.findIndex(s,function(t){return e.stringStartsWith(t.id,"com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link")});u=u>=0?u:void 0,o.addItem(c,a,u,!0)},_removeShortcutFromSidebar:function(t,e){var o=""+i+t;e.deleteItem(o,!0)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3', location = 'jira-development-integration-plugin/js/repository-shortcuts/init.js' */
"use strict";require(["jquery","underscore","bluebird/Promise","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/services/dvcs-account-matcher","repository-shortcuts/dialogs/add-modal","repository-shortcuts/views/repository-shortcut-sidebar-group","aui/flag"],function(t,e,r,o,n,c,s){function a(c,a){var i=AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(c)+"/shortcut";t.ajax(i+"?shortcutType=source.code.link").done(function(t){var i=t.map(function(t){return n.matchUrlAgainstNetwork(t.url)});r.all(i).then(function(r){var n=t.map(function(t,o){return e.extend({},t,r[o])}),i=new o(n,{projectKey:c,canUserManageDVCSAccounts:a});new s({collection:i}),u(i)})["catch"](function(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:t&&t.message})})})}function i(t){var e=JIRA.API.Projects.getCurrentProjectId(),r=new c({projectKey:t.projectKey,projectId:e,collection:t});r.show()}function u(t){JIRA.API.getSidebar().done(function(e){e.on(e.events.JIRA_SUMMON_ADD_SHORTCUT_DIALOG,function(e,r){r.shortcutTypeId===d&&i(t)},!0),e.on(e.events.BEFORE_NAVIGATE,function(e,r){e.target.getId(!0)===p&&i(t)},!0)})}var p="com.pyxis.greenhopper.jira:project-sidebar-simple-add-repo",d="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcut-type",l="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3.repository-shortcuts-data";JIRA.API.getSidebar().done(function(){var t=WRM.data.claim(l),e=JIRA.API.Projects.getCurrentProjectKey();a(e,t.canManageDVCS)})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-navigation-next', location = 'jira-development-integration-plugin/js/repository-shortcuts/integration/navigation-next.js' */
"use strict";define("repository-shortcuts/navigation-next",["jquery","underscore","bluebird/Promise","jira/dev-status/util/es6","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/dialogs/add-modal","repository-shortcuts/dialogs/edit","repository-shortcuts/views/connection-modal","repository-shortcuts/utils/repository-shortcut-utils","repository-shortcuts/services/dvcs-account-matcher","jira/featureflags/feature-manager"],function(t,e,n,r,o,i,c,a,s,u,d){var l="com.atlassian.jira.jira-projects-plugin:source.code.link.",f="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-navigation-next.repository-shortcuts-data",p="com.pyxis.greenhopper.jira:project-sidebar-simple-add-repo",g=WRM.data.claim(f),h=g.canManageDVCS,m="endeavour.performance.shortcuts-optimization",v=d.isFeatureEnabled(m);return function(d){var f=d.shortcuts,g=d.onAdd,m=d.onEdit,y=d.onDelete,j=d.onBulkEdit,E=d.projectKey,A=void 0===E?"":E,I=d.projectId,w=void 0===I?"":I,S=d.isAdmin,C=void 0!==S&&S,b=d.canUserManageDVCSAccounts,D=void 0===b?h:b,M=A||JIRA.API.Projects.getCurrentProjectKey(),P=w||JIRA.API.Projects.getCurrentProjectId(),k=C||D,x=new o([],{canUserManageDVCSAccounts:k,projectKey:M}),J=!1,K=function(t){if(!J){var e=t.get("icon");if(e)return e}return s.mapDvcsTypeToIcon(t.get("dvcsType"))},R=function(t){return s.shouldShowSync(t,k)},U=function(t){return l+t.id},V=function(t,n){return e.extend({},n,{name:t.get("name"),url:t.get("url"),type:t.get("type"),id:U(t),icon:K(t),showSync:R(t),onEditClick:function(){return F(t.id,"sidebar")},onSyncClick:function(){return N(t.id)}})},T=function(t){return{name:t.text,url:t.href,id:t.id,icon:t.icon}},q=function(){return new i({collection:x,projectKey:M,projectId:P}).show()},F=function(t,e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit",data:{projectId:P,shortcutId:t,referrer:e}}),new c({repoShortcutModel:x.get(t),canUserManageDVCSAccounts:k})},N=function(t){return new a({repoShortcutModel:x.get(t),canUserManageDVCSAccounts:k}).render()},W=function(t){return g(V(t,{canEdit:!0}))},z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.canEdit,r=[].concat(t);v?j(r.map(function(t){return V(t,{canEdit:n})})):r.forEach(function(t){return m(V(t,{canEdit:n}))})},B=function(t){return y(U(t))};x.add(f.map(T),{projectKey:M}),f._collection=x,f.length&&!v&&z(x.models,{canEdit:f[0].canEdit}),x.on("add",function(t){return W(t)}).on("change",function(t,e){var n=e.canEdit,r=void 0===n||n;return z(t,{canEdit:r})}).on("remove",function(t){return B(t)}).on("edit:start",function(t){return F(t,"integrationDialog")});var O=f.map(function(t){return u.matchUrlAgainstNetwork(t.href)});return n.all(O).then(function(t){J=!0,t.forEach(function(t,e){var n=f[e],r=x.get(n.id);r&&r.set(t,{silent:v,canEdit:n.canEdit})}),v&&r.requestIdleCallback(function(){f.length&&z(x.models,{canEdit:f[0].canEdit})})})["catch"](function(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:t&&t.message})}),(JIRA.API.getNavigationApi||t.Deferred)().then(function(t){t.onItemClick(t.viewIds.SOFTWARE,p,q)}),{add:q}}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:uri-1.14.1', location = 'atlassian-jslibs/libs/uri/src/URI.js' */
!function(t){define("atlassian/libs/uri-1.14.1",function(){var e={};return t.call(e),e.URI.noConflict()})}(function(){/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.14.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
!function(t,e){"use strict";t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)}(this,function(t,e,r,s){"use strict";function n(t,e){return this instanceof n?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==e?this.absoluteTo(e):this):new n(t,e)}function i(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function a(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function o(t){return"Array"===a(t)}function h(t,e){var r,s,n={};if(o(e))for(r=0,s=e.length;r<s;r++)n[e[r]]=!0;else n[e]=!0;for(r=0,s=t.length;r<s;r++)void 0!==n[t[r]]&&(t.splice(r,1),s--,r--);return t}function u(t,e){var r,s;if(o(e)){for(r=0,s=e.length;r<s;r++)if(!u(t,e[r]))return!1;return!0}var n=a(e);for(r=0,s=t.length;r<s;r++)if("RegExp"===n){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function p(t,e){if(!o(t)||!o(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,s=t.length;r<s;r++)if(t[r]!==e[r])return!1;return!0}function c(t){return escape(t)}function l(t){return encodeURIComponent(t).replace(/[!'()*]/g,c).replace(/\*/g,"%2A")}function d(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}}function f(t,e){return function(r,s){return void 0===r?this._parts[t]||"":(null!==r&&(r+="",r.charAt(0)===e&&(r=r.substring(1))),this._parts[t]=r,this.build(!s),this)}}var m=s&&s.URI;n.version="1.14.1";var _=n.prototype,g=Object.prototype.hasOwnProperty;n._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:n.duplicateQueryParameters,escapeQuerySpace:n.escapeQuerySpace}},n.duplicateQueryParameters=!1,n.escapeQuerySpace=!0,n.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,n.idn_expression=/[^a-z0-9\.-]/i,n.punycode_expression=/(xn--)/i,n.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,n.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},n.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},n.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,n.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},n.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return n.domAttributes[e]}},n.encode=l,n.decode=decodeURIComponent,n.iso8859=function(){n.encode=escape,n.decode=unescape},n.unicode=function(){n.encode=l,n.decode=decodeURIComponent},n.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},n.encodeQuery=function(t,e){var r=n.encode(t+"");return void 0===e&&(e=n.escapeQuerySpace),e?r.replace(/%20/g,"+"):r},n.decodeQuery=function(t,e){t+="",void 0===e&&(e=n.escapeQuerySpace);try{return n.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}},n.recodePath=function(t){for(var e=(t+"").split("/"),r=0,s=e.length;r<s;r++)e[r]=n.encodePathSegment(n.decode(e[r]));return e.join("/")},n.decodePath=function(t){for(var e=(t+"").split("/"),r=0,s=e.length;r<s;r++)e[r]=n.decodePathSegment(e[r]);return e.join("/")};var y,v={encode:"encode",decode:"decode"},b=function(t,e){return function(r){try{return n[e](r+"").replace(n.characters[t][e].expression,function(r){return n.characters[t][e].map[r]})}catch(t){return r}}};for(y in v)n[y+"PathSegment"]=b("pathname",v[y]);n.encodeReserved=b("reserved","encode"),n.parse=function(t,e){var r;return e||(e={}),r=t.indexOf("#"),r>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),r=t.indexOf("?"),r>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=n.parseAuthority(t,e)):(r=t.indexOf(":"),r>-1&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(n.protocol_expression)?e.protocol=void 0:"//"===t.substring(r+1,r+3)?(t=t.substring(r+3),t=n.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0))),e.path=t,e},n.parseHost=function(t,e){var r,s,n=t.indexOf("/");return n===-1&&(n=t.length),"["===t.charAt(0)?(r=t.indexOf("]"),e.hostname=t.substring(1,r)||null,e.port=t.substring(r+2,n)||null,"/"===e.port&&(e.port=null)):t.indexOf(":")!==t.lastIndexOf(":")?(e.hostname=t.substring(0,n)||null,e.port=null):(s=t.substring(0,n).split(":"),e.hostname=s[0]||null,e.port=s[1]||null),e.hostname&&"/"!==t.substring(n).charAt(0)&&(n++,t="/"+t),t.substring(n)||"/"},n.parseAuthority=function(t,e){return t=n.parseUserinfo(t,e),n.parseHost(t,e)},n.parseUserinfo=function(t,e){var r,s=t.indexOf("/"),i=t.lastIndexOf("@",s>-1?s:t.length-1);return i>-1&&(s===-1||i<s)?(r=t.substring(0,i).split(":"),e.username=r[0]?n.decode(r[0]):null,r.shift(),e.password=r[0]?n.decode(r.join(":")):null,t=t.substring(i+1)):(e.username=null,e.password=null),t},n.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var r,s,i,a={},o=t.split("&"),h=o.length,u=0;u<h;u++)r=o[u].split("="),s=n.decodeQuery(r.shift(),e),i=r.length?n.decodeQuery(r.join("="),e):null,g.call(a,s)?("string"==typeof a[s]&&(a[s]=[a[s]]),a[s].push(i)):a[s]=i;return a},n.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=n.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},n.buildHost=function(t){var e="";return t.hostname?(e+=n.ip6_expression.test(t.hostname)?"["+t.hostname+"]":t.hostname,t.port&&(e+=":"+t.port),e):""},n.buildAuthority=function(t){return n.buildUserinfo(t)+n.buildHost(t)},n.buildUserinfo=function(t){var e="";return t.username&&(e+=n.encode(t.username),t.password&&(e+=":"+n.encode(t.password)),e+="@"),e},n.buildQuery=function(t,e,r){var s,i,a,h,u="";for(i in t)if(g.call(t,i)&&i)if(o(t[i]))for(s={},a=0,h=t[i].length;a<h;a++)void 0!==t[i][a]&&void 0===s[t[i][a]+""]&&(u+="&"+n.buildQueryParameter(i,t[i][a],r),e!==!0&&(s[t[i][a]+""]=!0));else void 0!==t[i]&&(u+="&"+n.buildQueryParameter(i,t[i],r));return u.substring(1)},n.buildQueryParameter=function(t,e,r){return n.encodeQuery(t,r)+(null!==e?"="+n.encodeQuery(e,r):"")},n.addQuery=function(t,e,r){if("object"==typeof e)for(var s in e)g.call(e,s)&&n.addQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=r);"string"==typeof t[e]&&(t[e]=[t[e]]),o(r)||(r=[r]),t[e]=(t[e]||[]).concat(r)}},n.removeQuery=function(t,e,r){var s,i,a;if(o(e))for(s=0,i=e.length;s<i;s++)t[e[s]]=void 0;else if("object"==typeof e)for(a in e)g.call(e,a)&&n.removeQuery(t,a,e[a]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==r?t[e]===r?t[e]=void 0:o(t[e])&&(t[e]=h(t[e],r)):t[e]=void 0}},n.hasQuery=function(t,e,r,s){if("object"==typeof e){for(var i in e)if(g.call(e,i)&&!n.hasQuery(t,i,e[i]))return!1;return!0}if("string"!=typeof e)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(a(r)){case"Undefined":return e in t;case"Boolean":var h=Boolean(o(t[e])?t[e].length:t[e]);return r===h;case"Function":return!!r(t[e],e,t);case"Array":if(!o(t[e]))return!1;var c=s?u:p;return c(t[e],r);case"RegExp":return o(t[e])?!!s&&u(t[e],r):Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return o(t[e])?!!s&&u(t[e],r):t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.commonPath=function(t,e){var r,s=Math.min(t.length,e.length);for(r=0;r<s;r++)if(t.charAt(r)!==e.charAt(r)){r--;break}return r<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(r)&&"/"===e.charAt(r)||(r=t.substring(0,r).lastIndexOf("/")),t.substring(0,r+1))},n.withinString=function(t,e,r){r||(r={});var s=r.start||n.findUri.start,i=r.end||n.findUri.end,a=r.trim||n.findUri.trim,o=/[a-z0-9-]=["']?$/i;for(s.lastIndex=0;;){var h=s.exec(t);if(!h)break;var u=h.index;if(r.ignoreHtml){var p=t.slice(Math.max(u-3,0),u);if(p&&o.test(p))continue}var c=u+t.slice(u).search(i),l=t.slice(u,c).replace(a,"");if(!r.ignore||!r.ignore.test(l)){c=u+l.length;var d=e(l,u,c,t);t=t.slice(0,u)+d+t.slice(c),s.lastIndex=u+d.length}}return s.lastIndex=0,t},n.ensureValidHostname=function(e){if(e.match(n.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.toASCII(e).match(n.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},n.noConflict=function(t){if(t){var e={URI:this.noConflict()};return s.URITemplate&&"function"==typeof s.URITemplate.noConflict&&(e.URITemplate=s.URITemplate.noConflict()),s.IPv6&&"function"==typeof s.IPv6.noConflict&&(e.IPv6=s.IPv6.noConflict()),s.SecondLevelDomains&&"function"==typeof s.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=s.SecondLevelDomains.noConflict()),e}return s.URI===this&&(s.URI=m),this},_.build=function(t){return t===!0?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=n.build(this._parts),this._deferred_build=!1),this},_.clone=function(){return new n(this)},_.valueOf=_.toString=function(){return this.build(!1)._string},_.protocol=d("protocol"),_.username=d("username"),_.password=d("password"),_.hostname=d("hostname"),_.port=d("port"),_.query=f("query","?"),_.fragment=f("fragment","#"),_.search=function(t,e){var r=this.query(t,e);return"string"==typeof r&&r.length?"?"+r:r},_.hash=function(t,e){var r=this.fragment(t,e);return"string"==typeof r&&r.length?"#"+r:r},_.pathname=function(t,e){if(void 0===t||t===!0){var r=this._parts.path||(this._parts.hostname?"/":"");return t?n.decodePath(r):r}return this._parts.path=t?n.recodePath(t):"/",this.build(!e),this},_.path=_.pathname,_.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=n._parts();var s=t instanceof n,i="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var a=n.getDomAttribute(t);t=t[a]||"",i=!1}if(!s&&i&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=n.parse(String(t),this._parts);else{if(!s&&!i)throw new TypeError("invalid input");var o=s?t._parts:t;for(r in o)g.call(this._parts,r)&&(this._parts[r]=o[r])}return this.build(!e),this},_.is=function(t){var e=!1,s=!1,i=!1,a=!1,o=!1,h=!1,u=!1,p=!this._parts.urn;switch(this._parts.hostname&&(p=!1,s=n.ip4_expression.test(this._parts.hostname),i=n.ip6_expression.test(this._parts.hostname),e=s||i,a=!e,o=a&&r&&r.has(this._parts.hostname),h=a&&n.idn_expression.test(this._parts.hostname),u=a&&n.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return p;case"absolute":return!p;case"domain":case"name":return a;case"sld":return o;case"ip":return e;case"ip4":case"ipv4":case"inet4":return s;case"ip6":case"ipv6":case"inet6":return i;case"idn":return h;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var Q=_.protocol,w=_.port,A=_.hostname;_.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(n.protocol_expression)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return Q.call(this,t,e)},_.scheme=_.protocol,_.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return w.call(this,t,e)},_.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={};n.parseHost(t,r),t=r.hostname}return A.call(this,t,e)},_.host=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?n.buildHost(this._parts):"":(n.parseHost(t,this._parts),this.build(!e),this)},_.authority=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?n.buildAuthority(this._parts):"":(n.parseAuthority(t,this._parts),this.build(!e),this)},_.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var r=n.buildUserinfo(this._parts);return r.substring(0,r.length-1)}return"@"!==t[t.length-1]&&(t+="@"),n.parseUserinfo(t,this._parts),this.build(!e),this},_.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=n.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},_.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var s=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,s),o=new RegExp("^"+i(a));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&n.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(o,t),this.build(!e),this},_.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var s=this._parts.hostname.length-this.tld(e).length-1;return s=this._parts.hostname.lastIndexOf(".",s-1)+1,this._parts.hostname.substring(s)||""}if(!t)throw new TypeError("cannot set domain empty");if(n.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var a=new RegExp(i(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,t)}return this.build(!e),this},_.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var s=this._parts.hostname.lastIndexOf("."),n=this._parts.hostname.substring(s+1);return e!==!0&&r&&r.list[n.toLowerCase()]?r.get(this._parts.hostname)||n:n}var a;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');a=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,t)}return this.build(!e),this},_.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,s=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?n.decodePath(s):s}var a=this._parts.path.length-this.filename().length,o=this._parts.path.substring(0,a),h=new RegExp("^"+i(o));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=n.recodePath(t),this._parts.path=this._parts.path.replace(h,t),this.build(!e),this},_.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),s=this._parts.path.substring(r+1);return t?n.decodePathSegment(s):s}var a=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(a=!0);var o=new RegExp(i(this.filename())+"$");return t=n.recodePath(t),this._parts.path=this._parts.path.replace(o,t),a?this.normalizePath(e):this.build(!e),this},_.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r,s,a=this.filename(),o=a.lastIndexOf(".");return o===-1?"":(r=a.substring(o+1),s=/^[a-z0-9%]+$/i.test(r)?r:"",t?n.decodePathSegment(s):s)}"."===t.charAt(0)&&(t=t.substring(1));var h,u=this.suffix();if(u)h=t?new RegExp(i(u)+"$"):new RegExp(i("."+u)+"$");else{if(!t)return this;this._parts.path+="."+n.recodePath(t)}return h&&(t=n.recodePath(t),this._parts.path=this._parts.path.replace(h,t)),this.build(!e),this},_.segment=function(t,e,r){var s=this._parts.urn?":":"/",n=this.path(),i="/"===n.substring(0,1),a=n.split(s);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(i&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(o(e)){a=[];for(var h=0,u=e.length;h<u;h++)(e[h].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(e[h]))}else(e||"string"==typeof e)&&(""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=e:a.splice(t,1);return i&&a.unshift(""),this.path(a.join(s),r)},_.segmentCoded=function(t,e,r){var s,i,a;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(s=this.segment(t,e,r),o(s))for(i=0,a=s.length;i<a;i++)s[i]=n.decode(s[i]);else s=void 0!==s?n.decode(s):void 0;return s}if(o(e))for(i=0,a=e.length;i<a;i++)e[i]=n.decode(e[i]);else e="string"==typeof e||e instanceof String?n.encode(e):e;return this.segment(t,e,r)};var P=_.query;return _.query=function(t,e){if(t===!0)return n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace),s=t.call(this,r);return this._parts.query=n.buildQuery(s||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=n.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):P.call(this,t,e)},_.setQuery=function(t,e,r){var s=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)s[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in t)g.call(t,i)&&(s[i]=t[i])}return this._parts.query=n.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},_.addQuery=function(t,e,r){var s=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.addQuery(s,t,void 0===e?null:e),this._parts.query=n.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},_.removeQuery=function(t,e,r){var s=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.removeQuery(s,t,e),this._parts.query=n.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},_.hasQuery=function(t,e,r){var s=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.hasQuery(s,t,e,r)},_.setSearch=_.setQuery,_.addSearch=_.addQuery,_.removeSearch=_.removeQuery,_.hasSearch=_.hasQuery,_.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},_.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},_.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},_.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===n.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},_.normalizePath=function(t){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var e,r,s,i=this._parts.path,a="";for("/"!==i.charAt(0)&&(e=!0,i="/"+i),i=i.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(a=i.substring(1).match(/^(\.\.\/)+/)||"",a&&(a=a[0]));;){if(r=i.indexOf("/.."),r===-1)break;0!==r?(s=i.substring(0,r).lastIndexOf("/"),s===-1&&(s=r),i=i.substring(0,s)+i.substring(r+3)):i=i.substring(3)}return e&&this.is("relative")&&(i=a+i.substring(1)),i=n.recodePath(i),this._parts.path=i,this.build(!t),this},_.normalizePathname=_.normalizePath,_.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(n.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},_.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},_.normalizeSearch=_.normalizeQuery,_.normalizeHash=_.normalizeFragment,_.iso8859=function(){var t=n.encode,e=n.decode;return n.encode=escape,n.decode=decodeURIComponent,this.normalize(),n.encode=t,n.decode=e,this},_.unicode=function(){var t=n.encode,e=n.decode;return n.encode=l,n.decode=unescape,this.normalize(),n.encode=t,n.decode=e,this},_.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var s="",i=0,a=e._parts.query.split("&"),o=a.length;i<o;i++){var h=(a[i]||"").split("=");s+="&"+n.decodeQuery(h[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==h[1]&&(s+="="+n.decodeQuery(h[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+s.substring(1)}return r+=n.decodeQuery(e.hash(),!0)},_.absoluteTo=function(t){var e,r,s,i=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof n||(t=new n(t)),i._parts.protocol||(i._parts.protocol=t._parts.protocol),this._parts.hostname)return i;for(r=0;s=a[r];r++)i._parts[s]=t._parts[s];return i._parts.path?".."===i._parts.path.substring(-2)&&(i._parts.path+="/"):(i._parts.path=t._parts.path,i._parts.query||(i._parts.query=t._parts.query)),"/"!==i.path().charAt(0)&&(e=t.directory(),i._parts.path=(e?e+"/":"")+i._parts.path,i.normalizePath()),i.build(),i},_.relativeTo=function(t){var e,r,s,i,a,o=this.clone().normalize();if(o._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new n(t).normalize(),e=o._parts,r=t._parts,i=o.path(),a=t.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===r.protocol&&(e.protocol=null),e.username!==r.username||e.password!==r.password)return o.build();if(null!==e.protocol||null!==e.username||null!==e.password)return o.build();if(e.hostname!==r.hostname||e.port!==r.port)return o.build();if(e.hostname=null,e.port=null,i===a)return e.path="",o.build();if(s=n.commonPath(o.path(),t.path()),!s)return o.build();var h=r.path.substring(s.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=h+e.path.substring(s.length),o.build()},_.equals=function(t){var e,r,s,i=this.clone(),a=new n(t),h={},u={},c={};if(i.normalize(),a.normalize(),i.toString()===a.toString())return!0;if(e=i.query(),r=a.query(),i.query(""),a.query(""),i.toString()!==a.toString())return!1;if(e.length!==r.length)return!1;h=n.parseQuery(e,this._parts.escapeQuerySpace),u=n.parseQuery(r,this._parts.escapeQuerySpace);for(s in h)if(g.call(h,s)){if(o(h[s])){if(!p(h[s],u[s]))return!1}else if(h[s]!==u[s])return!1;c[s]=!0}for(s in u)if(g.call(u,s)&&!c[s])return!1;return!0},_.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},_.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},n})});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = 'jira-fileviewer-module/file-service.js' */
define("jira/fileviewer/file-service",["jira/featureflags/feature-manager","jquery"],function(e,n){"use strict";function i(){return Object.keys(r).map(function(e){return r[e].join(", ")}).join(", ")}function t(e,n){Array.isArray(n)?e.push.apply(e,n):e.push(n)}var r={image:["a[file-preview-type=image]"],video:["a[file-preview-type=video]"],document:["a[file-preview-type=document]"]};return{findFiles:function(e){return n(e||document.body).find(i())},getFileSelector:i,getImageSelector:function(){return r.image.join(", ")},addImageSelector:function(e){t(r.image,e)},getVideoSelector:function(){return r.video.join(", ")},getDocumentSelector:function(){return r.document.join(", ")},addDocumentSelector:function(e){t(r.document,e)}}});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = 'jira-fileviewer-module/fileviewer.js' */
define("jira/fileviewer",["wrm/require","jira/fileviewer/file-service","jira/loading/loading","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jira/components/analytics-tracker/tracker","jira/util/navigator","atlassian/libs/uri-1.14.1","jquery","underscore"],function(e,i,t,r,n,a,o,l,c){"use strict";function d(){var e=l.Deferred();return s().done(function(){e.resolve(FileViewer)}),e.promise()}function u(e){var i=o(e.data("download-url")||e.attr("href"));return a.isIE()&&a.majorVersion()<12&&i.addSearch("stream","true"),i.toString()}function f(e){return e.data("download-url")||e.attr("href")}function s(){return m||(m=e(["wr!com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer"]),m.done(function(){g=new FileViewer({enableMiniMode:!0,viewers:["image","document","video"],moduleBackend:require("jira/fileviewer/module-backend/asynchronous"),analyticsBackend:require("jira/fileviewer/module-backend/analytics")}),g.on("fv.open",function(){r.disable,n.trackEvent("viewissue.attachment.view","click")}),g.on("fv.close",r.enable)})),m}function v(){g&&g.close()}function p(){var e=[],t=i.getImageSelector(),r=i.getDocumentSelector(),n=i.getVideoSelector(),a=l(t+", "+r+", "+n);a.each(function(){var i=l(this).closest("a");i.is(t)&&e.push({type:"image/png",id:i.attr("file-preview-id"),src:f(i),title:i.attr("file-preview-title"),thumbnail:i.attr("file-preview-url")||i.attr("data-download-url")||i.find("img").attr("src")}),i.is(r)&&e.push({type:"application/pdf",id:i.attr("file-preview-id"),src:u(i),title:i.attr("file-preview-title")}),i.is(n)&&e.push({type:i.attr("file-preview-mime-type"),id:i.attr("file-preview-id"),src:f(i),title:i.attr("file-preview-title"),thumbnail:i.attr("file-preview-url")||i.attr("data-download-url")||i.find("img").attr("src")})});var o=c.uniq(e,!1,function(e){return e.id});g.setFiles(o),a.off("simpleClick.fvOpen").on("simpleClick.fvOpen",function(e){e.preventDefault(),g.open({id:l(this).attr("file-preview-id")})})}function w(e){if(g)p();else{var r=i.findFiles(e);r.off("simpleClick.fvInit").on("simpleClick.fvInit",function(e){e.preventDefault();var i=l(this);t.showLoadingIndicator(),AJS.dim(),s().done(function(){p(),g.open({id:i.attr("file-preview-id")})}).fail(function(){window.location=f(i)}).always(function(){r.off("simpleClick.fvInit"),AJS.undim(),l(".aui-blanket").remove(),t.hideLoadingIndicator()})})}}var m,g;return{attachToElements:w,closeViewer:v,addImageSelector:function(e){i.addImageSelector(e)},addDocumentSelector:function(e){i.addDocumentSelector(e)},getFileViewerConstructor:d}});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = 'includes/jira/viewissue/issuecomponents.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.watchersWithBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label class="js-add-watchers-label">'+soy.$$escapeHtml("Add Watchers")+'</label><div class="autocomplete-user-target"><select id="watchers" name="watchers" data-description="'+soy.$$escapeHtml("Start Typing for Users")+'" class="watchers-user-picker hidden" multiple="multiple">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+="<option style=\"background-image:url('"+soy.$$escapeHtml(o.avatarUrls["16x16"])+'\')" selected="selected" value="'+soy.$$escapeHtml(o.accountId)+'">'+soy.$$escapeHtml(o.displayName)+"</option>"}return a+="</select></div></fieldset></form>"},JIRA.Templates.Issue.watchersNoBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label for="watchers-multi-select">'+soy.$$escapeHtml("Add Watchers")+'</label><div><input type="text" class="text" id="watchers-nosearch" /><div class="description">'+soy.$$escapeHtml("Type username and press enter.")+'</div></div><div class="recipients"><ol class="watchers">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,escape:!0})}return a+="</ol></div></fieldset></form>"},JIRA.Templates.Issue.error=function(e,s){for(var a="<p>"+soy.$$escapeHtml(e.msg)+"</p><ul>",t=e.errors,l=t.length,c=0;c<l;c++){var o=t[c];a+="<li>"+soy.$$escapeHtml(o)+"</li>"}return a+="</ul>"},JIRA.Templates.Issue.usersListReadOnly=function(e,s){for(var a='<form class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><div class="recipients"><ol class="voters">',t=e.users,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,readOnly:!0,escape:!0})}return a+="</ol></div></fieldset></form>"};;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/user-collection.js' */
define("jira/viewissue/watchers-voters/entities/user-collection",["require"],function(e){var r=e("jira/message"),s=e("backbone"),t=e("underscore"),o=e("jquery"),n=e("wrm/context-path"),i=e("jira/util/formatter"),a=JIRA.Templates.Issue,u=s.Model.extend({idAttribute:"key"});return s.Collection.extend({model:u,initialize:function(e){if(void 0===e)throw new Error("Must supply options");if(!e.issueKey)throw new Error("Must supply issue key");if(this.issueKey=e.issueKey,!e.endpoint)throw new Error("Must supply an endpoint");if(this.endpoint=e.endpoint,!e.modelKey)throw new Error("Must supply an model key");this.modelKey=e.modelKey},url:function(){return[n(),"rest/api/2/issue",this.issueKey,this.endpoint].join("/")},parse:function(e){return e&&e[this.modelKey]?e[this.modelKey]:[]},ajax:function(e){return e=t.extend({url:this.url(),headers:{"Content-Type":"application/json"},success:t.bind(function(){this.fetch()},this),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)},e),o.ajax(e)},getUser:function(e){return o.ajax({url:n()+"/rest/api/2/user?username="+encodeURIComponent(e),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)})},handleErrorResponse:function(e,s){var t=this._parseResponse(e.responseText);if(t.errorMessages){var o=a.error({msg:s,errors:t.errorMessages});r.showErrorMsg(o,{closeable:!0})}this.trigger("errorOccurred")},_parseResponse:function(e){try{return JSON.parse(e)}catch(e){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";r.showErrorMsg(e,{closeable:!0})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/voters-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/voters-user-collection",["jira/viewissue/watchers-voters/entities/user-collection"],function(e){return e.extend({initialize:function(t){var i={issueKey:t,endpoint:"votes",modelKey:"voters"};e.prototype.initialize.apply(this,[i])},vote:function(){return this.ajax({type:"POST"})},unvote:function(){return this.ajax({type:"DELETE"})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/watchers-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/watchers-user-collection",["jira/viewissue/watchers-voters/entities/user-collection","jira/util/data/meta"],function(e,t){return e.extend({initialize:function(i){this.canBrowseUsers=t.get("can-search-users"),this.isReadOnly=!t.get("can-edit-watchers");var a={issueKey:i,endpoint:"watchers",modelKey:"watchers"};e.prototype.initialize.apply(this,[a])},addWatcher:function(e){return this.ajax({type:"POST",data:'"'+e+'"'})},removeWatcher:function(e){return this.ajax({type:"DELETE",url:this.url()+"?accountId="+e})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/voters-view.js' */
define("jira/viewissue/watchers-voters/views/voters-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),r=(e("underscore"),e("jquery"),e("jira/jquery/deferred"),e("jira/util/formatter")),s=JIRA.Templates.Issue;return i.View.extend({$empty:void 0,initialize:function(e){this.collection=e.collection,this.collection.bind("replace reset add remove",this.render,this)},renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no voters for this issue"}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){return this.$el.html(s.usersListReadOnly({users:this.collection.toJSON()})),this.renderNoWatchers(),this.$el}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/abstract-watchers-view.js' */
define("jira/viewissue/watchers-voters/views/abstract-watchers-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),n=e("underscore"),r=e("jquery"),s=e("jira/jquery/deferred"),a=e("jira/util/formatter");return i.View.extend({$empty:void 0,renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no watchers."}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(n.bind(function(){this._render(),this.renderNoWatchers(),e.resolve(this.$el),setTimeout(n.bind(function(){this.focus()},this),0)},this)),e.promise()},watch:function(){r("#watching-toggle").text("Stop watching this issue")},unwatch:function(){r("#watching-toggle").text("Start watching this issue")},focus:r.noop,_incrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t+1),this.renderNoWatchers()},_decrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t-1),this.renderNoWatchers()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),i=e("underscore"),a=e("jira/util/logger"),s=e("jira/field/multi-user-list-picker"),c=JIRA.Templates.Issue;return t.extend({events:{selected:"addWatcherToModel",unselect:"removeWatcherFromModel"},_render:function(){this.$el.html(c.watchersWithBrowse({watchers:this.collection.toJSON()}));var e=new s({element:this.$el.find(".watchers-user-picker"),width:220});this.$el.find(".js-add-watchers-label").attr("for",e.$field.attr("id"))},focus:function(){this.$el.find("#watchers-textarea").focus()},addWatcherToModel:function(e,t){e.preventDefault(),this.collection.addWatcher(t.value()).done(i.bind(function(){this._incrementWatcherCount(),t.value()===r.get("remote-user")&&this.watch()},this))},removeWatcherFromModel:function(e,t){this.collection.removeWatcher(t.value()).done(i.bind(function(){this._decrementWatcherCount(),t.value()===r.get("remote-user")&&(this.unwatch(),a.trace("jira.issue.watcher.deleted"))},this))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-no-browse-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-no-browse-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),a=e("underscore"),i=e("jquery"),s=e("jira/util/logger"),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return t.extend({events:{"click .remove-recipient":"removeWatcher",submit:"addWatcher"},addWatcher:function(e){e.preventDefault(),this.removeInlineError();var t=i("#watchers-nosearch"),s=i.trim(t.val());t.attr("disabled","disabled"),this.hasUsername(s)?(t.removeAttr("disabled"),this.showInlineError(n.format("User {0} is already watching this issue",s)),t.val("")):this.collection.getUser(s).done(a.bind(function(e){var a=JIRA.Templates.Fields.recipientUsername({icon:e.avatarUrls["16x16"],username:e.name,displayName:e.displayName});s===r.get("remote-user")&&this.watch(),t.val(""),this.$(".watchers").append(a),this.collection.addWatcher(e.name),this._incrementWatcherCount()},this)).fail(a.bind(function(e){404===e.status&&this.showInlineError("User does not exist")},this)).always(function(){t.removeAttr("disabled").focus()})},hasUsername:function(e){var t=!1;return this.$(".watchers li").each(function(){if(i(this).attr("data-username")===e)return t=!0,!1}),t},removeInlineError:function(){this.$(".error").remove()},showInlineError:function(e){i("<div />").addClass("error").text(e).insertAfter(this.$(".description"))},focus:function(){i("#watchers-nosearch").focus()},removeWatcher:function(e){e.preventDefault();var t=i(e.target).closest("li"),a=t.attr("data-username");a&&(t.remove(),this.collection.removeWatcher(a),this._decrementWatcherCount(),a===r.get("remote-user")&&this.unwatch()),s.trace("jira.issue.watcher.deleted")},_render:function(){this.$el.html(o.watchersNoBrowse({watchers:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-read-only-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-read-only-view",["require"],function(e){var s=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=JIRA.Templates.Issue;return s.extend({_render:function(){this.$el.html(r.usersListReadOnly({users:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-inline-dialog-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view",["require"],function(e){var i=e("backbone"),t=e("jira/skate"),n=i.View.prototype.setElement;return i.View.extend({id:"inline-dialog-watchers",events:{"click .cancel":function(e){e.preventDefault(),this.hide()}},setElement:function(e){var s=e instanceof i.$?e.get(0):e;if(s)return this.el&&this.el.parentNode&&this.el!==s&&this.el.parentNode.removeChild(this.el),n.call(this,s),t.init(this.el),this},contents:function(e){var i=this.$el.find(".aui-inline-dialog-contents");0===i.length&&(i=AJS.$("<div/>",{class:"aui-inline-dialog-contents"}),this.$el.append(i)),i.html(e)},show:function(){this.el.setAttribute("open","")},hide:function(){this.el.removeAttribute("open")},isVisible:function(){return!!this.el.hasAttribute("open")}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/watchers.js' */
define("jira/viewissue/watchers-voters/watchers",["require"],function(e){"use strict";function i(){return h||(h=new a({el:d("#inline-dialog-watchers").get(0)})),h}function s(e){return e.isReadOnly?n:e.canBrowseUsers?r:t}var n=e("jira/viewissue/watchers-voters/views/watchers-read-only-view"),t=e("jira/viewissue/watchers-voters/views/watchers-no-browse-view"),r=e("jira/viewissue/watchers-voters/views/watchers-view"),o=e("jira/viewissue/watchers-voters/entities/watchers-user-collection"),a=e("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view"),c=e("jira/util/events"),l=e("jira/util/events/types"),w=e("jira/util/events/reasons"),u=e("jira/issue"),v=e("aui/inline-dialog"),d=e("jquery"),h=null;d(document).on("click","#view-watcher-list",function(e){e.preventDefault();var n=i(),t=d("#watching-toggle").next(".icon"),r=new o(u.getIssueKey());t.addClass("loading");var a=s(r);new a({collection:r}).render().done(function(e){t.removeClass("loading"),n.contents(e),n.show()}),r.on("errorOccurred",function(){n.hide()})}),d(document).on("keydown",function(e){h&&27===e.keyCode&&v.current!==h.el&&h.isVisible()&&(v.current&&v.current.hide(),h.hide())}),d(document).on("click",function(e){if(h){var i=d(e.target).closest("#inline-dialog-watchers, #watchers-suggestions").length;0===i&&h.isVisible()&&h.hide()}}),c.bind(l.NEW_CONTENT_ADDED,function(e,s,n){n===w.panelRefreshed&&s.is("#peoplemodule")&&i().setElement(s.find("#inline-dialog-watchers").get(0))})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/voters.js' */
define("jira/viewissue/watchers-voters/voters",["require"],function(e){"use strict";var i=e("jira/viewissue/watchers-voters/entities/voters-user-collection"),r=e("jira/viewissue/watchers-voters/views/voters-view"),t=e("jira/issue"),n=e("jira/ajs/layer/inline-layer"),s=e("aui/inline-dialog"),o=e("jquery"),c=s("#view-voter-list","voters",function(e,n,s){var a=o("#vote-toggle").next(".icon");a.addClass("loading");var u=new i(t.getIssueKey()),v=new r({collection:u}),l=u.fetch();l.done(function(){var i=v.render();e.html(i),e.find(".cancel").click(function(e){c.hide(),e.preventDefault()}),a.removeClass("loading"),s()}),u.on("errorOccurred",function(){c.hide()})},{width:240,useLiveEvents:!0,items:"#view-voters-list",preHideCallback:function(){return!n.current}});o(document).bind("keydown",function(e){27===e.keyCode&&s.current!==c&&c.is(":visible")&&(s.current&&s.current.hide(),c.hide())}),o(document).click(function(e){var i=s.current;i&&"voters"===i.id&&(o(e.target).closest("#inline-dialog-voters").length||i.hide())})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/toggler.js' */
define("jira/viewissue/watchers-voters/toggler",["require"],function(t){var e=t("jira/components/analytics-tracker/tracker"),a=t("jira/ajs/ajax/smart-ajax"),o=t("jira/flag"),n=t("jquery"),s=t("wrm/context-path"),i=t("jira/util/formatter"),r=function(t,o,i,r,c){var u,f=o+"-on",g=o+"-off",d="/voters",x=t.next(".icon"),p="POST",v=t.hasClass(f)?"on":"off";t.hasClass(f)&&(p="DELETE"),o.indexOf("watch")!==-1&&(d="/watchers"),t.removeClass(f).removeClass(g),"POST"===p&&(u={dummy:!0}),e.trackEvent("viewissue."+o+"."+v,"click"),n(a.makeRequest({url:s()+"/rest/api/1.0/issues/"+t.attr("rel")+d,type:p,dataType:"json",data:u,contentType:"application/json",complete:function(e,a,o){var n="POST"===p;o.successful?(n?(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)):(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)),i.text(o.data.count),i[n?"addClass":"removeClass"](f),i[n?"removeClass":"addClass"](g)):(o.aborted||l(o),n?(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)):(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)))}})).throbber({target:x})},l=function(t){var e=a.buildSimpleErrorContent(t,{alert:!0});if(t.hasData){var n=JSON.parse(t.data);n.errorMessages&&(e=n.errorMessages[0])}o.showErrorMsg(e,{closeable:!0})};n(document).delegate("#toggle-vote-issue","click",function(t){t.preventDefault(),n("#vote-toggle").click()}),n(document).delegate("#toggle-watch-issue","click",function(t){t.preventDefault(),n("#watching-toggle").click()});var c=function(t){n("input[type=hidden][id|=error]").each(function(e,a){var o=a.id.replace("error-","");t[o]=a.value})};n(document).delegate("#vote-toggle","click",function(t){t.preventDefault();var e={titleOn:"Remove vote for this issue",titleOff:"Vote for this issue",textOn:"Remove vote",textOff:"Add vote",actionTextOff:"Vote",actionTextOn:"Voted"},a=n(this),o=n(document.querySelectorAll("#vote-data")),s=n(document.querySelectorAll("#toggle-vote-issue"));c(e),r(a,"vote-state",o,s,e)}),n(document).delegate("#watching-toggle","click",function(t){t.preventDefault();var e={titleOn:"Stop watching this issue",titleOff:"Start watching this issue",textOn:"Stop watching",textOff:"Watch issue",actionTextOff:"Watch",actionTextOn:"Watching"},a=n(this),o=n(document.querySelectorAll("#watcher-data")),s=n(document.querySelectorAll("#toggle-watch-issue"));c(e),r(a,"watch-state",o,s,e)})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/initWatchersAndVoters.js' */
AJS.namespace("JIRA.VotersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/voters-user-collection")),AJS.namespace("JIRA.WatchersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/watchers-user-collection")),AJS.namespace("JIRA.VotersView",null,require("jira/viewissue/watchers-voters/views/voters-view")),AJS.namespace("JIRA.WatchersView",null,require("jira/viewissue/watchers-voters/views/watchers-view")),AJS.namespace("JIRA.WatchersNoBrowseView",null,require("jira/viewissue/watchers-voters/views/watchers-no-browse-view")),AJS.namespace("JIRA.WatchersReadOnly",null,require("jira/viewissue/watchers-voters/views/watchers-read-only-view"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/AnalyticsUtils.js' */
define("jira/viewissue/analytics-utils",["jira/util/data/meta","jira/issuenavigator/issue-navigator","jira/util/strings","wrm/context-path","jquery","exports"],function(n,t,e,i,r,s){function a(){return r(document.body).hasClass("navigator-issue-only")}function u(){return!!n.get("is-servicedesk-rendered")}function o(){return t.isNavigator()}function c(){return a()&&e.contains(location.search,"jql=")}function l(){return e.startsWith(location.pathname,i()+"/projects/")}s.context=function(){return c()?"fullscreen-issuenav":a()?"fullscreen":u()?"sd-queue":o()?"issuenav":l()?"project":"unknown"}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/slideshow/slideshow-configuration.js' */
define("jira/viewissue/slideshow/slideshow-configuration",["jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery"],function(e,t){var i={type:"image",centerOnScroll:!0,onStart:e.disable,onClosed:e.enable},n="elastic";return t.extend({},i,{transitionIn:n,transitionOut:n})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/image-wrap.js' */
define("jira/viewissue/element/image-wrap",["jira/fileviewer","jira/skate","jira/featureflags/feature-manager","underscore"],function(e,a,i,t){a("file-preview-type",{type:a.type.ATTRIBUTE,attached:t.debounce(function(){e.attachToElements()},0),detached:function(){e.closeViewer()}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/shortener.js' */
define("jira/ajs/shorten/shortener",["jira/util/formatter","jira/ajs/control","jira/data/local-storage","jquery"],function(t,e,i,n){return e.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){"string"==typeof t&&(t={element:t}),t=t||{},this.options=n.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=n(this.options.element),this._cleanupOldButtons(),this.$container.css("height","auto"),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&this.$container.children().length>0},_cleanupOldButtons:function(){this.$container.find("a.ellipsis.shortener-expand").remove(),this.$container.find("a.shortener-collapse").remove(),this.$container.find("br.shortener-expand-line-break").remove()},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".shortener-expand"),this._assignEvents("collapse-button",".shortener-collapse"),(!n.browser.msie||n.browser.version>="9")&&this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return n("<a href='#' class='ellipsis shortener-expand'></a>").attr("title",this.options.expandButtonTooltip).add("<br class='shortener-expand-line-break'>")},collapseButton:function(){return n("<a href='#' title='Hide' class='icon icon-hide shortener-collapse'></a>").append(n("<span>").text(this.options.collapseButtonTooltip))}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){if(clearTimeout(this._timerId),!this.expanded){var t=this;this._timerId=setTimeout(function(){t.collapse()},400)}}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{i.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(t){}},_loadState:function(){return i.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(this.$items.length>1)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var n=this.$items.eq(i).offset().left;if(n<=e&&(t++,t>this.options.numRows))return i;e=n}return-1},expand:function(){this._removeButtons(),this._getOverflowIndex()>0&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto"),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")),this.expanded=!0},collapse:function(){this._removeButtons();var e=this._getOverflowIndex();if(e>0){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var i=this.$expandButton.first();do{var s=this.$items.length-e;i.text("("+s+")"),this.$expandButton.insertBefore(this.$items[e]),e--;var o=this.$items.eq(e).offset(),r=this.$expandButton.offset();if(o.left<r.left&&r.top<o.top+10)break}while(e>0);var a=e<this.$items.length-1?this.$items.eq(e+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:a,position:"static",visibility:"visible",width:"auto"}),i.attr("title",t.format(this.options.expandButtonTooltip,s)),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")}else this.$container.css("height","auto");this.expanded=!1}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/namespace.js' */
AJS.namespace("AJS.Shortener",null,require("jira/ajs/shorten/shortener"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/shortener.js' */
define("jira/jquery/plugins/shorten/shorten",["jira/ajs/shorten/shortener","jquery"],function(n,e){e.fn.shorten=function(e){var r=[];return e=e||{},this.each(function(){e.element=this,r.push(new n(e))}),r}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/install.js' */
!function(){require("jira/jquery/plugins/shorten/shorten")}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/shorten.js' */
define("jira/viewissue/element/shorten",["jira/ajs/shorten/shortener","jira/skate"],function(e,t){return t("shorten",{type:t.type.CLASSNAME,attached:function(t){var n={};n.element=t,new e(n)}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initToggleBlock.js' */
define("jira/viewissue/init-toggle-block",["jira/util/events","jira/util/events/types","jira/toggleblock/toggle-block"],function(e,t,i){new i({blockSelector:".toggle-wrap",triggerSelector:".issue-container .mod-header .toggle-title",storageCollectionName:"block-states"}),t.ISSUE_REFRESHED&&e.bind(t.ISSUE_REFRESHED,function(){t.REFRESH_TOGGLE_BLOCKS&&e.trigger(t.REFRESH_TOGGLE_BLOCKS)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/comment-form.js' */
define("jira/viewissue/comment/comment-form",["jira/util/formatter","jira/util/events","jira/util/events/types","jira/ajs/ajax/smart-ajax","jira/issue","jira/dialog/form-dialog","wrm/context-path","jira/jquery/deferred","jquery"],function(e,t,i,n,r,o,s,a,m){var l=s(),d={setCaretAtEndOfCommentField:function(){var e,t=this.getField(),i=t[0];t.length&&(e=t.val().length,t.scrollTop(t.attr("scrollHeight")),i.setSelectionRange&&e>0&&i.setSelectionRange(e,e))},disable:function(){this.getForm().find("textarea").attr("readonly","readonly"),this.getForm().find("input[type=submit]").attr("disabled","disabled")},isDirty:function(){var e=this.getField();return!!e.length&&e[0].value!==e[0].defaultValue},handleBrowseAway:function(){if(d.isDirty()){var t=d.getForm(),i=t.length&&t.is(":visible");return i?"You have entered a comment on this issue. If you navigate away from this page without first saving, the comment will be lost.":void 0}},isVisibilityAvailble:function(){return"none"!=this.getForm().find("#commentLevel :selected").val()},setSubmitState:function(){m.trim(this.getField().val()).length>0&&this.isVisibilityAvailble()?this.getForm().find("#issue-comment-add-submit").removeAttr("disabled"):this.getForm().find("#issue-comment-add-submit").attr("disabled","disabled")},enable:function(){this.getForm().find("textarea").removeAttr("readonly"),this.getForm().find("input[type=submit]").removeAttr("disabled")},getCommentVisibility:function(){var e=this.getForm().find("#commentLevel :selected").val();if(e){var t=e.split(":");return{type:t[0],value:this.getForm().find("#commentLevel :selected").text()}}return null},ajaxSubmit:function(){var s=m('<span class="icon throbber loading"></span>'),u=r.getIssueId(),c=r.getIssueKey(),g=l+"/rest/api/2/issue/"+c+"/comment",f={body:this.getField()[0].value.replace(/\r?\n/g,"\r\n")},h=this.getCommentVisibility();h&&(f.visibility=h);var v=a(),b=m.ajax({url:g,type:"POST",contentType:"application/json",data:JSON.stringify(f),success:function(e){t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"]),t.trigger(i.REFRESH_ISSUE_PAGE,[u,{complete:function(){var t="comment-"+e.id;m("#"+t).scrollIntoView({marginBottom:200,marginTop:200});var i=m("#issue_actions_container > .issue-data-block.focused");i.removeClass("focused");var n=m("#"+t);n.addClass("focused"),s.remove(),d.enable(),v.resolve()}}])},error:function(t){function i(t){var i="<h2>"+"Error"+'</h2><div class="ajaxerror"><div class="aui-message error"><span class="aui-icon icon-warning"/>'+t+"</div></div>";return m(i)}var r,a=m.parseJSON(t.responseText);r=a&&a.errors&&a.errors.comment?i(a.errors.comment):n.buildDialogErrorContent(t),new o({content:r}).show(),s.remove(),d.enable(),v.reject()}});return s.appendTo(this.getForm().find("input[type=submit]").parent()),m.when(b,v)},getForm:function(){var e=m("form#issue-comment-add");return 1===e.length&&(this.$form=e),this.$form||m()},getField:function(){return this.getForm().find("#comment")},getSubmitButton:function(){return this.getForm().find("#issue-comment-add-submit")},hide:function(e){e&&this.cancel(),this.getForm().detach(),i.UNLOCK_PANEL_REFRESHING&&t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"])},show:function(){this.focus(),i.LOCK_PANEL_REFRESHING&&t.trigger(i.LOCK_PANEL_REFRESHING,["addcommentmodule"])},focus:function(){this.focusField(),this.setCaretAtEndOfCommentField()},focusField:function(){this.getField().focus().trigger("keyup"),this.getSubmitButton().scrollIntoView({marginBottom:200})},showNoCommentMsg:function(e){if(""===this.getField().val())return m("#emptyCommentErrMsg").show(),!0},cancel:function(){var e=this;setTimeout(function(){e.getField().val("")},100),m("#comment-preview_link.selected").click()}};return d});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/footer-comment.js' */
define("jira/viewissue/comment/footer-comment",["jira/viewissue/comment/comment-form","jquery"],function(e,t){var i=!1,n=!1,o={getModule:function(){return t("#addcomment")},isActive:function(){return this.getModule().hasClass("active")},hide:function(t){if(this.isActive()){var o=e.handleBrowseAway();(n||i||!o||confirm(o))&&(this.getModule().removeClass("active"),e.hide(t))}},ajaxSubmit:function(){i=!0,e.ajaxSubmit().then(function(){o.hide(!0)})},show:function(){this.isActive()?e.focusField():(i=!1,this.getModule().addClass("active"),this.appendForm(),e.show())},appendForm:function(){this.getModule().find(".mod-content").append(e.getForm())}};return o.setPreviewMode=function(e){n=Boolean(e)},o});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/init-comment-areas.js' */
define("jira/viewissue/init-comment-areas",["require"],function(e){var t=e("jira/viewissue/comment/comment-form"),n=e("jira/viewissue/comment/footer-comment"),i=e("jira/issue"),o=e("jquery"),a=e("jira/libs/parse-uri"),m=window.onbeforeunload,u={};u.openFooterComment=function(){n.show(),t.getForm().find("#commentLevel").bind("change",function(){t.setSubmitState()}),t.setSubmitState()},o(document).delegate("#addcomment #issue-comment-add","submit",function(e){n.ajaxSubmit(),e.preventDefault()}).delegate(".issue-header #comment-issue","click",function(e){n.show(),e.preventDefault()}).delegate("#footer-comment-button","click",function(e){u.openFooterComment(),e.preventDefault()}).delegate("#addcomment .cancel","click",function(e){e.preventDefault(),n.hide(!0)}).delegate("#issue-comment-add","submit",function(){window.setTimeout(function(){t.disable()},0)}).delegate("#issue-comment-add #comment","input",function(){t.setSubmitState()}).delegate("#issue-comment-add input[type='submit']","click",function(e){t.showNoCommentMsg()&&e.preventDefault()}).bind("showWikiInput",function(){n.setPreviewMode(!1);var e=t.getField();e.is(":visible:enabled")&&(i.getStalker().trigger("stalkerHeightUpdated"),e.length>0&&e.focus(),t.setCaretAtEndOfCommentField())}).bind("showWikiPreview",function(){n.setPreviewMode(!0),i.getStalker().trigger("stalkerHeightUpdated")}),window.onbeforeunload=function(){var e=void 0;return o.isFunction(m)&&(e=m.apply(this,arguments)),e||t.handleBrowseAway.apply(this,arguments)},o(function(){"add-comment"===a(window.location.href).anchor&&u.openFooterComment()})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/invoke-comment-trigger.js' */
define("jira/viewissue/invoke-comment-trigger",["jquery"],function(e){return function(){var i=e(".add-issue-comment");if(0!==i.length){var r=i.filter(".toolbar-trigger");r.length>0?r.click():i.click()}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/namespace.js' */
AJS.namespace("JIRA.Issue.CommentForm",null,require("jira/viewissue/comment/comment-form")),AJS.namespace("JIRA.Issue.getDirtyCommentWarning",null,require("jira/viewissue/comment/comment-form").handleBrowseAway),AJS.namespace("JIRA.Issue.invokeCommentTrigger",null,require("jira/viewissue/invoke-comment-trigger"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initCustomFieldTabs.js' */
define("jira/viewissue/init-custom-field-tabs",["jira/util/logger","jira/util/events","jira/util/events/types","aui/tabs","jquery"],function(t,i,e,n,a){var r="#customfieldmodule",l=function(i){var e;"string"!=typeof i&&i.length>0||("#"!==i[0]&&(i="#"+i),t.log("activating tab",i),e=a("a[href='"+i+"']",r),e.length&&n.change(e))},u=function(t){var i=a(t.target).closest(".tabs-pane");i.length>0&&l(i.attr("id"))};a(function(){e.NEW_CONTENT_ADDED&&i.bind(e.NEW_CONTENT_ADDED,function(t,i){var e=i.find(r);e.unbind("reveal"),e.bind("reveal",u),n.setup()}),e.PANEL_REFRESHED&&i.bind(e.PANEL_REFRESHED,function(t,i,e,n){if("details-module"===i){var a=n.find(r).find(".active-tab");1===a.length&&l(a.find("a").attr("href"))}}),a(r).bind("reveal",u)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initSubtaskTimeLogging.js' */
define("jira/viewissue/init-subtask-time-logging",["jquery"],function(i){i(document).delegate("#tt_include_subtasks input","click",function(t){i(this).is(":checked")?(i("#tt_info_single").hide(),i("#tt_info_aggregate").show()):(i("#tt_info_aggregate").hide(),i("#tt_info_single").show())})});;
;
/* module-key = 'jira.webresources:viewissue', location = 'includes/jira/viewissue/ViewIssueTabs.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),"undefined"==typeof JIRA.Templates.Issue.Tabs&&(JIRA.Templates.Issue.Tabs={}),JIRA.Templates.Issue.Tabs.label=function(e,s){return"<strong>"+soy.$$escapeHtml(e.text)+"</strong>"},JIRA.Templates.Issue.Tabs.tab=function(e,s){return'<a id="'+soy.$$escapeHtml(e.id)+'" href="'+soy.$$escapeHtml(e.href)+'" class="'+soy.$$escapeHtml(e.linkClass)+'">'+JIRA.Templates.Issue.Tabs.label(e)+"</a>"};;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabsAnalytics.js' */
define("jira/viewissue/tabs/analytics",["jquery","jira/analytics","jira/util/strings","jira/viewissue/analytics-utils","jira/components/analytics-tracker/tracker","underscore"],function(e,t,a,n,i,s){function r(e){return m.indexOf(e)>-1?e:a.hashCode(e)}function c(e){return{tab:r(e.attr("data-key")),tabPosition:e.index()}}function l(e,t){return{inNewWindow:e,keyboard:t,context:n.context()}}function o(e){var t=e.attr("id");return!!t&&/\d+_thumb/.test(t)}function u(e){return e.hasClass("issue-link")?"issue":e.hasClass("external-link")?"external":o(e)?"attachment":"unknown"}function d(e,t,a,n){var r=e.closest(".mod-content").find("#issue-tabs li.active"),o=l(a,n);s.extend(o,c(r)),s.extend(o,{linkType:t}),i.trackEvent("viewissue","tab.link.clicked",o)}var m=["com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel","com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab"];return{tabClicked:function(e,a,n){var r=e.parent(),o=s.extend({},l(a,n),c(r));t.send({name:"jira.viewissue.tab.clicked",data:o}),i.trackEvent("viewissue","tab.clicked",o)},buttonClicked:function(e,a,n){if(e.is("[data-tab-sort]")){var i=e.data("order"),r=e.parents(".tabwrap").find("li.active");t.send({name:"jira.viewissue.tabsort.clicked",data:s.extend({},l(a,n),c(r),{order:i})})}},permalinkClicked:function(e,t){i.trackEvent("viewissue","comment.permalink.click",{commentId:e,keyboard:t})},permalinkContextMenuOpened:function(e,t){i.trackEvent("viewissue","comment.permalink.contextmenu.opened",{commentId:e,keyboard:t})},tabItemDetailsLinkClicked:function(e,t,a){d(e,"profile",t,a)},tabItemBodyLinkClicked:function(e,t,a){d(e,u(e),t,a)}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.js' */
define("jira/viewissue/tabs",["jira/util/logger","jira/util/formatter","jquery","jira/jquery/deferred","jira/util/data/meta","jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","jira/userhover/userhover","jira/viewissue/tabs/analytics"],function(t,e,i,a,n,r,o,s,c){function u(t){t=t||document,i.each(F,function(e,i){i(t)})}function l(t){var e=i(t).find(".issuePanelWrapper"),a=i(t).find("#issue_actions_container");q=a.length?a:q,_=e.length?e:_}function f(t,e){var i=new r({id:"issue-tab-error-dialog",widthClass:"small",content:o.buildDialogErrorContent(t,!1)});d(e),q.show(),i.show()}function d(t){i("#issue-tabs li").each(function(){var e=i(this),a=e.data("key"),n=e.data("label");if(a==t)e.addClass("active"),e.html(D.label({text:n}));else{e.removeClass("active");var r=e.data("id"),o=e.data("href");e.html(D.tab({id:r,href:o,linkClass:J,text:n}))}}),k(i("#issue-tabs"))}function h(t){d(t)}function v(t,e){var i=t.pageX,a=t.pageY,n=e.offset(),r=e.outerWidth(),o=e.outerHeight();return 0==i&&0==a||!(i>=n.left&&i<=n.left+r&&a>=n.top&&a<=n.top+o)}function m(){var t=i("#issue_actions_container");p(t,"action-details","viewIssueTabDetailsLink",c.tabItemDetailsLinkClicked),p(t,"action-body","viewIssueTabBodyLink",c.tabItemBodyLinkClicked)}function p(t,e,a,n){var r="."+e+" a";t.find(r).off("click."+a).on("click."+a,function(t){var e=i(this),a=t.metaKey,r=v(t,e);n(e,a,r)})}function b(){var t=i('[id^="permlink_comment"]');t.off("click").on("click",function(t){var e=g(t.target),a=i(this),n=v(t,a);c.permalinkClicked(e,n)}),t.off("contextmenu").on("contextmenu",function(t){var e=g(t.target),a=i(this),n=v(t,a);c.permalinkContextMenuOpened(e,n)})}function g(t){var e=i(t).closest('[id^="permlink_comment"]').attr("id"),a=e.split("_").pop();return a}function k(t){var e=i(t).find("li.active").data("key");i(t).find(E).off("click.viewIssueTabs").on("click.viewIssueTabs",function(t){var a=i(this),n=v(t,a),r=a.parent().data("key"),o=t.metaKey;r?c.tabClicked(a,o,n):c.buttonClicked(a,o,n),o||(t.preventDefault(),r&&h(r),y(e,a.attr("href")).done(function(t){n&&(r?t.find("#"+a.attr("id")+" > :first-child").focus():t.find(".sortwrap  > :first-child").focus())}).done(u))})}function y(e,n){var r=a();L&&L.abort();var s=o.makeRequest({jqueryAjaxFn:R?i.pjax:i.ajax,headers:{"X-PJAX":!0},container:S,url:n,timeout:null,complete:function(a,n,o){if("abort"!=n){if(L=null,!o.successful)return void((o.status<300||o.status>=400)&&f(o,e));var s=i(this.container),c=document.createElement("div");c.innerHTML=o.data;var u=document.createDocumentFragment().appendChild(c);R||j(s,u),t.trace("jira.issue.tab.loaded"),r.resolve(s)}}});return i(s).throbber({target:_}),L=s,r}function j(t,e){var a=e.querySelectorAll(".tabwrap"),n=t.find(".tabwrap"),r=i(e.querySelectorAll("#issue_actions_container")).contents(),o=q.contents();if(a.length&&n.length&&r.length&&o.length){n.replaceWith(a),q.stop(!0,!0);var s=q.height();q.append(r);var c=q.height()-s,u=s-c;u>0?(q.css("height",c+u),o.remove(),w(c,u)):q.empty().append(r),i(e.querySelectorAll("script")).each(function(){i.globalEval(this.text||this.textContent||this.innerHTML||"")})}else t.empty().append(e)}function w(t,e){var i=150,a=800,n=e/a*1e3;setTimeout(function(){q.animate({height:t+1},n,"easeOutQuart",function(){q.css("height","auto")})},i)}function x(t){i(t).find(E).each(function(){var t=i(this);t.attr("href",t.attr("href")+"#issue-tabs")})}function C(t){!R||i.support.pjax?k(t):x(t)}function T(t){i(t).bind("moveToFinished",function(t,e){i("a.twixi:visible",e).focus()})}function I(t){t.find("time.livestamp").livestamp()}function A(t){i.inArray(t,F)<0&&F.push(t)}var _,q,L,D=JIRA.Templates.Issue.Tabs,R=n.get("viewissue-use-history-api")!==!1,J="ajax-activity-content",S="#activitymodule div.mod-content",E=e.format("a.{0}",J),F=[];return A(l),A(C),A(T),A(s),A(I),A(m),A(b),{onTabReady:A,domReady:u}}),AJS.namespace("JIRA.ViewIssueTabs",null,require("jira/viewissue/tabs"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewIssueTabs.js' */
define("jira/viewissue/init-view-issue-tabs",["require"],function(i){var e=i("jquery"),n=i("jira/util/events"),s=i("jira/util/events/types"),t=i("jira/viewissue/tabs");e(function(){s.PANEL_REFRESHED&&n.bind(s.PANEL_REFRESHED,function(i,e,n,s){if("activitymodule"===e){var t=s.find("#issue_actions_container > .issue-data-block.focused");1===t.length&&n.find("#"+t.attr("id")).addClass("focused")}})}),n.bind(s.NEW_CONTENT_ADDED,function(i,e){t.domReady(e)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewissue.js' */
require(["jira/viewissue/element/shorten","jira/viewissue/element/image-wrap","jira/viewissue/watchers-voters/watchers","jira/viewissue/watchers-voters/voters","jira/viewissue/watchers-voters/toggler","jira/viewissue/init-comment-areas","jira/viewissue/init-subtask-time-logging","jira/viewissue/init-toggle-block","jira/viewissue/init-custom-field-tabs","jira/viewissue/init-view-issue-tabs"],function(){});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.4.1-factory', location = 'atlassian-jslibs/factories/marionette/1.4.1/marionette-1.4.1-factory.js' */
!function(e){define("atlassian/libs/factories/marionette-1.4.1",function(){return function(t,i){var n=i.Marionette,r={_:t,Backbone:i};e.call(r);var o=i.Marionette;return o.VERSION="1.4.1",i.Marionette=n,o}})}(function(){var e=this.Backbone,t=this._,i=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===i)return delete this._indexByCustom[t],!0},this),delete this._views[i],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(e,t),n=function(e,t,i){"use strict";var n={};return n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,i),n.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},i.isFunction(this.initialize)&&this.initialize(e)};return i.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,n){var r=this.storage.getCommands(e);i.each(r.instances,function(e){t.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,n=e.storageType||this.storageType;t=i.isFunction(n)?new n:n,this.storage=t}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,i),n}(e,e.Marionette,t);(function(e,t,r){"use strict";function o(e){return a.call(e)}function s(e,t){var i=new Error(e);throw i.name=t||"Error",i}var h={};t.Marionette=h,h.$=t.$;var a=Array.prototype.slice;return h.extend=t.Model.extend,h.getOption=function(e,t){if(e&&t){var i;return i=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},h.triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var n="on"+i.replace(t,e),o=this[n];if(r.isFunction(this.trigger)&&this.trigger.apply(this,arguments),r.isFunction(o))return o.apply(this,r.tail(arguments))};return i}(),h.MonitorDOMRefresh=function(){function e(e){e._isShown=!0,i(e)}function t(e){e._isRendered=!0,i(e)}function i(e){e._isShown&&e._isRendered&&r.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}return function(i){i.listenTo(i,"show",function(){e(i)}),i.listenTo(i,"render",function(){t(i)})}}(),function(e){function t(e,t,i,n){var o=n.split(/\s+/);r.each(o,function(n){var r=e[n];r||s("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,i,r,e)})}function i(e,t,i,n){e.listenTo(t,i,n,e)}function n(e,t,i,n){var o=n.split(/\s+/);r.each(o,function(n){var r=e[n];e.stopListening(t,i,r,e)})}function o(e,t,i,n){e.stopListening(t,i,n,e)}function h(e,t,i,n,o){t&&i&&(r.isFunction(i)&&(i=i.call(e)),r.each(i,function(i,s){r.isFunction(i)?n(e,t,s,i):o(e,t,s,i)}))}e.bindEntityEvents=function(e,n,r){h(e,n,r,i,t)},e.unbindEntityEvents=function(e,t,i){h(e,t,i,o,n)}}(h),h.Callbacks=function(){this._deferred=h.$.Deferred(),this._callbacks=[]},r.extend(h.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(i,n){t&&(i=t),e.call(i,n)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=h.$.Deferred(),this._callbacks=[],r.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),h.Controller=function(e){this.triggerMethod=h.triggerMethod,this.options=e||{},r.isFunction(this.initialize)&&this.initialize(this.options)},h.Controller.extend=h.extend,r.extend(h.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),h.Region=function(e){if(this.options=e||{},this.el=h.getOption(this,"el"),!this.el){var t=new Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},r.extend(h.Region,{buildRegion:function(e,t){var i="string"==typeof e,n="string"==typeof e.selector,o="undefined"==typeof e.regionType,s="function"==typeof e;if(!s&&!i&&!n)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,a;i&&(h=e),e.selector&&(h=e.selector),s&&(a=e),!s&&o&&(a=t),e.regionType&&(a=e.regionType);var l=new a({el:h});return e.parentEl&&(l.getEl=function(t){var i=e.parentEl;return r.isFunction(i)&&(i=i()),i.find(t)}),l}}),r.extend(h.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||r.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,h.triggerMethod.call(this,"show",e),h.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return h.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),h.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),h.Region.extend=h.extend,h.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return r.each(e,function(e,n){"string"==typeof e&&(e={selector:e}),e.selector&&(e=r.defaults({},e,t));var o=this.addRegion(n,e);i[n]=o},this),i},addRegion:function(t,i){var n,o=r.isObject(i),s=r.isString(i),h=!!i.selector;return n=s||o&&h?e.Region.buildRegion(i,e.Region):r.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,n),this.triggerMethod("region:add",t,n),n},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){r.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){r.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=r.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return r.each(i,function(e){t.prototype[e]=function(){var t=r.values(this._regions),i=[t].concat(r.toArray(arguments));return r[e].apply(r,i)}}),t}(h),h.TemplateCache=function(e){this.templateId=e},r.extend(h.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new h.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=o(arguments),i=t.length;if(i>0)for(e=0;e<i;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),r.extend(h.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=h.$(e).html();return t&&0!==t.length||s("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return r.template(e)}}),h.Renderer={render:function(e,t){if(!e){var i=new Error("Cannot render the template since it's false, null or undefined.");throw i.name="TemplateNotFoundError",i}var n;return(n="function"==typeof e?e:h.TemplateCache.get(e))(t)}},h.View=t.View.extend({constructor:function(e){r.bindAll(this,"render");var i=Array.prototype.slice.apply(arguments);this.options=r.extend({},this.options,e),this.events=this.normalizeUIKeys(r.result(this,"events")),t.View.prototype.constructor.apply(this,i),h.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:h.triggerMethod,getTemplate:function(){return h.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=h.getOption(this,"templateHelpers");return r.isFunction(t)&&(t=t.call(this)),r.extend(e,t)},normalizeUIKeys:function(e){if("undefined"!=typeof e)return r.each(r.keys(e),function(t){var i=t.split("@ui.");2===i.length&&(e[i[0]+this.ui[i[1]]]=e[t],delete e[t])},this),e},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(r.result(this,"triggers"));return r.each(t,function(t,i){var n=r.isObject(t),o=n?t.event:t;e[i]=function(e){if(e){var i=e.preventDefault,r=e.stopPropagation,s=n?t.preventDefault:i,h=n?t.stopPropagation:r;s&&i&&i.apply(e),h&&r&&r.apply(e)}var a={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,a)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),h.bindEntityEvents(this,this.model,h.getOption(this,"modelEvents")),h.bindEntityEvents(this,this.collection,h.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,r.isFunction(e)&&(e=e.call(this));var i={},n=this.configureTriggers();r.extend(i,e,n),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),h.unbindEntityEvents(this,this.model,h.getOption(this,"modelEvents")),h.unbindEntityEvents(this,this.collection,h.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=r.result(this,"_uiBindings");this.ui={},r.each(r.keys(e),function(t){var i=e[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(r.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),h.ItemView=h.View.extend({constructor:function(){h.View.prototype.constructor.apply(this,o(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),i=h.Renderer.render(t,e);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),h.View.prototype.close.apply(this,o(arguments)),this.triggerMethod("item:closed"))}}),h.CollectionView=h.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),h.View.prototype.constructor.apply(this,o(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer),this.initRenderBuffer(),this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e,t,i){this.closeEmptyView();var n=this.getItemView(e),r=this.collection.indexOf(e);this.addItemView(e,n,r)},onShowCalled:function(){this.children.each(function(e){h.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getItemView(t),this.addItemView(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new t.Model;this.addItemView(i,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return h.getOption(this,"emptyView")},getItemView:function(e){var t=h.getOption(this,"itemView");return t||s("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,i){var n=h.getOption(this,"itemViewOptions");r.isFunction(n)&&(n=n.call(this,e,i));var o=this.buildItemView(e,t,n);this.addChildViewEventForwarding(o),this.triggerMethod("before:item:added",o),this.children.add(o),this.renderItemView(o,i),this._isShown&&h.triggerMethod.call(o,"show"),this.triggerMethod("after:item:added",o)},addChildViewEventForwarding:function(e){var t=h.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var i=o(arguments);i[0]=t+":"+i[0],i.splice(1,0,e),h.triggerMethod.apply(this,i)},this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var n=r.extend({model:e},i);return new t(n)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t,i){e.isBuffering?e.elBuffer.appendChild(t.el):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new i},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),h.View.prototype.close.apply(this,o(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),h.CompositeView=h.CollectionView.extend({constructor:function(){h.CollectionView.prototype.constructor.apply(this,o(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(e){var t=h.getOption(this,"itemView")||this.constructor;return t||s("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(h.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return h.Renderer.render(t,e)},appendBuffer:function(e,t){var i=this.getItemViewContainer(e);i.append(t)},appendHtml:function(e,t,i){if(e.isBuffering)e.elBuffer.appendChild(t.el);else{var n=this.getItemViewContainer(e);n.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,i=h.getOption(e,"itemViewContainer");if(i){var n=r.isFunction(i)?i():i;t=e.$(n),t.length<=0&&s("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),h.Layout=h.ItemView.extend({regionType:h.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),h.ItemView.prototype.constructor.call(this,e)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=h.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);h.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=r.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,i={regionType:h.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,i)},_initializeRegions:function(e){var t;this._initRegionManager(),t=r.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new h.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),h.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,o(arguments)),this.options=e||{};var i=h.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,i)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},processAppRoutes:function(e,t){if(t){var i=r.keys(t).reverse();r.each(i,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return h.getOption(this,"controller")},_addAppRoute:function(e,t,i){var n=e[i];if(!n)throw new Error("Method '"+i+"' was not found on the controller");this.route(t,i,r.bind(n,e))}}),h.Application=function(e){this._initRegionManager(),this._initCallbacks=new h.Callbacks,this.vent=new n.EventAggregator,this.commands=new n.Commands,this.reqres=new n.RequestResponse,this.submodules={},r.extend(this,e),this.triggerMethod=h.triggerMethod},r.extend(h.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var i=o(arguments);return i.unshift(this),h.Module.create.apply(h.Module,i)},_initRegionManager:function(){this._regionManager=new h.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}}),h.Application.extend=h.extend,h.Module=function(e,t){this.moduleName=e,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=h.triggerMethod},r.extend(h.Module.prototype,t.Events,{addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(r.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,h.triggerMethod.call(this,"before:stop"),r.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),h.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var n=r.flatten([this,this.app,t,h,h.$,r,i]);e.apply(this,n)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new h.Callbacks,this._finalizerCallbacks=new h.Callbacks}}),r.extend(h.Module,{create:function(e,t,i){var n=e,s=o(arguments);s.splice(0,3),t=t.split(".");var h=t.length,a=[];return a[h-1]=i,r.each(t,function(t,i){var r=n;n=this._getModule(r,t,e),this._addModuleDefinition(r,n,a[i],s)},this),n},_getModule:function(e,t,i,n,r){var o=e[t];return o||(o=new h.Module(t,i),e[t]=o,e.submodules[t]=o),o},_addModuleDefinition:function(e,t,i,n){var o,s;r.isFunction(i)?(o=i,s=!0):r.isObject(i)?(o=i.define,s=i.startWithParent):s=!0,o&&t.addDefinition(o,n),t.startWithParent=t.startWithParent&&s,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),h.Wreqr=n,h.ChildViewContainer=i,h})(this,e,t)});;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone-1.0.0-factory-legacy', location = 'atlassian-jslibs/factories/backbone/1.0.0/backbone-1.0.0-factory.js' */
!function(t){define("atlassian/libs/factories/backbone-1.0.0",function(){return function(e,i){var s={_:e,$:i};return t.call(s),"undefined"!=typeof exports?exports.noConflict():s.Backbone.noConflict()}})}(function(){(function(){var t,e=this,i=e.Backbone,s=[],n=s.push,r=s.slice,a=s.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var o=e._;o||"undefined"==typeof require||(o=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var h=t.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var s=this._events[t]||(this._events[t]=[]);return s.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var s=this,n=o.once(function(){s.off(t,n),e.apply(this,arguments)});return n._callback=e,this.on(t,n,i)},off:function(t,e,i){var s,n,r,a,h,u,l,d;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=t?[t]:o.keys(this._events),h=0,u=a.length;h<u;h++)if(t=a[h],r=this._events[t]){if(this._events[t]=s=[],e||i)for(l=0,d=r.length;l<d;l++)n=r[l],(e&&e!==n.callback&&e!==n.callback._callback||i&&i!==n.context)&&s.push(n);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],s=this._events.all;return i&&l(i,e),s&&l(s,arguments),this},stopListening:function(t,e,i){var s=this._listeners;if(!s)return this;var n=!e&&!i;"object"==typeof e&&(i=this),t&&((s={})[t._listenerId]=t);for(var r in s)s[r].off(e,i,this),n&&delete this._listeners[r];return this}},u=/\s+/,c=function(t,e,i,s){if(!i)return!0;if("object"==typeof i){for(var n in i)t[e].apply(t,[n,i[n]].concat(s));return!1}if(u.test(i)){for(var r=i.split(u),a=0,o=r.length;a<o;a++)t[e].apply(t,[r[a]].concat(s));return!1}return!0},l=function(t,e){var i,s=-1,n=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++s<n;)(i=t[s]).callback.call(i.ctx);return;case 1:for(;++s<n;)(i=t[s]).callback.call(i.ctx,r);return;case 2:for(;++s<n;)(i=t[s]).callback.call(i.ctx,r,a);return;case 3:for(;++s<n;)(i=t[s]).callback.call(i.ctx,r,a,o);return;default:for(;++s<n;)(i=t[s]).callback.apply(i.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};o.each(d,function(t,e){h[e]=function(e,i,s){var n=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=o.uniqueId("l"));return n[r]=e,"object"==typeof i&&(s=this),e[t](i,s,this),this}}),h.bind=h.on,h.unbind=h.off,o.extend(t,h);var f=t.Model=function(t,e){var i,s=t||{};e||(e={}),this.cid=o.uniqueId("c"),this.attributes={},o.extend(this,o.pick(e,p)),e.parse&&(s=this.parse(s,e)||{}),(i=o.result(this,"defaults"))&&(s=o.defaults({},s,i)),this.set(s,e),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];o.extend(f.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return o.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return o.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var s,n,r,a,h,u,c,l;if(null==t)return this;if("object"==typeof t?(n=t,i=e):(n={})[t]=e,i||(i={}),!this._validate(n,i))return!1;r=i.unset,h=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=o.clone(this.attributes),this.changed={}),l=this.attributes,c=this._previousAttributes,this.idAttribute in n&&(this.id=n[this.idAttribute]);for(s in n)e=n[s],o.isEqual(l[s],e)||a.push(s),o.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,r?delete l[s]:l[s]=e;if(!h){a.length&&(this._pending=!0);for(var d=0,f=a.length;d<f;d++)this.trigger("change:"+a[d],this,l[a[d]],i)}if(u)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,o.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,o.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o.isEmpty(this.changed):o.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&o.clone(this.changed);var e,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var n in t)o.isEqual(s[n],e=t[n])||((i||(i={}))[n]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(s){return!!e.set(e.parse(s,t),t)&&(i&&i(e,s,t),void e.trigger("sync",e,s,t))},R(this,t),this.sync("read",this,t)},save:function(t,e,i){var s,n,r,a=this.attributes;if(null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,s&&(!i||!i.wait)&&!this.set(s,i))return!1;if(i=o.extend({validate:!0},i),!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=o.extend({},a,s)),void 0===i.parse&&(i.parse=!0);var h=this,u=i.success;return i.success=function(t){h.attributes=a;var e=h.parse(t,i);return i.wait&&(e=o.extend(s||{},e)),!(o.isObject(e)&&!h.set(e,i))&&(u&&u(h,t,i),void h.trigger("sync",h,t,i))},R(this,i),n=this.isNew()?"create":i.patch?"patch":"update","patch"===n&&(i.attrs=s),r=this.sync(n,this,i),s&&i.wait&&(this.attributes=a),r},destroy:function(t){t=t?o.clone(t):{};var e=this,i=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&s(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;R(this,t);var n=this.sync("delete",this,t);return t.wait||s(),n},url:function(){var t=o.result(this,"urlRoot")||o.result(this.collection,"url")||U();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},o.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=o.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,o.extend(e||{},{validationError:i})),!1)}});var g=["keys","values","pairs","invert","pick","omit"];o.each(g,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),o[t].apply(o,e)}});var v=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,o.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};o.extend(v.prototype,h,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,o.defaults(e||{},y))},remove:function(t,e){t=o.isArray(t)?t.slice():[t],e||(e={});var i,s,n,r;for(i=0,s=t.length;i<s;i++)r=this.get(t[i]),r&&(delete this._byId[r.id],delete this._byId[r.cid],n=this.indexOf(r),this.models.splice(n,1),this.length--,e.silent||(e.index=n,r.trigger("remove",r,this,e)),this._removeReference(r));return this},set:function(t,e){e=o.defaults(e||{},m),e.parse&&(t=this.parse(t,e)),o.isArray(t)||(t=t?[t]:[]);var i,s,r,h,u,c=e.at,l=this.comparator&&null==c&&e.sort!==!1,d=o.isString(this.comparator)?this.comparator:null,f=[],p=[],g={};for(i=0,s=t.length;i<s;i++)(r=this._prepareModel(t[i],e))&&((h=this.get(r))?(e.remove&&(g[h.cid]=!0),e.merge&&(h.set(r.attributes,e),l&&!u&&h.hasChanged(d)&&(u=!0))):e.add&&(f.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(e.remove){for(i=0,s=this.length;i<s;++i)g[(r=this.models[i]).cid]||p.push(r);p.length&&this.remove(p,e)}if(f.length&&(l&&(u=!0),this.length+=f.length,null!=c?a.apply(this.models,[c,0].concat(f)):n.apply(this.models,f)),u&&this.sort({silent:!0}),e.silent)return this;for(i=0,s=f.length;i<s;i++)(r=f[i]).trigger("add",r,this,e);return u&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,s=this.models.length;i<s;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,o.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,o.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){if(null!=t)return this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return o.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var s=o.isFunction(e)?e:function(t){return t.get(e)};return o.sortedIndex(this.models,t,s,i)},pluck:function(t){return o.invoke(this.models,"get",t)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(s){var n=t.reset?"reset":"set";i[n](s,t),e&&e(i,s,t),i.trigger("sync",i,s,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?o.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,s=e.success;return e.success=function(n){e.wait&&i.add(t,e),s&&s(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof f)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var i=new this.model(t,e);return i._validate(t,e)?i:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,s){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,s),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];o.each(_,function(t){v.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),o[t].apply(o,e)}});var b=["groupBy","countBy","sortBy"];o.each(b,function(t){v.prototype[t]=function(e,i){var s=o.isFunction(e)?e:function(t){return t.get(e)};return o[t](this.models,s,i)}});var w=t.View=function(t){this.cid=o.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];o.extend(w.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=o.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(o.isFunction(i)||(i=this[t[e]]),i){var s=e.match(x),n=s[1],r=s[2];i=o.bind(i,this),n+=".delegateEvents"+this.cid,""===r?this.$el.on(n,i):this.$el.on(n,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=o.extend({},o.result(this,"options"),t)),o.extend(this,o.pick(t,E)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var e=o.extend({},o.result(this,"attributes"));this.id&&(e.id=o.result(this,"id")),this.className&&(e.class=o.result(this,"className"));var i=t.$("<"+o.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,s){var n=k[e];o.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:n,dataType:"json"};if(s.url||(r.url=o.result(i,"url")||U()),null!=s.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){r.type="POST",s.emulateJSON&&(r.data._method=n);var a=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",n),a)return a.apply(this,arguments)}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=t.ajax(o.extend(r,s));return i.trigger("request",i,h,s),h};var k={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,H=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(S.prototype,h,{initialize:function(){},route:function(e,i,s){o.isRegExp(e)||(e=this._routeToRegExp(e)),o.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var n=this;return t.history.route(e,function(r){var a=n._extractParameters(e,r);s&&s.apply(n,a),n.trigger.apply(n,["route:"+i].concat(a)),n.trigger("route",i,a),t.history.trigger("route",n,i,a)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var t,e=o.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace($,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return o.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=t.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,O=/msie [\w.]+/,C=/\/$/;I.started=!1,o.extend(I.prototype,h,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(N,"")},start:function(e){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=o.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,n=O.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);this.root=("/"+this.root+"/").replace(P,"/"),n&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(N,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e!==this.fragment&&(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=o.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0});return i},navigate:function(t,e){if(!I.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){if(i){var s=t.href.replace(/(javascript:|#).*$/,"");t.replace(s+"#"+e)}else t.hash="#"+e}}),t.history=new I;var j=function(t,e){var i,s=this;i=t&&o.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},o.extend(i,s,e);var n=function(){this.constructor=i};return n.prototype=s.prototype,i.prototype=new n,t&&o.extend(i.prototype,t),i.__super__=s.prototype,i};f.extend=v.extend=S.extend=w.extend=I.extend=j;var U=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var i=e.error;e.error=function(s){i&&i(t,s,e),t.trigger("error",t,s,e)}}}).call(this)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone', location = 'jira-issue-navigator-components-module/libs/backbone.js' */
define("jira/components/libs/backbone",["require"],function(e){"use strict";var n=e("atlassian/libs/factories/backbone-1.0.0"),r=e("jira/components/libs/underscore"),i=e("jquery");return n(r,i)});
//# sourceMappingURL=backbone-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/marionette-1.4.1.js' */
define("jira/components/libs/marionette-1.4.1",["require"],function(e){"use strict";var i=e("atlassian/libs/factories/marionette-1.4.1"),n=e("jira/components/libs/backbone"),r=e("jira/components/libs/underscore");return i(r,n)});
//# sourceMappingURL=marionette-1.4.1-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Mixins.js' */
define("jira/components/libs/marionette-1.4.1/mixins",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore");return{listenAndRethrow:function(e,i){i=[].concat(i),t.each(i,function(i){this.listenTo(e,i,function(){this.trigger.apply(this,[i].concat(t.toArray(arguments)))},this)},this)},triggerPreventable:function(e,i){var n=t.defaults({},i||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0}});return this.trigger(e,n),n}}}),AJS.namespace("JIRA.Marionette.Mixins",null,require("jira/components/libs/marionette-1.4.1/mixins"));
//# sourceMappingURL=Mixins-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/LinkRegion.js' */
define("jira/components/libs/marionette-1.4.1/linkregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.append(e.$el.children()),e.setElement(this.$el)}})}),AJS.namespace("JIRA.Marionette.LinkRegion",null,require("jira/components/libs/marionette-1.4.1/linkregion"));
//# sourceMappingURL=LinkRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/ReplaceRegion.js' */
define("jira/components/libs/marionette-1.4.1/replaceregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.replaceWith(e.el)}})}),AJS.namespace("JIRA.Marionette.ReplaceRegion",null,require("jira/components/libs/marionette-1.4.1/replaceregion"));
//# sourceMappingURL=ReplaceRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Controller.js' */
define("jira/components/libs/marionette-1.4.1/controller",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/libs/marionette-1.4.1"),o=e("jira/components/libs/marionette-1.4.1/mixins"),t=r.Controller.extend({});return n.extend(t.prototype,o),t}),AJS.namespace("JIRA.Marionette.Controller",null,require("jira/components/libs/marionette-1.4.1/controller"));
//# sourceMappingURL=Controller-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/ItemView.js' */
define("jira/components/libs/marionette-1.4.1/itemview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1");return t.ItemView.extend({renderTemplate:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=this.getTemplate(),n=t.Renderer.render(i,e);return t.$(n)},applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this.triggerMethod("applyToDom")},unwrapTemplate:function(){if(this.$el.parent().length){var e=this.$el.children();this.$el.replaceWith(e),this.setElement(e)}else this.setElement(this.$el.children())}})}),AJS.namespace("JIRA.Marionette.ItemView",null,require("jira/components/libs/marionette-1.4.1/itemview"));
//# sourceMappingURL=ItemView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/CollectionView.js' */
define("jira/components/libs/marionette-1.4.1/collectionview",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1"),t=e("jira/components/libs/marionette-1.4.1/itemview");return n.CollectionView.extend({_appendHtmlWithIndex:function(e,n,t){var i=e.children(),o=i.length;t<=0?e.prepend(n.$el):!o||t>=o?e.append(n.$el):n.$el.insertBefore(i.eq(t))},appendHtml:function(e,n,t){this._appendHtmlWithIndex(e.$el,n,t)},unwrapTemplate:function(){t.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CollectionView",null,require("jira/components/libs/marionette-1.4.1/collectionview"));
//# sourceMappingURL=CollectionView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/CompositeView.js' */
define("jira/components/libs/marionette-1.4.1/compositeview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/collectionview"),n=e("jira/components/libs/marionette-1.4.1/itemview");return t.CompositeView.extend({appendHtml:function(e,t,n){i.prototype._appendHtmlWithIndex(this.getItemViewContainer(e),t,n)},unwrapTemplate:function(){n.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CompositeView",null,require("jira/components/libs/marionette-1.4.1/compositeview"));
//# sourceMappingURL=CompositeView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Layout.js' */
define("jira/components/libs/marionette-1.4.1/layout",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1"),n=e("jira/components/libs/marionette-1.4.1/mixins"),o=i.Layout.extend({applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this._reInitializeRegions(),this.triggerMethod("applyToDom")}});return t.extend(o.prototype,n),o}),AJS.namespace("JIRA.Marionette.Layout",null,require("jira/components/libs/marionette-1.4.1/layout"));
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Application.js' */
define("jira/components/libs/marionette-1.4.1/application",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/marionette-1.4.1");return n.Application.extend({constructor:function(t){n.Application.call(this,t)},start:function(t){t&&t.forceStop===!1||this.stop(),n.Application.prototype.start.call(this,t)},stop:function(){i.invoke(this.submodules,"stop")}})}),AJS.namespace("JIRA.Marionette.Application",null,require("jira/components/libs/marionette-1.4.1/application"));
//# sourceMappingURL=Application-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/AppModule.js' */
define("jira/components/libs/marionette-1.4.1/appmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/mixins"),r=function(){this.definition=this.definition.bind(this)};return r.extend=t.extend,n.extend(r.prototype,{create:function(){throw new Error("create() must be implemented by AppModules")},generateMasterRequest:!1,name:"",commands:{},requests:{},events:[],definition:function(e,t){var i=this.name,r=this;if(!i)throw new Error("'name' must be defined by AppModules");e.addInitializer(function(){function e(e){n.isFunction(e)&&(e=e(s));var t={};return n.each(e,function(e,n){e===!0&&(e=s[n].bind(s)),n=n&&i?i+":"+n:i,t[n]=e}),t}function o(e,t){n.isFunction(t)&&(t=t(s)),n.each(t,function(t){var r=i+":"+t;e.listenTo(s,t,function(){this.trigger.apply(this,[r].concat(n.toArray(arguments)))})})}var s=r.create.apply(r,n.toArray(arguments)),a=e(r.commands),u=e(r.requests);r.generateMasterRequest&&n.extend(u,e({"":function(){return s}})),t.commands.setHandlers(a),t.reqres.setHandlers(u),o(t,r.events)})}}),n.extend(r.prototype,i),r}),AJS.namespace("JIRA.Marionette.AppModule",null,require("jira/components/libs/marionette-1.4.1/appmodule"));
//# sourceMappingURL=AppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/DialogView.js' */
define("jira/components/libs/marionette-1.4.1/dialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),s=i("jira/components/libs/marionette-1.4.1/itemview"),o=i("aui/message"),r=i("jira/dialog/form-dialog"),a=i("jquery"),n=i("jira/ajs/ajax/smart-ajax"),d=i("jira/dialog/dialog"),l=i("jira/components/utils/ajshelper");return s.extend({dialog:null,template:a.noop,_generateDialog:function(){var i=this.serializeData(),s=this.getTemplate(),o={id:this.id,content:function(e){e(s(i))},submitHandler:this._generateSubmissionXHR.bind(this)},a=t.getOption(this,"dialogOptions");return e.isFunction(a)&&(a=a.apply(this)),new r(e.extend(o,a))},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.dialog.show(),this.$el=this.dialog.get$popup(),a(this.dialog).on("Dialog.hide",function(i,e,t){t!==d.HIDE_REASON.cancel&&t!==d.HIDE_REASON.escape||this.close()}.bind(this)),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(a(this.dialog).off("Dialog.hide"),this.dialog.hide(!0),this.dialog.destroy(),this.isClosed=!0,this.triggerMethod("close"),a("#search-header-view button.save-as-new-filter").focus(),this.remove())}},_generateSubmissionXHR:function(i,s){i.preventDefault();var o=this.dialog.$form,r=t.getOption(this,"formToRequestData");e.isFunction(r)&&(r=r.call(this,o));var a=n.makeRequest({type:o.attr("method"),url:o.attr("action"),contentType:"application/json",dataType:"json",processData:!1,data:JSON.stringify(r)}).done(s).done(this._onSubmitSuccess.bind(this)).fail(this._onSubmitError.bind(this));return a},_onSubmitSuccess:function(i){this.triggerMethod("submit:success",i),this.close()},_onSubmitError:function(i){this.dialog.getButtonsContainer().find("input").removeAttr("disabled"),this.dialog.hideFooterLoadingIndicator(),this.dialog.$form.removeClass("submitting"),this._showErrorFromXHR(i),this.triggerMethod("submit:error")},_displayFieldErrors:function(i){var t=this.dialog.$popup;e.each(i,function(i,e){t.find("#"+e).after("<div class='error'>"+l.escapeHtml(i)+"</div>")})},_displayGenericErrors:function(i){var t=this.dialog.$popup.find(".aui-messages");e.each(i,function(i){var e={closeable:!0,timeout:5};e.body=l.escapeHtml(i),e.shadowed=!1,o.error(t,e)})},_displayXHRErrors:function(i){var e=this.dialog.$popup.find(".aui-messages");e.append(n.buildDialogErrorContent(i,!0))},_showErrorFromXHR:function(i){this._removeErrorMessages();var e;try{e=JSON.parse(i.responseText)}catch(t){e=null}e?(this._displayFieldErrors(e.errors),this._displayGenericErrors(e.errorMessages)):this._displayXHRErrors(i)},_removeErrorMessages:function(){this.dialog.$popup.find(".error").remove(),this.dialog.$popup.find(".aui-messages").empty()}})}),AJS.namespace("JIRA.Marionette.DialogView",null,require("jira/components/libs/marionette-1.4.1/dialogview"));
//# sourceMappingURL=DialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/InlineDialogView.js' */
define("jira/components/libs/marionette-1.4.1/inlinedialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),n=i("jira/components/libs/marionette-1.4.1/itemview"),o=i("jquery"),s=i("aui/inline-dialog");return n.extend({dialog:null,template:o.noop,_getDialogOptions:function(){var i={noBind:!0},n=t.getOption(this,"dialogOptions")||{};return e.isFunction(n)&&(n=n.apply(this)),n=e.extend({},i,n),n.hideCallback=function(){this.close()}.bind(this),n},_getTrigger:function(){var i=t.getOption(this,"trigger");return e.isFunction(i)&&(i=i.apply(this)),i},_generateDialog:function(){var i=this.serializeData(),e=this.getTemplate(),t=this._getDialogOptions(),n=this._getTrigger();return new s(n,this.id,function(t,n,o){t.html(e(i)),o()},t)},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.$el=this.dialog,this.id=this.dialog.id,this.dialog.show(),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(this.dialog.hide(),this.isClosed=!0,this.triggerMethod("close"),this.remove())}}})}),AJS.namespace("JIRA.Marionette.InlineDialogView",null,require("jira/components/libs/marionette-1.4.1/inlinedialogview"));
//# sourceMappingURL=InlineDialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:lib', location = 'jira-issue-navigator-components-module/namespaces.js' */
JIRA.Components=JIRA.Components||{},JIRA.Issues=JIRA.Issues||{},JIRA.Events=JIRA.Events||{};
//# sourceMappingURL=namespaces-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-2014.09.03-factory', location = 'atlassian-jslibs/factories/brace/2014.09.03/brace-2104.09.03-factory.js' */
!function(t){define("atlassian/libs/factories/brace-2014.09.03",function(){return function(e,n){var i={_:e,Backbone:n};t.call(i);var r=i.Brace.noConflict();return r.VERSION="2014.09.03",r}})}(function(){/*!
     *  Backbone Brace - 2014-06-27
     *  Copyright 2014 Atlassian Software Systems Pty Ltd
     *  Licensed under the Apache License, Version 2.0
     */
!function(t,e){var n="Brace",i=t[n],r=function(){return t[n]=i,this},o=e(t._,t.Backbone);o.noConflict=r,t[n]=o}(this,function(t,e){function n(e){return t.isArray(e)?t.reduce(e,function(t,e){return t[e]=null,t},{}):e}function i(e,n){if(!e||null==n)return n;if(e===String&&t.isString(n))return n;if(e===Number&&t.isNumber(n))return n;if(e===Boolean&&t.isBoolean(n))return n;if("string"==typeof e||e instanceof String){if(typeof n!=""+e)throw"The typeof "+n+" is "+typeof n+" but expected it to be "+e;return n}if(t.isArray(e)||e===Array){if(!o(n))throw"Array type expected, but nonnull, non-Array value provided.";return e!==Array&&e[0]?t.map(n,t.bind(i,null,e[0])):n}if("function"!=typeof e)throw"Invalid expected type "+e+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return n instanceof e?n:new e(r(e)?i([e.model],n):n)}function r(t,n){return t&&(t.__super__ instanceof(n||e.Collection)||t.__super__===(n||e.Collection).prototype||t===(n||e.Collection))}function o(n){return t.has(n,"length")&&!(n instanceof String||t.has({string:1,function:1},typeof n)||n instanceof e.Collection)}function a(e,n){var i={};return t.each(e,function(t,e){if(n[e]&&!s(t,n[e])){if(!t||s(n[e],t))return;throw e+" has conflicted type descriptors."}i[e]=t}),i}function s(t,e){return!e||e===t||!(!t||"string"==typeof t)&&(t instanceof Array?e===Array||e instanceof Array&&s(t[0],e[0]):"function"==typeof e&&(r(e)?r(t,e):t.prototype instanceof e))}function u(e){return t.isObject(e)?t.reduce(e,function(e,n,i){return n&&t.isFunction(n.toJSON)?e[i]=n.toJSON():t.isArray(n)&&(e[i]=t.map(n,function(e){return e&&t.isFunction(e.toJSON)?e.toJSON():e})),e},e):e}function c(t){return function(){var e=t.call(this);return u(e)}}function f(e){return function i(r,o){var a,s,u=t.extend({},r);return r&&r.mixins&&(s=r.mixins,delete u.mixins),a=e.call(this,u,o),this.prototype.namedEvents&&h.Mixins.applyMixin(a,{namedEvents:this.prototype.namedEvents}),this.prototype.namedAttributes&&h.Mixins.applyMixin(a,{namedAttributes:this.prototype.namedAttributes}),s&&t.each(r.mixins,function(t){h.Mixins.applyMixin(a,t)}),a.prototype.namedEvents&&h.Mixins.applyMixin(a,h.EventsMixinCreator.create(a.prototype.namedEvents)),a.prototype.namedAttributes&&(a.prototype.namedAttributes=n(a.prototype.namedAttributes),h.Mixins.applyMixin(a,h.AttributesMixinCreator.create(a.prototype.namedAttributes,a.prototype.idAttribute))),a.prototype.toJSON&&(a.prototype.toJSON=c(a.prototype.toJSON)),a.extend=i,a}}function p(e,n){var r=e.prototype,o=n.prototype,a=r.set;o.set=function(e,n,r){var o,s=this.namedAttributes;if(!s||null==e)return a.apply(this,arguments);t.isObject(e)?(o=t.clone(e),r=n):(o={},o[e]=n);for(var u in o)if(t.has(o,u)){if(!t.has(s,u))throw"Attribute '"+u+"' does not exist";o[u]=i(s[u],o[u])}return a.call(this,o,r)};var s=r.get;o.get=function(e){if(this.namedAttributes&&!t.has(this.namedAttributes,e))throw"Attribute '"+e+"' does not exist";return s.apply(this,arguments)}}function d(e,n){var i=e.prototype,r=n.prototype,o=i.parse;r.parse=function(e,n){return t.pick(o(e,n),t.keys(this.namedAttributes))}}function l(t){var e=t.extend(),n=t.extend;return e.extend=f(n),e}function y(t){var e=l(t);return p(t,e),d(t,e),e}var h={};h.Mixins={createMethodName:function(t,e){return t+e.charAt(0).toUpperCase()+e.substr(1)},applyMixin:function(e,i){t.forEach(t.keys(i),function(r){var o=e.prototype;if("initialize"===r){var s=o.initialize;return void(o.initialize=function(){s&&s.apply(this,arguments),i.initialize.apply(this,arguments)})}if("validate"===r){var u=o.validate;return void(o.validate=function(){if(u){var t=u.apply(this,arguments);if(t)return t}return i.validate.apply(this,arguments)})}if("defaults"!==r){if("namedAttributes"===r){var c=n(o.namedAttributes)||{},f=n(i[r]);return void(o.namedAttributes=t.extend(c,a(f,c)))}if("namedEvents"===r){if(!t.isArray(i[r]))throw"Expects events member on mixin to be an array";return o.namedEvents||(o.namedEvents=[]),void(o.namedEvents=t.uniq(o.namedEvents.concat(i[r])))}if(o.hasOwnProperty(r))throw"Mixin error: class already has property '"+r+"' defined";o[r]=i[r]}else{var p=o.defaults||(o.defaults={}),d=i[r];for(var l in d){if(p.hasOwnProperty(l))throw"Mixin error: class already has default '"+l+"' defined";p[l]=d[l]}}},this)}},h.AttributesMixinCreator={create:function(e,n){var i={};if(e||(e={}),t.has(e,"id")||(e.id=null),t.each(e,function(t,e){var n=h.Mixins.createMethodName("set",e);i[n]=function(t,n){return this.set(e,t,n)};var r=h.Mixins.createMethodName("get",e);i[r]=function(){return this.get(e)}}),"string"==typeof n&&"undefined"!=typeof e[n]&&"id"!==n){e.id=e[n];var r=h.Mixins.createMethodName("get",n),o=h.Mixins.createMethodName("set",n);i.getId=function(){return this[r]()},i.setId=function(t,e){return this[o](t,e)}}return i},ensureType:i},h.EventsMixinCreator={create:function(e){var n={},i=function(e){var i=h.Mixins.createMethodName("on",e);n[i]=function(){return this.on.apply(this,[e].concat(t.toArray(arguments)))};var r=h.Mixins.createMethodName("trigger",e);n[r]=function(){return this.trigger.apply(this,[e].concat(t.toArray(arguments)))}};return t.each(e,t.bind(i,this)),n}},h.Model=y(e.Model),h.Collection=l(e.Collection),h.View=l(e.View),h.Router=l(e.Router);var v=function(){this.initialize.apply(this,arguments)};return t.extend(v.prototype,e.Events,{initialize:function(){}}),v.extend=e.Model.extend,h.Evented=l(v),h})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:brace', location = 'jira-issue-navigator-components-module/libs/brace.js' */
define("jira/components/libs/brace",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/brace-2014.09.03"),s=e("jira/components/libs/backbone"),n=e("jira/components/libs/underscore");return r(n,s)}),AJS.namespace("JIRA.Issues.Brace",null,require("jira/components/libs/brace"));
//# sourceMappingURL=brace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/lib/jquery.hoverIntent.min.js' */
// jshint ignore: start
/*eslint-disable*/
/**
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function ($) {
  $.fn.hoverIntent = function (f, g) {
    var cfg = { sensitivity: 7, interval: 100, timeout: 0 };cfg = $.extend(cfg, g ? { over: f, out: g } : f);var cX, cY, pX, pY;var track = function track(ev) {
      cX = ev.pageX;cY = ev.pageY;
    };var compare = function compare(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);if (Math.abs(pX - cX) + Math.abs(pY - cY) < cfg.sensitivity) {
        $(ob).unbind("mousemove", track);ob.hoverIntent_s = 1;return cfg.over.apply(ob, [ev]);
      } else {
        pX = cX;pY = cY;ob.hoverIntent_t = setTimeout(function () {
          compare(ev, ob);
        }, cfg.interval);
      }
    };var delay = function delay(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s = 0;return cfg.out.apply(ob, [ev]);
    };var handleHover = function handleHover(e) {
      var ev = jQuery.extend({}, e);var ob = this;if (ob.hoverIntent_t) {
        ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
      }if (e.type == "mouseenter") {
        pX = ev.pageX;pY = ev.pageY;$(ob).bind("mousemove", track);if (ob.hoverIntent_s != 1) {
          ob.hoverIntent_t = setTimeout(function () {
            compare(ev, ob);
          }, cfg.interval);
        }
      } else {
        $(ob).unbind("mousemove", track);if (ob.hoverIntent_s == 1) {
          ob.hoverIntent_t = setTimeout(function () {
            delay(ev, ob);
          }, cfg.timeout);
        }
      }
    };return this.bind('mouseenter', handleHover).bind('mouseleave', handleHover);
  };
})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/util/TipsyView.js' */
define("jira/issues/tipsy",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/brace"),s=t("jquery");s.fn.tooltip||(s.fn.tooltip=s.noop,s.fn.tipsy=s.noop);var o=n.View.extend({events:{click:"hide"},initialize:function(t){i.isFunction(t.showCondition)?this.shouldShow=t.showCondition:t.showCondition?this.shouldShow=function(){return this.$el.filter(t.showCondition).length>0}.bind(this):this.shouldShow=function(){return!0},this.tipsy=this.$el.tooltip(i.extend({trigger:"manual"},t.tipsy)),this.hoverIntent(t.intents)},hoverIntent:function(t){return this.tipsy&&this.tipsy.hoverIntent(i.extend({interval:200,over:this.show.bind(this),out:this.hide.bind(this)},t)),this},show:function(){this.shouldShow()&&this.tipsy&&this.$el.tipsy("show")},hide:function(){this.tipsy&&this.$el.tipsy("hide")},remove:function(){this.hide(),this.$el.removeData("tipsy")}});return o.revalidate=function(){return s.fn.tipsy.revalidate()},o.autoBounds=function(){return s.fn.tipsy.autoBounds.apply(s.fn.tipsy,arguments)},o});
//# sourceMappingURL=TipsyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/util/namespace.js' */
AJS.namespace("JIRA.Issues.Tipsy",null,require("jira/issues/tipsy"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/CatchExceptions.js' */
!function(n){"use strict";var t=function(n){return function(){try{n.apply(this,arguments)}catch(t){}return this}};n.fn.htmlCatchExceptions=t(n.fn.html),n.fn.appendCatchExceptions=t(n.fn.append),n.fn.prependCatchExceptions=t(n.fn.prepend),n.catchExceptions=function(t){return n("<div>").htmlCatchExceptions(t).children()}}(AJS.$);
//# sourceMappingURL=CatchExceptions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/RecurringPromise.js' */
!function(){"use strict";jQuery.RecurringPromise=function(i){return this instanceof jQuery.RecurringPromise?(this._parent=i,this._doneCallbacks=new jQuery.Callbacks,this._failCallbacks=new jQuery.Callbacks,void(this._alwaysCallbacks=new jQuery.Callbacks)):new jQuery.RecurringPromise},jQuery.RecurringPromise.prototype={add:function(i){var n=new jQuery.Deferred;n.original=i;var t=this._getPending();return this._abortIfPending(t),this._setPending(n),i.done(function(){n===this._getPending()&&(n.resolveWith(this,arguments),this._doneCallbacks.fireWith(this,arguments))}.bind(this)),i.fail(function(){n===this._getPending()&&(n.rejectWith(this,arguments),this._failCallbacks.fireWith(this,arguments))}.bind(this)),i.always(function(){n===this._getPending()&&this._alwaysCallbacks.fireWith(this,arguments)}.bind(this)),n.promise()},done:function(i){return this._doneCallbacks.add(i),this},fail:function(i){return this._failCallbacks.add(i),this},always:function(i){return this._alwaysCallbacks.add(i),this},reset:function(){this._abortIfPending(this._getPending()),this._setPending(null)},sub:function(){return new jQuery.RecurringPromise(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(i){this._parent?this._parent._setPending(i):this._pending=i},_abortIfPending:function(i){i&&"pending"===i.state()&&(i.reject("abort"),jQuery.isFunction(i.original.abort)&&i.original.abort())}}}();
//# sourceMappingURL=RecurringPromise-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/ConcurrentDeferred.js' */
jQuery.ConcurrentDeferred=function(n){"use strict";var e,r=new jQuery.Deferred,t=function(n){e=n,n.done(function(){e===n&&r.resolve.apply(r,arguments)}).fail(function(){e===n&&r.reject.apply(r,arguments)})};return t(n),jQuery.extend(r,{update:function(n){if(!this.isPending())throw"Cannot update non-pending ConcurrentDeferred";var r=e;return t(n),jQuery.isFunction(r.abort)&&r.abort(),this},isPending:function(){return"pending"===this.state()}}),r};
//# sourceMappingURL=ConcurrentDeferred-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/ScrollLock.js' */
!function(e){"use strict";var l=30;e.fn.scrollLock=function(i,n){"string"!=typeof i&&(n=i,i=null),n||(n=l),this.on("DOMMouseScroll mousewheel",i,function(l){l.preventDefault();var i;l.originalEvent.wheelDelta&&(i=l.originalEvent.wheelDelta/120),l.originalEvent.detail&&(i=-l.originalEvent.detail/3),e.isNumeric(i)&&(this.scrollTop-=i*n)})}}(AJS.$);
//# sourceMappingURL=ScrollLock-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:uri', location = 'jira-issue-navigator-components-module/libs/uri.js' */
define("jira/components/libs/uri",["require"],function(i){"use strict";return i("atlassian/libs/uri-1.14.1")});
//# sourceMappingURL=uri-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:scrollintoview', location = 'jira-issue-navigator-components-module/lib/scrollintoview-1.8.js' */
!function(t){var e={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},o={duration:0,direction:"y"},r=/^(?:html)$/i,l=function(e,o){o=o||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var r=!(!document.defaultView||!document.defaultView.getComputedStyle),l={top:parseFloat(r?o.borderTopWidth:t.css(e,"borderTopWidth"))||0,left:parseFloat(r?o.borderLeftWidth:t.css(e,"borderLeftWidth"))||0,bottom:parseFloat(r?o.borderBottomWidth:t.css(e,"borderBottomWidth"))||0,right:parseFloat(r?o.borderRightWidth:t.css(e,"borderRightWidth"))||0};return{top:l.top,left:l.left,bottom:l.bottom,right:l.right,vertical:l.top+l.bottom,horizontal:l.left+l.right}},i=function(e){var o=t(window),i=r.test(e[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:l(e[0]),scroll:{top:(i?o:e).scrollTop(),left:(i?o:e).scrollLeft()},scrollbar:{right:i?0:e.innerWidth()-e[0].clientWidth,bottom:i?0:e.innerHeight()-e[0].clientHeight},rect:function(){var t=e[0].getBoundingClientRect();return{top:i?0:t.top,left:i?0:t.left,bottom:i?e[0].clientHeight:t.bottom,right:i?e[0].clientWidth:t.right}}()}};t.fn.extend({scrollIntoViewForAuto:function(l){l=t.extend({},o,l),l.direction=e["string"==typeof l.direction&&l.direction.toLowerCase()]||e.both;var c="";l.direction.x===!0&&(c="horizontal"),l.direction.y===!0&&(c=c?"both":"vertical");var n=this.eq(0),s=n.closest(":scrollable("+c+")");if(s.length>0){s=s.eq(0);var d={e:i(n),s:i(s)},h={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right},a={};l.direction.y===!0&&(h.top<0?a.scrollTop=d.s.scroll.top+h.top-30:h.top>0&&h.bottom<0&&(a.scrollTop=d.s.scroll.top+Math.min(h.top,-h.bottom)+30)),l.direction.x===!0&&(h.left<0?a.scrollLeft=d.s.scroll.left+h.left:h.left>0&&h.right<0&&(a.scrollLeft=d.s.scroll.left+Math.min(h.left,-h.right))),t.isEmptyObject(a)?t.isFunction(l.complete)&&l.complete.call(s[0]):(r.test(s[0].nodeName)&&(s=t("html,body")),s.animate(a,l.duration).eq(0).queue(function(e){t.isFunction(l.complete)&&l.complete.call(s[0]),e()}))}return this}});var c={auto:!0,scroll:!0,visible:!1,hidden:!1};t.extend(t.expr[":"],{scrollable:function(t,o,l,i){var n=e["string"==typeof l[3]&&l[3].toLowerCase()]||e.both,s=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,d={x:c[s.overflowX.toLowerCase()]||!1,y:c[s.overflowY.toLowerCase()]||!1,isRoot:r.test(t.nodeName)};if(!d.x&&!d.y&&!d.isRoot)return!1;var h={height:{scroll:t.scrollHeight,client:t.clientHeight},width:{scroll:t.scrollWidth,client:t.clientWidth},scrollableX:function(){return(d.x||d.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(d.y||d.isRoot)&&this.height.scroll>this.height.client}};return n.y&&h.scrollableY()||n.x&&h.scrollableX()}})}(jQuery);
//# sourceMappingURL=scrollintoview-1.8-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser', location = 'jira-issue-navigator-components-module/util/Browser.js' */
define("jira/components/util/browser",function(){"use strict";return{locationReload:function(o){window.location.reload(o)}}});
//# sourceMappingURL=Browser-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelModel.js' */
define("jira/components/issueviewer/entities/panel",["require"],function(t){"use strict";var e=t("jira/components/libs/brace"),i=t("jira/util/events"),n=t("jira/components/issueviewer/eventtypes");return e.Model.extend({namedAttributes:["entity","updateLocked"],initialize:function(){i.bind(n.LOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!0)}.bind(this)),i.bind(n.UNLOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!1)}.bind(this))},update:function(t,e,i){this.getUpdateLocked()||(this.set("entity",t),this.trigger("updated",e,i))}})});
//# sourceMappingURL=PanelModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelsCollection.js' */
define("jira/components/issueviewer/entities/panels",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panel");return n.Collection.extend({model:t,update:function(e,n){this.each(function(n){var t=n.id,s=i.any(e,function(e){return e.id===t});s||this.remove(n)},this),i.each(e,function(e,i){var t=this.get(e.id);t?t.update(e,n.fieldsInProgress,n.fieldsSaved):this.add({id:e.id,entity:e},{at:i})},this)}})});
//# sourceMappingURL=PanelsCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelsGroupModel.js' */
define("jira/components/issueviewer/entities/panelsgroup",["require"],function(e){"use strict";var n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panels");return n.Model.extend({namedAttributes:["leftPanels","rightPanels","infoPanels"],defaults:function(){return{leftPanels:new t([]),rightPanels:new t([]),infoPanels:new t([])}},update:function(e,n){this.get("leftPanels").update(e.leftPanels,n),this.get("rightPanels").update(e.rightPanels,n),this.get("infoPanels").update(e.infoPanels,n)}})});
//# sourceMappingURL=PanelsGroupModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/IssueModel.js' */
define("jira/components/issueviewer/entities/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),s=e("jira/components/issueviewer/entities/panelsgroup");return t.Model.extend({namedEvents:["updated"],namedAttributes:["entity","id","key","panels","projectKey","projectType","projectId"],defaults:function(){return{entity:{},panels:new s}},update:function(e,t){var s=!1;e.issue&&(this.updateFromEntity(e.issue),s=!0),e.panels&&(this.getPanels().update(e.panels,t),s=!0),s&&this.trigger("updated",t)},resetToDefault:function(){this.clear(),this.set(this.defaults())},updateFromEntity:function(e){this.set({id:e.id,key:e.key,entity:e,projectKey:e.project?e.project.key:null,projectType:e.project?e.project.projectType:null,projectId:e.project?e.project.id:null})},isCurrentIssue:function(e){return this.get("id")===e},hasIssue:function(){return this.has("id")},updateIssueQuery:function(e){this.hasIssue()&&(this.getEntity().viewIssueQuery=e)},getIssueInfo:function(){return{issueId:this.getId(),issueKey:this.getKey(),projectId:this.getProjectId(),projectKey:this.getProjectKey(),projectType:this.getProjectType()}}})});
//# sourceMappingURL=IssueModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssuePanelView.js' */
define("jira/components/issueviewer/views/issuepanel",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),r=e("jira/components/libs/marionette-1.4.1/itemview"),l=e("jira/components/issueviewer/templates");return r.extend({template:l.Body.issuePanel,modelEvents:{updated:"update"},update:function(e,r){function l(){return i.any(e,function(e){return 1===o.find(t.getFieldSelector(e)).length})}function s(){var e=o.find(document.activeElement).length>0,i=!!n.browser.msie&&n.browser.version<=8;if(i){var t=o[0].nextSibling,r=o[0].parentNode;o.remove(),t?n(t).before(d):n(r).append(d)}else o.replaceWith(d);e&&u.trigger("replacedFocusedPanel"),u.setElement(d)}function a(e){var t=u.model.id,n=u.$el;u.trigger("panelRendered",t,n,o),i.each(e,function(e){u.trigger("individualPanelRendered",e)})}var d=this.renderTemplate(),o=this.$el,u=this;if(0!==o.find("iframe").length||d.text()!==o.text()){if(l()){var c=[];i.each(r,function(e){var i=o.find(t.getFieldSelector(e));if(1===i.length){var n=d.find(t.getFieldSelector(e));1===n.length?(i.replaceWith(n),c.push(n)):i.closest("li, dl").remove()}}),a(c)}else s(),a([u.$el]);this.bindUIElements()}},onRender:function(){this.setElement(this.$el.children());var e=this.model.getEntity().styleClass;e&&this.$el.addClass(e),this.trigger("individualPanelRendered",this.$el)},applyToDom:function(){this.trigger("individualPanelRendered",this.$el)},serializeData:function(){return this.model.getEntity()}})});
//# sourceMappingURL=IssuePanelView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssuePanelsView.js' */
define("jira/components/issueviewer/views/issuepanels",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/collectionview"),t=e("jira/components/issueviewer/views/issuepanel"),n=e("jira/components/issueviewer/entities/panel");e("jira/featureflags/feature-manager");return i.extend({itemView:t,_updatingFromDom:!1,appendHtml:function(e,i,t){var n=e.$el.children(),o=n.length;t<=0?e.$el.prepend(i.$el):!o||t>=o?e.$el.append(i.$el):i.$el.insertBefore(n.eq(t))},applyToDom:function(){var e=this;this._updatingFromDom=!0,this.$el.children().filter(".legacy-jira-fe-module").each(function(){var i=this.id;"addcomment"===i&&(i="addcommentmodule"),e.collection.add(new n({id:i,entity:{id:i}}))}),this._updatingFromDom=!1},renderItemView:function(e){this._updatingFromDom?e.applyToDom():i.prototype.renderItemView.apply(this,arguments)},buildItemView:function(e){var t=i.prototype.buildItemView.apply(this,arguments);return this._updatingFromDom&&t.setElement(document.getElementById(e.id)),t}})});
//# sourceMappingURL=IssuePanelsView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueBodyView.js' */
define("jira/components/issueviewer/views/issuebody",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout"),i=e("jira/components/libs/marionette-1.4.1/linkregion"),n=e("jira/components/issueviewer/templates");return s.extend({tagName:"div",className:"issue-body-content",regions:{leftPanels:{selector:".issue-main-column",regionType:i},rightPanels:{selector:".issue-side-column",regionType:i},infoPanels:{selector:".issue-body",regionType:i}},template:n.Body.issueBody})});
//# sourceMappingURL=IssueBodyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueOpsbarView.js' */
define("jira/components/issueviewer/views/issueopsbar",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),t=e("jira/components/issueviewer/templates"),n=e("jira/issues/tipsy"),s=e("jira/components/issueviewer/analytics/issueopsbar"),o=e("jira/components/issueviewer/services/optinnewissueviewservice"),r=function(){return AJS.$('meta[name="ajs-new-jira-issue-view-toggle-value"]').attr("content")};return i.extend({template:t.IssueOpsbar.simpleOpsbar,ui:{shareButton:".viewissue-share",exportButton:"#viewissue-export",loginButton:"#ops-login-lnk",commentButton:"#comment-issue",operationsMoreDropDown:"#opsbar-operations_more_drop"},serializeData:function(){return{issue:this.model.getEntity()}},onApplyToDom:function(){this.onRender()},onRender:function(){new s(this),this.ui.loginButton.hide(),this.ui.commentButton.addClass("inline-comment"),new n({el:this.ui.shareButton,showCondition:":not(.active)"}),new n({el:this.ui.exportButton,showCondition:":not(.active)",tipsy:{gravity:"ne"}});var e=r();"OFF"===e&&(this.ui.operationsMoreDropDown.append(t.IssueOpsbar.newIssueViewItem()),this.$el.find("#turn-on-new-issue-view").on("click",function(e){e.preventDefault(),o.optIn()}))}})});
//# sourceMappingURL=IssueOpsbarView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueHeaderView.js' */
define("jira/components/issueviewer/views/issueheader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/layout"),s=e("jira/components/issueviewer/templates"),t=e("jira/components/libs/underscore"),r=e("jira/components/issueviewer/views/issueopsbar"),n=e("jira/util/data/meta"),a=e("jquery");return i.extend({className:"issue-header js-stalker",id:"stalker",tagName:"header",template:s.Header.issueHeader,modelEvents:{updated:"update"},regions:{opsbar:".command-bar",pager:"#issue-header-pager"},serializeData:function(){return{issue:this.model.getEntity(),isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}},update:function(e){if(e.initialize)this._updateWindowTitle();else{var i=t.include(e.fieldsInProgress,"summary");i?this.renderOpsBar():this.render()}this.trigger("updated")},onApplyToDom:function(){var e=new r({model:this.model});e.setElement(this.opsbar.el),this.opsbar.attachView(e),this.opsbar.currentView.applyToDom(),this._updateWindowTitle()},onBeforeRender:function(){this.previousElement=this.$el},onRender:function(){this.renderOpsBar(),this._updateWindowTitle(),this.trigger("panelRendered","header",this.$el,this.previousElement||a(""))},renderOpsBar:function(){this.opsbar.show(new r({model:this.model})),this.trigger("individualPanelRendered",this.$el)},_updateWindowTitle:function(){var e=this.model.getEntity(),i=e.key,s=e.summary,t=n.get("app-title");t&&s&&i&&(document.title="["+i+"] "+s+" - "+t)},focus:function(){this.$el.find("a").eq(0).focus()},initialFocus:function(){this.$el.focus()}})});
//# sourceMappingURL=IssueHeaderView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueView.js' */
define("jira/components/issueviewer/views/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1/layout"),i=e("jira/components/issueviewer/templates"),s=e("jira/components/libs/marionette-1.4.1/replaceregion"),n=e("jira/components/issueviewer/actions"),o=e("jquery");return t.extend({template:i.layout,className:"issue-container",regions:{header:{selector:".issue-header-container",regionType:s},body:{selector:".issue-body-container",regionType:s}},modelEvents:{updated:"update"},showLoading:function(){this.$el.addClass("loading")},hideLoading:function(){this.$el.removeClass("loading")},focusComment:function(e){this.$("#activitymodule .focused").removeClass("focused"),this.$("#comment-"+e).addClass("focused"),this.$(".js-stalker").trigger("refresh")},serializeData:function(){return{isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}},update:function(e){this._closeDropdowns(),e.initialize&&!e.stopRendering&&this.render(),e.reason&&e.reason.action===n.EDIT_COMMENT&&this.focusComment(e.reason.meta.commentId),this._bringViewIssueElementIntoView()},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1"),this._bringViewIssueElementIntoView()},onApplyToDom:function(){this._bringViewIssueElementIntoView(),this.trigger("render")},_bringViewIssueElementIntoView:function(){var e=this.model.get("entity").viewIssueQuery;if(e){var t;e.focusedCommentId?t="#comment-"+e.focusedCommentId:(e.attachmentSortBy||e.attachmentOrder||e.attachmentViewMode)&&(t="#attachmentmodule"),t&&o(t).scrollIntoView({marginBottom:200,marginTop:200})}},_closeDropdowns:function(){this.$el.find(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorView.js' */
define("jira/components/issueviewer/views/error",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout");return s.extend({className:"issue-container",regions:{pager:"#issue-header-pager"},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1")}})});
//# sourceMappingURL=ErrorView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorGenericView.js' */
define("jira/components/issueviewer/views/errorgeneric",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/error"),i=e("jira/components/issueviewer/templates"),n=e("jira/components/util/browser");return r.extend({template:i.Error.Generic,events:{"click #issue-error-reload-button":function(){n.locationReload()}}})});
//# sourceMappingURL=ErrorGenericView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorNotFoundView.js' */
define("jira/components/issueviewer/views/errornotfound",["require"],function(r){"use strict";var e=r("jira/components/issueviewer/views/error"),i=r("jira/components/issueviewer/templates"),n=r("jira/components/libs/underscore");return e.extend({template:i.Error.DoesNotExist,initialize:function(r){r=r||{},this.showReturnToSearchOnError=r.showReturnToSearchOnError},triggers:{"click #return-to-search":"returnToSearch"},serializeData:function(){var r=this.showReturnToSearchOnError;return n.isFunction(r)&&(r=r()),{hideReturnToSearch:!r}}})});
//# sourceMappingURL=ErrorNotFoundView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/controllers/IssueController.js' */
define("jira/components/issueviewer/controllers/issue",["require"],function(e){"use strict";var i=e("jira/issue"),s=e("jira/components/issueviewer/views/issuebody"),t=e("jira/components/issueviewer/views/issueheader"),n=e("jira/components/issueviewer/views/issuepanels"),o=e("jira/components/issueviewer/views/issue"),r=e("jira/components/libs/marionette-1.4.1/controller"),d=e("jira/components/libs/underscore"),a=e("jquery"),h=e("jira/components/issueviewer/services/breadcrumbs-project-hider"),l=i.CommentForm;return r.extend({initialize:function(e){this.model=e.model,this.shouldRenderIssueHeader="undefined"==typeof e.shouldRenderIssueHeader||e.shouldRenderIssueHeader},_createViews:function(){this.view=this._createMainView(),this.bodyView=this._createBodyView(),this.headerView=this._createHeaderView(),this.leftPanelsView=this._createPanelsView(this.model.getPanels().getLeftPanels()),this.rightPanelsView=this._createPanelsView(this.model.getPanels().getRightPanels()),this.infoPanelsView=this._createPanelsView(this.model.getPanels().getInfoPanels())},_createMainView:function(){var e=new o({model:this.model,el:this.$el});return this.listenTo(e,{render:function(){this.trigger("renderMainView",e.$el)}}),e},_createBodyView:function(){return new s({model:this.model})},_createHeaderView:function(){var e=new t({model:this.model});return this.listenAndRethrow(e,"panelRendered"),this.listenTo(e,{updated:function(){this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},this.model.getIssueInfo()),this._replaceBreadcrumbsView()},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}}),this._replaceBreadcrumbsView(),e},_replaceBreadcrumbsView:function(){var e=function(e,i){h.bindToSidebarEvents(e,a(".issue-header-content"),i)};JIRA.API.getSidebar().done(function(i){e(i,!1)}),JIRA.API.getNavigationApi().then(function(i){e(i,!0)})},_createPanelsView:function(e){var i=new n({collection:e});return this.listenTo(i,{"itemview:replacedFocusedPanel":function(){this.trigger("replacedFocusedPanel")},"itemview:panelRendered":function(e,i,s,t){this.trigger("panelRendered",i,s,t)},"itemview:individualPanelRendered":function(e,i){this.trigger("individualPanelRendered",i)}}),i},createView:function(){this._createViews(),this.listenTo(this.view,"render",function(){var e=JIRA.Issues.Api.isNewIssueViewEnabled();this.shouldRenderIssueHeader&&(this.view.header.show(this.headerView),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!1}))),e?AJS.$("body").trigger("new-issue-body-container-for-gin-rendered"):(this.view.body.show(this.bodyView),this.bodyView.leftPanels.show(this.leftPanelsView),this.bodyView.rightPanels.show(this.rightPanelsView),this.bodyView.infoPanels.show(this.infoPanelsView))})},createViewFromDom:function(){this._createViews(),this.listenTo(this.view,"applyToDom",function(){function e(e,i,s){i.setElement(s),i.applyToDom(),e.attachView(i)}e(this.view.body,this.bodyView,this.view.$el.find(".issue-body-content")),e(this.view.body,this.headerView,this.view.$el.find("#stalker")),e(this.bodyView.leftPanels,this.leftPanelsView,this.bodyView.$el.find(this.bodyView.leftPanels.el)),e(this.bodyView.rightPanels,this.rightPanelsView,this.bodyView.$el.find(this.bodyView.rightPanels.el)),e(this.bodyView.infoPanels,this.infoPanelsView,this.bodyView.$el.find(this.bodyView.infoPanels.el)),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!0}))})},setElement:function(e){this.$el=e,this.view&&this.view.setElement(e)},applyToDom:function(e){e.id=+e.id,this.model.updateFromEntity(e),this.createViewFromDom(),this.view.applyToDom()},show:function(){this.view?this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!1})):(this.createView(),this.view.render()),this.view.hideLoading()},close:function(){this.view&&this.view.close(),this.hideLoading(),delete this.view},hideLoading:function(){this.view&&this.view.hideLoading()},showLoading:function(){this.view&&this.view.showLoading()},canDismissComment:function(){var e,i=l;if(!i.getForm().data("dismissed")&&(e=i.handleBrowseAway())){if(!confirm(e))return i.focus(),!1;i.getForm().data("dismissed",!0)}return!0},applyResponsiveDesign:function(){if(this.$el){var e=this.$el.width();this.$el.toggleClass("skinny",e<900),this.$el.toggleClass("very-skinny",e<600)}},focus:function(){this.view&&this.headerView.focus()},initialFocus:function(){this.view&&this.headerView.initialFocus()}})});
//# sourceMappingURL=IssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/controllers/ErrorController.js' */
define("jira/components/issueviewer/controllers/error",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/errorgeneric"),i=e("jira/components/issueviewer/views/errornotfound"),t=e("jira/components/libs/marionette-1.4.1/controller"),o=e("jira/components/issueviewer/utils");return t.extend({initialize:function(e){this.contextPath=e.contextPath,this.showReturnToSearchOnError=e.showReturnToSearchOnError},render:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorView(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorView(new r)}},applyToDom:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorViewFromDom(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorViewFromDom(new r)}},close:function(){this.view&&(this.view.close(),delete this.view)},setElement:function(e){this._$el=e,this.view&&this.view.setElement(e)},_renderErrorAuth:function(e){var r=this.contextPath+"/login.jsp?os_destination="+encodeURIComponent("/browse/"+e);window.location.replace(r)},_renderErrorView:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.render(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!1,issueId:null})},_renderErrorViewFromDom:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.applyToDom(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!0,issueId:null})},isRendered:function(){return Boolean(this.view)}})});
//# sourceMappingURL=ErrorController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/IssueLoaderService.js' */
define("jira/components/issueviewer/services/issueloader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/controller"),t=e("jquery"),n=e("jira/components/issueviewer/legacy/issuefieldutil");return i.extend({initialize:function(){this._promiseManager=new t.RecurringPromise,this._updatingPromise=this._promiseManager.sub(),this._updatingPromise.done(this._onUpdatingDone.bind(this)).fail(this._onUpdatingError.bind(this)),this._loadingPromise=this._promiseManager.sub(),this._loadingPromise.done(this._onLoadingDone.bind(this)).fail(this._onLoadingError.bind(this))},cancel:function(){this._promiseManager.reset()},update:function(e){function i(e){return function(){return{taskKey:e,data:arguments,startIssueLoad:new Date}}}var n,r=e.issueEntity,s=e.mergeIntoCurrent,a=e.viewIssueData,o=!!e.detailView,d=new t.Deferred;return n=this._updatingPromise.add(a.get(r.key,!0,{issueEntity:r,loadingDeferred:d,mergeIntoCurrent:s,startIssueLoad:new Date,detailView:o}).pipe(i("issue"),i("issue"))),n.fail(function(){d.reject.apply(d,arguments)}),d.promise()},load:function(e){var i=e.issueEntity,n=e.viewIssueData,r=!!i.detailView;this._currentlyLoading=!0;var s=new t.Deferred;return this._loadingPromise.add(n.get(i.key,!1,{issueEntity:i,loadFields:!1,loadingDeferred:s,startIssueLoad:new Date,detailView:r})),s.promise()},isLoading:function(){return this._currentlyLoading},_onLoadingDone:function(e,i,t){var r=t.issueEntity;r.id=e.issue.id,r.key=e.issue.key,e.pager||(e.pager=r.pager),n.transformFieldHtml(e),this._currentlyLoading=!1,i.loadDuration=new Date-t.startIssueLoad,this.trigger("issueLoaded",e,i,t),t.loadingDeferred.resolve(e,i,t)},_onUpdatingDone:function(e){var i=e.data[1];i&&(i.isUpdate=!0),this._onLoadingDone.apply(this,e.data)},_onLoadingError:function(e,i,t){var n=t.issueEntity,r={issueId:n.id,issueKey:n.key,response:e};this._currentlyLoading=!1;var s;switch(e.status){case 401:s="auth";break;case 403:s="forbidden";break;case 404:s="notfound";break;default:s="generic"}this.trigger("error",s,r),t.loadingDeferred.reject()},_onUpdatingError:function(e){this._onLoadingError.apply(this,e.data)}})});
//# sourceMappingURL=IssueLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/MetadataService.js' */
define("jira/components/issueviewer/services/metadataservice",["require"],function(e){"use strict";var t=e("jira/util/data/meta"),a=e("jira/components/libs/underscore");return{removeIssueMetadata:function(e){var s=e.getEntity();s.metadata?a.each(s.metadata,function(e,a){t.set(a,null)}):t.get("issue-key")&&t.set("issue-key",null)},addIssueMetadata:function(e){var s=e.getEntity();a.each(s.metadata,function(e,a){t.set(a,e)})}}});
//# sourceMappingURL=MetadataService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/LinksCapturer.js' */
define("jira/components/issueviewer/linkscapturer",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/util/events"),n=e("jira/ajs/layer/inline-layer"),s=e("jquery"),o=e("jira/components/libs/marionette-1.4.1/controller"),a=e("jira/message"),r=e("jira/ajs/ajax/smart-ajax"),u=e("jira/components/libs/uri");return o.extend({initialize:function(){i.bindAll(this,"_onRefineViewEvents","_offRefineViewEvents","_handleReviewViewEvents")},capture:function(e){e!==this.el&&(this.el=e,this.linksToOtherIssues(),this.linksToReorderSubtasks(),this.viewOptionsForCurrentIssue())},linksToOtherIssues:function(){this._isRapidBoardPage()||s(this.el).on("simpleClick","a.issue-link[data-issue-key]",function(i){i.preventDefault();var t=s(i.target).closest("a").data("issue-key"),n=t.split("-")[0];JIRA.API.getSidebar().done(function(e){e.updateData({projectKey:n},!0)}),e("jira/navigation").then(function(e){e.setProjectRootView()}),this.trigger("linkToIssue",{issueKey:t})}.bind(this))},linksToReorderSubtasks:function(){s(this.el).on("simpleClick",".subtask-reorder a",function(e){e.target.href&&(e.preventDefault(),s.ajax({type:"GET",data:{disableRedirect:!0},url:e.target.href}).done(function(){this.trigger("reorderSubtasks")}.bind(this)).fail(function(e){a.showErrorMsg(r.buildSimpleErrorContent(e),{closeable:!0})}))}.bind(this))},_handleReviewViewEvents:function(e){var i=e.currentTarget;s(i).parents("ul").find("a.aui-checked").removeClass("aui-checked"),s(i).addClass("aui-checked");var t=new u(i.href).query(!0),n=this.triggerPreventable("refineViewer",{query:t});n.isPrevented&&e.preventDefault()},_onRefineViewEvents:function(e,i){s(i).on("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_offRefineViewEvents:function(e,i){s(i).off("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_location:function(){return window.location},_isRapidBoardPage:function(){return this._location().href.indexOf("RapidBoard.jspa")>=0},viewOptionsForCurrentIssue:function(){t.bind(n.EVENTS.show,this._onRefineViewEvents),t.bind(n.EVENTS.hide,this._offRefineViewEvents)},destroy:function(){t.unbind(n.EVENTS.show,this._onRefineViewEvents),t.unbind(n.EVENTS.hide,this._offRefineViewEvents)}})});
//# sourceMappingURL=LinksCapturer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/BreadcrumbsProjectHider.js' */
define("jira/components/issueviewer/services/breadcrumbs-project-hider",["require"],function(e){function n(e,n){var o=n?e.isCollapsed():e.isCollapsed(!0);o?i():r()}function r(){var e=d.find(t);e.length>0&&(a=e.detach())}function i(){var e=d.find(s);a&&0===e.find(t).length&&a.prependTo(e)}var o=(e("jquery"),{}),t=".breadcrumbs-project-name",s=".aui-nav-breadcrumbs",a=null,d=null;return o.bindToSidebarEvents=function(e,o,t){if(t){if(!e.isInProjectContext())return}else if(!e.isProjectSidebar(!0))return;d=o,n(e,t),t?(e.onCollapseEnd(i),e.onExpandEnd(r)):(e.off(e.events.SIDEBAR_COLLAPSE_END,i,!0),e.on(e.events.SIDEBAR_COLLAPSE_END,i,!0),e.off(e.events.SIDEBAR_EXPAND_END,r,!0),e.on(e.events.SIDEBAR_EXPAND_END,r,!0))},o});
//# sourceMappingURL=BreadcrumbsProjectHider-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/OptInNewIssueViewService.js' */
define("jira/components/issueviewer/services/optinnewissueviewservice",["require"],function(e){"use strict";var t=e("jira/ajs/ajax/smart-ajax"),a=e("jira/util/users/logged-in-user"),n=e("wrm/context-path"),s=n(),r={"Content-Type":"application/json",Accept:["application/json","text/javascript","*/*"]},i=function(){var e=function(){return t.makeRequest({type:"PUT",dataType:"json",data:JSON.stringify({isEnabled:!0}),processData:!1,credentials:"same-origin",headers:r,url:s+"/rest/greenhopper/1.0/profile/labs-panel/issue-details-popup"})},n=a.accountId(),i="jira.user.issue.should.show.welcome.message",o=s+"/rest/api/latest/user/properties/"+i+"?accountId="+encodeURIComponent(n),u=function(){return t.makeRequest({type:"PUT",dataType:"json",data:"true",processData:!1,credentials:"same-origin",headers:r,url:o})};return Promise.all([e(),u()]).then(function(){})["catch"](function(){})["finally"](function(){window.location.reload()})};return{optIn:i}});
//# sourceMappingURL=OptInNewIssueViewService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/IssueEventBus.js' */
define("jira/components/issueviewer/legacy/issueeventbus",["require"],function(e){"use strict";var s=e("jira/components/libs/brace");return s.Model.extend({namedAttributes:["issueId"],namedEvents:["save","saveSuccess","savingStarted","saveError","panelRendered","replacedFocusedPanel","fieldSubmitted","dismiss","refreshIssue","issueRefreshed","updateFromDom","updateStatusColor","quickEditKeyPressed","openFocusShifter"]})});
//# sourceMappingURL=IssueEventBus-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/AsyncData.js' */
define("jira/components/issueviewer/legacy/asyncdata",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),n=e("jira/components/libs/underscore"),i=e("jquery");return t.Evented.extend({namedEvents:["change"],initialize:function(e){this.data={},this.pendings={},this.accessIndex=0,e&&(this.disableCache=e.disableCache,this.maxCacheSize=e.maxCacheSize)},get:function(e,t,a){var r=new i.Deferred,s=this.disableCache?{}:this.data,h=function(t,i){var h=this._set(s,e,n.defaults(t,{accessIndex:this.accessIndex++}),!0,a),d=n.defaults({changed:h},i,s[e]);a&&a.mergeIntoCurrent&&(d.mergeIntoCurrent=!0),s[e]&&!s[e].error?r.resolve(s[e].value,d,a):r.reject(s[e]&&s[e].value,d,a)}.bind(this),d=function(t){var n=this.fetch(e,a);this.setPending(e,n,function(e){h({value:e,error:!1,updated:new Date},{initialLoad:t})},function(e){var n={error:!0,updated:new Date};void 0!==e&&(n.value=e),h(n,{initialLoad:t,error:!0})})}.bind(this),u=function(){h({},{fromCache:!0})},c=function(){this.pendings[e].always(n.bind(h,this,{},{initialLoad:!0}))}.bind(this);return t||this.disableCache?d(!1):this.hasCached(e)?u():this.hasPending(e)?c():d(!0),r.promise()},setPending:function(e,t,n,a){return this.hasPending(e)?this.pendings[e].update(t):this.pendings[e]=new i.ConcurrentDeferred(t),this.pendings[e].done(function(e){n(e)}).fail(function(e){a(e)})},getIdByValue:function(e){var t;for(t in this.data)if(this.data[t].value===e)return t;return null},getMeta:function(e){return this.data[e]||{}},getAllCached:function(){var e={};return n.each(this.data,function(t,n){e[n]=t.value}),e},hasCached:function(e){var t=this.getMeta(e);return void 0!==t.value||t.error===!0},hasError:function(e){var t=this.getMeta(e);return t.error===!0},hasPending:function(e){var t=this.pendings[e];return!!t&&t.isPending()},set:function(e,t){return this._set(this.data,e,{value:t,updated:new Date},!0)},remove:function(e){return!!this.data[e]&&(delete this.data[e],this.triggerChange(),!0)},setError:function(e,t){var n={error:!0,updated:new Date};return void 0!==t&&(n.value=t),this._set(this.data,e,n,!0)},setMultiple:function(e){var t=new Date,i=!1;return n.each(e,function(e,a){e=n.pick(e,"value","error"),e.updated=t,this._set(this.data,a,e,!1)&&(i=!0)}.bind(this)),i&&this.triggerChange(),i},reset:function(e){this.data={},this.pendings={},this.accessIndex=0,e?this.setMultiple(e):this.triggerChange()},_set:function(e,t,i,a,r){this.disableCache&&e===this.data&&(e={});var s=e[t]?n.clone(e[t]):{},h=this.mergeFetchedAndCached(s,i,r?r:{},e[t]);return!a||e[t]&&!h&&e[t].error===s.error||e!==this.data||this.triggerChange(),!e[t]&&this.maxCacheSize&&n.keys(e).length===this.maxCacheSize?i.accessIndex&&(this._dropItem(e),e[t]=s):e[t]=s,h},_dropItem:function(e){var t=null;for(var n in e){if(!e[n].accessIndex){t=n;break}(null===t||e[n].accessIndex<e[t].accessIndex)&&(t=n)}null!==t&&delete e[t]},fetch:function(e){var t=this.getMeta(e),n=new i.Deferred;return!this.hasCached(e)||t.error?n.reject(t.value):n.resolve(t.value),n.promise()},mergeFetchedAndCached:function(e,t,i,a){return n.extend(e,t),!a||a.value!==e.value||a.error!==e.error}})});
//# sourceMappingURL=AsyncData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/ViewIssueData.js' */
define("jira/components/issueviewer/legacy/viewissuedata",["require"],function(e){"use strict";var s=e("jira/featureflags/feature-manager"),i=e("jira/components/libs/underscore"),n=e("jira/components/issueviewer/legacy/asyncdata"),t=e("jira/util/data/meta"),u=e("jquery"),a=window.AJS.contextPath();return n.extend({initialize:function(e){e=e||{},n.prototype.initialize.call(this,i.defaults(e||{},{disableCache:!1,maxCacheSize:t.get("viewissue-max-cache-size")}))},fetch:function(e,n){var t={issueKey:e,decorator:"none",prefetch:!!n.prefetch};if(t.shouldUpdateCurrentProject=!n.detailView,n.mergeIntoCurrent&&this.data&&this.data[e]&&this.data[e].value&&this.data[e].value.issue){t.lastReadTime=this.data[e].value.readTime,t.fields=[],i.each(this.data[e].value.fields,function(e){t.fields.push(e.id+":"+e.contentId)}),t.issue=["summary:"+this.data[e].value.issue.summaryContentId],t.links=[];var r=function h(e){i.each(e.links,function(e){t.links.push(e.id+":"+e.contentId)}),i.each(e.groups,function(e){h(e)})};i.each(this.data[e].value.issue.operations.linkGroups,function(e){r(e)}),t.panels=[];var o=this,d=function(s){i.each(o.data[e].value.panels[s],function(e){t.panels.push(e.completeKey+":"+e.contentId)})};d("leftPanels"),d("rightPanels"),d("infoPanels")}"loadFields"in n&&(t.loadFields=n.loadFields),n.issueEntity&&i.defaults(t,n.issueEntity.viewIssueQuery);var l=!!s.isFeatureEnabled("return-new-issue-view-as-default_63doa")||"true"===u('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content");if(l&&n.detailView){var p=u.Deferred();return p.resolve({issue:{id:void 0,key:t.issueKey,status:{name:void 0}}})}var c=u.ajax({url:a+"/secure/AjaxIssueAction!default.jspa",headers:{"X-SITEMESH-OFF":!0},data:t,type:n.mergeIntoCurrent?"POST":"GET"}),p=c.pipe(function(e){return JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireSuccessSlaEvent&&JIRA.Issues.Application.fireSuccessSlaEvent("getLegacyIssueViewData"),e},function(e){return JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireFailSlaEvent&&e.status>=500&&JIRA.Issues.Application.fireFailSlaEvent("getLegacyIssueViewData",{reason:"get-legacy-issue-view-data-failed-with-status-code",statusCode:e.status}),i.pick(e,"status","responseText","statusText")});return p.abort=function(){c.abort.apply(c,arguments)},p},mergeFetchedAndCached:function(e,s,n){if(this._skipMerging(e,s,n))return i.extend(e,s),null;i.each(i.pairs(s),function(s){"value"!==s[0]&&(e[s[0]]=s[1])});var t=s.value,u=[],a=[],r=[];i.each(t.removedContentIds,function(e,s){var n;"fields"===s?n=u:"panels"===s?n=a:"links"===s&&(n=r),n&&i.each(e,function(e){n.push(e)})});var o=t.fields,d=t.issue.operations.linkGroups,l=t.panels,p=t.issue.summary,c=t.issue.primaryActions,h=t.issue.transitions;if(this._nothingChanged(u,a,r,o,l,d,p))return null;var g={updated:{},added:{},deleted:{}},f=e.value,v=this._comparator;return(u.length>0||o.length>0)&&this._mergeFields(o,f,g,u),(a.length>0||l.leftPanels.length>0||l.rightPanels.length>0||l.infoPanels.length>0)&&this._mergePanels(l,f,g,a,v),(r.length>0||d.length>0)&&this._mergeLinks(d,f,g,r,v),p&&this._mergeSummary(t,f,g),c&&this._mergePrimaryActions(t,f,g),h&&this._mergeTransitions(t,f,g),f.issue.status=t.issue.status,g},_skipMerging:function(e,s,n){return i.isEmpty(e)||!n.mergeIntoCurrent||!e.value||!e.value.issue||s.error===!0},_nothingChanged:function(e,s,i,n,t,u,a){return 0===e.length&&0===s.length&&0===i.length&&0===n.length&&0===u.length&&0===t.leftPanels.length&&0===t.rightPanels.length&&0===t.infoPanels.length&&!a},_mergeFields:function(e,s,n,t){n.added.fields=[],n.updated.fields=[],n.deleted.fields=[],i.each(e,function(e){var t=i.find(s.fields,function(s){return s.id===e.id});t?n.updated.fields.push(e.id):n.added.fields.push(e.id)});var u=e;i.each(s.fields,function(e){i.contains(t,e.id)?n.deleted.fields.push(e.id):i.contains(n.updated.fields,e.id)||u.push(e)}),s.fields=u},_mergeSummary:function(e,s,i){i.updated.issue=["summary"],s.issue.summary=e.issue.summary,s.issue.summaryContentId=e.issue.summaryContentId},_mergePrimaryActions:function(e,s,i){i.updated.issue=["primaryActions"],s.issue.primaryActions=e.issue.primaryActions},_mergeTransitions:function(e,s,i){i.updated.issue=["transitions"],s.issue.transitions=e.issue.transitions},_mergePanels:function(e,s,n,t,u){n.added.panels={},n.updated.panels={},n.deleted.panels={};var a=function(a){n.added.panels[a]=[],n.updated.panels[a]=[],n.deleted.panels[a]=[],i.each(e[a],function(e){var t=i.find(s.panels[a],function(s){return s.id===e.id});t?n.updated.panels[a].push(e.id):n.added.panels[a].push(e.id)});var r=e[a];i.each(s.panels[a],function(e){i.contains(t,e.completeKey)?n.deleted.panels[a].push(e.id):i.contains(n.updated.panels[a],e.id)||r.push(e)}),r.sort(u),s.panels[a]=r};a("leftPanels"),a("rightPanels"),a("infoPanels")},_mergeLinks:function(e,s,i,n,t){i.added.groups={},i.updated.groups={},i.deleted.groups={};var u=[];this._mergeOperationsLinks(e,s,u,i,n,t),this._mergeToolsLinks(e,s,u,i,n,t),s.issue.operations.linkGroups=u},_mergeOperationsLinks:function(e,s,n,t,u,a){t.added.groups["view.issue.opsbar"]=[],t.updated.groups["view.issue.opsbar"]=[],t.deleted.groups["view.issue.opsbar"]=[];var r=i.find(s.issue.operations.linkGroups,function(e){return"view.issue.opsbar"===e.id}),o=i.find(e,function(e){return"view.issue.opsbar"===e.id}),d={},l={};if(o&&i.each(o.groups,function(e){var s=i.find(r.groups,function(s){return e.id===s.id});if(s?t.updated.groups["view.issue.opsbar"].push(e.id):t.added.groups["view.issue.opsbar"].push(e.id),i.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id}),e.groups&&e.groups.length>0){var n=e.groups[0];i.each(n.groups,function(e){i.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id})})}}),r){var p=[];o&&i.each(o.groups,function(e){i.contains(t.added.groups["view.issue.opsbar"],e.id)&&p.push(e)}),i.each(r.groups,function(e){var s=[],n=null;o&&(n=i.find(o.groups,function(s){return e.id===s.id}),n&&i.each(n.links,function(n){var t=i.find(e.links,function(e){return n.id===e.id});t||s.push(n)}));var r=!1,c=function(e,s){i.each(e.links,function(n){var t=l[n.id];t&&t!==e.id?r=!0:d[n.id]?s.push(d[n.id]):i.contains(u,n.id)?r=!0:s.push(n)})};c(e,s),s.sort(a),e.links=s;var h=null;n&&n.groups&&n.groups.length>0&&(h=n.groups[0]);var g=null;if(e.groups&&e.groups.length>0){g=e.groups[0];var f=[];h&&i.each(h.groups,function(e){var s=i.find(g.groups,function(s){return e.id===s.id});s||f.push(e)}),i.each(g.groups,function(e){var s=[];if(h){var n=i.find(h.groups,function(s){return s.id===e.id});n&&i.each(n.links,function(n){var t=i.find(e.links,function(e){return n.id===e.id});t||s.push(n)})}c(e,s),s.length>0&&(s.sort(a),e.links=s,f.push(e))}),f.length>0?(f.sort(a),g.groups=f):(g=null,r=!0)}else h&&(g=n.groups[0]);e.groups=[],g&&(e.groups[0]=g),s.length>0||g?(p.push(e),r&&!i.contains(t.updated.groups["view.issue.opsbar"],e.id)&&t.updated.groups["view.issue.opsbar"].push(e.id)):t.deleted.groups["view.issue.opsbar"].push(e.id)}),p.length>0&&(p.sort(a),r.groups=p,n.push(r))}else o&&n.push(o);t.added.groups["view.issue.opsbar"].sort(),t.deleted.groups["view.issue.opsbar"].sort(),t.updated.groups["view.issue.opsbar"].sort()},_updatedLinks:function(e,s,n,t){function u(e){return!i.contains(n,e.id)}function a(s){return!i.findWhere(e,{id:s.id})}var r=i.chain(s).filter(a).union(e).filter(u).value();return r.sort(t),r},_collectAllLinks:function(e){var s=e.links||[],n=e.groups||[];return i.chain(n).map(this._collectAllLinks.bind(this)).flatten().union(s).value()},_mergeGroupLinks:function(e,s,n,t,u){i.map(e.groups||[],this._mergeGroupLinks.bind(this));var a=[],r=null;s&&s.groups&&s.groups.length>0&&(r=i.find(s.groups,function(s){return e.id===s.id})),r&&i.each(r.links,function(s){var n=i.find(e.links,function(e){return s.id===e.id});n||a.push(s)}),i.each(e.links,function(e){n[e.id]?a.push(n[e.id]):i.contains(t,e.id)||a.push(e)}),a.length>0&&(a.sort(u),e.links=a)},_mergeToolsLinks:function(e,s,n,t,a,r){t.updated.groups["jira.issue.tools"]=!1;var o=i.find(s.issue.operations.linkGroups,function(e){return"jira.issue.tools"===e.id}),d=i.find(e,function(e){return"jira.issue.tools"===e.id}),l={};if(d&&(t.updated.groups["jira.issue.tools"]=!0,l=i.indexBy(this._collectAllLinks(d),"id")),o){var p=d&&d.links||[],c=o.links||[];o.links=this._updatedLinks(p,c,a,r),o.groups&&o.groups.length>0?i.each(o.groups,function(e){this._mergeGroupLinks(e,d,l,a,r)}.bind(this)):d.groups&&d.groups.length>0&&(o.groups=u.extend(!0,{},d.groups)),n.push(o)}else d&&n.push(d)},_comparator:function(e,s){return e.weight&&s.weight?e.weight>s.weight?1:e.weight<s.weight?-1:0:e.weight&&!s.weight?1:!e.weight&&s.weight?-1:0},updateIssue:function(e,s){var i=this.getMeta(e);i&&i.value&&(i.value.fields=s.fields||{})}})});
//# sourceMappingURL=ViewIssueData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/IssueFieldUtil.js' */
define("jira/components/issueviewer/legacy/issuefieldutil",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jquery"),r={getFieldSelector:function(e){return"issuetype"===e?"#type-val":"fixVersions"===e?"#fixfor-val":"summary"===e?"#summary-val":"labels"===e?"#wrap-labels .value":"duedate"===e?"#due-date":"#"+e+"-val"},matchesFieldSelector:function(e){return 1===i(r.getFieldSelector(e)).length},transformFieldHtml:function(e){return e.fields=t.map(e.fields,function(e){var t=i("<div />").htmlCatchExceptions(e.editHtml);return 0!==t.find("input.radio,input.checkbox").length?t.find("legend").eq(0).remove():t.find("label").eq(0).remove(),{id:e.id,label:e.label,editHtml:t.html(),required:e.required,contentId:e.contentId}}),e},getAccessKeyModifier:function(){var e=i("#home_link_drop").attr("title"),t=/\(([\w\+]+)\+\w\)/i;return t.test(e)?t.exec(e)[1]:"Alt"}};return r});
//# sourceMappingURL=IssueFieldUtil-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/Utils.js' */
define("jira/components/issueviewer/utils",["require"],function(e){"use strict";var i=e("aui/inline-dialog"),r=e("jira/ajs/layer/inline-layer"),n=e("jquery");return{hideLightbox:function(){n.fancybox.close()},hideDropdown:function(){if(i.current&&"column-picker-dialog"!==i.current.id&&i.current.hide(),r.current){var e=r.current.options.offsetTarget();e instanceof n&&(e.is(":visible")||r.current.hide())}}}});
//# sourceMappingURL=Utils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/actions.js' */
define("jira/components/issueviewer/actions",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore");return n.extend(AJS.namespace("JIRA.Issues.Actions"),{EDIT_COMMENT:"editComment"})});
//# sourceMappingURL=actions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/eventtypes.js' */
define("jira/components/issueviewer/eventtypes",["require"],function(e){"use strict";var s=e("jira/util/events/types");return s.ISSUE_REFRESHED="issueRefreshed",s.PANEL_REFRESHED="panelRefreshed",s});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/analytics/IssueOpsbar.js' */
define("jira/components/issueviewer/analytics/issueopsbar",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jquery"),n=t("jira/viewissue/analytics-utils"),r=t("jira/components/utils/ajshelper"),s=t("jira/components/analytics-tracker/tracker"),a=function(t){this.issueId=t.model.get("id"),this.$el=t.$el,this.bindEventsToOpsbar()};return a.prototype.triggerEvent=function(t){s.trackEvent("viewissue","opsbar.operation",t),r.trigger("analyticsEvent",{name:"kickass.opsbar.operation",data:t})},a.prototype._getParamsButtonMain=function(t,e,n){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n})},a.prototype._getParamsButtonSubmenu=function(t,e,n,r,s){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n,parentId:r.attr("id"),parentIdx:s})},a.prototype._getParamsCommon=function(){return{context:n.context()}},a.prototype.bindEventsToOpsbar=function(){var t=this.$el.find(".toolbar-analytics");t.each(function(t,i){var n=e(i),r=n.find("a.toolbar-trigger");r.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,r,t))}.bind(this));var s=n.find("li.aui-list-item a");s.length>=1&&s.each(function(i,n){var s=e(n);s.click(function(e){this.triggerEvent(this._getParamsButtonSubmenu(e,s,i,r,t))}.bind(this))}.bind(this))}.bind(this))},a});
//# sourceMappingURL=IssueOpsbar-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/analytics/IssueUxMetrics.js' */
define("jira/components/issueviewer/analytics/issue-uxmetrics",["jquery","jira/components/analytics-tracker/tracker"],function(t,e){"use strict";return{trackPageMetrics:function(){var s=t("#assignee-val").text().trim().search("Unassigned")===-1,n=0!==t("#reporter-val").text().trim().length,i=t("#opsbar-opsbar-transitions .issueaction-workflow-transition").length,o=t("#description-val"),l=o.text().trim().length,a=o.height(),u=t("#details-module ul#issuedetails>li").length,r=t("#customfield-tabs ul.property-list>li.item").length,c=t("#customfield-tabs ul.property-list").length,m=t("#details-module #wrap-labels ul>li").length,d=m>0?m-1:0,h=t("#details-module ul#issuedetails>li li").length,p=t("#customfield-tabs ul.property-list>li.item li").length,g=t("ol#attachment_thumbnails>li").length,C=t(".issue-body-content .legacy-jira-fe-module.toggle-wrap"),b=C.not(":has(.ap-container)").length,y=C.has(".ap-container").length,v=t("#opsbar-operations_more_drop .aui-dropdown2-section .aui-list-item").length,f=t("#peoplemodule ul dl").length,w=t("#datesmodule ul dl").length,F={isAssigned:s,hasReporter:n,transitionsCount:i,descriptionCharacterCount:l,descriptionBlockHeight:a,customFieldTabsCount:c,systemFieldsCount:u,customFieldsCount:r,labelsCount:d,systemFieldChildItemsCount:h,customFieldChildItemsCount:p,attachmentsCount:g,nonConnectWebPanelsCount:b,connectWebPanelsCount:y,moreMenuItemCount:v,peopleModuleFieldsCount:f,datesModuleFieldsCount:w},_=t("#comment-tabpanel.active").length>0;_&&(F.visibleCommentsCount=t("#issue_actions_container .activity-comment").length,F.collapsedCommentsCount=t("#issue_actions_container .show-more-comments").attr("data-collapsed-count")||0),e.trackEvent("viewissue","uxmetrics",F)}}});
//# sourceMappingURL=IssueUxMetrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/IssueViewer.js' */
define("jira/components/issueviewer",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueviewer/actions"),r=e("jira/components/issueviewer/controllers/error"),t=e("jira/util/events"),o=e("jira/components/issueviewer/controllers/issue"),n=e("jira/components/issueviewer/legacy/issueeventbus"),u=e("jira/components/issueviewer/services/issueloader"),a=e("jira/components/issueviewer/entities/issue"),d=e("jquery"),l=e("jira/components/issueviewer/linkscapturer"),h=e("jira/components/libs/marionette-1.4.1/controller"),c=e("jira/util/data/meta"),m=e("jira/components/issueviewer/services/metadataservice"),g=e("jira/util/events/reasons"),p=window.JIRA,f=e("jira/components/issueviewer/eventtypes"),I=e("jira/components/issueviewer/utils"),C=e("jira/components/issueviewer/legacy/viewissuedata"),v=e("wrm/data"),w=e("jira/components/issueviewer/analytics/issue-uxmetrics"),E=(e("jira/featureflags/feature-manager"),window.AJS.contextPath()),R=function(){p.trace.apply(p,arguments)};return h.extend({namedEvents:["loadComplete","loadError","close","replacedFocusedPanel","linkToIssue"],initialize:function(e){var i=this;e=e||{},e.useJIRAEvents=e.useJIRAEvents!==!1,this.shouldRenderIssueHeader=e.shouldRenderIssueHeader,this.model=new a,this.eventBus=new n,this.viewIssueData=new C,this._buildIssueLoader(),this._buildLinksCapturer(),this._buildErrorController({showReturnToSearchOnError:e.showReturnToSearchOnError}),this._buildIssueController(),t.bind(f.REFRESH_ISSUE_PAGE,function(e,s,i){this.model.isCurrentIssue(s)&&this.refreshIssue(i)}.bind(this)),this.memoizedUxMetricsTracker=s.memoize(w.trackPageMetrics,function(){return i.model.getId()})},_buildIssueLoader:function(){this.issueLoader=new u,this.listenTo(this.issueLoader,"error",function(e,s){this.trigger("loadError",s),this.errorController.render(e,s.issueKey),this.removeIssueMetadata(),R("jira.issue.refreshed",{id:s.issueId}),this.options.useJIRAEvents&&t.trigger(f.ISSUE_REFRESHED,[s.issueId])}),this.listenTo(this.issueLoader,"issueLoaded",this._onIssueLoaded)},_buildLinksCapturer:function(){this.linksCapturer=new l,this.listenTo(this.linksCapturer,{linkToIssue:function(e){this.trigger("linkToIssue",e)},refineViewer:function(e){this.trigger("refineViewer",e)},reorderSubtasks:function(){this.issueController.showLoading(),this.refreshIssue({reason:i.UPDATE}).always(function(){this.issueController.hideLoading()}.bind(this))}})},_buildErrorController:function(e){e=e||{},this.errorController=new r({contextPath:E,showReturnToSearchOnError:e.showReturnToSearchOnError}),this.listenTo(this.errorController,"before:render",function(){this.issueController.close()}),this.listenTo(this.errorController,"returnToSearch",function(){this.trigger("close")}),this.listenAndRethrow(this.errorController,"render")},_buildIssueController:function(){this.issueController=new o({shouldRenderIssueHeader:this.shouldRenderIssueHeader,model:this.model}),this.listenAndRethrow(this.issueController,"replacedFocusedPanel"),this.listenTo(this.issueController,{render:function(e,s){I.hideDropdown(),this.errorController.close(),this.trigger("render",e,s),R("jira.psycho.issue.refreshed",{id:this.model.getId()}),this.memoizedUxMetricsTracker()},renderMainView:function(e){this.options.useJIRAEvents&&(t.trigger(f.NEW_CONTENT_ADDED,[e,g.pageLoad]),t.trigger(f.REFRESH_TOGGLE_BLOCKS,[this.model.getId()])),this.trigger("renderMainView",e,this.model.getId())},panelRendered:function(e,s,i){this.eventBus.triggerPanelRendered(e,s),this.options.useJIRAEvents&&t.trigger(f.PANEL_REFRESHED,[e,s,i]),this.trigger("panelRendered",e,s,i)},close:function(){I.hideDropdown()},individualPanelRendered:function(e){this.options.useJIRAEvents&&t.trigger(f.NEW_CONTENT_ADDED,[e,g.panelRefreshed]),this.trigger("individualPanelRendered",e)}})},_updateModel:function(e,s){this.model.update(e,s)},_onIssueLoaded:function(e,s,i){var r=i.issueEntity,o=!s.mergeIntoCurrent&&i.initialize!==!1,n=!this.model.isCurrentIssue(r.id),u=!!r.detailView,a=!JIRA.Issues.Api.isNewIssueViewEnabled();s.isUpdate&&!o||(this.model.resetToDefault(),this.errorController.close()),this._updateModel(e,{initialize:o,changed:s.changed,mergeIntoCurrent:s.mergeIntoCurrent,stopRendering:a}),s.isUpdate&&!o||this.issueController.close(),this.issueController.show(),s.fromCache&&this.refreshIssue(r,{fromCache:!0,mergeIntoCurrent:!s.error,detailView:u}),m.addIssueMetadata(this.model),r.bringToFocus&&r.bringToFocus(),this._triggerLoadComplete(n,s,r);var d={id:r.id};s.fromCache?R("jira.issue.loadFromCache",d):R("jira.issue.loadFromServer",d),R("jira.issue.refreshed",d),this.options.useJIRAEvents&&t.trigger(f.ISSUE_REFRESHED,[r.id])},_triggerLoadComplete:function(e,s,i){this.trigger("loadComplete",this.model,{isNewIssue:e,issueId:i.id,issueKey:i.key,duration:s.loadDuration,loadReason:s.fromCache?"issues-cache-refresh":void 0,fromCache:s.fromCache,issueRefreshedEvent:!!this.options.useJIRAEvents})},abortPending:function(){this.issueLoader.cancel()},canDismissComment:function(){return this.issueController.canDismissComment()},beforeHide:function(){I.hideLightbox(),I.hideDropdown(),this.abortPending(),this.removeIssueMetadata()},beforeShow:function(){m.addIssueMetadata(this.model)},getIssueId:function(){return this.model.getEntity().id||null},getIssueKey:function(){return this.model.getEntity().key||null},getProjectKey:function(){return this.model.get("projectKey")||null},getProjectType:function(){return this.model.get("projectType")||null},getProjectId:function(){return this.model.get("projectId")||null},_loadIssueFromDom:function(e){e.id&&e.id!==-1?this.issueController.applyToDom(s.extend({id:-1},e)):(this.errorController.applyToDom("notfound",e.key),this.trigger("loadError")),c.set("serverRenderedViewIssue",null);var i={id:this.getIssueId()};R("jira.issue.refreshed",i)},loadIssue:function(e){var s=c.get("serverRenderedViewIssue");return s?(e.project={id:v.claim("projectId"),key:v.claim("projectKey"),projectType:v.claim("projectType")},this.loadIssueRenderedByTheServer(e)):this.canDismissComment()&&e.key?(this.issueController.showLoading(),this.issueLoader.load({issueEntity:e,viewIssueData:this.viewIssueData})):(new d.Deferred).reject()},loadIssueRenderedByTheServer:function(e){var s=d("#key-val"),i=d("#summary-val");return e.id=s.attr("rel")||-1,e.summary=i.text(),this._loadIssueFromDom(e),this.trigger("loadComplete",this.model,{isNewIssue:!1,issueId:e.id,issueKey:e.key,duration:0,loadReason:void 0,fromCache:!1}),(new d.Deferred).resolve().promise()},refreshIssue:function(e){var i;return e=s.defaults({},e,{mergeIntoCurrent:!0}),this.model.hasIssue()?(i=this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:e.mergeIntoCurrent,detailView:e.detailView}),e.complete&&(i=i.done(e.complete).fail(e.complete)),this.issueController.showLoading()):i=(new d.Deferred).resolve().promise(),i},removeIssueMetadata:function(){m.removeIssueMetadata(this.model)},setContainer:function(e){this.linksCapturer.capture(e),this.errorController.setElement(e),this.issueController.setElement(e)},isCurrentlyLoading:function(){return this.issueLoader.isLoading()},updateIssueWithQuery:function(e){this.model.updateIssueQuery(e),this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:!0})},dismiss:function(){this.model.resetToDefault(),this.errorController.close(),this.issueController.close(),this.linksCapturer.destroy()},close:function(){this.canDismissComment()&&(this.dismiss(),this.trigger("close"))},applyResponsiveDesign:function(){this.issueController.applyResponsiveDesign()},isShowingError:function(){return this.errorController.isRendered()},focus:function(){this.issueController.focus()},initialFocus:function(){this.issueController.initialFocus()}})});
//# sourceMappingURL=IssueViewer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/IssueViewerAppModule.js' */
define("jira/components/issueviewer/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),n=e("jira/components/issueviewer"),s=e("jira/components/libs/marionette-1.4.1/appmodule");return s.extend({name:"issueViewer",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new n({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(){return{abortPending:!0,beforeHide:!0,beforeShow:!0,removeIssueMetadata:!0,updateIssueWithQuery:!0,close:!0,setContainer:!0,dismiss:!0}},requests:function(){return{loadIssue:!0,canDismissComment:!0,getIssueId:!0,getIssueKey:!0,refreshIssue:!0,isCurrentlyLoading:!0}},events:function(){return["loadComplete","loadError","close","render","replacedFocusedPanel","linkToIssue","refineViewer"]}})});
//# sourceMappingURL=IssueViewerAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/Issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),JIRA.Components.IssueViewer.Templates.layout=function(e,s){return'<div id="issue-content" class="issue-edit-form">'+(e.serverRenderedViewIssue?'<header id="stalker" class="issue-header js-stalker" tabindex="-1">'+JIRA.Components.IssueViewer.Templates.Header.issueHeader(e)+'</header><div class="issue-body-content">'+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels(e)+"</div>":'<div class="issue-header-container"></div>'+(e.isNewIssueViewEnabled?'<div id="new-issue-body-container"></div>':'<div class="issue-body-container" id="legacy-issue-body-container"></div>'))+"</div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueHeader.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Header&&(JIRA.Components.IssueViewer.Templates.Header={}),JIRA.Components.IssueViewer.Templates.Header.issueHeader=function(e,s){return'<div class="issue-header-content">'+aui.page.pageHeader({content:""+(e.issue.project?aui.page.pageHeaderImage({content:""+JIRA.Templates.Headers.projectAvatar({id:""+soy.$$escapeHtml(e.issue.project.id),projectKey:""+soy.$$escapeHtml(e.issue.project.key),projectName:""+soy.$$escapeHtml(e.issue.project.name),avatarUrl:""+soy.$$escapeHtml(e.issue.project.avatarUrls["48x48"]),avatarAlt:""+soy.$$escapeHtml(e.issue.project.name),isSystemAvatar:e.issue.project.systemAvatar})})+(e.isNewIssueViewEnabled?aui.page.pageHeaderMain({content:'<div id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'" class="hidden">'+soy.$$escapeHtml(e.issue.key)+"</div>"}):aui.page.pageHeaderMain({content:'<ol class="aui-nav aui-nav-breadcrumbs"><li class="breadcrumbs-project-name"><a id="project-name-val" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.project.key)+'">'+soy.$$escapeHtml(e.issue.project.name)+"</a></li>"+(e.issue.parent&&e.issue.parent.id?'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.parent.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.parent.key)+'" id="parent_issue_summary" title="'+soy.$$escapeHtml(e.issue.parent.summary)+'">'+soy.$$escapeHtml(e.issue.parent.key)+" "+soy.$$escapeHtml(e.issue.parent.summary)+"</a></li>":"")+'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.key)+'" id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'">'+soy.$$escapeHtml(e.issue.key)+'</a></li></ol><h1 id="summary-val">'+soy.$$escapeHtml(e.issue.summary)+"</h1>"})):"")+aui.page.pageHeaderActions({content:'<div id="issue-header-pager">'+(e.pager?JIRA.Components.IssueViewer.Templates.Header.pager(e.pager):"")+"</div>"})})+(e.isNewIssueViewEnabled?"":'<div class="command-bar">'+(e.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar(e):"")+"</div>")+"</div>"},JIRA.Components.IssueViewer.Templates.Header.titleAttr=function(e,s){return""+(e.title?'title="'+soy.$$escapeHtml(e.title)+'"':e.label&&e.label.length&&e.label.length>25?'title="'+soy.$$escapeHtml(e.label)+'"':"")};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueBody.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Body&&(JIRA.Components.IssueViewer.Templates.Body={}),JIRA.Components.IssueViewer.Templates.Body.issueBody=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels({panels:!1,serverRenderedViewIssue:!1})},JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels=function(e,s){var i='<div class="aui-group issue-body"><div class="aui-item issue-main-column">';if(e.serverRenderedViewIssue)for(var a=e.panels.leftPanels,l=a.length,o=0;o<l;o++){var n=a[o];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(n)}if(i+='</div><div id="viewissuesidebar" class="aui-item issue-side-column">',e.serverRenderedViewIssue)for(var t=e.panels.rightPanels,r=t.length,d=0;d<r;d++){var u=t[d];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(u)}return i+="</div></div>"},JIRA.Components.IssueViewer.Templates.Body.issuePanel=function(e,s){var i="";if(e.renderHeader){i+="<div id="+soy.$$escapeHtml(e.id)+' class="legacy-jira-fe-module toggle-wrap"><div id="'+soy.$$escapeHtml(e.id)+'_heading" class="mod-header"><ul class="ops">';for(var a=e.headerLinks.links,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:n})+"</li>"}if(e.headerLinks.groups.length>0){i+='<li class="drop"><div class="aui-dd-parent"><a href="#" class="more-menu aui-button aui-button-subtle aui-icon aui-icon-small aui-iconfont-more js-default-dropdown" title="'+soy.$$escapeHtml("Options")+'"><span>'+soy.$$escapeHtml("Options")+'</span></a><div class="aui-dropdown-content aui-list">';for(var t=e.headerLinks.groups,r=t.length,d=0;d<r;d++){var u=t[d];i+=(u.header&&u.header.label?"<h5>"+soy.$$escapeHtml(u.header.label)+"</h5>":"")+"<ul "+(u.header&&u.header.id?'id="'+soy.$$escapeHtml(u.header.id)+'"':"")+'class="aui-list-section'+(u.header&&u.header.styleClass?" "+soy.$$escapeHtml(u.header.styleClass):"")+(0==d?" aui-first":"")+(d==r-1?" aui-last":"")+'">';for(var m=u.links,p=m.length,c=0;c<p;c++){var f=m[c];i+='<li class="aui-list-item">'+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:f,additionalStyleClass:"aui-list-item-link"})+"</li>"}i+="</ul>"}i+="</div></div></li>"}if(i+="</ul>",e.subpanelHtmls.length>0){i+='<div class="mod-header-panels">';for(var y=e.subpanelHtmls,v=y.length,I=0;I<v;I++){var h=y[I];i+='<div class="mod-header-panel">'+soy.$$filterNoAutoescape(h)+"</div>"}i+="</div>"}i+='<h2 class="toggle-title">'+soy.$$escapeHtml(e.label)+'</h2></div><div class="mod-content">'+soy.$$filterNoAutoescape(e.html)+"</div></div>"}else i+=soy.$$filterNoAutoescape(e.html);return i},JIRA.Components.IssueViewer.Templates.Body.errorsLoading=function(e,s){e=e||{};var i=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){i+="<ul>";for(var a=e.errorMessages,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+soy.$$escapeHtml(n)+"</li>"}i+="</ul>"}return i},JIRA.Components.IssueViewer.Templates.Body.focusShifter=function(e,s){return'<div class="aui-message closeable" id="focus-shifter"><label><span>'+soy.$$escapeHtml("viewissue.focusshifter")+'</span><div id="focus-shifter-content"></div></label><span class="aui-icon icon-close"></span></div>'},JIRA.Components.IssueViewer.Templates.Body.simpleLink=function(e,s){return"<a "+(e.link.id?' id="'+soy.$$escapeHtml(e.link.id)+'"':"")+'href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'"'+(e.link.styleClass||e.additionalStyleClass?'class="'+soy.$$escapeHtml(e.link.styleClass)+(e.additionalStyleClass?" "+soy.$$escapeHtml(e.additionalStyleClass):"")+'"':"")+(e.link.title?'title="'+soy.$$escapeHtml(e.link.title)+'"':"")+"><span>"+soy.$$escapeHtml(e.link.label)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueError.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Error&&(JIRA.Components.IssueViewer.Templates.Error={}),JIRA.Components.IssueViewer.Templates.Error.NoPermission=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.Generic(null)},JIRA.Components.IssueViewer.Templates.Error.DoesNotExist=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be viewed",body:"The issue you\'re trying to view can\'t be displayed.",bodyAfter:"It may have been deleted or you don\'t have permission to view it right now.",error:"canNotBeViewed",showReloadButton:!1})},JIRA.Components.IssueViewer.Templates.Error.Generic=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be displayed right now",body:"It could be for a variety of reasons, like a network or application error.",bodyAfter:"Try reloading the page.",error:"genericError",showReloadButton:!0})},JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="issue-error"><span class="error-image error-image-'+soy.$$escapeHtml(e.error)+'"></span><h1>'+soy.$$escapeHtml(e.title)+"</h1><p>"+soy.$$escapeHtml(e.body)+"<br />"+soy.$$escapeHtml(e.bodyAfter)+"</p>"+(e.showReloadButton?'<p><button id="issue-error-reload-button" class="aui-button aui-button-primary">Reload</button></p>':"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.viewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h1>'+soy.$$escapeHtml(e.title)+'</h1></div><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="aui-message '+soy.$$escapeHtml(e.error)+'"><span class="aui-icon icon-'+soy.$$escapeHtml(e.error)+'"></span><p>'+soy.$$escapeHtml(e.body)+"</p><p>"+soy.$$escapeHtml("If you think this message is wrong, please contact your")+' <a href="'+soy.$$escapeHtml(AJS.contextPath())+'/secure/ContactAdministrators!default.jspa">'+soy.$$escapeHtml("Jira administrators")+"</a>.</p>"+(e.returnToSearch?'<p><a id="return-to-search" class="push-state" href="'+soy.$$escapeHtml(AJS.contextPath())+'/issues/" title="'+soy.$$escapeHtml("Return to search")+'">'+soy.$$escapeHtml("Return to search")+"</a></p>":"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError=function(e,s){return'<div id="issue-content"><header class="issue-header issue-error-header"><div class="issue-header-content">'+soy.$$filterNoAutoescape(e.header)+'</div></header><div class="issue-body-content issue-error-content">'+soy.$$filterNoAutoescape(e.body)+"</div></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueOpsbar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueOpsbar&&(JIRA.Components.IssueViewer.Templates.IssueOpsbar={}),JIRA.Components.IssueViewer.Templates.IssueOpsbar.opsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var a=e.issue.operations.linkGroups,l=a.length,r=0;r<l;r++){var t=a[r];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var i=t.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var a=e.issue.operations.linkGroups,l=a.length,r=0;r<l;r++){var t=a[r];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var i=t.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup=function(e,s){var o="";if(e.group.header&&(e.group.links.length>0||e.group.groups.length>0))o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(e.group);else{o+="<ul "+(e.group.id?'id="opsbar-'+soy.$$escapeHtml(e.group.id)+'" ':"")+'class="toolbar-group pluggable-ops">';for(var a=e.group.links,l=a.length,r=0;r<l;r++){var t=a[r];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})}if(1==e.group.groups.length&&0==e.group.groups[0].links.length&&1==e.group.groups[0].groups.length&&1==e.group.groups[0].groups[0].links.length)o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:e.group.groups[0].groups[0].links[0]});else for(var i=e.group.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u})}o+="</ul>"}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks=function(e,s){for(var o="",a=e.group.links,l=a.length,r=0;r<l;r++){var t=a[r];o+='<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})+"</ul>"}for(var i=e.group.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=u.groups.length>0||u.links.length>0?'<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(soy.$$augmentMap(u,{shouldHideLabel:!0}))+"</ul>":""}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink=function(e,s){var o='<li class="toolbar-item toolbar-analytics"><div><a href="#"'+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'"':"")+'aria-owns="'+(e.header.id?soy.$$escapeHtml(e.header.id)+"_drop":"")+'" aria-haspopup="true"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.header.title,label:e.header.label})+'class="toolbar-trigger aui-button aui-style-default'+(e.links.length>0||e.groups.length>0?" aui-dropdown2-trigger":"")+(e.header.styleClass?" "+soy.$$escapeHtml(e.header.styleClass):"")+'">'+(e.header.iconClass?'<span class="icon '+soy.$$escapeHtml(e.header.iconClass)+'"></span> ':"")+'<span class="dropdown-text">'+(!e.shouldHideLabel&&e.header.label?soy.$$truncate(soy.$$escapeHtml(e.header.label),25,!0):"")+"</span></a><div "+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'_drop"':"")+' class="aui-style-default aui-dropdown2">';if(e.links.length>0){o+="<ul>";for(var a=e.links,l=a.length,r=0;r<l;r++){var t=a[r];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(t)}o+="</ul>"}for(var i=e.groups,n=i.length,p=0;p<n;p++){var u=i[p];if(u.links.length>0){o+='<div class="aui-dropdown2-section"><ul>';for(var d=u.links,m=d.length,I=0;I<m;I++){var g=d[I];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(g)}o+="</ul></div>"}}return o+="</div></div></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem=function(e,s){return'<li class="aui-list-item"><a  href="'+(e.href?soy.$$escapeHtml(e.href):"#")+'"'+(e.styleClass?'class="'+soy.$$escapeHtml(e.styleClass)+'"':"")+JIRA.Components.IssueViewer.Templates.Header.titleAttr(e)+(e.id?'id="'+soy.$$escapeHtml(e.id)+'"':"")+'><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.label),25,!0)+"</span></a></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem=function(e,s){return'<li class="toolbar-item toolbar-analytics"><a id="'+soy.$$escapeHtml(e.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.link.title,label:e.link.label})+'class="toolbar-trigger'+(e.link.styleClass?" "+soy.$$escapeHtml(e.link.styleClass):"")+'" href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'">'+(e.link.iconClass?'<span class="icon '+soy.$$escapeHtml(e.link.iconClass)+'"></span> <span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>":'<span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>")+"</a></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.newIssueViewItem=function(e,s){return'<div class="aui-dropdown2-section" id="opsbar-more-new-issue-view-items"><ul><li class="aui-list-item"><span class="group-title">'+soy.$$escapeHtml("New Jira issue view")+'</span></li><li class="aui-list-item"><a href="https://support.atlassian.com/jira-core-cloud/docs/what-is-the-new-jira-issue-view/" target="_blank">'+soy.$$escapeHtml("Learn more")+'</a></li><li class="aui-list-item"><a href="#" id="turn-on-new-issue-view">'+soy.$$escapeHtml("Turn on the new issue view")+"</a></li></ul></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueActionsBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueActionsBar&&(JIRA.Components.IssueViewer.Templates.IssueActionsBar={}),JIRA.Components.IssueViewer.Templates.IssueActionsBar.container=function(s,e){for(var t='<div class="actions-bar"><div class="ops-menus">'+(s.issue.transitions.length?JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown({workflowName:s.issue.workflowName,status:s.issue.status,transitions:s.issue.transitions}):""),n=s.issue.primaryActions,a=n.length,o=0;o<a;o++)for(var i=n[o],r=i.links,l=r.length,u=0;u<l;u++){var p=r[u];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink({link:p})}return t+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown=function(s,e){for(var t='<button class="actions-bar-status-trigger aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless status-lozenge-'+soy.$$escapeHtml(s.status.statusColor)+'" aria-owns="actions-bar-status-dropdown">'+soy.$$escapeHtml(s.status.name)+'<span class="aui-icon aui-icon-small aui-iconfont-expanded"></span></button><div id="actions-bar-status-dropdown" class="aui-style-default aui-dropdown2"><div class="aui-dropdown2-section"><div class="actions-bar-status-list">',n=s.transitions,a=n.length,o=0;o<a;o++){var i=n[o];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem({transitionName:i.transitionName,statusName:i.destinationStatusName,statusColor:i.destinationStatusColor,link:i.url})}return t+='</div></div><div class="aui-dropdown2-section"><ul><li><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/admin/workflows/ViewWorkflowSteps.jspa?workflowMode=live&workflowName="+soy.$$escapeHtml(s.workflowName)+'" class="issueaction-viewworkflow jira-workflow-designer-link new-workflow-designer">'+soy.$$escapeHtml("View workflow")+"</a></li></ul></div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem=function(s,e){return'<a href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" class="actions-bar-status-item issueaction-workflow-transition"><span>'+soy.$$escapeHtml(s.transitionName)+'</span><span><span class="aui-icon aui-icon-small aui-iconfont-up">→</span></span><span>'+JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge({name:s.statusName,color:null!=s.statusColor?s.statusColor:"medium-gray"})+"</span></a>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge=function(s,e){return'<span class="jira-issue-status-lozenge aui-lozenge status-lozenge-'+soy.$$escapeHtml(s.color)+'">'+soy.$$escapeHtml(s.name)+"</span>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink=function(s,e){return'<a id="'+soy.$$escapeHtml(s.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:s.link.title,label:s.link.label})+'class="aui-button '+soy.$$escapeHtml(s.link.styleClass)+'" href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" ><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(s.link.label),25,!0)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/amd-wrapper.js' */
define("jira/components/issueviewer/templates",function(){"use strict";return JIRA.Components.IssueViewer.Templates}),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueViewer",null,require("jira/components/issueviewer")),AJS.namespace("JIRA.Components.IssueViewer.AppModule",null,require("jira/components/issueviewer/appmodule")),AJS.namespace("JIRA.Components.IssueViewer.Utils",null,require("jira/components/issueviewer/utils")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Error",null,require("jira/components/issueviewer/controllers/error")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Issue",null,require("jira/components/issueviewer/controllers/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Issue",null,require("jira/components/issueviewer/entities/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Panel",null,require("jira/components/issueviewer/entities/panel")),AJS.namespace("JIRA.Components.IssueViewer.Collections.Panels",null,require("jira/components/issueviewer/entities/panels")),AJS.namespace("JIRA.Components.IssueViewer.Models.PanelsGroup",null,require("jira/components/issueviewer/entities/panelsgroup")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.AsyncData",null,require("jira/components/issueviewer/legacy/asyncdata")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueEventBus",null,require("jira/components/issueviewer/legacy/issueeventbus")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueFieldUtil",null,require("jira/components/issueviewer/legacy/issuefieldutil")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.ViewIssueData",null,require("jira/components/issueviewer/legacy/viewissuedata")),AJS.namespace("JIRA.Components.IssueViewer.Services.IssueLoader",null,require("jira/components/issueviewer/services/issueloader")),AJS.namespace("JIRA.Components.IssueViewer.Services.Metadata",null,require("jira/components/issueviewer/services/metadataservice")),AJS.namespace("JIRA.Components.IssueViewer.Services.OptInNewIssueView",null,require("jira/components/issueviewer/services/optinnewissueviewservice")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorGeneric",null,require("jira/components/issueviewer/views/errorgeneric")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorNotFound",null,require("jira/components/issueviewer/views/errornotfound")),AJS.namespace("JIRA.Components.IssueViewer.Views.Error",null,require("jira/components/issueviewer/views/error")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueBody",null,require("jira/components/issueviewer/views/issuebody")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueHeader",null,require("jira/components/issueviewer/views/issueheader")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueOpsbar",null,require("jira/components/issueviewer/views/issueopsbar")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanels",null,require("jira/components/issueviewer/views/issuepanels")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanel",null,require("jira/components/issueviewer/views/issuepanel")),AJS.namespace("JIRA.Components.IssueViewer.Views.Issue",null,require("jira/components/issueviewer/views/issue")),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/IssueEditor.js' */
define("jira/components/issueeditor",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueeditor/controllers/editissue"),t=e("jira/util/events"),r=e("jira/components/issueeditor/eventtypes"),o=e("jira/components/issueeditor/controllers/fields"),n=e("jira/components/issueeditor/services/fieldsloader"),d=e("jira/components/issueeditor/services/issuesaver"),l=e("jira/components/issueviewer"),u=e("jira/util/data/meta"),a=e("jira/components/issueeditor/views/modalfield"),h=e("jira/components/issueeditor/views/saveerror"),v=e("jira/components/issueeditor/services/saveinprogressmanager"),c=window.JIRA,f=e("jira/components/issueeditor/services/unloadinterceptor"),I=window.AJS.contextPath(),g=function(){c.trace.apply(c,arguments)};return l.extend({namedEvents:["loadComplete","loadError","returnToSearch","saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","replacedFocusedPanel","fieldsLoaded"],initialize:function(e){l.prototype.initialize.call(this,e),this._buildFieldsLoader(),this._buildIssueSaver(),this._buildEditIssueController(),this._buildFieldsController(),this._handleUnload(),this.listenAndRethrow(this.eventBus,"fieldSubmitted")},_buildFieldsLoader:function(){this.fieldsLoader=new n({contextPath:I}),this.listenTo(this.fieldsLoader,"fieldsLoaded",function(e){this.viewIssueData.updateIssue(e.issueKey,e),e.issueId=Number(e.issueId);var s=e.fields&&e.fields.length;s?this.editIssueController.update(e):this.editIssueController.reset(),this.trigger("fieldsLoaded"),g("jira.issue.fields.loaded",{id:e.issueId})}),this.listenTo(this.fieldsLoader,"fieldsError",function(e){this.fieldsController.showError(e.errorCollection,e.isTimeout),g("jira.issue.fields.loaded",{id:e.issueId})})},_buildIssueSaver:function(){this.saveInProgressManager=new v,this.issueSaver=new d({saveInProgressManager:this.saveInProgressManager,model:this.model}),this.listenTo(this.issueSaver,"error",function(e){var s=e.issueId,i=e.attemptedSavedIds,t=e.response,r=e.duration;if(!this.model.isCurrentIssue(s))return void this._showSaveError({issueId:s,issueKey:e.issueKey,response:t});this.eventBus.triggerSaveError(s,i,t);var o=t&&t.fields&&t.fields.length;!o&&t&&(this.editIssueController.reset(),this.model.update(t,{fieldsSaved:[],fieldsInProgress:[]})),this.trigger("saveError",{issueId:s,duration:r,deferred:!1}),g("jira.issue.refreshed",{id:s})}),this.listenTo(this.issueSaver,"saveStarted",function(e,s){this.eventBus.triggerSavingStarted(s)}),this.listenTo(this.issueSaver,"save",function(e){var s=e.issueId,i=e.issueKey,t=e.savedFieldIds,r=e.savedFieldTypes,o=e.response,n=e.shouldSkipSaveIssueSuccessHandler,d=e.duration;if(this.model.isCurrentIssue(s)&&!n){this.eventBus.triggerSaveSuccess(s,i,t,o),this.viewIssueData.set(i,o),this.model.update(o,{fieldsSaved:t,fieldsInProgress:this.editIssueController.getEditsInProgress()}),g("jira.psycho.issue.refreshed",{id:s});var l=o.fields&&o.fields.length;l&&this.editIssueController.update({fields:o.fields,issueId:s,issueKey:i},{editable:!0,editIssueController:this.editIssueController,issueModel:this.model,issueId:s,fieldsSaved:t,initialize:!1,fieldsInProgress:this.editIssueController.getEditsInProgress()}),g("jira.issue.refreshed",{id:s})}this.trigger("saveSuccess",{issueId:s,issueKey:i,savedFieldIds:t,savedFieldTypes:r,duration:d})})},_buildEditIssueController:function(){this.editIssueController=new i({issueEventBus:this.eventBus}),this.listenTo(this.editIssueController,"save",function(e,s,i,t,r,o){this.issueSaver.setSkipSaveIssueSuccessHandler(!1),this.issueSaver.save(e,s,i,t,r,o)}),this.listenAndRethrow(this.editIssueController,"editField"),this.listenAndRethrow(this.editIssueController,"editFieldCancel")},_buildFieldsController:function(){this.fieldsController=new o},_onIssueLoaded:function(e,s,i){e.issue.isEditable&&(s.error||s.fromCache||this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:i.issueEntity}));var t=!s.mergeIntoCurrent&&i.initialize!==!1;s.isUpdate&&!t||this.editIssueController.reset(),l.prototype._onIssueLoaded.call(this,e,s,i),e.fields&&(this.editIssueController.update({fields:e.fields,issueId:e.issue.id,issueKey:e.issue.key}),g("jira.issue.fields.loaded",{id:e.issue.id}))},_handleUnload:function(){var e=function(){var e;return this.editIssueController.getDirtyEditsInProgress().length>0&&(e="You are still editing this page. Are you sure you want to leave?"),e}.bind(this);this.unloadInterceptor=new f,this.unloadInterceptor.addAfterEvent(e),this.on("destroy",function(){this.unloadInterceptor.removeAfterEvent(e)})},_updateModel:function(e,i){var t=e.fields&&e.fields.length;t&&this.editIssueController.update(e.fields,{fieldsInProgress:this.editIssueController.getEditsInProgress(),changed:i.changed}),i=s.extend({},i,{fieldsInProgress:this.editIssueController.getEditsInProgress()}),l.prototype._updateModel.call(this,e,i)},_loadIssueFromDom:function(e){u.get("server-view-issue-is-editable")&&(this.editIssueController.setIssueId(e.id),this.editIssueController.setIssueKey(e.key),this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:e}),u.set("server-view-issue-is-editable",null)),l.prototype._loadIssueFromDom.call(this,e)},editField:function(e){if(e.isEditable()){var s=this.model.getEntity(),i=function(){e.matchesFieldSelector()?e.edit():new a({issueEventBus:this.eventBus,model:e,issue:s}).show()}.bind(this);e.getSaving()?t.one(r.ISSUE_REFRESHED,function(){i()}):i()}},abortPending:function(){this.fieldsLoader.cancel(),l.prototype.abortPending.call(this)},beforeHide:function(){this.issueSaver.setSkipSaveIssueSuccessHandler(!0),l.prototype.beforeHide.call(this)},setContainer:function(e){this.editIssueController.setIssueViewContext(e),l.prototype.setContainer.call(this,e)},dismiss:function(){this.editIssueController.reset(),l.prototype.dismiss.call(this)},getFields:function(){return this.editIssueController.getFields()},hasSavesInProgress:function(){return this.saveInProgressManager.hasSavesInProgress()},_showSaveError:function(e){var i,t;i=new h(e).render(),t=s.partial(this.stopListening,i),this.listenTo(i,{close:t,issueLinkClick:function(e){var s={isPrevented:!1,preventDefault:function(){this.isPrevented=!0},isDefaultPrevented:function(){return this.isPrevented===!0},issueData:e};this.trigger("linkInErrorMessage",s),s.isDefaultPrevented()||this.loadIssue(e)}})}})});
//# sourceMappingURL=IssueEditor-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/IssueEditorAppModule.js' */
define("jira/components/issueeditor/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),t=e("jira/components/issueeditor"),n=e("jira/components/issueviewer/appmodule");return n.extend({name:"issueEditor",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new t({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(e){var t=n.prototype.commands.call(this,e);return r.extend(t,{editField:!0})},requests:function(e){var t=n.prototype.requests.call(this,e);return r.extend(t,{fields:function(){return e.getFields()},hasSavesInProgress:!0})},events:function(e){var r=n.prototype.events.call(this,e);return r.concat(["saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","fieldsLoaded"])}})});
//# sourceMappingURL=IssueEditorAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/NoInlineAppModule.js' */
define("jira/components/issueeditor/noinlineappmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/issueviewer/appmodule");return r.extend({name:"issueEditor",requests:function(e){var s=r.prototype.requests.call(this,e);return n.extend(s,{fields:function(){return[]},hasSavesInProgress:function(){return!1}})}})});
//# sourceMappingURL=NoInlineAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/templates/Fields.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.IssueEditor&&(JIRA.Templates.IssueEditor={}),"undefined"==typeof JIRA.Templates.IssueEditor.Fields&&(JIRA.Templates.IssueEditor.Fields={}),JIRA.Templates.IssueEditor.Fields.saveErrorMessage=function(e,s){var t="",o='<a class="issue" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issueKey)+'">'+soy.$$escapeHtml(e.issueKey)+"</a>";if(t+=soy.$$filterNoAutoescape(AJS.format("Saving of \u003cstrong\u003e{0}\u003c/strong\u003e failed!",o)),e.errors.length>0){t+="<ul>";for(var a=e.errors,i=a.length,l=0;l<i;l++){var n=a[l];t+="<li>"+soy.$$escapeHtml(n)+"</li>"}t+="</ul>"}return t},JIRA.Templates.IssueEditor.Fields.field=function(e,s){return'<form id="'+soy.$$escapeHtml(e.issue.id)+'-form" class="ajs-dirty-warning-exempt aui" action= "#"><div class="inline-edit-fields">'+soy.$$filterNoAutoescape(e.issue.editHtml)+'</div><span class="overlay-icon throbber"></span><div class="save-options"><button type="submit" class="aui-button submit" accessKey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.accessKey))+'"><span class="aui-icon aui-icon-small aui-iconfont-success">'+soy.$$escapeHtml("Save")+'</span></button><button type="cancel" class="aui-button cancel" accessKey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.accessKey))+'"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Cancel")+"</span></button></div></form>"},JIRA.Templates.IssueEditor.Fields.modalField=function(e,s){return'<div class="aui-dialog-content"><h2 class="dialog-title">'+soy.$$escapeHtml(AJS.format("Edit {0} for {1}",e.field.label,e.issue.key))+'</h2><form action="" class="aui" method="post"><div class="form-body">'+soy.$$filterNoAutoescape(e.field.editHtml)+'</div><div class="buttons-container form-footer"><div class="buttons"><input class="button" type="submit" value="'+soy.$$escapeHtml("Submit")+'"/><a class="cancel" href="#">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form></div>"},JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors=function(e,s){var t='<div class="error">';if(1==e.messages.length)t+=soy.$$escapeHtml(e.messages[0]);else if(e.messages.length>0){t+="<ul>";for(var o=e.messages,a=o.length,i=0;i<a;i++){var l=o[i];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}t+="</ul>"}return t+="</div>"},JIRA.Templates.IssueEditor.Fields.errorsLoading=function(e,s){var t=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){t+="<ul>";for(var o=e.errorMessages,a=o.length,i=0;i<a;i++){var l=o[i];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}t+="</ul>"}return t};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/templates/amd-wrapper.js' */
define("jira/components/issueeditor/templates",function(){"use strict";return JIRA.Templates.IssueEditor.Fields}),AJS.namespace("JIRA.Templates.IssueEditor.Fields",null,require("jira/components/issueeditor/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/entities/FieldModel.js' */
define("jira/components/issueeditor/entities/field",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jira/components/libs/brace"),s=t("jira/util/events"),r=t("jira/components/issueviewer/legacy/issuefieldutil"),n=t("jquery"),a=t("jira/skate"),h=t("jira/components/issueeditor/templates"),o=t("jira/components/issueeditor/eventtypes");return e.Model.extend({namedEvents:["editingStarted","focusRequested","editingCancelled","save","saveError","savingStarted","saveComplete","saveSuccess","updateRequired","validationError","modelDestroyed"],namedAttributes:["id","initParams","params","editHtml","viewHtml","required","fieldType","editing","saving","error","label","contentId"],initialize:function(){if(this.collection){var t=this;this.collection.on("reset",function(){t.triggerModelDestroyed()})}this.on("change:viewHtml",function(){var t=this.previous("viewHtml");t&&n.cleanData(t)}),this.onModelDestroyed(function(){var t=this.getViewHtml();t&&n.cleanData(t)})},blurEdit:function(){this.getEditing()&&(this.isDirty()||this.hasValidationError()?this.save():this.cancelEdit())},setValidationError:function(t,i,e){this.setSaving(!1),this.setError(i),this.edit({ignoreBlur:!0}),this.triggerSaveError(),this.triggerValidationError(t,e)},handleSaveError:function(){this.setSaving(!1),this.triggerSaveError()},cancelEdit:function(t){if(!this.cancelLocked){var i=new n.Event(o.BEFORE_INLINE_EDIT_CANCEL);s.trigger(i,[this.getId(),this.getFieldType(),t]),i.isDefaultPrevented()||(this.cancelLocked=!0,(this.getEditing()||this.getSaving())&&(this.setEditing(!1),this.setSaving(!1),this.unset("params"),this.unset("initParams"),this.triggerEditingCancelled(),this.unset("viewHtml")),delete this.cancelLocked)}},edit:function(t){this.getEditing()?t&&t.ignoreBlur||this.triggerFocusRequested(this,t):(this.setEditing(!0),this.triggerEditingStarted(this,t))},getCurrentParams:function(){this.triggerUpdateRequired();var t={};if(this.getParams())t=this.getParams();else if(this.getInitParams())t=this.getInitParams();else{var e=n("<div />").html(this.getEditHtml());this.setInitParams(this._serializeObject(e)),t=this.getInitParams()}var s={};return i.each(t,function(t,i){s[i]=t}),s},isEditable:function(){return!!this.getEditHtml()&&0!==n(this.getEditHtml()).find("textarea, :text,:radio,:checkbox, select").length},hasValidationError:function(){return!!this.getError()},switchElToEdit:function(t){this.getViewHtml()||this.setViewHtml(t.contents()),t.contents().detach(),t.html(h.field({issue:this.toJSON(),accessKey:r.getAccessKeyModifier()})),t.each(function(){a.init(this)}),this.getInitParams()||this.setInitParams(this._serializeObject(t)),this.setEditing(!0)},update:function(t){this.getEditing()&&this.setParams(this._serializeObject(t))},handleSaveSuccess:function(){this.setSaving(!1),this.setEditing(!1),this.unset("viewHtml"),this.unset("initParams"),this.setError(null),this.triggerSaveSuccess()},handleSaveStarted:function(){this.setSaving(!0),this.triggerSavingStarted()},save:function(){this.getSaving()||(this.triggerUpdateRequired(),this.triggerSave(this))},isDirty:function(){return this.triggerUpdateRequired(),this._isDirty(this.getCurrentParams())},_isDirty:function(t){return JSON.stringify(t)!==JSON.stringify(this.getInitParams())},matchesFieldSelector:function(){return r.matchesFieldSelector(this.id)},_serializeObject:function(t){var i={},e=n(t).find(":input").serializeArray();return n.each(e,function(){i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i}},{IS_EDITABLE:function(t){return t.isEditable()}})});
//# sourceMappingURL=FieldModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/entities/FieldCollection.js' */
define("jira/components/issueeditor/entities/fields",["require"],function(i){"use strict";var t=i("jira/components/libs/underscore"),e=i("jira/components/libs/brace"),n=i("jira/components/issueeditor/entities/field");return e.Collection.extend({model:n,initialize:function(){this.on("editingStarted",this._handleEditingStarted,this)},_handleEditingStarted:function(i,t){t=t||{},t.ignoreBlur||this.each(function(t){i!==t&&t.getEditing()&&t.blurEdit()})},update:function(i,e){var n=this;if(e&&e.changed){var d=e.changed,r=d.updated?d.updated.fields:[],a=d.added?d.added.fields:[];t.each(i,function(i){if(t.contains(r,i.id)){var e=n.get(i.id);e?(e.hasValidationError()&&delete i.editHtml,e.set(i,{silent:!0}),n.trigger("updated",e)):n.add(i)}else t.contains(a,i.id)&&n.add(i)})}else t.each(i,function(i){var t=n.get(i.id);t?(t.hasValidationError()&&delete i.editHtml,t.set(i,{silent:!0}),n.trigger("updated",t)):n.add(i)})},cancelEdit:function(){this.each(function(i){i.cancelEdit()})},isDirty:function(){return this.any(function(i){return i.isDirty()})},getDirtyFields:function(){return this.filter(function(i){return i.isDirty()})}})});
//# sourceMappingURL=FieldCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/views/FieldView.js' */
define("jira/components/issueeditor/views/field",["require"],function(e){"use strict";var t=e("jira/components/issueeditor/cancelreasons"),i=e("jira/util/events"),s=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),l=e("jira/components/libs/marionette-1.4.1/itemview"),o=e("jira/util/events/reasons"),d=e("jira/components/issueeditor/templates"),a=e("jira/components/issueeditor/eventtypes"),r=e("jira/components/issueeditor/analytics/viewissue");return l.extend({events:{"click .cancel":"onClickCancel",keyup:"onKeyCancel","click .submit":"onSubmit",click:"onEdit",mousedown:"saveSelectedText","submit form":"onSubmit",'keydown select[multiple="multiple"]':"_enterToSubmitMultiSelect","keypress select":"_enterToSubmitSelect","keypress textarea.no-line-break":"_enterToSubmitSelect","beforeBlurInput *":"_preventBlurByEsc"},initialize:function(e){this.model.on("validationError",this.handleValidationError,this),this.model.on("editingStarted",this.switchToEdit,this),this.model.on("focusRequested",this.focus,this),this.model.on("editingCancelled",this.switchToRead,this),this.model.on("saveError",this.handleSaveError,this),this.model.on("updateRequired",this.updateModel,this),this.model.on("savingStarted",this.handleSavingStarted,this),this.model.on("modelDestroyed",this.destroy,this),this.decorate(),this.issueEventBus=e.issueEventBus,this.issueEventBus.on("panelRendered",this.handlePanelRendered,this),this.model.setFieldType(this.$el.data("fieldtypecompletekey")),this._editDelay=0;var t=this.$el.children("shorten");t.length&&t.shorten();var s=this;i.bind(a.INLINE_EDIT_BLURRED,function(e,t){t===s.model.getId()&&s._onPossibleBlur()}),i.bind(a.INLINE_EDIT_REQUESTED,function(e,t){t!==s.model.getId()&&0!==s._editDelay&&(clearTimeout(s._editDelay),s._editDelay=0)})},destroy:function(){this.issueEventBus.off("panelRendered",this.handlePanelRendered)},decorate:function(){this.model.isEditable()&&!this.model.getEditing()&&(this.$el.addClass("editable-field inactive"),this.$el.append('<span class="overlay-icon aui-icon aui-icon-small aui-iconfont-edit" />'),this._addToolTip())},getEditElements:function(){return this.$el.find(".inline-edit-fields")},_addToolTip:function(){this.$el.attr("title","Click to edit"),n("a:not([title]):not([original-title])",this.$el).attr("title","Follow link")},_removeToolTip:function(){this.$el.removeAttr("title")},_stealAccessKeys:function(){n("[accessKey='"+"s"+"']").attr("accessKey","_s"),n("[accessKey='"+"`"+"']").attr("accessKey","_x")},_returnAccessKeys:function(){n("[accessKey=_s]").attr("accessKey","s"),n("[accessKey=_x]").attr("accessKey","`")},_handleEditingStarted:function(e){var t=this.$el.find(".field-tools");i.trigger(a.NEW_CONTENT_ADDED,[this.$el,o.inlineEditStarted]),i.trigger(a.INLINE_EDIT_STARTED,[this.model.getId(),this.model.getFieldType(),this.getEditElements(),this.$el]),this.$el.find(".textarea").css("height",Math.max(this._originalHeight,60)).expandOnInput(window.innerHeight-n("#stalker").height()-100),this.$el.find("textarea.initial-height").css("height",this._originalHeight).expandOnInput(window.innerHeight-n("#stalker").height()-100),e&&this.$el.find(":input:visible:first").focus(),this.$el.find(".error").size()||this.$el.find("select.aui-ss-select").each(function(){var e=n(this);e.data("static-suggestions")&&e.trigger("showSuggestions")}),this.$el.find(".save-options").attr("tabindex",1).prepend(t)},handleValidationError:function(e,t){this.$el.html(d.field({issue:{id:this.model.id,editHtml:e},accessKey:s.getAccessKeyModifier()})),this.$el.find(".error").addClass("inline-edit-error").attr("data-field",this.model.id),this._handleEditingStarted(t)},handlePanelRendered:function(e,t){var i=n(s.getFieldSelector(this.model.id),t);1===i.length&&(this.$el=i,this.el=this.$el[0],this.decorate(),this.delegateEvents())},handleSaveError:function(){this.$el.find(":input").removeAttr("disabled").trigger("enable"),this.$el.removeClass("saving saving-"+this.model.id)},handleSavingStarted:function(){this.$el.find(":input").attr("disabled","disabled").trigger("disable"),this.$el.find(".overlay-icon.throbber").spin(),this.$el.addClass("saving saving-"+this.model.id)},updateModel:function(){this.model.update(this.$el)},reveal:function(){var e=40;this.$el.scrollIntoView({direction:"y",marginBottom:e,marginTop:n("#stalker").outerHeight(!0)+e}),this.$el.trigger("reveal")},focus:function(){if(this.reveal(),this.$el.find(":input").removeAttr("disabled"),0===n(".aui-blanket[aria-hidden='false']").length){var e=this.$el.find(":input:visible:first");e.focus(),this.$el.hasClass("field-ignore-highlight")||e.select()}},switchToEdit:function(){this.trigger("editField",{fieldId:this.model.getId()}),this._stealAccessKeys(),this._removeToolTip(),this.$el.removeClass("inactive saving").addClass("active"),this._originalHeight=this.$el.height(),this.model.switchElToEdit(this.$el),this._handleEditingStarted(),this.focus()},switchToRead:function(){this.trigger("editFieldCancel",{fieldId:this.model.getId()}),this._addToolTip(),this.$el.addClass("inactive").removeClass("active"),this.$el.html(this.model.getViewHtml()),this.$el.closest("form").unbind("submit",this.onSubmit),this._returnAccessKeys()},onKeyCancel:function(e){27===e.keyCode&&(this.model.cancelEdit(t.escPressed),e.preventDefault())},onClickCancel:function(e){this.model.cancelEdit(),e.preventDefault(),e.stopPropagation()},onSubmit:function(e){var t=new n.Event("before-submit");this.$el.find("form").trigger(t),t.isDefaultPrevented()||(this.$el.find(":focus").blur(),this.issueEventBus.triggerFieldSubmitted(),this.model.save(),this._returnAccessKeys()),e.preventDefault()},onEdit:function(e){var t=n(e.target).is(".overlay-icon.aui-iconfont-edit"),s=0===n(e.target).closest("a, .uneditable").length&&this.$el.hasClass("inactive"),l=""===this._getCurrentlySelectedText()&&!this._previouslySelectedText,o=s&&(t||l),d=this.model.getId(),c=this.model.getFieldType();if(0!==this._editDelay)r.triggerEditableFieldDoubleClick(d,c),clearTimeout(this._editDelay),this._editDelay=0;else if(o){i.trigger(a.INLINE_EDIT_REQUESTED,[d]);var h=this;t?(r.triggerEditableFieldClickPencilIcon(d,c),n(document).one("click",function(e){e.isDefaultPrevented()||h.model.edit()})):this._editDelay=setTimeout(function(){!e.isDefaultPrevented()&&h.$el.hasClass("inactive")&&""===h._getCurrentlySelectedText()&&(r.triggerEditableFieldSingleClick(d,c),h.model.edit()),h._editDelay=0},250)}},_onPossibleBlur:function(){this.model.getSaving()||n(".aui-blanket[aria-hidden='false']").length>0||this.model.blurEdit()},_preventBlurByEsc:function(e){e.preventDefault()},_getCurrentlySelectedText:function(){return n(document.activeElement).is(":input")?"":document.selection&&document.selection.createRange?document.selection.createRange().text||"":window.getSelection?window.getSelection().toString():""},_enterToSubmitSelect:function(e){e.isDefaultPrevented()||13===e.which&&(e.preventDefault(),n(e.target).closest("form").submit())},_enterToSubmitMultiSelect:function(e){e.isDefaultPrevented()||13===e.which&&n(e.target).blur()},saveSelectedText:function(){this._previouslySelectedText=this._getCurrentlySelectedText()}})});
//# sourceMappingURL=FieldView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/views/ModalFieldView.js' */
define("jira/components/issueeditor/views/modalfield",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),o=e("jira/util/events"),t=e("jira/dialog/form-dialog"),s=e("jira/components/libs/marionette-1.4.1/itemview"),r=e("jira/components/issueeditor/templates");return s.extend({errorsTemplate:r.modalFieldGeneralErrors,template:r.modalField,initialize:function(e){i.bindAll(this,"_onHide","_onSubmit","_remove","_showGeneralError","_showValidationError","_updateModel"),o.bind("Dialog.hide",this._onHide),this.issueEventBus=e.issueEventBus,this.issueEventBus.on("saveError",this._showGeneralError),this.model.onSaveSuccess(this._remove),this.model.onUpdateRequired(this._updateModel),this.model.onValidationError(this._showValidationError)},_enable:function(){var e=this._getDialog();e.hideFooterLoadingIndicator();var i=e.$popup;i.find(":input").removeAttr("disabled").trigger("enable"),i.find(":input:first").focus().select(),i.find(":submit").removeAttr("disabled")},_getDialog:function(){return this._dialog||(this._dialog=new t({id:"modal-field-view",submitHandler:this._onSubmit,content:function(e){e(this.template({field:this.model.toJSON(),issue:this.options.issue}))}.bind(this)}),this._dialog.get$popup().data("field-id",this.model.getId())),this._dialog},_onHide:function(e,i){i===this._getDialog().get$popup()&&this._remove()},_onSubmit:function(e,i){e.preventDefault(),this.model.save(),i();var o=this._getDialog();o.showFooterLoadingIndicator(),o.$popup.find(":input").attr("disabled","disabled").trigger("disable")},close:function(){this._remove()},_remove:function(){var e=this._getDialog();e.get$popup().is(":visible")&&e.hide(),e.destroy(),this.model.cancelEdit(),o.unbind("Dialog.hide",this._onHide),this.issueEventBus.off("saveError",this._showGeneralError),this.model.off("saveSuccess",this._remove),this.model.off("updateRequired",this._updateModel),this.model.off("validationError",this._showValidationError)},show:function(){this.model.edit(),this._getDialog().show()},_showGeneralError:function(e,o,t){this._enable();var s=this._getDialog().$popup,r=t&&t.errorCollection;if(r){var n=!i.isEmpty(r.errors),d=!i.isEmpty(r.errorMessages);!n&&d&&s.find(".form-body").append(this.errorsTemplate({messages:r.errorMessages}))}},_showValidationError:function(e){this._enable(),this._getDialog().$popup.find(".form-body").html(e)},_updateModel:function(){this.model.update(this._getDialog().$popup)}})});
//# sourceMappingURL=ModalFieldView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/views/LoadingError.js' */
define("jira/components/issueeditor/views/loadingerror",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),s=e("jira/message"),t=e("jira/components/issueeditor/templates");return i.extend({template:t.errorsLoading,initialize:function(e,i){this.errorMessages=e,this.isTimeout=i},serializeData:function(){return{errorMessages:this.errorMessages,isTimeout:this.isTimeout}},onRender:function(){this.setElement(s.showErrorMsg(this.$el.html(),{closeable:!0,timeout:0}))}})});
//# sourceMappingURL=LoadingError-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/views/SaveError.js' */
define("jira/components/issueeditor/views/saveerror",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1/itemview"),r=e("jira/message"),t=e("jira/components/issueeditor/templates");return i.extend({events:{"simpleClick .issue":"onIssueLinkClick"},template:t.saveErrorMessage,getErrorMessages:function(){var e,i=[];return e=this.options.response.errorCollection,e&&(i=e.errorMessages.concat(s.values(e.errors))),i},onIssueLinkClick:function(e){var s;s={id:this.options.issueId,key:this.options.issueKey},e.preventDefault(),this.trigger("issueLinkClick",s),this.close()},onRender:function(){this.setElement(r.showErrorMsg(this.$el.html(),{closeable:!0,timeout:0}))},serializeData:function(){return{errors:this.getErrorMessages(),issueKey:this.options.issueKey}}})});
//# sourceMappingURL=SaveError-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/controllers/EditIssueController.js' */
define("jira/components/issueeditor/controllers/editissue",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/libs/brace"),s=e("jira/components/issueeditor/entities/fields"),n=e("jira/components/issueeditor/views/field"),r=e("jira/components/issueviewer/legacy/issuefieldutil"),d=e("jquery"),a=e("jira/message"),l=e("jira/components/issueeditor/templates");return t.Model.extend({namedAttributes:["issueId","issueKey","issueViewContext","fields","issueEventBus"],namedEvents:["save","editField","editFieldCancel"],initialize:function(){i.bindAll(this,"_handleSaveError","_handleSaveSuccess","_handleSavingStarted","cancelUneditedFields","createFieldView","handleFieldUpdate","save"),this.set({fields:new s},{silent:!0}),this.getFields().bind("add",this.createFieldView).bind("updated",this.handleFieldUpdate).bind("save",this.save),this.getIssueEventBus().onSavingStarted(this._handleSavingStarted),this.getIssueEventBus().onSaveSuccess(this._handleSaveSuccess),this.getIssueEventBus().onSaveError(this._handleSaveError),this.getIssueEventBus().onSave(this.save),this.getIssueEventBus().onSave(this.cancelUneditedFields)},_saveById:function(e){var i=this.getFields().get(e);i&&i.blurEdit()},_handleSaveError:function(e,t,s){var n=this;s?this.applyErrors(s):i.each(t,function(e){var i=n.getFields().get(e);i&&i.handleSaveError()})},_handleSavingStarted:function(e){this.getFields().each(function(t){i.include(e,t.id)&&t.handleSaveStarted()})},handleFieldUpdate:function(e){var i=d(r.getFieldSelector(e.id));i.hasClass("editable-field")||this.createFieldView(e)},applyErrors:function(e,t){var s=e.errorCollection;if(s&&s.errors&&this.getFields().each(function(n){if(s.errors[n.id]){var r=i.find(e.fields,function(e){return e.id===n.id});r&&(n.setValidationError(r.editHtml,s.errors[n.id],t),t=!1)}}),s.errorMessages&&s.errorMessages.length){var n=l.saveErrorMessage({errors:s.errorMessages,issueKey:this.getIssueKey()});a.showErrorMsg(n,{closeable:!0})}},reset:function(){this.getFields().reset()},cancelEdit:function(){this.getFields().each(function(e){e.cancelEdit()})},_handleSaveSuccess:function(e,t,s){var n=this.getFields().filter(function(e){return i.indexOf(s,e.id)>=0});i.each(n,function(e){e.handleSaveSuccess()})},getDirtyEditsInProgress:function(){return i.pluck(this.getFields().filter(function(e){return e.getEditing()&&e.isDirty()}),"id")},getEditsInProgress:function(){return i.pluck(this.getFields().filter(function(e){return e.getEditing()}),"id")},save:function(e,t){var s={},n=[],r=[],d=[e];if(e){if(!e.getEditing()||e.getSaving())return}else d=this.getFields().filter(function(e){return!e.getSaving()&&e.getEditing()&&e.isDirty()});i.each(d,function(e){n.push(e.getId()),r.push(e.getFieldType()||""),i.extend(s,e.getCurrentParams())}),n.length>0&&this.triggerSave(this.getIssueId(),this.getIssueKey(),n,s,t,r)},cancelUneditedFields:function(){this.getFields().each(function(e){!e.getEditing()||e.isDirty()||e.hasValidationError()||e.cancelEdit()})},update:function(e,t){e.fields&&(t&&t.fieldsInProgress&&i.each(e.fields,function(e){i.contains(t.fieldsInProgress,e.id)&&(e.editing=!0)}),this.getFields().update(e.fields,t)),e.issueId&&this.setIssueId(e.issueId),e.issueKey&&this.setIssueKey(e.issueKey)},createFieldView:function(e){var t=d(r.getFieldSelector(e.id),this.getIssueViewContext());if(1===t.length){var s=new n({model:e,el:t,issueEventBus:this.getIssueEventBus()}),a=function(t){var s={issueId:this.getIssueId(),issueKey:this.getIssueKey(),fieldId:e.getId(),fieldType:e.attributes.fieldType};return t=i.extend(s,t)}.bind(this);s.on("editField",function(e){this.trigger("editField",a(e))}.bind(this)),s.on("editFieldCancel",function(e){this.trigger("editFieldCancel",a(e))}.bind(this))}}})});
//# sourceMappingURL=EditIssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/controllers/FieldsController.js' */
define("jira/components/issueeditor/controllers/fields",["require"],function(e){"use strict";var i=e("jira/components/issueeditor/views/loadingerror"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({showError:function(e,t){(e||t)&&(this.close(),this.triggerMethod("before:render"),this.view=new i(e,t),this.view.render(),this.listenTo(this.view,"close",this.close),this.triggerMethod("render"))},close:function(){this.view&&(this.view.close(),this.stopListening(this.view),delete this.view)}})});
//# sourceMappingURL=FieldsController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/services/FieldsLoaderService.js' */
define("jira/components/issueeditor/services/fieldsloader",["require"],function(e){"use strict";var s=e("jira/components/issueviewer/legacy/issuefieldutil"),i=e("jquery"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({initialize:function(e){this.recurringPromise=(new i.RecurringPromise).sub(),this.recurringPromise.done(function(e){this.trigger("fieldsLoaded",e)}.bind(this)).fail(function(e){this.trigger("fieldsError",e)}.bind(this)),this.contextPath=e.contextPath},load:function(e){var s=this._buildUpdateTask(e);this.recurringPromise.add(s)},cancel:function(){this.recurringPromise.reset()},_getFieldsData:function(e,t){var r=i.ajax({url:this.contextPath+"/secure/AjaxIssueEditAction!default.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},data:{issueId:e}}),a=r.pipe(function(i){JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireSuccessSlaEvent&&JIRA.Issues.Application.fireSuccessSlaEvent("getLegacyIssueViewEditFields");var r=s.transformFieldHtml(i);return{issueId:e,issueKey:t,fields:r.fields}},function(s){var i,t={};switch(JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireFailSlaEvent&&s.status>=500&&JIRA.Issues.Application.fireFailSlaEvent("getLegacyIssueViewEditFields",{reason:"get-legacy-issue-view-edit-fields-failed-with-status-code",statusCode:s.status}),s.status){case 400:i=!1;try{var r=JSON.parse(s.responseText)||{};t=r.errorCollection}catch(a){}break;case 401:i=!1,t=null;break;default:i=!0,t={}}return{issueId:e,fields:null,errorCollection:t,isTimeout:"timeout"===s.statusText,fatalError:i}});return a.abort=function(){r.abort.apply(r,arguments)},a},_buildUpdateTask:function(e){var s=e.viewIssueData,t=e.issueEntity,r=new i.Deferred;return s.setPending(t.id,this._getFieldsData(t.id,t.key),function(e){r.resolve(e)},function(e){e.fatalError?r.reject(e):r.resolve(e)}),r.promise()}})});
//# sourceMappingURL=FieldsLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/services/IssueSaverService.js' */
define("jira/components/issueeditor/services/issuesaver",["require"],function(e){"use strict";var s=e("jira/components/issueviewer/legacy/issuefieldutil"),i=e("jira/components/libs/marionette-1.4.1/controller");return i.extend({initialize:function(e){this.saveInProgressManager=e.saveInProgressManager,this.model=e.model,this._saveStarted=[],this.saveInProgressManager.onSavingStarted(function(e,s){this._saveStarted.push((new Date).getTime()),this.trigger("saveStarted",e,s)}.bind(this)),this.saveInProgressManager.onSaveSuccess(function(e,i,t,r,a){r&&r.fields&&s.transformFieldHtml(r),this.trigger("save",{issueId:e,issueKey:i,savedFieldIds:t,savedFieldTypes:a,response:r,shouldSkipSaveIssueSuccessHandler:this._shouldSkipSaveIssueSuccessHandler,duration:(new Date).getTime()-this._saveStarted.shift()})}.bind(this)),this.saveInProgressManager.onSaveError(function(e,i,t,r){r&&r.fields&&s.transformFieldHtml(r),this.trigger("error",{issueId:e,issueKey:i,attemptedSavedIds:t,response:r,duration:(new Date).getTime()-this._saveStarted.shift()})}.bind(this))},setSkipSaveIssueSuccessHandler:function(e){this._shouldSkipSaveIssueSuccessHandler=e},save:function(e,s,i,t,r,a){this.saveInProgressManager.saveIssue(e,s,i,t,r,a)}})});
//# sourceMappingURL=IssueSaverService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/services/SaveInProgressManager.js' */
define("jira/components/issueeditor/services/saveinprogressmanager",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),s=e("jira/components/libs/brace"),t=window.AJS.contextPath(),a=e("jira/util/events"),n=e("jira/components/issueviewer/legacy/issuefieldutil"),o=e("jira/dialog/form-dialog"),i=e("jquery"),g=e("jira/message"),c=e("jira/ajs/ajax/smart-ajax"),v=e("jira/components/issueeditor/eventtypes"),l=e("jira/components/utils/ajshelper");return s.Model.extend({namedAttributes:["savesInProgress"],namedEvents:["beforeSaving","savingStarted","saveSuccess","saveError"],initialize:function(){this.setSavesInProgress([])},saveIssue:function(e,s,o,i,g,l){this.triggerBeforeSaving();var d,u,S=this;u=r.extend(i,{issueId:e,atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:o});var h=r.extend({type:"POST",url:t+"/secure/AjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},error:function(r){S._handleSaveError(e,s,o,r)},success:function(r,t,a,i){var g=i.data;"string"==typeof g?S._handleHtmlResponse(e,s,o,g,l):(n.transformFieldHtml(g),S.triggerSaveSuccess(e,s,o,g,l))},complete:function(){S.removeSaveInProgress(d),a.trigger(v.INLINE_EDIT_SAVE_COMPLETE)},data:u},g);d=c.makeRequest(h),this.addSaveInProgress(d),this.triggerSavingStarted(e,o,i)},hasSavesInProgress:function(){return this.getSavesInProgress().length>0},removeSaveInProgress:function(e){this.setSavesInProgress(r.without(this.getSavesInProgress(),e))},addSaveInProgress:function(e){var r=this.getSavesInProgress();r.push(e),this.setSavesInProgress(r)},_handleHtmlResponse:function(e,r,s,t,a){var g=this,c=i(l.extractBodyFromResponse(t)),v=c.find("#atl_token").val();v&&i("#atlassian-token").attr("content",v);var d=new o({offsetTarget:"body",content:c});this.triggerSaveError(e,r,s),d._handleServerSuccess=function(t){d.hide();var o=g._parseResponse(t);o&&(n.transformFieldHtml(o),g.triggerSaveSuccess(e,r,s,o,a))},d._handleServerError=function(t){d.hide();var a=g._parseResponse(t.responseText);a&&(n.transformFieldHtml(a),g.triggerSaveError(e,r,s,a))},d.show()},_handleSaveError:function(e,r,s,t){var a=this._parseResponse(t.responseText);a&&(n.transformFieldHtml(a),this.triggerSaveError(e,r,s,a))},_parseResponse:function(e){try{return JSON.parse(e)}catch(r){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";g.showErrorMsg(e,{closeable:!0})}})});
//# sourceMappingURL=SaveInProgressManager-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/services/UnloadInterceptor.js' */
define("jira/components/issueeditor/services/unloadinterceptor",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({initialize:function(){this._afterEventHandlers=[],this.originalBeforeUnload=window.onbeforeunload,window.onbeforeunload=this.onBeforeUnload.bind(this)},addAfterEvent:function(e){this._afterEventHandlers.push(e)},removeAfterEvent:function(e){this._afterEventHandlers=n.without(this._afterEventHandlers,e)},onBeforeUnload:function(){var e,t=arguments;return n.isFunction(this.originalBeforeUnload)&&(e=this.originalBeforeUnload.apply(window,t)),e||(e=n.reduce(this._afterEventHandlers,function(e,n){return e?e:n.apply(window,t)},e)),e}})});
//# sourceMappingURL=UnloadInterceptor-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/InlineEditUtils.js' */
define("jira/components/issueeditor/inlineeditutils",["require"],function(e){"use strict";function s(e){var s=document.activeElement;return e.find(s).length>0||e.filter(s).length>0||r()}function r(){var e=i(".mediaPickerPopup");return e.length>0&&"block"===e.css("display")}var i=e("jquery"),t=e("jira/util/events"),l=e("jira/components/issueeditor/eventtypes"),u={};return u.BLUR_FOCUS_TIMEOUT=50,u.BlurTriggers={Default:function(e,r){function i(){s(r)||(n=!1,t.trigger(l.INLINE_EDIT_BLURRED,[e]))}r=r.nextAll(".save-options").andSelf();var a,g=":input, a[href], [tabindex]",n=s(r),o={focus:function(){n||(n=!0,t.trigger(l.INLINE_EDIT_FOCUSED,[e]))},blur:function(){a&&clearTimeout(a),a=setTimeout(i,u.BLUR_FOCUS_TIMEOUT)}};r.attr("tabindex",1).bind(o).delegate(g,o)}},u.BlurTriggerMapping={system:{summary:u.BlurTriggers.Default,priority:u.BlurTriggers.Default,issuetype:u.BlurTriggers.Default,components:u.BlurTriggers.Default,versions:u.BlurTriggers.Default,fixVersions:u.BlurTriggers.Default,assignee:u.BlurTriggers.Default,reporter:u.BlurTriggers.Default,environment:u.BlurTriggers.Default,description:u.BlurTriggers.Default,labels:u.BlurTriggers.Default,duedate:u.BlurTriggers.Default},custom:{"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:float":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:labels":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:project":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:select":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:url":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:version":u.BlurTriggers.Default}},t.bind(l.INLINE_EDIT_STARTED,function(e,s,r,i){var t;if(r){if(t=u.BlurTriggerMapping.custom[r],!t){var l=r.replace(/.+:(.+)/,"$1");t=u.BlurTriggerMapping.custom[l]}}else t=u.BlurTriggerMapping.system[s];t&&t(s,i)}),u});
//# sourceMappingURL=InlineEditUtils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/eventtypes.js' */
define("jira/components/issueeditor/eventtypes",["require"],function(e){"use strict";var E=e("jira/components/issueviewer/eventtypes");return E.INLINE_EDIT_SAVE_COMPLETE="inlineEditSaveComplete",E.INLINE_EDIT_STARTED="inlineEditStarted",E.BEFORE_INLINE_EDIT_CANCEL="inlineEditCancelled",E.INLINE_EDIT_BLURRED="inlineEditBlurred",E.INLINE_EDIT_FOCUSED="inlineEditFocused",E.INLINE_EDIT_REQUESTED="inlineEditRequested",E.LOCK_PANEL_REFRESHING="lockPanelRefreshing",E.UNLOCK_PANEL_REFRESHING="unlockPanelRefreshing",E});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/cancelreasons.js' */
define("jira/components/issueeditor/cancelreasons",function(){"use strict";return{escPressed:"escPressed"}});
//# sourceMappingURL=cancelreasons-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/analytics/ViewIssue.js' */
define("jira/components/issueeditor/analytics/viewissue",["require"],function(e){"use strict";function i(e,i){l.trigger("analyticsEvent",{name:e,data:{fieldId:i}})}var l=e("jira/components/utils/ajshelper"),t=e("jira/components/analytics-tracker/tracker");return{triggerEditableFieldDoubleClick:function(e,l){i("jira.viewissue.editable-field.double-click",e),t.trackEvent("viewissue.editable-field","double-click",{fieldId:e,fieldType:l})},triggerEditableFieldSingleClick:function(e,l){i("jira.viewissue.editable-field.single-click",e),t.trackEvent("viewissue.editable-field","single-click",{fieldId:e,fieldType:l})},triggerEditableFieldClickPencilIcon:function(e,l){i("jira.viewissue.editable-field.click.pencil-icon",e),t.trackEvent("viewissue.editable-field","click.pencil-icon",{fieldId:e,fieldType:l})}}});
//# sourceMappingURL=ViewIssue-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueEditor",null,require("jira/components/issueeditor")),AJS.namespace("JIRA.Components.IssueEditor.AppModule",null,require("jira/components/issueeditor/appmodule")),AJS.namespace("JIRA.Components.IssueEditor.NoInlineAppModule",null,require("jira/components/issueeditor/noinlineappmodule")),AJS.namespace("JIRA.Components.IssueEditor.Controllers.EditIssue",null,require("jira/components/issueeditor/controllers/editissue")),AJS.namespace("JIRA.Components.IssueEditor.Controllers.Fields",null,require("jira/components/issueeditor/controllers/fields")),AJS.namespace("JIRA.Components.IssueEditor.Collections.Fields",null,require("jira/components/issueeditor/entities/fields")),AJS.namespace("JIRA.Components.IssueEditor.Models.Field",null,require("jira/components/issueeditor/entities/field")),AJS.namespace("JIRA.Components.IssueEditor.Services.FieldsLoader",null,require("jira/components/issueeditor/services/fieldsloader")),AJS.namespace("JIRA.Components.IssueEditor.Services.IssueSaver",null,require("jira/components/issueeditor/services/issuesaver")),AJS.namespace("JIRA.Components.IssueEditor.Services.SaveInProgressManager",null,require("jira/components/issueeditor/services/saveinprogressmanager")),AJS.namespace("JIRA.Components.IssueEditor.Services.UnloadInterceptor",null,require("jira/components/issueeditor/services/unloadinterceptor")),AJS.namespace("JIRA.Components.IssueEditor.Views.FieldView",null,require("jira/components/issueeditor/views/field")),AJS.namespace("JIRA.Components.IssueEditor.Views.LoadingError",null,require("jira/components/issueeditor/views/loadingerror")),AJS.namespace("JIRA.Components.IssueEditor.Views.ModalFieldView",null,require("jira/components/issueeditor/views/modalfield")),AJS.namespace("JIRA.Components.IssueEditor.Views.SaveError",null,require("jira/components/issueeditor/views/saveerror")),AJS.namespace("JIRA.Components.IssueEditor.InlineEditUtils",null,require("jira/components/issueeditor/inlineeditutils")),AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggers",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggers),AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggerMapping",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggerMapping),AJS.namespace("JIRA.Issues.CANCEL_REASON",null,require("jira/components/issueeditor/cancelreasons"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'jira.webresources:calendar-en', location = '/includes/lib/calendar/lang/calendar-en.js' */
Calendar._DN=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"),Calendar._SDN=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"),Calendar._FD=0,Calendar._MN=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),Calendar._SMN=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),Calendar._TT={},Calendar._TT.INFO="About the calendar",Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the «, » buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.",Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.",Calendar._TT.PREV_YEAR="Prev. year (hold for menu)",Calendar._TT.PREV_MONTH="Prev. month (hold for menu)",Calendar._TT.GO_TODAY="Go Today",Calendar._TT.NEXT_MONTH="Next month (hold for menu)",Calendar._TT.NEXT_YEAR="Next year (hold for menu)",Calendar._TT.SEL_DATE="Select date",Calendar._TT.DRAG_TO_MOVE="Drag to move",Calendar._TT.PART_TODAY=" (today)",Calendar._TT.DAY_FIRST="Display %s first",Calendar._TT.WEEKEND="0,6",Calendar._TT.CLOSE="Close",Calendar._TT.TODAY="Today",Calendar._TT.TIME_PART="(Shift-)Click or drag to change value",Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d",Calendar._TT.TT_DATE_FORMAT="%a, %b %e",Calendar._TT.WK="wk",Calendar._TT.TIME="Time:",Calendar._TT.AM="AM",Calendar._TT.PM="PM",Calendar._TT.am="am",Calendar._TT.pm="pm";;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/jquery/plugins/keyevents/keyevents.js' */
!function(e){function t(t,n,r){function i(t){var i=n(t);if(i){var c=new e.Event(r);c.key=i,"aui:keypress"!==r&&(c.shiftKey=t.shiftKey,c.ctrlKey=t.ctrlKey,c.altKey=t.altKey);var u=t.target,a=9===u.nodeType?u:u.ownerDocument;a!==document?(c.target=u,arguments[0]=c,e.event.trigger(c,arguments,document,!0)):e(u).trigger(c),c.isDefaultPrevented()&&t.preventDefault()}}var c=0;e.event.special[r]={setup:function(){0===c&&e(document).bind(t,i),c++},teardown:function(){c--,0===c&&e(document).unbind(t,i)}}}var n={8:"Backspace",9:"Tab",13:"Return",16:"Shift",17:"Control",18:"Alt",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del"},r={16:"Shift",17:"Control",18:"Alt"},i=0;t("keydown",function(e){if(e.which in r){if(e.which===i)return null;i=e.which}else i=0;return n[e.which]||null},"aui:keydown"),t("keypress",function(e){var t=e.altKey&&e.ctrlKey;switch(i=0,e.which){case 0:case 8:case 9:case 27:break;default:if(t||!e.ctrlKey&&!e.metaKey)return String.fromCharCode(e.which)}return null},"aui:keypress"),t("keyup",function(e){return e.which===i&&(i=0),n[e.which]||null},"aui:keyup")}(jQuery);;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/jquery/plugins/shortcuts/shortcuts.js' */
!function(t){function n(t){h&&r(),h=16!==t.which}function e(n){var e=t(n.target).prop("contenteditable");if(t(n.target).is(":input:not(button[type=button])")||"true"===e||""===e)return void r();a.push(n.key),clearTimeout(c),c=setTimeout(r,2e3),a.length>d&&a.shift();for(var o=a.join(""),i=0;i<o.length;i++){var s=o.slice(i);if(s in u){n.preventDefault(),n=new t.Event("shortcut"),n.data=s,u[s].call(document,n),a.length=0;break}}h=!1}function o(){h&&r()}function r(){a.length=0}function i(t,n){var e=t.length,o=n.length;if(e===o)return t===n;var r,i;return e<o?(r=n.indexOf(t),i=o-e):(r=t.indexOf(n),i=e-o),r>=0&&r<i}var u={},a=[],d=0,c=0,h=!1,s=t(document);t.event.special.shortcut={setup:function(){s.bind("keydown",n),s.bind("aui:keypress",e),s.bind("keyup",o)},teardown:function(){s.unbind("keydown",n),s.unbind("aui:keypress",e),s.unbind("keyup",o)},add:function(t){if(this!==document)throw new TypeError('"shortcut" event handlers must be bound at the document');if(void 0===t.data)throw new Error('No data argument supplied in call to jQuery.fn.bind("shortcut", '+(t.handler.name||"function")+")");if("string"!=typeof t.data)throw new TypeError("Object "+t.data+" is not a string");if(0===t.data.length)throw new Error("Shortcut sequence must not be empty");for(var n in u)if(i(n,t.data))return void console.log('Cannot bind new shortcut "'+t.data+'" due to conflict with existing shortcut "'+n+'"');t.data.length>d&&(d=t.data.length),u[t.data]=t.handler},remove:function(t){if(this!==document)throw new TypeError('"shortcut" event handlers must be bound at the document');delete u[t.data]}}}(jQuery);;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/ajs/keyboardshortcut/KeyboardShortcuts.js' */
define("jira/ajs/keyboardshortcut/keyboard-shortcut",["jira/util/formatter","aui/inline-dialog","wrm/context-path","jquery","underscore"],function(t,e,o,r,n){var i=o(),c=function(t,e){this._executer=null,this.shortcuts=[t],this._bindShortcut(t,e)};return c.prototype._bindShortcut=function(t,o){if("string"!=typeof t)throw new TypeError("KeyboardShortcut expects string; received "+typeof t);if(/^(?:ctrl|alt|shift|meta)+/i.test(t))throw new SyntaxError('KeyboardShortcut cannot bind the shortcut "'+t+'" because it uses a modifier');var n=this;r(document).bind("shortcut",t,function(r){n._executer&&!n._ignoreShortcut(r,t,o)&&(e.current&&e.current.hide(),n._executer(r),r.preventDefault())})},c.prototype._ignoreShortcut=function(t,e,o){var r=!1;return n.each(c._ignoreConditions,function(n){n(t,e,o)&&(r=!0)}),r},c.prototype._addShortcutTitle=function(e){var o=r(e),n=o.attr("title")||"",i="Type",c="then",u="OR",s=r.map(this.shortcuts,function(t){return" '"+t.split("").join("' "+c+" '")+"'"});n+=" ( "+i+s.join(" "+u+" ")+" )",o.attr("title",n)},c.prototype.moveToNextItem=function(t){this._executer=function(){var e,o=r(t),n=r(t+".focused");this._executer.blurHandler||r(document).one("keypress",function(t){27===t.keyCode&&n&&n.removeClass("focused")}),0===n.length?n=r(t).eq(0):(n.removeClass("focused"),e=r.inArray(n.get(0),o),e<o.length-1?(e+=1,n=o.eq(e)):(n.removeClass("focused"),n=r(t).eq(0))),n&&n.length>0&&(n.addClass("focused"),n.scrollIntoView(),n.find("a:first").focus())}},c.prototype.moveToPrevItem=function(t){this._executer=function(){var e,o=r(t),n=r(t+".focused");this._executer.blurHandler||r(document).one("keypress",function(t){27===t.keyCode&&n&&n.removeClass("focused")}),0===n.length?n=r(t+":last"):(n.removeClass("focused"),e=r.inArray(n.get(0),o),e>0?(e-=1,n=o.eq(e)):(n.removeClass("focused"),n=r(t+":last"))),n&&n.length>0&&(n.addClass("focused"),n.scrollIntoView(),n.find("a:first").focus())}},c.prototype.click=function(t){this._addShortcutTitle(t),this._executer=function(){var e=r(t).eq(0);e.length>0&&e.click()}},c.prototype.goTo=function(t){this._executer=function(){window.location.href=i+t}},c.prototype.followLink=function(t){this._addShortcutTitle(t),this._executer=function(){var e=r(t).eq(0);e.length>0&&("a"===e.prop("nodeName").toLowerCase()||"link"===e.prop("nodeName").toLowerCase())&&(e.click(),window.location.href=e.attr("href"))}},c.prototype.moveToAndClick=function(t){this._addShortcutTitle(t),this._executer=function(){var e=r(t).eq(0);e.length>0&&(e.click(),e.scrollIntoView())}},c.prototype.moveToAndFocus=function(t){this._addShortcutTitle(t),this._executer=function(e){var o=r(t).eq(0);o.length>0&&(o.focus(),o.scrollIntoView(),o.is(":input")&&e.preventDefault())}},c.prototype.evaluate=function(t){"function"!=typeof t&&(t=new Function(t)),t.call(this)},c.prototype.execute=function(t){var e=this;this._executer=function(){"function"!=typeof t&&(t=new Function(t)),t.call(e)}},c.prototype.or=function(t){return this.shortcuts.push(t),this._bindShortcut(t),this},c._ignoreConditions=[],c._shortcuts=[],c.addIgnoreCondition=function(t){c._ignoreConditions.push(t)},c.getKeyboardShortcutKeys=function(t){for(var e in c._shortcuts){var o=c._shortcuts[e];if(o.moduleKey===t)return o.keys.toString()}return null},c.fromJSON=function(t){var e;return t&&(c._shortcuts=t,e={},n.each(t,function(t){t.keys.forEach(function(o){var r=o.join("");if(o.length<r.length)throw new Error("Shortcut sequence ["+o.join(",")+"] contains invalid keys");var n=e[r]=new c(r,t.context);n[t.op](t.param)})})),e},c}),AJS.namespace("AJS.KeyboardShortcut",null,require("jira/ajs/keyboardshortcut/keyboard-shortcut"));;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/ajs/keyboardshortcut/initKeyboardShortcuts.js' */
!function(){var r=require("jira/ajs/keyboardshortcut/keyboard-shortcut"),e=require("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"),t=require("jira/util/data/meta"),u=require("jira/dialog/dialog"),a=require("aui/dropdown"),o=require("aui/popup"),i=require("jquery"),n=require("wrm/data");r.addIgnoreCondition(function(){return o.current||a.current||u.current||e.areKeyboardShortcutsDisabled()}),i(function(){t.get("keyboard-shortcuts-enabled")?e.enable():e.disable();var u=n.claim("jira.webresources:key-commands.shortcuts");u&&(AJS.activeShortcuts=r.fromJSON(u),i(document).bind("aui:keyup",function(r){var e,t;"Esc"===r.key&&(e=i(r.target),e.is(":input:not(button[type='button'])")&&(t=new i.Event("beforeBlurInput"),e.trigger(t,[{reason:"escPressed"}]),t.isDefaultPrevented()||e.blur()))}))})}();;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/ajs/whenitype/whenIType.js' */
!function(r){AJS.whenIType=function(e,n){return new r(e,n)},AJS.whenIType.fromJSON=r.fromJSON}(require("jira/ajs/keyboardshortcut/keyboard-shortcut"));;
;
/* module-key = 'jira.webresources:favourite-button', location = '/includes/jira/favourite-button/favourite-button-constants.js' */
define("jira/favourite-button/constants",[],function(){var a={BOARDS:{id:"boards",backendUrlPart:"BOARDS",analytics:{source:"boardScreen",actionSubject:"board"}},FILTERS:{id:"filters",backendUrlPart:"FILTERS",analytics:{source:"filterScreen",actionSubject:"filter"}},DASHBOARDS:{id:"dashboards",backendUrlPart:"DASHBOARDS",analytics:{source:"dashboardScreen",actionSubject:"dashboard"}}},r={STARRED:"starred",UNSTARRED:"unstarred"};return{FAVOURITE_ITEM_TYPES:a,TRACK_ANALYTICS_ACTIONS:r}});;
;
/* module-key = 'jira.webresources:favourite-button', location = '/includes/jira/favourite-button/favourite-button-api.js' */
define("jira/favourite-button/api",["jquery","jira/featureflags/feature-manager"],function(t,e){"use strict";function r(e,r,n){var a=new t.Deferred;return t.ajax({url:r,type:e.toUpperCase(),contentType:"application/json",data:n,dataType:"json",timeout:o}).done(function(t){a.resolve(t)}).fail(function(t,e){a.reject({error:t.status,textStatus:e})}),a.promise()}function n(t,e){return AJS.contextPath()+"/rest/internal/2/favourites/"+t.backendUrlPart+"/"+e}function a(t,e){var a=n(t,e);return r("get",a)}function i(t,e,a){var i=n(t,e);if(!a)return r("delete",i);i=AJS.contextPath()+"/rest/internal/2/favourites";var o={entity:{id:e,type:t.id.toLowerCase()},beforeEntityPosition:null};return r("post",i,o)}var o=15e3;return{getIsFavourite:a,updateIsFavourite:i}});;
;
/* module-key = 'jira.webresources:favourite-button', location = 'includes/jira/favourite-button/FavouriteButton.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.FavouriteButton&&(JIRA.Templates.FavouriteButton={}),JIRA.Templates.FavouriteButton.renderFavouriteButton=function(t,e){return""+aui.buttons.button({text:"",iconType:"aui",iconClass:"favourite-btn-icon aui-icon-small favourite-btn-icon--"+(t.isFavourite?"star":"unstar"),extraClasses:["favourite-btn aui-button-subtle "+(null==t.isFavourite?"favourite-btn--no-value":"")]})};;
;
/* module-key = 'jira.webresources:favourite-button', location = '/includes/jira/favourite-button/FavouriteButton.js' */
define("jira/favourite-button/favourite-button",["jquery","jira/favourite-button/constants","jira/favourite-button/api","jira/featureflags/feature-manager","jira/container-api"],function(t,e,i,n,o){function a(){AJS.flag({type:"error",close:"auto",title:"Something\'s gone wrong",body:"You cannot star items right now due to an error."})}var s,r=require("jira/analytics/web-client"),u=o.APIs.getFavouriteAPI,v=require("jira/util/data/meta"),c=function(e){this.entityType=e.entityType,null!=e.entityId&&(this.entityId=e.entityId.toString()),this.favouriteButtonElement=t(),this.isFavourite=e.isFavouriteInitialValue;var i=e.onUpdateCallbacks||{};this.onOptimisticUpdate=i.onOptimisticUpdate||t.noop,this.onUpdateRequestSuccess=i.onUpdateRequestSuccess||t.noop,this.onUpdateRequestError=i.onUpdateRequestError||t.noop,this._isFavouriteButtonEnabled()&&this._init()};return c.prototype._init=function(){var e=this;this.analyticsEventProps=t.extend({},this.entityType.analytics,{actionSubjectId:this.entityId}),void 0===this.isFavourite&&i.getIsFavourite(this.entityType,this.entityId).then(function(t){e._setIsFavourite(t)}).fail(function(){e._setIsFavourite(!1)})},c.prototype._isLoggedIn=function(){return!!v.get("remote-user")},c.prototype._isFavouriteButtonEnabled=function(){return this._isLoggedIn()&&null!=this.entityId&&this.entityType},c.prototype._sendStarringAnalyticsEvent=function(t){var i=t?e.TRACK_ANALYTICS_ACTIONS.STARRED:e.TRACK_ANALYTICS_ACTIONS.UNSTARRED;this._sendTrackAnalyticsEvent(i)},c.prototype._sendTrackAnalyticsEvent=function(e){r.sendTrackEvent(t.extend({},this.analyticsEventProps,{action:e}))},c.prototype._sendUIButtonClickedAnalyticsEvent=function(){r.sendUIEvent(t.extend({},this.analyticsEventProps,{action:"clicked",actionSubject:"button",actionSubjectId:"starButton"}))},c.prototype._setIsFavourite=function(t){var e=this.favouriteButtonElement.find(".favourite-btn-icon");this.isFavourite=t,void 0!==this.isFavourite&&this.favouriteButtonElement.removeClass("favourite-btn--no-value"),t?e.removeClass("favourite-btn-icon--unstar").addClass("favourite-btn-icon--star"):e.removeClass("favourite-btn-icon--star").addClass("favourite-btn-icon--unstar")},c.prototype._sendUpdateToJiraFrontend=function(t){var e=this;u().then(function(i){i.changeFavourite({id:e.entityId,type:e.entityType.id,value:t}).then(function(){e._sendStarringAnalyticsEvent(t)})})},c.prototype._onValueFromJiraFrontend=function(t){var e=t[this.entityType.id],i=e&&e[this.entityId];if(i){this.isUpdateRequestInProgress=i.pending;var n=i.value;this.isFavourite!==n&&(this._setIsFavourite(n),this.onOptimisticUpdate(n))}},c.prototype._updateIsFavourite=function(t){var e=this;this.isUpdateRequestInProgress||(this.isUpdateRequestInProgress=!0,this._setIsFavourite(t),this.onOptimisticUpdate(t),this._sendUIButtonClickedAnalyticsEvent(),u().then(function(){e._sendUpdateToJiraFrontend(t)},function(){i.updateIsFavourite(e.entityType,e.entityId,t).then(function(){e.isUpdateRequestInProgress=!1,e._sendStarringAnalyticsEvent(t),e.onUpdateRequestSuccess(t)}).fail(function(){e.isUpdateRequestInProgress=!1,a();var i=!t;e._setIsFavourite(i),e.onUpdateRequestError(t)})}))},c.prototype.setAnalyticsEventProps=function(e){this._isFavouriteButtonEnabled()&&(this.analyticsEventProps=t.extend(!0,this.analyticsEventProps,e))},c.prototype.onClick=function(t){var e=!this.isFavourite;this._updateIsFavourite(e),t.stopPropagation(),t.preventDefault(),this.favouriteButtonElement.blur()},c.prototype.render=function(){if(this._isFavouriteButtonEnabled()){this.favouriteButtonElement=AJS.$(JIRA.Templates.FavouriteButton.renderFavouriteButton({isFavourite:this.isFavourite}));var t=this;return this.favouriteButtonElement.tooltip({gravity:"n",title:function(){return t.isFavourite?"Unstar":"Star"}}).on("click",this.onClick.bind(this)),u().then(function(e){s||(s=t._onValueFromJiraFrontend.bind(t),e.registerFavouriteChangeCallback(s))}),this.favouriteButtonElement}},c.prototype.onUnmount=function(){if(this._isFavouriteButtonEnabled()){u().then(function(t){t.unregisterFavouriteChangeCallback(s),s=void 0})}},c.prototype.remove=function(){this._isFavouriteButtonEnabled()&&(this.onUnmount(),this.favouriteButtonElement.length&&this.favouriteButtonElement.remove())},c});;
;
/* module-key = 'jira.webresources:have-i-seen-it', location = '/js/featureflags/have-i-seen-it.js' */
define("jira/featureflags/have-i-seen-it",["exports"],function(e){var t="/gateway/api/flag/my",n=function(e,t,n,a){200!=t.status?AJS.log(e+" Response was had a status of '"+t.status+"' saying '"+t.statusText+"'"):AJS.log("There was an error processing the response. Error was '"+n+"'")},a=function(e){var a=AJS.$.Deferred(),s=a.promise(),o=AJS.$.ajax({url:t+"?flagKey="+e,contentType:"application/json",type:"GET",cache:!0});return o.done(function(e){a.resolve(e.status)}),o.error(function(e,t,a){n("Failed to get have seen it.",e,t,a)}),s},s=function(e){AJS.$.ajax({type:"POST",url:t,contentType:"application/json",data:JSON.stringify({flagKey:e}),dataType:"json",error:function(e,t,a){n("Failed to set message as seen it",e,t,a)}})},o=function(e,t,n){return e+"-"+t+"."+n};e.setAsSeenIt=function(e,t,n){s(o(e,t,n))},e.haveISeenIt=function(e,t,n){return a(o(e,t,n))}});;
;
/* module-key = 'jira.webresources:project-property-service', location = '/js/service/project-property-service.js' */
define("jira/service/project-property-service",["exports","jira/analytics/web-client"],function(e,t){var r=function(e,t){return"/rest/api/2/project/"+e+"/properties/"+t},o=function(e,t,r,o){404!==t.status&&(200!==t.status?AJS.log(e+" Response was had a status of '"+t.status+"' saying '"+t.statusText+"'"):AJS.log("There was an error processing the response. Error was '"+r+"'"))},s=function(e,t,s){var n=AJS.$.Deferred(),a=n.promise(),i=AJS.$.get(r(e,t));return i.done(function(e){n.resolve(e.value)}),i.error(function(e,t,r){o("Failed to get project property.",e,t,r),404===e.status?n.resolve(s):n.reject(r)}),a},n=function(e,o,s){return AJS.$.ajax({type:"PUT",url:r(e,o),contentType:"application/json",data:s,error:function(r){t.sendOperationalEvent({source:"ui",actionSubject:"projectProperty",action:"set failed",attributes:{propertyKey:o,projectId:e,status:r.status}})}})};e.getProperty=s,e.setProperty=n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/dialog/dialog.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.baseExtension={_getDefaultOptions:function(){return AJS.$.extend(this._super(),{onDialogFinished:function(){this.handleSuccess()}})},_performRedirect:function(){this.redirected=!0,this.handleSuccess()},hide:function(e,n){if(JIRA.Dialog.current!==this)return!1;this._super(e),!0===n||!n||n.reason!==JIRA.Dialog.HIDE_REASON.escape&&n.reason!==JIRA.Dialog.HIDE_REASON.cancel||this.doCancelCleanup()},doCancelCleanup:function(){},handleSuccess:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/rapid/ops/DialogExtension.js' */
AJS.namespace("GH.Dialog.XBoardExtension"),GH.Dialog.XBoardExtension.getActionInfo=function(e){var t="workflow-transition-",e=e.options.id;return e.substring(0,t.length)===t?{formId:e,isTransition:!0,transitionId:e.substring(t.length)}:{formId:e,isTransition:!1}},GH.Dialog.XBoardExtension.handleSuccess=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),this.hide(!0,!0),this._hideloadingIndicator();var e=GH.Dialog.XBoardExtension.getActionInfo(this),t=GH.IssueOperationShortcuts.getSelectedIssueId(),a=GH.IssueOperationShortcuts.getSelectedIssueKey();GH.WorkController.isActive()?GH.Dialog.handleWorkModeUpdate(t,a,e):GH.PlanController.isActive()&&GH.Dialog.handlePlanModeUpdate(t,a,e),GH.Notification.showIssueMessage(t),GH.WorkDragAndDrop.transitionTargetStatus=void 0},GH.Dialog.handlePlanModeUpdate=function(e,t,a){var o,r,s;GH.IssueOperationShortcuts.isOverrideSelectedIssueActive()||(o=0,r=null,(s=GH.BacklogModel.findModelWithIssue(t))&&(GH.SprintModel.isSprintModel(s)&&(r=s.getSprintId()),o=s.getIssueList().getIssueIndex(t)),GH.PlanController.reload(function(){var e;GH.BacklogSelectionController.getSelectedIssueKey()||(e=null,e=(e=r?GH.BacklogModel.getSprintModel(r):e)||GH.BacklogModel.getBacklogModel2(),GH.BacklogSelectionController.selectIssue(e.getIssueList().getIssueKeyAtIndex(o)))}))},GH.Dialog.handleWorkModeUpdate=function(e,t,a){var o,r,s,n,l,i=GH.Dialog.createParentCompletedCheckCallback(t),d=GH.Dialog.createSelectMostAppropriateIssueCallback(t);a.isTransition&&(GH.WorkDragAndDrop.transitionTargetStatus?(o=GH.WorkDragAndDrop.transitionTargetStatus,s=(r=GH.GridDataController.getModel()).getIssueDataByKey(t),n=r.getIssuePositionByKey(t),l=r.getColumns(),a=n.columnId,l=GH.GridColumnsData.getColumnIdForStatus(l,o),r.moveIssueToColumn(t,a,l),s.status=o,r.updateIssueData(s),GH.SwimlaneView.rerenderCell(n.swimlaneId,a),GH.SwimlaneView.rerenderCell(n.swimlaneId,l),i()):GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"ParentWithAllSubsCompletedCheck",i)),GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"SelectMostAppropriateIssueCallback",d),GH.WorkController.reload()},GH.Dialog.createParentCompletedCheckCallback=function(r){return function(){var t,a,o=GH.GridDataController.getModel(),e=GH.RapidBoard.State.shouldUseTypeHierarchyLevel();_.isUndefined(o.data.issues[r])||(!e&&!_.isUndefined(o.data.issues[r].parentKey)||e&&o.data.issues[r].typeHierarchyLevel===GH.RapidViewConfig.SUBTASK_HIERARCHY_LEVEL)&&(t=o.data.issues[r].parentKey,_.contains(o.data.columnIssueMapping[_.last(o.data.columns).id],r)&&(a=o.data.columnIssueMapping[_.last(o.data.columns).id],e=_.reduce(_.toArray(o.data.issues),function(e){return!_.contains(a,e)}),_.find(e,function(e){return o.data.issues[e].parentKey===t})||GH.WorkController.resolveParentTask(o.data.issues[t])))}},GH.Dialog.createSelectMostAppropriateIssueCallback=function(t){var a=GH.GridDataController.getModel().getIssuePositionByKey(t);return function(){var e;GH.GridDataController.getModel().getIssueDataByKey(t)||((e=GH.GridDataController.getModel().getIssueKeyAtPosition(a))?GH.WorkSelectionController.selectIssue(e,{pushState:!1,dontUpdateUI:!0}):GH.WorkSelectionController.selectIssue(void 0,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState())}},GH.Dialog.XBoardExtension.doCancelCleanup=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.WorkDragAndDrop.transitionTargetStatus=void 0};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/dialog/form-dialog.js' */
!function(){"use strict";var o=require("jira/dialog/form-dialog");AJS.namespace("GH.FormDialog"),GH.FormDialog=o.extend(GH.Dialog.baseExtension),GH.FormDialog=GH.FormDialog.extend(GH.Dialog.XBoardExtension)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/dialog/labels-dialog.js' */
define("jira-agile/dialog/labels-dialog",["jira/dialog/labels-dialog"],function(i){var i=i.extend(GH.Dialog.baseExtension);return i=(i=i.extend(GH.Dialog.XBoardExtension)).extend({_handleSubmitResponse:function(i,n,t){this.serverIsDone&&(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,i,n,t),this.options.autoClose&&this.hide(),this.options.onDialogFinished&&this.options.onDialogFinished.call(this,i,n,t))},decorateContent:function(){this._super();var i=this.get$popupContent();1===i.find("input[name=customFieldId]").length&&i.find("#hint").hide()}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/rapid/ui/dialog/DialogUtil.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.create=function(e){AJS.$("#"+e.id).remove(),e=_.defaults(e,{bindEscape:!0});var i=new AJS.Dialog(e),a=i.show,o=e&&e.analyticsPageName;return _.extend(i,{dispose:GH.Dialog.generateCloseHandler(i),cancel:GH.Dialog.generateCloseHandler(i,e.onCancelFn),submit:GH.Dialog.generateCloseHandler(i,e.onConfirmFn),show:function(){GH.Dialog.preShow(),GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv),GH.Notification.Handler.setCustomDivStyleHandler(function(){return""}),a.call(i),GH.Dialog.sendAnalyticsPageEvent(o);var n=AJS.$("#"+e.id).find(".dialog-button-panel .aui-button");n.is(":enabled")&&n.focus(),AJS.$("#"+e.id).addClass("ghx-dialog")},disableControls:GH.Dialog.generateDisableControlsFn(i),enableControls:GH.Dialog.generateEnableControlsFn(i),showSpinner:GH.Dialog.generateShowSpinnerFn(i),hideSpinner:GH.Dialog.generateHideSpinnerFn(i)}),GH.Dialog.bindEscapeHandler(i,!e.bindEscape),i},GH.Dialog.prepareNotificationDiv=function(){var n=AJS.$(".dialog-page-body:visible"),e=n.find(".dialog-panel-body:first-child");return 0===e.length&&(e=AJS.$("<div/>").addClass("dialog-panel-body").prependTo(n)),AJS.$("<div/>").prependTo(e)},GH.Dialog.addCancelButton=function(e){e.addCancel("Cancel",function(n){e.cancel(e)})},GH.Dialog.bindEscapeHandler=function(o,n){n?JIRA.bind("Dialog.beforeHide",function(n,e,i,a){a===o.id&&i===JIRA.Dialog.HIDE_REASON.escape&&n.preventDefault()}):AJS.$(document).bind("keyup."+o.id,function(n){27===n.keyCode&&o.cancel(o)})},GH.Dialog.generateCloseHandler=function(n,e){var i=require("jira/container-api");return function(){return n.remove(),GH.Dialog.undim(),AJS.$(document).unbind("keyup."+n.id),i.getIsIframe()||AJS.unbind("remove.dialog"),e&&e(n),GH.Notification.Handler.removeCustomHandlers(),!1}},GH.Dialog.generateDisableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").attr("disabled","disabled")}},GH.Dialog.generateEnableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").removeAttr("disabled")}},GH.Dialog.generateShowSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".button-panel-cancel-link").css("visibility","hidden").before('<span class="ghx-spinner"/>')}},GH.Dialog.generateHideSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".ghx-spinner").remove().end().find(".button-panel-cancel-link").css("visibility","visible")}},GH.Dialog.sanitizeAJSDim=function(){var n=AJS.dim;AJS.dim=function(){try{n.apply(this,arguments)}catch(n){}}},GH.Dialog.registerDialog=function(n,e,i){AJS.$(document).undelegate(n,"click").delegate(n,"click",function(n){AJS.$(this).hasClass("disabled")||(n.preventDefault(),e(n,i))})},GH.Dialog.Spinner={},GH.Dialog.Spinner.$el=AJS.$('<div class="jira-page-adg-loading-background"></div><div class="jira-page-adg-spinner">            <span class="jira-page-adg-spinner-container">                <span class="jira-page-adg-spinner-wrapper" size="48">                    <svg                        class="jira-page-adg-spinner-svg"                        focusable="false"                        height="48"                        size="48"                        viewBox="0 0 48 48"                        width="48"                        xmlns="http://www.w3.org/2000/svg"                    >                        <circle cx="24" cy="24" r="21.5"></circle>                    </svg>                </span>            </span>        </div>'),GH.Dialog.Spinner.show=function(){AJS.$(".aui-blanket").after(GH.Dialog.Spinner.$el)},GH.Dialog.Spinner.hide=function(){GH.Dialog.Spinner.$el.remove()},GH.Dialog.triggerShowEvent=function(){AJS.$(window).trigger("show.dialog")},GH.Dialog.triggerHideEvent=function(){AJS.$(window).trigger("hide.dialog")},GH.Dialog.dim=function(){AJS.dim(),GH.Dialog.Spinner.show(),GH.Dialog.triggerShowEvent()},GH.Dialog.undim=function(){AJS.undim(),AJS.$(".aui-blanket").empty(),GH.Dialog.Spinner.hide(),GH.Dialog.triggerHideEvent()},GH.Dialog.preShow=function(){AJS.$(".aui-blanket").empty(),GH.Dialog.Spinner.hide()},GH.Dialog.sendAnalyticsPageEvent=function(n){var e=require("jira/analytics/web-client");n&&"string"==typeof n&&0<n.length&&e.sendPageEvent(n)};;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:marionette', location = 'jira-view-issue-module/lib/backbone/marionette/backbone.marionette-amd.js' */
define("jira/view-issue-plugin/lib/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(e,i,n){return n(i,e)});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:soy-templates', location = 'jira-view-issue-module/viewissue/attachmentsblock.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ViewIssue&&(JIRA.Templates.ViewIssue={}),JIRA.Templates.ViewIssue.renderAttachments=function(e,t){return""+("list"==e.viewMode?JIRA.Templates.ViewIssue.fileAttachments(e):JIRA.Templates.ViewIssue.galleryAttachments(e))},JIRA.Templates.ViewIssue.fileAttachments=function(e,t){for(var a='<ol id="file_attachments" class="item-attachments" data-sort-key="'+soy.$$escapeHtml(e.sortKey)+'" data-sort-order="'+soy.$$escapeHtml(e.sortOrder)+'">',s=e.attachments,i=s.length,n=0;n<i;n++){var c=s[n];a+=JIRA.Templates.ViewIssue.fileAttachment(soy.$$augmentMap(e,{fileAttachment:c}))}return a+="</ol>"},JIRA.Templates.ViewIssue.galleryAttachments=function(e,t){for(var a='<ol id="attachment_thumbnails" class="item-attachments" data-sort-key="'+soy.$$escapeHtml(e.sortKey)+'" data-sort-order="'+soy.$$escapeHtml(e.sortOrder)+'">',s=e.attachments,i=s.length,n=0;n<i;n++){var c=s[n];a+=JIRA.Templates.ViewIssue.imageAttachment(soy.$$augmentMap(e,{imageAttachment:c}))}return a+="</ol>"},JIRA.Templates.ViewIssue.fileAttachment=function(e,t){return'<li class="attachment-content js-file-attachment'+(e.fileAttachment.latest?"":" earlier-version")+'" data-attachment-id="'+soy.$$escapeHtml(e.fileAttachment.id)+'"'+JIRA.Templates.ViewIssue.renderAttachmentData({issue:e.issue,attachment:e.fileAttachment})+">"+(e.fileAttachment.expandable?JIRA.Templates.ViewIssue.zipFileAttachment(e):'<div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+"</dl>")+"</li>"},JIRA.Templates.ViewIssue.zipFileAttachment=function(e,t){return'<div class="twixi-block collapsed expander"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>'+soy.$$escapeHtml("Hide")+'</span></span></a><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+'<dd class="zip-contents"><ol><li><div class="attachment-thumb"><img src="'+soy.$$escapeHtml(e.baseurl)+'/images/icons/wait.gif" /></div>'+soy.$$escapeHtml("Extracting archive...")+'</li></ol></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>'+soy.$$escapeHtml("Show")+'</span></span></a><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+"</dl></div></div>"},JIRA.Templates.ViewIssue.imageAttachment=function(e,t){return'<li class="attachment-content js-file-attachment" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.imageAttachment.mimeType)+":"+soy.$$escapeHtml(e.imageAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.renderAttachmentData({issue:e.issue,attachment:e.imageAttachment})+'><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'" title="'+soy.$$escapeHtml(e.imageAttachment.fileName)+" -"+(e.imageAttachment.latest?" "+soy.$$escapeHtml("Latest"):"")+" "+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+(e.imageAttachment.authorDisplayName?" - "+soy.$$escapeHtml(e.imageAttachment.authorDisplayName):"")+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.imageAttachment})+">"+(null!=e.imageAttachment.thumbnailUrl?'<jira-attachment-thumbnail url="'+soy.$$escapeHtml(""+e.imageAttachment.thumbnailUrl)+'" jira-url="'+soy.$$escapeHtml(""+e.imageAttachment.jiraThumbnailUrl)+'" filename="'+soy.$$escapeHtml(e.imageAttachment.fileName)+'"></jira-attachment-thumbnail>':JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:e.imageAttachment.mimeType}))+"</a></div><dl "+(e.imageAttachment.latest?"":'class="earlier-version"')+"><dt>"+(e.imageAttachment.deletable?'<span class="blender blender-delete"></span><div class="attachment-delete"><a title="'+soy.$$escapeHtml("Delete this attachment")+'" id="del_'+soy.$$escapeHtml(e.imageAttachment.id)+'" href="'+soy.$$escapeHtml(e.baseurl)+"/secure/DeleteAttachment!default.jspa?id="+soy.$$escapeHtml(e.issue.id)+"&deleteAttachmentId="+soy.$$escapeHtml(e.imageAttachment.id)+'&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete this attachment")+"</span></a></div>":'<span class="blender"></span>')+'<a  href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'" class="attachment-title" title="'+soy.$$escapeHtml(e.imageAttachment.fileName)+" -"+(e.imageAttachment.latest?" "+soy.$$escapeHtml("Latest"):"")+" "+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+(e.imageAttachment.authorDisplayName?" - "+soy.$$escapeHtml(e.imageAttachment.authorDisplayName):"")+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.imageAttachment})+">"+soy.$$escapeHtml(e.imageAttachment.fileName)+'</a></dt><dd class="attachment-size">'+soy.$$escapeHtml(e.imageAttachment.fileSize)+'</dd><dd class="attachment-date"><time class="livestamp" datetime="'+soy.$$escapeHtml(""+e.imageAttachment.createdIso8601)+'">'+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+"</time></dd></dl></li>"},JIRA.Templates.ViewIssue.renderAttachmentInfo=function(e,t){return'<dt class="attachment-title"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.attachment.attachmentUrl)+'" title="'+(e.attachment.latest?soy.$$escapeHtml("Latest")+" ":"")+" "+soy.$$escapeHtml(e.attachment.createdDateTime)+(e.attachment.authorDisplayName?" - "+soy.$$escapeHtml(e.attachment.authorDisplayName):"")+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.attachment.mimeType)+":"+soy.$$escapeHtml(e.attachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.attachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment(e)+">"+soy.$$escapeHtml(e.attachment.fileName)+'</a></dt><dd class="attachment-delete">'+(e.attachment.deletable?'<a title="'+soy.$$escapeHtml("Delete this attachment")+'" id="del_'+soy.$$escapeHtml(e.attachment.id)+'" href="'+soy.$$escapeHtml(e.baseurl)+"/secure/DeleteAttachment!default.jspa?id="+soy.$$escapeHtml(e.issue.id)+"&deleteAttachmentId="+soy.$$escapeHtml(e.attachment.id)+'&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete this attachment")+"</span></a>":'<span class="icon"></span>')+'</dd><dd class="attachment-date"><time class="livestamp" datetime="'+soy.$$escapeHtml(""+e.attachment.createdIso8601)+'">'+soy.$$escapeHtml(e.attachment.createdDateTime)+'</time></dd><dd class="attachment-size">'+soy.$$escapeHtml(e.attachment.fileSize)+'</dd><dd class="attachment-author">'+soy.$$escapeHtml(e.attachment.authorDisplayName?e.attachment.authorDisplayName:"")+"</dd>"},JIRA.Templates.ViewIssue.renderAttachmentData=function(e,t){return'data-issue-id="'+soy.$$escapeHtml(e.issue.id)+'"'+(e.attachment.expandable?'data-attachment-type="expandable"':null!=e.attachment.thumbnailUrl?'data-attachment-type="image"':'data-attachment-type="file"')},JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileIconUrl(e),i=""+JIRA.Templates.ViewIssue.matchFileIconAlt(e);return a+='<img src="'+soy.$$escapeHtml(s)+'" height="16" width="16" border="0" alt="'+soy.$$escapeHtml(i)+'">'},JIRA.Templates.ViewIssue.matchFileIconUrl=function(e,t){return soy.$$escapeHtml(e.baseurl)+"/images/icons/attach/"+JIRA.Templates.ViewIssue.matchFileIcon(e)},JIRA.Templates.ViewIssue.matchFileIcon=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+="pdf.gif";break;case"image/gif":a+="image.gif";break;case"image/png":a+="image.gif";break;case"image/jpeg":a+="image.gif";break;case"text/xml":a+="xml.gif";break;case"text/html":a+="html.gif";break;case"text/plain":a+="text.gif";break;case"application/zip":a+="zip.gif";break;case"application/x-gzip-compressed":a+="zip.gif";break;case"application/msword":a+="word.gif";break;case"application/msword-template":a+="word.gif";break;case"application/vnd.ms-word.document.macroEnabled.12":a+="word.gif";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+="word.gif";break;case"application/vnd.ms-word.template.macroEnabled.12":a+="word.gif";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+="word.gif";break;case"application/vnd.ms-excel":a+="excel.gif";break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+="excel.gif";break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+="excel.gif";break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+="excel.gif";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+="excel.gif";break;case"application/vnd.ms-excel.template.macroEnabled.12":a+="excel.gif";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+="excel.gif";break;case"application/vnd.ms-powerpoint":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+="powerpoint.gif";break;case"text/x-java":a+="java.gif";break;case"text/x-java-source":a+="java.gif";break;case"application/x-java-archive":a+="java.gif";break;default:a+="file.gif"}return a},JIRA.Templates.ViewIssue.matchFileIconAlt=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+=soy.$$escapeHtml("PDF File");break;case"image/gif":a+=soy.$$escapeHtml("GIF File");break;case"image/png":a+=soy.$$escapeHtml("PNG File");break;case"image/jpeg":a+=soy.$$escapeHtml("JPEG File");break;case"text/xml":a+=soy.$$escapeHtml("XML File");break;case"text/html":a+=soy.$$escapeHtml("HTML File");break;case"text/plain":a+=soy.$$escapeHtml("Text File");break;case"application/zip":a+=soy.$$escapeHtml("Zip Archive");break;case"application/x-gzip-compressed":a+=soy.$$escapeHtml("GZip Archive");break;case"application/msword":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/msword-template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-word.document.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-word.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-powerpoint":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"text/x-java":a+=soy.$$escapeHtml("Java Source File");break;case"text/x-java-source":a+=soy.$$escapeHtml("Java Source File");break;case"application/x-java-archive":a+=soy.$$escapeHtml("Java Archive File");break;default:a+=soy.$$escapeHtml("File")}return a},JIRA.Templates.ViewIssue.renderAttachmentIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileClass(e),i=""+JIRA.Templates.ViewIssue.matchFileIconAlt(e);return a+='<span class="aui-icon aui-icon-small attachment-icon '+soy.$$escapeHtml(s)+'" title="'+soy.$$escapeHtml(i)+'"></span>'},JIRA.Templates.ViewIssue.renderThumbnailIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileClass(e);return a+='<span class="aui-icon aui-icon-large attachment-thumbnail-icon '+soy.$$escapeHtml(s)+'"></span>'},JIRA.Templates.ViewIssue.matchFileClass=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+="aui-iconfont-file-pdf";break;case"image/gif":a+="aui-iconfont-image";break;case"image/png":a+="aui-iconfont-image";break;case"image/jpeg":a+="aui-iconfont-image";break;case"video/mp4":a+="aui-iconfont-file-video";break;case"text/xml":a+="aui-iconfont-file-code";break;case"text/html":a+="aui-iconfont-file-code";break;case"text/plain":a+="aui-iconfont-file-txt";break;case"application/zip":a+="aui-iconfont-file-zip";break;case"application/x-gzip-compressed":a+="aui-iconfont-file-zip";break;case"application/msword":a+="aui-iconfont-file-doc";break;case"application/msword-template":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-word.document.macroEnabled.12":a+="aui-iconfont-file-doc";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-word.template.macroEnabled.12":a+="aui-iconfont-file-doc";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-excel":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.template.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-powerpoint":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+="aui-iconfont-file-ppt";break;case"text/x-java":a+="aui-iconfont-file-code";break;case"text/x-java-source":a+="aui-iconfont-file-code";break;case"application/x-java-archive":a+="aui-iconfont-file-zip";break;default:a+="aui-iconfont-devtools-file"}return a},JIRA.Templates.ViewIssue.tagAttachment=function(e,t){return""+JIRA.Templates.ViewIssue.tagFilePreview({id:e.attachment.id,title:e.attachment.fileName,mimeType:e.attachment.mimeType,thumbnailUrl:e.attachment.thumbnailUrl})},JIRA.Templates.ViewIssue.tagFilePreview=function(e,t){var a="",s=""+(null==e.mimeType&&null!=e.thumbnailUrl?"image":null!=e.mimeType&&(""+e.mimeType).indexOf("image/")!=-1?"image":null!=e.mimeType&&(""+e.mimeType).indexOf("video/mp4")!=-1?"video":"application/pdf"==e.mimeType?"document":"unknown");return a+="unknown"!=s?' file-preview-id="'+soy.$$escapeHtml(e.id)+'" file-preview-title="'+soy.$$escapeHtml(e.title)+'" file-preview-type="'+soy.$$escapeHtml(s)+'" file-preview-mime-type="'+soy.$$escapeHtml(e.mimeType)+'"'+(null!=e.thumbnailUrl?'file-preview-url="'+soy.$$escapeHtml(""+e.thumbnailUrl)+'"':""):""};;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'jira-view-issue-module/viewissue/attachment/attachment-contents-view.js' */
define("jira/view-issue-plugin/attachment/attachment-contents-view",["jira/view-issue-plugin/lib/marionette"],function(t){"use strict";return t.ItemView.extend({template:JIRA.Templates.ViewIssue.attachmentContents,initialize:function(t){this.attachment=t.attachment,this.issueId=t.issueId,this.baseUrl=t.baseUrl},serializeData:function(){return{attachment:this.attachment,issueId:this.issueId,baseUrl:this.baseUrl}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'jira-view-issue-module/viewissue/attachment/attachment-contents-view-alias.js' */
define("jira/attachment/attachment-contents-view",["jira/view-issue-plugin/attachment/attachment-contents-view"],function(t){return t});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'jira-view-issue-module/viewissue/attachment/attachment-element.js' */
define("jira/view-issue-plugin/attachment/attachment-element",["jira/util/logger","wrm/context-path","jquery","jira/skate","jira/viewissue/slideshow/slideshow-configuration","jira/view-issue-plugin/lib/marionette","jira/attachment/attachment-contents-view"],function(t,e,n,i,a,o,r){"use strict";function c(i){var a=n(i),c=a.data("attachment-id"),s=a.data("issue-id"),u=e()+"/rest/api/2/attachment/"+c+"/expand/human",l=n.get(u);l.done(function(t){var n=new o.Region({el:a.find(".zip-contents").first()}),i=new r({attachment:t,issueId:s,baseUrl:window.location.protocol+"//"+window.location.host+e()});n.show(i)}),l.error(function(e){t.error(e)})}return i("js-file-attachment",{type:i.type.CLASSNAME,attached:function(e){n(e).find(".expander").one("expandBlock",function(){c(e)}),t.trace("jira.plugins.viewissue.expansion.wired")},events:{"click .attachment-title":function(t,e){if(1===e.which){var n=t.getThumbnailImage();n.length&&(n.click(),e.preventDefault())}}},prototype:{getThumbnailImage:function(){var t=this;return n(".gallery",t)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'jira-view-issue-module/viewissue/attachment/attachment.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ViewIssue&&(JIRA.Templates.ViewIssue={}),JIRA.Templates.ViewIssue.attachmentContents=function(e,t){for(var a='<ol class="archive-expanded">',s=e.attachment.entries,n=s,l=n.length,i=0;i<l;i++){var r=n[i];a+=JIRA.Templates.ViewIssue.attachmentArchiveEntry(soy.$$augmentMap(e,{entry:r}))}a+=(0==e.attachment.totalEntryCount?'<li><div class="aui-message aui-message-warning" style="display: inline-block"><p>'+soy.$$escapeHtml("This archive is either corrupt, empty or not an archive at all")+".</p></div></li>":"")+'</ol><span class="zip-contents-trailer">'+(s.length<e.attachment.totalEntryCount?'<span class="limit-info">'+soy.$$escapeHtml(AJS.format("Showing {0} of {1} items",s.length,e.attachment.totalEntryCount))+" </span>":"");var m=soy.$$escapeHtml(e.baseUrl)+"/secure/attachment/"+soy.$$escapeHtml(e.attachment.id)+"/";return a+='<a href="'+soy.$$escapeHtml(m)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.attachment.mediaType)+":"+soy.$$escapeHtml(e.attachment.name)+":"+soy.$$escapeHtml(m)+'">'+soy.$$escapeHtml("Download Zip")+"</a></span>"},JIRA.Templates.ViewIssue.attachmentArchiveEntry=function(e,t){var a="",s=soy.$$escapeHtml(e.baseUrl)+"/secure/attachmentzip/unzip/"+soy.$$escapeHtml(e.issueId)+"/"+soy.$$escapeHtml(e.attachment.id)+"%5B"+soy.$$escapeHtml(e.entry.index)+"%5D/",n=soy.$$filterNoAutoescape(e.entry.mediaType)+":"+soy.$$filterNoAutoescape(e.entry.path)+":"+soy.$$filterNoAutoescape(s);return a+='<li class="archive-entry" data-entry-index="'+soy.$$escapeHtml(e.entry.index)+'"><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(s)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(n)+'"'+JIRA.Templates.ViewIssue.tagFilePreview({id:e.attachment.id+"/"+e.entry.index,title:e.entry.label,mimeType:e.entry.mediaType})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:e.entry.mediaType,baseurl:e.baseUrl})+'</a></div><a class="file-path" href="'+soy.$$escapeHtml(s)+'" title="'+soy.$$escapeHtml(e.entry.path)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(n)+'"'+JIRA.Templates.ViewIssue.tagFilePreview({id:e.attachment.id+"/"+e.entry.index,title:e.entry.label,mimeType:e.entry.mediaType})+">"+soy.$$escapeHtml(e.entry.label)+'</a><span class="attachment-size">'+soy.$$escapeHtml(e.entry.size)+"</span></li>"};;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:draggableattachment', location = 'jira-view-issue-module/viewissue/initDraggableAttachment.js' */
define("jira/view-issue-plugin/init-draggable-attachment",["jquery"],function(e){e.event.props?e.event.props.push("dataTransfer"):e.event.addProp("dataTransfer"),e("[draggable=true]",".item-attachments").live("dragstart",function(a){var t=e(this),n=a.dataTransfer;n.effectAllowed="copy",n.dropEffect="copy",n.setData("DownloadURL",t.data("downloadurl")),t.find("img").length||n.setDragImage(t.closest("li").find("img:visible")[0],8,8)})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:analytics', location = 'jira-view-issue-module/viewissue/analytics.js' */
define("jira/view-issue-plugin/analytics",["jquery"],function(i){var n=i(document);n.on("click","#subtasks-bulk-operation",function(){AJS.trigger("analyticsEvent",{name:"jira.bulk.move.click.subtasks-bulk-operation"})}),n.on("click","#subtasks-open-issue-navigator",function(){AJS.trigger("analyticsEvent",{name:"jira.bulk.move.click.subtasks-open-issue-navigator"})})});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics.js' */
define("jira/analytics/analytics",["jquery","jira/ajs/dark-features","jira/analytics"],function(e,r,i){function n(){return e("li.active a.browse-tab").attr("id")}function t(){s.on("click","#project-admin-link",function(){var e=n();i.send({name:"browseproject.administerproject",properties:{selectedtab:e}})}),s.on("click","#browse-projects-create-project",function(){i.send({name:"projects.browse.createProject",properties:{}})}),s.on("click","#no-issues-create-issue",function(){i.send({name:"browseproject.issuesblankslate.createissue",properties:{}})}),s.on("click","a.issue-filter-link",function(){var r=e(this),n=r.attr("id").replace("filter_",""),t=r.attr("data-type");i.send({name:"browse"+t+".issuefilter."+n,properties:{}})}),s.on("click",".issueaction-viewworkflow",function(){var n=e(this).attr("class"),t=n.indexOf("new-workflow-designer")>-1||n.indexOf("jira-workflow-designer-link")>-1,s=t?"new":"old",a=r.isEnabled("casper.VIEW_ISSUE");i.send({name:"issue.viewworkflow",properties:{version:s,newEnabled:a}})})}var s=e(document);return{bindEvents:t}});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jira/analytics/analytics"],function(n){AJS.toInit(function(){n.bindEvents()})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:attachment-thumbnail', location = 'jira-view-issue-module/viewissue/attachment/attachment-thumbnail.js' */
define("jira/view-issue-plugin/attachment/attachment-thumbnail",["jira/analytics","jira/view-issue-plugin/attachment/image-element","jira/skate"],function(t,e,i){function r(t){var e=c.exec(t);if(null!==e)return e[1]}function n(t,e,i){var r=document.createEvent("CustomEvent");r.initCustomEvent(e,!0,!1,i),t.dispatchEvent(r)}function a(t,i){var r=e.create();return r.setAttribute("alt",i),r.setAttribute("src",t),r.className="hidden",r.addEventListener("error",function(){n(this,"load-error")}),r.addEventListener("load",function(){this.className="",n(this,"load-finished")}),r}var u=3,l=3e3,s=JIRA.Templates.ViewIssue,d="attachment.thumbnail.load.failed",o="attachment.thumbnail.load.retried",c=/\/file\/([\w-]+)\/image/;return i("jira-attachment-thumbnail",{type:i.type.TAG,created:function(t){t.retryCount=0,t.fallbacked=!1},attached:function(t){var e=t.querySelector("img");e&&t.removeChild(e),t.appendChild(a(t.getAttribute("url"),t.getAttribute("filename")))},events:{"load-error":function(t){t.fallbacked||(t.removeChild(e.find(t)),t.retryCount>=u?(t.applyFallback(),t.triggerFailedEvent()):(t.retryCount++,t.retryAttachment()))},"load-finished":function(t){t.retryCount>0&&t.retryCount<u&&t.triggerRetriedEvent()}},prototype:{applyFallback:function(){this.fallbacked=!0,this.getAttribute("jira-url")?this.appendChild(a(this.getAttribute("jira-url"),this.getAttribute("filename"))):this.innerHTML=s.renderAttachmentIcon({mimetype:"default"})},retryAttachment:function(){setTimeout(function(){this.appendChild(a(this.getAttribute("url"),this.getAttribute("filename")))}.bind(this),l)},triggerFailedEvent:function(){var e=r(this.getAttribute("url"));e&&t.send({name:d,properties:{fileId:e}})},triggerRetriedEvent:function(){var e=r(this.getAttribute("url"));e&&t.send({name:o,properties:{retries:this.retryCount,fileId:e}})}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:attachment-thumbnail', location = 'jira-view-issue-module/viewissue/attachment/image-element.js' */
define("jira/view-issue-plugin/attachment/image-element",{create:function(){return document.createElement("img")},find:function(e){return e.querySelector("img")}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:issuelink-bridge-global-init', location = 'jira-view-issue-module/viewissue/issuelink/linkedissue-modal-bridge.js' */
require(["jquery"],function(e){window.__$linkedIssueBridgePromise=e.Deferred(),define("jira/components/linkedissue/bridge",[],function(){return function(e){window.__$linkedIssueBridgePromise.resolve(e)}}),define("jira/components/linkedissue/bridge/api",["jira/components/analytics-tracker/tracker"],function(n){function i(e){n.trackEvent(o,"linkedissue-modal.load.failed",{errorMessage:e})}function r(){if(null===s){s=e.Deferred();try{window.__$linkedIssueBridgePromise.then(function(e){e.loadResource().then(function(){s.resolve(e)},function(){i("Call to linkedIssueModalApp#loadResource failed"),s.reject()})})}catch(e){var n=e&&e.stack||"An unknown error occurred when loading linkedIssueModalApp bridge";i(n),s.reject()}}return s}var o="viewissue.issuelink",s=null;return{loadResource:r}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:issuelink-init', location = 'jira-view-issue-module/viewissue/issuelink/issuelink-init.js' */
define("jira/view-issue-plugin/issuelink/issuelink-init",["jquery","underscore","jira/skate","jira/components/analytics-tracker/tracker","jira/components/linkedissue/bridge/api"],function(e,t,r,i,a){function n(r){return(t.isUndefined(r.which)||null===r.which||1===r.which||0===r.which&&e.browser.msie)&&!(r.metaKey||r.ctrlKey||r.shiftKey||r.altKey&&!e.browser.msie)}function s(){return e("#linked-issue-modal-root").attr("data-project-type")}function o(e,t){i.trackEvent(f,"linkedissue-modal.load.failed",{errorMessage:e,targetIssueId:t})}function u(e,t,r,i){var a=k();if(null!==a){try{a.show({issueId:e,issueKey:t,sourceProjectType:r,targetProjectType:i})}catch(t){var n=t&&t.stack||"Call to linkedIssueModalApp#show threw an exception";return o(n,e),!1}return!0}return o("Show called before linked issue modal available",e),!1}function l(e){return"true"===e.attr(p)}function c(t){var r=e(t.target),a=r.attr(w),o=r.attr(y),c=s(),d=r.attr("data-project-type"),k=n(t),h=l(r);if(c&&d){var p=k?"click":"click.newtab";if(i.trackEvent(f,p,{sourceProjectType:c,targetProjectType:d,targetIssueId:a,showModal:h}),h&&k){var v=u(a,o,c,d);if(v)return!1}}else i.trackEvent(f,"click.missing.project.types",{sourceProjectType:c,targetProjectType:d,targetIssueId:a})}function d(e){return e.find(h+"["+p+'="true"]').size()>0}function k(){if(null!==v)return v;if(null===j){var e=Date.now();j=a.loadResource(),j.then(function(t){v=t;var r=Date.now()-e;i.trackEvent(f,"linkedissue-modal.load",{loadTimeMillis:r})})}return v}var f="viewissue.issuelink",h="a.linked-issue",p="data-show-modal",y="data-issue-key",w="data-issue-id",v=null,j=null;return r("js-linkingmodule-container-skate-target",{type:r.type.CLASSNAME,attached:function(t){var r=e(t);r.on("click",h,c),d(r)&&k()}}),{shouldLoadLinkedIssueModal:d,showLinkedIssueModal:u,handleIssueLinkClicked:c}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:initialiser', location = 'jira-view-issue-module/viewissue/initViewIssue.js' */
require(["jira/view-issue-plugin/attachment/attachment-element","jira/view-issue-plugin/init-draggable-attachment","jira/view-issue-plugin/analytics","jira/view-issue-plugin/attachment/attachment-thumbnail","jira/view-issue-plugin/issuelink/issuelink-init"]);;
;
/* module-key = 'com.atlassian.jira.plugin.system.comment-panel:expandablecomments', location = 'js/plugin/comment/init-comments-expanding.js' */
require(["jira/util/formatter","jira/util/logger","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/ajax/smart-ajax","jquery"],function(e,t,a,n,i,s,o){o(document).on("simpleClick",".collapsed-comments",function(r){function c(){d.find(".show-more-comments").text("Loading...")}function l(){var e=d.attr("href");s.makeRequest({url:e,method:"GET",headers:{"X-PJAX":!0}}).done(m)}function m(e){var s=o(e).find(".activity-comment").slice(p,p+v);u.replaceWith(s),t.trace("jira.issue.comment.expanded"),a.trigger(n.NEW_CONTENT_ADDED,[j,i.panelRefreshed]),f.find(".activity-comment:first").removeClass("collapsed").addClass("expanded")}r.preventDefault();var d=o(this),u=d.closest(".message-container"),f=d.closest(".issuePanelContainer"),j=d.closest(".legacy-jira-fe-module"),p=u.prevAll(".activity-comment").length,v=d.find(".show-more-comments").data("collapsed-count");c(),l()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'jira-dnd-attachment-module/js/jira-amd.js' */
define("dndattachment/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'jira-dnd-attachment-module/js/aui-amd.js' */
define("dndattachment/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/i18n.js' */
define("dndattachment/i18n",function(){var t={"dnd.attachment.unsupported.browser":"Drag and Drop of attachments is currently only available for the following browsers:","dnd.attachment.file.is.too.large":"File exceeds maximum size limit set by the administrator ({0}).","dnd.attachment.upload.in.progress":"Upload in progress, please wait.","dnd.attachment.not.uploaded":function(t){return AJS.format("File \"{0}\" was not uploaded",t)},"dnd.attachment.unauthorized":"You are not authorized, session has expired or connection is lost.","dnd.attachment.internal.server.error":"An internal error has occurred. Please contact your administrator.","dnd.attachment.upload.aborted":"Upload was aborted.","dnd.attachment.upload.remove":"Remove attachment"};return function(n){if(t[n])return t[n];throw"Unknown key: "+n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/TemporaryAttachments.js' */
define("dndattachment/TemporaryAttachments",[],function(){var t={};return{createAttachment:function(t,e,n,a){return{id:t,name:e,type:n,file:a}},getAttachment:function(e,n){return t[e]||this.createAttachment(e,n)},putAttachment:function(e,n){return t[e]=this.createAttachment(e,n.name,n.type,n)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/Parser.js' */
define("dndattachment/Parser",["dndattachment/aui","jquery"],function(e,n){function r(e){var r=n(e).find(a).add(e.filter(a)),d=r.addClass(t).map(function(e,r){var t=new n.Deferred;return require([n(r).attr("duiType")],function(e){"function"==typeof e?t.resolve(new e(r)):t.reject()}),t});return n.when.apply(window,n.makeArray(d))}var t="-dui-type-parsed",a="*[duiType]:not(."+t+")";return JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n,t){r(n)}),n.isReady?r(n("body")):n(function(){r(n("body"))}),{parse:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/dropzones/IssueDropZone.js' */
define("dndattachment/dropzones/IssueDropZone",["jquery","jira/flag","dndattachment/Parser","dndattachment/aui","dndattachment/JIRA","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility"],function(e,t,n,i,s,r,a,o,d){var u=5e3,l=["An internal error has occurred. Please contact your administrator."],h=Class.extend({eventGroup:"issuedropzone",progressBarType:"dndattachment/progressbars/UploadProgressBar",init:function(t){return this.$node=e(t),this.isSupportedBrowser()?(this.$node.parents(".mod-content")&&this.$node.parents(".mod-content").addClass("issue-drop-zone"),this.uploadLimit=this.$node.data("upload-limit"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.attachFileUrl=contextPath+"/secure/AttachFile.jspa",this.pendingQueue=[],this.render(),void this.queueEvent("init")):this.renderUnsupported()},queueTask:function(t){this.pendingQueue.push(t),t.always(function(){this.pendingQueue.splice(this.pendingQueue.indexOf(t),1)}.bind(this)),this.markDirty(!0),e.when.apply(window,this.pendingQueue).always(_.debounce(this.checkMarkDirty,!1,!0).bind(this))},render:function(){this.$node.html(s.Templates.DnDAttachmentPlugin.IssueDropZone({})),this.fileInput=this.$node.find(".issue-drop-zone__file"),this.fileButton=this.$node.find("button.issue-drop-zone__button"),this.connectListeners(),s.trace("jira.issue.dnd.issuedropzone.render")},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseLinkHandler.bind(this))},browseLinkHandler:function(e){e.preventDefault(),this.fileInput.click()},connectListeners:function(){this.fileInput.change(function(e){this.handleFilesReceived(this.fileInput[0].files),this.queueEvent("fileInput",{count:this.fileInput[0].files.length}),this.fileInput.attr("value",null)}.bind(this)),this.addHandlerToBrowseLink();var t=this.$node.parents(".issue-drop-zone").length>0?this.$node.parents(".issue-drop-zone"):this.$node;this.$dropTarget=t.find(">*").andSelf(),this.$dropTarget.on("dragover dragenter drop",function(n){if(n.preventDefault(),n.stopPropagation(),t.addClass("dragover"),"drop"==n.type){t.removeClass("dragover"),e(document).trigger("dropHandled");var i=new o(n.dataTransfer);i.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}}.bind(this)),this.$dropTarget.on("dragleave",function(){t.removeClass("dragover")}.bind(this))},configureUploadProgressBar:function(e,t){e.data("upload-size",this.uploadSize).data("file",t).data("form-token",this.formToken)},createUploadProgressBar:function(t){var i=e('<div duiType="'+this.progressBarType+'" class="upload-progress-bar"></div>');return this.configureUploadProgressBar(i,t),n.parse(i).then(function(e){this.placeUploadProgressBar(i,e),this.handleNewProgressBar(e)}.bind(this))},placeUploadProgressBar:function(e){return e.insertAfter(this.$node)},handleNewProgressBar:function(e){},handleFilesReceived:function(e){this.uploadFiles(e)},uploadFiles:function(n){var r=new e.Deferred,a=[],o=s.Issues.Api.getSelectedIssueKey(),d=s.Issues.Api.getSelectedIssueId(),l=i.Meta.get("viewissue-permlink"),h=e("#summary-val input").attr("value")||e("#summary-val").text(),c=s.Templates.DnDAttachmentPlugin.SuccessMessageLink({issueLink:l,issueKey:o,issueSummary:h}),p=_.map(n,function(t){var n=new e.Deferred;return this.createUploadProgressBar(t).then(function(e){this.trigger("progressBarInserted",e),a.push(e),e.uploadFile(t,this.uploadLimit).then(n.resolve.bind(n),n.resolve.bind(n)).done(function(){this.trigger("uploadFinished",e)}.bind(this)).fail(function(){s.trace("jira.issue.dnd.upload.fail"),r.reject(arguments)})}.bind(this)),n}.bind(this)),f=e.when.apply(window,p);return f.done(function(){var e=_.filter(1==p.length?[arguments]:arguments,function(e){return e&&e[0]&&e[0].id}).map(function(e){return e[0].id});0!=e.length&&this.commitUpload(e,d).done(function(){_.delay(function(){a.some(function(e){e.getAutoDestroy()&&(e.destroy(),this.queueEvent("autoDestroy"))}.bind(this))}.bind(this),u);var e=_.filter(a,function(e){return e.result.isResolved()});if(1==e.length){var n=e[0].getFileName();t.showSuccessMsg("",i.format("{0} was attached successfully to {1}.",n,c))}else e.length>1&&t.showSuccessMsg("",i.format("{0} files were attached successfully to {1}.",e.length,c));r.resolve(_.map(e,function(e){return e.file.name}))}.bind(this)).fail(function(e,t){r.reject(e,t),e&&e.forEach(function(e){a.forEach(function(t){t.reportError(e)})}),t&&a.forEach(function(e){var n=t["#"+e.getFileID()]||t[e.getFileName()];n&&e.reportError(n)}),s.trace("jira.issue.dnd.commit.fail")})}.bind(this)),this.queueTask(f),r},loadAttachments:function(e){e.forEach(function(e){this.createUploadProgressBar(e.file).then(function(t){t.setFileID(e.id),t.setFileName(e.name),t.setFileSize(e.size),t.setProgress(1),t.setFinished(),this.trigger("uploadFinished",t)}.bind(this))},this)},commitUpload:function(t,n){return new e.Deferred},attachFile:function(t,n){var i=new e.Deferred;return s.SmartAjax.makeRequest({type:"POST",url:this.attachFileUrl,data:{inline:!0,id:n||s.Issue.getIssueId(),filetoconvert:t,atl_token:atl_token(),formToken:this.formToken},dataType:"json"}).done(i.resolve.bind(i)).fail(function(e){try{var t=JSON.parse(e.responseText);i.reject(t.errorMessages||l,t.errors)}catch(e){i.reject(l)}}),i},isSupportedBrowser:function(){if(e("html.webkit")[0]||e("html.safari")[0]){if(!(parseFloat(e.browser.version)>=537))return!1}else if(e("html.mozilla")[0]){if(!(parseFloat(e.browser.version)>=1.9))return!1}else{if(!e("html.msie")[0])return!1;if(!(parseFloat(e.browser.version)>=10))return!1}return!0},renderUnsupported:function(){this.$node.addClass("issue-drop-zone__not-supported").text(r("dnd.attachment.unsupported.browser")).append("<ul><li>FireFox 3.6+</li><li>Chrome 5+</li><li>Safari 5</li></ul>")},markDirty:function(e){this.$node.addClass(s.DirtyForm.ClassNames.SANCTIONED),this.$node.toggleClass(s.DirtyForm.ClassNames.EXEMPT,!e),this.$node.attr("value",!1),this.$node.attr("defaultValue",!0)},checkMarkDirty:function(){0==this.pendingQueue.length&&this.markDirty(!1)},queueEvent:function(e,t){i.trigger("analytics",{name:"issue.dnd.attachment."+this.eventGroup+"."+e,data:t||{}})}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-integration', location = 'jira-dnd-attachment-module/js/integration/register.js' */
define("dndattachment/integration-register",function(){function r(r){return e[r]}function t(r,t){return"function"==typeof t&&(e[r]=t,!0)}var e={attachmentMenuLink:null,attachmentsZoneCreator:null,browseLink:null,temporaryAttachmentCreatorFactory:null,attachmentCreatorFactoryForBrowseLink:null,attachmentCreatorFactoryForAttachLink:null,temporaryBinaryUploadHandler:null,connectedTemporaryBinaryUploadHandler:null};return{getAttachmentMenuHandler:function(){var t=r("attachmentCreatorFactoryForAttachLink");return t&&t("attachment-menu")},registerAttachmentMenuHandlerFactory:function(r){return t("attachmentCreatorFactoryForAttachLink",r)},getBrowseLinkHandler:function(){var t=r("attachmentCreatorFactoryForBrowseLink");return t&&t("browse-link")},registerBrowseLinkHandlerFactory:function(r){return t("attachmentCreatorFactoryForBrowseLink",r)},getAttachmentsZoneCreator:function(){return r("attachmentsZoneCreator")},registerAttachmentsZoneCreator:function(r){return t("attachmentsZoneCreator",r)},registerTemporaryAttachmentCreatorFactory:function(r){return t("temporaryAttachmentCreatorFactory",r)},getTemporaryAttachmentCreator:function(t,e,n){var a=r("temporaryAttachmentCreatorFactory");return a&&a(t,e,n)},getTemporaryAttachmentZoneCreator:function(){return r("temporaryAttachmentsZoneCreator")},registerTemporaryAttachmentZoneCreator:function(r){return t("temporaryAttachmentsZoneCreator",r)},getTemporaryBinaryUploadHandler:function(){return r("temporaryBinaryUploadHandler")},registerTemporaryBinaryUploadHandler:function(r){return t("temporaryBinaryUploadHandler",r)},getConnectedTemporaryBinaryUploadHandler:function(){return r("connectedTemporaryBinaryUploadHandler")},registerConnectedTemporaryBinaryUploadHandler:function(r){return t("connectedTemporaryBinaryUploadHandler",r)},unregisterAllHandlers:function(){for(var r in e)e[r]=null}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/AttachmentsDropZone.js' */
define("dndattachment/dropzones/AttachmentsDropZone",["dndattachment/dropzones/IssueDropZone","jira/util/events","dndattachment/util/events/types","jquery","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/dialog/dialog","dndattachment/integration-register","dndattachment/upload/handler","jira/featureflags/feature-manager"],function(e,t,n,o,r,i,a,s,d,h){var c=function(){var e=parseUri(window.location);return e.protocol+"://"+e.authority}(),l=e.extend({eventGroup:"attachmentsdropzone",progressBarType:"dndattachment/progressbars/AttachmentsUploadProgressBar",init:function(){this._super.apply(this,arguments),this.attachFileUrl=contextPath+"/rest/jddap/1.0/attachment",t.bind(JIRA.Events.PANEL_REFRESHED,this.panelRefreshed.bind(this)),this.connectContainer()},connectContainer:function(){this.$containerNode=this.getContainerNode(),this.$dragoverDropzone=o(JIRA.Templates.DnDAttachmentPlugin.dropzone()),this.$dragoverBorder=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-border"),this.$dragoverInfo=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-info"),this.$dragoverDropzone.appendTo(this.$containerNode),this._connectDropzone(),this.$windowMask=o(JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask()),this.$body=o(document.body);var e=this.$body;window.__SPA__&&(e=o("#attachment-dropzone-mask-container"),e.length||(e=this.$body)),e.append(this.$windowMask),this.$body.on("dragenter",_.throttle(this.onBodyDragEnter.bind(this),200,{trailing:!1})),this.$body.on("dragleave",this.onBodyDragLeave.bind(this)),this.$windowMask.on("dragover dragenter",this.onWindowMaskDragEnter.bind(this)),this.$windowMask.on("dragleave",this.onWindowMaskDragLeave.bind(this)),this.$windowMask.on("drop",this.onWindowMaskDrop.bind(this)),this.$auiSidebar=o(".aui-sidebar-body"),this._disconnectListenersFromParentDropzone(),this.onContentAddedHandler=this.onContentAdded.bind(this),t.bind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),this.externalHandler=s.getBrowseLinkHandler()},_connectDropzone:function(){var e=s.getAttachmentsZoneCreator();this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.$containerNode.on("dragover dragenter drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),"function"==typeof e&&(this.externalZone=e(this.$containerNode[0]))},_disconnectListenersFromParentDropzone:function(){this.$dropTarget.off("dragover drop dragleave dragenter"),o(document).off("dragover dragenter")},disconnectContainer:function(){this.$dragoverDropzone.remove(),this.$windowMask.remove(),this.$body.removeClass("attachments-drop-zone__dragover"),this.$body.off("dragenter",this.onBodyDragEnter.bind(this)),this.$containerNode.off("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.externalZone&&this.externalZone.deactivate(),t.unbind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),d.disconnectCurrentDropZone(this)},isAttached:function(){return o.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},getContainerNode:function(){var e=o(o(".issue-container")[0]);return"static"===e.css("position")&&e.css("position","relative"),e},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},canDoFullPageDrop:function(){return a.current?(JIRA.trace("jira.issue.dnd.dropnotallowed"),!1):(JIRA.trace("jira.issue.dnd.dropallowed"),!0)},onDragOverDrop:function(e){if(!this.isAttached())return void this.disconnectContainer();if(i.dragEventContainsFiles(e)&&this.canDoFullPageDrop()&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),JIRA.trace("jira.issue.dnd.dragover"),this.$body.addClass("attachments-drop-zone__dragover"),this.$body.addClass("attachments-drop-zone__window-dragover"),this.$containerNode.addClass("attachments-drop-zone__dragover-fade"),this._readjustDropzone(),this._repositionStickyInfoBox(),"dragenter"===e.type&&this.externalZone&&(d.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"==e.type))if(this.removeAllDragoverClasses(this.$containerNode),o(document).trigger("dropHandled"),this.externalZone&&d.isDefaultExecutor({}))this.externalZone.drop();else{var t=new r(e.dataTransfer);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}},onDragLeave:function(){this.removeAllDragoverClasses(this.$containerNode)},browseFilesAndUpload:function(e,t){return"function"==typeof this.externalHandler&&d.isDefaultExecutor({})?this.externalHandler.call(null,e,t||{}):this.browseLinkHandler.call(this,e),!0},_readjustDropzone:function(){if(0!==this.$auiSidebar.length){var e=this.$auiSidebar.offset().left+this.$auiSidebar.width();if(this.$dragoverBorder.parent().offset()){var t=this.$dragoverBorder.parent().offset().left;e>t?this.$dragoverBorder.css({left:e-t}):this.$dragoverBorder.css({left:0})}else this.$dragoverBorder.css({left:0})}},_repositionStickyInfoBox:function(){if(window.__SPA__){var e=this.$containerNode.scrollParent().scrollTop()+10;return void this.$dragoverInfo.css({top:e})}var t,e=this.$containerNode.scrollParent().scrollTop()+10,n=this.$containerNode.offset().top;t=this.$containerNode.scrollParent().offset()?this.$containerNode.scrollParent().offset().top:0;var o;o=0===t?e>=n?e-n:10:e,this.$dragoverInfo.css({top:o})},onBodyDragEnter:function(e){i.dragEventContainsFiles(e)&&(this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"))},onBodyDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDragEnter:function(e){i.dragEventContainsFiles(e)&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none"),this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"),this.canDoFullPageDrop()&&(this.$body.addClass("attachments-drop-zone__dragover"),this._repositionStickyInfoBox()))},onWindowMaskDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDrop:function(e){e.preventDefault(),this.removeAllDragoverClasses()},removeAllDragoverClasses:function(e){e&&e.removeClass("attachments-drop-zone__dragover-fade"),this.$body.removeClass("attachments-drop-zone__window-dragover"),this.$body.removeClass("attachments-drop-zone__dragover")},handleFilesReceived:function(e){var r=o("textarea.wiki-textfield:visible:focus"),i=r.length>0;t.trigger(n.ATTACHMENT_FOR_PAGE_RECEIVED,{files:e,isWikiTextfieldFocused:i,wikiTextfield:r[0]})},render:function(){return this.$node.parents("#attachmentmodule").addClass("attachments-drop-zone-parent"),this.$listNode=this.$node.siblings("#file_attachments, #attachment_thumbnails"),this._super.apply(this,arguments)},panelRefreshed:function(e,t,n,r){if(r.find(this.$node).is("*")){this.getViewMode();n=n.find(">.mod-content"),n.addClass("issue-drop-zone"),this.$node.prependTo(n),this.render();var i=r.find(".attachments-upload-progress-bar");i.data("viewMode",this.getViewMode()).each(function(e,t){var n=o(t).prop("_instance");void 0!=n&&n.render()}),i.each(function(e,t){this.insertProgressBar(o(t))}.bind(this)),this._disconnectListenersFromParentDropzone()}},getViewMode:function(){return"file_attachments"==this.$listNode.attr("id")?"list":"gallery"},getSortBy:function(){return this.$listNode.data("sort-key")},getSortOrder:function(){return this.$listNode.data("sort-order")},getSortComparator:function(){var e="asc"==this.getSortOrder()?1:-1,t="fileName"==this.getSortBy()?function(e){return e.find(".attachment-title").text()}:function(e){return new Date(e.find("*[datetime]").attr("datetime")).getTime()},n="fileName"==this.getSortBy()&&String.prototype.localeCompare?function(e,t){return e.localeCompare(t)}:function(e,t){return e<t?-1:e>t?1:0};return function(o,r){var i=t(o),a=t(r);return e*n(i,a)}},commitUpload:function(e,t){var n=new o.Deferred;return this.attachFile(e,t).then(n.resolve.bind(n),n.reject.bind(n)),n.then(function(n){var r=o(JIRA.Templates.ViewIssue.renderAttachments({baseurl:contextPath,fullBaseUrl:c+contextPath,issue:{id:t},attachments:n,viewMode:this.getViewMode()})).find(".attachment-content");n.forEach(function(t,n){var o=r[n],i=this.$listNode.find('>*[data-file-id="'+e[n]+'"]');i.replaceWith(o)},this),JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[this.$listNode,JIRA.CONTENT_ADDED_REASON.panelRefreshed]),JIRA.trace("jira.issue.dnd.attached")}.bind(this)),this.queueTask(n),this.queueEvent("commitUpload",{count:e.length}),n},configureUploadProgressBar:function(e){this._super.apply(this,arguments),e.data("viewMode",this.getViewMode())},placeUploadProgressBar:function(e,t){return t.$node.find("time.livestamp").attr("datetime",(new Date).toISOString()).livestamp(),this.insertProgressBar(e),t.bind("onDestroy",function(){var t=e.parents(".item-attachments");0==t.find(".attachments-upload-progress-bar, .attachment-content").length&&t.remove()}),e},insertProgressBar:function(e){var t=this.getSortComparator(),n=this.$listNode.children().toArray(),r=function(n){if(t(e,o(n))<1)return e.insertBefore(n),!0};n.some(r)||e.appendTo(this.$listNode)}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/UploadProgressBar.js' */
define("dndattachment/progressbars/UploadProgressBar",["jquery","dndattachment/Parser","dndattachment/JIRA","dndattachment/aui","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,i,s,n,o,r,a){function d(t,e){s.trigger("analytics",{name:"issue.dnd.attachment.uploadprogress."+t,data:e||{}})}var h=["aui-iconfont-error","aui-iconfont-success","aui-iconfont-close-dialog"],u=r.getWRM("thumbnail-mime-types").split(","),l=Class.extend({autoDestroy:!0,init:function(e){this.result=new t.Deferred,this.$node=t(e),this.file=this.$node.data("file"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.$node.prop("_instance",this),this.render()},render:function(){this.$node.html(i.Templates.DnDAttachmentPlugin.UploadProgressBar({isImageType:this.isImageType()})),this.afterRender()},afterRender:function(){this.file&&(this.setFileName(this.file.name),this.setFileSize(this.file.size),this.loadThumbnail(this.file)),this.progress&&this.updateProgress(),this.connectListeners()},connectListeners:function(){this.getControlNode().on("click",function(){this.destroy(),d("buttonClick")}.bind(this))},destroy:function(){this.destroyed||(this.upload&&this.upload.abort(),this.setAutoDestroy(!1),this.trigger("onBeforeDestroy"),this.destroyed=!0,this.$node.animate({opacity:0},{duration:250,complete:function(){this.$node.slideUp(250,function(){this.objectURL&&window.URL.revokeObjectURL(this.objectURL),this.$node.remove(),i.trace("jira.issue.dnd.progressbar.removed"),this.trigger("onDestroy")}.bind(this))}.bind(this)}))},isDestroyed:function(){return!!this.destroyed},setAutoDestroy:function(t){this.autoDestroy=t},getAutoDestroy:function(){return this.autoDestroy},getUploadParams:function(t){var e={filename:t.name,size:t.size,atl_token:atl_token(),formToken:this.formToken};return _.extend(e,this.getEntityParams()),e},getEntityParams:function(){var t={},e=i.Issue.getIssueId(),s=this.$node.parents("form").find('*[name="pid"]').attr("value");return s?t.projectId=s:e&&(t.issueId=e),t},setFile:function(t){this.file=t},setFileID:function(t){this.fileID=t,this.$node.attr("data-file-id",t)},getFileID:function(){return this.fileID},setFileName:function(t){this.$node.find(".upload-progress-bar__file-name").text(t)},getFileName:function(){return this.$node.find(".upload-progress-bar__file-name").text()},setFileSize:function(t){t>=0&&this.$node.find(".upload-progress-bar__file-size").html(a.format(t))},uploadFile:function(t,e){this.setFile(t);var r=this.result;if(this.monitorUpload(r),r.fail(this.reportError.bind(this)),t.size>e)return r.reject(n("dnd.attachment.file.is.too.large").replace("{0}",this.uploadSize),!0),r;for(var a=["\\","/",'"',":","?","*","<","|",">"],d=0;d<a.length;d++){var h=a[d];if(_.contains(t.name,h))return r.reject(s.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",t.name,h),!0),r}return this.upload=new s.InlineAttach.AjaxUpload({file:t,params:this.getUploadParams(t),url:s.InlineAttach.AjaxPresenter.DEFAULT_URL,progress:function(e){r.notify(e/t.size)},success:function(e,i){void 0!==e.id&&void 0!==e.name?(r.notify(1),r.resolve(e,i,t)):r.reject(e,i,t)},error:function(t,e){r.reject(n("dnd.attachment.internal.server.error"),e)},abort:function(){r.reject(n("dnd.attachment.upload.aborted"),"abort")}}),this.checkSession().then(function(){this.upload.upload()}.bind(this)).fail(function(){r.reject(n("dnd.attachment.unauthorized"),401)}),this.$node.find(".upload-progress-bar__control>*").on("click",function(){this.upload.abort(),r.reject()}.bind(this)),r.done(function(e){o.putAttachment(e.id,t),this.setFileID(e.id),i.trace("jira.issue.dnd.uploaded")}.bind(this)),r},monitorUpload:function(t){t.progress(this.setProgress.bind(this)),t.done(this.setFinished.bind(this)),t.fail(this.setFailed.bind(this))},setProgress:function(t){this.progress=t,this.updateProgress()},updateProgress:function(){var t=this.$node.find(".upload-progress-bar__progress-bar");t.toggleClass("UploadProgressBar_progressUnknown",this.progress===!1),this.progress>=0&&t.find(".upload-progress-bar__bar").css("width",100*this.progress+"%")},setFinished:function(){this.$node.addClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__control button .aui-icon").addClass("aui-iconfont-success").removeClass("aui-iconfont-close-dialog"),this.finished=!0,this.trigger("onFinished")},setFailed:function(){this.$node.addClass("UploadProgressBar_uploadFailed"),this.finished=!0,this.failed=!0,this.trigger("onFailed")},isFinished:function(){return!!this.finished},isFailed:function(){return!!this.failed},isSuccessful:function(){return this.isFinished()&&!this.isFailed()},isImageType:function(){return this.file&&this.file.type&&_.contains(u,this.file.type)},getThumbnailSrc:function(t){return this.isImageType()&&(this.objectURL=window.URL.createObjectURL(t)),this.objectURL||i.Templates.ViewIssue.matchFileIconUrl({baseurl:s.contextPath(),mimetype:t.type})},getThumbnailNode:function(){return this.$node.find(".upload-progress-bar__thumbnail")},getControlNode:function(){return this.$node.find(".upload-progress-bar__control button")},loadThumbnail:function(e){var i=this.getThumbnailSrc(e),s=this.getThumbnailNode();s.addClass(this.objectURL?"upload-progress-bar__thumbnail_image":"upload-progress-bar__thumbnail_icon");var n=t("<img/>").attr("src",i);return n.appendTo(s)},reportError:function(t,e){"object"==typeof t&&t.errorMessage&&(t=t.errorMessage),this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__bar").css("width","100%"),this.showErrorMessage(t,e),this.setAutoDestroy(!1),d("error",{message:t})},showErrorMessage:function(t){this.$node.find(".upload-progress-bar__error-message").text(t)},setIcon:function(t){var e=this.$node.find(".upload-progress-bar__control button .aui-icon");if(!h.some(function(i){return e.toggleClass(i,i==t),i==t}))throw"Unknown icon"},checkSession:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/auth/1/session",contentType:"application/json"}).done(function(){e.resolve()}).fail(function(){this.checkPermissions().done(function(t){e.resolve()}).fail(function(){e.reject()})}.bind(this)),e},checkPermissions:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/api/2/mypermissions",contentType:"application/json",data:t.extend({},this.getEntityParams(),{permissions:"CREATE_ATTACHMENTS"})}).done(function(t){t.permissions.CREATE_ATTACHMENTS.havePermission?e.resolve():e.reject()}).fail(function(){e.reject()}),e}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/AttachmentsUploadProgressBar.js' */
define("dndattachment/progressbars/AttachmentsUploadProgressBar",["dndattachment/progressbars/UploadProgressBar","jira/flag","jquery","dndattachment/i18n"],function(e,t,a,n){return e.extend({render:function(){this.$node.html(JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar({isImageType:this.isImageType()})).removeClass("upload-progress-bar").addClass("attachments-upload-progress-bar"),this.$node.toggleClass("attachment-content",!this.isImageType()),this.afterRender()},loadThumbnail:function(t){return"gallery"==this.$node.data("viewMode")?e.prototype.isImageType.call(this)?this._super.apply(this,arguments):a(JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:t.type})).appendTo(this.getThumbnailNode()):a(JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:t.type})).appendTo(this.getThumbnailNode())},showErrorMessage:function(e,s){if("abort"!=s){var o=t.showErrorMsg(n("dnd.attachment.not.uploaded")(this.getFileName()),AJS.escapeHTML(e));a(o).on("aui-flag-close",function(){this.destroy()}.bind(this)),this.bind("onDestroy",function(){o.close()})}},isImageType:function(){return"gallery"==this.$node.data("viewMode")},getControlNode:function(){return this.$node.find(".upload-progress-bar__upload-control span")},getAutoDestroy:function(){return!1}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/IssueDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.IssueDropZone=function(e,t){return'<div class="issue-drop-zone__target"></div><span class="issue-drop-zone__text"><span class="issue-drop-zone__drop-icon"> </span> '+soy.$$escapeHtml("Drop files to attach, or")+' <button type="button" class="issue-drop-zone__button"> '+soy.$$escapeHtml("browse")+'.</button><input class="issue-drop-zone__file ignore-inline-attach" type="file" multiple /></span>'},JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/AttachmentsDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/AttachmentsDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.dropzoneMask=function(n,e){return'<span><div class="attachments-drop-zone__dragover-mask"></div></span>'},JIRA.Templates.DnDAttachmentPlugin.dropzone=function(n,e){return'<span><div class="attachments-drop-zone__dragover-border"><div class="attachments-drop-zone__dragover-info"><p>'+soy.$$escapeHtml("Drop files to attach them to the issue")+"</p></div></div></span>"},JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask=function(n,e){return'<span><div class="attachments-drop-zone__window-dragover-mask"></div></span>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/UploadProgressBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar=function(a,s){return'<div class="upload-progress-bar__thumbnail"> </div><span class="upload-progress-bar__file-name"> </span><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Cancel upload")+'</span></button></div><div class="upload-progress-bar__error-message"></div>'},JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar=function(a,s){return""+(a.isImageType?'<div class="upload-progress-bar__thumbnail"><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><dl><dt><span class="upload-progress-bar__file-name"> </span></dt><dd class="upload-progress-bar__file-size"> </dd><dd class="upload-progress-bar__upload-control"><span>'+soy.$$escapeHtml("Cancel")+'</span></dd><dd class="upload-progress-bar__error-message"></dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>':'<div class="attachment-thumb upload-progress-bar__thumbnail"></div><dl><dt class="attachment-title upload-progress-bar__file-name"></dt><dd class="upload-progress-bar__upload-control"><span>'+soy.$$escapeHtml("Cancel")+'</span></dd><dd class="attachment-size"><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></dd><dd class="attachment-author"> </dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>')},JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar=function(a,s){return'<div class="temp-upload-progress-bar__parent-container temp-upload-progress-bar__uploading"><div class="temp-upload-progress-bar__container"><div class="upload-progress-bar__thumbnail"></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__error"><div class="upload-progress-bar__error-indicator"><span class="aui-icon aui-icon-large aui-iconfont-error">'+soy.$$escapeHtml("Upload error")+'</span></div><div class="upload-progress-bar__error-text">'+soy.$$escapeHtml("Upload failed")+'</div></div><div class="upload-progress-bar__upload-mask"></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog"><div class="button-text" aria-label="'+soy.$$escapeHtml("Cancel upload")+' "></div><div class="file-name"></div><div class="error-message"></div></span></button></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><div class="upload-progress-bar_file-name-container"><span class="upload-progress-bar__file-name"></span></div></div>'},JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink=function(a,s){return'<a href="'+soy.$$escapeHtml(a.issueLink)+'">'+soy.$$escapeHtml(a.issueKey)+" - "+soy.$$escapeHtml(a.issueSummary)+"</a>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(t){"use strict";var n=function(t){return t.split(/\//).pop()};t.basename=n,t.dirname=function(t){var e=n(t);return t.substring(0,t.length-e.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/templates/soy/attach-screenshot-form.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Html5Screenshot&&(JIRA.Templates.Html5Screenshot={}),JIRA.Templates.Html5Screenshot.attachScreenshotForm=function(e,t){return'<h2 class="dialog-title">'+soy.$$escapeHtml("Attach Screenshot")+'</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.id)+'"/><input type="hidden" name="projectId" value="'+soy.$$escapeHtml(e.projectId)+'"/><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>'+soy.$$escapeHtml("Take a screenshot:")+"</dt>"+("pc"==e.userPlatform?"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003ePrtScn\u003c/kbd\u003e")+"</dd>":"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003e&#8963; Ctrl\u003c/kbd\u003e + \u003ckbd\u003e&#8984; Cmd\u003c/kbd\u003e + \u003ckbd\u003e&#8679; Shift\u003c/kbd\u003e + \u003ckbd\u003e3\u003c/kbd\u003e")+"</dd>")+"</dl></li><li><dl><dt>"+soy.$$escapeHtml("Paste the image:")+"</dt>"+("pc"==e.userPlatform?"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003eCtrl\u003c/kbd\u003e + \u003ckbd\u003ev\u003c/kbd\u003e")+"</dd>":"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003e&#8984; Cmd\u003c/kbd\u003e + \u003ckbd\u003ev\u003c/kbd\u003e")+"</dd>")+'</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">'+soy.$$escapeHtml("Your image will be pasted here")+"</dt></dl></li></ul></div></div></div></div><div id='attach-max-size' class=\"hidden\">"+soy.$$escapeHtml(e.maxSize)+"</div></div></div></div><fieldset><div><legend><span>"+soy.$$escapeHtml("Attach Screenshot")+'</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">'+soy.$$escapeHtml("File name")+' <span class="aui-icon icon-required">'+soy.$$escapeHtml("Required")+'</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="'+soy.$$escapeHtml(e.nextScreenshotName)+'"><div class="description">'+soy.$$escapeHtml("A file name to be used as attached image name")+'</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">'+soy.$$escapeHtml("Upload")+'</button><a href="#" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["jquery","underscore","dndattachment/integration-register","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/utility","jira/dialog/dialog","jira/dialog/dialog-register","jira/ajs/ajax/smart-ajax","jira/attachment/inline-attach","dndattachment/ctrlv/tracking","exports"],function(e,t,n,i,r,a,o,s,l,c,d){"use strict";d.getFileFromEvent=function(n){var i=new e.Deferred;return r.isImagePasteEvent(n)?i.resolve(t(n.clipboardData.items).filter(function(e){return e.type.indexOf("image")!==-1}).map(function(e){return e.getAsFile()})[0]||t(n.clipboardData.files).filter(function(e){return e.type.indexOf("image")!==-1})[0]):i.reject(),i.promise()},d.REQUEST_TIMEOUT_MILLIS=3e5,d.screenshotFileUpload={},d.screenshotFileUploadUri=null,d.$document=void 0,d.$window=void 0,d.$container=void 0,d.$fakeInput=void 0,d.uploadError=!1,d.uploadErrorMsg="",d.progressView={hidden:!1,progress:0,old:0,progressBarContainer:void 0,progressEl:void 0,container:void 0,options:void 0,staticProgress:void 0,initProgress:function(){this.container=this.buildContainer(),this.progressEl=this.buildProgress(),this.container.append(this.progressEl),this.options={showPercentage:!1,height:"5px"},this.progressBarContainer=e("#attach-screenshot-progress-container"),this.progressBarContainer.empty(),this.progressBarContainer.append(this.container),this.staticProgress=this.container,this.hidden=!0},finish:function(){this.value(100)},progressHandler:function(e){var t=Math.round(100*e.loaded/e.total);this.value(t)},value:function(e){e>100?e=100:e<0&&(e=0),this.hidden&&(this.progressEl.show(),this.hidden=!1),this.old!==e&&(this.progressEl.progressBar(e,this.options),e>=100&&this.progressEl.fadeOut(),this.old=e)},buildContainer:function(){return e("<div>").addClass("file-progress")},buildProgress:function(){return e("<div>").attr("id","attach-screenshot-upload-progress")}},d.dialogView={pasteCatcher:{},presenter:void 0,getMaxSize:function(){return e("#attach-max-size").text()},getFileSize:function(){return e.isPlainObject(this.presenter.screenshotFileUpload)&&t.isEmpty(this.presenter.screenshotFileUpload)?0:this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){e("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){e("#error-attach-screenshot-filename").remove()},displayErrors:function(e){"compatibility"in e&&r.showErrorMsg("",e.compatibility),"fileName"in e&&r.showErrorMsg("",e.fileName),"fileUpload"in e&&r.showErrorMsg("",e.fileUpload)},appendBlobImage:function(e){var t=window.URL||window.webkitURL,n=t.createObjectURL(e);this.presenter.screenshotFileUpload=e,this.createImage(n)},createImage:function(n){var i=new Image;i.onload=function(){},i.src=n,this.presenter.screenshotToUpload=i;var r=e(i);r.addClass("attach-screenshot-pasted-image");var a=e("#attach-screenshot-image-container");a.empty(),a.append(r),this.presenter.$fakeInput.focus(),t.defer(function(){d.imageCreatedHandler()})},checkInput:function(){var e,t=d.dialogView.pasteCatcher.childNodes[0];return t&&("IMG"===t.tagName&&0===t.src.indexOf("data:")&&(e=t.src),d.dialogView.pasteCatcher.innerHTML=""),e||d.$fakeInput.focus(),e},onPaste:function(e){d.dialogView.cleanFileErrors(),d.dialogView.cleanGeneralErrors(),r.isImagePasteEvent(e)?d.getFileFromEvent(e).then(function(e){this.appendBlobImage(e)}.bind(this)):setTimeout(function(){var e=this.checkInput();e&&(d.screenshotFileUpload=i.decodeBase64DataUri(e),d.dialogView.createImage(e))}.bind(this),0)},getFakeInput:function(){return e("#attach-screenshot-fake-input")},getContainer:function(){return e("#attach-screenshot-image-container")},getIssueKey:function(){return e("input[name='id']").val()},getProjectId:function(){return e("input[name='projectId']").val()},getDocument:function(){return e(document)},getWindow:function(){return e(window)},getFileNameInput:function(){return e("#attachscreenshotname")},hasPngExtension:function(e){var t=/\.png$/i;return t.test(e)},setFileToConvert:function(t){e("input[name='filetoconvert']").val(t)},buildPasteCatcher:function(){if(document.getElementById("attach-screenshot-form")){var e=document.createElement("div");return e.setAttribute("contenteditable","true"),e.style.width=0,e.style.height=0,e.style.position="absolute",e.style.top="-5000px",document.getElementById("attach-screenshot-form").appendChild(e),e}},_getFormSubmits:function(){return e("#attach-screenshot-form").find("button.aui-button")},disable:function(){return this._getFormSubmits().attr("disabled","disabled"),this},enable:function(){return this._getFormSubmits().removeAttr("disabled"),this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return e("#attach-screenshot-form").length>0},initDialog:function(e){this.pasteCatcher={},this.presenter=e,this.pasteCatcher=this.buildPasteCatcher()}},d.initScreenshotPasteHandler=function(){var e=d.dialogView;d.screenshotFileUpload={},d.resetUploadErrors(),d.dialogView.initDialog(d),d.$document=e.getDocument(),d.$window=e.getWindow(),d.$container=e.getContainer(),d.$fakeInput=e.getFakeInput(),d.bindOnce(d.$container,"click",d.setFocusOnClickHandler),d.bindOnce(d.$fakeInput,"focus",d.showFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"blur",d.hideFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"keydown",d.keyDownHandler),r.browserIsSupported()?d.bindOnce(d.$window,"paste",d.pasteHandler):e.displayErrors({compatibility:AJS.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})},d.resetUploadErrors=function(){d.uploadError=!1,d.uploadErrorMsg=void 0},d.setUploadError=function(e){d.uploadError=!0,d.uploadErrorMsg=e},d.bindOnce=function(e,t,n){e.unbind(t,n),e.bind(t,n)},d.showFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.hideFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.setFocusOnClickHandler=function(){d.$fakeInput.focus()},d.pasteHandler=function(e){d.dialogView.isEnabled()&&(e=r.normalizePasteEvent(e),d.dialogView.onPaste(e))},d.polyPasteHandler=function(e,t,n){d.dialogView.isEnabled()&&(d.screenshotFileUpload={length:-1},d.screenshotFileUploadUri=t,d.dialogView.createImage(n))},d.keyDownHandler=function(e){r.isKeyPasteEvent(e)&&d.dialogView.pasteCatcher.focus&&d.dialogView.pasteCatcher.focus()},d.imageCreatedHandler=function(){d.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())},d.getMimeType=function(){return"image/png"},d.createData=function(){return d.screenshotFileUpload},d.clipboardDataIsEmpty=function(e){return null==window.clipboardData&&!(e&&e.clipboardData&&e.clipboardData.types&&e.clipboardData.types.length>0)},d.validateFileSize=function(e,t,n){var t=t||d.dialogView.getFileSize(),n=n||d.dialogView.getMaxSize();if(t>n){var i=l.Text.fileSize(n,t);e.fileUpload=AJS.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",i[1],i[0])}},d.validateFormData=function(n,i){var a={};return e.isPlainObject(n)&&t.isEmpty(n)&&(a.fileUpload="Please paste the image you wish to upload"),d.validateFileSize(a),d.uploadError&&(a.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."),""==i&&(a.fileName="You must specify a filename of the image."),r.isValidFileName(i)||(a.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"),a},d.doAjaxUpload=function(i,r){d.dialogView.disable();var a={};if(d.validateFileSize(a),!t.isEmpty(a))return d.dialogView.displayErrors(a),void d.dialogView.enable();var o=d.createData(),l=d.getMimeType(),c=e("#attach-screenshot-form").find("input[name='formToken']").attr("value"),u=encodeURIComponent(this.dialogView.getProjectId()),p=AJS.contextPath()+"/rest/internal/2/AttachTemporaryFile?size="+d.dialogView.getFileSize()+"&filename="+encodeURIComponent(r)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(c?"&formToken="+encodeURIComponent(c):"");d.resetUploadErrors();var h=n.getTemporaryBinaryUploadHandler(),g=h?h(u,o,r,encodeURIComponent(c)):d.executeAjaxUpload(o,p,l);g.progress(function(e){"init"==e&&d.progressView.initProgress()}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),d.dialogView.setFileToConvert(e.id)}).fail(function(e,t,n,i){var r;if("abort"===i.statusText)r="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation.";else if(i.hasData){var a=JSON.parse(i.data);r=a.errorMessage?a.errorMessage:s.buildSimpleErrorContent(i,{alert:!1})}d.setUploadError(r),d.dialogView.displayErrors({fileUpload:r})}).always(function(){var t=e.Deferred();t.resolve(),t.then(function(){d.dialogView.enable(),d.progressView.finish()})}).progress(function(e){"init"!=e&&d.progressView.progressHandler(e)})},d.executeAjaxUpload=function(t,n,i){c.trigger("attach.screenshot.html5.jira.upload");var r=e.Deferred(),a=s.makeRequest({type:"POST",url:n,contentType:i,processData:!1,data:t,timeout:d.REQUEST_TIMEOUT_MILLIS,success:r.resolve.bind(r),error:r.reject.bind(r),xhr:function(){var t=e.ajaxSettings.xhr();return r.notify("init"),t.upload.addEventListener("progress",r.notify.bind(r)),t}});return r.always(function(){e.ajaxSettings.xhr().removeEventListener("progress",d.progressView.progressHandler),e(o.attachScreenshotDialog).off("Dialog.hide",a.abort)}),e(o.attachScreenshotDialog).one("Dialog.hide",a.abort),r.promise()},d.show=function(){var n=new e.Deferred,i=e(".issueaction-attach-screenshot-html5");return null!=a.current?n.reject().promise():0==i.length?n.reject().promise():(t.defer(function(){i.trigger("click")}),e(document).on("dialogContentReady",function(e,t){t===o.attachScreenshotDialog&&d.dialogView.isEnabled()?n.resolve(t):n.reject()}),e(document).on("ajaxComplete.jira.screenshot.dialog",function(e,t,r){r.url.indexOf(i.attr("href"))>-1&&setTimeout(function(){n.isResolved()||n.reject()},1e3)}),n.always(function(){e(document).off("ajaxComplete.jira.screenshot.dialog")}),n.promise())}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["jquery","dndattachment/ctrlv/trace","dndattachment/ctrlv/tracking","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/base64decode","jira/dialog/dialog","jira/util/events","dndattachment/util/events/types","exports"],function(t,e,n,a,i,r,o,u,c,s){"use strict";function l(t,e){e.stateName=t;var n=function(){var n=e.apply(null,arguments);return n.stateName=t,n};return n.stateName=t,n}function d(t,e,n){return l(t,function(){var a=setTimeout(function(){f(_)},n),i=e.apply(null,arguments),r=function(t,e){var n=i(t,e);if(n)return clearTimeout(a),n};return r.stateName=t,r})}function f(t,e){if(f.eventQueue)return void f.eventQueue.push({type:t,object:e});for(f.eventQueue=[{type:t,object:e}];f.eventQueue.length>0;){var n=f.eventQueue.splice(0,1)[0],a=A(n.type,n.object);a&&(A=a)}delete f.eventQueue}var g=0,E=1,v=2,m=3,p=4,h=5,I=6,T=7,w=8,_=9,N=l("idle",function(){function i(e){if(!t(e.target).is(":input:not(.wiki-textfield, #summary)")&&!a.isContentEditable(e.target))return!0}return function(r,o){if(r==g&&a.isKeyPasteEvent(o)){if(a.browserIsNativePaste()||!i(o)||!a.browserIsSupported())return;return n.trigger("attach.screenshot.html5.catchClipboard"),new D(o)}if(r==E){if(a.isImagePasteEvent(o))return n.trigger("attach.screenshot.html5.handlePaste"),i(o)?(t(o.target).is(":input.wiki-textfield")&&o.preventDefault(),new L(o)):void e("jira/attach-images-plugin/pasteIgnored");e("jira/attach-images-plugin/pasteIgnoredNotImage")}}}),D=d("catchClipboard",function(e){function n(){o.remove()}var i=document.activeElement;e.selectionStart=e.target.selectionStart,e.selectionEnd=e.target.selectionEnd;var o=t('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");return o.focus(),t(i).is(":focusable:input,:aui-focusable:input")&&setTimeout(function(){i.focus()}),function(t,u){if(t==E){if(a.isImagePasteEvent(u))return n(),u.target=i,new L(u);if(a.isHtmlImagePasteEvent(u))return n(),u.target=i,new b(u);if(a.isTextPasteEvent(u)){n();var c=a.getTextPasteContent(u);return a.insertToInput(c,e.target,e.selectionStart,e.selectionEnd),u.preventDefault(),new N}}if(t==_){n();var s=o.find(">img");if(s.is(":only-child")){var l=s.attr("src");if(0===l.toLowerCase().indexOf("http"))return N();var d=r.decodeBase64DataUri(l),f=new Blob([d],{type:"image/png"});return new O(f,e)}var g=a.getTextContent(o[0]);return a.insertToInput(g,e.target,e.selectionStart,e.selectionEnd),N()}}}),b=l("imageLoading",function(t){var e=a.getHtmlImagePaste(t);return e?a.loadImage(e).then(function(t){f(p,t)},f.bind(null,h)):f(h),function(e,n){if(e==p){var i=a.convertImageToBlob(n);return i?new O(i,t):new N}if(e==_||e==h)return new N}}),L=d("fileLoading",function(t){return i.getFileFromEvent(t).done(function(t){f(v,t)}).fail(function(){f(m)}),function(e,n){return e==v?new O(n,t):e==m||e==_?new N:void 0}},1e3),O=l("attachImage",function(e,n){var i=n.target,r=a.generateFileName()+".png",o=a.convertBlobToImage(e,r);return u.trigger(c.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[o],isWikiTextfieldFocused:a.isWikiTextfield(t(i)),wikiTextfield:i,isPaste:!0,successCallback:function(){f(I)}}),function(t,e){return new N}}),A=new N;s._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:g,EVENT_WINDOW_PASTE:E,EVENT_FILE_LOADED:v,EVENT_FILE_LOAD_ERROR:m,EVENT_IMAGE_LOADED:p,EVENT_IMAGE_LOAD_ERROR:h,EVENT_DIALOG_LOADED:I,EVENT_DIALOG_CLOSED:T,EVENT_DIALOG_CANCELED:w,EVENT_TIMEOUT:_},states:{StateIdle:N,StateCatchClipboard:D,StateImageLoading:b,StateFileLoading:L,StateAttachImage:O}}},s.initIssuePaste=function(){t(window).on("keydown",function(t){f(g,t)}),t(window).on("paste",function(t){f(E,a.normalizePasteEvent(t))}),u.bind("Dialog.hide",function(t,e,n){n?f(w,e):f(T,e)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",[],function(){"use strict";return function(){return JIRA.trace.apply(void 0,arguments)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["exports"],function(t){"use strict";t.trigger=function(t,n){AJS.trigger("analytics",{name:t,data:n||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["jquery","jira/util/events","dndattachment/ctrlv/html5","dndattachment/upload/handler","exports"],function(e,t,n,r,a){a.register=function(){var a={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(e,t){return!!t.isPaste},processFiles:function(r,a){var c=e.Deferred();return n.show().done(function(n){var a=e("#attach-screenshot-placeholder-message"),i=e.Event("paste");i.clipboardData={files:r},a.focus(),setTimeout(function(){a.trigger(i)}),t.bind("Dialog.hide",function(e,t,n){n?c.reject():c.resolve([t.find("#attachscreenshotname").val()+".png"])})}),c}};r.registerExecutor(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["jquery","underscore","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/issue-paste","dndattachment/ctrlv/tracking","dndattachment/ctrlv/executor","jira/dialog/dialog-register","jira/dialog/form-dialog","exports"],function(t,e,n,i,a,r,o,c,s,d){"use strict";d.init=function(){var n=s.extend({options:{}});JIRA.ScreenshotDialog=n,a.initIssuePaste(),t(document).ready(function(){var a=t.Deferred();a.resolve(),c.attachScreenshotDialog=new n({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",isIssueDialog:!0,onContentRefresh:function(){this.$form.bind("before-submit",function(n){var a=i.validateFormData(i.screenshotFileUpload,t.trim(i.dialogView.getFileNameInput().val()));return 0==i.dialogView.getFileSize()?(n.preventDefault(),!1):!!e.isEmpty(a)||(i.dialogView.displayErrors(a),n.preventDefault(),!1)})},delayShowUntil:function(){return a}}),t(document).bind("dialogContentReady",function(t,e){e===c.attachScreenshotDialog&&null!==document.getElementById("attach-screenshot-form")&&(r.trigger("attach.screenshot.html5.contentReady"),i.initScreenshotPasteHandler())}),t(document).ready(function(){t(document).on("click","#attach-screenshot-html5",function(){r.trigger("attach.screenshot.html5.display")})})}),o.register()}}),require(["dndattachment/ctrlv/initialize","jquery"],function(t,e){"use strict";e(function(){t.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-form-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/FormDropZone.js' */
define("dndattachment/dropzones/FormDropZone",["dndattachment/Parser","dndattachment/integration-register","dndattachment/upload/handler","dndattachment/dropzones/IssueDropZone","jquery","dndattachment/aui","dndattachment/i18n","dndattachment/JIRA","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/util/events","underscore"],function(e,t,n,o,i,r,a,d,s,h,l,c){var p=o.extend({eventGroup:"formdropzone",init:function(){this._super.apply(this,arguments),this.progressBars=[],this.bind("uploadFinished",this.onUploadFinished.bind(this)),this.$containerNode=this.getContainerNode(),this.$formNode=this.$node.parents("form"),this.formToken=this.$formNode.find('input[name="formToken"]').attr("value"),this.projectId=this.$formNode.find("*[name=pid]").val(),this.$inputNode=i('<input name="dnd-dropzone" type="hidden" />').insertAfter(this.$node),this.$fieldNode=this.$node.parents(".field-group"),this.$fieldNode.addClass("long-field"),this.connectContainer()},onUploadFinished:function(e,t){var n=i('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",t.fileID).attr("id","filetoconvert-"+t.fileID).prop("checked",!0).insertBefore(t.$node);t.bind("onBeforeDestroy",function(){n.prop("checked",!1).prop("value",null)}),setTimeout(function(){t.$node.addClass("upload-progress-bar__upload-ready"),t.setIcon("aui-iconfont-close-dialog")},1e3),d.trace("jira.issue.dnd.uploadfinished")},commitUpload:function(e){return this.queueEvent("commitUpload",{count:e.length}),new i.Deferred},getContainerNode:function(){return this.$node.parents(".jira-dialog-content")},connectContainer:function(){if(this.$dragoverMask=i('<div class="attach-files-drop-zone__dragover-mask" />'),this.$dragoverMask.appendTo(this.$containerNode),this.$body=i(document.body),this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.onBodyDragOverDropHandler=this.onBodyDragOverDrop.bind(this),this.$containerNode.on("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),this.$body.on("dragover drop",this.onBodyDragOverDropHandler),this.onBeforeSubmitHandler=this.onBeforeSubmit.bind(this),this.$formNode.on("before-submit",this.onBeforeSubmitHandler),this.onContentAddedHandler=this.onContentAdded.bind(this),d.bind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.bind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.on("hide",this.onDialogHide.bind(this)),this.projectId){this.externalTemporaryAttachmentCreator=t.getTemporaryAttachmentCreator(this.projectId,this.formToken,this.$node[0]);var e=t.getConnectedTemporaryBinaryUploadHandler();"function"==typeof e&&(this.externalPasteUploadHandler=e(this.projectId,this.formToken,this.$node[0]));var n=t.getTemporaryAttachmentZoneCreator();if("function"==typeof n){var o={};this.externalZone=n(this.projectId,this.formToken,this.$node[0],this.$containerNode[0],{onFileUploadStarted:function(e){var t=new i.Deferred;o[e.id]=t,this.queueTask(t.promise())}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve()}})}}},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},browseFilesAndUpload:function(e,t){if("function"==typeof this.externalTemporaryAttachmentCreator&&n.isDefaultExecutor({})){var o={},r=c.extend({},t,{onFileUploadStarted:function(e){var n=new i.Deferred;o[e.id]=n,this.queueTask(n.promise()),t&&t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e)}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve(),t&&t.onFileUploadFinished&&t.onFileUploadFinished.call(null)}});return this.externalTemporaryAttachmentCreator.call(null,e,r),!0}this.browseLinkHandler.call(this,e)},disconnectContainer:function(){this.externalZone&&this.externalZone.deactivate(),n.disconnectCurrentDropZone(this),this.$dragoverMask.remove(),this.$containerNode.removeClass("attach-files-drop-zone__dragover"),this.$containerNode.off("dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.$formNode.off("before-submit",this.onBeforeSubmitHandler),d.unbind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.unbind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.off("hide",this.onDialogHide.bind(this))},isAttached:function(){return i.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},onDialogHide:function(){this.$body.off("dragover drop",this.onBodyDragOverDropHandler)},onBodyDragOverDrop:function(e){e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none")},onDragOverDrop:function(e){return this.isAttached()?void(h.dragEventContainsFiles(e)&&(e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),this.$containerNode.addClass("attach-files-drop-zone__dragover"),"dragenter"===e.type&&this.externalZone&&(n.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"===e.type&&(this.$containerNode.removeClass("attach-files-drop-zone__dragover"),i(document).trigger("dropHandled"),e.isPasteEvent?this.externalPasteUploadHandler?this.externalPasteUploadHandler(e.dataTransfer.files[0]):this.doAjaxUpload(e.dataTransfer):this.externalZone&&n.isDefaultExecutor({})?this.externalZone.drop():this.doAjaxUpload(e.dataTransfer)))):void this.disconnectContainer()},doAjaxUpload:function(e){var t=new s(e);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))},onDragLeave:function(){this.$containerNode.removeClass("attach-files-drop-zone__dragover")},onBeforeSubmit:function(e){if(this.isDirty){e.preventDefault();var t={};t[this.$inputNode.attr("name")]=a("dnd.attachment.upload.in.progress"),d.applyErrorsToForm(this.$formNode,t),this.$formNode.find(".error").toArray().some(function(e){e.scrollIntoView()})}},markDirty:function(e){o.prototype.markDirty.apply(this,arguments),this.isDirty=e,d.trace(e?"jira.issue.dnd.isdirty":"jira.issue.dnd.isclear")},handleNewProgressBar:function(e){this.progressBars.push(e),e.bind("onBeforeDestroy",c.bind(function(){this.trigger("progressBarOnBeforeDestroy",e),this.progressBars=c.filter(this.progressBars,function(t){return t!==e}),0===this.progressBars.length&&this.trigger("allUploadsCancelled")},this)),e.bind("onDestroy",c.bind(function(){this.trigger("progressBarDestroyed")},this)),e.bind("onFinished",c.bind(function(){this.trigger("progressBarFinished")},this)),e.bind("onFailed",c.bind(function(){this.trigger("progressBarFailed")},this)),this.trigger("progressBarStarted")},filesStillUploading:function(){return c.filter(this.progressBars,function(e){return!e.isFinished()}).length>0},anyFilesFailed:function(){return c.filter(this.progressBars,function(e){return e.isFailed()}).length>0}});return p});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:import-issues', location = 'jira-quick-edit-plugin/js/form/import-issues/import-issues.js' */
define("quick-edit/form/import-issues",["jira/container-api"],function(t){"use strict";var e=function(){},i=AJS.contextPath();return e.setForm=function(t){this.form=t},e.bindImportIssueUrl=function(){var n=e.getImportIssue();n.click(function(){var e="/secure/BulkCreateSetupPage!default.jspa?externalSystem=com.atlassian.jira.plugins.jim-plugin:bulkCreateCsv";t.navigate(e,function(){window.location=i+e},{replace:!1})})},e.getImportIssue=function(){return this.form.$element.find("#import-issues")},e});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'jira-quick-edit-plugin/soy/quickform.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.QuickForm&&(JIRA.Templates.QuickForm={}),JIRA.Templates.QuickForm.field=function(e,i){return""+soy.$$filterNoAutoescape(e.editHtml)},JIRA.Templates.QuickForm.fieldPicker=function(e,i){return'<div class="qf-picker"><div class="qf-picker-header"><dl><dt>'+soy.$$escapeHtml("Show Fields:")+"</dt>"+(e.isConfigurable?'<dd><a class="qf-unconfigurable" href="#">'+soy.$$escapeHtml("All")+"</a></dd><dd>"+soy.$$escapeHtml("Custom")+"</dd>":"<dd>"+soy.$$escapeHtml("All")+'</dd><dd><a class="qf-configurable" href="#">'+soy.$$escapeHtml("Custom")+"</a></dd>")+'<div class="whereismycf-qfpicker-link" id="qf-picker-custom-link"></div></dl></div><div class="qf-picker-content '+(e.isConfigurable?"":"qf-picker-unconfigurable")+'"></div><div class="qf-picker-footer"></div></div>'},JIRA.Templates.QuickForm.configurablePickerButton=function(e,i){return'<a title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</a>"},JIRA.Templates.QuickForm.unconfigurablePickerButton=function(e,i){return'<span title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</span>"},JIRA.Templates.QuickForm.errorMessage=function(e,i){return""+aui.message.error({closeable:"true",content:e.message})};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'jira-quick-edit-plugin/soy/issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.editIssueError=function(e,t){return"<h2>"+soy.$$escapeHtml("Edit issue")+'</h2><div class="form-body">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.editIssueForm=function(e,t){return'<form action="#" name="jiraform" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+soy.$$filterNoAutoescape(e.title)+'</h2><div class="form-body"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.issueId)+'"/><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"/><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"/><input type="hidden" name="pid" value="'+soy.$$escapeHtml(e.pid)+'"/><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+(e.commentField?soy.$$filterNoAutoescape(e.commentField.editHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons"><input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="edit-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Update")+'"/><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.fieldConfigurationToolbar=function(e,t){return""+aui.toolbar2.toolbar2({extraClasses:"qf-form-operations",content:""+aui.toolbar2.item({item:"secondary",content:""+aui.buttons.button({text:" "+soy.$$escapeHtml("Configure fields"),id:"qf-field-picker-trigger",extraClasses:"toolbar-trigger",iconText:"Configure fields",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-configure"})})})},JIRA.Templates.Issue.issueFields=function(e,t){var s="";if(e.hasTabs){s+='<div class="aui-tabs horizontal-tabs" id="horizontal"><ul class="tabs-menu">';for(var o=e.tabs,a=o.length,i=0;i<a;i++){var l=o[i];s+=l?'<li class="menu-item '+(l.isFirst?"first active-tab":"")+' "><a href="#tab-'+soy.$$escapeHtml(l.position)+'"><strong>'+soy.$$escapeHtml(l.label)+"</strong></a></li>":""}s+="</ul>";for(var n=e.tabs,r=n.length,c=0;c<r;c++){var u=n[c];if(u){s+='<div class="tabs-pane '+(u.isFirst?"active-pane":"")+'" id="tab-'+soy.$$escapeHtml(u.position)+'">';for(var m=u.fields,d=m.length,f=0;f<d;f++){var p=m[f];s+=p.editHtml?soy.$$filterNoAutoescape(p.editHtml):""}s+="</div>"}}s+="</div>"}else for(var $=e.fields,y=$.length,I=0;I<y;I++){var v=$[I];s+=v.editHtml?soy.$$filterNoAutoescape(v.editHtml):""}return s},JIRA.Templates.Issue.createIssueForm=function(e,t){var s='<form name="jiraform" action="#" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+'<button class="aui-button" id="import-issues">'+soy.$$escapeHtml("Import issues")+"</button>"+soy.$$escapeHtml(e.title)+'</h2><div class="form-body">';if(e.issueSetupFields){s+='<div class="issue-setup-fields">';for(var o=e.issueSetupFields,a=o.length,i=0;i<a;i++){var l=o[i];s+='<div class="qf-field qf-field-'+soy.$$escapeHtml(l.id)+' qf-required" data-field-id="'+soy.$$escapeHtml(l.id)+'">'+soy.$$filterNoAutoescape(l.editHtml)+"</div>"}s+="</div>"}return s+=(e.parentIssueId?'<input type="hidden" name="parentIssueId" value="'+soy.$$escapeHtml(e.parentIssueId)+'"/>':"")+'<input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"/><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"/><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons">'+(e.disallowCreateAnother?"":'<label for="qf-create-another" class="qf-create-another"><input id="qf-create-another" type="checkbox"'+(e.multipleMode?'checked="checked"':"")+" />"+soy.$$escapeHtml("Create another")+"</label>")+'<input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="create-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Create")+'"/><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.checkBoxField=function(e,t){return'<fieldset class="group"><legend><span></span></legend><div class="checkbox"><input class="checkbox" type="checkbox" name="'+soy.$$escapeHtml(e.name)+'" id="'+soy.$$escapeHtml(e.name)+'" value="true" '+(e.checked?"checked":"")+'><label for="'+soy.$$escapeHtml(e.name)+'">'+soy.$$escapeHtml(e.label)+"</label></div></fieldset>"},JIRA.Templates.Issue.createIssueError=function(e,t){return"<h2>"+soy.$$escapeHtml("Create issue")+'</h2><div class="form-footer">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.undealtErrors=function(e,t){for(var s="<div>"+soy.$$escapeHtml("There were some errors when trying to create this issue")+"</div><ul>",o=e.errors,a=o.length,i=0;i<a;i++){var l=o[i];s+="<li>"+soy.$$escapeHtml(l)+"</li>"}return s+="</ul>"};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/templates/form.js' */
define("quick-edit/templates/form",function(){return JIRA.Templates.QuickForm});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/templates/issue.js' */
define("quick-edit/templates/issue",function(){return JIRA.Templates.Issue});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/extension-mixin.js' */
define("quick-edit/util/extension-mixin",["jquery"],function(e){"use strict";var t=function(t,i,n){return e(this).trigger(t,i),n&&this.globalEventNamespaces&&e.each(this.globalEventNamespaces,function(n,r){e(document).trigger(r+"."+t,i)}),this};return{triggerEvent:t}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/class.js' */
define("quick-edit/util/class",["quick-edit/util/extension-mixin","jira/lib/class"],function(i,e){return e.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/control.js' */
define("quick-edit/util/control",["quick-edit/util/extension-mixin","jira/ajs/control"],function(i,n){return n.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/dialog.js' */
define("quick-edit/util/dialog",["jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,i,t){"use strict";var u=JIRA.Issues,s=function(i){var t=e.current,u=t.$activeTrigger;if(u)return u.attr(i)},r=function(){var e=s("data-issueKey");return!e&&i.getIssueKey()&&(e=i.getIssueKey()),!e&&t.getSelectedIssueKey()&&(e=t.getSelectedIssueKey()),!e&&u&&(e=u.Api.getSelectedIssueKey()),e},a=function(e){var i=r();return i?e+": "+i:e},g=function(){return u||t.isNavigator()||s("data-issueKey")};return{getActionIssueKey:r,getAttrFromActiveTrigger:s,getIssueActionTitle:a,shouldShowIssueKeyInTitle:g}}),AJS.namespace("JIRA.Dialog.getActionIssueKey",null,require("quick-edit/util/dialog").getActionIssueKey),AJS.namespace("JIRA.Dialog.getAttrFromActiveTrigger",null,require("quick-edit/util/dialog").getAttrFromActiveTrigger),AJS.namespace("JIRA.Dialog.getIssueActionTitle",null,require("quick-edit/util/dialog").getIssueActionTitle),AJS.namespace("JIRA.Dialog.shouldShowIssueKeyInTitle",null,require("quick-edit/util/dialog").shouldShowIssueKeyInTitle);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/jira.js' */
define("quick-edit/util/jira",["quick-edit/templates/issue","jira/util/data/meta","aui/message","jquery"],function(e,r,t,a){"use strict";var i=function(e){var r,t,a,i=e.closest(".tabs-pane");i.length&&(t=i.closest(".aui-tabs"),r=i.attr("id"),a=t.find("a[href='#"+r+"']"),a.click())},s=function(e,r){u("error",e,AJS.escapeHtml(r),!1)},n=function(e,r){u("error",e,r,!1)},o=function(r,t){var s,o=[];a.each(t,function(e,t){var i,n,u=r.find(":input[name='"+e+"']").last();1===u.length?(s||(s=u),n=a("<div class='error' />").attr("data-field",e).text(t),i=u.closest(".field-group, .group"),i.find(".error").remove(),i.append(n)):0===u.length&&o.push(t)}),o.length>0&&n(r,e.undealtErrors({errors:o})),i(r.find(".error:first")),s&&s.focus()},u=function(e,r,i,s){var n=r.find(".aui-message-context");n.length||(n=a("<div class='aui-message-context' />"),n.prependTo(r.find(".form-body"))),n.empty(),t[e](n,{shadowed:!1,closeable:s,body:i})},c=function(e,r){return u("success",e,r,!0)},l=function(e){var r=a(e);return{html:r.not("script"),scripts:r.filter("script")}},p=function(e){return a.isFunction(e)?e:function(){return e}},d=function(){return r.get("keyboard-accesskey-modifier")},m=function(e){var r=JSON.parse(a('meta[name="ajs-product-editions"]').attr("content"));switch(r[e]){case"f":return"jedi";case"s":return"standard";case"p":return"premium";default:return"unlicensed"}},f=function(e){switch(e){case"business":return"jira-core";case"software":return"jira-software";case"service_desk":return"jira-servicedesk";default:return"unknown"}};return{activateTabWithChild:i,applyErrorMessageToForm:s,applyErrorMessageWithHTMLToForm:n,applyErrorsToForm:o,applyMessageToForm:u,applySuccessMessageToForm:c,getModifierKey:d,extractScripts:l,makePropertyFunc:p,getEdition:m,getApplication:f}}),AJS.namespace("JIRA.activateTabWithChild",null,require("quick-edit/util/jira").activateTabWithChild),AJS.namespace("JIRA.applyErrorMessageWithHTMLToForm",null,require("quick-edit/util/jira").applyErrorMessageWithHTMLToForm),AJS.namespace("JIRA.applyErrorMessageToForm",null,require("quick-edit/util/jira").applyErrorMessageToForm),AJS.namespace("JIRA.applyErrorsToForm",null,require("quick-edit/util/jira").applyErrorsToForm),AJS.namespace("JIRA.applyMessageToForm",null,require("quick-edit/util/jira").applyMessageToForm),AJS.namespace("JIRA.applySuccessMessageToForm",null,require("quick-edit/util/jira").applySuccessMessageToForm),AJS.namespace("JIRA.extractScripts",null,require("quick-edit/util/jira").extractScripts),AJS.namespace("JIRA.makePropertyFunc",null,require("quick-edit/util/jira").makePropertyFunc);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/hierarchy.js' */
define("quick-edit/util/hierarchy",[],function(){"use strict";var e=function(e){return{id:Number(e.id),aboveLevelId:e.aboveLevelId?Number(e.aboveLevelId):null,belowLevelId:e.belowLevelId?Number(e.belowLevelId):null}},l=function(l){return l.reduce(function(l,u){return l[u.id]=e(u),l},{})},u=function(e){var u=e.baseLevelId||null,n=e.sameLevelId||null,r=l(e.levels);if(!n||!u||void 0===r[n]||void 0===r[u])return null;if(n===u)return 0;for(var v=0,i=r[n].aboveLevelId,d=r[n].belowLevelId;null!==i||null!==d;){if(v+=1,i===u)return-v;if(d===u)return v;if(i=null!==i&&r[i]?r[i].aboveLevelId:null,d=null!==d&&r[d]?r[d].belowLevelId:null,i===n||d===n)return null}return null};return{getIssueTypeLevel:u}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/field/configurable.js' */
define("quick-edit/form/field/configurable",["quick-edit/util/jira","quick-edit/util/control","quick-edit/templates/form","jira/util/events","jira/util/events/types","jquery"],function(e,t,i,r,n,s){"use strict";return t.extend({init:function(e){this.descriptor=e,this.$element=s("<div />").attr("id","qf-field-"+this.getId())},focus:function(){this.$element.find(":input:first").focus()},highlight:function(){var e=this;this.$element.css("backgroundColor","#fff").animate({backgroundColor:"lightyellow"},function(){e.$element.animate({backgroundColor:"#fff"},function(){e.$element.css("backgroundColor","")})})},getLabel:function(){return this.descriptor.label},getId:function(){return this.descriptor.id},activate:function(e){var t;this.active=!0,this.$element.addClass("qf-field-active").show(),this.$element.find("textarea").trigger("refreshInputHeight"),e||(t=this.render(),this.$element.append(t.scripts),this.focus(),r.trigger(n.NEW_CONTENT_ADDED,[this.$element]),this.$element.scrollIntoView(),this.triggerEvent("activated"))},hasVisibilityFeature:function(){return!!this.descriptor.hasVisibilityFeature},hasRetainFeature:function(){return!!this.descriptor.hasRetainFeature},isActive:function(){return this.active},disable:function(e){this.render(),this.active=!1,this.$element.removeClass("qf-field-active").hide(),e||this.triggerEvent("disabled")},render:function(){var t=i.field(this.descriptor),r=e.extractScripts(t);return this.$element.html(r.html).addClass("qf-field").data("model",this),{element:this.$element,scripts:r.scripts}}})}),AJS.namespace("JIRA.Forms.ConfigurableField",null,require("quick-edit/form/field/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/model/model.js' */
define("quick-edit/form/model",["quick-edit/util/class","jira/util/data/meta","jira/util/objects","jira/ajs/ajax/smart-ajax","jquery"],function(e,i,t,s,r){"use strict";return e.extend({init:function(e){this.userFieldsResource=e.userFieldsResource,this.fieldsResource=e.fieldsResource,this.retainedFields=[],this._hasRetainFeature=!1,this._hasVisibilityFeature=!0,this.headers={}},getFieldsResource:function(){return this.fieldsResource},getAtlToken:function(){return this.atlToken},getPid:function(){return this.pid},isSimplified:function(){return this.simplified},getFormToken:function(){return this.formToken},getActiveFieldIds:function(){return this.getUserFields()},addFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");this.removeFieldToRetainValue(e),this.retainedFields.push(e)},serializePreFilledFields:function(e){return r.param(r.extend(e,{preFillFields:!0}))},clearRetainedFields:function(){this.retainedFields=[]},removeFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");var i=r.inArray(e,this.retainedFields);i!=-1&&this.retainedFields.splice(i,1)},getFieldsWithRetainedValues:function(){if(this._hasRetainFeature)return this.retainedFields;throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},hasRetainedValue:function(e){if(this._hasRetainFeature)return r.inArray(e.id,this.retainedFields)!==-1;throw new Error("HasRetainedValue: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},refresh:function(e){var i,t=this,n=r.Deferred();return e&&(i=e+"&retainValues=true"),!i&&this.preFilledFields&&(i=this.serializePreFilledFields(this.preFilledFields)),s.makeRequest({url:this.getFieldsResource(),type:"POST",data:i,headers:this.headers,success:function(e){t._update(e)},complete:function(e,i,s){s.successful?n.resolveWith(t,arguments):(t.triggerEvent("serverError",[s]),n.rejectWith(t,[s]))}}),n.promise()},_update:function(e){this.atlToken=e.atl_token,this.formToken=e.formToken,this.pid=e.pid,this.simplified=e.simplified,this.fields=e.fields,this.sortedTabs=e.sortedTabs,this.userPreferences=e.userPreferences},setFields:function(e){this.fields=e},getConfigurableFields:function(){return this.getFields()},getFields:function(){var e=this,i=r.Deferred();return this.fields?i.resolve(e.fields):this.refresh().done(function(){i.resolve(e.fields)}),i.promise()},_mungeTabs:function(e){var i=0,s=[];return r.each(e,function(e,r){i++,r.tab&&(s[r.tab.position]||(s[r.tab.position]=t.copyObject(r.tab)),0===r.tab.position&&(s[r.tab.position].isFirst=!0),s[r.tab.position].fields||(s[r.tab.position].fields=[]),s[r.tab.position].fields.push(t.copyObject(r)))}),s},getTabs:function(){var e=this,i=r.Deferred();return this.getFields().done(function(t){var s=e._mungeTabs(t);i.resolve(s)}),i.promise()},getSortedTabs:function(){var e=r.Deferred();return this.sortedTabs?e.resolve(this.sortedTabs):this.refresh().done(function(){e.resolve(this.sortedTabs)}),e.promise()},getUserFields:function(){var e=this,i=r.Deferred();return this.userPreferences?i.resolve(e.userPreferences.fields):this.refresh().done(function(){i.resolve(e.userPreferences.fields)}),i.promise()},setUserFields:function(e){var i={};return i.fields=e,this.updateUserPrefs(i)},hasRetainFeature:function(){return!!this._hasRetainFeature},hasVisibilityFeature:function(){return!!this._hasVisibilityFeature},getUseConfigurableForm:function(){var e=this,i=r.Deferred();return this.userPreferences?i.resolve(e.userPreferences.useQuickForm):this.refresh().done(function(){i.resolve(e.userPreferences.useQuickForm)}).fail(function(){i.reject()}),i.promise()},setUseConfigurableForm:function(e){var i={};return i.useQuickForm=e,this.updateUserPrefs(i)},updateUserPrefs:function(e){var t=r.Deferred(),n=this;return""===i.get("remote-user")?(t.done(),t.promise()):this.userPreferences?(e.fields||(e.fields=this.userPreferences.fields),"undefined"==typeof e.showWelcomeScreen&&(e.showWelcomeScreen=this.userPreferences.showWelcomeScreen),"undefined"==typeof e.useQuickForm&&(e.useQuickForm=this.userPreferences.useQuickForm),s.makeRequest({url:this.userFieldsResource,type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json",headers:this.headers,complete:function(i,t,s){s.successful?n.userPreferences=e:n.triggerEvent("serverError",[s])}})):(t.reject(),t.promise())}})}),AJS.namespace("JIRA.Forms.Model",null,require("quick-edit/form/model"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/model/create-issue.js' */
define("quick-edit/form/model/create-issue",["quick-edit/form/model","wrm/context-path","jira/featureflags/feature-manager","underscore","jquery"],function(e,i,t,s,n){"use strict";return e.extend({DEFAULT_NON_RETAINED_FIELDS:["summary","description","timetracking","timetracking_originalestimate","timetracking_remainingestimate","worklog","worklog_startDate","worklog_timeLogged","worklog_newEstimate","worklog_adjustmentAmount","attachment"],CUSTOMFIELD_PATTERN:/^(customfield_(\d+))(?:|\:(?:\d+))$/,TIMETRACKING_PATTERN:/^timetracking_/,init:function(e){e=e||{},this.headers={"X-Atlassian-Capability":"LEGACY_ISSUE_CREATE"},this.userFieldsResource=i()+"/rest/quickedit/1.0/userpreferences/create",this._hasRetainFeature=!0,this._hasVisibilityFeature=!0,this.retainedFields=[],this.dirtyFields=[],this.initIssueType=e.issueType,this.initProjectId=e.projectId,this.parentIssueId=e.parentIssueId,this.itsmCategory=e.itsmCategory,this.preFilledFields=e.fields,this.nonRetainedFields=this.DEFAULT_NON_RETAINED_FIELDS,e.nonRetainedFields&&(this.nonRetainedFields=s.union(e.nonRetainedFields,this.DEFAULT_NON_RETAINED_FIELDS))},getParentIssueId:function(){return this.parentIssueId},isInMultipleMode:function(){return this.multipleMode},setIsMultipleMode:function(e){this.multipleMode=e},getActiveFieldIds:function(){var e=this,i=n.Deferred(),t=[];return this.getUserFields().done(function(s){n.each(s,function(e,i){t.push(i)}),e.getRequiredFields().done(function(e){n.each(e,function(e,i){n.inArray(i.id,t)===-1&&t.push(i.id)}),i.resolve(t)})}),i.promise()},hasVisibilityFeature:function(e){return!e.required},getFieldsResource:function(){var e=i()+"/secure/QuickCreateIssue!default.jspa?decorator=none";return this.parentIssueId?e+"&parentIssueId="+this.parentIssueId:(this.initIssueType&&(e=e+"&issuetype="+this.initIssueType,delete this.initIssueType),this.itsmCategory&&(e=e+"&itsmCategory="+this.itsmCategory,delete this.itsmCategory),this.initProjectId&&(e=e+"&pid="+this.initProjectId,delete this.initProjectId),e)},addFieldToRetainValue:function(e,i){var t=!s.contains(this.nonRetainedFields,e),n=null!==e.match(/^filetoconvert/);(t||n||i)&&this._super(e)},getRequiredFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){t.required&&i.push(t)}),e.resolve(i)}),e.promise()},getConfigurableFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id&&"com.atlassian.servicedesk:vp-origin"!==t.fieldType&&i.push(t)}),e.resolve(i)}),e.promise()},getIssueSetupFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id&&"com.atlassian.servicedesk:vp-origin"!==t.fieldType||i.push(t)}),e.resolve(i)}),e.promise()},markFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e),this.fieldIsDirty(e)||this.dirtyFields.push(e)},unmarkFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e),this.dirtyFields=this.dirtyFields.filter(function(i){return i!==e})},fieldIsDirty:function(e){return s.contains(this.dirtyFields,e)},isCustomFieldId:function(e){return e&&!!e.match(this.CUSTOMFIELD_PATTERN)},doesFieldSupportDefaultValue:function(e){var i=["description","environment"];return!!(this.isSimplified()&&i.indexOf(e)>-1)||this.isCustomFieldId(e)},isTimetrackingFieldId:function(e){return e&&!!e.match(this.TIMETRACKING_PATTERN)},normalizeCustomFieldId:function(e){return this.isCustomFieldId(e)?e.match(this.CUSTOMFIELD_PATTERN)[1]:e},normalizeFieldParam:function(e,i){return"filetoconvert"==e?e+"-"+i:this.isCustomFieldId(e)?this.normalizeCustomFieldId(e):this.isTimetrackingFieldId(e)?"timetracking":e}})}),AJS.namespace("JIRA.Forms.CreateIssueModel",null,require("quick-edit/form/model/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/model/edit-issue.js' */
define("quick-edit/form/model/edit-issue",["quick-edit/form/model","underscore","jquery"],function(e,i,r){"use strict";return e.extend({getUnconfigurableTabs:function(){var e=this,i=r.Deferred();return e.getTabs().done(function(e){var n=e.slice(0);n[0].fields=n[0].fields.slice(0),r.each(n[0].fields,function(e,i){if("comment"===i.id)return n[0].fields.splice(e,1),!1}),i.resolve(n)}),i.promise()},getCommentField:function(){var e=r.Deferred();return this.getFields().done(function(i){r.each(i,function(i,r){"comment"===r.id&&e.resolve(r)}),e.reject()}),e.promise()}})}),AJS.namespace("JIRA.Forms.EditIssueModel",null,require("quick-edit/form/model/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/model/factory/edit-issue.js' */
define("quick-edit/form/model/factory/edit-issue",["quick-edit/form/model/edit-issue","wrm/context-path"],function(e,i){"use strict";return function(s){return new e({fieldsResource:i()+"/secure/QuickEditIssue!default.jspa?issueId="+s+"&decorator=none",userFieldsResource:i()+"/rest/quickedit/1.0/userpreferences/edit"})}}),AJS.namespace("JIRA.Forms.Model.createQuickEditIssueModel",null,require("quick-edit/form/model/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/helper/helper.js' */
define("quick-edit/form/helper/helper",["quick-edit/util/jira","quick-edit/form/model","quick-edit/util/class","jira/jquery/plugins/isdirty","jira/util/events","jira/dialog/dialog","underscore","jquery","jira/ajs/ajax/smart-ajax","wrm/context-path","jira/analytics/web-client"],function(e,t,i,r,n,s,o,a,u,c,l){"use strict";var d=AJS.escapeHTML;return i.extend({init:function(e){this.form=e},handleSubmitSuccess:function(t){function i(e,t,i){var r='<a href="'+i+'">'+e+" - "+d(t)+"</a>";return AJS.format("Issue {0} has been successfully created",r)}var r=this,n=this.form.$element.find("#summary").val();t.summary=n,this.form.triggerEvent("submitted",[t,this]),this.form.triggerEvent("issueCreated",[t,this],!0),r.form.model.isInMultipleMode()?(r.form.model.unmarkFieldAsDirty("description"),this.form.render().done(function(){var s=i(t.issueKey,n,c()+"/browse/"+t.issueKey);e.applySuccessMessageToForm(r.form.getForm(),s)})):this.form.triggerEvent("sessionComplete")},sendEvent:function(e,t,i,r,n){e>=500?l.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskFail",attributes:Object.assign({task:"createIssue",edition:i,application:t,analyticsSource:"QuickCreateForm",errorMessage:r?e.toString()+" - "+r:e.toString()},n)}):e>=400&&e<500&&l.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:Object.assign({task:"createIssue",isCreated:!1,edition:i,application:t,analyticsSource:"QuickCreateForm"},n)})},sendExperienceEventOnSubmitError:function(t){var i,r=this,n={};try{if(t&&t.responseText&&t.getResponseHeader){const s=t.getResponseHeader("Content-Type");if(n.traceId=t.getResponseHeader("atl-traceid"),n.requestId=t.getResponseHeader("x-arequestid"),s.includes("json")){var o=JSON.parse(t.responseText);o&&(i=o.errorMessages&&o.errorMessages[0])}else if(s.includes("html")){const l=t.responseText.match(/^.+Log reference: <strong>(.+)<\/strong><\/li>.+$/);null!=l&&2===l.length?(i="html response",n.log_reference=l[1]):i="error parsing html response (likely HTTP 429 or connection dropped)"}else i=s+" response"}}catch(e){i=e.message}u.makeRequest({type:"GET",contentType:"application/json",url:c()+"/rest/api/2/project/"+a('[data-field-id="project"] input.project-field[name="pid"]').val(),success:function(s){var o=e.getApplication(s.projectTypeKey),a=e.getEdition(o);r.sendEvent(t.status,o,a,i,n)},error:function(){r.sendEvent(t.status,"unknown","unknown",i,n)}})},getCreateAnotherCheckbox:function(){return this.form.$element.find("#qf-create-another")},isInMultipleMode:function(){return this.getCreateAnotherCheckbox().is(":checked")},getProjectField:function(){return this.form.$element.find(".issue-setup-fields #project")},getIssueTypeField:function(){return this.form.$element.find(".issue-setup-fields #issuetype")},getRequestOrIssueTypeField:function(){return this.form.$element.find("#request-or-issue-type-field")},getRequestTypeField:function(){return this.form.$element.find(".issue-setup-fields .request-type-field")},serializeForToggle:function(e){if(!this.form.model.hasRetainFeature())return this.form.getForm().serialize();var t=this.form.model.prevActiveFields||[],i=this.form.getForm().serializeArray(),r=function(e){return this.form.model.normalizeFieldParam(e.name,e.value)}.bind(this),n=this.form.getActiveFieldIds(),s=a.grep(i,function(e){return a.inArray(r(e),n)!==-1}),o=a.grep(t,function(e){return a.inArray(r(e),n)===-1}),u=a.map(o,function(e){return r(e)}),c=a.merge(s,o),l=a.merge(n,u);this.form.model.prevActiveFields=a.extend(!0,[],c),e&&(l=this.executeProjectChangedSecuritySettingAction(l)),l=l.filter(function(e){return!this.form.model.doesFieldSupportDefaultValue(e)||this.form.model.fieldIsDirty(e)}.bind(this));var d=a.merge([{name:"retainValues",value:!0}],c);return a.each(i,function(e,t){"pid"!==t.name&&"issuetype"!==t.name||d.push(t)}),d.push({name:"toggle",value:!0}),a.each(l,function(e,t){d.push({name:"fieldsToRetain",value:t})}),d.push({name:"formToken",value:this.form.model.getFormToken()}),a.param(d)},executeProjectChangedSecuritySettingAction:function(e){return o.reject(e,function(e){return"security"===e})},prepareFieldsToRetain:function(e,t){return a.each(e,function(e,i){t.push({name:"fieldsToRetain",value:i})}),t},setIssueType:function(){var e=this,t=this.serializeForToggle();this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(t).done(function(){e.form.enable()})},setProjectId:function(){var e=this,t=this.serializeForToggle(!0);this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(t).done(function(){e.form.enable()})},setRequestType:function(e,t){var i=this.getRequestTypeField(),r=this.getIssueTypeField();i.length&&(i.attr("value",e),this.form.model.markFieldAsDirty(i.attr("id"))),r.attr("value")!==t&&(r.attr("value",t),r.change())},saveFormDirtyStatus:function(){this.form.isDirty=this.form.getForm().isDirty()},restoreFormDirtyStatus:function(){this.form.isDirty&&this.form.getForm().addClass(r.ClassNames.BY_DEFAULT)},decorate:function(){var e=this;this.getProjectField().change(function(){e.saveFormDirtyStatus(),n.trigger("dialogBeforeContentChange",["projectId",this.value,s.current.options.id]),e.setProjectId(this.value)}),this.getIssueTypeField().change(function(){e.saveFormDirtyStatus(),n.trigger("dialogBeforeContentChange",["issueType",this.value,s.current.options.id]),e.setIssueType(this.value)}),this.getCreateAnotherCheckbox().change(function(){e.form.model.setIsMultipleMode(this.checked)});var t=this.getRequestOrIssueTypeField();t.length&&t.change(function(){var t=this,i=a(t),r=o.flatten(o.map(i.data("options"),function(e){return e.items||e})),n=o.find(r,function(e){return e.value===t.value});n&&e.setRequestType(n.payload.requestTypeKey,n.payload.issueTypeId)})},decorateFields:function(){var e=this;this.form.$element.find('*[id^="customfield_"]').off("change.customField").on("change.customField",function(){e.form.model.isCustomFieldId(this.name)&&e.form.model.markFieldAsDirty(this.name)}),this.form.$element.find("textarea#description").on("change",function(){e.form.model.markFieldAsDirty(this.name)}),this.form.$element.find("textarea#environment").on("change",function(){e.form.model.markFieldAsDirty(this.name)})},sendQuickEditAnalyticsEvent:function(e){var t,i,r=e.instance,n=e.name,s=e.actionSubjectId,o=e.action,a=e.source,u=e.actionSubject,c=e.fieldAction,d=r.model.fields.map(function(e){return{id:e.id,required:e.required}});e.field&&(i={id:e.field.descriptor.id,required:e.field.descriptor.required}),r.model.getActiveFieldIds().then(function(r){t=d.filter(function(e){return r.some(function(t){return t===e.id})});var f={allFieldsShown:e.allFieldsShown,field:JSON.stringify(i),allFields:JSON.stringify(d),displayedFields:e.allFieldsShown?JSON.stringify(d):JSON.stringify(t),fieldAction:c};AJS.trigger("analyticsEvent",{name:n,data:f}),l.sendUIEvent({source:a,actionSubjectId:s,actionSubject:u,action:o,attributes:f})})}})}),AJS.namespace("JIRA.Forms.CreateIssueHelper",null,require("quick-edit/form/helper/helper"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/forge/forge.js' */
define("quick-edit/form/forge",["jquery","jira/analytics/web-client"],function(e,t){"use strict";return{isForgeField:function(e){return 0===e.fieldType.indexOf("com.atlassian.forge:ari:cloud:ecosystem::extension/")},renderForgeCustomFields:function(i,r,n){function a(){var e=document.createElement("span");return e.classList.add("aui-icon-wait","forge-wait-icon"),e}function s(e,t){switch(t){case"string":case"number":case"datetime":return e;case"group":return e.name;case"user":return e.accountId;case"object":return JSON.stringify(e);default:return e}}function o(e,t,i,r){if("list"===i)return e instanceof Array?(e.forEach(function(e){var i=e;"user"===t&&(i=e.accountId),"group"===t&&(i=e.name);var n=document.createElement("option");n.setAttribute("value",i),n.setAttribute("title",i),n.setAttribute("selected","selected"),r.append(n)}),{error:null}):{error:"The entered value is not an array."};try{var n=s(e,t,i);return r.val(n),{error:null}}catch(e){return{error:"The entered value does not match required custom field type."}}}function d(r,n,s,o,d){var c=a(),u=e('label[for="'+s.id+'"]',i.$element),p={fieldType:s.fieldData.properties.type,module:s.fieldData.type,renderContext:"issue-create"};t.sendOperationalEvent({source:"issue-create-dialog",actionSubject:"jiraForgeUi.customField",action:"initialized",attributes:p});var f=r.components.customField.renderView({extension:s.fieldData,extensionData:{fieldValue:n||null,fieldId:s.id,fieldType:s.fieldData.id,renderContext:"issue-create",issue:{type:d.issueType,typeId:d.issueTypeId},project:{id:d.projectId}},fieldId:s.id,analyticsAttributes:p,onInitialRender:function(){t.sendScreenEvent("jiraForgeUi.customFieldScreen",null,p)}});f.classList.add("forge-field-container"),u.after(f),f.addEventListener("click",function(){t.sendUIEvent({source:"create-issue-dialog",action:"clicked",actionSubject:"jiraForgeUi.customFieldEditTrigger",attributes:p}),l(r,n,s,o,f,d,c)})}function l(r,n,a,s,l,c,u){if(!l.contains(u)){var p=e('label[for="'+a.id+'"]',i.$element);l&&l.appendChild(u);var f={fieldType:a.fieldData.properties.type,module:a.fieldData.type,renderContext:"issue-create"};r.components.customField.renderEditView({extension:a.fieldData,extensionData:{fieldValue:n||null,fieldId:a.id,fieldType:a.fieldData.id,renderContext:"issue-create",issue:{type:c.issueType,typeId:c.issueTypeId},project:{id:c.projectId}},analyticsAttributes:f,onInitialRender:function(){t.sendScreenEvent("jiraForgeUi.customFieldEditScreen",null,f)},onRender:function(){u&&u.remove()},onError:function(){u&&u.remove()},onConfirm:function(e){l.remove();var t=d(r,e,a,s,c);p.after(t)},onSave:function(e){var t=a.fieldData.properties.type,i=a.fieldData.properties.collection,r=o(e,t,i,s);return r.error?Promise.resolve({error:{name:"ValidationError",errors:[{error:r.error}]}}):Promise.resolve({data:e})}})}}var c=require("jira/container-api");c.APIs.getForgeAPI().then(function(n){var a=n.modules.customFields.concat(n.modules.customFieldTypes).filter(function(e){return e.properties.edit&&e.properties.function}),s=r.map(function(e){var t=e.fieldType.slice("com.atlassian.forge:".length),i=a.find(function(e){return t===e.id});return i?Object.assign({},{fieldData:i},{id:e.id}):null}).filter(Boolean);0!==s.length&&(e(".aui-blanket").css("z-index","499"),e("#create-issue-dialog").css("z-index","500"),s.forEach(function(r){var a,s=r.fieldData.properties.type,o=r.fieldData.properties.collection;switch(s){case"datetime":case"number":case"object":case"string":case"group":a=e("#"+r.id,i.$element);break;case"user":a="list"===o?e("#"+r.id,i.$element):e("#hidden-"+r.id,i.$element);break;default:t.sendOperationalEvent({source:"issue-create-dialog",actionSubject:"jiraForgeUi.customField",action:"failed",attributes:{error:{message:"Not supported custom field type in issue create"},fieldType:r.fieldData.properties.type,renderContext:"issue-create"}})}if(a){var l=e('label[for="'+r.id+'"]',i.$element),c=l.parent(),u=c.children();u.each(function(e,t){"label"!==t.tagName.toLowerCase()&&(t.style.display="none")});var p,f,m,y=e(".issue-setup-fields #issuetype-field"),v=e(".issue-setup-fields #issuetype"),g=e(".issue-setup-fields #request-or-issue-type-field-field"),b=e(".issue-setup-fields #project");y.length>0?p=y[0].value:g.length>0&&(p=g[0].value),v.length>0&&(f=v[0].value),b.length>0&&(m=b[0].value);var D={issueType:p,issueTypeId:f,projectId:m};if(r.fieldData.properties.description){var F=r.fieldData.environmentType,T=document.createElement("div"),h=document.createElement("p");T.classList.add("description"),"PRODUCTION"!==F?h.innerText="("+F+")"+r.fieldData.properties.description:h.innerText=r.fieldData.properties.description,T.appendChild(h),c.append(T)}d(n,a.val(),r,a,D)}}))})}}}),AJS.namespace("JIRA.Forms.Forge",null,require("quick-edit/form/forge"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/abstract/abstract.js' */
define("quick-edit/form/abstract",["quick-edit/util/jira","quick-edit/util/control","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/events/types","jira/util/events","jira/util/browser","jquery","underscore"],function(e,t,i,r,n,s,a,o,d,l){"use strict";var u=AJS.extractBodyFromResponse,c=AJS.log;return t.extend({submit:function(e){var t=this;return t.getForm().addClass("submitting"),this.triggerEvent("submitting",[],!0),i.makeRequest({url:this.getAction(),type:"POST",headers:e,beforeSend:function(){t.disable()},data:this.serialize(),complete:function(e,i,n){var s=n.data;if(t.getForm().find(".aui-message-context").remove(),t.enable(),t.getForm().find(".error").remove(),n.successful)if(t.performAnalytics(),s&&s.fields&&(t.invalidateFieldsCache(),t.model.setFields(s.fields)),"string"==typeof s){var a=d(u(s)),o=a.find("#atl_token").val();o&&(t.model.atlToken=o,t.getForm().find('input[name="atl_token"]').val(o));var l=new r({offsetTarget:"body",content:a});l._handleServerSuccess=function(){l.prev&&(l.prev._removeStackState(),l.prev._resetWindowTitle(),l._removeStackState()),l.hide(),t.triggerEvent("sessionComplete",[],!0),t.handleSubmitSuccess()},l._handleServerError=function(e){l.hide(),t.handleSubmitError(e)},l.show()}else t.handleSubmitSuccess(n.data);else t.handleSubmitError(e);t.getForm().removeClass("submitting")}})},disable:function(){this.getForm().find(":input").attr("disabled","disabled").trigger("disable"),this.getForm().find(":submit").attr("disabled","disabled")},enable:function(){this.getForm().find(":input").removeAttr("disabled").trigger("enable"),this.getForm().find(":submit").removeAttr("disabled")},getActiveFieldIds:function(){throw new Error("getActiveFieldIds: Abstract, must be implemented by sub class")},serialize:function(e){var t=this,i=this.getForm().serialize();return this.model.isInMultipleMode&&this.model.isInMultipleMode()&&(i+="&multipleMode=true"),this.model.hasRetainFeature()&&(this.model.clearRetainedFields(),d.each(this.getActiveFieldIds(),function(i,r){t.model.addFieldToRetainValue(r,e)}),d.each(this.model.getFieldsWithRetainedValues(),function(e,t){i=i+"&fieldsToRetain="+t})),i},invalidateFieldsCache:function(){delete this.fields},setInitialFocus:function(){this.getFormContent().find(":input:first").focus()},handleSubmitSuccess:function(){this.triggerEvent("submitted"),o.reloadViaWindowLocation()},performAnalytics:function(){var e=function(e,t){var i="***** Analytics log ["+e+"]";t&&(i+="["+JSON.stringify(t)+"]"),c(i),AJS.EventQueue&&AJS.EventQueue.push({name:e,properties:t||{}})},t=function(e){var t={},i=l.filter(e,function(e){return!l.contains(["isCreateIssue","isEditIssue","atl_token","hasWorkStarted"],e.name)}),r=l.filter(i,function(e){return""!=e.value});return l.each(r,function(e){var i=e.name;l.has(t,i)||(t[i]=[]),t[i].push(e.value)}),t};this.previousAnalytics=function(i,r){var s=t(i),a=l.keys(s),o=l.keys(r.data),d=l.difference(a,o),u=l.difference(o,a),c=l.intersection(o,a),m=l.filter(c,function(e){return l.isEqual(r.data[e],s[e])}),f=l.difference(c,m),h=r.count+1,g="edit-issue-dialog"===n.current.options.id,v={"atlassian.numCreates":h,"edit.form":g};return l.each(d,function(e){v[e]="added"}),l.each(u,function(e){v[e]="removed"}),l.each(m,function(e){v[e]="same"}),l.each(f,function(e){v[e]="changed"}),e("quick.create.fields",v),{data:s,count:h}}(this.getForm().serializeArray(),this.previousAnalytics||{data:{},count:0})},addErrorMessage:function(t){e.applyErrorMessageToForm(this.getForm(),[t])},handleSubmitError:function(t){var r,n=this;if(t.responseText){try{r=JSON.parse(t.responseText)}catch(e){}if(r){r.errorMessages&&r.errorMessages.length&&e.applyErrorMessageToForm(this.getForm(),r.errorMessages[0]),r&&r.errors&&400===t.status&&(this.getFieldById&&d.each(r.errors,function(e){/^timetracking/.test(e)?n.getFieldById("timetracking").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):/^worklog/.test(e)?n.getFieldById("worklog").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):n.getFieldById(e).done(function(e){e.activate(!0)})}),e.applyErrorsToForm(this.getForm(),r.errors),this.triggerEvent("validationError",[this,r.errors],!0));var o=n.$element.find(".error");o.length&&o[0].scrollIntoView(!1)}}else{var l=i.SmartAjaxResult(t,void 0,t.statusText,"",!1,void 0),u=i.buildSimpleErrorContent(l);n.addErrorMessage(u)}},getAction:function(){return this.action},getFormContent:function(){return this.$element.find("div.content")},getForm:function(){return this.$element.find("form")},createField:function(){throw new Error("AbstractForm: You must implement [createField] method in subclass.")},_getActiveAttachments:function(e){var t=[];if(!e)return t;for(var i=e.split("&"),r=0;r<i.length;r++){var n=i[r].split("=");"filetoconvert"==n[0]&&t.push(n[1])}return t},_setActiveAttachments:function(e){var t=this.$element.find("input[name=filetoconvert]");t.each(function(){var t=d(this),i=l.contains(e,t.attr("value"));t.prop("checked",i)})},render:function(e){var t=d.Deferred(),i=this,r=i._getActiveAttachments(e);return e?(this.invalidateFieldsCache(),this.model.refresh(e).done(function(){i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])})})):i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])}),t.always(function(){i._setActiveAttachments(r)}),t.promise()}})}),AJS.namespace("JIRA.Forms.AbstractForm",null,require("quick-edit/form/abstract"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/abstract/configurable.js' */
define("quick-edit/form/abstract/configurable",["quick-edit/form/abstract","quick-edit/form/field/configurable","quick-edit/form/helper/helper","jquery"],function(e,i,t,n){"use strict";return e.extend({getFields:function(){var e=n.Deferred(),i=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getConfigurableFields().done(function(t){n.each(t,function(e,t){var n=i.createField(t);i.fields.push(n)}),e.resolveWith(i,[i.fields])})),e.promise()},getActiveFieldIds:function(){var e=[],i=this.$element.find(".qf-field.qf-field-active:not(.qf-required), .qf-field.qf-required:not(.qf-field-active)");return n.each(i,function(i,t){var d=n(t),r=d.data("model"),c=d.data("field-id")||r&&r.getId();null!=c&&e.push(c),"attachment"===c&&d.find("input[name=filetoconvert]").each(function(){e.push(this.id)})}),e},createField:function(e){e.hasVisibilityFeature=this.model.hasVisibilityFeature(e),this.model.hasRetainFeature(e)&&(e.hasRetainFeature=!0,e.retainValue=this.model.hasRetainedValue(e));var n=this,d=new i(e),r=new t(n),c=n&&n.globalEventNamespaces&&n.globalEventNamespaces.length>0?n.globalEventNamespaces[0]:null;return e.hasVisibilityFeature&&d.bind("activated",function(){n.model.setUserFields(n.getActiveFieldIds()),d.highlight(),n.triggerEvent("QuickForm.fieldAdded",[d]);try{r.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.added",action:"changed",actionSubject:"checkbox",actionSubjectId:"toggleField",fieldAction:"added",source:c,field:d,instance:n})}catch(e){}}).bind("disabled",function(){n.model.setUserFields(n.getActiveFieldIds()),n.triggerEvent("QuickForm.fieldRemoved",[d]);try{r.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.removed",action:"changed",actionSubject:"checkbox",actionSubjectId:"toggleField",fieldAction:"removed",source:c,field:d,instance:n})}catch(e){}}),d},getFieldById:function(e){var i=this,t=n.Deferred();return this.getFields().done(function(d){n.each(d,function(n,d){d.getId()===e&&t.resolveWith(i,[d])}),t.rejectWith(i,[])}),t.promise()},hasNoVisibleFields:function(){var e=n.Deferred();return e.resolve(0===this.getActiveFieldIds().length),e.promise()},renderFormContents:function(){var e=n.Deferred(),i=n(),t=this;return t.getFields().done(function(d){var r=t.reorderFieldsToRender(d);t.model.getActiveFieldIds().done(function(d){n.each(r,function(){var e=this.render();i=i.add(e.scripts),t.getFormContent().append(e.element)}),n.each(d,function(e,i){n.each(r,function(){this.getId()===i&&this.activate(!0)})}),n.each(r,function(){this.isActive()||this.disable(!0)}),t.hasNoVisibleFields().done(function(n){if(n===!0)for(var d=0;d<3;d++)r[d]&&r[d].activate(!0);e.resolveWith(this,[t.$element,i])})})}),e.promise()},reorderFieldsToRender:function(e){return e}})}),AJS.namespace("JIRA.Forms.AbstractConfigurableForm",null,require("quick-edit/form/abstract/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/abstract/unconfigurable.js' */
define("quick-edit/form/abstract/unconfigurable",["quick-edit/form/abstract","quick-edit/templates/issue","jquery"],function(e,t,i){"use strict";return e.extend({getFieldsHtml:function(){var e=this,s=i.Deferred(),n={};return this.model.getTabs().done(function(i){1===i.length?n.fields=i[0].fields:(n.tabs=i,n.hasTabs=!0),s.resolveWith(e,[t.issueFields(n)])}),s.promise()},getActiveFieldIds:function(){var e=[];if(this.model.getFields().done(function(t){i.each(t,function(t,i){e.push(i.id)})}),e.indexOf("attachment")){var t=this.$element.find("input[name=filetoconvert]").map(function(e,t){return t.id}).toArray();e.push.apply(e,t)}return e},getFields:function(){var e=i.Deferred(),t=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getFields().done(function(s){i.each(s,function(e,i){var s=t.createField(i);t.fields.push(s)}),e.resolveWith(t,[t.fields])})),e.promise()}})}),AJS.namespace("JIRA.Forms.AbstractUnconfigurableForm",null,require("quick-edit/form/abstract/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/configurable/create-issue.js' */
define("quick-edit/form/configurable/create-issue",["quick-edit/form/abstract/configurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery","quick-edit/form/forge"],function(e,i,t,r,o,n,s,l){"use strict";return e.extend({init:function(e){this.model=e.model,this.helper=new i(this),this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this._serialization={},this.action=n()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=s("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){return this.helper.handleSubmitSuccess(e)},handleSubmitError:function(i){e.prototype.handleSubmitError.call(this,i),this.helper.sendExperienceEventOnSubmitError(i)},_render:function(){var e=s.Deferred(),i=this;return i.model.getIssueSetupFields().done(function(n){var s=t.createIssueForm({issueSetupFields:n,atlToken:i.model.getAtlToken(),formToken:i.model.getFormToken(),isConfigurable:!0,title:i.title,parentIssueId:i.model.getParentIssueId(),multipleMode:i.model.isInMultipleMode(),showFieldConfigurationToolBar:!o.isAnonymous(),modifierKey:r.getModifierKey()});i.$element.html(s),i.helper.decorate(),i.renderFormContents().done(function(t,r){i.helper.decorateFields(),e.resolveWith(i,[i.$element,r])}),i.model.getFields().done(function(e){i.model.getActiveFieldIds().done(function(t){var r=e.filter(function(e){return l.isForgeField(e)&&t.indexOf(e.id)>-1});r.length>0&&l.renderForgeCustomFields(i,r)})}),i.bind("QuickForm.fieldAdded",function(e,t){i.helper.decorateFields(),i.model.getFields().done(function(e){var r=t.descriptor;l.isForgeField(r)&&l.renderForgeCustomFields(i,[r])})})}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableCreateIssueForm",null,require("quick-edit/form/configurable/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/configurable/edit-issue.js' */
define("quick-edit/form/configurable/edit-issue",["quick-edit/form/abstract/configurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,s,n,o){"use strict";return e.extend({init:function(e){this.model=e.model,this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this.action=n()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=o("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},hasNoVisibleFields:function(){var e=o.Deferred(),t=this.getActiveFieldIds();return this.model.getUserFields().done(function(i){1===i.length&&"comment"===i[0]?e.resolve(!1):0===t.length||1===t.length&&"comment"===t[0]?e.resolve(!0):e.resolve(!1)}),e.promise()},_render:function(){var e=o.Deferred(),n=this,r=i.editIssueForm({issueId:this.issueId,title:this.title,atlToken:n.model.getAtlToken(),formToken:n.model.getFormToken(),pid:n.model.getPid(),isConfigurable:!0,modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()});return this.$element.html(r),n.renderFormContents().done(function(t,i){n.getFieldById("comment").done(function(e){n.getFormContent().append(e.$element)}),e.resolveWith(n,[n.$element,i])}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableEditIssueForm",null,require("quick-edit/form/configurable/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/field-picker/button/configurable.js' */
define("quick-edit/form/field-picker/button/configurable",["quick-edit/util/control","quick-edit/templates/form"],function(e,i){"use strict";return e.extend({init:function(e){var i=this;this.field=e.field,this.field.bind("disabled",function(){i.$element.removeClass("qf-active")}).bind("activated",function(){i.$element.addClass("qf-active")})},toggle:function(){this.field.isActive()?this.field.disable():this.field.activate()},getId:function(){return this.field.getId()},render:function(){return this.$element=jQuery(i.configurablePickerButton({required:this.field.descriptor.required,label:this.field.getLabel(),fieldId:this.field.getId(),isActive:this.field.isActive()})),this._assignEvents("button",this.$element),this.$element},_events:{button:{click:function(e){this.toggle(),e.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker.ConfigurableButton",null,require("quick-edit/form/field-picker/button/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/field-picker/button/unconfigurable.js' */
define("quick-edit/form/field-picker/button/unconfigurable",["quick-edit/util/control","quick-edit/templates/form","jquery"],function(e,i,t){"use strict";return e.extend({init:function(e){this.descriptor=e},render:function(){return this.$element=t(i.unconfigurablePickerButton({required:this.descriptor.required,label:this.descriptor.label,fieldId:this.descriptor.id,isActive:!0})),this.$element}})}),AJS.namespace("JIRA.Forms.FieldPicker.UnconfigurableButton",null,require("quick-edit/form/field-picker/button/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/field-picker/field-picker.js' */
define("quick-edit/form/field-picker",["quick-edit/form/field-picker/button/configurable","quick-edit/form/field-picker/button/unconfigurable","quick-edit/templates/form","quick-edit/util/control","aui/inline-dialog","jquery"],function(i,e,n,t,o,l){"use strict";return t.extend({INLINE_DIALOG_ID:"field_picker_popup",init:function(){this.buttons=[]},switchToAll:function(i){this.isConfigurable=!1,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToAll"))},setForm:function(i){this.form=i},switchToCustom:function(i){this.isConfigurable=!0,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToCustom"))},hideCallback:function(){},bindInlineDialog:function(){function i(i,t,o){e.render().done(function(e){0===i.find(".qf-picker").length&&(i.html(e),i.click(function(i){i.stopPropagation()}));var t=n.offset().top-l(window).scrollTop(),s=l(window).height(),r=s-t-110;i.find(".qf-picker-content").css("maxHeight",r),this.form.model.isSimplified()?i.find("#qf-picker-custom-link").hide():i.find("#qf-picker-custom-link").show(),o()})}var e=this,n=this.getInlineDialogTrigger();return this.inlineDialog&&this.inlineDialog.remove(),this.inlineDialog=o(n,this.INLINE_DIALOG_ID,i,{width:450,upfrontCallback:function(){n.parent().addClass("active")},hideCallback:function(){n.parent().removeClass("active")},nobind:!0}),n.click(function(i){l("#inline-dialog-"+e.INLINE_DIALOG_ID).is(":visible")?e.inlineDialog.hide():e.inlineDialog.show()}),this.inlineDialog},getInlineDialogTrigger:function(){return this.form.$element.find("#qf-field-picker-trigger")},renderButtons:function(n){var t=this,o=l('<ul class="qf-picker-buttons" />').appendTo(this.$content);l.each(n,function(n,s){var r,c;t.isConfigurable?t.form.getFieldById(s.id).done(function(e){if(e&&e.hasVisibilityFeature()){var n=l("<li />").appendTo(o),s=new i({field:e});s.render().appendTo(n),t.buttons.push(s)}}):(c=new e(s),r=l("<li />").appendTo(o),c.render().appendTo(r))}),0===o.children().length&&o.addClass("qf-no-fields").append("<li><em>"+"No fields can be configured for this tab"+"</em></li>")},renderContents:function(){var i=this,e=l.Deferred();return this.form.model.getSortedTabs().done(function(n){1===n.length?i.renderButtons(n[0].fields):l.each(n,function(e,n){n.fields.length>0&&(l("<h4><span></span></h4>").appendTo(i.$content).find("span").text(n.label),i.renderButtons(n.fields))}),e.resolveWith(i,[i.$element])}),e.promise()},show:function(){this.inlineDialog.show()},render:function(){return this.$element=l(n.fieldPicker({isConfigurable:this.isConfigurable})),this.$content=this.$element.find(".qf-picker-content"),this._assignEvents("switchToCustom",this.$element.find(".qf-configurable")),this._assignEvents("switchToAll",this.$element.find(".qf-unconfigurable")),this.renderContents()},_events:{switchToCustom:{click:function(i){this.switchToCustom(),i.preventDefault()}},switchToAll:{click:function(i){this.switchToAll(),i.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker",null,require("quick-edit/form/field-picker"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/container/container.js' */
define("quick-edit/form/container",["quick-edit/form/field-picker","quick-edit/form/import-issues","quick-edit/util/jira","quick-edit/util/control","quick-edit/form/helper/helper","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/navigator","jira/issue","jira/issuenavigator/issue-navigator","jquery","wrm/require","jira/analytics/web-client"],function(e,i,t,n,r,o,s,c,a,l,u,d,m){"use strict";return n.extend({init:function(i){this.$element=u("<div />").addClass("qf-container"),this.options=t.makePropertyFunc(i),this.fieldPicker=new e,this.successData=[],this.helper=new r(this);var n=this;d(["wr!com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api"]).then(function(){n.metrics=require("internal/browser-metrics")})},decorateRenderers:function(){var e=this,t=e.globalEventNamespaces&&e.globalEventNamespaces.length>0?e.globalEventNamespaces[0]:null;this.fieldPicker.decorated||(this.fieldPicker.bind("switchedToAll",function(){e.unconfigurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"switchAllButton",action:"clicked",source:t,name:"quickeditform.switched.all",allFieldsShown:!0,instance:e})}),this.fieldPicker.bind("switchedToCustom",function(){e.configurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"switchCustomButton",action:"clicked",source:t,name:"quickeditform.switched.custom",allFieldsShown:!1,instance:e})}),this.fieldPicker.decorated=!0),this.configurableForm.decorated||(this.configurableForm.bind("rendered",function(t,n){e.currentView=e.configurableForm,e.fieldPicker.switchToCustom(!0),e.fieldPicker.setForm(e.configurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.configurableForm),i.bindImportIssueUrl(),e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!0),e.triggerEvent("configurableFormRendered")}),this.configurableForm.bind("submitted",function(i,n){e.successData.push(n),e.triggerEvent("configurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"submit",action:"clicked",source:t,name:"quickeditform.submit.success",allFieldsShown:!1,instance:e})}),this.configurableForm.bind("issueCreated",function(i,n){e.triggerEvent("issueCreated",n),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"}),m.sendTrackEvent({source:t,attributes:{triggerPointKey:e.triggerPointKey},action:"created",actionSubject:"legacyCreateModalIssue"})}),this.configurableForm.decorated=!0),this.unconfigurableForm.decorated||(this.unconfigurableForm.bind("rendered",function(t,n){e.fieldPicker.switchToAll(!0),e.fieldPicker.setForm(e.unconfigurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.unconfigurableForm),i.bindImportIssueUrl(),e.currentView=e.unconfigurableForm,e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!1),e.triggerEvent("unconfigurableFormRendered")}),this.unconfigurableForm.bind("submitted",function(i,n){e.successData.push(n),e.triggerEvent("unconfigurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"submit",action:"clicked",source:t,name:"quickeditform.submit.success",allFieldsShown:!0,instance:e})}),this.unconfigurableForm.bind("issueCreated",function(i,n){e.triggerEvent("issueCreated",n),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"}),m.sendTrackEvent({source:t,attributes:{triggerPointKey:e.triggerPointKey},action:"created",actionSubject:"legacyCreateModalIssue"})}),this.unconfigurableForm.decorated=!0)},applyGlobalDecorator:function(e){function i(){t.currentView.setInitialFocus&&t.currentView.setInitialFocus()}var t=this;e.detach(),this.$element.html(e),this.triggerEvent("contentRefreshed",[this.$element]),c.isIE()?window.setTimeout(i,0):i()},asDialog:function(e){e=u.extend(!0,{},e);var i,t=this,n=!!e.modeless;return t.triggerPointKey=e.triggerPointKey||"genericFunctionCreateIssue",this.dialog=i=new o({id:e.id,trigger:e.trigger,windowTitle:void 0!==e.windowTitle?e.windowTitle:!n,width:n?s.WIDTH_PRESETS.medium:s.WIDTH_PRESETS.large,defineResources:function(){this.requireContext("jira.create.issue")},content:function(e){t.render().done(function(){t.triggerEvent("dialogRendered"),e(t.$element)}),t.triggerEvent("dialogShown")},submitHandler:function(i,n){i.preventDefault(),t.metrics&&t.metrics.start({isInitial:!1,key:"jira.create.issue.dialog.submit"}),t.currentView.submit(e.headers).then(n,n)},stacked:!0,modeless:n,shouldLoadHeritageFormDialogContext:!!e.shouldLoadHeritageFormDialogContext}),"edit-issue-dialog"===e.id&&u(this.dialog).on("beforeShow",function(e){a.getIssueKey()||l.isRowSelected()||e.preventDefault()}),this.dialog._focusFirstField=function(){o.prototype._focusFirstField.apply(this,["div.content :input:visible:first"])},this.bind("initialized",function(){this.unconfigurableForm.bind("sessionComplete",function(){i.hide()}),this.configurableForm.bind("sessionComplete",function(){i.hide()})}).bind("contentRefreshed",function(){i.notifyOfNewContent()}),i.bind("Dialog.hide",function(){t.successData.length&&(t.triggerEvent("sessionComplete",[t.successData],!0),t.successData=[])}),t.$element.ajaxStart(function(){i.showFooterLoadingIndicator()}).ajaxStop(function(){i.hideFooterLoadingIndicator()}),i.getQuickForm=function(){return t},i.dirtyFormWarning(),i},lazyInit:function(){var e=this,i=this.options.call(this);this.model=i.model,this.errorHandler=i.errorHandler,this.globalEventNamespaces=i.globalEventNamespaces,this.configurableForm=i.configurableForm,this.unconfigurableForm=i.unconfigurableForm,this.sessionComplete=i.sessionComplete,this.model.clearRetainedFields(),this.configurableForm.invalidateFieldsCache(),this.model.bind("serverError",function(i,t){e.$element.html(e.errorHandler.render(t)),e.triggerEvent("contentRefreshed",[this.$element])}),this.triggerEvent("initialized"),this.decorateRenderers()},render:function(){var e=this,i=u.Deferred();return this.lazyInit(),e.model.getUseConfigurableForm().done(function(t){t===!0?e.configurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element]),e.$element.append(n)}):e.unconfigurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element,n]),e.$element.append(n)})}).fail(function(){i.resolveWith(e,[e.$element])}),i.promise()}})}),AJS.namespace("JIRA.Forms.Container",null,require("quick-edit/form/container"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/error/error.js' */
define("quick-edit/form/error",["quick-edit/util/control","quick-edit/templates/form","jira/ajs/ajax/smart-ajax"],function(r,e,t){"use strict";return r.extend({getErrorMessageFromSmartAjax:function(r){var a,s;if(r.hasData&&401!==r.status)try{s=JSON.parse(r.data),a=s.errorMessages&&s.errorMessages.length>0?e.errorMessage({message:s.errorMessages[0]}):t.buildDialogErrorContent(r,!0).html()}catch(e){a=t.buildDialogErrorContent(r,!0).html()}else a=t.buildDialogErrorContent(r,!0).html();return a},render:function(r){var e=this.getErrorMessageFromSmartAjax(r);return this._render(e)}})}),AJS.namespace("JIRA.Forms.Error",null,require("quick-edit/form/error"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/error/create-issue.js' */
define("quick-edit/form/error/create-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,t){"use strict";return e.extend({_render:function(e){return t(r.createIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.CreateIssueError",null,require("quick-edit/form/error/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/error/edit-issue.js' */
define("quick-edit/form/error/edit-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,i){"use strict";return e.extend({_render:function(e){return i(r.editIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.EditIssueError",null,require("quick-edit/form/error/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/unconfigurable/create-issue.js' */
define("quick-edit/form/unconfigurable-create-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery","quick-edit/form/forge"],function(e,t,i,r,s,o,n,l){"use strict";return e.extend({init:function(e){this._serialization={},this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.helper=new t(this),this.title=e.title,this.action=o()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=n("<div class='qf-unconfigurable-form' />")},handleSubmitSuccess:function(e){this.helper.handleSubmitSuccess(e)},handleSubmitError:function(t){e.prototype.handleSubmitError.call(this,t),this.helper.sendExperienceEventOnSubmitError(t)},_render:function(){var e=n.Deferred(),t=this;return this.getFieldsHtml().done(function(o){t.model.getIssueSetupFields().done(function(n){var l=i.createIssueForm({issueSetupFields:n,fieldsHtml:o,parentIssueId:t.model.getParentIssueId(),atlToken:t.model.getAtlToken(),formToken:t.model.getFormToken(),title:t.title,multipleMode:t.model.isInMultipleMode(),showFieldConfigurationToolBar:!s.isAnonymous(),modifierKey:r.getModifierKey()}),u=r.extractScripts(l);t.$element.empty().append(u.html),t.helper.restoreFormDirtyStatus(),t.helper.decorate(),t.helper.decorateFields(),e.resolveWith(t,[t.$element,u.scripts])}),t.model.getFields().done(function(e){var i=e.filter(function(e){return l.isForgeField(e)});i.length>0&&l.renderForgeCustomFields(t,i)})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableCreateIssueForm",null,require("quick-edit/form/unconfigurable-create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/unconfigurable/edit-issue.js' */
define("quick-edit/form/unconfigurable-edit-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,s,n,r){"use strict";return e.extend({init:function(e){this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.issueId=e.issueId,this.title=e.title,this.action=n()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=r("<div class='qf-unconfigurable-form' />")},getFieldsHtml:function(){var e=this,t=r.Deferred(),s={};return this.model.getUnconfigurableTabs().done(function(n){1===n.length?s.fields=n[0].fields:(s.tabs=n,s.hasTabs=!0),t.resolveWith(e,[i.issueFields(s)])}),t.promise()},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},_render:function(){var e=r.Deferred(),n=this;return this.getFieldsHtml().done(function(r){var o={fieldsHtml:r,title:n.title,issueId:n.issueId,atlToken:n.model.getAtlToken(),formToken:n.model.getFormToken(),pid:n.model.getPid(),modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()};this.model.getCommentField().then(function(s){var r,l;o.commentField=s,r=i.editIssueForm(o),l=t.extractScripts(r),n.$element.html(l.html),e.resolveWith(n,[n.$element,l.scripts])},function(){var s=i.editIssueForm(o),r=t.extractScripts(s);n.$element.html(r.html),e.resolveWith(n,[n.$element,r.scripts])})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableEditIssueForm",null,require("quick-edit/form/unconfigurable-edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/factory/create-issue.js' */
define("quick-edit/form/factory/create-issue",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue"],function(e,r,a,t,s){"use strict";function i(e,r){if(e&&r)for(var a=0;a<e.length;a++)r.markFieldAsDirty(e[a])}return function(o){return o=o||{},new e(function(){o.globalEventNamespaces=o.globalEventNamespaces||["QuickCreateIssue"];var e="Create issue",n=new s({projectId:o.pid,issueType:o.issueType,itsmCategory:o.itsmCategory,fields:o.fields});i(o.customFieldsToPreserveOnFormRecreation,n);var c=new r({model:n,title:e,globalEventNamespaces:o.globalEventNamespaces}),u=new a({model:n,title:e,globalEventNamespaces:o.globalEventNamespaces});return{globalEventNamespaces:o.globalEventNamespaces,model:n,errorHandler:new t,configurableForm:c,unconfigurableForm:u}})}}),AJS.namespace("JIRA.Forms.createCreateIssueForm",null,require("quick-edit/form/factory/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/factory/create-subtask.js' */
define("quick-edit/form/factory/create-subtask",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/util/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,t,s,a,r,i,u,n){"use strict";function c(e){return e.parentIssueId||u.getIssueId()||n.getSelectedIssueId()}return function(u){return u=u||{},new e(function(){u.globalEventNamespaces=u.globalEventNamespaces||["QuickCreateSubtask"];var e=c(u),n=i.getIssueActionTitle("Create Subtask"),o=new a({parentIssueId:e,projectId:u.pid,issueType:u.issueType,fields:u.fields}),l=new t({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces}),d=new r({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces});return{globalEventNamespaces:u.globalEventNamespaces,model:o,errorHandler:new s,configurableForm:l,unconfigurableForm:d}})}}),AJS.namespace("JIRA.Forms.createSubtaskForm",null,require("quick-edit/form/factory/create-subtask"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/factory/edit-issue.js' */
define("quick-edit/form/factory/edit-issue",["quick-edit/form/container","quick-edit/form/configurable/edit-issue","quick-edit/form/error/edit-issue","quick-edit/util/dialog","quick-edit/form/model/factory/edit-issue","quick-edit/form/unconfigurable-edit-issue","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(e,i,t,s,u,r,n,o,d){"use strict";function a(e){var i=s.getAttrFromActiveTrigger("data-issueId");return d.isFunction(e.issueId)?e.issueId(e):e.issueId?e.issueId:i?i:n.getIssueId()||o.getSelectedIssueId()}function c(){var e="Edit issue";return s.shouldShowIssueKeyInTitle()?s.getIssueActionTitle(e):e}return function(s){return s=s||{},new e(function(){var e=a(s),n=c(),o=u(e),d=new i({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]}),l=new r({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]});return{globalEventNamespaces:["QuickEdit"],model:o,errorHandler:new t,configurableForm:d,unconfigurableForm:l}})}}),AJS.namespace("JIRA.Forms.createEditIssueForm",null,require("quick-edit/form/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/AttachFilesDropZone.js' */
define("dndattachment/dropzones/AttachFilesDropZone",["dndattachment/dropzones/FormDropZone","jquery"],function(e,n){var t=e.extend({eventGroup:"attachfiledropzone",init:function(){this._super.apply(this,arguments),this.bind("progressBarInserted",function(e,t){var r=new n.Deferred;this.queueTask(r),t.result.done(r.resolve.bind(r)),t.bind("onBeforeDestroy",function(){r.resolve()})}.bind(this))},checkMarkDirty:function(){this.pendingQueue.length<=1&&this.markDirty(!1)}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/CreateIssueDropZone.js' */
define("dndattachment/dropzones/CreateIssueDropZone",["jquery","dndattachment/dropzones/FormDropZone"],function(e,n){var r=n.extend({eventGroup:"createissuedropzone",progressBarType:"dndattachment/progressbars/ProjectUploadProgressBar",getContainerNode:function(){return e(this.$node.parents(".jira-dialog-content")[0]||this.$node.parents("form#issue-create").parents(".aui-page-panel-content")[0])},handleNewProgressBar:function(e){this._super.apply(this,arguments),e.bind("onDestroy onFinished",_.bind(function(){if(!this.filesStillUploading()){var e={};e[this.$inputNode.attr("name")]="",JIRA.applyErrorsToForm(this.$formNode,e)}},this))}});return r});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/ProjectUploadProgressBar.js' */
define("dndattachment/progressbars/ProjectUploadProgressBar",["jquery","dndattachment/progressbars/UploadProgressBar"],function(e,a){return a.extend({getProjectId:function(){return this.$node.parents("form").find("*[name=pid]").val()},getUploadParams:function(e){var t=a.prototype.getUploadParams.apply(this,arguments);return this.getProjectId()&&(t.projectId=this.getProjectId()),t},loadThumbnail:function(a){if(this.isImageType())return this._super.apply(this,arguments);var t=this.getThumbnailNode();t.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui");var r="aui-iconfont-devtools-file",s="File";"object"==typeof a&&(r=JIRA.Templates.ViewIssue.matchFileClass({mimetype:a.type}),s=JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:a.type}));var o=e('<span class="aui-icon aui-icon-large"/>').addClass(r).attr("title",s);return o.appendTo(t)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/AttachFilesDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/AttachFilesDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/CreateIssueDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/CreateIssueDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'+(e.description?'<div class="description">'+soy.$$escapeHtml(e.description)+"</div>":"")};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:drag-and-drop-attachment-javascript-init', location = 'jira-dnd-attachment-module/js/initIssueDropZone.js' */
require(["dndattachment/Parser","jquery","dndattachment/dropzones/IssueDropZone","dndattachment/upload/handler","dndattachment/upload/default/executor","dndattachment/aui","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,n,a,i,o,r,d,s){function u(n,i){var o=n.find(".field-group.file-input-list");if(0!=o.size()&&!(o.find('*[duiType*="'+i+'"]').length>0)){var d=o.find("input[name=filetoconvert]:checked").map(function(t,n){return r.getAttachment(n.value,e(n).siblings("label").text())}).toArray(),u=o.find(".description:last-child").html();o.empty();var p=e(JIRA.Templates.DnDAttachmentPlugin[i]({uploadLimit:s.format(m),jiraAttachmentSize:m,description:u}));t.parse(p.appendTo(o)).then(function(t){null!=t&&(t.loadAttachments(d),a.setCurrentDropZone(t))})}}function p(t,n){var i=function(){u(t.$popupContent,n)};t.$popup&&t.$popup.is(":visible")?i():t.onContentReady(i),e(t).bind("Dialog.hide",function(){a.disconnectCurrentDropZone()})}function c(n){var i=n&&"attachmentmodule"==n.attr("id")&&e(".mod-content:not(.issue-drop-zone)",n);if(i&&i.size()>0){if(0==n.find("#add-attachments-link").length)return;i.addClass("issue-drop-zone");var o=e(JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone({uploadLimit:s.format(m),jiraAttachmentSize:m}));t.parse(o.prependTo(i)).then(function(t){l&&l.disconnectContainer(),l=t,a.setAttachmentDropZone(t)})}}if(n.prototype.isSupportedBrowser()){var l,m=d.getWRM("upload-limit"),h=function(){JIRA.Dialogs.attachFile&&p(JIRA.Dialogs.attachFile,"AttachFilesDropZone");var t=["create-issue-dialog","create-subtask-dialog","edit-issue-dialog"],n=function(e,n,a){t.includes(n.attr("id"))&&p(a,"CreateIssueDropZone")};e(o).on("Dialog.show",n),JIRA.Dialog.current&&n(null,JIRA.Dialog.current.$popup,JIRA.Dialog.current),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(t,e,n){u(e,"CreateIssueDropZone"),c(e)});var r=e("form#issue-create, form#issue-edit");r.size()>0&&u(r,"CreateIssueDropZone"),a.initialize(),a.registerExecutor(i),c(e("#attachmentmodule"))};e.isReady?h():o.$(h),e.event.props?e.event.props.push("dataTransfer"):e.event.addProp("dataTransfer")}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/IssueEditorWrapper.js' */
define("jira-agile/rapid/ui/detail/inlineedit/issue-editor-wrapper",["underscore","jquery","require"],function(o,r,e){"use strict";var i,t="agileIssueEditorEventNamespace",n=e("jira/util/data/meta"),s=e("jira/components/issueeditor"),c=e("jira/components/issueviewer/legacy/issuefieldutil"),a=e("jira/components/issueviewer/linkscapturer"),g=e("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper"),l=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),f=e("jira/util/events/types"),I=(e("jira/featureflags/feature-manager"),e("jira-agile/features/feature-flags"),null),d=null,u=null,p=null,v=null,m=null,E=null,h=null,k=null,S={init:function(e){var t;i=e.$detailContainer,e.getRapidViewIdCallback,u=e.loadIssueDetailCallback,p=e.getInlineEditableFieldsCallback,v=e.getIssueIdCallback,m=e.getIssueKeyCallback,I||((I=new s).fieldsLoader._getFieldsData=F,I.viewIssueData.fetch=y,I.saveInProgressManager.saveIssue=C,I.issueController.show=function(){},I.canDismissComment=function(){return!0},t={},r(GH).unbind(w("QuickEdit.fieldChange")).bind(w("QuickEdit.fieldChange"),function(e,i){t[i.fieldId]=i.fieldChangeData}),I.on("saveSuccess",function(e){var i=e.savedFieldIds[0];u(i,l.getReloadReasonForChangedField(i)),r(GH).trigger("issueUpdated",{issueId:e.issueId,source:"detailView",fieldId:i,fieldChanges:t});i=GH.RapidViewConfig.currentData.data.estimationStatistic.fieldId===i?"estimateStatisticField":i;AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.inlineedit.submit",data:{changedField:i}})})),d||((d=new a).on("refineViewer",function(e){e.preventDefault(),I.once("loadComplete",function(e,i){i.issueId===v()&&u(null,l.ATTACHMENTS_CHANGED)}),k=e.query,I.updateIssueWithQuery(e.query)}),d.capture(i))},loadIssueToEditor:function(){n.set("server-view-issue-is-editable",!0),e("jira-agile/rapid/deferred-resources-loader").handleDeferredResourceImport(!I,function(){return I.loadIssue({id:v(),key:m()})})},triggerFieldUpdate:function(i,e){var t=I.editIssueController,n=o.find(t.getFields().models,function(e){return e.id===i});n&&(t.getIssueEventBus().triggerPanelRendered(n.id,e),n.triggerUpdateRequired())},hasEditsInProgress:function(){return 0<this.getEditsInProgress().length},getEditsInProgress:function(){var e=I.editIssueController;return o.union(e.getDirtyEditsInProgress(),e.getEditsInProgress())},destroy:function(){m=v=p=u=k=h=E=null,function(){d&&d.destroy();d=null}(),function(){I&&I.close();r(GH).unbind(w("QuickEdit.fieldChange")),I=null}()},getWrappedIssueEditor:function(){return I},_getFieldsData:F,getIssueAttachmentQuery:function(){return k}};function y(e,i){var i=function(e){if(!e.issueEntity||!h)return!0;e=e.issueEntity;return E!==e.key||!o.isEqual(k||null,e.viewIssueQuery||null)}(i)?((t={fields:[]}).issue={id:v(),key:m(),isEditable:!0,operations:{linkGroups:[]}},t.panels={leftPanels:[],rightPanels:[],infoPanels:[]},P(t),t):h,t=new r.Deferred;return t.resolve(i),t.promise()}function C(r,s,a,e,i){var t=o.extend(i||{},{dataFilter:function(e){k=null;e=P(e=JSON.parse(e));return JSON.stringify(e)}}),n=a[0],i=n;g.isTimeTrackingField(n)&&(g.specifyWhichFieldToSave(n,e,S.getEditsInProgress()),i=g.getServerFieldId());var l,d=I.saveInProgressManager;d.triggerBeforeSaving();var i=o.extend(e,{issueId:r,atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:[i],skipScreenCheck:!0,rapidViewId:GH.DetailsView.rapidViewId}),t=o.extend({type:"POST",url:AJS.contextPath()+"/secure/DetailsViewAjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},error:function(e){d._handleSaveError(r,s,a,e)},success:function(e,i,t,n){"string"==typeof(l=n.data)?d._handleHtmlResponse(r,s,a,l):(c.transformFieldHtml(l),g.isTimeTrackingField(a[0])&&(l.fields=g.removeOtherTrackingField(a[0],l.fields)),d.triggerSaveSuccess(r,s,a,l)),function(e,i){var t,n=void 0;GH.RapidBoard.State.isWorkMode()?n=GH.GridDataController.getModel().data.issues[e]:GH.RapidBoard.State.isPlanMode()&&(n=GH.BacklogModel.getIssueData(e));n&&(t=[],i.forEach(function(e){t.push({name:e})}),GH.RapidBoard.sendIssueUpdatedTrackEvent(n,t))}(s,a)},complete:function(){d.removeSaveInProgress(u),JIRA.trigger(f.INLINE_EDIT_SAVE_COMPLETE)},data:i},t),u=JIRA.SmartAjax.makeRequest(t);d.addSaveInProgress(u),d.triggerSavingStarted(r,a,i)}function F(i,t){var n=new r.Deferred;return setTimeout(function(){var e;!I||(e=p())&&e.done(function(e){n.resolve(function(e,i,t){e=c.transformFieldHtml({fields:e});return{issueId:i,issueKey:t,fields:e.fields}}(e,i,t))})},0),n.promise()}function P(e){return e&&e.panels&&(e.panels.infoPanels=[],e.panels.leftPanels=[],e.panels.rightPanels=[]),E=e.issue.key,h=e}function w(e){return e+"."+t}return S});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/DetailViewInlineEditor.js' */
define("jira-agile/rapid/ui/detail/inlineedit/issue-detail-view-inline-editor",["require"],function(i){"use strict";var t="agileDetailViewInlineEditableEventNamespace",n=i("underscore"),a=i("jquery"),r=i("jira/util/events"),s=i("jira-agile/rapid/ui/detail/inlineedit/dialogsoverrider"),e=i("jira/components/issueviewer/legacy/issuefieldutil"),l=i("jira-agile/rapid/ui/detail/inlineedit/issue-editor-wrapper"),o=i("jira/util/events/reasons"),d=i("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper"),u=i("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),c=["attachment_thumbnails","file_attachments"],g=i("jira/util/events/types"),f=i("wrm/require"),E=null,m=null,p=null;function N(){E.off(w("click")).on(w("click"),"#commentmodule .issue-activity-sort-link",function(e){e.preventDefault();e=a(e.currentTarget).attr("href");a.get(e).done(function(){m(null,u.COMMENTS_CHANGED)})}),JIRA.bind(g.NEW_CONTENT_ADDED,function(e,i,t){t===JIRA.CONTENT_ADDED_REASON.panelRefreshed&&"commentmodule"===i.attr("id")&&i.find(".issue-activity-sort-link").off("click")}),r.unbind(w(g.UNLOCK_PANEL_REFRESHING)),r.bind(w(g.UNLOCK_PANEL_REFRESHING),n.throttle(function(e,i){"addcommentmodule"===i&&m(null,u.COMMENTS_CHANGED)},1e3,{trailing:!1}))}function I(){E.off(w("focus")).on(w("focus"),".ghx-estimate input",function(){var e,i=E.find(".ghx-estimate"),t=i.find(".ghx-estimate-scope-warning");"ACTIVE"===p()&&0===t.length&&((t=a('<div class="ghx-estimate-scope-warning"></div>')).text("Sprint scope will be affected by this action."),(e=0===(e=i.find(".ghx-editing")).length?i.find(".editable-field.active .field-group"):e).append(t))})}function D(){var e=i("jira/components/issueeditor/eventtypes"),a=i("jira/components/issueeditor/inlineeditutils");r.bind(e.INLINE_EDIT_STARTED,function(e,i,t,n){d.isTimeTrackingField(i)&&(n.find(".error").length||a.BlurTriggers.Default(i,d.getFieldFromContainer(i,n)))})}function T(){r.unbind(w(g.NEW_CONTENT_ADDED)),r.bind(w(g.NEW_CONTENT_ADDED),function(e,i,t){t===JIRA.CONTENT_ADDED_REASON.panelRefreshed&&0<=c.indexOf(i.attr("id"))&&n.any(i.find(".attachment-content"),function(e){return n.isNull(a(e).data("issue-id"))})&&(GH.RapidBoard.State.isPlanMode()||GH.windowActivityNotifier.trigger("blur"),m(null,u.ATTACHMENTS_CHANGED))})}function h(){f(["wrc!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"],function(){JIRA.WorkflowDesigner.browserIsSupported()&&JIRA.WorkflowDesigner.ViewIssue.replaceViewWorkflowLink(a(document))}),A()}function A(){JIRA.trigger(g.NEW_CONTENT_ADDED,[a("#attachmentmodule"),o.panelRefreshed])}function _(e){e.find("#commentmodule .activitymodule-link.issue-comment-action").attr("target","_blank")}function w(e){return e+"."+t}return{init:function(e){l.init(e),E=e.$detailContainer,e.getRapidViewIdCallback,m=e.loadIssueDetailCallback,e.getIssueIdCallback,e.getIssueKeyCallback,p=e.getIssueSprintStatusCallback,s.init(m),N(),I(),D(),T(),r.unbind(w(g.ISSUE_REFRESHED)),r.bind(w(g.ISSUE_REFRESHED),n.debounce(h,0))},loadIssueToEditor:l.loadIssueToEditor,triggerFieldUpdate:l.triggerFieldUpdate,getFieldSelector:e.getFieldSelector,hasEditsInProgress:l.hasEditsInProgress,getEditsInProgress:l.getEditsInProgress,getIssueAttachmentQuery:l.getIssueAttachmentQuery,_issueEditorWrapper:l,fixUpDetailView:_,destroy:function(){p=m=null,s.destroy(),l.destroy()},registerListenersForTab:function(e,i){switch(e){case"comment":_(i),N();break;case"header":I(),D();break;case"attachment":T(),A();break;case"details":l.loadIssueToEditor()}}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/DialogsOverrider.js' */
define("jira-agile/rapid/ui/detail/inlineedit/dialogsoverrider",["require","jquery","jira/util/events","jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"],function(a,t,i,o){"use strict";var l={DIALOG_OVERRIDE_LIST:["delete-attachment-dialog","delete-issue-link-dialog","edit-comment","delete-comment-dialog","assign-to-me-link-handler","assign-dialog","link-issue-dialog","attach-screenshot-dialog"]},e=null;return l.init=function(d){"function"!=typeof e&&(e=function(i,e,n){var t;AJS.dim(),n&&(t=n.options.id,-1!==l.DIALOG_OVERRIDE_LIST.indexOf(t))&&(n._performRedirect=function(){this.redirected=!1},n.options.onDialogFinished=function(){var i=a("jira-agile/rapid/ui/detail/details-model");d(null,o.REASON_FOR_DIALOG[n.options.id]),AJS.$(GH).trigger("issueUpdated",{issueId:i.viewData.id,source:"detailView"}),n.hide()})},i.bind("Dialog.show",e),i.bind("Dialog.hide",function(i,e,n){t(".aui-blanket").remove()}))},l.destroy=function(){i.unbind("Dialog.show",e),e=null},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/TimeTrackingFieldsHelper.js' */
define("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper",["require"],function(e){"use strict";var a,c=e("underscore"),l=e("jquery"),o=e("jira/components/issueviewer/legacy/issuefieldutil"),i="timeoriginalestimate",t="timeestimate",u="timetracking_targetsubfield",n=[i,t],r="timetracking_originalestimate",d="timetracking_remainingestimate",s={_visibleForTesting:{ORIGINAL_TIME_ESTIMATE:i,REMAINING_TIME_ESTIMATE:t,TARGET_FIELD_PARAM_NAME:u,ORIGINAL_ESTIMATE_FORM_PARAM_ID:r,REMAINING_ESTIMATE_FORM_PARAM_ID:d}};function g(e){return e===t?i:e===i?t:void 0}function T(e){return e===t?d:e===i?r:void 0}return s.getFieldFromContainer=function(e,i){if(this.isTimeTrackingField(e))return i.find("#"+T(e))},s.specifyWhichFieldToSave=function(e,i,t){var n=l(o.getFieldSelector(e)),r=l(o.getFieldSelector(g(e)));(0!==r.length?0!==r.find(".ghx-fa").length:(n=this.getFieldFromContainer(g(e),n),c.isEmpty(n.val())))&&!c.contains(t,g(e))?delete i[T(g(e))]:(i[u]=T(e),a=!0)},s.removeOtherTrackingField=function(i,e){return a?c.reject(e,function(e){return s.isTimeTrackingField(i)&&e.id===g(i)}):e},s.getServerFieldId=function(){return"timetracking"},s.isTimeTrackingField=function(e){return c.contains(n,e)},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/EditableDetailsViewReloader.js' */
define("jira-agile/rapid/ui/detail/inlineedit/details-view-reloader",["jquery","underscore","jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason","jira-agile/rapid/ui/detail/details-model","jira-agile/rapid/ui/detail/details-field-renderer","jira/analytics/web-client"],function(r,s,e,o,c,l){"use strict";var u=GH.DetailsView,t=["details","header","description"],E={};function D(e,t,a){var i,d,n=o.viewData;n&&("comment"===t&&"COMMENT"===e.defaultTabs[0].tabId&&(i=e.defaultTabs[0],!(n=(d=n).tabs.defaultTabs.find(function(e){return"COMMENT"===e.tabId}))||i.totalComments<=n.totalComments||(d=r(i.sections[0].html).find(".activity-comment"),n=/comment\-(\d*)$/.exec(d[d.length-1].id)[1],d=/comment\-(\d*)$/.exec(d[0].id)[1],n=Math.max(d,n),i=r(i.sections[1].html).find("[name='add-comment']")[0].href,n={objectType:"issue",objectId:/\?.*id=(\d*)$/.exec(i)[1],containerType:"project",attributes:{projectType:"software",boardId:GH.DetailsView.rapidViewId,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()},action:"created",actionSubject:"comment",actionSubjectId:n,source:GH.RapidBoard.State.isPlanMode()?"backlogScreen":"boardScreen"},l.sendTrackEvent(n))),o.replaceUpdatedTabs(e),a&&u.hasEditsInProgress()?u.renderDetailsSingleField(a):(a=u.getContainer(),"header"===t?c.renderDetailsHeaderFields(o.viewData,a,u.opts):(e={tabs:{defaultTabs:e.defaultTabs},trackingStatisticFieldId:o.viewData.trackingStatisticFieldId},c.updateTabsContent(e,a),u.registerListenersForTab(t,a)),GH.DetailsViewScrollTracker.afterDetailsViewLoaded({issueId:o.viewData.id})))}return E[e.HEADER_FIELD_CHANGED]=t,E[e.DETAILS_FIELD_CHANGED]=t,E[e.LINKED_ISSUES_CHANGED]=t,E[e.LINKED_ISSUE_CREATED_AND_COMMENTED]=s.union(t,["comment"]),E[e.DESCRIPTION_CHANGED]=t,E[e.ATTACHMENTS_CHANGED]=["attachment"],E[e.COMMENTS_CHANGED]=["comment"],E[e.SUBTASKS_CHANGED]=s.union(["sub_tasks"],t),E[e.VERSION_PANEL_CHANGED]=t,E[e.EPIC_PANEL_CHANGED]=t,E[e.ISSUE_ASSIGNED_AND_COMMENTED]=s.union(t,["comment"]),{reload:function(e,a){var i,d,n,e=E[e];e&&(i={},d=void 0,e.forEach(function(e){var t=function(e){var t=new AJS.$.Deferred,a={rapidViewId:u.rapidViewId,issueIdOrKey:u.selectedIssueKey,loadSubtasks:u.opts.showSubtaskTab};"attachment"!==e||s.isUndefined(u.getAttachmentViewQuery)||(a=s.extend(a,u.getAttachmentViewQuery()));return GH.Ajax.get({url:"/xboard/issue/details/"+e,data:a},"detailView/"+e).done(function(e){t.resolveWith(null,[e])}),t.promise()}(e);"details"!==e?i[e]=t:d=t}),n=[],Object.keys(i).forEach(function(t){var e=i[t];n.push(e.done(function(e){return D(e,t,a)}))}),d&&r.when.apply(r,n).done(function(){d.done(function(e){return D(e,"details",a)})}))}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/EditableDetailsViewReloadReason.js' */
define("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason",["require"],function(E){"use strict";var D=E("underscore"),_=E("jira-agile/rapid/ui/detail/details-model"),A={HEADER_FIELD_CHANGED:"HEADER_FIELD_CHANGED",DETAILS_FIELD_CHANGED:"DETAILS_FIELD_CHANGED",DESCRIPTION_CHANGED:"DESCRIPTION_CHANGED",LINKED_ISSUES_CHANGED:"LINKED_ISSUES_CHANGED",LINKED_ISSUE_CREATED_AND_COMMENTED:"LINKED_ISSUE_CREATED_AND_COMMENTED",ATTACHMENTS_CHANGED:"ATTACHMENTS_CHANGED",COMMENTS_CHANGED:"COMMENTS_CHANGED",SUBTASKS_CHANGED:"SUBTASKS_CHANGED",VERSION_PANEL_CHANGED:"VERSION_PANEL_CHANGED",EPIC_PANEL_CHANGED:"EPIC_PANEL_CHANGED",ISSUE_ASSIGNED_AND_COMMENTED:"ISSUE_ASSIGNED_AND_COMMENTED"},N={description:A.DESCRIPTION_CHANGED,summary:A.HEADER_FIELD_CHANGED,timeestimate:A.HEADER_FIELD_CHANGED,timeoriginalestimate:A.HEADER_FIELD_CHANGED};return D.extend(A,{REASON_FOR_DIALOG:{"delete-attachment-dialog":A.ATTACHMENTS_CHANGED,"attach-screenshot-dialog":A.ATTACHMENTS_CHANGED,"delete-issue-link-dialog":A.LINKED_ISSUES_CHANGED,"edit-comment":A.COMMENTS_CHANGED,"delete-comment-dialog":A.COMMENTS_CHANGED,"link-issue-dialog":A.LINKED_ISSUE_CREATED_AND_COMMENTED,"delete-issue-dialog":A.SUBTASKS_CHANGED,"assign-to-me-link-handler":A.DETAILS_FIELD_CHANGED,"assign-dialog":A.ISSUE_ASSIGNED_AND_COMMENTED},getReloadReasonForChangedField:function(E){var D=N[E];return D||(_.isFieldInSection(E,"estimate")||_.isFieldInSection(E,"tracking")?A.HEADER_FIELD_CHANGED:A.DETAILS_FIELD_CHANGED)}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-details-field-resources', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsModel.js' */
define("jira-agile/rapid/ui/detail/details-model",["require"],function(e){"use strict";var d=e("underscore"),l=GH.RapidBoard,n=(e("jira/featureflags/feature-manager"),e("jira-agile/features/feature-flags"),/\?id=\d+/),u={};function s(e,t){return d.find(e.tabs.defaultTabs,function(e){return e.tabId.toLowerCase()===t.toLowerCase()})}return u.TAB_SECTIONS={details:["details","people","dates"],description:["description"]},u.FIELD_SECTION_PRESETS={assignee:"people",created:"dates",components:"details",description:"description",fixVersions:"details",issuekey:"header",labels:"details",reporter:"people",summary:"header",status:"details",updated:"dates",versions:"details",votes:"people"},u.fieldErrorSelectors={},u.fieldCategories={timetracking:["timeestimate","timeoriginalestimate","aggregatetimeestimate","aggregatetimeestimate_subtasks"]},u.issueIdToKeyCache={},u.getIssueKeyForId=function(e){return this.issueIdToKeyCache[e]||!1},u.viewData=null,u.clearViewData=function(){this.viewData=null},u.setViewData=function(e){this.issueIdToKeyCache[e.id]=e.key,this.processFields(e),this.applyOperationUrlPatches(e),this.filterIssueOperations(e),this.viewData=e},u.getViewField=function(t){return s(this.viewData,"HEADER").fields.find(function(e){return e.id===t})},u.isFieldInSection=function(t,e){e=this.fieldSections[e];return!d.isUndefined(e)&&d.any(e,function(e){return e===t})},u.getPrimaryEstimateStatisticField=function(){return 0!==this.fieldSections.estimate.length&&this.getFieldsForSection("estimate")[0]},u.getFieldsForSection=function(e){e=this.fieldSections[e];return d.isUndefined(e)?[]:d.map(e,function(e){return this.getViewField(e)}.bind(this))},u.getErrorSelectorForField=function(e){return this.fieldErrorSelectors[e]||!1},u.processFields=function(e){this.fieldSections={header:[],estimate:[],details:[],people:[],dates:[],links:[],description:[]};var i=e.primaryStatisticFieldId||"",s=e.trackingStatisticFieldId||"",e=d.findWhere(e.tabs.defaultTabs,{tabId:"HEADER"});d.forEach(e.fields,function(e){var t;e&&e.id&&(e.id===i?this.fieldSections.estimate.push(e.id):e.id!==s&&"aggregatetimeestimate"!==e.id&&"aggregatetimeestimate_subtasks"!==e.id&&"unsupported"!==(t=(t=this.FIELD_SECTION_PRESETS[e.id])||e.category||"details")&&this.fieldSections[t].push(e.id))}.bind(this))},u.applyOperationUrlPatches=function(e){var t=l.getCurrentPageReturnUrl(),i=AJS.$("#atlassian-token").attr("content");e.operations&&d.each(e.operations.sections,function(e){d.each(e.operations,function(e){e.url=this.patchIssueOperationUrl(e.url,t,i),e.label=this.patchRankOperationName(e.styleClass,e.label)}.bind(this))}.bind(this))},u.patchRankOperationName=function(e,t){return"issueaction-greenhopper-rank-top-operation"===e?"Send to top":"issueaction-greenhopper-rank-bottom-operation"===e?"Send to bottom":t},u.patchIssueOperationUrl=function(e,t,i){var s="";-1!==e.indexOf("#")&&(s=e.substring(e.indexOf("#")),e=e.substring(0,e.indexOf("#"))),e+=e.indexOf("?")<0?"?":"&";i="atl_token="+i;return(e=-1<(e=(e+="returnUrl="+t).indexOf(i)<0?e.replace("atl_token=",i):e).indexOf("WorkflowUIDispatcher.jspa")?e.replace(n,"?id={0}"):e)+s},u.filterIssueOperations=function(e){var i=["view-voters","greenhopper-planningboard-operation","greenhopper-taskboard-operation","attach-screenshot","toggle-issue/detailswatch-issue","manage-watchers","move-issue","edit-labels","issue-to-subtask","clone-issue","toggle-vote-issue","greenhopper-rapidboard-operation"],s=["opsbar-transitions"],n=[];d.each(e.operations.sections,function(t){var e;d.find(s,function(e){return e===t.groupId})||(e=d.reject(t.operations,function(t){var e=d.find(i,function(e){return e===t.id});return d.isString(e)}),u.renameWatchIssueId(e),0<e.length&&n.push({operations:e}))});for(var t,a,r=0;r<n.length;r++){var o=n[r];d.isUndefined(t)||(1===o.operations.length?(d.isUndefined(a)&&1===t.operations.length&&(a=t),d.isUndefined(a)||(a.operations=a.operations.concat(o.operations),o.operations=[])):1<o.operations.length&&(a=void 0)),t=o}n=d.reject(n,function(e){return 0===e.operations.length}),e.operations.filteredSections=n,l.State.isScrumBoard()&&e.editable&&e.sprint&&!e.isSubtask&&this.addRemoveFromSprintOperation(e.operations),this.addFlagOperation(e.operations,!e.flagged)},u.renameWatchIssueId=function(e){d.find(e,function(e){if("toggle-watch-issue"===e.id)return e.id="gh-toggle-watch-issue",!0})},u.addRemoveFromSprintOperation=function(e){return e.filteredSections.push({operations:[{id:"removeIssueFromSprint",label:"Remove from sprint",styleClass:"issueaction-remove-issue-from-sprint js-remove-issue-from-sprint",title:"Removes this issue from the current sprint",url:""}]}),e},u.addFlagOperation=function(e,t){t?e.filteredSections.push({operations:[{id:"flagIssueAndComment",label:"Add flag",styleClass:"issueaction-flag-and-comment js-flag-issue-and-comment",title:"Add flag",url:""}]}):e.filteredSections.push({operations:[{id:"unflagIssueAndComment",label:"Remove flag",styleClass:"issueaction-unflag-and-comment js-unflag-issue-and-comment",title:"Remove flag",url:""}]})},u.hasIssueOperation=function(t){return d.find(this.viewData.operations.sections,function(e){return d.find(e.operations,function(e){return e.id===t})})},u.getInlineEditableFields=function(){var t=this,i=AJS.$.Deferred();return GH.DetailsView.getExtraTabsAttributes().done(function(e){e=e?s({tabs:e},"DETAILS").inlineEditableFields:null;i.resolveWith(t,[e])}),i.promise()},u.getTimeTrackingFields=function(){var e=this.getViewField("timeestimate");return e?{currentIssueRemainingEstimateField:e,aggregateRemainingField:this.getViewField("aggregatetimeestimate"),aggregateRemainingSubtaskField:this.getViewField("aggregatetimeestimate_subtasks")}:null},u.replaceUpdatedTabs=function(i){this.viewData.tabs.defaultTabs=d.map(this.viewData.tabs.defaultTabs,function(e){var t=d.findWhere(i.defaultTabs,{tabId:e.tabId});return t||e})},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-details-field-resources', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsFieldRenderer.js' */
define("jira-agile/rapid/ui/detail/details-field-renderer",["underscore","jira-agile/tooltip","jira-agile/rapid/ui/detail/details-model"],function(d,i,l){"use strict";var n=GH.RapidViewConfig,e={};return e.renderFields=function(e,t,i){this.renderDetailsHeaderFields(e,t,i);var n=[{fieldsSelector:"details"},{fieldsSelector:"people",title:"People"},{fieldsSelector:"dates",title:"Dates"}],i=d.reduce(n,function(e,t){var i=l.getFieldsForSection(t.fieldsSelector);return 0<i.length&&e.push({title:t.title,fields:i}),e},[]),n=t.find("#ghx-detail-nav"),t=t,i=this.buildTabs(e,i);this.renderTabs(e,t,n,i),this.initTabTooltips(t)},e.renderDetailsHeaderFields=function(e,t,i){var n=l.getViewField("issuekey"),a=l.getViewField("summary"),s=t.find("#ghx-detail-head"),r=s.find(".ghx-key"),d=this.renderField(e,n);r.empty(),r.append(d);t=t.attr("data-issueid");this.renderJiraLink(e,n,s,t);a=this.renderField(e,a);s.find(".ghx-detail-summary").empty().append(a),this.renderEstimationAndTimeTracking(e,s);i=i.showLogWorkTrigger&&l.hasIssueOperation("log-work");this.renderLogWorkTrigger(e,s,i)},e.renderEstimationAndTimeTracking=function(e,t){var i=t.find(".ghx-statistic-group"),n=l.getPrimaryEstimateStatisticField(),t=l.getTimeTrackingFields();n||t?(this.renderEstimateStatisticField(n,e,i),t?this.renderTimeTrackingFields(t,e,i):i.find(".ghx-remaining-group").remove()):i.empty()},e.buildTabs=function(e){var t=[];return 0<e.tabs.defaultTabs.length&&this._addTabs(t,e.tabs.defaultTabs,e),t},e._addTabs=function(t,e,s){d.each(e,function(e){"HEADER"!==e.tabId&&t.push({tabId:e.tabId,sections:[]})}.bind(this)),d.each(e,function(i){var n="THIRD_PARTY_TAB"!==i.tabId,a=d.findWhere(t,{tabId:i.tabId});a&&("SUB_TASKS"===i.tabId?this.addSubtaskTab(a.sections,i,s.trackingStatisticFieldId,s.key):i.sections&&d.each(i.sections,function(e){var t;e.providerKey&&(e.iconURL||e.iconFont||n)&&(t=n?e.providerKey.split(":")[1]:"ghx-tab-"+e.providerKey,e.titleCount=this._getTitleCount(e,i),e=d.extend(e,{id:t.replace(/\./g,"-").replace(/:/g,"-"),title:e.label,hasTitleCount:!d.isUndefined(e.titleCount),thirdPartyTab:!n,isLazyLoading:!1,subpanelHtmls:[]}),a.sections.push(e))}.bind(this)))}.bind(this))},e.addSubtaskTab=function(e,t,i,n){var a,s,r;t.subtaskEntries&&(a=!!d.find(t.subtaskEntries,function(e){return e.canEdit||e.canDelete}),!(s=!d.isUndefined(i))||(i=l.getViewField("aggregatetimeestimate_subtasks"))&&(r=i.html),e.push({id:"subtasks",title:"Sub-Tasks",titleCount:t.subtaskEntries.length,hasTitleCount:!0,subtasks:t.subtaskEntries,canCreateSubtask:l.hasIssueOperation("create-subtask"),showActionsColumn:a,showTrackingField:s,trackingFieldSum:r,parentIssueKey:n,iconFont:"jira-completed-task"}))},e.renderSubtaskAsHtmlNode=function(e){var t=d.first(e.subtasks),t=t&&t.status.statusCategory;return AJS.$(GH.tpl.detailview.renderSubtasks({subtasks:e.subtasks,canCreateSubtask:e.canCreateSubtask,showActionsColumn:e.showActionsColumn,showTrackingField:e.showTrackingField,trackingFieldSum:e.trackingFieldSum,statusCategoriesAvailable:t}))},e.renderSections=function(t,i){var e=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:t.title}));i.append(e),d.each(t.sections,function(e){this.renderSection(i,e,t.viewData)}.bind(this))},e.renderSection=function(e,t,i){var n,a=AJS.$(GH.tpl.detailview.renderTabSection({renderTitle:!d.isUndefined(t.title),title:t.title}));t.fields?0!==t.fields.length&&(n=a.find(".ghx-tab-section-content"),d.each(t.fields,function(e){e=this.renderField(i,e);n.append(e)}.bind(this)),e.append(a)):t.issueLinks&&(n=a.find(".ghx-tab-section-content"),t=GH.tpl.detailview.issuelinks.renderIssueLinks({issueLinkTypeEntries:t.issueLinks.issueLinkTypeEntries,canLink:t.issueLinks.canLink}),n.replaceWith(t),e.append(a))},e.renderField=function(e,t){e=AJS.$(GH.tpl.detailview.renderFieldStructure({issueDetails:e,field:t})),t=this.renderFieldContent(t);return e.find("dd").html(t),e},e.renderLogWorkTrigger=function(e,t,i){t=t.find("#ghx-log-work-container");i?t.css({display:""}):t.css({display:"none"})},e.renderJiraLink=function(e,t,i,n){i=i.find(".js-view-in-jira"),t=GH.tpl.detailview.renderIssueLink({issueKey:t.text});i.find("dd").html(t),i.on("mousedown",function(e){1!==e.which&&2!==e.which||(e=e.which-1,AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.full.issue",data:{pageMode:GH.RapidBoard.State.getMode(),issueId:n,middleClick:e}}))})},e.renderFieldContent=function(e){var t;if("description"===e.id)return t=GH.tpl.detailview.renderDescriptionHtmlView({field:e});if(e.id===n.currentData.data.estimationStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});if(e.id===n.currentData.data.trackingStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});if("aggregatetimeestimate"===e.id&&"timeestimate"===n.currentData.data.trackingStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});switch(e.renderer){case"html":t=GH.tpl.detailview.renderHtmlView({field:e});break;case"date":t=GH.tpl.detailview.renderDateView({field:e});break;case"epiclink":t=GH.tpl.field.epicLink.renderEpicLink({field:e,removableIfAllowed:!0});break;case"status":t=GH.tpl.status.renderText({status:e.statusEntry});break;default:t=GH.tpl.detailview.renderTextView({field:e})}return t},e.initTabTooltips=function(e){var t=".ghx-detail-nav-menu a";return i.tipsify({context:e,selector:t,gravity:"e"}),e.find(t)},e.renderTabs=function(e,t,i,n){var a=AJS.$(GH.tpl.detailview.renderTabs({tabs:n})),s=AJS.$(GH.tpl.detailview.renderTabMenuStructure({tabs:n}));t.append(s),i.append(a),this.renderTabsContent(n,t.find(".ghx-detail-nav-menu"),i)},e.updateTabsContent=function(e,t){var i=this.buildTabs(e),e=t.find("#ghx-detail-nav");this.renderTabsContent(i,t.find(".ghx-detail-nav-menu"),e)},e.renderTabsContent=function(e,i,n){d.each(e,function(e){!function(e,t){t=t.find("#"+e.tabId+"-nav"),e=AJS.$(GH.tpl.detailview.renderTabNavigation({tab:e}));e&&t.replaceWith(e)}(e,i);var t=n.find("#"+e.tabId);t.empty(),d.each(e.sections,function(e){e.subtasks?t.append(this.renderSubtasks(e)):t.append(this.renderTab(e))}.bind(this))}.bind(this))},e.renderSubtasks=function(e){var t=this.renderSubtaskAsHtmlNode(e),i={links:[],groups:[]};return e.canCreateSubtask&&0<e.subtasks.length&&i.links.push({id:"createSubtask",title:"Create Sub-Task",label:"Create Sub-Task",styleClass:"icon issueaction-create-subtask aui-icon aui-icon-small aui-iconfont-add issueaction-aui-icon"}),AJS.$.extend(e,{html:d.map(t,function(e){return AJS.$("<DIV></DIV>").append(AJS.$(e).clone()).html()}).join(""),headerLinks:i,renderHeader:!0,subpanelHtmls:[]}),this.renderTab(e)},e.renderTab=function(e){var t,i=[];return e.headerLinks?((t=AJS.$(JIRA.Components.IssueViewer.Templates.Body.issuePanel({html:e.html,id:e.id,label:e.title,renderHeader:e.renderHeader,headerLinks:e.headerLinks,subpanelHtmls:e.subpanelHtmls}))).addClass("ghx-detail-section"),i=t):(t=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:e.title})),i.append(t),i.append(AJS.$(e.html))),e.thirdPartyTab||e.iconFont||e.iconURL||i.addClass("ghx-no-tab-menu"),e.tabIconId?i.attr("ghx-tab-icon-id",e.tabIconId):e.iconFont||e.iconURL||i.addClass("ghx-hidden-tab"),i},e._getTitleCount=function(e,t){var i;if(d.isUndefined(e.titleCount))switch(t.tabId){case"ATTACHMENT":i=t.totalCount;break;case"COMMENT":i=t.totalComments}else i=e.titleCount;return i},e.renderEstimateStatisticField=function(e,t,i){e?(e=d.extend({},e,{dataTooltip:e.label,label:"Estimate"}),this.renderStatisticFields([e],".js-estimate",t,i)):i.find(".js-estimate").remove()},e.renderTimeTrackingFields=function(e,t,i){var n,a=[];a.push(d.extend({},e.currentIssueRemainingEstimateField,{dataTooltip:e.currentIssueRemainingEstimateField.label,label:"Remaining"})),e.aggregateRemainingField&&(n=GH.tpl.detailview.renderAggregateRemainingEstimateTooltip({data:[{label:"Parent",value:e.currentIssueRemainingEstimateField.text},{label:e.aggregateRemainingSubtaskField?e.aggregateRemainingSubtaskField.label:null,value:e.aggregateRemainingSubtaskField?e.aggregateRemainingSubtaskField.text:null}]}),a.push(d.extend({},e.aggregateRemainingField,{dataTooltip:n,label:"Remaining sum"}))),this.renderStatisticFields(a,".js-remainings",t,i)},e.renderStatisticFields=function(e,t,i,n){var a=n.find(t);a.empty(),d.each(e,function(e){var t=this.renderField(i,e);a.append(t),d.isUndefined(e.text)?a.addClass("ghx-empty"):a.removeClass("ghx-empty")}.bind(this))},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-details-field-resources', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsView.js' */
var _extends=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t,a=arguments[i];for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e};!function(){"use strict";function l(){return GH.DetailsView.opts.wantsBentoInBacklog&&GH.DetailsView.opts.wantsBentoInBacklog()}var i=require("aui/tabs"),e=require("jira-agile/rapid/analytics-tracker"),r=require("jira/analytics/web-client"),t=require("jira-agile/tooltip"),a=require("jira/ajs/dropdown/dropdown"),o=require("jira/util/events"),s=function(e){try{return require(e)}catch(e){return}}("jira/components/issueeditor/eventtypes"),n=require("jira-agile/rapid/ui/detail/details-model"),d=require("jira-agile/rapid/ui/detail/details-field-renderer"),c=(require("jira/featureflags/feature-manager"),require("jira-agile/rapid/deferred-resources-loader"));GH.DetailsView||(GH.DetailsView=new GH.Events),GH.DetailsView._InlineEditor=require("jira-agile/rapid/ui/detail/inlineedit/issue-detail-view-inline-editor"),GH.DetailsView._Reloader=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reloader"),GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED="GH.DetailView.updated",GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED="GH.DetailView.closed",GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED="GH.DetailView.update.started",GH.DetailsView.TAB_SUBTASKS="subtasks",GH.DetailsView.$lastSectionSpacer=void 0,GH.DetailsView.analytics=new e("gh.issueaction.issuedetail"),GH.DetailsView.triggerAnalyticsOpenDetailView=function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open"}),GH.DetailsView.analytics.openDetailViewTime=Date.now()},GH.DetailsView.triggerAnalyticsCloseDetailView=function(){var e=GH.DetailsView.analytics.openDetailViewTime,i=Date.now();!e||3e3<i-e?AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.close"}):AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.dismiss"}),GH.DetailsView.analytics.openDetailViewTime=null},GH.DetailsView.triggerAnalyticsEventForAction=function(e,i){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail."+e,data:i})},GH.DetailsView.init=function(){AJS.$(document).bind("tabSelect",GH.DetailsView.handleTabSelection),AJS.$(document).delegate(".js-detailclose","click",function(e){GH.DetailsView.closeHandler&&(GH.DetailsView.closeHandler(e),GH.DetailsView.triggerAnalyticsCloseDetailView())})},GH.DetailsView.getMode=function(){return GH.RapidBoard.ViewController.getMode()},GH.DetailsView._getContentContainer=function(){return GH.DetailsView.getContainer().find(".ghx-detail-contents")},GH.DetailsView._getIssueElement=function(){return GH.DetailsView.getContainer().find(".ghx-detail-issue")},GH.DetailsView._replaceUpdatedFields=function(e,i,t){function a(e){return!_.contains(GH.DetailsView.getEditsInProgress(),e)}GH.DetailsView._replaceField(e,i,t),"timeoriginalestimate"===t&&a("timeestimate")&&GH.DetailsView._replaceField(e,i,"timeestimate"),"timeestimate"===t&&a("timeoriginalestimate")&&GH.DetailsView._replaceField(e,i,"timeoriginalestimate"),_.contains(["timeestimate","timeoriginalestimate"],t)&&GH.DetailsView._replaceField(e,i,"aggregatetimeestimate")},GH.DetailsView._replaceField=function(e,i,t){var a=GH.DetailsView._InlineEditor.getFieldSelector(t),s=e.find(a),a=i.find(a);0===a.length?s.closest("li, dl").remove():(s.replaceWith(a),GH.DetailsView._InlineEditor.triggerFieldUpdate(t,e,a))},GH.DetailsView._setIssueElement=function(e,i){var t=GH.DetailsView._getIssueElement();0!==t.length?i&&GH.DetailsView.hasEditsInProgress()?GH.DetailsView._replaceUpdatedFields(t,e,i):t.replaceWith(e):GH.DetailsView._getContentContainer().prepend(e)};function u(e,i,t){e.key===GH.DetailsView.selectedIssueKey&&(n.setViewData(e),!_.isUndefined(i)&&_.isFunction(i)&&i(t),GH.DetailsView.currentPromise=void 0,(GH.RapidBoard.State.isPlanMode()||GH.DetailsView._getIsUsingBentoSidebarOnBoard())&&(GH.DetailsView.makeResizable(),AJS.$("#ghx-issue-fragment").on("initialize-resize-handle",function(){GH.DetailsView.makeResizable()})),GH.RapidBoard.State.isPlanMode()&&GH.BacklogView&&GH.BacklogView.checkBacklogWidth(),l()||GH.DetailsView._getIsUsingBentoSidebarOnBoard()||(i=Date.now()-GH.DetailsView.analytics.startLoadTime,t=JIRA.API&&JIRA.API.Projects,AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.load",data:{loadingTimeMs:i,issueId:e.id,projectId:t&&t.getCurrentProjectId(),projectType:t&&t.getCurrentProjectType(),analyticsSource:GH.RapidBoard.State.getMode()}}),D(e)))}GH.DetailsView._loadDetailsView=u;var w=function(e){return{1:"UNDEFINED",2:"TODO",4:"IN_PROGRESS",3:"DONE"}[e]||"UNDEFINED"},D=function(i){var t,a,s,n=JIRA.API&&JIRA.API.Projects,e=(t=i.key,a=JIRA.API&&JIRA.API.Projects,s=GH.RapidBoard.State.isPlanMode(),e=s?GH.BacklogModel.getIssueData(t):GH.GridDataController.getModelPromise().then(function(e){return e.getIssueDataByKey(t)}),GH.Util.promiseCast(e).then(function(e){return e?{analyticsSource:s?"software-backlog-issue":"software-issue",boardId:GH.RapidViewConfig.currentData.data.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),statusCategory:w(e.status.statusCategory.id),statusCategoryId:e.status.statusCategory.id,issueTypeId:e.typeId,nextGenProject:a&&"true"===a.isCurrentProjectSimplified(),newIssueToggleValue:GH.RapidBoard.State.isNewIssueViewEnabled()?"ON":"OFF"}:{}}));return GH.Util.promiseCast(e).then(function(e){e={objectType:"issue",objectId:i.id,containerType:"project",containerId:n&&n.getCurrentProjectId(),attributes:_extends({projectType:"software",designVersion:"v1-legacy"},e,{analyticsSource:GH.RapidBoard.State.isPlanMode()?"software-backlog-issue":"simple-software-board"}),action:"viewed",actionSubject:"issue",actionSubjectId:i.id,source:GH.RapidBoard.State.isPlanMode()?"backlogScreen":"boardScreen"};r.sendTrackEvent(e)})};function g(e,i){t.disable(AJS.$("[data-tooltip][data-field-id="+i+"]"))}function H(e,i){t.enable(AJS.$("[data-tooltip][data-field-id="+i+"]"))}GH.DetailsView.show=function(e,i){var t,a;e||n.clearViewData(),0===(a=GH.DetailsView.getContainer()).find("#ghx-detail-contents").length&&(l()||GH.DetailsView._getIsUsingBentoSidebarOnBoard()||(t=GH.tpl.detailview.renderIssueDetailsSkeleton(),a.empty().append(t)),a.width(GH.DetailsView.getWidth()),GH.DetailsView.initTooltips(),GH.DetailsView.triggerAnalyticsOpenDetailView()),GH.DetailsView.selectedIssueKey?(GH.RapidBoard.ViewController.handleResizeEvent(),GH.DetailsView._initInlineEditor()):GH.DetailsView._getIssueElement().remove(),GH.DetailsView.preloadPromise?(GH.DetailsView.showSpinner("load-content-spinner"),GH.DetailsView.preloadPromise.done(function(e){u(e,GH.DetailsView.renderDetails)}).always(function(){GH.DetailsView.preloadPromise=void 0,GH.DetailsView.hideSpinner("load-content-spinner")})):(GH.DetailsView.trigger("before:render"),GH.DetailsView.load(null,e,i))},GH.DetailsView.reload=GH.DetailsView.show.bind(GH.DetailsView),GH.DetailsView.getWidth=function(){var e=GH.RapidBoard.State.getDetailViewWidth()*GH.DetailsView._getTotalWidth(),e=Math.max(e,GH.DetailsView.minWidth);return Math.min(GH.DetailsView.getMaxWidth(),e)},GH.DetailsView.initTooltips=function(){t.tipsify({selector:[".ghx-statistic-group [data-tooltip]"].join(", "),context:"#ghx-detail-contents",html:!0}),c.handleDeferredResourceImport(!s,function(){s=require("jira/components/issueeditor/eventtypes"),o.bind(s.INLINE_EDIT_STARTED,g),o.bind(s.BEFORE_INLINE_EDIT_CANCEL,H),o.bind(s.INLINE_EDIT_SAVE_COMPLETE,H)})},GH.DetailsView.hide=function(){AJS.$("#ghx-issue-fragment").trigger("hide-detail-view"),GH.DetailsView.currentPromise&&GH.DetailsView.currentPromise.abort&&GH.DetailsView.currentPromise.abort(),GH.DetailsView.getContainer().empty(),AJS.$("#gh").removeClass("js-ghx-detail-loading").removeClass("js-ghx-detail-loaded"),AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED),GH.RapidBoard.ViewController.handleResizeEvent(),GH.DetailsView._InlineEditor.destroy()},GH.DetailsView.resizeLastSectionSpacer=function(){var e=AJS.$("#js-detail-nav-content"),i=e.find(".ghx-detail-section"),t=0,a=e.data("$lastSectionSpacer");a&&(t=a.height());var s=e.height(),i=i.last(),t=i.height()-t;t<s&&(a||e.data("$lastSectionSpacer",a=AJS.$("<div>",{css:{clear:"both"}}).appendTo(i)),i=AJS.$.browser.msie?0:40,a.height(s-t-i))},GH.DetailsView.selectNavItem=function(e){var i=_.debounce(function(e){GH.DetailsView.triggerAnalyticsEventForAction("scroll",{sectionId:e})},150),t=AJS.$(".ghx-detail-nav-menu .ghx-detail-nav-item"),a=t.filter(".ghx-selected");a.find("a").attr("href")!=="#"+e&&i(e),a.removeClass("ghx-selected");a=AJS.$("#"+e).attr("ghx-tab-icon-id");a&&(e=a),t.find("a").filter(function(){return this.hash==="#"+e}).closest(".ghx-detail-nav-item").addClass("ghx-selected")},GH.DetailsView.updateSize=function(){GH.DetailsView.opts.updateSizeHandler(),GH.DetailsView.resizeLastSectionSpacer(),GH.DetailsView.getContainer().width(GH.DetailsView.getWidth()),GH.RapidBoard.State.isPlanMode()&&GH.BacklogView&&GH.BacklogView.checkBacklogWidth(),AJS.$("#ghx-detail-view").agileResizable("option","maxWidth",GH.DetailsView.getMaxWidth())},GH.DetailsView.getFixedElement=function(){return{element:GH.DetailsView.getContainer(),resizeCallback:GH.DetailsView.updateSize}},GH.DetailsView.load=function(e,i,t){var a,s,n;l()||GH.DetailsView._getIsUsingBentoSidebarOnBoard()?(a=i?"refresh-backlog-issue":"show-backlog-issue",n={issueKey:s=GH.DetailsView.selectedIssueKey},AJS.$("#ghx-issue-fragment").trigger(a,n),o.trigger("modify-issue-view-via-external-action",{issueKey:s,externalAction:t}),GH.DetailsView.loadContent(e),GH.RapidBoard.ViewController.insightsOpen=!1):(AJS.$("#gh").addClass("js-ghx-detail-loading").removeClass("js-ghx-detail-loaded"),i?e?GH.DetailsView._Reloader.reload(i,e):GH.DetailsView._Reloader.reload(i):GH.DetailsView.loadContent(e,GH.DetailsView.renderDetails))},GH.DetailsView.hasEditsInProgress=function(){return 0<GH.DetailsView.getEditsInProgress().length||GH.DetailsView.getContainer().find("#addcomment").hasClass("active")},GH.DetailsView.getEditsInProgress=function(){return GH.DetailsView._InlineEditor&&GH.DetailsView._InlineEditor.getEditsInProgress()||[]};function V(){return{rapidViewId:GH.DetailsView.rapidViewId,issueIdOrKey:GH.DetailsView.selectedIssueKey}}GH.DetailsView.loadContent=function(i,t){GH.DetailsView.analytics.startLoadTime=Date.now(),i||GH.DetailsView.showSpinner("load-content-spinner");var e=V();e.issueIdOrKey?(GH.DetailsView._InlineEditor.getIssueAttachmentQuery()&&(e=_.extend(e,GH.DetailsView._InlineEditor.getIssueAttachmentQuery())),GH.DetailsView.currentPromise=(e=e,GH.Ajax.get({url:"/xboard/issue/details.json",data:e},"detailView")),GH.DetailsView.currentPromise.done(function(e){u(e,t,i)}).always(function(){GH.DetailsView.hideSpinner("load-content-spinner")})):GH.DetailsView.hideSpinner("load-content-spinner")},GH.DetailsView.getExtraTabsAttributes=function(){return GH.Ajax.get({url:"/xboard/issue/details/extraTabsAttributes",data:V()},"extraTabsAttributes")},GH.DetailsView.showSpinner=function(e){AJS.$(".ghx-detail-view-blanket").show().spin("large").attr("spinnerOwnerId",e||"")},GH.DetailsView.hideSpinner=function(e){var i=AJS.$(".ghx-detail-view-blanket");e&&i.attr("spinnerOwnerId")!==e||i.hide().spin(!1).attr("spinnerOwnerId","")},GH.DetailsView.getMaxWidth=function(){return Math.max(GH.DetailsView.minWidth,GH.DetailsView._getTotalWidth()/2)},GH.DetailsView._getTotalWidth=function(){var e=GH.DetailsView.getDetailViewElementWidth();return GH.RapidBoard.State.isPlanMode()?e+GH.DetailsView.getBacklogElementWidth():GH.RapidBoard.State.isWorkMode()&&(GH.DetailsView._getIsUsingBentoSidebarOnBoard()||GH.RapidBoard.ViewController.insightsOpen)?e+GH.DetailsView.getWorkPoolElementWidth():e},GH.DetailsView.makeResizable=function(){AJS.$("#ghx-detail-view").agileResizable("destroy");var e=GH.RapidBoard.State.isPlanMode()?GH.BacklogView.checkBacklogWidth:AJS.$.noop;AJS.$("#ghx-detail-view").agileResizable({handles:{w:AJS.$("#js-sizer")},resize:e,stop:GH.DetailsView.storeWidth,maxWidth:GH.DetailsView.getMaxWidth(),minWidth:GH.DetailsView.minWidth}),l()||GH.DetailsView._getIsUsingBentoSidebarOnBoard()||GH.RapidBoard.ViewController.insightsOpen||t.tipsify({selector:"#js-sizer",gravity:"e"})},GH.DetailsView.storeWidth=function(){var e=GH.DetailsView.getDetailViewElementWidth(),i=e<=GH.DetailsView.minWidth?0:e/GH.DetailsView._getTotalWidth();GH.RapidBoard.State.setDetailViewWidth(i);GH.DetailsView.triggerAnalyticsEventForAction("resize",{targetWidth:(i=e)>=GH.DetailsView.minWidth&&i<=500?"small":500<(i=e)&&i<=600?"medium":600<e?"large":"",isNewDetailView:l(),width:e})},GH.DetailsView.renderDetailsSingleField=function(e){var i=n.viewData,t=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:i,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));d.renderFields(i,t,GH.DetailsView.opts),GH.DetailsView._setIssueElement(t,e)},GH.DetailsView.renderDetails=function(){AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED);var e=n.viewData,i=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:e,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));d.renderFields(e,i,GH.DetailsView.opts),GH.DetailsView.registerAllListeners(i),GH.DetailsView._setIssueElement(i),GH.DetailsView.updateSize(),AJS.$(".js-epic-remove").find(".aui-icon-close").addClass("aui-icon aui-icon-small aui-iconfont-remove-label ghx-iconfont"),AJS.$("#gh").removeClass("js-ghx-detail-loading").addClass("js-ghx-detail-loaded"),c.handleDeferredResourceImport(!GH.DetailsViewScrollTracker,function(){GH.DetailsViewScrollTracker.init({onSelectedNavChanged:GH.DetailsView.selectNavItem}),GH.DetailsViewScrollTracker.afterDetailsViewLoaded({issueId:e.id})}),GH.DetailsView.trigger("after:render"),JIRA.trigger(GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED,{issueId:e.id,issueKey:e.key,rapidViewId:GH.DetailsView.rapidViewId,mode:GH.DetailsView.getMode()}),GH.DetailsView._postRenderDetails(i)},GH.DetailsView.registerAllListeners=function(e){var i,t;0<e.find("#ghx-detail-head .aui-list").length&&(i=a.create({trigger:e.find("#ghx-detail-head .ghx-actions"),content:e.find("#ghx-detail-head .aui-list"),alignment:AJS.RIGHT}),t=function e(){AJS.$(i).each(function(e,i){i.hide(),i.layerController.$content&&i.layerController.$content.remove()}),AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,e),AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,e)},AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,t),AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,t)),e.find("#ghx-more-actions").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.showOperationsDialog()}),e.find(".js-issueaction-container-cog .js-issueaction").click(function(e){e=AJS.$(e.currentTarget).attr("id");GH.DetailsView.analytics.trigger(e)}),e.find(".js-create-attachment").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.attachFilesSelectedIssue()}),GH.DetailsView.registerListenersForSubtask(e),e.find(".js-link-issue").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.linkSelectedIssue()}),e.find(".js-remove-issue-from-sprint").click(function(e){e.preventDefault();var e=n.viewData;e&&(e=e.key,GH.IssueActions.removeIssuesFromSprint(GH.DetailsView.rapidViewId,e))}),e.find(".js-flag-issue-and-comment").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!0)}),e.find(".js-unflag-issue-and-comment").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!1)}),GH.DetailsView.registerHeaderFieldsListeners(e),e.find("#ghx-detail-head .ghx-actions").click(function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.more.actions"})})},GH.DetailsView.registerListenersForSubtask=function(e){e.find(".js-create-subtask").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.createSubtask()}),e.find(".js-edit-subtask").click(function(e){e.preventDefault(),GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))&&GH.IssueOperationShortcuts.editSelectedIssue()}),e.find(".js-delete-subtask").click(function(e){e.preventDefault(),GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))&&GH.IssueOperationShortcuts.deleteSelectedIssue()})},GH.DetailsView.registerHeaderFieldsListeners=function(e){e.find(".js-log-work").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.logWorkOnSelectedIssue()})},GH.DetailsView.setSubtaskIssueOverwrite=function(e){var i=e.closest(".js-issue-dropdown"),e=i.attr("data-issue-key"),i=parseInt(i.attr("data-issue-id"),10);return!(!e||!i)&&(GH.IssueOperationShortcuts.setOverrideSelectedIssue({id:i,key:e}),!0)},GH.DetailsView.handleTabSelection=function(e,i){0!==i.pane.parents("#ghx-detail-nav").length&&(i=i.pane.attr("id"),GH.DetailsViewScrollTracker.setSelectedTab(i))},GH.DetailsView.setTab=function(e){e=AJS.$("a[href=#"+e+"]");0<e.length&&i.change(e)},GH.DetailsView.renderDetailsHeader=function(){var e=n.viewData,i=AJS.$("#ghx-detail-issue");d.renderDetailsHeaderFields(e,i,GH.DetailsView.opts),GH.DetailsView.registerHeaderFieldsListeners(i),GH.DetailsView.updateSize(),AJS.$("#gh").removeClass("js-ghx-detail-loading").addClass("js-ghx-detail-loaded")},GH.DetailsView.hasCurrentError=function(){return 0<AJS.$("#ghx-detail-issue").find(".ghx-error").text().length},GH.DetailsView.flagCurrentIssue=function(e){var i=n.viewData;i&&GH.IssueFlagAndCommentAction.execute(i.key,e,function(){AJS.$(GH).trigger("issueUpdated",{issueId:i.id,source:"detailView"}),GH.DetailsView.reload()}),AJS.trigger("analytics",{name:e?"gh.issue.ctx.menu.action.flag":"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:1}})},GH.DetailsView._initInlineEditor=function(){GH.DetailsView._InlineEditor.init({$detailContainer:GH.DetailsView.getContainer(),getRapidViewIdCallback:function(){return GH.DetailsView.rapidViewId},loadIssueDetailCallback:GH.DetailsView.load,getInlineEditableFieldsCallback:function(){return n.viewData&&n.viewData.editable?n.getInlineEditableFields():[]},getIssueIdCallback:function(){return n.viewData.id},getIssueKeyCallback:function(){return n.viewData.key},getIssueSprintStatusCallback:function(){return n.viewData.sprint?n.viewData.sprint.state:null}})},GH.DetailsView._postRenderDetails=function(e){GH.DetailsView._InlineEditor.fixUpDetailView(e),GH.DetailsView._InlineEditor.loadIssueToEditor()},GH.DetailsView.getAttachmentViewQuery=function(){return GH.DetailsView._InlineEditor.getIssueAttachmentQuery()},GH.DetailsView.registerListenersForTab=function(e,i){GH.DetailsView._InlineEditor.registerListenersForTab(e,i),"sub_tasks"===e&&GH.DetailsView.registerListenersForSubtask(i)},GH.DetailsView._getIsUsingBentoSidebarOnBoard=function(){return GH.DetailsView.opts.isUsingBentoSidebarOnBoard}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-details-field-resources', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsView.soy' */
// This file was automatically generated from DetailsView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailview == 'undefined') { GH.tpl.detailview = {}; }


GH.tpl.detailview.renderIssueDetailsBody = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-detail-head" class="ghx-detail-head js-issue-fields"><div class="ghx-controls">';
  if (opt_data.showActionsCog) {
    var tooltip__soy6 = '' + soy.$$escapeHtml('Actions (Type . to access issue actions)');
    output += aui.buttons.button({extraAttributes: {title: tooltip__soy6}, extraClasses: ['ghx-actions', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconText: tooltip__soy6, iconType: 'aui'}) + GH.tpl.detailview.renderIssueOperationsForCog(opt_data);
  }
  output += ((opt_data.canClose) ? '<div class="ghx-detail-close js-detailclose" title="' + soy.$$escapeHtml('Close detail ( T )') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close detail ( T )') + '</span></div>' : '') + '</div><div class="ghx-group"><span class="ghx-project-avatar"><img src="' + soy.$$escapeHtml(opt_data.issueDetails.projectAvatarUrl) + '" title="' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '" /></span><span id="js-sizer" class="ghx-sizer ui-resizable-handle ui-resizable-w" data-tooltip="' + soy.$$escapeHtml('Resize Detail View') + '"><span class="ghx-icon ghx-icon-sizer"></span></span><div class="ghx-key-group"><div class="ghx-project">' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '</div><div class="ghx-key js-view-in-jira"></div></div><div class="ghx-detail-summary"></div></div>' + GH.tpl.detailview.renderStatisticGroup(null) + '</div><div id="ghx-detail-nav" class="ghx-detail-nav js-issue-fields"></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetailsBody.soyTemplateName = 'GH.tpl.detailview.renderIssueDetailsBody';
}


GH.tpl.detailview.renderLogWorkTrigger = function(opt_data, opt_ignored) {
  return '<dl id="ghx-log-work-container"><dt class="ghx-detail-term"></dt><dd class="ghx-detail-description"><a role="button" class="ghx-trigger js-log-work">' + soy.$$escapeHtml('Log work') + '</a></dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderLogWorkTrigger.soyTemplateName = 'GH.tpl.detailview.renderLogWorkTrigger';
}


GH.tpl.detailview.renderIssueOperationsForCog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list hidden js-issueaction-container-cog" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">';
  var sectionList43 = opt_data.issueDetails.operations.filteredSections;
  var sectionListLen43 = sectionList43.length;
  for (var sectionIndex43 = 0; sectionIndex43 < sectionListLen43; sectionIndex43++) {
    var sectionData43 = sectionList43[sectionIndex43];
    output += '<ul class="aui-list-section ' + ((sectionIndex43 == 0) ? 'aui-first' : '') + '">';
    var operationList49 = sectionData43.operations;
    var operationListLen49 = operationList49.length;
    for (var operationIndex49 = 0; operationIndex49 < operationListLen49; operationIndex49++) {
      var operationData49 = operationList49[operationIndex49];
      output += '<li class="aui-list-item"><a id="' + soy.$$escapeHtml(operationData49.id) + '" title="' + soy.$$escapeHtml(operationData49.title) + '" class="aui-list-item-link js-issueaction ' + soy.$$escapeHtml(operationData49.styleClass) + '" href="' + soy.$$escapeHtml(operationData49.url) + '" >' + soy.$$escapeHtml(operationData49.label) + '</a></li>';
    }
    output += '</ul>';
  }
  output += '<ul class="aui-list-section aui-last"><li class="aui-list-item"><a id="ghx-more-actions" title="' + soy.$$escapeHtml('More Actions\u2026') + '" class="aui-list-item-link js-issueaction" href="#" >' + soy.$$escapeHtml('More Actions\u2026') + '</a></li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueOperationsForCog.soyTemplateName = 'GH.tpl.detailview.renderIssueOperationsForCog';
}


GH.tpl.detailview.renderTabSection = function(opt_data, opt_ignored) {
  return '<div class="ghx-tab-section">' + ((opt_data.renderTitle) ? '<h4>' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '') + '<div class="ghx-tab-section-content"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabSection.soyTemplateName = 'GH.tpl.detailview.renderTabSection';
}


GH.tpl.detailview.renderTabTitle = function(opt_data, opt_ignored) {
  return '<div class="ghx-header"><h3>' + soy.$$escapeHtml(opt_data.tabTitle) + '</h3></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabTitle.soyTemplateName = 'GH.tpl.detailview.renderTabTitle';
}


GH.tpl.detailview.renderIssueLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '" title="' + soy.$$escapeHtml('View this issue') + '">' + soy.$$escapeHtml(opt_data.issueKey) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueLink.soyTemplateName = 'GH.tpl.detailview.renderIssueLink';
}


GH.tpl.detailview.renderTextView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + ((opt_data.field.type == 'number') ? '&nbsp;' : soy.$$escapeHtml('None')) + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextView.soyTemplateName = 'GH.tpl.detailview.renderTextView';
}


GH.tpl.detailview.renderTextEstimateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + soy.$$escapeHtml('Unestimated') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextEstimateView.soyTemplateName = 'GH.tpl.detailview.renderTextEstimateView';
}


GH.tpl.detailview.renderHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderHtmlView.soyTemplateName = 'GH.tpl.detailview.renderHtmlView';
}


GH.tpl.detailview.renderDescriptionHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml('There is no description content') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDescriptionHtmlView.soyTemplateName = 'GH.tpl.detailview.renderDescriptionHtmlView';
}


GH.tpl.detailview.renderDateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? GH.tpl.detailview.renderDate({value: opt_data.field.text, displayValue: opt_data.field.html}) : '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDateView.soyTemplateName = 'GH.tpl.detailview.renderDateView';
}


GH.tpl.detailview.renderDate = function(opt_data, opt_ignored) {
  return '<span class="date user-tz"><time datetime="' + soy.$$escapeHtml(opt_data.value) + '" title="' + soy.$$escapeHtml(opt_data.displayValue) + '">' + soy.$$escapeHtml(opt_data.displayValue) + '</time></span>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDate.soyTemplateName = 'GH.tpl.detailview.renderDate';
}


GH.tpl.detailview.renderSubtasksEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml('There are no sub-tasks') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasksEmpty.soyTemplateName = 'GH.tpl.detailview.renderSubtasksEmpty';
}


GH.tpl.detailview.renderIssueDetailsSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-contents" class="ghx-detail-contents issue-container"><div class="ghx-detail-view-blanket"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetailsSkeleton.soyTemplateName = 'GH.tpl.detailview.renderIssueDetailsSkeleton';
}


GH.tpl.detailview.renderIssueDetails = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-issue" class="ghx-detail-issue issue-body-content" data-issueid="' + soy.$$escapeHtml(opt_data.issueDetails.id) + '" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">' + GH.tpl.detailview.renderIssueDetailsBody(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetails.soyTemplateName = 'GH.tpl.detailview.renderIssueDetails';
}


GH.tpl.detailview.renderStatisticGroup = function(opt_data, opt_ignored) {
  return '<div class="ghx-statistic-group"><div class="ghx-detail-statistic ghx-estimate js-estimate"></div><div class="ghx-remaining-group"><div class="ghx-detail-statistic ghx-remainings js-remainings"></div>' + GH.tpl.detailview.renderLogWorkTrigger(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderStatisticGroup.soyTemplateName = 'GH.tpl.detailview.renderStatisticGroup';
}


GH.tpl.detailview.renderAggregateRemainingEstimateTooltip = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.data) {
    output += '<div class="ghx-aggregatetimeestimate-tooltip">';
    var rowList172 = opt_data.data;
    var rowListLen172 = rowList172.length;
    for (var rowIndex172 = 0; rowIndex172 < rowListLen172; rowIndex172++) {
      var rowData172 = rowList172[rowIndex172];
      output += (rowData172) ? '<div><span>' + soy.$$escapeHtml(rowData172.label) + ': </span><span>' + soy.$$escapeHtml(rowData172.value ? rowData172.value : '-') + '</span></div>' : '';
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderAggregateRemainingEstimateTooltip.soyTemplateName = 'GH.tpl.detailview.renderAggregateRemainingEstimateTooltip';
}


GH.tpl.detailview.renderTabMenuStructure = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-detail-nav-menu"><ul>';
  var tabList184 = opt_data.tabs;
  var tabListLen184 = tabList184.length;
  for (var tabIndex184 = 0; tabIndex184 < tabListLen184; tabIndex184++) {
    var tabData184 = tabList184[tabIndex184];
    output += GH.tpl.detailview.renderTabNavigation({tab: tabData184});
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabMenuStructure.soyTemplateName = 'GH.tpl.detailview.renderTabMenuStructure';
}


GH.tpl.detailview.renderTabNavigation = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList190 = opt_data.tab.sections;
  var sectionListLen190 = sectionList190.length;
  for (var sectionIndex190 = 0; sectionIndex190 < sectionListLen190; sectionIndex190++) {
    var sectionData190 = sectionList190[sectionIndex190];
    output += (sectionData190.iconFont || sectionData190.iconURL) ? '<li id="' + soy.$$escapeHtml(opt_data.tab.tabId) + '-nav" class="ghx-detail-nav-item ' + ((sectionData190.isLazyLoading) ? 'disabled' : '') + '"><a href="#' + soy.$$escapeHtml(sectionData190.id) + '" data-tooltip="' + ((sectionData190.toolTip) ? soy.$$escapeHtml(sectionData190.toolTip) : soy.$$escapeHtml(sectionData190.title)) + '">' + ((sectionData190.thirdPartyTab) ? (sectionData190.iconFont) ? '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(sectionData190.iconFont) + '">' + soy.$$escapeHtml(sectionData190.title) + '</span>' : '<span class="ghx-icon ghx-icon-thirdparty" style="background-image:url(\'' + soy.$$escapeHtml(sectionData190.iconURL) + '\');">' + soy.$$escapeHtml(sectionData190.title) + '</span>' : '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(sectionData190.iconFont) + '">' + soy.$$escapeHtml(sectionData190.title) + '</span>') + ((sectionData190.hasTitleCount && sectionData190.titleCount > 0) ? '<aui-badge>' + soy.$$escapeHtml(sectionData190.titleCount) + '</aui-badge>' : '') + '</a></li>' : '';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabNavigation.soyTemplateName = 'GH.tpl.detailview.renderTabNavigation';
}


GH.tpl.detailview.renderTabs = function(opt_data, opt_ignored) {
  var output = '<div id="js-detail-nav-content" class="ghx-detail-nav-content">';
  var tabList238 = opt_data.tabs;
  var tabListLen238 = tabList238.length;
  for (var tabIndex238 = 0; tabIndex238 < tabListLen238; tabIndex238++) {
    var tabData238 = tabList238[tabIndex238];
    output += '<div id="' + soy.$$escapeHtml(tabData238.tabId) + '">';
    var sectionList242 = tabData238.sections;
    var sectionListLen242 = sectionList242.length;
    for (var sectionIndex242 = 0; sectionIndex242 < sectionListLen242; sectionIndex242++) {
      var sectionData242 = sectionList242[sectionIndex242];
      output += '<div id="' + soy.$$escapeHtml(sectionData242.id) + '" class="ghx-detail-section"></div>';
    }
    output += '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabs.soyTemplateName = 'GH.tpl.detailview.renderTabs';
}


GH.tpl.detailview.renderFieldStructure = function(opt_data, opt_ignored) {
  var output = '';
  var isAgileInlineEdit__soy251 = opt_data.field.id == 'timeoriginalestimate' || opt_data.field.id == 'timeestimate';
  output += '<dl class="ghx-detail-list"><dt class="ghx-detail-term ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.field.dataTooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.field.dataTooltip) + '"' : 'title="' + soy.$$escapeHtml(opt_data.field.tooltip ? opt_data.field.tooltip : opt_data.field.label) + '"') + '>' + soy.$$escapeHtml(opt_data.field.label) + ':</dt><dd id="' + soy.$$escapeHtml(opt_data.field.id) + '-val" class="ghx-detail-description ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.issueDetails.editable && opt_data.field.editable) ? 'tabindex="0"' : '') + ' data-field-id="' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.field.dataTooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.field.dataTooltip) + '"' : 'title="' + soy.$$escapeHtml(opt_data.field.tooltip ? opt_data.field.tooltip : opt_data.field.label) + '"') + '></dd></dl>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFieldStructure.soyTemplateName = 'GH.tpl.detailview.renderFieldStructure';
}


GH.tpl.detailview.renderSubtasks = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-container">';
  if (opt_data.subtasks.length == 0) {
    output += GH.tpl.detailview.renderSubtasksEmpty(null);
  } else {
    var issueList297 = opt_data.subtasks;
    var issueListLen297 = issueList297.length;
    for (var issueIndex297 = 0; issueIndex297 < issueListLen297; issueIndex297++) {
      var issueData297 = issueList297[issueIndex297];
      output += '<div class="ghx-subtask js-subtask-issue' + ((issueData297.done) ? ' ghx-done' : '') + '"><div class="ghx-top-row">' + ((issueData297.type && issueData297.type.url) ? '<span class="ghx-type" title="' + soy.$$escapeHtml(issueData297.type.name) + '"><img src="' + soy.$$escapeHtml(issueData297.type.url) + '"></span>' : '') + '<span class="ghx-key"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData297.key) + '" title="' + soy.$$escapeHtml('View this issue') + '" class="js-detailview ghx-key">' + soy.$$escapeHtml(issueData297.key) + '</a></span><span class="ghx-status ' + ((! issueData297.status.statusCategory) ? 'ghx-center' : '') + '">' + GH.tpl.status.renderIcon({status: issueData297.status, maxWidth: 'short'}) + '</span>' + ((opt_data.showTrackingField) ? '<span class="ghx-estimate ghx-right ghx-nowrap"><div title="' + soy.$$escapeHtml('Remaining Estimate') + '">' + GH.tpl.detailview.renderTextView({field: issueData297.trackingField}) + '</div></span>' : '') + '<span class="ghx-sub-avatar">' + ((issueData297.assignee) ? '<span id="issue_summary_assignee_admin" class="user-hover" rel="' + soy.$$escapeHtml(issueData297.assignee.id) + '">' + ((! issueData297.assignee.avatar) ? '<a class="user-hover ghx-sub-avatar" rel="' + soy.$$escapeHtml(issueData297.assignee.id) + '" href="' + soy.$$escapeHtml("") + '/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(issueData297.assignee.id) + '">' + soy.$$escapeHtml(issueData297.assignee.name) + '</a>' : '<img class="user-hover ghx-sub-avatar" src="' + soy.$$escapeHtml(issueData297.assignee.avatar) + '"' + ((issueData297.assignee.name) ? 'alt="' + soy.$$escapeHtml(issueData297.assignee.name) + '" title="' + soy.$$escapeHtml('Assignee') + ': ' + soy.$$escapeHtml(issueData297.assignee.name) + '"' : 'alt=""') + '>') + '</span>' : '') + '</span>' + ((opt_data.showActionsColumn) ? '<button href="#js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" aria-owns="js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" aria-haspopup="true"  class="aui-button ghx-actions aui-button-subtle aui-button-compact aui-dropdown2-trigger aui-dropdown2-trigger-arrowless"><span class="aui-icon ghx-iconfont aui-icon-small aui-iconfont-more"></span></button><!-- Dropdown --><div id="js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" class="js-issue-dropdown aui-style-default aui-dropdown2" data-issue-key="' + soy.$$escapeHtml(issueData297.key) + '" data-issue-id="' + soy.$$escapeHtml(issueData297.id) + '"><ul class="aui-list-truncate">' + ((issueData297.canEdit) ? '<li><a class="js-edit-subtask" title="' + soy.$$escapeHtml('Edit') + '">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((issueData297.canDelete) ? '<li><a class="js-delete-subtask" title="' + soy.$$escapeHtml('Delete') + '">' + soy.$$escapeHtml('Delete') + '</a></li>' : '') + '</ul></div>' : '') + '</div><div class="ghx-summary" title="' + soy.$$escapeHtml('Summary') + '">' + soy.$$escapeHtml(issueData297.summary) + '</div></div>';
    }
    output += (opt_data.subtasks.length > 0 && opt_data.showTrackingField && opt_data.trackingFieldSum) ? '<div class="ghx-estimate-sum ' + soy.$$escapeHtml(opt_data.showActionsColumn ? 'ghx-actions-padding' : '') + ' ghx-nowrap" title="' + soy.$$escapeHtml('Remaining sum') + '">&Sigma; ' + soy.$$escapeHtml(opt_data.trackingFieldSum) + '</div>' : '';
  }
  output += '</div>' + ((opt_data.canCreateSubtask && opt_data.subtasks.length == 0) ? '<div class="ghx-controls"><button class="aui-button js-create-subtask">' + soy.$$escapeHtml('Create Sub-Task') + '</button></div>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasks.soyTemplateName = 'GH.tpl.detailview.renderSubtasks';
}
;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-notification', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/form-notification.js' */
("undefined"===typeof window?global:window).__9803410207c491fb00e8f693e987aa8e=function(){function l(a){return a&&a.__esModule?a:{"default":a}}function m(a){var b=n(a),a=b?a.attr(b):"",c;if(""===a)c=a;else{try{c=JSON.parse(a)}catch(d){c=[a]}c=1===c.length?c[0]:"<ul><li>"+c.join("</li><li>")+"</li></ul>"}return c}function n(a){var b;s.some(function(c){if(a.is("["+c+"]"))return b=c,!0});return b}function h(a){return a.is(":aui-focusable")}function t(a){f(a).tipsy("show");if(h(a))i(a).on("keydown",function(b){var c=
o(i(a).find(":aui-tabbable").last()),d=o(i(a).find(":aui-tabbable").first());b.keyCode===p.default.TAB&&(!b.shiftKey&&!b.altKey)&&c&&c&&a.focus();b.keyCode===p.default.TAB&&b.shiftKey&&d&&d&&(a.focus(),b.preventDefault())})}function j(a){f(a).tipsy("hide")}function i(a){a=f(a);if(a.data("tipsy"))return a.data("tipsy").$tip}function z(a){var a=a.data(A)||"side",b={side:"w",top:"se",bottom:"ne"}[a];b||(b="w",q.warn('Invalid notification position: "'+a+'". Valid options are "side", "bottom, "top"'));
return b}function f(a){return a.next("."+u)}function o(a){return(a=a instanceof d.default?a[0]:a)&&a===document.activeElement}function v(a){a=(0,d.default)(a);if(a.hasClass(r)){var b=n(a);b===w?f(a).addClass("aui-icon-wait"):f(a).removeClass("aui-icon-wait");b?(b=m(a),(d.default.contains(a[0],document.activeElement)||o(a)||!h(a))&&b?t(a):j(a)):j(a)}}"use strict";var d=l(__307d3e18fd611f85395c67cddeb1fe24);__f673a5150978887490995d88aeec0c8d;var q;var e=__cf890abdf040e0993fb71f2f839bc972;if(e&&e.__esModule)q=
e;else{var g={};if(null!=e)for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(g[k]=e[k]);g.default=e;q=g}var e=l(__574ac67f906effeb9d8ec2753b23cf28),p=l(__509557c937caa8763def39004fcf3193),g=l(__c1ce1f1e3e613f564fc234ff043570f1),r="_aui-form-notification-initialised",u="aui-icon-notification",w="data-aui-notification-wait",A="aui-form-notification-position",s=["data-aui-notification-error","data-aui-notification-success",w,"data-aui-notification-info"],x=[],B=["text","url","email","tel","password"];
document.addEventListener("focus",function(a){x.forEach(function(b){var b=(0,d.default)(b),c=i(b);if(h(b)){var e=c&&d.default.contains(c[0],a.target),f=b.is(a.target),g=0<(0,d.default)(a.target).closest(b).length;f||g?t(b):c&&!e&&j(b)}})},!0);document.addEventListener("mousedown",function(a){if(!(0,d.default)(a.target).is("a"))if(!(0<(0,d.default)(a.target).closest(".aui-form-notification-tooltip").length))(0,d.default)("[data-aui-notification-field]").each(function(){var b=(0,d.default)(this),c=
b.is(a.target),e=0<(0,d.default)(a.target).closest(b).length;!c&&!e&&j(b);h(b)&&j(b)})});k=(0,g.default);var y={};s.forEach(function(a){y[a]=v});k("data-aui-notification-field",{attached:function(a){var b=(0,d.default)(a);if(!b.hasClass(r)){b.addClass(r);a=(0,d.default)('<span class="aui-icon aui-icon-small '+u+'"/>');b.after(a);f(b).tipsy({gravity:z(b),title:function(){return m(b)},trigger:"manual",offset:-1!==B.indexOf(b.attr("type"))?9:3,opacity:1,className:function(){var a=n(b);return"aui-form-notification-tooltip "+
("data-aui-notification-error"===a?"aui-form-notification-tooltip-error":"data-aui-notification-info"===a?"aui-form-notification-tooltip-info":void 0)},html:!0});if(h(b))b.on("keydown",function(a){if(a.keyCode===p.default.TAB&&(!a.shiftKey&&!a.altKey)&&""!==m(b)){var d=i(b).find(":aui-tabbable").first();d.length&&(d.focus(),a.preventDefault())}});v(b)}x.push(b)},attributes:y,type:g.default.type.ATTRIBUTE});(0,e.default)("aui/form-notification");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-validator-register', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/form-validation/validator-register.js' */
("undefined"===typeof window?global:window).__94a6aae68277f018287e916fc78c8f6f=function(){var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,h=a&&a.__esModule?a:{"default":a},e;if((a=__cf890abdf040e0993fb71f2f839bc972)&&a.__esModule)e=a;else{var f={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(f[b]=a[b]);f.default=a;e=f}b=(b=__574ac67f906effeb9d8ec2753b23cf28)&&b.__esModule?b:{"default":b};var i=["displayfield",
"watchfield","when","novalidate","state"],g=[],a={register:function(a,b){var c;if("string"===typeof a)c=a;else{var d=!1;a.some(function(a){var b=-1!==h.default.inArray(a,i);b&&(d=a);return b});if(c=d)return e.warn('Validators cannot be registered with the argument "'+c+'", as it is a reserved argument.'),!1;c="[data-aui-validation-"+a.join("],[data-aui-validation-")+"]"}c={validatorFunction:b,validatorTrigger:c};g.push(c);return c},validators:function(){return g}};(0,b.default)("aui/form-validation/validator-register",
a);d.default=a;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-basic-validators', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/form-validation/basic-validators.js' */
("undefined"===typeof window?global:window).__77ff03c875a3139933c9425d867b4b55=function(){function h(a){return a&&a.__esModule?a:{"default":a}}function i(a){var b=a.el.value.length,d=0===b,c=parseInt(a.args("minlength"),10),e=parseInt(a.args("maxlength"),10);c&&e&&c===e&&!d&&b!==c?(b=f("exactlength",a.args,[c]),a.invalidate(b)):c&&b<c&&!d?(b=f("minlength",a.args),a.invalidate(b)):e&&b>e?(b=f("maxlength",a.args),a.invalidate(b)):a.validate()}function j(a,b){var d=a.match(b);return!d?!1:a===d[0]}function k(a){var b=
f("pattern",a.args);j(a.el.value,RegExp(a.args("pattern")))?a.validate():a.invalidate(b)}function l(a){var b=f("required",a.args);a.el.value?a.validate():a.invalidate(b)}function m(a){var b=f("validnumber",a.args),d=parseInt(a.el.value,10);if(isNaN(d))a.invalidate(b);else{var b=a.args("min"),c=a.args("max");b&&d<parseInt(b,10)?a.invalidate(f("min",a.args)):c&&d>parseInt(c,10)?a.invalidate(f("max",a.args)):a.validate()}}function f(a,b,d){var c;c=void 0!==AJS.I18n.keys?AJS.I18n.keys["aui.validation.message."+
a]:n[a];var e=d;d||(e=[b(a)]);c=(a=b(a+"-msg"))?[a].concat(e):[c].concat(e);return AJS.format.apply(null,c)}"use strict";var o=h(__307d3e18fd611f85395c67cddeb1fe24),p=h(__574ac67f906effeb9d8ec2753b23cf28);h(__57111a90131a66c211cf7209c7270167);h(__d74c881c8f23921c15438d0f30c99f80);var g=h(__94a6aae68277f018287e916fc78c8f6f);g.default.register(["maxlength","minlength"],i);g.default.register("[maxlength],[minlength]",i);g.default.register(["matchingfield"],function(a){var b=a.el.value,d=document.getElementById(a.args("matchingfield")),
c=d.value,e=f("matchingfield",a.args,[b,c]);if("password"===a.el.getAttribute("type")||"password"===d.getAttribute("type"))e=f("matchingfield-novalue",a.args);!b||!c?a.validate():c!==b?a.invalidate(e):a.validate()});g.default.register(["doesnotcontain"],function(a){var b=f("doesnotcontain",a.args);-1===a.el.value.indexOf(a.args("doesnotcontain"))?a.validate():a.invalidate(b)});g.default.register(["pattern"],k);g.default.register("[pattern]",k);g.default.register(["required"],l);g.default.register("[required]",
l);g.default.register(["min","max"],m);g.default.register("[min],[max]",m);g.default.register(["dateformat"],function(a){var b=a.args("dateformat"),d=f("dateformat",a.args),c={Y:"[0-9]{4}",y:"[0-9]{2}",m:"(0?[1-9]|10|11|12)",M:"[Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec]",D:"[Mon|Tue|Wed|Thu|Fri|Sat|Sun]",d:"([0-2]?[1-9]|10|20|30|31)"},e="";b.split("").forEach(function(a){e=c.hasOwnProperty(a)?e+c[a]:e+a});j(a.el.value,RegExp(e+"$","i"))?a.validate():a.invalidate(d)});g.default.register(["minchecked",
"maxchecked"],function(a){var b=(0,o.default)(a.el).find(":checked").length,d=!a.args("minchecked")||b>=a.args("minchecked"),b=!a.args("maxchecked")||b<=a.args("maxchecked"),c=f("minchecked",a.args),e=f("maxchecked",a.args);d&&b?a.validate():d?b||a.invalidate(e):a.invalidate(c)});var n={minlength:"Must be greater than or equal to {0} characters",maxlength:"Must be fewer than or equal to {0} characters",exactlength:"Must be exactly {0} characters",matchingfield:"{0} and {1} do not match.",
"matchingfield-novalue":"These fields do not match.",doesnotcontain:"Do not include the phrase {0} in this field",pattern:"This field does not match the required format",required:"This is a required field",validnumber:"Please enter a valid number",min:"Enter a value greater than {0}",max:"Enter a value less than {0}",dateformat:"Enter a valid date",
minchecked:"Tick at least {0}.",maxchecked:"Tick at most {0}."};(0,p.default)("aui/form-validation/basic-validators");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/form-validation.js' */
("undefined"===typeof window?global:window).__78dc5665b5e74967a85beca962aed6d5=function(){function k(a){return a&&a.__esModule?a:{"default":a}}function v(a){if(o(a,"novalidate"))l(a,m);else{r(s(a),"none");var b=[];t.default.validators().forEach(function(c,d){a.is(c.validatorTrigger)&&b.push(d)});l(a,f);var c=[];b.forEach(function(b){var b=t.default.validators()[b].validatorFunction,d=new e.default.Deferred,f={validate:function(){d.resolve()},invalidate:function(b){l(a,g,b);d.reject()},args:function(b){return a.attr("data-"+
w+b)||a.attr(b)},el:a[0],$el:a};AJS.deprecate.prop(f,"$el",{sinceVersion:"5.9.0",removeInVersion:"5.10.0",alternativeName:"el",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-3263."});b(f);c.push(d)});var d=e.default.when.apply(e.default,c);d.done(function(){l(a,m)});return d}}function o(a,b){var c={when:"change"},d=a.attr("data-"+w+b);d||(d=c[b]);return d}function l(a,b,c){a.attr("data-"+n,b);if(b!==i){a.trigger(e.default.Event(x));var d=s(a),h={};h[f]="wait";h[g]="error";h[m]="success";
h=h[b];b===f?setTimeout(function(){a.attr("data-"+n)===f&&r(a,"wait")},500):r(d,h,c)}}function r(a,b,c){var d=a.is("["+j+"wait]");a.removeAttr(j+"wait");a.removeAttr(j+"success");if("success"!==b||d)"none"===b?a.removeAttr(j+"error"):(d=a.attr(j+b)||"[]",c?(c=JSON.parse(d).concat([c]),c=JSON.stringify(c)):c="",a.attr(j+b,c))}function s(a){var b=o(a,"displayfield");return void 0===b?a:(0,e.default)("#"+b)}function y(a,b){b.preventDefault();a.one(x,function(){a.trigger("submit")})}var p={};"use strict";
Object.defineProperty(p,"__esModule",{value:!0});var e=k(__307d3e18fd611f85395c67cddeb1fe24);__9803410207c491fb00e8f693e987aa8e;__77ff03c875a3139933c9425d867b4b55;var z=k(__574ac67f906effeb9d8ec2753b23cf28),A=k(__4d02fe17b8e885a34493e34af3d145dd),u=k(__c1ce1f1e3e613f564fc234ff043570f1),t=k(__94a6aae68277f018287e916fc78c8f6f),w="aui-validation-",j="data-aui-notification-",n="aui-validation-state",g="invalid",m="valid",f="validating",i="unvalidated",x="_aui-internal-field-state-changed";(0,e.default)(document).on("submit",
function(a){var b=a.target,b=(0,e.default)(b),c;c=b.find("._aui-form-validation-initialised");var d=e.default.map(c,function(a){return(0,e.default)(a).attr("data-"+n)});c=-1!==d.indexOf(g);var h=-1!==d.indexOf(i),d=-1!==d.indexOf(f);c=c?g:h?i:d?f:m;c===i?(y(b,a),b.find("[data-"+n+"="+i+"]").each(function(a,b){q.validate((0,e.default)(b))})):c===f?y(b,a):c===g?(a.preventDefault(),b.find("[data-"+n+"="+g+"]").first().focus()):c===m&&(c=e.default.Event("aui-valid-submit"),b.trigger(c),c.isDefaultPrevented()&&
a.preventDefault())});var q={register:t.default.register,validate:function(a){a=(0,e.default)(a);v(a)}};(0,u.default)("data-aui-validation-field",{attached:function(a){a.form&&a.form.setAttribute("novalidate","novalidate");var b=(0,e.default)(a);if(!b.hasClass("_aui-form-validation-initialised")){s(b).attr("data-aui-notification-field","");b.addClass("_aui-form-validation-initialised");var c,d=function(){b.trigger("aui-stop-typing")};b.on("keyup",function(){clearTimeout(c);c=setTimeout(d,1500)});
var f=o(b,"when"),g=o(b,"watchfield");(g?b.add("#"+g):b).on(f,function(){v(b)});l(b,i)}u.default.init(a)},type:u.default.type.ATTRIBUTE});(0,z.default)("aui/form-validation",q);(0,A.default)("formValidation",q);p.default=q;return p=p["default"]}.call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'jira-agile-module/includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogView.soy' */
// This file was automatically generated from SplitIssueDialogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plan.contextmenu.splitissue.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plan == 'undefined') { GH.tpl.plan = {}; }
if (typeof GH.tpl.plan.contextmenu == 'undefined') { GH.tpl.plan.contextmenu = {}; }
if (typeof GH.tpl.plan.contextmenu.splitissue == 'undefined') { GH.tpl.plan.contextmenu.splitissue = {}; }


GH.tpl.plan.contextmenu.splitissue.dialogView = function(opt_data, opt_ignored) {
  var output = '';
  var issue__soy3 = opt_data.model.issue;
  var issueDestinations__soy4 = opt_data.model.issueDestinations;
  output += '<section role="dialog" class="ghx-split-issue-dialog aui-layer aui-dialog2 ' + ((issueDestinations__soy4.length > 0) ? 'aui-dialog2-large' : 'aui-dialog2-medium') + '" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml(AJS.format('Split issue: {0}',issue__soy3.key)) + '</h2></header><div class="aui-dialog2-content"><form class="aui" id="split-issue-form"><table class="aui"><thead><tr><th class="no-width"></th><th>' + soy.$$escapeHtml('Summary') + '</th>' + ((issue__soy3.estimateFieldId) ? '<th class="no-width one-liner">' + soy.$$escapeHtml('Estimate') + '</th>' : '') + ((issueDestinations__soy4.length > 0) ? '<th class="no-width">' + soy.$$escapeHtml('Send to') + '</th>' : '') + '<th class="no-width"></th></tr></thead><tbody id="ghx-split-issues-rows">' + GH.tpl.plan.contextmenu.splitissue.issueRow({model: opt_data.model, isNewIssueRow: false}) + GH.tpl.plan.contextmenu.splitissue.issueRow({model: opt_data.model, isNewIssueRow: true}) + '</tbody></table><button class="ghx-split-issues-add-row aui-button aui-button-subtle" type="button"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>' + soy.$$escapeHtml('Add another') + '</button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><div class="spinner"></div><div class="button-container"><button id="split-issue-dialog-submit-button" title="' + soy.$$escapeHtml('You need at least one new issue with a non-empty summary') + '" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Split') + '</button><button id="split-issue-dialog-close-button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Cancel') + '</button></div></div></footer></section>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.plan.contextmenu.splitissue.dialogView.soyTemplateName = 'GH.tpl.plan.contextmenu.splitissue.dialogView';
}


GH.tpl.plan.contextmenu.splitissue.issueRow = function(opt_data, opt_ignored) {
  var output = '';
  var issue__soy43 = opt_data.model.issue;
  var issueDestinations__soy44 = opt_data.model.issueDestinations;
  var rowClass__soy45 = opt_data.isNewIssueRow ? 'ghx-split-new-issue' : 'ghx-split-original-issue';
  output += '<tr class="' + soy.$$escapeHtml(rowClass__soy45) + '"><td class="ghx-type"><img src="' + soy.$$escapeHtml(issue__soy43.typeUrl) + '" width="16" height="16"></td><td class="one-liner"><input class="ghx-split-summary text long-field" type="text" data-aui-validation-field data-aui-validation-nonempty data-aui-validation-when="change validate_input"' + ((! opt_data.isNewIssueRow) ? 'value="' + soy.$$escapeHtml(issue__soy43.summary) + '"' : '') + '></td>' + ((issue__soy43.estimateFieldId) ? '<td class="one-liner"><input class="ghx-split-estimate text short-field" data-aui-validation-field data-aui-validation-when="change validate_input"' + ((issue__soy43.estimateStatisticRequired) ? 'data-aui-validation-nonempty' : '') + ((! opt_data.isNewIssueRow) ? ' value="' + soy.$$escapeHtml(issue__soy43.estimate) + '" ' : '') + '></td>' : '');
  if (issueDestinations__soy44.length > 0) {
    var selectedItem__soy71 = opt_data.isNewIssueRow ? opt_data.model.defaultDestinationForNewIssue : issue__soy43.containingSprint;
    output += '<td>' + GH.tpl.component.sprintselect.renderSelectElement({items: issueDestinations__soy44, selectedItem: selectedItem__soy71, cssClass: 'select destination-single-select'}) + '</td><td class="destination-warning"><span title="' + soy.$$escapeHtml('Sprint scope will be affected by this action.') + '" class="icon aui-icon aui-icon-small aui-iconfont-warning destination-warning-hidden"></span></td>';
  }
  output += '<td>' + ((opt_data.isNewIssueRow) ? '<button class="ghx-split-issues-delete-row aui-button aui-button-subtle" tabindex="-1" type="button"><span class="aui-icon aui-icon-small aui-iconfont-delete"></span></button>' : '') + '</td></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.plan.contextmenu.splitissue.issueRow.soyTemplateName = 'GH.tpl.plan.contextmenu.splitissue.issueRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'jira-agile-module/includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogView.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-view",["require"],function(t){"use strict";var i=t("backbone"),e=t("jira-agile/browser-metrics/browser-metrics-util");return AJS.formValidation.register(["nonempty"],function(i){var e=i.el.value;e&&e.trim()?i.validate():i.invalidate("This is a required field")}),i.View.extend({el:"body",initialize:function(i){this.model=i,this.issue=i.issue},events:{"click #split-issue-dialog-close-button":"hide","click #split-issue-dialog-submit-button":"onSubmit","click .ghx-split-issues-add-row":"addRow","click .ghx-split-issues-delete-row":"deleteRow","change .ghx-split-original-issue .ghx-split-estimate":"evaluateScopeChange","change .destination-single-select":"evaluateScopeChange","focus .ghx-split-issues-add-row":"addRow","keyup .ghx-split-summary":"onKeyPress","keyup .ghx-split-estimate":"onKeyPress"},render:function(){var e=this,i=t("jira/ajs/select/single-select");this.$el.append(GH.tpl.plan.contextmenu.splitissue.dialogView({model:this.model})),AJS.dialog2(".ghx-split-issue-dialog").show(),AJS.dialog2(".ghx-split-issue-dialog").on("hide",this.undelegateEvents.bind(this)),this.$(".ghx-split-issue-dialog .select").each(function(){new i({element:this,itemAttrDisplayed:"label"})}),this.$("#split-issue-form").on("submit",function(i){return i.preventDefault(),e.onSubmit(),!1})},hide:function(){AJS.dialog2(".ghx-split-issue-dialog").hide()},processValidationErrors:function(i){var e,t,s=this.getFields();for(e in i)!{}.hasOwnProperty.call(i,e)||((t=i[e]).errorMessageForSummary&&(s[t.index].summary[0].dataAuiNotificationError=t.errorMessageForSummary),t.errorMessageForEstimate&&(s[t.index].estimate[0].dataAuiNotificationError=t.errorMessageForEstimate));this.setWaitModeEnabled(!1)},onKeyPress:function(i){13==i.keyCode&&this.onSubmit()},isInputValid:function(){function i(i,e){function t(i){return!i||!i.trim()}if(t(i(e.issue)))return 1;var s,n=e.getSubmitModel();for(s in n.newIssues)if(n.newIssues.hasOwnProperty(s))if(t(i(n.newIssues[s])))return 1}return!(i(function(i){return i.summary},this)||this.model.estimateStatisticRequired&&i(function(i){return i.estimate},this))},setWaitModeEnabled:function(i){i?(this.$(".spinner").spin(),this.$("#split-issue-dialog-submit-button").prop("disabled","disabled")):(this.$(".spinner").spinStop(),this.$("#split-issue-dialog-submit-button").removeProp("disabled"))},onSubmit:function(){e.triggerBefore("before:splitIssueSubmit","splitIssue"),this.isInputValid()?(this.setWaitModeEnabled(!0),this.trigger("submit",this.getSubmitModel())):this.getFields().forEach(function(i){i.summary.trigger("validate_input"),i.estimate&&i.estimate.trigger("validate_input")})},addRow:function(){var i=t("jira/ajs/select/single-select"),e=this.$("#ghx-split-issues-rows");e.append(GH.tpl.plan.contextmenu.splitissue.issueRow({model:this.model,isNewIssueRow:!0})),new i({element:e.find(".ghx-split-new-issue .select").last(),itemAttrDisplayed:"label"}),this.$(".ghx-split-summary").last().focus()},deleteRow:function(i){this.$(i.target).closest(".ghx-split-new-issue").remove()},evaluateScopeChange:function(i){var e=this.$(i.target).closest("tr"),t=e.hasClass("ghx-split-new-issue"),i=e.find(".destination-single-select"),s=parseInt(i.val()[0]);(t?(t=this.model.issueDestinations.find(function(i){return i.id===s}))&&"ACTIVE"===t.state:e.find(".ghx-split-estimate").val().trim()!==this.model.issue.estimate||s!==this.model.issue.containingSprint.id)?this.showWarning(e):this.hideWarning(e)},showWarning:function(i){i.find(".destination-warning span").removeClass("destination-warning-hidden")},hideWarning:function(i){i.find(".destination-warning span").addClass("destination-warning-hidden")},getSubmitModel:function(){var i=this.getFields(),e=this.extractNewIssues(this.issue.estimateFieldId);return{originalIssue:{summary:i[0].summary.val(),estimate:i[0].estimate.val(),estimateFieldId:this.issue.estimateFieldId,destinationId:i[0].destination.val()?i[0].destination.val()[0]:void 0},newIssues:e}},extractNewIssues:function(e){return this.getFields().slice(1).map(function(i){return{summary:i.summary.val(),estimate:i.estimate.val(),estimateFieldId:e,destinationId:i.destination.val()?i.destination.val()[0]:void 0}})},getFields:function(){for(var i=function(i){return{summary:i.find(".ghx-split-summary"),estimate:i.find(".ghx-split-estimate"),destination:i.find(".select")}},e=[i(this.$(".ghx-split-original-issue"))],t=this.$(".ghx-split-new-issue"),s=0;s<t.length;s++)e.push(i(this.$(t[s])));return e}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'jira-agile-module/includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogController.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-controller",["jira-agile/browser-metrics/browser-metrics-util"],function(i){"use strict";var t=require("jira/util/events"),r=require("jira/featureflags/feature-manager");function s(s,i){this.issue=s,this.backlogController=i}return s.prototype.bind=function(s){this.view=s,this.view.on("submit",this.onSubmit,this)},s.prototype.onSubmit=function(s){var e;e=this.issue.id,GH.Ajax.put({url:"/issue/"+e+"/split",data:s}).done(function(s){var i=(r.getFlagValue("odin.ec.client.integration.cbb")||"").split(",");Array.isArray(i)&&i.includes("split-issues")&&s&&s.success&&s.success.splitIssueIds&&t.trigger("issueSplit",{oldIssueId:e,newIssueId:s.success.splitIssueIds})}).always(function(){i.performanceMark("split-issue-browser-metric-backend-response-received")}).done(function(s){s.success.errors?this.view.processValidationErrors(s.success.errors):(this.view.hide(),this.backlogController.loadData())}.bind(this)).fail(function(){this.view.hide()}.bind(this)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.split.submit",data:{newIssueCount:s.newIssues.length}})},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'jira-agile-module/includes/js/rapid/ui/plan/contextmenu/SplitIssueAction.js' */
define('jira-agile/rapid/ui/plan/contextmenu/split-issue-action', ['require'], function(require) {
    'use strict';

    var $ = require('jquery');
    var Ajax = require('jira-agile/rapid/ajax');
    var GlobalEvents = require('jira-agile/rapid/global-events');
    var DialogView = require('jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-view');
    var DialogController = require('jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-controller');
    const AnalyticsClient = require('jira/analytics/web-client');

    var BacklogController;
    var BacklogModel;
    GlobalEvents.on('pre-initialization', function() {
        BacklogController = require('jira-agile/rapid/ui/plan/backlog-controller');
        BacklogModel = require('jira-agile/rapid/ui/plan/backlog-model');
    });
    const BrowserMetricsUtil = require('jira-agile/browser-metrics/browser-metrics-util');

    function shouldAppendAction(ctx) {
        return ctx.singleIssue && !ctx.containsSubtasks && GH.RapidBoard.State.isPlanMode();
    }

    function shouldDisplayIssueDestinationSelector(issue) {
        var displaysIssueDestinationSelector = false;
        if(GH.RapidBoard.State.isScrumBoard()) {
            if (GH.RapidBoard.State.isPlanMode()) {
                var containingActiveSprint = BacklogModel.getActiveSprintModels().find(activeSprint => activeSprint.issueList.getIssueIdForKey(issue.key));
                displaysIssueDestinationSelector = typeof containingActiveSprint !== 'undefined';
            } else {
                displaysIssueDestinationSelector = true;
            }
        }

        return displaysIssueDestinationSelector;
    }

    function getDialogData(issue, displaysIssueDestinationSelector) {
        var dialogDataDeferred = $.Deferred();

        Ajax.get({
            url: '/issue/' + issue.id + '/split',
            data: {
                rapidViewId: GH.RapidBoard.State.getRapidViewId(),
                getIssueDestinations: displaysIssueDestinationSelector
            }
        }).done(function(dialogData) {
            if (dialogData.userHasPermissionToSplit) {
                GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.COMMON.ISSUE_SPLIT);

                dialogDataDeferred.resolve(dialogData);
            } else {
                GH.Notification.showError("We can\'t split this issue",
                                          "Please ensure you have permissions to create, edit, link, and schedule issues", true);
                dialogDataDeferred.reject();
            }
        });

        return dialogDataDeferred;
    }

    function constructViewModel(issue) {
        var estimateFieldId;
        var estimate = '';
        if (issue.estimateStatistic && issue.estimateStatistic.statFieldId !== 'issueCount') {
            estimateFieldId = issue.estimateStatistic.statFieldId;
            estimate = issue.estimateStatistic.statFieldValue.text || '';
        }

        return {
            issue: {
                key: issue.key,
                id: issue.id,
                summary: issue.summary,
                estimateFieldId: estimateFieldId,
                estimate: estimate,
                estimateStatisticRequired: issue.estimateStatisticRequired,
                typeUrl: issue.typeUrl
            }
        };
    }

    function enhanceSprintNamesWithState(dialogData) {
        var issueDestinations = [dialogData.containingSprint].concat(dialogData.issueDestinations);
        issueDestinations.forEach(dest => {
            if(dest.state) {
                var stateInfo = dest.state === 'ACTIVE' ? "Active sprint" : "Future sprint";
                dest.name += ' (' + stateInfo + ')';
            }
        })
    }

    function getViewModel(issue) {
        var displaysIssueDestinationSelector = shouldDisplayIssueDestinationSelector(issue);
        var dialogDataDeferred = getDialogData(issue, displaysIssueDestinationSelector);

        var viewModel = constructViewModel(issue);
        viewModel.displaysIssueDestinationSelector = displaysIssueDestinationSelector;

        var viewModelDeferred = $.Deferred();
        dialogDataDeferred.done(dialogData => {
            if(displaysIssueDestinationSelector) {
                enhanceSprintNamesWithState(dialogData);
            }

            viewModel.issueDestinations = dialogData.issueDestinations;
            viewModel.defaultDestinationForNewIssue = dialogData.issueDestinations.find(dest => dest.id === -1);
            viewModel.issue.containingSprint = dialogData.containingSprint;
            viewModelDeferred.resolve(viewModel);
        });

        dialogDataDeferred.fail(() => viewModelDeferred.reject());
        return viewModelDeferred;
    }

    function renderSplitIssueDialog(issue) {
        BrowserMetricsUtil.triggerBefore('before:splitIssuePopup');
        var viewModelDeferred = getViewModel(issue);
        viewModelDeferred.done(viewModel => {
            var view = new DialogView(viewModel);
            var controller = new DialogController(issue, BacklogController);

            controller.bind(view);
            view.render();
            AJS.trigger('analytics', {name: 'gh.issue.ctx.menu.action.split'});
        });
    }

    function splitActionMenuItem(ctx) {
        return {
            id: 'ghx-issue-ctx-action-split-issue',
            name: 'split-issue',
            label: "Split issue",
            actionFn: function() {
                var selectedIssue = ctx.selectedIssuesData[0];
                renderSplitIssueDialog(selectedIssue);
                AnalyticsClient.sendUIEvent({
                    source: 'backlogScreen',
                    actionSubject: 'dropdownItem',
                    action: 'clicked',
                    actionSubjectId: 'splitIssue',
                    attributes: {
                        boardType: GH.RapidBoard.State?.getBoardType(),
                    }
                });
            }
        };
    }

    var SplitIssueAction = {};
    SplitIssueAction.appendItem = function(ctx, issueActions) {
        if (shouldAppendAction(ctx) && !GH.RapidBoard.State.isAgilityBoard()) {
            issueActions.push(splitActionMenuItem(ctx));
        }
    };

    return SplitIssueAction;
});
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogView.js' */
define("jira-agile/rapid/ui/plan/BacklogView",["require"],function(e){"use strict";var i=e("underscore"),o=e("jquery"),a=e("jira-agile/rapid/global-events"),n=e("jira-agile/rapid/ui/plan/backlog-model2"),r=e("jira-agile/rapid/ui/plan/sprint-view"),s=e("jira-agile/rapid/ui/plan/sprint-backlog-view"),l=e("jira-agile/rapid/ui/plan/sprint-model"),t=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),d=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),c=e("jira-agile/browser-metrics/browser-metrics-util"),g=(e("jira/featureflags/feature-manager"),void 0);a.on("pre-initialization",function(){g=e("jira-agile/rapid/ui/plan/backlog-controller")});var u={containerSelector:"#ghx-backlog",getContainer:function(){return u.container||(u.container=o(u.containerSelector)),u.container},draw:function(){u.container=void 0,o(u.containerSelector).html(GH.tpl.backlogview.renderBacklogView({}));var e=g.calculateIssueRenderData();r.renderAllSprints(e),d.enableDragAndDrop(),s.renderBacklog(e)},_enableDragAndDropOnHover:function(){d.enableDragAndDrop(),o(u.containerSelector).trigger("backlog.enable.drag.drop.hover.off")},registerEventHandlers:function(){u.registerHoverHandlers(),u.registerClickHandlers()},registerHoverHandlers:function(){var e=o(u.containerSelector);e.on("mouseover",u._enableDragAndDropOnHover),e.on("backlog.enable.drag.drop.hover.off",function(){e.off("mouseover",u._enableDragAndDropOnHover)})},registerClickHandlers:function(){o(u.containerSelector).delegate(".js-clear-all-filters","click",function(e){g.clearFilters()})},redrawChangedModel:function(e){u.redrawChangedModels([e])},redrawChangedModels:function(e){i.each(e,function(e){l.isSprintModel(e)?r.updateSprintViewForModel(e):n.isBacklogModel(e)&&s.updateBacklog()}),GH.planOnboarding.renderOnboarding(),d.enableDragAndDrop(),GH.sprintActions.createDropdown(),c.performanceMark("after:backlogRankIssueUI")},updateSprintsAfterAddRemove:function(){var e=g.calculateIssueRenderData();r.renderAllSprints(e),GH.planOnboarding.renderOnboarding(),d.enableDragAndDrop(),GH.sprintActions.createDropdown()},updateIssueSelectionState:function(e){var r=null,i=t.getSelectedIssueKey(),s=i;o(u.containerSelector).find(".js-issue").removeClass("ghx-selected ghx-selected-primary").each(function(e,a){var n=o(a),a=n.data("issue-key");t.isInSelection(a)&&(n.addClass("ghx-selected"),i==a&&n.addClass("ghx-selected-primary")),null!=s&&a===s&&(r=n)}),r&&e&&u._scrollToView(r)},updateHiddenIssues:function(){var a=g.calculateIssueRenderData(),e=o("#ghx-backlog");u._hideBacklogView();e=e.find(".js-issue-list");i.each(e,function(e){e=o(e);e.closest(".ghx-backlog-group").length||e.is(".js-empty-list")||(u._updateIssuesVisibilityInIssueList(e,a)?e.removeClass("ghx-has-issues").addClass("ghx-no-issues"):e.removeClass("ghx-no-issues").addClass("ghx-has-issues"))}),r.updateSprintStatistics(),s.updateBacklogHeader(),GH.PlanView.showLoadingBacklog(),setTimeout(function(){s.updateBacklog(),GH.planOnboarding.renderOnboarding(),u._showBacklogView(),GH.PlanView.hideLoadingBacklog()})},_hideBacklogView:function(){o("#ghx-backlog").css({display:"none"})},_showBacklogView:function(){o("#ghx-backlog").css({display:""})},_updateIssuesVisibilityInIssueList:function(e,n){var a=e.find(".js-issue"),r=!0;return i.each(a,function(e){var a=o(e),e=a.attr("data-issue-key");n.hiddenIssues[e]?(a.addClass("ghx-filtered"),a.hasClass("ghx-issue-subtask")||a.parents(".ghx-parent-group").addClass("js-fake-parent")):(a.removeClass("ghx-filtered"),a.hasClass("ghx-issue-subtask")||a.parents(".ghx-parent-group").removeClass("js-fake-parent"),r=!1)}),e.find(".js-fake-parent").each(function(e,a){0===(a=o(a)).find(".js-issue:not(.ghx-filtered)").length?a.addClass("ghx-parent-group-filtered"):a.removeClass("ghx-parent-group-filtered")}),r},checkBacklogWidth:function(){u.getContainer().width()<600?o("body").addClass("ghx-plan-band-1").removeClass("ghx-plan-band-2"):o("body").addClass("ghx-plan-band-2").removeClass("ghx-plan-band-1"),GH.planOnboarding.refresh()},_scrollToView:function(e){var a=o("#ghx-backlog"),n=a[0].getBoundingClientRect(),e=e[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(a,n,e)}};return u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogView.soy' */
// This file was automatically generated from BacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.backlogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.backlogview == 'undefined') { GH.tpl.backlogview = {}; }


GH.tpl.backlogview.renderBacklogView = function(opt_data, opt_ignored) {
  return '<div id="ghx-content-group"><div class="ghx-sprint-group"></div><div class="ghx-backlog-group"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderBacklogView.soyTemplateName = 'GH.tpl.backlogview.renderBacklogView';
}


GH.tpl.backlogview.renderDragOverlay = function(opt_data, opt_ignored) {
  return '<div class="ghx-drag-overlay"></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderDragOverlay.soyTemplateName = 'GH.tpl.backlogview.renderDragOverlay';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanView.js' */
define("jira-agile/rapid/ui/plan/plan-view",["require","jquery","jira-agile/rapid/global-events","jira-agile/rapid/ui/plan/plan-controls","jira-agile/tooltip","jira-agile/rapid/const/PageMode","jira-agile/rapid/ui/bento/bento-features","jira/analytics","jira-agile/rapid/wrm-spa-utils","jira/featureflags/feature-manager","jira-agile/rapid/deferred-resources-loader"],function(l,t,e,i,o,n,s,a,r,d,g){"use strict";var p,c,h=void 0;e.on("pre-initialization",function(){c=l("jira-agile/rapid/ui/plan/plan-controller"),p=l("jira-agile/rapid/ui/plan/BacklogView"),h=l("jira-agile/rapid/ui/plan/plan-drag-and-drop")});var u={},x=!1;u.init=function(){var e=t(document);e.on("click",".js-view-action-toggle-releases-column, .js-release-toggle",c.toggleVersionsColumn),e.on("click",".js-view-action-toggle-epics-column, .js-epic-toggle",c.toggleEpicsColumn),e.on("click",".js-view-actions-plan .js-view-action-toggle-epics-lozenge",c.toggleEpicsShowOnBacklog),x=GH.RapidBoard.State.isAgilityBoard()},u.show=function(){u.detailViewPositioned=!1,t("body").addClass("ghx-mode-planning"),e=t(GH.tpl.plancontroller.renderSkeleton({shouldShowEpic:!x&&GH.RapidBoard.State.showEpicAsPanel(),shouldHidePanels:x,isbacklogDataV2Enabled:GH.EpicView.isbacklogDataV2Enabled(),shouldShowFlexibleNomenclatureEpicText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText(),epicLevelName:GH.RapidBoard.State.getEpicLevelName()})),GH.PlanController.setDetailViewOpenedState(GH.RapidBoard.State.isDetailsViewPlanOpened(),e),t("#ghx-plan").empty().append(e);var e=t(".js-release-toggle");o.tipsify({selector:e,gravity:"w",html:!0,className:"ghx-tipsy-alt"});e=t(".js-epic-toggle");o.tipsify({selector:e,gravity:"w",html:!0,className:"ghx-tipsy-alt"});var i,a=GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isSimpleBoard;GH.DetailsView.setContainerSelector("#ghx-detail-view"),GH.DetailsView.setOptions({canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!1,updateSizeHandler:u.updateDetailViewSize,closeHandler:c.closeDetailsView,wantsBentoInBacklog:function(){return a||s.isBentoInBacklogEnabled()}}),AJS.$("#ghx-issue-fragment").on("hide-backlog-issue",function(){c.closeDetailsView()}),u.applyBacklogWillChangePerfHandlers(),GH.RapidBoard.State.isKanbanBoard()&&(i=void 0,g.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===n.PLAN&&!i,function(){(i=l("jira-agile/rapid/ui/kanplan/kanplan-acknowledge")).show()})),delete p.container},u.updateDetailViewState=function(e){var i=c.isDetailsViewOpened(),a=e||t("#ghx-plan-group"),e=e?e.find("#ghx-detail-view"):t("#ghx-detail-view");i?(a.addClass("ghx-has-detail"),e.css({display:""})):(a.removeClass("ghx-has-detail"),e.css({display:"none"})),GH.ViewActions.setDetailViewVisible(i)},u.updateVersionColumnState=function(){var e=t("#ghx-version-column"),i=t("#ghx-plan-group"),a=t(".js-release-toggle"),l=c.isVersionsColumnVisible();GH.EpicView.isbacklogDataV2Enabled()&&(e.toggleClass("ghx-hidden",!l),i.toggleClass("ghx-version-expanded",l),a.toggleClass("ghx-active",l)),l?(GH.EpicView.isbacklogDataV2Enabled()||(e.css({display:""}),i.addClass("ghx-version-expanded"),a.addClass("ghx-active")),GH.EpicView.isbacklogDataV2Enabled()&&w(e)&&(GH.VersionView.show(),b(),GH.BacklogController.updateVersionData().always(u.hideLoadingVersions)),o.disable(a)):(GH.EpicView.isbacklogDataV2Enabled()?a.attr("data-tooltip",GH.tpl.plancontroller.renderVersionPanelTipsyExpand()):(e.css({display:"none"}),i.removeClass("ghx-version-expanded"),a.attr("data-tooltip",GH.tpl.plancontroller.renderVersionPanelTipsyExpand()).removeClass("ghx-active")),o.enable(a)),GH.ViewActions.setVersionsPanelVisible(l)};var w=function(e){return e.is(":empty")||e.find(".ghx-classification-scrollview").is(":empty")};u.updateEpicsColumnState=function(){var e,i=t("#ghx-epic-column"),a=t("#ghx-plan-group"),l=t(".js-epic-toggle"),o=c.isEpicsColumnVisible()&&GH.RapidBoard.State.showEpicAsPanel();GH.EpicView.isbacklogDataV2Enabled()&&(i.toggleClass("ghx-hidden",!o),a.toggleClass("ghx-epic-expanded",o),l.toggleClass("ghx-active",o)),o?(GH.EpicView.isbacklogDataV2Enabled()||(i.css({display:""}),a.addClass("ghx-epic-expanded"),l.addClass("ghx-active")),GH.EpicView.isbacklogDataV2Enabled()&&V(i)&&(GH.EpicView.show(),u.showLoadingEpics(),GH.BacklogController.updateEpicData().always(u.hideLoadingEpics))):(e={shouldShowFlexibleNomenclatureEpicText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText(),epicLevelName:GH.RapidBoard.State.getEpicLevelName()},GH.EpicView.isbacklogDataV2Enabled()?l.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand(e)):(i.css({display:"none"}),a.removeClass("ghx-epic-expanded"),l.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand(e)).removeClass("ghx-active"))),GH.ViewActions.setEpicsPanelVisible(o)},u.updateEpicsToggleAndTipsyTextWithEpicLevelName=function(e){var i;GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText()?t(".ghx-epic-toggle > .ghx-inner").text(e):t(".ghx-epic-toggle > .ghx-inner").text("Epics"),c.isEpicsColumnVisible()&&GH.RapidBoard.State.showEpicAsPanel()||(i=t(".js-epic-toggle"),e={shouldShowFlexibleNomenclatureEpicText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText(),epicLevelName:e},GH.EpicView.isbacklogDataV2Enabled()?i.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand(e)):i.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand(e)).removeClass("ghx-active"))};var V=function(e){return e.is(":empty")||e.find(".ghx-classification-scrollview").is(":empty")};u.updateViewActions=function(){GH.ViewActions.setDetailViewVisible(c.isDetailsViewOpened()),GH.ViewActions.setEpicsPanelVisible(c.isEpicsColumnVisible()),GH.ViewActions.setVersionsPanelVisible(c.isVersionsColumnVisible()),g.handleDeferredResourceImport(!GH.GridDataController,function(){GH.GridDataController.getModel()&&GH.ViewActions.setSwimlanes(GH.GridDataController.getModel().hasSwimlanes())})},u.updateHorizontalPositioning=function(){g.handleDeferredResourceImport(!GH.DetailsView||!GH.DetailsView.updateSize,function(){GH.DetailsView.updateSize()})},u.applyBacklogWillChangePerfHandlers=function(){function e(i){return function(e){h.isAnyIssueBeingDragged()||t(e.currentTarget).toggleClass("will-change",i)}}t("#ghx-backlog").hover(e(!0),e(!1))},u.toggleWillChangeDisable=function(e){AJS.$("#ghx-backlog").toggleClass("will-change-disable",e)},u.updateDetailViewSize=function(){var e,i=t("#ghx-detail-issue");0<i.length&&(e=i.outerHeight(),i=t("#ghx-detail-head").outerHeight(),t("#js-detail-nav-content").css({height:e-i-13}))},u.doUpdateDetailsView=function(){u.detailViewPositioned||(u.detailViewPositioned=!0,u.updateFixedElementPositioning())},u.hide=function(){t("body").removeClass("ghx-mode-planning"),t("#ghx-plan").empty()},u.hideLoadingFilter=function(){t("body").removeClass("ghx-loading-quickfilter")},u.showLoadingBacklog=function(){t("body").addClass("ghx-loading-backlog"),t(".adg-throbber").show(),r.sendSpinnerShowEvent("plan")},u.hideLoadingBacklog=function(){t("body").removeClass("ghx-loading-backlog"),t(".adg-throbber").hide(),r.sendSpinnerHideEvent("plan")},u.updateFixedElementPositioning=function(){c&&c.isVisible&&(i.resizeQuickFilters({mode:n.PLAN}),u.updateHorizontalPositioning())};var b=function(){t("body").addClass("ghx-loading-versions"),t("#ghx-version-column .ghx-progress-indicator.ghx-initial").spin("large")};return u.hideLoadingVersions=function(){t("body").removeClass("ghx-loading-versions"),t("#ghx-version-column .ghx-progress-indicator.ghx-initial").spinStop()},u.showLoadingEpics=function(){t("body").addClass("ghx-loading-epics"),t("#ghx-epic-column .ghx-progress-indicator.ghx-initial").spin("large")},u.hideLoadingEpics=function(){t("body").removeClass("ghx-loading-epics"),t("#ghx-epic-column .ghx-progress-indicator.ghx-initial").spinStop()},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogController.js' */
define("jira-agile/rapid/ui/plan/backlog-controller",["require"],function(r){"use strict";var s=r("underscore"),n=r("jquery"),d=r("jira-agile/rapid/ui/plan/backlog-model"),o=r("jira-agile/rapid/ui/plan/BacklogView"),l=r("jira-agile/rapid/ui/plan/backlog-selection-controller"),i=(r("jira-agile/rapid/global-events"),r("jira-agile/rapid/ui/plan/sprint-backlog-controller")),e=r("jira-agile/rapid/ui/plan/sprint-view"),a=r("jira-agile/rapid/ui/plan/sprint-backlog-view"),u=r("jira-agile/rapid/ui/plan/sprint-config"),t=r("jira-agile/rapid/ui/plan/plan-controls"),c=r("jira-agile/rapid/ui/plan/plan-view"),p=r("jira-agile/rapid/ui/plan/plan-issue-list-view"),g=r("jira-agile/rapid/ui/plan/plan-controller"),f=r("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),I=r("jira-agile/rapid/ui/plan/sprint-controller"),E=r("jira-agile/rapid/const/PageMode"),S=r("jira-agile/rapid/configuration/ConfigContextLoader"),b=r("jira-agile/rapid/board-data-loader"),v=r("jira-agile/rapid/work/quick-filters-bridge"),H=r("jira-agile/rapid/ui/bento/bento-features"),C=r("jira/featureflags/feature-manager"),G=r("jira-agile/browser-metrics/browser-metrics-util"),w=r("jira-agile/rapid/deferred-resources-loader"),V={analyticsSource:"backlog",application:"jira-software"},D=null;w.handleDeferredResourceImport(!w.isResourceAvailable("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),function(){return D=r("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason")});var h=new GH.Events;h.visible=!1,h.rapidViewData=void 0,h.rapidViewConfig=void 0,h.firstIssueView=!0,h.lastExecutedSearchFilter=void 0,h.issueCreatedCallbacks={},h.init=function(){l.init(),i.init(),I.init(),w.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===E.PLAN,function(){r("jira-agile/rapid/ui/plan/plan-rank-controller").init()});var e=n(GH);e.bind("issueUpdated",h.handleIssueUpdated),AJS.$("#ghx-issue-fragment").on("issue-updated",function(e,i){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.ISSUE_UPDATE_BENTO);i={issueKey:i.issueKey,fieldId:i.fieldId,source:"detailView"};h.handleIssueUpdated({type:"issueUpdated"},i)}),e.bind("issueCreated",h.handleIssueCreated),e.bind("issuesRemovedFromSprint",h.handleIssuesRemovedFromSprint),w.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===E.PLAN,function(){e.bind(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED,h.handleSprintStarted)}),n(t.quickfilters).bind("quickFilterChange",function(){h.visible&&h.loadData()})},h.setRapidView=function(e){h.rapidViewData=e},h.setRapidViewConfig=function(e){h.rapidViewConfig=e},h.show=function(e){if(!h.rapidViewData)return!1;h.visible=!0,h.loadData(!1).done(e)},h.hide=function(){GH.EpicView.hide(),h.visible=!1},h.loadData=function(e){c.showLoadingBacklog();try{localStorage.setItem("name","Hello World!");try{localStorage.removeItem("name")}catch(e){console.warn("Remove item failed",e.toString())}}catch(e){r("jira/analytics/web-client").sendTrackEvent({source:"boardScreen",action:"viewed",actionSubject:"board",attributes:{boardId:GH.RapidBoard.State.getRapidViewId(),boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(!0),projectType:JIRA.API.Projects.getCurrentProjectType(),isLocalStorageFull:!0}})}var i=b.loadData(E.PLAN,function(){return(C.isFeatureEnabled("jsw.classic.board.api-calls.modern-frontend")&&GH.RapidBoard.loadData&&(GH.RapidBoard.State.isFirstLoad()||GH.RapidBoard.State.isLoadDataClaimed())?k:y)()});return h.processGetDataResponse(e,i)};var k=function(){var e=AJS.$.Deferred(),i=!GH.RapidBoard.State.isFirstLoad()&&!GH.RapidBoard.State.isLoadDataClaimed();return GH.RapidBoard.loadData({isRefresh:i,deferred:e,mode:E.PLAN}),e.always(function(){GH.RapidBoard.State.setLoadDataClaimed(!1)}),e.promise()},y=function(){var e={rapidViewId:h.rapidViewData.id,activeQuickFilters:t&&t.quickfilters?t.quickfilters.getActiveQuickFilters():null,selectedProjectKey:GH.RapidBoard.projectKey};s.isEmpty(e.activeQuickFilters)&&delete e.activeQuickFilters,GH.planOnboarding.refresh();var i=GH.EpicView.isbacklogDataV2Enabled()?"/xboard/plan/v2/backlog/data.json":"/xboard/plan/backlog/data.json",e=AJS.$.extend({},e);return e.forceConsistency=GH.ECX.shouldForceConsistency(),GH.Ajax.get({url:i,data:e,deferErrorHandling:!0},"backlogDataModel")};h.processGetDataResponse=function(i,e){var a=this,t=h.rapidViewData.id,r=AJS.$.Deferred();return e.done(function(e){GH&&GH.ECX&&GH.ECX.fireReadEvent&&GH.ECX.fireReadEvent("backlogScreen","backlogDataFetched"),h.processData(i,e),r.resolve()}).fail(function(e,i){c.hideLoadingBacklog(),g.hide(),g.sla.latestErrorStatusCode=i&&i.status,g.setServerFailureResponse(e.error),!GH.RapidBoard.State.isKanbanBoard()||(e=a._getMessageFromErrorResponse(e))==="Kanban backlog is not enabled for this board"&&(GH.RapidBoard.ViewController.sidebarController.removePlanMenuItem(t),AJS.flag({type:"info",body:e}),GH.RapidBoard.ViewController.setMode(E.WORK)),r.resolve()}),r.promise()},h._getMessageFromErrorResponse=function(e){return e.error&&e.error.errors&&e.error.errors[0]&&e.error.errors[0].message},h.updateTextsWithEpicLevelName=function(e){GH.PlanView.updateEpicsToggleAndTipsyTextWithEpicLevelName(e),GH.EpicView.hasEpicColumnContentRendered()&&GH.EpicView.show()},h.processData=function(e,i){var a;h.visible&&(C.isFeatureEnabled("safe.migrate-strings-in-cbb")&&i.flexibleNomenclatureData&&i.flexibleNomenclatureData.levelOneName&&((a=i.flexibleNomenclatureData.levelOneName)!==GH.RapidBoard.State.getEpicLevelName()&&(GH.RapidBoard.State.setEpicLevelName(a),h.updateTextsWithEpicLevelName(a))),h.lastExecutedSearchFilter=void 0,d.setRankCustomFieldId(i.rankCustomFieldId),d.setEstimationStatistic(h.rapidViewConfig.estimationStatistic),d.setTrackingStatistic(h.rapidViewConfig.trackingStatistic),GH.VersionController.setProjects(i.projects),GH.VersionController.setVersions(i.versionData),GH.EpicView.isbacklogDataV2Enabled()||GH.EpicController.setEpicData(i.epicData),d.setData(i),d.setCanManageSprints(i.canManageSprints),d.setComplexQuery(i.complexQuery),d.setCanCreateIssue(i.canCreateIssue),d.setSupportsPages(i.supportsPages),l.validateCurrentSelection(),GH.EpicView.isbacklogDataV2Enabled()||(GH.VersionController.validateSelectedVersion(),GH.EpicController.validateSelectedEpic()),h.updateVersionFiltering(!0),h.updateEpicFiltering(!0),o.draw(),GH.EpicView.isbacklogDataV2Enabled()||(GH.VersionController.registerVersionsCount(),GH.EpicController.registerEpicsCount(i.epicData)),GH.EpicView.isbacklogDataV2Enabled()&&(GH.PlanView.updateEpicsColumnState(),GH.PlanView.updateVersionColumnState()),h.updateBoardState(i),t.searchFilter.clearLastSearch(),t.searchFilter.searchQuery(),c.hideLoadingBacklog(),G.triggerAfter("after:splitIssueSubmit","splitIssue"),G.triggerAfter("after:addFlagSubmit","addFlag"),G.triggerAfter("after:removeFlagSubmit","removeFlag"),G.triggerAfter("after:backlogQuickFilter","backlogQuickFilter"),g.updateDetailsView(l.getSelectedIssueKey(),null,e),H.isBentoInBacklogEnabled()&&w.handleDeferredResourceImport(!GH.DetailsView||!GH.DetailsView.getSelectedIssueKey,function(){GH.RapidBoard.State.isPlanMode()&&GH.RapidBoard.State.isDetailsViewPlanOpened()&&(AJS.$("#ghx-issue-fragment").trigger("detail-view-ready",GH.DetailsView.getSelectedIssueKey(),h.firstIssueView),h.firstIssueView=!1)}),S.prefetch(),JIRA.trace("gh.rapid.view.rendered"),g.trigger("after:show"))},h.updateBoardState=function(i){var e,a;i&&i.versionData&&i.versionData.versionsPerProject&&i.issues&&i.projects&&(a=Object.getOwnPropertyNames(i.versionData.versionsPerProject).map(function(e){return i.versionData.versionsPerProject[e].length}).reduce(function(e,i){return e+i},0),e=i.issues.length,GH.RapidBoard.State.numberOfIssues.set(e),GH.RapidBoard.State.numberOfProjects.set(i.projects.length),GH.RapidBoard.State.numberOfVersions.set(a),a=i.sprints.reduce(function(e,i){return e+(i.issuesIds?i.issuesIds.length:0)},0),GH.RapidBoard.State.numberOfBacklogIssues.set(e-a))},h.updateUIAfterSelectionChange=function(e){o.updateIssueSelectionState(e.doScroll),g.updateDetailsView(l.getSelectedIssueKey(),e.openDetailsView)},h.updateEpicData=function(){if(!GH.EpicView.isbacklogDataV2Enabled()&&!h.visible)return n.Deferred().resolve();var e={rapidViewId:h.rapidViewData.id};return GH.EpicView.isbacklogDataV2Enabled()?GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epics").done(m).fail(function(e,i){GH.EpicView.renderError(),!i||K(i.status)?B("epicsViewed",i.status):j("epicsViewed")}):GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epics").done(function(e){h.visible&&h.setEpicData(e)})};var m=function(e){h.visible&&(h.setEpicData(e),GH.EpicController.registerEpicsCount(e),GH.PlanDragAndDrop.initializeClassificationDnD(),j("epicsViewed"),GH&&GH.ECX&&GH.ECX.fireReadEvent&&GH.ECX.fireReadEvent("backlogScreen","epicsDataFetched"))};h.setEpicData=function(e){GH.EpicController.setEpicData(e),w.handleDeferredResourceImport(!w.isResourceAvailable("jira/ajs/dropdown/dropdown"),function(){GH.EpicView.updateEpics()})},h.updateVersionData=function(){if(!GH.EpicView.isbacklogDataV2Enabled()&&!h.visible)return n.Deferred().resolve();var e={rapidViewId:h.rapidViewData.id,activeQuickFilters:t.quickfilters.getActiveQuickFilters()};return(GH.EpicView.isbacklogDataV2Enabled()?GH.Ajax.get({url:"/xboard/plan/backlog/versions.json",data:e},"versions").done(R).fail(function(e,i){GH.VersionView.renderError(),!i||K(i.status)?B("versionsViewed",i.status):j("versionsViewed")}):GH.Ajax.get({url:"/xboard/plan/backlog/versions.json",data:e},"versions").done(function(e){h.visible&&h.setVersionData(e.versionData)})).always(function(){G.triggerAfter("after:createVersion","versionCreate")})};var R=function(e){h.visible&&(GH.VersionController.getVersionModel().canCreateVersion!==e.versionData.canCreateVersion&&w.handleDeferredResourceImport(!GH.VersionQuickCreate,function(){GH.VersionView.draw()}),h.setVersionData(e.versionData),GH.VersionController.registerVersionsCount(),GH.PlanDragAndDrop.initializeClassificationDnD(),j("versionsViewed"),GH&&GH.ECX&&GH.ECX.fireReadEvent&&GH.ECX.fireReadEvent("backlogScreen","versionsDataFetched"))};h.setVersionData=function(e){GH.VersionController.setVersions(e),GH.VersionController.validateSelectedVersion(),w.handleDeferredResourceImport(!w.isResourceAvailable("jira/ajs/dropdown/dropdown"),function(){GH.VersionView.updateView()})},h.moveIssues=function(e,i,a,t){t=d.moveIssuesNew(e,i,a,t);return o.redrawChangedModels(t),!d.isRankable()||d.hasAnySubtasks(e)},h.reorderIssuesInSprint=function(e,i){i=d.reorderIssuesInModel(e,i);o.redrawChangedModels(i)},h.revertStatistics=function(){e.updateSprintStatistics(),a.updateBacklogHeader()},h.handleSprintStarted=function(){l.clearSelection(),GH.RapidBoard.State.isAgilityBoard()?GH.Navigation.gotoDefaultRapidBoardPageAfterSprintStarted(h.rapidViewData.id):(GH.RapidBoard.ViewController.setMode(E.WORK),GH.RapidBoard.State.pushState()),G.triggerAfter("after:startSprintSubmit")},h.handleIssueForEpicCreated=function(e,i){if(h.visible)return s.isUndefined(h.handleIssueForEpicCreated.deferred)&&(h.handleIssueForEpicCreated.deferred=new n.Deferred,setTimeout(function(){h.loadData().then(function(){h.handleIssueForEpicCreated.deferred.resolve(),h.handleIssueForEpicCreated.deferred=void 0},function(){h.handleIssueForEpicCreated.deferred.reject()})},0)),h.handleIssueForEpicCreated.deferred},h.registerIssueCreatedCallback=function(e,i){h.issueCreatedCallbacks[e]=i},h.unregisterIssueCreatedCallback=function(e){delete h.issueCreatedCallbacks[e]},h.handleIssueCreated=function(e,i){var a;h.visible&&(GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.ISSUE_CREATE_DIALOG),h.trigger("before:rankCreatedIssue"),a=s.clone(h.issueCreatedCallbacks),setTimeout(function(){h.handleIssueCreatedImpl(i,a).always(function(){h.trigger("after:rankCreatedIssue")})},0))},h.handleIssueCreatedImpl=function(e,i){if(!e.isSubtask){var t=n.Deferred();return h.getIssueDetails(e.issues,"issuetype").then(function(e){var a,e=(e=e.issues,e=s.map(e,function(e){return{issueKey:e.key,issueId:e.id,issueType:e.fields.issuetype.id}}),a=GH.EpicConfig.getEpicIssueTypeId(),s.reduce(e,function(e,i){return(i.issueType===a?e.epics:e.issues).push(i),e},{issues:[],epics:[]}));h.issuesAndEpicsCreated(e.issues,e.epics,i).always(function(){t.resolve()})}),t.promise()}h.subtasksCreated(e)},h.getIssueDetails=function(e,i){e=s.pluck(e,"issueKey");return h.getIssueDetailsByKeys(e,i)},h.getIssueDetailsByKeys=function(e,i){e="issueKey in ("+e.join(",")+")";return GH.Ajax.get({bareUrl:GH.Ajax.buildBareRestUrl("/rest/api/2/search"),data:{jql:e,fields:i}},"getissues")},h.issuesAndEpicsCreated=function(i,a,e){if(!s.isEmpty(i)||!s.isEmpty(a)){if(GH.RapidBoard.State.showEpicAsPanel()&&s.isEmpty(i))return h.reloadAndShowCreatedEpics(a);e=s.map(e,function(e){return!!s.isFunction(e)&&e(i,a)}),e=s.filter(e,function(e){return e&&(e instanceof n.Deferred||s.isFunction(e.promise))}),e=s.map(e,function(e){var i=n.Deferred();return e.always?e.always(i.resolve):e.then(i.resolve,i.resolve),i});return n.when.apply(n,e).then(function(){h.reloadAndSelectCreatedIssues(i)})}},h.subtasksCreated=function(e){H.isBentoEnabled()&&e.isSubtask||(GH.DetailsViewScrollTracker.setSelectedTab(GH.DetailsView.TAB_SUBTASKS),h.loadData(D.SUBTASKS_CHANGED).done(function(){e&&e.issues&&0<e.issues.length&&function(e){e=d.getIssueData(e);e&&(GH.RapidBoard.State.shouldUseTypeHierarchyLevel()&&e.typeHierarchyLevel!==GH.RapidViewConfig.SUBTASK_HIERARCHY_LEVEL||!e.parentKey||!d.isParentAndCollapsed(e.parentKey)||p.toggleExpandState(e.parentKey))}(e.issues[0].issueKey),function(e){if(GH.RapidBoard.State.isKanbanBoard()){e=s.map(e.issues,function(e){return e.issueKey});return d.hasAnyIssueInvisible(e)}return!0}(e)&&GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage(e)}))},h.reloadAndSelectCreatedIssues=function(a){return h.loadData().done(function(){var e,i=s.last(a);C.isFeatureEnabled("jsw-classic-override-force-consistency-after-issue-create")&&(GH.RapidBoard.State.isScrumBoard()||GH.RapidBoard.State.isKanbanBoard()&&C.isFeatureEnabled("jsw.classic.override.force.consistency.kanban"))?(e=GH.RapidBoard.isIssueVisibleInRapidView([i.issueKey],E.PLAN,h.rapidViewData.id),n.when(e).done(function(e){e?l.selectIssue(i.issueKey):GH.RapidBoard.QuickCreate.showCreatedIssuesMessage({issues:a})})):d.isIssueVisible(i.issueKey)?l.selectIssue(i.issueKey):GH.RapidBoard.QuickCreate.showCreatedIssuesMessage({issues:a})})},h.reloadAndShowCreatedEpics=function(e){return h.updateEpicData().done(function(){h._showCreatedEpicsMessage(e),GH.EpicView.renderNewEpics(e)})},h._showCreatedEpicsMessage=function(e){var i=s.last(e),i=GH.EpicController.getEpicModel().getEpicList().isIssueVisible(i.issueKey);GH.RapidBoard.QuickCreate.showCreatedEpicsMessage({issues:e},i),i&&GH.EpicView.scrollToBottom()},h._getIssueId=function(e){var i=d.findModelWithIssue(e);return i?i.getIssueList().getIssueIdForKey(e):null},h.handleIssueUpdated=function(e,i){var a,t,r,s,n,o,l;h.visible&&(a=i.issueKey?h._getIssueId(i.issueKey):parseInt(i.issueId,10),r=!(t=d.findModelWithIssue(a)),l=o=n=s=!1,"quickEdit"===i.source?(o=n=s=!0,!t&&d.trackingStatistic.isEnabled&&(l=!0)):(n="epic"===i.fieldId||i.fieldId===h.rapidViewConfig.estimationStatistic.fieldId||i.fieldId===GH.EpicConfig.getEpicLinkFieldId(),o="fixVersions"===i.fieldId||"versions"===i.fieldId||i.fieldId===h.rapidViewConfig.estimationStatistic.fieldId),GH.DetailsView.opts.wantsBentoInBacklog()?"sprint"!==i.fieldId&&i.fieldId!==u.getSprintFieldId()||(l=!0):!i.fieldChanges||(i=i.fieldChanges[u.getSprintFieldId()])&&i.original!==i.updated&&(l=!0),(l=null==a?!0:l)?r?h.loadData(D.SUBTASKS_CHANGED):h.loadData():(o?h.updateVersionData().then(h.reloadSingleIssue.bind(null,a)):h.reloadSingleIssue(a),s&&(r?g.reloadDetailView(D.SUBTASKS_CHANGED):g.reloadDetailView()),n&&h.updateEpicData()))},h.handleIssuesRemovedFromSprint=function(e,i){h.visible&&(1===i.issueKeys.length&&(l.selectIssue(i.issueKeys[0]),l.selectionManager._addSelectedIssueKeys(i.issueKeys)),h.loadData())},h.reloadSingleIssue=function(e){var i={rapidViewId:h.rapidViewData.id,issueId:e},a=GH.BacklogModel.getIssueDataForId(e),t=null;a&&a.parentId&&(t=a.epic),GH.Ajax.get({url:"/xboard/plan/backlog/issue.json",data:i},"updateSingleIssue."+e).done(function(e){t&&(e.epic=t),h.updateIssues(e),JIRA.trace("gh.backlog.issue.updated."+e.key)})},h.updateIssues=function(e){s.isArray(e)||(e=[e]);var a=[],t=!1;s.each(e,function(e){var i=d.findModelWithIssue(e.key);i&&(GH.RapidBoard.State.showEpicAsPanel()&&e.typeId===GH.EpicConfig.getEpicIssueTypeId()?(i.getIssueList().removeIssues(e.key),t=!0):i.getIssueList().updateIssue(e),a.push(i))});var e=e.map(function(e){return d.isSubtask(e.key)?e.parentKey:e.key});d.assignSubtasksToSameEpicAsParent(e),d.updateFiltering(),t&&(h.updateEpicData(),l.validateCurrentSelection(),e=l.getSelectedIssueKey(),GH.DetailsView.setSelectedIssueKey(e),g.reloadDetailView()),o.redrawChangedModels(a)},h.removeIssues=function(e,i){e.getIssueList().removeIssues(i),o.redrawChangedModel(e)},h.isFiltersActive=function(){return!s.isEmpty(t.quickfilters.getActiveQuickFilters())},h.executeSearch=function(i){return s.isNull(i)?h.lastExecutedSearchFilter=null:(h.lastExecutedSearchText=i,h.lastExecutedSearchFilter=function(e){return i.test((e=e||{}).key+" "+e.summary+" "+e.typeName+" "+e.assigneeName)}),f.setInstantFilter(h.lastExecutedSearchFilter),d.updateFiltering()&&o.updateHiddenIssues(),GH.RapidBoard.State.replaceState(),!1};function A(e,a,t){var i=void 0,i=a.length?function(i){return a.some(function(e){return t(i,e)})}:function(){return!0};f.setFilter(e,i),d.updateFiltering()&&o.updateHiddenIssues()}function F(i,e,a){var t=[];return s.each(e,function(e){a[e]||t.push(i[e])}),t}h.filterByAssignees=function(){return A("assignees",0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],function(e,i){return!e.assigneeAccountId&&!i||e.assigneeAccountId===i})},h.filterByLabels=function(){return A("labels",0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],function(e,i){return e.labels&&e.labels.includes(i)})},h.clearFilters=function(){var e=t.quickfilters.clearFilters();if(v.isReactFiltersEnabled().then(function(e){e&&GH.bridge.FilterBridge.clearFilters()}),GH.VersionController.setFilteredVersionId(null),GH.EpicController.setFilteredEpicKey(null),GH.EpicController.clearVersionFiltering(),e){try{GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.QUICK_FILTERS_CHANGE,!C.isFeatureEnabled("moonwalk.eventually-consistent.backlog.quick-filters"))}catch(e){AJS.trigger("analyticsEvent",{name:"jira.agile.board.PlanController.quickFilters.MarkUserInteractionError",data:{errorMsg:e.toString()}})}f.clearAllFilters(),h.loadData().done(function(){GH.RapidBoard.State.pushState()})}else f.clearAllFilters()&&(GH.EpicView.deselectAllEpics(),GH.VersionView.deselectAllVersions(),d.updateFiltering()&&o.updateHiddenIssues(),GH.RapidBoard.State.pushState())},h.updateEpicFiltering=function(e){var i=GH.EpicController.getFilteredEpicKey();f.setEpicFilter(i),d.updateFiltering()&&!e&&o.updateHiddenIssues()},h.updateVersionFiltering=function(e){var i=GH.VersionController.getFilteredVersionId();f.setVersionFilter(i),d.updateFiltering()&&!e&&o.updateHiddenIssues(),GH.EpicController.applyVersionFiltering()},h.calculateIssueRenderData=function(){var e=l.getSelectedIssueKeys(),i={};s.each(e,function(e){i[e]=!0});var a=l.getSelectedIssueKey(),e=d.getHiddenBySearchIssues();return{selectedIssueKeys:i,mainSelectedIssue:a,hiddenIssues:e}},h.extractPrintableIssuesFromAllSprints=function(){var a=[];return s.each(d.getSprintModels(),function(e){var i=e.getSprintData(),e=F(e.getIssueList().getAllIssues(),e.getIssueList().getVisibleRankables(),d.getHiddenBySearchIssues());s.isEmpty(e)||a.push({sprintId:i.id,sprintName:i.name,issues:e})}),a},h.getPrintableIssuesFromPlanBacklog=function(){var e=d.getBacklogModel2().getIssueList();return F(e.getAllIssues(),e.getVisibleRankables(),d.getHiddenBySearchIssues())},h.getEpicMap=function(){if(GH.EpicView.isbacklogDataV2Enabled()){var e=GH.EpicController.getEpicModel().getEpicList();return e?e.getAllIssues():null}return GH.EpicController.getEpicModel().getEpicList().getAllIssues()};var B=function(e,i){T("taskFail",e,i)},j=function(e){T("taskSuccess",e,null)},K=function(e){return null==e||429===e||500<=e},T=function(e,i,a){var t=GH.RapidViewConfig.currentData.data;r("jira/analytics/web-client").sendOperationalEvent({source:"ui",actionSubject:"ui",action:e,attributes:{task:i,analyticsSource:V.analyticsSource,application:V.application,edition:GH.Util.getEdition(V.application),taskId:t.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0,statusCode:a}})};return h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogStatistics.js' */
define("jira-agile/rapid/ui/plan/backlog-statistics",["require"],function(t){"use strict";var c=t("underscore"),e=t("jira-agile/rapid/global-events"),n=(t("jira/featureflags/feature-manager"),void 0);e.on("pre-initialization",function(){n=t("jira-agile/rapid/ui/plan/backlog-model")});var r={EXCLUDE_SUBTASKS_COLUMN_CONSTRAINT:"issueCountExclSubs",ignoredStatisticTypes:{issueCount:!0,none:!0},getIssueListEstimateStatistics:function(t){var e=r._calculateSprintModelStatistics(t),a=n.estimationStatistic,i={};i.shown=a&&a.isEnabled&&!r.ignoredStatisticTypes[a.typeId]||!1,i.shown&&(i.name=a?a.name:"",i.total={raw:e.estimate.total,formatted:r.formatStatisticForRendering(a,e.estimate.total)},i.visible={raw:e.estimate.visible,formatted:r.formatStatisticForRendering(a,e.estimate.visible)});var s=n.trackingStatistic,t={};return t.shown=s&&s.isEnabled&&!r.ignoredStatisticTypes[a.typeId]&&(e.estimate.total!=e.tracking.total||e.estimate.visible!=e.tracking.visible)||!1,t.shown&&(t.name=s?s.name:"",t.total={raw:e.tracking.total,formatted:r.formatStatisticForRendering(s,e.tracking.total)},t.visible={raw:e.tracking.visible,formatted:r.formatStatisticForRendering(s,e.tracking.visible)}),{estimate:i,tracking:t}},_calculateSprintModelStatistics:function(a){var i,t=a.getAllIssues(),s=0,n=0,r=0,l=0,o=0,u=0;return c.each(t,function(t){var e=a.isIssueVisible(t.key);c.isUndefined(t.estimateStatistic)||c.isUndefined(t.estimateStatistic.statFieldValue.value)||(i=t.estimateStatistic.statFieldValue.value,s+=i,e&&(n+=i)),c.isUndefined(t.trackingStatistic)||c.isUndefined(t.trackingStatistic.statFieldValue.value)||(i=t.trackingStatistic.statFieldValue.value,r+=i,e&&(l+=i)),o++,e&&u++}),{estimate:{total:s,visible:n},tracking:{total:r,visible:l},issueCount:{total:o,visible:u}}},formatStatisticForRendering:function(t,e){return"duration"==t.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e):GH.NumberFormat.format(e)},getAllIssuesBeforeIndex:function(t,e,a,i){var s=[];i=i||function(t){return!r._isRankableId(e[t])};for(var n=a-1;0<=n&&i(n);n--)s=[e[n]].concat(s);return r._mapIssueKeysToIssues(t,s)},_isRankableId:function(t){return c.isNumber(t)},_mapIssueKeysToIssues:function(e,t){t=c.map(t,function(t){return e[t]});return c.filter(t,function(t){return!c.isUndefined(t)})},getIssueListStats:function(t,e,a){var i=t.getAllIssues(),s=c.keys(i).length,i=t.getNumVisibleIssues(),t=0<s,a=e?a?r.getActiveSprintEmptyMessage(!t):r.getFutureSprintEmptyMessage(!t):r.getBacklogEmptyMessage(!t);return{totalCount:s,visibleCount:i,allVisible:s===i,noneVisible:0===i,hasIssues:t,empty:!t,emptyMessage:a}},getBacklogEmptyMessage:function(t){return t?"Your backlog is empty.":"There are no issues that match your current filter."},getFutureSprintEmptyMessage:function(t){return t?GH.RapidBoard.State.isScrumBoard()?"Plan a sprint by dragging the sprint footer down below some issues, or by dragging issues here.":"There are no issues on the board.":GH.RapidBoard.State.isScrumBoard()?"There are no issues that match your current filter.":"There are no issues that match your current filter."},getActiveSprintEmptyMessage:function(t){return t?"There are no issues in this sprint.":"There are no issues that match your current filter."},calculateSprintProgress:function(t,e,a){var i=r._getTodoInProgressDoneMapping(e),s=[{nameKey:"gh.boards.notstarted",name:"Not Started",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.inprog",name:"In Progress",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.done",name:"Done",title:"",total:{value:0,text:"0"}}];c.each(t.getAllIssues(),function(t){var e=i[t.statusId];c.isUndefined(e)||t.hidden||t.estimateStatistic&&t.estimateStatistic.statFieldValue&&t.estimateStatistic.statFieldValue.value&&(s[e].total.value+=t.estimateStatistic.statFieldValue.value)});t=c.reduce(s,function(t,e){return t+e.total.value},0);if(!t)return c.each(s,function(t){t.total.text=""}),s;var n=r.formatStatisticForRendering(a,t);return c.each(s,function(t){t.total.text=r.formatStatisticForRendering(a,t.total.value),t.title=GH.tpl.sprintview.renderProgressIndicatorTitle({indicator:t,allIndicatorsTotalText:n,statLabel:a.name})}),s},_getTodoInProgressDoneMapping:function(t){for(var e={},a=function(t){e[t]=n},i=0;i<t.length;i++){var s=t[i].statusIds,n=0===i?0:i===t.length-1?2:1;c.each(s,a)}return e},splitIssuesIntoNotDoneAndDone:function(t,e){var a=r._getTodoInProgressDoneMapping(e),i=[],s=[];return c.each(t,function(t){(2==a[t.statusId]?s:i).push(t)}),{notDone:i,done:s}},getAssignedWorkStats:function(t){function s(t,e){return{assignee:t,assigneeName:e,totalEstimate:0,totalTrackingEstimate:0,issues:[]}}function e(t){t.totalEstimateText=r.formatStatisticForRendering(n.estimationStatistic,t.totalEstimate),n.trackingStatistic.isEnabled&&(t.totalTrackingEstimateText=r.formatStatisticForRendering(n.trackingStatistic,t.totalTrackingEstimate))}var a=t.getVisibleIssues(),i=c.reduce(a,function(t,e){var a=e.assignee,i=a?(t.assignees[a]||(t.assignees[a]=s(a,e.assigneeName)),t.assignees[a]):t.unassigned;i.issues.push(e),t.all.issues.push(e);a=e.estimateStatistic&&e.estimateStatistic.statFieldValue&&e.estimateStatistic.statFieldValue.value;a&&(i.totalEstimate+=a,t.all.totalEstimate+=a);e=e.trackingStatistic&&e.trackingStatistic.statFieldValue&&e.trackingStatistic.statFieldValue.value;return e&&(i.totalTrackingEstimate+=e,t.all.totalTrackingEstimate+=e),t},{unassigned:s(null,null),assignees:{},all:s(null,null)}),t=c.toArray(i.assignees).sort(function(t,e){return e.totalEstimate-t.totalEstimate||t.assigneeName.localeCompare(e.assigneeName)}),a=n.estimationStatistic;return r.ignoredStatisticTypes[a.typeId]||(c.each(t,e),e(i.unassigned),e(i.all)),{unassigned:i.unassigned,assigned:t,all:i.all}},calculateStatisticsFieldValue:function(t,e){return e.typeId===r.EXCLUDE_SUBTASKS_COLUMN_CONSTRAINT?t.getIssuesExcludingSubtasks().length:t.getIssueCount()}};return r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintBacklogController.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-controller",["require"],function(i){"use strict";var r=i("jira-agile/rapid/ui/plan/sprint-backlog-view"),i={init:function(){r.init()}};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanModeUtil.js' */
var _createClass=function(){function a(s,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}return function(s,e,t){return e&&a(s.prototype,e),t&&a(s,t),s}}();function _classCallCheck(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}define("jira-agile/rapid/ui/plan/plan-mode-util",["underscore"],function(e){var n=(_createClass(t,[{key:"getSubtaskCount",value:function(s){return s.subTasks?s.subTasks.length:0}},{key:"getParentLength",value:function(s){return s.fakeParent?0:1}},{key:"getIssueSize",value:function(s){return this.getParentLength(s)+this.getSubtaskCount(s)}},{key:"hasCapacity",value:function(){return this.numIssues<this.capacity}},{key:"willExceedCapacity",value:function(s){return!this.hasCapacity()||this.numIssues+this.getIssueSize(s)>this.capacity}},{key:"sliceIssue",value:function(s){s=e.extend({},s);return s.subTasks&&(s.subTasks=e.extend([],s.subTasks),s.subTasks=s.subTasks.slice(0,this.capacity-(this.numIssues+this.getParentLength(s)))),s}},{key:"reverseSliceIssue",value:function(s){s=e.extend({},s);return s.subTasks&&(s.subTasks=e.extend([],s.subTasks),s.subTasks=s.subTasks.slice(s.subTasks.length-(this.capacity-this.numIssues))),s.fakeParent=!0,s}},{key:"add",value:function(s){this.willExceedCapacity(s)||(this.issueList.push(s),this.numIssues+=this.getIssueSize(s))}},{key:"issues",get:function(){return this.issueList}}]),t);function t(s){_classCallCheck(this,t),this.issueList=[],this.capacity=s,this.numIssues=0}var s={getIssuesListHead:function(s){for(var e,t=new n(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),a=0;s[a]&&!t.willExceedCapacity(s[a]);)t.add(s[a]),a++;return s[a]&&t.hasCapacity()&&(e=t.sliceIssue(s[a]),t.add(e)),t.issues},getIssuesListTail:function(s){for(var e,t=new n(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),a=s.length-1;s[a]&&!t.willExceedCapacity(s[a]);)t.add(s[a]),a--;return s[a]&&t.hasCapacity()&&(e=t.reverseSliceIssue(s[a]),t.add(e)),t.issues.reverse()},getVisibleIssues:function(s,u){return s.map(function(s){var e=s.subTasks&&s.subTasks.length,t=u[s.key],a=t&&e,n=s.fakeParent&&!e;return e&&(s.subTasks=s.subTasks.filter(function(s){return!u[s.key]})),a?(s.fakeParent=!0,s):t||n?null:s}).filter(function(s){return!!s})}};return s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintBacklogView.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-view",["require","jquery","underscore","jira-agile/rapid/global-events","jira-agile/rapid/ui/plan/sprint-controller","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/backlog-statistics","jira-agile/rapid/ui/plan/plan-controller","jira-agile/rapid/ui/plan/plan-mode-util","jira-agile/rapid/ui/plan/plan-view","jira-agile/rapid/ui/plan/plan-drag-and-drop","jira-agile/browser-metrics/browser-metrics-util","jira/analytics/web-client"],function(e,t,i,a,n,s,o,r,c,l,u,d,g){"use strict";var p,S=e("jira/featureflags/feature-manager");a.on("pre-initialization",function(){p=e("jira-agile/rapid/ui/plan/backlog-controller")});var h={},f=!1,k=!0;h.containerSelector=".ghx-backlog-group",h.init=function(){h.setShowAllClicked(!1),t(document).on("click",".js-add-sprint",n.addSprint)},h.renderBacklog=function(e,i){i=I(e,i);t(".ghx-backlog-group").html(t(i)),b(),h.onAttached()},h.updateBacklog=function(e){var i=p.calculateIssueRenderData();h.renderBacklog(i,e)},h.updateBacklogHeader=function(){t(".js-marker-backlog-header").replaceWith(L()),b()},h.onAttached=function(){h.attachVerticalSplitEventHandlers()},h.attachVerticalSplitEventHandlers=function(){var e=t(".js-show-all-link");e.off("click",h.onInlineVerticalSplitShowAllClicked),e.on("click",h.onInlineVerticalSplitShowAllClicked);e=t("aui-section#gh-show-more-config-dropdown-section");e.off("change",h.onVerticalSplitConfigChanged),e.on("change",h.onVerticalSplitConfigChanged)},h.onInlineVerticalSplitShowAllClicked=function(e){e.preventDefault(),h.handleVerticalSplitShowAllClick()},h.onVerticalSplitConfigChanged=function(e){e.preventDefault(),!e.target.hasAttribute("checked")||(e=t(e.target).data("issues"))!==r.getBacklogIssuesLimitConfig()&&h.handleVerticalSplitConfigChange(e)},h.handleVerticalSplitShowAllClick=function(){h.sendInlineVerticalSplitClickEvent(),h.showIssues(r.VS_SHOW_ALL_ISSUES,!0)},h.handleVerticalSplitConfigChange=function(e){h.setIssueLimit(e),h.sendVerticalSplitConfigurationChangeEvent(e),h.setShowAllClicked(!1),h.showIssues(e)},h.setIssueLimit=function(e){r.setBacklogIssuesLimitConfig(e),GH.RapidBoard.State.pushState()},h.showIssues=function(e,i){i&&d.triggerBefore("before:vsShowAllClicked","vsShowAllClicked"),l.showLoadingBacklog(),setTimeout(function(){h.updateBacklog(e),i&&h.setShowAllClicked(!0),u.enableDragAndDrop(),l.hideLoadingBacklog(),i&&d.triggerAfter("after:vsShowAllClicked","vsShowAllClicked")})},h.sendInlineVerticalSplitClickEvent=function(){g.sendUIEvent({source:"backlogScreen",actionSubject:"verticalSplit",actionSubjectId:"verticalSplitShow."+r.VS_SHOW_ALL_ISSUES+".inline",action:"click"})},h.sendVerticalSplitConfigurationChangeEvent=function(e){g.sendUIEvent({source:"backlogScreen",actionSubject:"verticalSplit",actionSubjectId:"verticalSplitShow."+e,action:"click"})},h.setShowAllClicked=function(e){h.VS_SHOW_ALL_CLICKED=e},h.setFirstView=function(e){k=e};var I=function(e,i){var t=s.getBacklogModel2().getIssueList(),a=o.getIssueListStats(t,!1),n=t.getVisibleRankables(),l=t.getAllIssues(),t=GH.IssueListUtil.issueListToTree(n.map(function(e){return l[e]}));GH.IssueListUtil.applyExpandedState(t,GH.RapidBoard.State.getExpandedIssueKeys());n={issueKeys:n,issues:t,issueListStats:a,epics:GH.EpicView.isbacklogDataV2Enabled()?p.getEpicMap():GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:e,statLabel:s.estimationStatistic.name,estimationEnabled:s.estimationStatistic.isEnabled,isRankable:s.isRankable(),canManageSprints:s.canManageSprints(),complexQuery:s.complexQuery(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),shouldDisplayCreateSprintButton:GH.RapidBoard.State.isScrumBoard(),extraClasses:GH.RapidBoard.State.isKanbanBoard()?"ghx-kanban-backlog":void 0,isAgility:GH.RapidBoard.State.isAgilityBoard(),shouldDisplayShowMoreConfigButton:!0,showMoreOptions:r.getShowMoreOptionItems(),isbacklogDataV2Enabled:GH.EpicView.isbacklogDataV2Enabled(),isMigrateEpicFieldToIssueFieldEnabled:S.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe"),isUseIssueHierarchyEnabled:S.isFeatureEnabled("safe.return-hierarchy-level-in-cbb")};return i=i||r.getBacklogIssuesLimitConfig(),r.isValidIssueLimit(i)||(i=r.VS_DEFAULT_ISSUE_LIMIT,h.setIssueLimit(i)),n.issues=function(e,i,t,a,n){var l=e.excludeSubtasks,s=e.statisticsFieldVisible,e=e.visibleCount,e=l?s:e;n=n||r.getBacklogIssuesLimitConfig();t=c.getVisibleIssues(i,t);if(function(e,i,t,a){i&&C(t,a)&&!f&&k&&(h.setFirstView(!1),(e=e.findIndex(function(e){return e.key===i}))>a-r.VS_BACKLOG_TAIL_LENGTH&&e<t-r.VS_BACKLOG_TAIL_LENGTH&&h.setShowAllClicked(!0))}(t,a,e,n),h.VS_SHOW_ALL_CLICKED||!C(e,n))return t;a=c.getIssuesListHead(t,n-r.VS_BACKLOG_TAIL_LENGTH),t=c.getIssuesListTail(t,r.VS_BACKLOG_TAIL_LENGTH),n={showMore:!0,issuesNotShown:e-n};return a.concat(n).concat(t)}(a,t,e.hiddenIssues,e.mainSelectedIssue,i),GH.tpl.sprintbacklogview.renderBacklogIssues(n)},C=function(e,i){return i!==r.VS_SHOW_ALL_ISSUES&&i<e};var L=function(){var e=s.getBacklogModel2().getIssueList(),e={issueListStats:o.getIssueListStats(e,!1),canManageSprints:s.canManageSprints(),complexQuery:s.complexQuery(),shouldDisplayCreateSprintButton:GH.RapidBoard.State.isScrumBoard(),showMoreOptions:r.getShowMoreOptionItems(),shouldDisplayShowMoreConfigButton:!0};return GH.tpl.sprintbacklogview.renderBacklogHeader(e)};function b(){t(".js-add-sprint").tooltip({html:!0,title:"data-tooltip"})}return h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintBacklogView.soy' */
// This file was automatically generated from SprintBacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintbacklogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintbacklogview == 'undefined') { GH.tpl.sprintbacklogview = {}; }


GH.tpl.sprintbacklogview.renderBacklogIssues = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error-group" ></div><div class="ghx-onboarding-fillyourbacklog-group"></div><div class="ghx-backlog-container ghx-open ghx-everything-else' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + GH.tpl.sprintbacklogview.renderBacklogHeader(opt_data) + '<div class="js-issue-list ghx-issues' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '"><div class="ghx-plan-dropzone"></div>' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogIssues.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogIssues';
}


GH.tpl.sprintbacklogview.renderBacklogHeader = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-backlog-header js-marker-backlog-header"><div class="header-left"><div class="ghx-expander"></div><div class="ghx-name">' + soy.$$escapeHtml('Backlog') + '</div>' + GH.tpl.planissuelist.renderIssueCount(opt_data) + '</div><div class="header-right"><div class="ghx-controls aui-group"><div class="aui-item">' + ((opt_data.shouldDisplayCreateSprintButton) ? '<button class="js-add-sprint aui-button ' + ((! opt_data.canManageSprints) ? ' disabled' : '') + '"' + ((! opt_data.canManageSprints) ? ((opt_data.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can update this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml('You need the Manage sprints permission for all projects in the origin board to create a sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e') + '"') + 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml('Create sprint') + '</button>' : '');
  if (opt_data.shouldDisplayShowMoreConfigButton) {
    output += '<button class="aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" aria-controls="gh-show-more-config-dropdown"><span class="aui-icon ghx-iconfont aui-icon-small aui-iconfont-more white-text-on-hover"></span></button><aui-dropdown-menu id="gh-show-more-config-dropdown"><aui-section id="gh-show-more-config-dropdown-section" label="' + soy.$$escapeHtml('Always show') + '">';
    var optionList67 = opt_data.showMoreOptions;
    var optionListLen67 = optionList67.length;
    for (var optionIndex67 = 0; optionIndex67 < optionListLen67; optionIndex67++) {
      var optionData67 = optionList67[optionIndex67];
      output += '<aui-item-radio ' + soy.$$escapeHtml(optionData67.checked ? 'checked' : '') + ' data-issues="' + soy.$$escapeHtml(optionData67.value) + '">' + soy.$$escapeHtml(optionData67.label) + '</aui-item-radio>';
    }
    output += '</aui-section></aui-dropdown-menu>';
  }
  output += '</div></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogHeader.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogHeader';
}


GH.tpl.sprintbacklogview.renderShowAllContainer = function(opt_data, opt_ignored) {
  return '<div class="ghx-issue-show-all-container"><div class="ghx-row"><div class="ghx-center"><div class="ghx-show-all">' + GH.tpl.sprintbacklogview.renderShowAllContent(opt_data) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderShowAllContainer.soyTemplateName = 'GH.tpl.sprintbacklogview.renderShowAllContainer';
}


GH.tpl.sprintbacklogview.renderShowAllContent = function(opt_data, opt_ignored) {
  return '<a href="#" title="' + soy.$$escapeHtml('Show all') + '" data-issues-not-shown="' + soy.$$escapeHtml(opt_data.issuesNotShown) + '" class="js-show-all-link">' + soy.$$escapeHtml(AJS.format('Show all issues ({0})',opt_data.issuesNotShown)) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderShowAllContent.soyTemplateName = 'GH.tpl.sprintbacklogview.renderShowAllContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanIssueListView.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-view",["require"],function(e){"use strict";var t=e("jquery"),n=e("jira-agile/rapid/ui/plan/backlog-model"),s="issue-key",a=".js-issue",r=".ghx-marker",i=".ghx-parent-group",l={};function u(){return Array.prototype.join.call(arguments,", ")}return l.findPreviousVisibleIssueElementInList=function(e){e=e.prevAll().filter(a).not(":hidden");return e.length?e:null},l.findPrevRankableElement=function(e){var t=e.prevAll().filter(u(r,a,i)).not(":hidden");return t=t.length&&this.getRankableId(e)===this.getRankableId(t)?t.prev():t},l.findNextRankableElement=function(e){var t=e.nextAll().filter(u(r,a,i)).not(":hidden");return t=t.length&&this.getRankableId(e)===this.getRankableId(t)?t.next():t},l.getIssueKey=function(e){return l.getClosestIssueElement(e).data(s)},l.getIssueId=function(e){return l.getClosestIssueElement(e).data(s)},l.isSubtask=function(e){return l.getClosestIssueElement(e).hasClass("ghx-subtask")},l.getRankableId=function(e){if(!e)return!1;var t=e.data("fake-parent-issue-key")||e.data(s);if(!t){e=l.getClosestIssueElement(e);if(0<e.length)return e.data(s)}return t},l.getIssueByKey=function(e){return t(".js-issue[data-issue-key="+e+"]")},l.toggleExpandState=function(e){var t="ghx-subtasks-expanded",n=(e=_.isString(e)?l.getIssueByKey(e):e).parents(i),e=l.getIssueKey(e);n.toggleClass(t);t=n.hasClass(t);return t?GH.RapidBoard.State.addIssueKeyToExpanded(e):GH.RapidBoard.State.removeIssueKeyFromExpanded(e),t},l.expandAllAfterTransition=function(e){e.forEach(function(e){n.isParentAndCollapsed(e)?l.toggleExpandState(e):n.isSubtask(e)&&(e=n.getIssueData(e).parentKey,n.isParentAndCollapsed(e)&&l.toggleExpandState(e))})},l.getClosestIssueElement=function(e){return e.closest(a)},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanIssueListFiltering.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-filtering",["require"],function(e){"use strict";var t=e("underscore"),r={EPIC_FILTER_KEY_NONE:"none",VERSION_FILTER_ID_NONE:"none",allFilters:{},isNoneEpicFilterKey:function(e){return e===r.EPIC_FILTER_KEY_NONE},isNoneVersionFilterId:function(e){return e===r.VERSION_FILTER_ID_NONE},setFilter:function(e,i){i?r.allFilters[e]=i:delete r.allFilters[e]},clearAllFilters:function(){var e=!t.isEmpty(t.keys(r.allFilters));return r.allFilters={},e},_getCompoundFilter:function(){return function(i){return!t.any(r.allFilters,function(e){return!e(i)})}},setEpicFilter:function(i){var e=null;return r.isNoneEpicFilterKey(i)?e=function(e){return t.isEmpty(e.epic)}:(!GH.EpicView.isbacklogDataV2Enabled()&&r.isEpicIssueSelectable(i)||GH.EpicView.isbacklogDataV2Enabled()&&i)&&(e=function(e){return e.epic===i}),r.setFilter("epics",e)},isEpicIssueSelectable:function(e){var i=GH.EpicController.getEpicModel().getEpicList();return i.isIssueValid(e)&&i.isIssueVisible(e)},setVersionFilter:function(i){var e=null;return r.isNoneVersionFilterId(i)?e=function(e){return t.isEmpty(e.fixVersions)}:r.isVersionSelectable(i)&&(e=function(e){return t.some(e.fixVersions,function(e){return e===parseInt(i,10)})}),r.setFilter("versions",e)},isVersionSelectable:function(e){return null!=e},setInstantFilter:function(e){r.setFilter("instant",e)},applyToIssueLists:function(e){var i=r._getCompoundFilter(),n=!1;return t.each(e,function(e){e=e.applySearchFilter(i);n=n||e}),n},applyToIssueList:function(e){r.applyToIssueLists([e])}};return r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/version/VersionView.js' */
!function(){"use strict";GH.TimeFormat,require("jira/featureflags/feature-manager");var n=require("jira-agile/browser-metrics/browser-metrics-util"),r=require("jira-agile/rapid/deferred-resources-loader");GH.VersionView={},GH.VersionView.dropdowns=[],GH.VersionView.init=function(){GH.VersionView.initializeInlineEdits()},GH.VersionView.shouldHidePanels=function(){return GH.RapidBoard.State.isAgilityBoard()},GH.VersionView.getContainer=function(e){return(e||_.isUndefined(GH.VersionView.container))&&(GH.VersionView.container=AJS.$("#ghx-version-column")),GH.VersionView.container},GH.VersionView.show=function(){var e,i,t;GH.VersionView.shouldHidePanels()||(e=GH.VersionController.getVersionModel(),(i=GH.VersionView.getContainer(!0)).html(GH.tpl.versionview.renderSkeleton({canCreateVersion:e.canUserCreateVersion()})),r.handleDeferredResourceImport(!0,function(){i.find(".js-create-version").removeClass("ghx-hidden")}),(t=i.find(".ghx-classification-scrollview")).delegate(".ghx-classification-item","click",function(e){0<AJS.$(e.target).closest(".js-version-details-link, .js-version-actions, .js-editable-field, .js-editing-field, .aui-iconfont-calendar, input.text").not(".js-edit-versionName-trigger").length||GH.VersionView.toggleFiltering(AJS.$(this))}),t.delegate(".js-version-details-toggle","click",function(e){return GH.VersionView.toggleVersionDisplay(AJS.$(this)),!1}),t.delegate(".js-version-name","click",function(e){e.preventDefault()}),t.delegate(".js-try-again","click",function(e){GH.BacklogController.updateVersionData()}),GH.EpicView.isbacklogDataV2Enabled()||GH.VersionView.renderVersions(),GH.VersionController.registerCreateVersionDialog(),r.handleDeferredResourceImport(!GH.VersionQuickCreate,function(){GH.VersionQuickCreate.setAccessibleProjects(e.projects)}))},GH.VersionView.renderError=function(){var e=GH.VersionController.getFilteredVersionId();GH.VersionView.getContainer().find(".ghx-classification-scrollview").html(GH.tpl.versionview.renderError({isNoneSelected:GH.PlanIssueListFiltering.isNoneVersionFilterId(e),isAllSelected:!e}))},GH.VersionView.updateView=function(){GH.VersionView.renderVersions(),GH.PlanDragAndDrop.initializeClassificationDnD()},GH.VersionView.renderVersions=function(){var i,e,t,n,r=GH.VersionController.getVersionModel();!_.isUndefined(r)&&r.isValid()&&(i={},e=GH.VersionController.getFilteredVersionId(),t=r.getUnreleasedVersionList(),_.each(t,function(e){i[e.id]="open"==GH.VersionView.getTwixieState(e.id),e.versionStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.doneEstimate),e.versionStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.totalEstimate),e.versionStats.isIssueCountStatistic="issueCount"===GH.BacklogModel.estimationStatistic.typeId,e.versionStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name}),GH.VersionView.getContainer().find(".ghx-classification-scrollview").html(GH.tpl.versionview.renderVersions({versions:t,isNoneSelected:GH.PlanIssueListFiltering.isNoneVersionFilterId(e),isAllSelected:!e,selectedVersionId:e,isVersionExpandedById:i,canEditVersions:r.canUserCreateVersion(),showProjects:r.hasMultiProjects(),showEstimates:GH.RapidBoard.State.isScrumBoard()})),n=require("jira/ajs/dropdown/dropdown"),AJS.$(".js-version-actions").each(function(){var e="#"+AJS.$(this).attr("id").replace(/^dd-trigger-/,"dd-content-"),e=AJS.$(e),e=n.create({trigger:this,content:e,alignment:AJS.LEFT});AJS.$(e).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()}),GH.VersionView.dropdowns.push(e[0])}))},GH.VersionView.toggleFiltering=function(e){n.triggerBefore("before:backlogVersionFilter","backlogVersionFilter"),GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),GH.VersionView.deselectAllVersions();var i,t=e.attr("data-version-id");GH.VersionController.getFilteredVersionId()===t?i=null:(i=t,AJS.$("#ghx-version-column").find(".ghx-classification-all").removeClass("ghx-selected"),e.addClass("ghx-selected")),GH.VersionController.setFilteredVersionId(i),GH.RapidBoard.State.pushState(),GH.BacklogController.updateVersionFiltering(!1),n.triggerAfter("after:backlogVersionFilter","backlogVersionFilter")},GH.VersionView.deselectAllVersions=function(){var e=AJS.$("#ghx-version-column");e.find(".ghx-classification-item").removeClass("ghx-selected"),e.find(".ghx-classification-all").addClass("ghx-selected")},GH.VersionView.setTwixieState=function(e,i){GH.BoardState.setPerViewValue("versionTwix-"+e,i)},GH.VersionView.getTwixieState=function(e){return GH.BoardState.getPerViewValue("versionTwix-"+e,"closed")},GH.VersionView.toggleVersionDisplay=function(e){e=e.parents(".ghx-classification-item");GH.VersionView.toggleVersionDisplayByElementWithAnimation(e)},GH.VersionView.toggleVersionDisplayByElement=function(e){var i=e.attr("data-version-id");e.hasClass("ghx-open")?(e.removeClass("ghx-open").addClass("ghx-closed"),GH.VersionView.setTwixieState(i,"closed")):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.VersionView.setTwixieState(i,"open"))},GH.VersionView.toggleVersionDisplayByElementWithAnimation=function(e){var i=e.attr("data-version-id"),t=e.find(".ghx-expanded");e.hasClass("ghx-open")?GH.RapidBoard.Animation.animateHeight(t,195,0).done(function(){e.removeClass("ghx-open").addClass("ghx-closed"),GH.VersionView.setTwixieState(i,"closed")}):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.RapidBoard.Animation.animateHeight(t,0,195).done(function(){GH.VersionView.setTwixieState(i,"open")}))},GH.VersionView.hideDropdown=function(){_.each(GH.VersionView.dropdowns,function(e){e.hide()})},GH.VersionView.initializeInlineEdits=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-version-name",{renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits,getViewElement:function(e){var i=AJS.$(this).parents(".js-version-actions-list").attr("data-version-id");return AJS.$('.ghx-classification-item[data-version-id="'+i+'"]').find(".js-edit-versionName-trigger")},getData:function(e){var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return i.versionId=e.parents(".ghx-classification-item").attr("data-version-id"),GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),AJS.$(e).closest(".ghx-header").addClass("ghx-editing-name"),i.maxLength=30,i},validate:function(e){var i=e.editElement.val();return!!GH.Validation.notBlank(e.editElement,"Version Name is required")&&(e.newValue=i,!0)},save:function(e){GH.VersionView.updateVersion(e.versionId,{name:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})},postEdit:function(e){require("jira-agile/rapid/ui/plan/plan-drag-and-drop").enableDragAndDrop(),AJS.$(e.viewElement).closest(".ghx-header").removeClass("ghx-editing-name")}});var e={getData:function(e){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return i.versionId=e.parents(".ghx-classification-item").attr("data-version-id"),i}};GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-description-trigger",_.extend({},e,{save:function(e){GH.VersionView.updateVersion(e.versionId,{description:e.newValue}),GH.RapidBoard.Util.InlineEditable.updateView(e)}}));e=_.extend({},e,{renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:function(e){GH.RapidBoard.Util.InlineEditable.datePickerActivate(e,{ifFormat:GH.TimeFormat.dateFormat,showsTime:!1})},validate:function(e){return e.newValue=e.editElement.find("input").val(),!0},postEdit:function(e){AJS.$(e.viewElement).closest(".js-version-date").siblings(".ghx-error").remove()}});GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-startDateFormatted-trigger",_.extend({},e,{save:function(e){GH.VersionView.updateVersion(e.versionId,{startDateFormatted:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})}})),GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-releaseDateFormatted-trigger",_.extend({},e,{save:function(e){GH.VersionView.updateVersion(e.versionId,{releaseDateFormatted:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})}}))},GH.VersionView.updateVersion=function(e,i){var t='.ghx-classification-item[data-version-id="'+e+'"]';return GH.VersionController.updateVersion(e,i,{name:t+" .js-version-name",description:t+" .js-version-description",startDate:t+" .js-version-start-date",releaseDate:t+" .js-version-release-date"},function(){AJS.$(t+" .ghx-error").empty()})},GH.VersionView.renderNewVersions=function(e){var i=AJS.$("#ghx-version-column");_.each(e,function(e){e=i.find('.ghx-classification-item[data-version-id="'+e.id+'"]');e.hasClass("ghx-open")||GH.VersionView.toggleVersionDisplayByElement(e),GH.RapidBoard.Animation.animateHeight(e,0,251,GH.RapidBoard.Animation.LONG_DURATION)})},GH.VersionView.draw=function(){var e=GH.VersionController.getVersionModel(),i=GH.VersionView.getContainer(!0);i.html(GH.tpl.versionview.renderSkeleton({canCreateVersion:e.canUserCreateVersion()}));i=i.find(".ghx-classification-scrollview");i.delegate(".ghx-classification-item","click",function(e){0<AJS.$(e.target).closest(".js-version-details-link, .js-version-actions, .js-editable-field, .js-editing-field, .aui-iconfont-calendar, input.text").not(".js-edit-versionName-trigger").length||GH.VersionView.toggleFiltering(AJS.$(this))}),i.delegate(".js-version-details-toggle","click",function(e){return GH.VersionView.toggleVersionDisplay(AJS.$(this)),!1}),i.delegate(".js-version-name","click",function(e){e.preventDefault()}),i.delegate(".js-try-again","click",function(e){GH.BacklogController.updateVersionData()}),GH.VersionQuickCreate.setAccessibleProjects(e.projects),GH.VersionQuickCreate.registerCreateVersionDialog()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/version/VersionView.soy' */
// This file was automatically generated from VersionView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionview == 'undefined') { GH.tpl.versionview = {}; }


GH.tpl.versionview.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateVersion) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-version', 'ghx-hidden'], text: 'Create version'}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-release-toggle" title="' + soy.$$escapeHtml('Hide versions panel') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml('Versions') + '</h2></div><div class="ghx-progress-indicator ghx-initial"></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderSkeleton.soyTemplateName = 'GH.tpl.versionview.renderSkeleton';
}


GH.tpl.versionview.renderVersions = function(opt_data, opt_ignored) {
  var output = GH.tpl.versionview.renderAllVersions(opt_data) + '<div class="ghx-classification-cards">';
  var versionList19 = opt_data.versions;
  var versionListLen19 = versionList19.length;
  for (var versionIndex19 = 0; versionIndex19 < versionListLen19; versionIndex19++) {
    var versionData19 = versionList19[versionIndex19];
    output += GH.tpl.versionview.renderVersion({version: versionData19, isSelected: opt_data.selectedVersionId == versionData19.id, isVersionExpanded: opt_data.isVersionExpandedById[versionData19.id], canEditVersions: opt_data.canEditVersions, showProjects: opt_data.showProjects, showEstimates: opt_data.showEstimates});
  }
  output += '</div>' + ((opt_data.versions.length > 0) ? GH.tpl.versionview.renderVersionPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersions.soyTemplateName = 'GH.tpl.versionview.renderVersions';
}


GH.tpl.versionview.renderVersion = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item' + ((opt_data.isVersionExpanded) ? ' ghx-open' : ' ghx-closed') + ((! opt_data.canEditVersions) ? ' ghx-read-only' : '') + ((opt_data.isSelected) ? ' ghx-selected' : '') + '" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><div class="ghx-inner"><div class="ghx-expander js-version-details-toggle" title="' + soy.$$escapeHtml('Hide/show version information') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'versionName', fieldValue: opt_data.version.name, displayValue: opt_data.version.name}) + '</span>' + ((opt_data.version.project && opt_data.showProjects) ? '<span class="ghx-project-key" title="' + soy.$$escapeHtml(opt_data.version.project.name) + '">' + soy.$$escapeHtml(opt_data.version.project.key) + '</span>' : '') + ((opt_data.canEditVersions) ? '<span id="dd-trigger-' + soy.$$escapeHtml(opt_data.version.id) + '" class="ghx-swatch js-version-actions"></span>' : '') + '</h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.version.id) + '" class="aui-list ghx-href-fix-list js-version-actions-list" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><ul class="aui-list-section aui-last">' + ((opt_data.canEditVersions) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-version-name">' + soy.$$escapeHtml('Edit name') + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary js-version-description">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'description', fieldValue: opt_data.version.description, displayValue: opt_data.version.description, maxDisplayLength: 200, defaultValue: 'No description'}) + '</div>' + ((opt_data.version.project) ? '<div><a class="js-version-details-link" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.version.project.key) + '/fixforversion/' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml('Details') + '</a></div><hr />' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Start Date') + '</div><div class="aui-item ghx-version-date js-version-date js-version-start-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'startDateFormatted', fieldValue: opt_data.version.startDateFormatted, displayValue: opt_data.version.startDateFormatted, defaultValue: 'None'}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Release date') + '</div><div class="aui-item ghx-version-date js-version-date js-version-release-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'releaseDateFormatted', fieldValue: opt_data.version.releaseDateFormatted, displayValue: opt_data.version.releaseDateFormatted, defaultValue: 'None'}) + '</div></div><div class="aui-group js-version-issues-count"><div class="aui-item">' + soy.$$escapeHtml('Issues') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Completed') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.done}) + '</div></div>' + ((opt_data.showEstimates) ? ((! opt_data.version.versionStats.isIssueCountStatistic) ? '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Unestimated') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.version.versionStats.estimateStatisticName}, text: opt_data.version.versionStats.estimateTotal}) + '</div></div>' : '') + '</div><div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format('{0} ({1} {2} {3} {4})',AJS.format('{0}% of {1} done',opt_data.version.versionStats.percentageCompleted,opt_data.version.versionStats.isIssueCountStatistic ? 'issues' : 'estimated work'),opt_data.version.versionStats.estimateDone,'of',opt_data.version.versionStats.estimateTotal,opt_data.version.versionStats.isIssueCountStatistic ? '' : opt_data.version.versionStats.estimateStatisticName)) + '" >' + ((opt_data.version.versionStats.percentageCompleted > 0) ? '<li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.version.versionStats.percentageCompleted) + '%;"></li>' : '') + ((opt_data.version.versionStats.percentageCompleted < 100) ? '<li class="ghx-todo" style="--percentageComplete:' + soy.$$escapeHtml(opt_data.version.versionStats.percentageCompleted) + '%; width:calc(100% - var(--percentageComplete));"></li>' : '') + '</ul></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersion.soyTemplateName = 'GH.tpl.versionview.renderVersion';
}


GH.tpl.versionview.renderAllVersions = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml('All issues') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderAllVersions.soyTemplateName = 'GH.tpl.versionview.renderAllVersions';
}


GH.tpl.versionview.renderVersionPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-version-id="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml('Issues without versions') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersionPending.soyTemplateName = 'GH.tpl.versionview.renderVersionPending';
}


GH.tpl.versionview.renderDontAskAgain = function(opt_data, opt_ignored) {
  return '<div class="ghx-dialog-tip"><input id="ghx-dont-ask-for-confirmation" type="checkbox" name="dontask"><label for="ghx-dont-ask-for-confirmation" type="checkbox" checked=false><span class="checkbox-label">Don\u2019t show again</span></label></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderDontAskAgain.soyTemplateName = 'GH.tpl.versionview.renderDontAskAgain';
}


GH.tpl.versionview.renderQuickCreateView = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><fieldset><div class="field-group"><label for="projects">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><select id="ghx-version-project" class="hidden">';
  var projectList180 = opt_data.projects;
  var projectListLen180 = projectList180.length;
  for (var projectIndex180 = 0; projectIndex180 < projectListLen180; projectIndex180++) {
    var projectData180 = projectList180[projectIndex180];
    output += '<option value="' + soy.$$escapeHtml(projectData180.id) + '">' + soy.$$escapeHtml(projectData180.name) + '</option>';
  }
  output += '</select><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-version-name"><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-description">' + soy.$$escapeHtml('Description') + '</label><input class="text" type="text" maxlength="130" id="ghx-version-description"></div><div class="field-group"><label for="ghx-version-start-date">' + soy.$$escapeHtml('Start Date') + '</label><input id="ghx-version-start-date" class="text medium-field" type="text"><span id="ghx-version-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit Start Date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-version-start-date-error"></span></div><div class="field-group"><label for="ghx-version-release-date">' + soy.$$escapeHtml('Release date') + '</label><input id="ghx-version-release-date" class="text medium-field" type="text"><span id="ghx-version-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit Release Date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-version-release-date-error"></span></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderQuickCreateView.soyTemplateName = 'GH.tpl.versionview.renderQuickCreateView';
}


GH.tpl.versionview.renderError = function(opt_data, opt_ignored) {
  return '' + GH.tpl.versionview.renderAllVersions(opt_data) + GH.tpl.plancontroller.renderErrorBlock({errorText: 'We\x27re having trouble retrieving your versions'}) + GH.tpl.versionview.renderVersionPending(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderError.soyTemplateName = 'GH.tpl.versionview.renderError';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanDragAndDrop.js' */
/* globals
 * GH, GH.RapidBoard, GH.EpicController, GH.Notification, GH.VersionController,
 * GH.ConfirmDialog, GH.tpl, GH.EpicView, GH.VersionView, GH.LinkedPagesController, GH.RankController, GH.DetailsView,
 */

/**
 * @module jira-agile/rapid/ui/plan/plan-drag-and-drop
 * @requires module:jquery
 * @requires module:underscore
 * @requires module:jira-agile/rapid/global-events
 * @requires module:jira-agile/rapid/analytics-tracker
 * @requires module:jira-agile/rapid/ui/plan/backlog-controller
 * @requires module:jira-agile/rapid/ui/plan/backlog-model
 * @requires module:jira-agile/rapid/ui/plan/backlog-selection-controller
 * @requires module:jira-agile/rapid/ui/plan/BacklogView
 * @requires module:jira-agile/rapid/ui/plan/issue-actions
 * @requires module:jira-agile/rapid/ui/plan/issue-move-controller
 * @requires module:jira-agile/rapid/ui/plan/kanban-transition-and-rank
 * @requires module:jira-agile/rapid/ui/plan/plan-controller
 * @requires module:jira-agile/rapid/ui/plan/plan-controls
 * @requires module:jira-agile/rapid/ui/plan/plan-issue-list-filtering
 * @requires module:jira-agile/rapid/ui/plan/plan-issue-list-view
 * @requires modeule:jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason
 * @requires module:jira-agile/rapid/ui/plan/sprint-view
 * @requires module:jira-agile/rapid/ui/plan/sprint-controller
 * @requires module:jira-agile/browser-metrics/browser-metrics-util
 * @requires module:jira/featureflags/feature-manager
 */

define('jira-agile/rapid/ui/plan/plan-drag-and-drop', ['require'], function (require) {
    'use strict';

    const $ = require('jquery');
    const _ = require('underscore');
    const GlobalEvents = require('jira-agile/rapid/global-events');
    const AnalyticsTracker = require('jira-agile/rapid/analytics-tracker');
    const BacklogModel = require('jira-agile/rapid/ui/plan/backlog-model');
    const IssueActions = require('jira-agile/rapid/ui/plan/issue-actions');
    const IssueMoveController = require('jira-agile/rapid/ui/plan/issue-move-controller');
    const PlanController = require('jira-agile/rapid/ui/plan/plan-controller');
    const PlanControls = require('jira-agile/rapid/ui/plan/plan-controls');
    const KanbanTransitionAndRank = require('jira-agile/rapid/ui/plan/kanban-transition-and-rank');
    const PlanIssueListFiltering = require('jira-agile/rapid/ui/plan/plan-issue-list-filtering');
    const SprintView = require('jira-agile/rapid/ui/plan/sprint-view');
    const SprintController = require('jira-agile/rapid/ui/plan/sprint-controller');
    const Events = require('jira-agile/rapid/events');
    const BrowserMetricsUtil = require('jira-agile/browser-metrics/browser-metrics-util');
    const PageMode = require('jira-agile/rapid/const/PageMode');

    let BacklogController;
    let BacklogSelectionController;
    let BacklogView;
    let PlanIssueListView;

    // Resolve circular dependencies
    GlobalEvents.on('pre-initialization', function () {
        BacklogController = require('jira-agile/rapid/ui/plan/backlog-controller');
        BacklogSelectionController = require('jira-agile/rapid/ui/plan/backlog-selection-controller');
        BacklogView = require('jira-agile/rapid/ui/plan/BacklogView');
        PlanIssueListView = require('jira-agile/rapid/ui/plan/plan-issue-list-view');
    });

    var PlanDragAndDrop = new Events();

    /** Element that's being dragged */
    PlanDragAndDrop.currentDragElement = undefined;
    PlanDragAndDrop.currentSprintId = null;

    /**
     * The data attribute name that is used droppable to set the reason of rejection.
     *
     * It is specifically used when dropping to get the reason why the rejection pre calculation (on start drag event)
     * excluded the set of dragged issues.
     *
     * @type {string}
     */
    PlanDragAndDrop.REJECTION_REASON_ATTRIBUTE = 'data-target-rejected-reason';

    /**
     * Constants to identify the reason of a drop rejection
     *
     * @type {{VERSION_PROJECT_MISMATCH: string, SUBTASKS_IN_EPIC: string}}
     */
    const DropRejectionReasons = {
        VERSION_PROJECT_MISMATCH: 'versionProjectMismatch',
        SUBTASKS_IN_EPIC: 'subtasksInEpic'
    };

    PlanDragAndDrop.analytics = {};

    PlanDragAndDrop.analytics.sprints = new AnalyticsTracker("gh.sprint.issues");

    PlanDragAndDrop.analytics.ranking = new AnalyticsTracker("gh.rapidboard.rankissues");

    PlanDragAndDrop.cancel = false;
    PlanDragAndDrop.skipNextRank = false;

    /**
     * Get the selector for all elements on which a draggable action shouldn't start
     */
    PlanDragAndDrop.getCancelSelector = function () {
        var cancel = ':input,button,.js-fake-parent,.ghx-subtask-group, .ghx-not-rankable';

        var canManageSprints = BacklogModel.canManageSprints();

        if (!canManageSprints) {
            cancel += ',.ghx-marker';
        }

        return cancel;
    };

    const registerDraggableForBacklogColumn = function ($backlogColumn) {
        const params = Object.assign(sortableIssueParams($backlogColumn), {
            revert: true,
            revertDuration: 0,
            start: (event, ui) => {
                PlanDragAndDrop.skipNextRank = false;
                $backlogColumn.addClass('ghx-drag-in-progress');

                PlanDragAndDrop.dragStartHandler.apply(this, [event, ui]);

                const $card = $(ui.helper.context);
                // Add class to pretend there's a placeholder
                $card.addClass('ghx-draggable-fake-placeholder');
                // Keep the width of the card being dragged the same as those the backlog
                $(ui.helper).width($card.width());
            },
            stop: (event, ui) => {
                $backlogColumn.removeClass('ghx-drag-in-progress');

                PlanDragAndDrop.dragStopHandler.apply(this, [event, ui]);

                const $card = $(ui.helper.context);
                $card.removeClass('ghx-draggable-fake-placeholder');

                if (PlanDragAndDrop.skipNextRank === false) {
                    PlanDragAndDrop.showNotRankableWarning();
                }
            }
        });
        $backlogColumn.on('mousedown', function () {
            if (document.activeElement) {
                document.activeElement.blur();
            }
        }).find('.js-issue').draggable(params);
    };

    const registerSortableForBacklogColumn = function ($backlogColumn) {
        const cancel = PlanDragAndDrop.getCancelSelector();

        // decide which elements should be draggable
        const $firstIssue = $backlogColumn.find('.js-issue').first();
        $backlogColumn.on('mousedown', function () {
            if (document.activeElement) {
                document.activeElement.blur();
            }
        }).agileSortable(Object.assign(sortableIssueParams($backlogColumn), {
            forceHelperSize: true,
            helperProportions: {width: $firstIssue.width(), height: $firstIssue.height()},
            initializeTopAndLeft: true, // required because markers are y axis only and don't get a left value as a result...
            containment: function () {
                // no containment for issues
                if (!this.helper.hasClass('ghx-marker')) {
                    return false;
                }

                var ce = this.currentItem.parent();
                var il = ce.find('.js-issue-list');
                var io = il.offset();

                return [
                    0,
                    io.top,
                    10000,
                    10000
                ];
            },
            intersectionOverride: function (item) {
                var isOverElementHeight = $.ui.isOverAxis(this.positionAbs.top + (this.helperProportions.height / 2), item.top, item.height),
                    isOverElementWidth = $.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),
                    isOverElement = isOverElementHeight && isOverElementWidth,
                    verticalDirection = this._getDragVerticalDirection(),
                    horizontalDirection = this._getDragHorizontalDirection();

                if (!isOverElement) {
                    return false;
                }

                return this.floating ?
                    (((horizontalDirection && horizontalDirection == "right") || verticalDirection == "down") ? 2 : 1)
                    : (verticalDirection && (verticalDirection == "down" ? 2 : 1));
            },
            helperAdjusted: function () {
                if (PlanDragAndDrop.markerMove) {
                    PlanDragAndDrop.adjustMarkerDragOverlayHeight.apply(this);
                }
            },
            axisAdjusted: function () {
                // markers are y axis restricted, issues y axis restricted if epics support isn't enabled
                var axis = 'y';
                if (this.currentItem.is('.js-issue')) {
                    axis = 'both';
                }
                this.options.axis = axis;
            },
            items: '.js-parent-drag:not(.ghx-filtered)',
            // don't drag on the fake parent and the subtask group (activates in IE8 only)
            cancel: cancel,
            change: PlanDragAndDrop.changeHandler
        }));
    };

    /**
     *
     */
    PlanDragAndDrop.enableDragAndDrop = function () {
        // fetch the backlog column
        const $backlogColumn = $('#ghx-content-group');

        PlanDragAndDrop.skipNextRank = false;

        var mousedownSearchBlur = function () {
            // GHS-5110 This is to make sure the blur handler is called on the search input box. See this SO:
            // http://stackoverflow.com/questions/8869708/click-on-jquery-sortable-list-does-not-blur-input
            // I just spent the better part of a day on this. Don't remove it unless you test GHS-5110 again.

            // Checking before calling blur to avoid repeat blur calls
            if (document.activeElement && document.activeElement.id === "ghx-backlog-search-input") {
                $('#ghx-backlog-search-input').blur();
            }
        };
        $backlogColumn.mousedown(function (evt) {
            // ignore if we are clicking on an inline edit!
            if ($(evt.target).is('.js-editing-field')) {
                return;
            }

            mousedownSearchBlur();
            if (GH.RapidBoard.Util.InlineEditable.submitActiveEdits()) {
                // prevents drag operation to start if there were some active inline edits
                evt.stopPropagation();
            }
        });

        if (BacklogModel.isRankable()) {
            registerSortableForBacklogColumn($backlogColumn);
        } else {
            registerDraggableForBacklogColumn($backlogColumn);
        }

        /**
         * We should accept issues with a dropzone covering the entire sprint container when either
         * the subtask dropzone is active, the container is collapsed, or the container has no issues.
         * @param $container
         * @returns {*|{remove}|boolean}
         */
        function shouldUseContainerDropzone($container) {
            return $container.find('.ghx-dropzone-active').length || !$container.hasClass('ghx-open') || $container.find('.ghx-no-issues').length;
        }

        $('.ghx-backlog-container').agileDroppable({
            accept: '.js-sortable.js-issue',
            hoverClass: 'ghx-target-hover',
            tolerance: 'pointer',
            drop: function (event, ui) {
                const $helper = $(ui.helper);
                const $this = $(this);
                if (!shouldUseContainerDropzone($this) || PlanDragAndDrop.cancel) {
                    return;
                }

                const selectedIssueKeys = BacklogSelectionController.getSelectedIssueKeys();
                let sprintModel = null;
                let sprintId = null;

                const strSprintId = $(this).data('sprint-id');
                sprintId = parseInt(strSprintId, 10) || null;
                sprintModel = BacklogModel.getSprintModel(sprintId);
                if (!sprintModel) {
                    sprintModel = BacklogModel.getBacklogModel2();
                }

                // fire analytics
                PlanDragAndDrop.analytics.sprints.trigger("addbydragndrop", "selectedIssuesCount", selectedIssueKeys.length); // SAFE

                // add the issues to the sprint
                let lastIssueKey = null;
                if (!PlanIssueListView.isSubtask($helper)) {
                    // only rank full issues
                    lastIssueKey = _.last(sprintModel.getIssueList().getOrder());
                }

                // This looks racy, but it's the least nasty way of ensuring that the rank operation doesn't happen.
                // jquery ui is not great for this... We should be able to call backlogColumn.sortable('cancel');
                // here instead, but that makes jQuery blow up.
                PlanDragAndDrop.skipNextRank = true;

                // We're using setTimeout to make sure the issue being dragged doesn't get redrawn while the issueList is redrawn
                setTimeout(function () {
                    PlanDragAndDrop.rankIssues(selectedIssueKeys, sprintId, lastIssueKey, null);
                });
            }
        });

        //sub-tasks DnD
        $backlogColumn.find('.ghx-subtask-group').agileSortable(Object.assign({
            items: '.ghx-subtask'
        }, sortableIssueParams($backlogColumn)));

        PlanDragAndDrop.initializeClassificationDnD();
    };

    function sortableIssueParams($backlogColumn) {
        return {
            revert: 0,
            zIndex: 3000,
            appendTo: 'body',
            helper: 'clone',
            scroll: true,
            additionalScrollParents: function () {
                return $('#ghx-backlog, .ghx-classification-scrollview');
            },
            ignoreOriginalScroll: true,
            update: wrapWithDnDSLAFailure(function (event, ui) {
                if (PlanDragAndDrop.skipNextRank) {
                    $backlogColumn.agileSortable('cancel');
                } else {
                    PlanDragAndDrop.updateHandler.apply(this, [event, ui]);
                }
            }),
            start: wrapWithDnDSLAFailure(function (event, ui) {
                PlanDragAndDrop.skipNextRank = false;
                $backlogColumn.addClass('ghx-drag-in-progress');

                const isSprintDivider = $(ui.item.context).hasClass('ghx-marker');
                if (isSprintDivider) {
                    $backlogColumn.addClass('ghx-sprint-divider-drag-in-progress');
                }

                PlanDragAndDrop.dragStartHandler.apply(this, [event, ui]);
            }),
            stop: wrapWithDnDSLAFailure(function (event, ui) {
                $backlogColumn.removeClass('ghx-drag-in-progress ghx-sprint-divider-drag-in-progress');

                PlanDragAndDrop.dragStopHandler.apply(this, [event, ui]);
            })
        }
    }

    const wrapWithDnDSLAFailure = function (callback) {
        return function () {
            try {
                return callback.apply(this, arguments);
            } catch (error) {
                PlanController.fireDnDFailSlaEvent({error: error.message});
            }
        }
    }

    // Visible for testing
    PlanDragAndDrop._wrapWithDnDSLAFailure = wrapWithDnDSLAFailure;

    PlanDragAndDrop.initializeClassificationDnD = function () {

        var cancel = PlanDragAndDrop.getCancelSelector();

        var $allClassificationCards = $('.ghx-classification-cards');
        var $epicsCards = $('#ghx-epic-column').find('.ghx-classification-cards');

        $epicsCards.agileSortable({
            // use clone to fix a FF 15 bug / behaviour that generates a click event on the sorted element
            // in epic case it would activate the filter
            helper: 'clone',
            axis: 'y',
            revert: 0,
            zIndex: 3000,
            containment: 'parent',
            start: function (event, ui) {
                PlanDragAndDrop.dragStartHandler.apply(this, [event, ui]);
            },
            stop: PlanDragAndDrop.dragStopHandler,
            tolerance: 'pointer',
            items: '.js-parent-drag, .js-sortable',
            // don't drag on the fake parent and the subtask group (activates in IE8 only)
            cancel: cancel,
            // if we've just had a droppable drop, then skip this rank
            update: function (event, ui) {
                PlanDragAndDrop.updateHandler.apply(this, [event, ui]);
            }
            // Not needed for epicschange: PlanDragAndDrop.changeHandler
        });

        var $droppableElement = $allClassificationCards.find('.ghx-classification-item')
            .add($('.ghx-classification-pending'));

        // Over/out droppable events are not always triggered in the right order
        // To prevent incorrect cursor style we use the balance of those events
        // Positive balance means we have to show a not allowed cursor icon
        var overOutEventsBalance = 0;

        $droppableElement.agileDroppable({
            accept: '.js-sortable.js-issue',
            hoverClass: 'ghx-target-hover',
            tolerance: 'pointer',
            over: function (event, ui) {
                if ($(this).hasClass('ghx-target-hover-rejected')) {
                    overOutEventsBalance++;
                    if (overOutEventsBalance > 0) {
                        // we use direct style affectation because IE is not able to apply css properties changes
                        // introduced by a class affectation after a when mouse button is pressed
                        ui.helper.css('cursor', 'not-allowed');
                    }
                }
            },
            out: function (event, ui) {
                if ($(this).hasClass('ghx-target-hover-rejected')) {
                    overOutEventsBalance--;
                    if (overOutEventsBalance <= 0) {
                        // remove the style added in the over event handler
                        ui.helper.css('cursor', '');
                    }
                }
            },
            drop: function () {
                overOutEventsBalance = 0;

                var $classificationItem = $(this);
                var epicKey = $classificationItem.attr('data-epic-key');
                var versionId = $classificationItem.attr('data-version-id');

                // stop if the drag was canceled
                if (PlanDragAndDrop.cancel) {
                    return;
                }

                // fetch the selected keys and the epic key
                var selectedIssuesKeys = BacklogSelectionController.getSelectedIssueKeys();

                if ($classificationItem.hasClass('ghx-target-hover-rejected')) {
                    // the target is actually not able to accept the draggable, this class was set during the start event
                    // of the jQuery UI draggable
                    const reason = $classificationItem.attr(PlanDragAndDrop.REJECTION_REASON_ATTRIBUTE);
                    let warningMessage;

                    switch (reason) {
                        case DropRejectionReasons.VERSION_PROJECT_MISMATCH:
                            warningMessage = AJS.format("Issues can only be added to a version that belongs to the same project as the {0,choice,0#issues|1#issue|2#issues}", selectedIssuesKeys.length);
                            break;
                        case DropRejectionReasons.SUBTASKS_IN_EPIC:
                            warningMessage = "You can\'t add sub-tasks to epics. Sub-tasks are automatically associated with the same epic as their parent issues.";
                            break;
                    }

                    if (warningMessage) {
                        GH.Notification.showWarnings(warningMessage, {autoHide: true, preRendered: true});
                    }
                } else {
                    if (!_.isEmpty(epicKey)) {
                        if (PlanIssueListFiltering.isNoneEpicFilterKey(epicKey)) {
                            GH.EpicController.removeIssuesFromAssociatedEpics(selectedIssuesKeys);
                        } else {
                            GH.EpicController.addIssuesToEpic(epicKey, selectedIssuesKeys);
                        }
                    } else if (!_.isEmpty(versionId)) {
                        var selectedIssues = [];
                        _.each(selectedIssuesKeys, function (issueKey) {
                            var issueData = BacklogModel.getIssueData(issueKey);
                            if (issueData) {
                                selectedIssues.push(issueData);
                            }
                        });

                        // does any of the issues have multiple fix version ?
                        var multipleVersions = _.some(selectedIssues, function (issue) {
                            return issue.fixVersions.length > 1;
                        });

                        // the code that effectively update the issues
                        var action = function () {
                            if (PlanIssueListFiltering.isNoneVersionFilterId(versionId)) {
                                GH.VersionController.clearIssuesVersion(selectedIssues);
                            } else {
                                GH.VersionController.setIssuesVersion(parseInt(versionId, 10), selectedIssues);
                            }
                        };

                        if (multipleVersions && !GH.storage.get('gh.dialog.versionChangeConfirm.dontAsk', false)) {
                            // any of the issues have multiple fix versions so we want a confirmation form the user

                            var confirmMessage;
                            if (PlanIssueListFiltering.isNoneVersionFilterId(versionId)) {
                                confirmMessage = AJS.format("This action will remove any versions from the {0,choice,0#issues|1#issue|2#issues}", selectedIssues.length);
                            } else {
                                var version = GH.VersionController.getVersionModel().getVersion(parseInt(versionId, 10));
                                confirmMessage = AJS.format("Adding the selected {1,choice,0#issues|1#issue|2#issues} to version {0} will remove the {1,choice,0#issues|1#issue|2#issues} from any other versions", '<b>' + AJS.escapeHTML(String(version.name)) + '</b>', selectedIssues.length);
                            }

                            var confirmCssId = 'ghx-version-change-confirm-dialog';

                            // create and show the confirm dialog
                            GH.ConfirmDialog.create(confirmCssId, {
                                content: confirmMessage,
                                contentEscaping: false,
                                onConfirmFn: function () {
                                    action();
                                }
                            }).show();

                            // inject the checkbox in the footer since we currently have no way to do that with the API
                            $('#' + confirmCssId).find('.dialog-button-panel').prepend(GH.tpl.versionview.renderDontAskAgain());

                            var $dontAskCheckbox = $('#ghx-dont-ask-for-confirmation');
                            $dontAskCheckbox.change(function () {
                                GH.storage.put('gh.dialog.versionChangeConfirm.dontAsk', $dontAskCheckbox.is(':checked'), false);
                            });
                        } else {
                            // no confirmation needed
                            // We're using setTimeout to make sure the issue being dragged doesn't get redrawn while the issue's version is being updated
                            setTimeout(action);
                        }
                    }
                }

                // This looks racy, but it's the least nasty way of ensuring that the rank operation doesn't happen.
                // jquery ui is not great for this... We should be able to call backlogColumn.sortable('cancel');
                // here instead, but that makes jQuery blow up.
                PlanDragAndDrop.skipNextRank = true;
            }
        });
    };

    /**
     * Delegating drag start handler
     */
    PlanDragAndDrop.dragStartHandler = function (event, ui) {
        window.dispatchEvent(new Event('jira:gh:plan:drag-and-drop:start'));

        BrowserMetricsUtil.trigger('before:dragAndDropIssue');
        PlanDragAndDrop.cancel = false;
        var elem = ui.item ? $(ui.item) : $(ui.helper[0]);
        var container = $(this);
        var isDraggingMarker = elem.hasClass('ghx-marker') || elem.hasClass('js-parent-drag');

        // ensure we stop the search filter edits
        setTimeout(function () {
            PlanControls.stopEdits();
        }, 0);

        // Ensure we hide epic and version dropdowns
        GH.EpicView.hideDropdown();
        GH.VersionView.hideDropdown();

        GH.PlanContextMenuController.hideContextMenu();

        // bind a keyhandler for esc
        $(document).bind('keydown.planDragAndDrop', function (event) {
            if (event.keyCode == 27) {
                PlanDragAndDrop.cancel = true;
                container.agileSortable('cancel');

                // Redraw all statistics
                if (isDraggingMarker) {
                    BacklogController.revertStatistics();
                }
            }
        });

        if (elem.hasClass('js-issue')) {
            PlanDragAndDrop.markerMove = false;
            PlanDragAndDrop.issueDragStartHandler.apply(this, [event, ui]);
        } else if (isDraggingMarker) {
            PlanDragAndDrop.markerMove = true;
            PlanDragAndDrop.markerDragStartHandler.apply(this, [event, ui]);
        }

        GH.LinkedPagesController.hideCurrentDialog();
    };

    /**
     * Delegating drag stop handler
     */
    PlanDragAndDrop.dragStopHandler = function (event, ui) {
        window.dispatchEvent(new Event('jira:gh:plan:drag-and-drop:stop'));

        var elem = ui.item ? $(ui.item) : $(ui.helper[0]);

        PlanDragAndDrop.hideDropZones();

        // unbind the key handler
        $(document).unbind('keydown.planDragAndDrop');

        if (elem.hasClass('js-issue')) {
            PlanDragAndDrop.issueDragStopHandler.apply(this, [event, ui]);
        } else if (elem.hasClass('ghx-marker') || elem.hasClass('js-parent-drag')) {
            PlanDragAndDrop.markerDragStopHandler.apply(this, [event, ui]);
        }
    };

    /**
     * Delegating update handler
     */
    PlanDragAndDrop.updateHandler = function (event, ui) {
        var elem = $(ui.item);

        // if we're in a cancel, fail fast (this still gets called, even when we 'cancel')
        if (PlanDragAndDrop.cancel) {
            return;
        }

        if (elem.hasClass('js-issue')) {
            PlanDragAndDrop.issueUpdateHandler(event, ui);
        } else if (elem.hasClass('ghx-marker') || elem.hasClass('js-parent-drag')) {
            PlanDragAndDrop.markerUpdateHandler(event, ui);
        } else if (elem.hasClass('ghx-classification-item')) {
            PlanDragAndDrop.epicUpdateHandler(event, ui);
        }
    };

    /**
     * Delegating change handler
     */
    PlanDragAndDrop.changeHandler = function (event, ui) {
        var elem = $(ui.item);

        var isIssue = elem.hasClass('js-issue');
        var $placeholder = ui.placeholder;
        var $placeholderParent = $placeholder.parent();
        var isInIssueList = $placeholderParent.hasClass('js-issue-list');

        // handle issue placement
        if (isIssue) {
            // issues can only be dragged into other js-issue-list containers
            if (!isInIssueList) {
                // move back into list
                var $prevIssueList = $placeholder.prevAll('.js-issue-list');
                if ($prevIssueList.length) {
                    $prevIssueList.append($placeholder);
                }
            }
        }

        // handle marker placement
        else {

            // find the sprint id of the dragged marker
            var draggedSprintId = SprintView.getSprintIdForMarker($(ui.item));
            var currentSprintId = SprintView.getSprintIdForElement($placeholder);
            var isInOriginSprint = draggedSprintId === currentSprintId;

            // different behaviour for current dragged sprint and other sprints
            if (isInOriginSprint) {

                // original sprint: make sure marker is outside of list when placed at the end of the list
                if (isInIssueList) {
                    // we have the empty description as last element - ignore that one!
                    var isLastElement = !$placeholder.next('.js-issue').length;
                    if (isLastElement) {
                        // move the placeholder to be after the list
                        $placeholderParent.after($placeholder);
                    }
                }
            } else {
                // other sprints: make sure the marker is always inside the issue list
                if (!isInIssueList) {
                    // move back into list
                    var $prevIssueList = $placeholder.prevAll('.js-issue-list');
                    if ($prevIssueList.length) {
                        $prevIssueList.append($placeholder);
                    }
                }
            }
        }

        // MARKER UPDATE CODE
        if (elem.hasClass('js-issue')) {
            // leave marker stats incorrect on issue move for now.
        } else if (elem.hasClass('ghx-marker') || elem.hasClass('js-parent-drag')) {
            PlanDragAndDrop.markerChangeHandler(event, ui);
        }
    };

    /**
     * Called when issue dragging starts.
     */
    PlanDragAndDrop.issueDragStartHandler = function (event, ui) {
        var draggedIssue = $(ui.item);

        var helper = $(ui.helper);

        if (PlanIssueListView.isSubtask(helper) || !BacklogModel.isRankable()) {
            PlanDragAndDrop.setupDropZones(PlanIssueListView.getIssueId(helper));
        }

        // Keep reference to draggable
        PlanDragAndDrop.currentDragElement = helper;
        if (PlanDragAndDrop.currentDragElement && PlanDragAndDrop.currentDragElement.length > 0)
            PlanDragAndDrop.currentDragElement[0].prevSprintId = SprintView.getSprintIdForElement(draggedIssue)
        PlanDragAndDrop.currentSprintId = SprintView.getSprintIdForElement($(ui.item));

        // ensure that the issue of the card we are dragging is selected
        var issueKey = PlanIssueListView.getIssueKey(helper);
        BacklogSelectionController.ensureIssueSelected(event, issueKey);

        // fetch selected issues
        var selectedIssues = BacklogSelectionController.getSelectedIssueKeys();
        const collapsedChildKeys = BacklogSelectionController.getCollapsedSubTasksToSelection(selectedIssues);

        if (collapsedChildKeys.length > 0) {
            BacklogSelectionController.addSelectedIssueKeys(collapsedChildKeys);
        }

        // handle multidrag
        if (selectedIssues.length > 1) {

            if (helper.hasClass("ghx-parent-group")) {
                helper.children('.js-issue').addClass('ghx-move-main').find('.ghx-move-count > b').text(selectedIssues.length);
            } else {
                helper.addClass('ghx-move-main').find('.ghx-move-count > b').text(selectedIssues.length);
            }
        }

        // check versions to detect which one we can drop onto
        var uniqueProjectIds = _.chain(selectedIssues).map(function (issueKey) {
            return BacklogModel.getIssueData(issueKey).projectId;
        }).uniq().value();

        if (uniqueProjectIds.length > 1) {
            // multi project case, we can't accept drop onto a version, only 'remove from versions'
            rejectVersionItems(DropRejectionReasons.VERSION_PROJECT_MISMATCH, _.isNumber);
        } else {
            rejectVersionItems(DropRejectionReasons.VERSION_PROJECT_MISMATCH, (versionId) => {
                const version = GH.VersionController.getVersionModel().getVersion(versionId);

                // reject because the version and the issues don't belong to the same project
                return (version && version.project && _.first(uniqueProjectIds) !== version.project.id);
            });
        }

        const selectionHasSubtasks = selectedIssues.some(BacklogModel.isSubtask);

        if (selectionHasSubtasks) {
            rejectEpicItems(DropRejectionReasons.SUBTASKS_IN_EPIC);
        }
    };

    /**
     * Marks all version items which pass the predicate as unable to be dropped on.
     * @param reason {DropRejectionReason}
     * @param predicate {Function} the predicate to test. Is passed the id of the version as the parameter,
     *  and passed null for the 'remove issues from versions' item.
     *  If no predicate is passed, all items will be rejected.
     */
    function rejectVersionItems(reason, predicate) {
        rejectItems($('#ghx-version-column'), 'version-id', reason, predicate);
    }

    /**
     * Marks all epic items which pass the predicate as unable to be dropped on.
     * @param reason {DropRejectionReason}
     * @param predicate {Function} the predicate to test. Is passed the id of the epic as the parameter.
     *  and passed null for the 'remove issues from epics' item.
     *  If no predicate is passed, all items will be rejected.
     */
    function rejectEpicItems(reason, predicate) {
        rejectItems($('#ghx-epic-column'), 'epic-id', reason, predicate);
    }

    function rejectItems($context, dataId, reason, predicateForId) {
        const rejectItem = ($item) => $item.addClass('ghx-target-hover-rejected').attr(PlanDragAndDrop.REJECTION_REASON_ATTRIBUTE, reason);

        let $items = $context.find('.ghx-classification-cards .ghx-classification-item');

        let $filteredItems;
        if (_.isFunction(predicateForId)) {
            const predicateForElement = (index, element) => {
                const id = $(element).data(dataId);
                return predicateForId(parseInt(id, 10));
            };
            $filteredItems = $items.filter(predicateForElement);
        }

        rejectItem($filteredItems || $items);

        if (!_.isFunction(predicateForId) || predicateForId(null)) {
            rejectItem($context.find('.ghx-classification-pending'));
        }
    }

    /**
     * Called when an issue drag operation stopped.
     */
    PlanDragAndDrop.issueDragStopHandler = function (event, ui) {
        var $card = ui.item ? $(ui.item) : $(ui.helper[0]);

        // remove the cursor style possibly added by the droppable over event handler
        $card.css('cursor', '');

        // remove multi-drag label
        if ($card.hasClass('ghx-parent-group')) {
            $card.children('.js-issue').removeClass('ghx-move-main');
        } else {
            $card.removeClass('ghx-move-main');
        }

        PlanDragAndDrop.currentDragElement = null;
        $('.ghx-classification-cards').find(".ghx-target-hover-rejected").removeClass('ghx-target-hover-rejected').removeAttr(PlanDragAndDrop.REJECTION_REASON_ATTRIBUTE);


        const $issue = PlanIssueListView.getIssueByKey($card.data('issue-key'));
        const sprintId = SprintView.getSprintIdForElement($issue);
        const isTransition = PlanDragAndDrop.currentSprintId !== sprintId;
        const issueKeys = BacklogSelectionController.getSelectedIssuesInOrder();

        if (isTransition) {
            PlanIssueListView.expandAllAfterTransition(issueKeys);
        }
    };

    PlanDragAndDrop.isIssueBeingDragged = function (issueKey) {
        const currentDragElement = PlanDragAndDrop.currentDragElement;
        if (currentDragElement) {
            const draggedIssueKey = AJS.$(currentDragElement).data('issue-key');
            return issueKey === draggedIssueKey;
        }
    };

    PlanDragAndDrop.isAnyIssueBeingDragged = function () {
        return !!PlanDragAndDrop.currentDragElement;
    };

    PlanDragAndDrop.isIssueInListBeingDragged = function (issueKeys) {
        return _.find(issueKeys, function (issueKey) {
            return PlanDragAndDrop.isIssueBeingDragged(issueKey);
        });
    };

    /**
     * Handles the update event of sortables which are to be ranked.
     */
    PlanDragAndDrop.issueUpdateHandler = function (event, ui) {
        var draggedIssue = $(ui.item);
        var issueKeys = BacklogSelectionController.getSelectedIssuesInOrder();

        // do analytics before we even know if they are successful
        PlanDragAndDrop.analytics.ranking.trigger('dragAndDrop', issueKeys.length); // SAFE

        // find the previous issue (might have to jump over a marker)
        var prevElement = PlanIssueListView.findPrevRankableElement(draggedIssue);
        var prevRankableId = PlanIssueListView.getRankableId(prevElement);

        // find the next issue (might have to jump over a marker)
        var nextElement = PlanIssueListView.findNextRankableElement(draggedIssue);
        var nextRankableId = PlanIssueListView.getRankableId(nextElement);

        // find the sprint the issue now is in
        var sprintId = SprintView.getSprintIdForElement(draggedIssue);

        // rather rank after prev than before next
        var hasPrev = !!prevRankableId;
        var hasNext = !!nextRankableId;
        if (hasPrev && hasNext) {
            nextRankableId = false;
        }

        PlanDragAndDrop.rankIssues(issueKeys, sprintId, prevRankableId, nextRankableId);
    };

    /**
     * Handles the update event of sortables which are to be ranked.
     */
    PlanDragAndDrop.epicUpdateHandler = function (event, ui) {
        function getKeyAndId(epic) {
            return {key: epic.attr('data-epic-key'), id: epic.attr('data-epic-id')};
        }

        var draggedEpic = $(ui.item);
        var epicKeyId = getKeyAndId(draggedEpic);

        // find the previous and next epic
        var prevEpic = draggedEpic.prev();
        var prevEpicKeyId = prevEpic.length > 0 ? getKeyAndId(prevEpic) : false;

        var nextEpic = draggedEpic.next();
        var nextEpicKeyId = nextEpic.length > 0 ? getKeyAndId(nextEpic) : false;

        // even before we know if ranking is successful, reorder issues in data model client side, then re-draw
        var issueKeys = [epicKeyId.key];
        GH.EpicController.reorderEpics(issueKeys, prevEpicKeyId.key, nextEpicKeyId.key);

        var errorFn = function () {
            // if ranking failed, reload model and redraw
            PlanController.reload();
        };

        var doneHandler = function (response) {
            // inspect results for error response
            var errorRankResult = GH.RankController.getErrorRankResultFromResponse(response);
            if (errorRankResult) {
                GH.Notification.showWarning(errorRankResult.errors[0]);
                PlanController.reload();
            }
        };

        GH.RankController.rankEpics(BacklogModel.getRankCustomFieldId(), epicKeyId.id, nextEpicKeyId.id, prevEpicKeyId.id).fail(errorFn).done(doneHandler);
    };

    PlanDragAndDrop.setupDropZones = function (issueId) {
        var backlogModel = BacklogModel.findModelWithIssue(issueId);
        var targetContainers = _.filter($('.ghx-backlog-container'), (container) => {
            let modelId = $(container).data('sprint-id') || 'backlog';
            return modelId !== backlogModel.getId();
        });

        PlanDragAndDrop.showDropZones(targetContainers);
    };

    PlanDragAndDrop.showDropZones = function (containers) {
        _.each(containers, (container) => {
            $(container).find('.js-issue-list').addClass('ghx-dropzone-active');
        });
    };

    PlanDragAndDrop.hideDropZones = function () {
        $('.js-issue-list').removeClass('ghx-dropzone-active');
    };

    /**
     * Adds issues to a sprint and/or ranks them
     *
     * @param {Array.<string>} issueKeys
     * @param {number} sprintId
     * @param {number|null} prevRankableId
     * @param (number|null) nextRankableId
     * @returns {Deferred}
     */
    PlanDragAndDrop.rankIssues = function (issueKeys, sprintId, prevRankableId, nextRankableId) {
        if (GH.RapidBoard.State.isIssueListBacklog()) {
            PlanDragAndDrop.trigger('before:kanbanRankIssue', {selectedIssueNo: issueKeys.length});
            BrowserMetricsUtil.performanceMark('before:backlogRankIssueUI');
            KanbanTransitionAndRank.assignToListAndRank(issueKeys, sprintId, prevRankableId, nextRankableId).always(() => {
                PlanDragAndDrop.trigger('after:kanbanRankIssue');
            });

            return $.Deferred().resolve();
        } else if (GH.RapidBoard.State.isKanbanBoard()) {
            PlanDragAndDrop.trigger('before:kanbanRankIssue', {selectedIssueNo: issueKeys.length});
            BrowserMetricsUtil.performanceMark('before:backlogRankIssueUI');
            KanbanTransitionAndRank.transitionAndRankIssues(issueKeys, sprintId, prevRankableId, nextRankableId).always(() => {
                PlanDragAndDrop.trigger('after:kanbanRankIssue');
            });

            //This return is to make sure we're returning the same thing as rankIssues. rankIssues returns
            //a deferred to represent the outcome of the sprint scope change dialog. If no dialog required, i.e. moving
            //to backlog or future sprint then it returns an already resolved deferred. If a dialog is shown then
            //whether the deferred object is resolved or rejected depends on whether the user clicks ok or cancel. In
            //our case there's no such confirmation step before doing the actual transition and/or rank, hence always
            //return a resolved deferred object.
            return $.Deferred().resolve();
        } else {
            let previousSprintId;
            try {
                previousSprintId = PlanDragAndDrop.currentDragElement[0].prevSprintId;
            } catch (e) {
                previousSprintId = undefined;
            }

            return sprintRankIssues(issueKeys, sprintId, prevRankableId, nextRankableId, this.currentSprintId, previousSprintId);
        }
    };

    function sprintRankIssues(issueKeys, destinationSprintId, prevRankableId, nextRankableId, currentSprintId, prevSprintID) {
        BrowserMetricsUtil.trigger('after:dragAndDropIssue');

        // put together the information about the move
        var issueMoveModel = IssueMoveController.calculateIssueMoveModel(issueKeys, destinationSprintId);

        // kick off confirmation
        var confirmDeferred = IssueMoveController.confirmMove(issueMoveModel);

        // reload if the operation was canceled
        confirmDeferred.fail(function () {
            PlanController.reload();
        });

        // execute the rank if success
        confirmDeferred.done(function (issueMoveModel) {
            PlanDragAndDrop.trigger('before:sprintRankIssue', {selectedIssueNo: issueKeys.length});
            BrowserMetricsUtil.performanceMark('before:backlogRankIssueUI');

            var issueKeysToMove = [];
            var issueKeysToRemove = [];

            var ffManager = require('jira/featureflags/feature-manager');
            const isEventuallyConsistentRapidboardsEnabled = ffManager.isFeatureEnabled('jsw-classic-override-force-consistency-after-issue-create');

            // is this a complete move (so no possibility for done issues moving out of an active sprint)?
            // not possible if only a rank, neither possible when move between active sprints
            var isMove = IssueMoveController.isMoveBetweenActiveSprints(issueMoveModel) ||
                IssueMoveController.isOnlyRankOperation(issueMoveModel);
            if (isMove) {
                issueKeysToMove = issueKeys;
            } else {
                // otherwise we have to distinguish between issues that are done/not done
                var change = issueMoveModel.changes[0];
                issueKeysToMove = change.issueKeys;
                issueKeysToRemove = change.doneIssueKeys;
            }

            let requireReorder = false;

            // even before we know if ranking is successful, reorder issues in data model client side
            if (!_.isEmpty(issueKeysToMove)) {
                requireReorder = BacklogController.moveIssues(issueKeysToMove, destinationSprintId, prevRankableId, nextRankableId);
            }

            // remove done issues
            if (!_.isEmpty(issueKeysToRemove)) {
                //  We know that all issues are from the same model...
                var model = BacklogModel.findModelWithIssue(issueKeysToRemove[0]);
                BacklogController.removeIssues(model, issueKeysToRemove);
            }

            // execute rank and sprint assignment, reload if that fails
            var deferreds = [];
            if (!_.isEmpty(issueKeysToMove)) {
                // move request
                deferreds.push(GH.RankController.sprintRankIssues(BacklogModel.getRankCustomFieldId(), issueKeysToMove, destinationSprintId, nextRankableId, prevRankableId, null, requireReorder, prevSprintID));
            } else {
                // place a null entry in the deferreds array, the moveResponse will be null
                deferreds.push($.Deferred().resolve(null));
            }
            if (!_.isEmpty(issueKeysToRemove)) {
                // remove request
                deferreds.push(GH.RankController.sprintRankIssues(BacklogModel.getRankCustomFieldId(), issueKeysToRemove, null, null, null, undefined, undefined, prevSprintID));
            } else {
                // place a null entry in the deferreds array, the removeResponse will be null
                deferreds.push($.Deferred().resolve(null));
            }
            $.when.apply(null, deferreds)
                .done(function (moveResponse, removeResponse) {

                    GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.ISSUE_RANK);

                    //analytics events for UX CBB solution
                    if (GH && GH.ECX && GH.ECX.fireReadEvent) {
                        GH.ECX.fireReadEvent('backlogScreen', 'issueRankChanged', {issueKeys});
                    }

                    SprintController.triggerAnalytics(issueMoveModel);
                    // inspect move and remove responses to see if they have any RankResults with errors
                    var errorRankResult = moveResponse && GH.RankController.getErrorRankResultFromResponse(moveResponse[0]);
                    if (!errorRankResult) {
                        errorRankResult = removeResponse && GH.RankController.getErrorRankResultFromResponse(removeResponse[0]);
                    }
                    if (errorRankResult) {
                        // show RankResult errors
                        GH.Notification.showWarning(errorRankResult.errors[0]);
                        PlanController.reload(() => {
                            PlanDragAndDrop.trigger('after:sprintRankIssue');
                        });
                    } else {
                        PlanDragAndDrop.refreshDetailsView(issueMoveModel);
                        IssueActions.showSprintRankSuccessMessage(issueMoveModel);
                        if (moveResponse[0].success.newIssuesOrder) {
                            BacklogController.reorderIssuesInSprint(moveResponse[0].success.newIssuesOrder, destinationSprintId);
                        }
                        sendIssueUpdatedTrackEvent(issueMoveModel);
                        PlanDragAndDrop.trigger('after:sprintRankIssue');

                        const activeSprintIds = GH.RapidBoard.State.getActiveSprintIdsForEventuallyConsistentBoard();

                        //If issue has been moved to an active sprint, add the issueId to the JQS cache
                        if (!_.isEmpty(issueKeysToMove) &&
                            ffManager.isFeatureEnabled('jsw-classic-override-force-consistency-after-issue-create') &&
                            activeSprintIds.includes(destinationSprintId) && destinationSprintId !== currentSprintId
                            && (GH.RapidBoard.State.isScrumBoard() || (GH.RapidBoard.State.isKanbanBoard() && ffManager.isFeatureEnabled('jsw.classic.override.force.consistency.kanban'))) //Will remove this condition once rollout is complete
                        ) {
                            GH.RapidBoard.isIssueVisibleInRapidView(issueKeysToMove, PageMode.PLAN, BacklogController.rapidViewData.id);
                        }
                    }
                    PlanController.fireDnDSuccessSlaEvent();
                })
                .fail(function (data, xhr) {
                    GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(issueKeys, data);
                    // if ranking failed, reload model and redraw
                    PlanController.reload(() => {
                        PlanDragAndDrop.trigger('after:sprintRankIssue');
                    });
                    PlanController.fireDnDSlaWithStatusCode(data, xhr);
                });
        });

        // also show a success message right away
        confirmDeferred.done(function () {
            JIRA.trace('gh.plan.ranking.complete');
        });

        return confirmDeferred;
    }

    /**
     * Refresh the details view in response to an issue move,
     * only refreshing if the details view's issue changed scope.
     *
     * This primarily helps keep the issue tools menu's options relevant.
     *
     * @param issueMoveModel
     */
    PlanDragAndDrop.refreshDetailsView = function (issueMoveModel) {
        // Only re-render if the details view is open.
        if (!PlanController.isDetailsViewOpened()) {
            return;
        }

        // Only re-render if the operation changed the scope of an issue
        if (IssueMoveController.isOnlyRankOperation(issueMoveModel)) {
            return;
        }

        var selectedIssueKey = GH.DetailsView.selectedIssueKey;
        var allIssueKeys = IssueMoveController.getAllIssueKeys(issueMoveModel);
        if (_.contains(allIssueKeys, selectedIssueKey)) {
            const EditableDetailsViewReloadReason = require('jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason');
            GH.DetailsView.reload(EditableDetailsViewReloadReason.DETAILS_FIELD_CHANGED);
        }
    };


//
// Marker logic
//

    /**
     * Called when marker dragging starts.
     */
    PlanDragAndDrop.markerDragStartHandler = function (event, ui) {

        var elem = $(ui.item),
            container = elem.parent(),
            containerOffset = container.offset(),
            issueList = container.children('.js-issue-list'),
            issueListOffset = issueList.offset(),
            markerHeight = elem.height(),
//        header = container.find('.js-sprint-header'),
            markerDragOverlay = $(GH.tpl.backlogview.renderDragOverlay({}));

        // following is the min top value for the overlay - as we don't want the overlay to spill into the header area
        // we have to do this because the overlay is appended to the body, and therefore not part of the backlog scrollable
        var minTop = $('#ghx-backlog').offset().top;

        var calcTop = function (issueListOffset) {
            var top = issueListOffset.top;
            return top < minTop ? minTop : top;
        };
        var calcHeight = function (top) {
            return ui.helper.offset().top - top + markerHeight;
        };

        var top = calcTop(issueListOffset);
        var height = calcHeight(top);

        markerDragOverlay.css({
            'top': top,
            'left': containerOffset.left + 1,
            'height': height,
            'width': container.outerWidth() - 2
        }).appendTo('body');

        PlanDragAndDrop.adjustMarkerDragOverlayHeight = function () {
            if (!this.options.axis || this.options.axis != "y") this.helper[0].style.left = this.position.left + 'px';
            if (!this.options.axis || this.options.axis != "x") this.helper[0].style.top = this.position.top + 'px';

            var issueListOffset = issueList.offset();
            var top = calcTop(issueListOffset);
            var height = calcHeight(top);
            markerDragOverlay[0].style.top = top + 'px';
            markerDragOverlay[0].style.height = height + 'px';
        };

        var marker = $(ui.helper);

//    marker.parent().addClass('ghx-active-drag');
//    header.parent().addClass('ghx-active-drag');
        elem.closest('.ghx-sprint-planned').addClass('ghx-active-drag');

        // Keep reference to element
        PlanDragAndDrop.currentDragElement = marker;
    };

    /**
     * Handles the update event of sortable markers.
     */
    PlanDragAndDrop.markerChangeHandler = function (event, ui) {
        // this is where the marker "is" (the placeholder's position relative to other sortables is kept up to date)
        var placeholderMarker = $(ui.placeholder);

        // find the sprint id of the dragged marker
        var draggedSprintId = SprintView.getSprintIdForMarker(ui.item);
        if (!draggedSprintId) {
            return;
        }

        // find the sprint the marker is currently in as well as the previous issue (in that sprint)
        // null for backlog
        var currentSprintId = SprintView.getSprintIdForElement(placeholderMarker);
        var previousRankable = PlanIssueListView.findPreviousVisibleIssueElementInList(placeholderMarker);
        var previousIssueKey = PlanIssueListView.getRankableId(previousRankable);

        // update the statistics of the dragged sprint
        PlanDragAndDrop.updateTemporarySprintStatistics(draggedSprintId, currentSprintId, previousIssueKey);
    };

    /**
     * Called when a marker drag operation stopped.
     */
    PlanDragAndDrop.markerDragStopHandler = function () {
        // clear out classes temporarily added during drag
        var issueListContainers = $('.ghx-backlog-container');
        issueListContainers.removeClass('ghx-active-drag ghx-overtaken');

        // remove the overlay
        $('.ghx-drag-overlay').remove();

        // remove reference to element
        PlanDragAndDrop.currentDragElement = null;
    };


    /**
     * Handles the update event of sortable markers.
     */
    PlanDragAndDrop.markerUpdateHandler = function (event, ui) {

        // do analytics before we even know if they are successful
        PlanDragAndDrop.analytics.sprints.trigger('footerdrag'); // SAFE

        // find the sprint id of the dragged marker
        var draggedMarker = $(ui.item);
        var draggedSprintId = SprintView.getSprintIdForMarker(draggedMarker);
        if (!draggedSprintId) {
            return;
        }

        // find the sprint the marker is currently in as well as the previous issue (in that sprint)
        // null for backlog
        var currentSprintId = SprintView.getSprintIdForElement(draggedMarker);
        var previousRankable = PlanIssueListView.findPreviousVisibleIssueElementInList(draggedMarker);
        var previousIssueKey = PlanIssueListView.getRankableId(previousRankable);

        // let the backlog controller handle the ranking
        PlanDragAndDrop.handleMarkerDragRanking(draggedSprintId, currentSprintId, previousIssueKey);
    };

    /**
     * Executes the marker move operation.
     *
     * Only visible issues are affected. Issues included will be moved to the bottom
     * of the current sprint, issues excluded will be ranked to the top of the next sprint/backlog
     */
    PlanDragAndDrop.handleMarkerDragRanking = function (draggedSprintId, currentSprintId, previousIssueKey) {
        // fetch the data required to rank
        var rankData = BacklogModel.calculateRankingDataForSprintMarkerMove(draggedSprintId, currentSprintId, previousIssueKey);

        // rank the issues
        if (rankData) {
            var deferred = PlanDragAndDrop.rankIssues(rankData.issueKeys, rankData.sprintId, rankData.prevRankableId, rankData.nextRankableId);

            // make sure the selection is still valid - it can't span multiple sprints
            deferred.done(function () {
                var selectionChanged = BacklogSelectionController.validateCurrentSelection();
                if (selectionChanged) {
                    // update the UI
                    BacklogView.updateIssueSelectionState(false);
                }
            });
        }

        // updated the current model in case the marker was placed before any issue. It is really hard to fix this case
        // in PlanDragAndDrop.changeHandler, so we fix it up here :/
        if (draggedSprintId != currentSprintId && !previousIssueKey) {
            // fetch the model for currentSprintId, as depending on where the marker lands this sprint might not be properly redrawn
            // (happens when marker is placed before first issue)
            var modelsToUpdate = [];

            if (currentSprintId) {
                modelsToUpdate.push(BacklogModel.getSprintModel(currentSprintId));
            } else {
                modelsToUpdate.push(BacklogModel.getBacklogModel2());
            }

            // if no rank operation too place, the dragged sprint won't be updated either, so fix this up too
            if (!rankData) {
                modelsToUpdate.push(BacklogModel.getSprintModel(draggedSprintId));
            }

            BacklogView.redrawChangedModels(modelsToUpdate);
        }
    };

    /**
     * Updates sprint statistics temporarily
     *
     * @param draggedSprintId the sprintId
     * @param currentSprintId the id of the sprint the marker is currently in
     * @param previousIssueKey the issue key of the first visible issue before the marker
     */
    PlanDragAndDrop.updateTemporarySprintStatistics = function (draggedSprintId, currentSprintId, previousIssueKey) {
        // fetch the model for the dragged sprint
        var sprintModel = BacklogModel.getSprintModel(draggedSprintId);
        if (!sprintModel) {
            return;
        }

        // calculate temporary data for the dragged marker/sprint
        var data = BacklogModel.calculateTemporaryDataForSprintWithMarker(draggedSprintId, currentSprintId, previousIssueKey);

        // set an overtaken class on affected models
        SprintView.markAsOvertaken(data.modelsData.otherAffectedModels);

        // update marker statistics
        SprintView.updateSprintStatisticForDraggedSprint(sprintModel, data.issueList);
    };

    /**
     * iterator for Underscore.js which selects elements by class name
     * @param className
     */
    PlanDragAndDrop._findShownElementByClass = function (className) {
        return function (elem) {
            var $elem = $(elem);
            return $elem.hasClass(className) && !$elem.is(":hidden");
        };
    };

    /**
     * iterator for Underscore.js which selects elements by class name
     * @param className
     */
    PlanDragAndDrop._findShownElement = function (elem) {
        var $elem = $(elem);
        return !$elem.is(":hidden");
    };

    PlanDragAndDrop.showNotRankableWarning = function () {
        var url = GH.RapidBoard.getRapidViewConfigurationUrl(BacklogController.rapidViewData.id, 'filter');
        var a = '<a href="' + url + '">';
        var endA = '</a>';

        var message = AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.", a, endA);
        GH.Notification.showWarning(message);
    };

    function sendIssueUpdatedTrackEvent(issueMoveModel) {
        const issueChanges = issueMoveModel.changes[0];
        const updatedItems = [];

        // Grab the sprint IDs if moved to/from sprint, backlog will be null as it has no sprint ID
        let oldValId = null;
        let newValId = null;
        if (issueChanges.currentSprint) {
            oldValId = issueChanges.currentSprint.id;
        }
        if (issueChanges.targetSprint) {
            newValId = issueChanges.targetSprint.id;
        }
        if (oldValId !== newValId) {
            updatedItems.push({
                name: 'sprint',
                oldValId,
                newValId,
            })
        } else {
            updatedItems.push({name: `customfield_${GH.BacklogModel.getRankCustomFieldId()}`});
        }

        // For each issue fire analytics event
        issueChanges.issueKeys.forEach(issueKey => {
            GH.RapidBoard.sendIssueUpdatedTrackEvent(GH.BacklogModel.getIssueData(issueKey), updatedItems);
        });

        const FeatureFlagService = require('jira/featureflags/feature-manager');
        const trackECRanking = FeatureFlagService.getFlagResultObject('jsw-classic-boards-and-backlog-ux-solutions-tracking');
        if(trackECRanking && trackECRanking.value && trackECRanking.value.delay){
            JIRA?.SessionStorage?.setItem("issueRankChanged", Date.now().valueOf());
        }
    };

    return PlanDragAndDrop;
});
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanController.js' */
/* globals
 * GH, GH.VersionController, GH.EpicController, GH.DetailsView, GH.RapidBoard,
 * GH.planOnboarding, GH.RapidViewConfig, GH.ViewActions, GH.BoardState
 */

/**
 * Plan Controller
 * @module jira-agile/rapid/ui/plan/plan-controller
 * @requires module:jquery
 * @requires module:jira-agile/rapid/global-events
 * @requires module:jira-agile/rapid/analytics-tracker
 * @requires module:jira-agile/rapid/ui/plan/backlog-controller
 * @requires module:jira-agile/rapid/ui/plan/backlog-selection-controller
 * @requires module:jira-agile/rapid/ui/plan/plan-controls
 * @requires module:jira-agile/rapid/ui/plan/plan-issue-list-filtering
 * @requires module:jira-agile/rapid/ui/plan/plan-view
 */
define('jira-agile/rapid/ui/plan/plan-controller', ['require'], function (require) {
    'use strict';

    const $ = require('jquery');
    const _ = require('underscore');
    const GlobalEvents = require('jira-agile/rapid/global-events');
    const AnalyticsClient = require('jira/analytics/web-client');
    const AnalyticsTracker = require('jira-agile/rapid/analytics-tracker');
    const PlanControls = require('jira-agile/rapid/ui/plan/plan-controls');
    const PlanIssueListFiltering = require('jira-agile/rapid/ui/plan/plan-issue-list-filtering');
    const PlanView = require('jira-agile/rapid/ui/plan/plan-view');
    const PageMode = require('jira-agile/rapid/const/PageMode');
    const GHEvents = require('jira-agile/rapid/events');
    const QuickFilterBridge = require('jira-agile/rapid/work/quick-filters-bridge');
    const UNASSIGNED_USER_ID = 'UNASSIGNED_USER_ID';
    const FeatureFlagService = require('jira/featureflags/feature-manager');
    const SprintView = require('jira-agile/rapid/ui/plan/sprint-view');
    const UserData = require('jira-agile/rapid/user-data');
    const BentoFeatures = require('jira-agile/rapid/ui/bento/bento-features');
    const BrowserMetricsUtil = require('jira-agile/browser-metrics/browser-metrics-util');
    const TraceUtils = require('jira-agile/rapid/trace-utils');
    const TraceUtilsHelper = require('jira-agile/rapid/trace-utils-helper');
    const DeferredResourcesLoader = require('jira-agile/rapid/deferred-resources-loader');
    const MAX_NUM_ERR_EVENTS = 25;
    const GlobalErrors = require('jira-agile/rapid/ui/sla/global-errors');
    const REASON_BACKLOG_CRITICAL_DATA_FAILED = 'backlog-critical-data-failed-unknown-reason';
    const REASON_BACKLOG_CRITICAL_DATA_FAILED_FRONTEND_ERROR = 'backlog-critical-data-failed-with-frontend-error';
    const REASON_BACKLOG_CRITICAL_DATA_FAILED_WITH_STATUS_CODE = 'backlog-critical-data-failed-with-status-code';
    const ROUTE_CHANGED_BEFORE_LOADING_COMPLETE = 'backlog-critical-data-failed-due-to-route-changed';
    const isClassicBoardsAndBacklogSLAIgnoreNetworkError = FeatureFlagService.isFeatureEnabled('jsw.classic.board.backlog.ignore.network.errors_anozv');

    let BacklogView;
    let PlanDragAndDrop;

    var BacklogSelectionController;
    var BacklogController;
    var MoveIssuesToAgilityBacklogController;

    // Resolve circular dependencies
    GlobalEvents.on('pre-initialization', function() {
        BacklogSelectionController = require('jira-agile/rapid/ui/plan/backlog-selection-controller');
        BacklogController = require('jira-agile/rapid/ui/plan/backlog-controller');
        BacklogView = require('jira-agile/rapid/ui/plan/BacklogView');
        PlanDragAndDrop = require('jira-agile/rapid/ui/plan/plan-drag-and-drop');
        MoveIssuesToAgilityBacklogController = require('jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-controller');
    });

    var PlanController = new GHEvents();

    PlanController.isVisible = false;

    PlanController.viewData = undefined;
    PlanController.currentViewConfig = {};
    PlanController.activeFilters = { assigneeList: [] };
    PlanController.unsubscribeQuickFilterUpdate = null;
    PlanController.unsubscribeQuickFilterClearAllFilters = null;
    PlanController.analytics = function (categorySuffix) {
        return new AnalyticsTracker('gh.planningboard.' + categorySuffix);
    };

    /***
     * Constants added as a part of Vertical Split  -
     * this feature is specifically to improve the performance of Rapid Boards Backlog page
     * VS_DEFAULT_ISSUE_LIMIT - Total # of issues to be shown on screen
     * VS_SHOW_ALL_ISSUES - Flag used for rendering all the visible issues in Backlog
     * VS_BACKLOG_TAIL_LENGTH - Config for # of issues to be shown after show more
     ***/
    PlanController.VS_ISSUE_LIMIT_100 = 100;
    PlanController.VS_ISSUE_LIMIT_500 = 500;
    PlanController.VS_DEFAULT_ISSUE_LIMIT = PlanController.VS_ISSUE_LIMIT_100;
    PlanController.VS_BACKLOG_TAIL_LENGTH = 10;
    PlanController.VS_SHOW_ALL_ISSUES = -1;
    PlanController.sla = {}
    PlanController.sla.latestErrorStatusCode = null;
    PlanController.sla.task = 'viewBacklog';
    PlanController.sla.dragAndDropTask = 'dragAndDropBacklog';
    PlanController.sla.analyticsSource = 'backlog';
    PlanController.sla.application = 'jira-software';
    PlanController.sla.globalErrors = null;

    /**
     * Initializes the view controller.
     */
    PlanController.init = _.once(function () {
        // initialize the view
        TraceUtils.startSpan('plan-view-controls-init');
        PlanView.init();
        // init controls (quick filters, etc)
        PlanControls.init();
        TraceUtils.endSpan('plan-view-controls-init');

        // initialize the version controller
        TraceUtils.startSpan('version-controller-init');
        GH.VersionController.init();
        TraceUtils.endSpan('version-controller-init');

        // initialise epics
        TraceUtils.startSpan('epic-controller-init');
        GH.EpicController.init();
        TraceUtils.endSpan('epic-controller-init');

        // initialise the backlog
        TraceUtils.startSpan('backlog-controller-init');
        BacklogController.init();
        TraceUtils.endSpan('backlog-controller-init');

        PlanController.on('after:show', () => {
            _.delay(() => {
                TraceUtils.startSpan("backlog-improvements-init");

                if (!GH.EpicView.isbacklogDataV2Enabled()) {
                    if (PlanController.isVersionsColumnVisible()) {
                        GH.VersionView.show();
                    }

                    if(PlanController.isEpicsColumnVisible()) {
                        GH.EpicView.show();
                    }
                }

                GH.RapidBoard.ViewController.updateContentContainer();

                BacklogView.updateIssueSelectionState(true);

                // draw onboarding
                GH.planOnboarding.renderOnboarding();

                // register event handlers
                BacklogView.registerEventHandlers();

                // register twixies for meta data disclosure
                SprintView.registerTwixies();

                GH.sprintActions.createDropdown();

                // set the "rendered" attribute to indicate when the eagle has land... err, board has loaded
                $('#ghx-backlog').attr("data-rendered", new Date().getTime());
                // Setup global error capturing for sla
                
                const rapidViewConfig = GH.RapidViewConfig.currentData.data;
                PlanController.adjustContentVisibilityForExtraFields(rapidViewConfig.planModeExtraFieldIds);
                TraceUtils.endSpan("backlog-improvements-init");
            });

        });

        try {
            captureGlobalErrors();
        } catch (ignored) {
            // Fail silently
        }
    });

    /**
     * Is the plan controller currently active
     * @return {boolean}
     */
    PlanController.isActive = function () {
        return PlanController.isVisible;
    };

    /**
     * Sets the rapid view data.
     */
    PlanController.setRapidView = function (rapidViewData) {
        PlanController.rapidViewData = rapidViewData;

        // set data on sub-widgets
        BacklogController.setRapidView(rapidViewData);
    };

    const initView = () => {
        QuickFilterBridge.isReactFiltersEnabled().then(isReactFiltersEnabled => {
            if (isReactFiltersEnabled) {
                initFiltersBridge();
            }
            /*
             Shows the dialog to move issues from the first column on the board
             to the backlog if it should be shown
             The dialog is shown here because the filter bar is loaded last and would otherwise cause
             the dialog to look like it's appearing from the divider in adg2.
             */
            if (GH.RapidBoard.State.isIssueListBacklog()) {
                MoveIssuesToAgilityBacklogController.showDialog(PlanController.rapidViewData.id);
            }
        });
    };

    /**
     * Called when the plan tab is shown
     */
    PlanController.show = function () {
        if (!PlanController.rapidViewData) {
            return;
        }
        PlanController.isVisible = true;

        // show the view
        PlanView.show();

        // configure the UI
            PlanController.configureUI();


        PlanController.attachControlFHandler();

        // kick off loading the view configuration
        return PlanController.loadRapidViewConfig()
            .then(() => {
                initView();
            }).finally(() => {
                checkBacklogAndFireSlaEvent();
            });
    };

    const fireFailureOperationalEvent = (reason, message, error, action) => {
      AnalyticsClient.sendOperationalEvent({
        source: "PlanController",
        actionSubject: "backlog failureEvent",
        action,
        attributes: {
          reason,
          message,
          source: "backlogScreen",
          error,
          synthetic: FeatureFlagService.isFeatureEnabled(
            "jsw.pollinator.tenants"
          ),
          boardType: GH.RapidBoard.State.getBoardTypeForAnalytics(),
        },
      });
    };

    const captureGlobalErrors = () => {
        initGlobalErrors();
        window.addEventListener('error', (errorEvent) => {
            try {
                if (PageMode && GH.RapidBoard.State.getMode() === PageMode.PLAN) {
                    GH.PlanController.sla.globalErrors.recordError(errorEvent);
                }
            } catch (ignored) {
                // Fail silently if capturing error fails.
            }
            return false;
        });
    };

    const flushGlobalErrors = () => initGlobalErrors();

    const initGlobalErrors = () => {
        PlanController.sla.globalErrors = new GlobalErrors(MAX_NUM_ERR_EVENTS);
    };

    PlanController.setServerFailureResponse = (error) => {
      const { errors } = error || {};

      if (errors && Array.isArray(errors) && errors.length === 1) {
        return (PlanController.sla.serverFailureResponse = errors[0]);
      }
    };

    const isUserNetworkError = () => {
      if (PlanController.sla && PlanController.sla.serverFailureResponse) {
        const { name } = PlanController.sla.serverFailureResponse || {};

        return name === "TypeError" || name === "AbortError";
      }
    };

    const debugTaskFailSLAEvents = (statusCode) => {
        try{
            const allErrors = GH.PlanController.sla.globalErrors
                ? (GH.PlanController.sla.globalErrors.getAllErrors() || [])
                : [];
            return {
                origin: 'PlanController',
                statusCode: statusCode ? statusCode : 'unknown',
                userAgent: navigator ? navigator.userAgent : 'unknown',
                isTransition: GH.RapidBoard.State ? GH.RapidBoard.State.isFirstLoad() : 'unknown',
                issueNumBackend: GH.RapidBoard.State.numberOfIssues.get(),
                setPoolDataNewFlow: GH.PlanController.sla.setPoolDataNewFlow,
                windowErrors: allErrors,
                tracerLogs: TraceUtils.getTrace(),
                href: window.location.href,
                referrer: document.referrer
            };
        } catch (ignored) {
            return {};
        }
    }

    const checkBacklogAndFireSlaEventFromModernUtil = (issues) => {
        const backlogsRegex =
            /\/jira\/software\/c\/projects\/[A-Za-z0-9]{1,10}\/boards\/[0-9]*\/backlog[/]?$/;
        if(!backlogsRegex.test(window.location.pathname)){
            return;
        }
        const statusCode = getLatestErrorStatusCodeForSlaEvent();
        // Ref: https://hello.atlassian.net/wiki/spaces/agile/pages/512782292/SWAG+response+handling+on+the+client
        let slaResult = null;
        if (GH.spa) {
            // Common util is present in JFE
            slaResult = GH.spa.slaUtil(statusCode, PageMode.PLAN);
        }

        if (slaResult !== null && slaResult.state === 'success') {
            //401 to 403 indicates  missing permission, board does not exist, not logged in, etc
            //404 should never happen. Already checked in GH.RapidViewConfig.handleRapidLoadError()
            if (statusCode !== 404) {
                fireViewBacklogSuccessSlaEvent();
            }
        } else if (statusCode === undefined || statusCode === null) {
            let failureReason = REASON_BACKLOG_CRITICAL_DATA_FAILED;

            const filters = PlanController.activeFilters;
            const haveFiltersApplied = filters &&
                ((filters.assigneeList && filters.assigneeList.length > 0)
                    || (filters.issueTypeList && filters.issueTypeList.length > 0)
                    || (filters.searchText && filters.searchText.length > 0));

            if (GH.PlanController.sla.globalErrors.hasNonScriptError()) {
                failureReason = REASON_BACKLOG_CRITICAL_DATA_FAILED_FRONTEND_ERROR;
            }
            TraceUtils.startSpan('plan-fire-sla-undefined-status', {start: TraceUtilsHelper.additionalDebugAttributesForPlanController()});
            if (TraceUtilsHelper.hasUserChangedRoute()) {
                // TODO : Need to remove operational event as it was added to check the frequency
                // Changing naviagtion should not be accounted as failure. Do nothing.
                AnalyticsClient.sendOperationalEvent({
                    source: 'workModeNavigation',
                    actionSubject: 'workModeNavigationFailure',
                    action: 'navigated-away',
                    attributes: {
                        reason: ROUTE_CHANGED_BEFORE_LOADING_COMPLETE,
                        numEmptyBoards: emptyBoard.length,
                        numColumns: columns.length,
                        numIssues: issues.length,
                        numEmptyColumns: emptyColumns.length,
                        haveFiltersApplied: haveFiltersApplied,
                        source: 'backlog'
                    }
                });
                clearErrorStatusCodeForSlaEvent();
                return;
            }

            if(isClassicBoardsAndBacklogSLAIgnoreNetworkError){
                if(!isUserNetworkError()) {
                    fireViewBacklogFailSlaEvent({
                        reason: failureReason,
                        numIssues: issues.length,
                        haveFiltersApplied: haveFiltersApplied,
                        statusCode: statusCode,
                        debugAttributes: debugTaskFailSLAEvents(statusCode)
                    });
                }
            } else{
                fireViewBacklogFailSlaEvent({
                    reason: failureReason,
                    numIssues: issues.length,
                    haveFiltersApplied: haveFiltersApplied,
                    statusCode: statusCode,
                    debugAttributes: debugTaskFailSLAEvents(statusCode)
                });
            }
            TraceUtils.endSpan('plan-fire-sla-undefined-status', {end: TraceUtilsHelper.additionalDebugAttributesForPlanController()});
        } else if (statusCode >= 500) {
            //5XX are logged as failure
            TraceUtils.startSpan('plan-fire-sla-500-status');
            fireViewBacklogFailSlaEvent({
                reason: REASON_BACKLOG_CRITICAL_DATA_FAILED_WITH_STATUS_CODE,
                statusCode: statusCode,
                debugAttributes: debugTaskFailSLAEvents(statusCode)
            });
            TraceUtils.endSpan('plan-fire-sla-500-status');
        }
        clearStatusCodeForSlaEvent();
        return;
    }

    var clearErrorStatusCodeForSlaEvent = function () {
        try {
            TraceUtils.startSpan('plan-controller-clear-sla-data', {start: TraceUtilsHelper.additionalDebugAttributesForPlanController()});
            PlanController.sla = {};
            PlanController.sla.globalErrors = null;
            TraceUtils.endSpan('plan-controller-clear-sla-data', {end: TraceUtilsHelper.additionalDebugAttributesForPlanController()});
        } finally {
            TraceUtilsHelper.flushTrace();
            TraceUtils.flushTrace();
            flushGlobalErrors();
        }
    };

    const checkBacklogAndFireSlaEvent = () => {
        if (GH.RapidBoard.ViewController.hasTransitionedToAnotherRoute(window.location)) {
            return;
        }

        if (!PlanController.isActive() && GH.RapidBoard.ViewController.getMode() !== PageMode.PLAN) {
            // Backlog is not visible, probably because user has navigated away from it before the backlog loads. Do nothing.
            clearStatusCodeForSlaEvent();
            return;
        }
        const rapidBoard = AJS.$('#ghx-backlog');
        const issues = rapidBoard.find('.ghx-backlog-card');
        checkBacklogAndFireSlaEventFromModernUtil(issues);
    };

    const fireViewBacklogSuccessSlaEvent = () => {
        PlanController.fireSlaEvent('taskSuccess', PlanController.sla.task, {});
    };

    const fireViewBacklogFailSlaEvent = (reason) => {
        PlanController.fireSlaEvent('taskFail', PlanController.sla.task, reason);
    };

    PlanController.fireDnDSlaWithStatusCode = (data, xhr) => {
        const statusCode = xhr && xhr.status;
        if (statusCode >= 500) {
            const error = data && data.hasGlobalErrors() ? data.getGlobalErrors()[0].message : undefined;
            PlanController.fireDnDFailSlaEvent({error: error, statusCode: statusCode});
        } else {
            //this is on purpose because we treat everything less than 500 as success, similar to other experiences.
            PlanController.fireDnDSuccessSlaEvent();
        }
    }

    PlanController.fireDnDSuccessSlaEvent = () => {
        PlanController.fireSlaEvent('taskSuccess', PlanController.sla.dragAndDropTask, {});
    }

    PlanController.fireDnDFailSlaEvent = (reason) => {
        PlanController.fireSlaEvent('taskFail', PlanController.sla.dragAndDropTask, reason);
    }

    // The 'synthetic' prop in SLA events is used to filter synthetic check (pollinator)
    // tenants out of board SLA monitoring and alerts
    const isSyntheticCheckTenant = function () {
        return FeatureFlagService.isFeatureEnabled('jsw.pollinator.tenants');
    }

    PlanController.fireSlaEvent = (action, task, reason) => {
        const rapidViewConfig = GH.RapidViewConfig.currentData.data;

        AnalyticsClient.sendOperationalEvent({
            source: 'ui',
            actionSubject: 'ui',
            action: action,
            attributes: {
                task: task,
                shard: AJS.Meta.get('shard'),
                analyticsSource: PlanController.sla.analyticsSource,
                application: PlanController.sla.application,
                edition: GH.Util.getEdition(PlanController.sla.application),
                taskId: rapidViewConfig.id,
                boardType: GH.RapidBoard.State.getBoardTypeForAnalytics(),
                isClassic: true,
                synthetic: isSyntheticCheckTenant(),
                ...reason
            }
        });
    };

    const clearStatusCodeForSlaEvent = () => {
        try{
            TraceUtils.startSpan('plan-clear-sla-data');
            PlanController.sla.latestErrorStatusCode = null;
            PlanController.sla.serverFailureResponse = null;
            TraceUtils.endSpan('plan-clear-sla-data');
        } finally {
            TraceUtils.flushTrace();
            flushGlobalErrors();
        }

    }

    const getLatestErrorStatusCodeForSlaEvent = () => {
        return PlanController.sla.latestErrorStatusCode;
    }

    function initFiltersBridge() {
        GH.bridge.FilterBridge.reset();

        loadFilterPanelInitialData();

        GH.RapidBoard.updateMultilineQuickFilterToggledState();

        if (PlanController.unsubscribeQuickFilterUpdate) {
            PlanController.unsubscribeQuickFilterUpdate();
        }

        PlanController.unsubscribeQuickFilterUpdate = GH.bridge.FilterBridge.on('update', (filters) => {
            if (filters.searchText) {
                BrowserMetricsUtil.triggerBefore('before:backlogSearchFilter', 'backlogSearchFilter');
            }
            const initialQuickFilterIds = PlanControls.getActiveQuickFilterIds();

            PlanController.activeFilters = Object.assign({}, filters, { searchText: filters.searchText.trim() });

            if (initialQuickFilterIds.length !== filters.quickFilterList.length) {
                try {
                    GH.ECX.markUserInteraction(
                        GH.ECX.INTERACTION_TYPE.BACKLOG.QUICK_FILTERS_CHANGE,
                        !FeatureFlagService.isFeatureEnabled('moonwalk.eventually-consistent.backlog.quick-filters')
                    );
                } catch (e) {
                    AJS.trigger('analyticsEvent', {
                        name: 'jira.agile.board.PlanController.quickFilters.MarkUserInteractionError',
                        data: {errorMsg: e.toString()}
                    });
                }
            }

            PlanControls.setActiveQuickFilterIds(filters.quickFilterList);

            GH.RapidBoard.State.pushState();

            if (initialQuickFilterIds.length !== filters.quickFilterList.length) {
                BrowserMetricsUtil.triggerBefore('before:backlogQuickFilter', 'backlogQuickFilter');
                GH.PlanController.reload(function () {
                    updateLabelsAndAssigneeLists();
                });
            }

            try {
                const result = new RegExp(PlanController.activeFilters.searchText || '', 'i');
                BacklogController.executeSearch(result);
            } catch (e) {
                // Created an event to track invalid regex cases
                AJS.trigger('analyticsEvent', {
                    name: 'jira.agile.board.PlanController.invalid.regex.search.box.Error',
                    data: {errorMsg: e.toString()}
                });
            }

            BrowserMetricsUtil.triggerAfter('after:backlogSearchFilter', 'backlogSearchFilter');

            BacklogController.filterByAssignees(filters.assigneeList && filters
                    .assigneeList.map(id => id === UNASSIGNED_USER_ID ? null : id));

            BacklogController.filterByLabels(filters.labelList);

            fireQuickFilterToggledEvent();
        });
        /* To align the clear-all behaviour of the filter panel's clear all button and the clear all link that appears
           in the planning view, we trigger a clearAllFilters event in jira frontend and create an event handler here
           that will respond by invoking the existing BacklogController's clearFilters() method that will clear: the search text,
           assignee filter, quick filter, versions and epics.
         */
        // Clear any existing event listeners when showing the page.
        if (PlanController.unsubscribeQuickFilterClearAllFilters) {
            PlanController.unsubscribeQuickFilterClearAllFilters();
        }
        PlanController.unsubscribeQuickFilterClearAllFilters = GH.bridge.FilterBridge.on('clearAllFilters', function () {
            BacklogController.clearFilters();
        });
    }

    function loadFilterPanelInitialData() {
        const quickFiltersList = PlanControls.getQuickFilters().map(item => ({
            ...item,
            id: parseInt(item.id, 10)
        }));
        GH.bridge.FilterBridge.loadQuickFilterList(quickFiltersList);
        updateLabelsAndAssigneeLists();
        loadCurrentUser();
        updateQuickFilterSearchText();
    }

    function fireQuickFilterToggledEvent() {
        const rapidViewConfig = GH.RapidViewConfig.currentData.data;
        const activeQuickFilters = PlanControls.getQuickFilters()
            .filter(filter => filter.isActive)
            .map(filter => filter.query);

        if (activeQuickFilters.length > 0) {
            AnalyticsClient.sendTrackEvent({
                containerType: rapidViewConfig.locationType,
                containerId: JIRA.API && JIRA.API.Projects && JIRA.API.Projects.getCurrentProjectId(),
                objectType: 'backlog',
                objectId: rapidViewConfig.id,
                source: 'backlogScreen',
                actionSubject: 'quickFilter',
                actionSubjectId: 'applyQuickfilter',
                action: 'applied',
                attributes: {
                    boardId: rapidViewConfig.id,
                    boardType: GH.RapidBoard.State.getBoardTypeForAnalytics(),
                    quickFiltersAppliedCount: activeQuickFilters.length,
                    onlyMyIssuesQuickFilterApplied: activeQuickFilters.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY) > -1,
                    recentlyUpdatedQuickFilterApplied: activeQuickFilters.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY) > -1,
                    customQuickFilterApplied: activeQuickFilters.some(query => query !== GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY && query !== GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY),
                    hasActiveDeploymentFilter: activeQuickFilters.some(query => query.includes("deployment")),
                },
            });
        }
    }

    function getCurrentUser() {
        const userConfig = UserData.getUserConfig();
        if (userConfig) {
            return {
                id: userConfig.accountId,
                name: userConfig.displayName,
                avatarUrl: userConfig.avatarUrl,
            };
        }
    }

    function loadCurrentUser() {
        const currentUser = getCurrentUser();
        if (currentUser && GH.bridge.FilterBridge.loadCurrentUser) {
            GH.bridge.FilterBridge.loadCurrentUser(currentUser);
        }
    }

    function updateQuickFilterSearchText() {
        const activeFilters = PlanController.activeFilters;
        const searchText = activeFilters.searchText || '';

        if (searchText) {
            BacklogController.executeSearch(new RegExp(searchText || '', 'i'));
        }

        GH.bridge.FilterBridge.loadSearchText(searchText);
    }

    function addDefaultFiltersIfNotPresent(assigneesById, activeFilters) {
        const currentUser = getCurrentUser();
        if (currentUser && !assigneesById[currentUser.id]) {
            currentUser.isActive = activeFilters.assigneeList ? activeFilters.assigneeList.indexOf(currentUser.id) > -1 : false;
            assigneesById[currentUser.id] = currentUser;
        }

        if (!assigneesById[UNASSIGNED_USER_ID]) {
            assigneesById[UNASSIGNED_USER_ID] = {
                id: UNASSIGNED_USER_ID,
                name: "Unassigned",
                isActive: activeFilters.assigneeList ? activeFilters.assigneeList.indexOf(UNASSIGNED_USER_ID) > -1 : false,
            }
        }
    }

    function getAssigneeList() {
        const activeFilters = PlanController.activeFilters;

        const assigneesById = {};
        GH.BacklogModel.map(item => {
            const id = item.assigneeAccountId || UNASSIGNED_USER_ID;
            return {
                id,
                name: item.assigneeName || "Unassigned",
                avatarUrl: item.avatarUrl,
                isActive: activeFilters.assigneeList ? activeFilters.assigneeList.indexOf(id) > -1 : false
            };
        }).forEach((assignee) => {
            assigneesById[assignee.id] = assignee;
        });

        addDefaultFiltersIfNotPresent(assigneesById, activeFilters);

        return Object.values(assigneesById);
    }

    function validateActiveAssigneeList() {
        const assigneeIdList = getAssigneeList().map(({ id }) => id);
        const activeAssigneeList = PlanController.activeFilters.assigneeList;
        const filtered = activeAssigneeList.filter(assignee => assigneeIdList.includes(assignee));

        return filtered.length === activeAssigneeList.length
            ? { isValid: true, assigneeList: filtered }
            : { isValid: false, assigneeList: filtered };
    }

    function updateLabelsAndAssigneeLists() {
        const { isValid, assigneeList } = validateActiveAssigneeList();

        if (!isValid) {
            PlanController.activeFilters.assigneeList = assigneeList;
            GH.RapidBoard.State.replaceState();
        }

        GH.bridge.FilterBridge.loadAssigneeList(getAssigneeList());

        if (GH.bridge.FilterBridge.loadLabelList) {
            GH.bridge.FilterBridge.loadLabelList(getLabelList());
        }
    }

    function getLabelList() {
        const labelSet = new Set();
        const labelsByIssue = GH.BacklogModel.map(item => item.labels || []);
        labelsByIssue.forEach(
            (issuelabels) => issuelabels.forEach(
                (l) => labelSet.add(l)
            )
        );
        return [...labelSet];
    }

    PlanController.configureUI = function () {
        // fetch the selected issue
        var selectedIssueKey = BacklogSelectionController.getSelectedIssueKey();

        // set the correct rapid view id
        GH.DetailsView.setRapidViewId(PlanController.rapidViewData.id);

        if (selectedIssueKey) {
            // tell the detail view what issue to load.
            GH.DetailsView.setSelectedIssueKey(selectedIssueKey);
        }

        PlanView.updateDetailViewState();

        if (!GH.EpicView.isbacklogDataV2Enabled()) {
            // toggle the version column
            PlanView.updateVersionColumnState();

            // toggle the epics column
            PlanView.updateEpicsColumnState();
        }
    };

    PlanController.lastPushUpdate = 0;
    PlanController.pushTimeoutHandler = undefined;
    PlanController.updateDetailsView = function (issueKey, forceShow, detailsViewReloadReason, shortcutAction) {
        var stallDuration = 300;
        var now = new Date().getTime();

        // update directly if older than x ms
        if (PlanController.lastPushUpdate < (now - stallDuration)) {
            PlanController.doUpdateDetailsView(issueKey, forceShow, detailsViewReloadReason, shortcutAction);
            PlanController.lastPushUpdate = now + stallDuration;
            return;
        }

        // clear previous timeout handler
        if (PlanController.pushTimeoutHandler) {
            window.clearTimeout(PlanController.pushTimeoutHandler);
        }
        // register new handler
        PlanController.pushTimeoutHandler = window.setTimeout(function () {
            PlanController.doUpdateDetailsView(issueKey, forceShow, detailsViewReloadReason);
            PlanController.lastPushUpdate = new Date().getTime();
        }, stallDuration);
    };

    PlanController.doUpdateDetailsView = function (issueKey, forceShow, detailsViewReloadReason, shortcutAction) {
        if (!GH.RapidBoard.State.isDetailsViewPlanOpened() && !forceShow) {
            return;
        }
        // set the selected issue key
        GH.DetailsView.setSelectedIssueKey(issueKey);

        if (BacklogSelectionController.getSelectedIssueKey() == null) {
            PlanController.setDetailViewOpenedState(false);
            DeferredResourcesLoader.handleDeferredResourceImport((!GH.DetailsView || !GH.DetailsView.hide), () => {GH.DetailsView.hide();});
        } else {
            PlanController.setDetailViewOpenedState(true);
            DeferredResourcesLoader.handleDeferredResourceImport((!GH.DetailsView || !GH.DetailsView.show), () => {GH.DetailsView.show(detailsViewReloadReason, shortcutAction);});

        }

        PlanController.trigger('before:openDetailView');

        // assume state has changed - push state. This is not the same as how Work Mode does it -
        // they check to see if the selected issue changed
        if (issueKey) {
            setTimeout(function () {
                GH.RapidBoard.State.pushState();
            }, 0);
        }

        // ensure the detail view is properly laid out (this is only necessary the first time after we show the tab,
        // after that resize handlers will take care of re-layouting)
        PlanView.doUpdateDetailsView();
    };

    PlanController.reloadDetailView = function (detailsViewLoadReason) {
        // ignore if not visible
        if (!PlanController.isDetailsViewOpened()) {
            return;
        }

        PlanController.setDetailViewOpenedState(true);
        GH.DetailsView.show(detailsViewLoadReason);
    };

    PlanController.reload = function (callback) {
        if (!PlanController.isVisible) {
            return;
        }
        BacklogController.show(callback);
    };

    /**
     * Called when the plan tab is hidden
     */
    PlanController.hide = function () {
        PlanController.isVisible = false;

        // hide sub-widgets
        BacklogController.hide();

        PlanController.detachControlFHandler();

        // hide the plan view

        PlanView.hide();

        // hide onboarding chaperones
        GH.planOnboarding.refresh();

        if (PlanController.unsubscribeQuickFilterUpdate) {
            PlanController.unsubscribeQuickFilterUpdate();
        }
        /* When we have initialised the filter bridge and need to hide the planning board i.e. SPA transition to the
           backlog or another board, we want to remove the clearAllFilters event handler to prevent memory leaks.
           The event handler is only ever set if the filter bridge is initialised which is only upon showing the planning board.
           We do not removed the event handler if it was never initialized.
        */
        if (PlanController.unsubscribeQuickFilterClearAllFilters) {
            PlanController.unsubscribeQuickFilterClearAllFilters();
        }

    };

    /**
     * Load the rapid view configuration used by the pool
     */
    PlanController.loadRapidViewConfig = function () {
        return new Promise((resolve, reject) => {
            // fetch the configuration
            GH.RapidViewConfig.fetchConfiguration(PlanController.rapidViewData.id).done(data => {
                PlanController.currentViewConfig = data;
                if (GH.RapidBoard.State.isPlanModeAvailable()) {
                    PlanController.initializePlanMode().then(resolve, reject);
                }
            }).fail(reject);
        });
    };

    /**
     * Initialize the pool
     */
    PlanController.initializePlanMode = function () {
        return new Promise((resolve) => {
            // don't continue if we are not visible
            if (! PlanController.isVisible) {
                return;
            }

            PlanControls.setRapidViewConfig(PlanController.currentViewConfig);
            BacklogController.setRapidViewConfig(PlanController.currentViewConfig);
            DeferredResourcesLoader.handleDeferredResourceImport((!GH.DetailsView || !GH.DetailsView.setRapidViewConfig), () => {
                GH.DetailsView.setRapidViewConfig(PlanController.currentViewConfig);
            });

            // render the plan controls
            PlanControls.renderControls();

            // render subnavigator, which in this case only contains the header
            if (GH.RapidBoard.ViewController.shouldShowSubnavigator()) {
                GH.RapidBoard.SubnavigatorController.render();
            }

            // hide the loading filters transition
            PlanView.hideLoadingFilter();

            // clear last executed instant filter (when switching between modes)
            PlanIssueListFiltering.setInstantFilter(null);

            // show Backlog
            BacklogController.show(() => {
                emitPlanModeViewAnalytic();
                sendBacklogAnalyticsEvents();
                resolve(true);
            });


            PlanController.configureUI();
            DeferredResourcesLoader.handleDeferredResourceImport((!GH.DetailsView || !GH.DetailsView.preloadData), () => {
                if (PlanController.isDetailsViewOpened()) {
                    GH.DetailsView.preloadData();
                }
            });
        });
    };

    const emitPlanModeViewAnalytic = function() {
        const totalIssues = _.reduce(GH.BacklogModel.getAllIssueListsNew(), function(start, model) {
            return start + model.getIssueCount();
        }, 0);

        const data = {
            'boardtype': GH.RapidBoard.State.isScrumBoard() ? 'scrum': 'kanban',
            'backlogissuecount': GH.BacklogModel.getBacklogModel2() ? GH.BacklogModel.getBacklogModel2().getIssueList().getIssueCount() : 'unknown',
            'totalissuecount': totalIssues
        };

        if (GH.RapidBoard.State.isKanbanBoard()) {
            const selectedForDevModel = _.first(GH.BacklogModel.getSprintModels());
            if (_.isUndefined(selectedForDevModel)) { // Something wrong
                return;
            }
            data.selectedfordevelopmentissuecount = selectedForDevModel.getIssueList().getIssueCount();
        }

        AJS.trigger('analyticsEvent', {name: 'jira-software.plan.view', data: data});
    };

    const sendBacklogAnalyticsEvents = function() {
        let boardType = GH.RapidBoard.State.getBoardTypeForAnalytics();
        const rapidViewConfig = GH.RapidViewConfig.currentData.data;
        const trackECRanking = FeatureFlagService.getFlagResultObject('jsw-classic-boards-and-backlog-ux-solutions-tracking');
        const trackEvent = {
            objectType: 'board',
            objectId: PlanController.rapidViewData.id,
            containerType: rapidViewConfig.locationType,
            attributes: {
                boardId: PlanController.rapidViewData.id,
                boardType,
                numEpics: GH.RapidBoard.State.numberOfEpics.get(),
                numVersions: GH.RapidBoard.State.numberOfVersions.get(),
                numIssues: GH.RapidBoard.State.numberOfIssues.get(),
                ...getEligibilityViewBacklogTrackData(),
                is_SIMPLE_ROADMAP_enabled: rapidViewConfig.isRoadmapEnabled,
                is_SIMPLE_ROADMAP_crossProject: rapidViewConfig.isRoadmapCrossProject,
            },
            action: 'viewed',
            actionSubject: 'backlog',
            actionSubjectId: PlanController.rapidViewData.id,
            source: 'backlogScreen'
        };

        if (trackEvent.containerType === "project" && (JIRA.API && JIRA.API.Projects)) {
            trackEvent.containerId = JIRA.API.Projects.getCurrentProjectId(true);
        }

        if (GH.RapidBoard.State.isAgilityBoard()) {
            const sprintModels = GH.BacklogModel.getSprintModels();
            let numSprints = sprintModels.length;
            if (numSprints === 1 && sprintModels[0].sprintData.id === -1) {
                // we are on an Agility backlog without sprints
                numSprints = 0;
            }

            trackEvent.attributes.numSprints = numSprints;
        }

        // Add attribute for tracking backlog viewed after ranking operation
        if(trackECRanking && trackECRanking.value && trackECRanking.value.delay){
            try{
                let rankTime = JIRA?.SessionStorage?.getItem("issueRankChanged"),
                    curTime = Date.now().valueOf,
                    timeDiff = curTime-rankTime;
                if(timeDiff>(trackECRanking.delay*1000)){
                    trackEvent.attributes["transitionDelay"] = timeDiff;
                }
            }catch(e){
                //Silent failure
                let err = e;
            }
        }
        AnalyticsClient.sendScreenEvent('backlogScreen', null, {
            boardType,
            isIssueDetailVisible: GH.RapidBoard.State.isDetailsViewPlanOpened(),
            isNewIssueView: BentoFeatures.isBentoEnabled(),
        });
        AnalyticsClient.sendTrackEvent(trackEvent);


    };

    const getEligibilityViewBacklogTrackData = () => {
        const rapidViewConfig = GH.RapidViewConfig.currentData.data;
        const quickFilters = PlanControls.getQuickFilters()
            .map(filter => filter.query);
        const activeQuickFilters = PlanControls.getQuickFilters()
            .filter(filter => filter.isActive)
            .map(filter => filter.query);

        const issues = GH.BacklogModel.getAllModels()
            .map(model => model.getIssueList().data.issueByKey)
            .flatMap(m => Object.values(m));

        const issueResultProjectIds = [...new Set(issues.map(i => i.projectId))];

        return {
            numProjects: issueResultProjectIds.length,
            issueResultProjectIds,
            quickFiltersAppliedCount: activeQuickFilters.length,
            onlyMyIssuesQuickFilterApplied: activeQuickFilters.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY) > -1,
            recentlyUpdatedQuickFilterApplied: activeQuickFilters.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY) > -1,
            quickFiltersConfiguredCount: quickFilters.length,
            onlyMyIssuesQuickFilterConfigured: quickFilters.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY) > -1,
            recentlyUpdatedQuickFilterConfigured: quickFilters.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY) > -1,
            planModeCardLayoutCount: rapidViewConfig.planModeExtraFieldIds.length,
            workModeCardLayoutCount: rapidViewConfig.workModeExtraFieldIds.length,
        }
    };

    function toTitleCase(text) {
        return text.replace(/\w\S*/g, txt =>
            txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());
    }

// Detail view open state

    /**
     * Is the detail view opened
     */
    PlanController.isDetailsViewOpened = function () {
        return GH.RapidBoard.State.isDetailsViewPlanOpened() ? !!GH.DetailsView.getSelectedIssueKey() : false;
    };

    /**
     * Set the new detail view opened state
     * @param {Boolean} opened identified weather details view is open or closed
     * @param {$} container (optional) -  optional container for details view
     */
    PlanController.setDetailViewOpenedState = function (opened, container) {
        opened = opened || false;
        GH.RapidBoard.State.setPlanViewDetailsViewOpened(opened);

        PlanView.updateDetailViewState(container);
    };

    /**
     * Closes the detail view.
     */
    PlanController.closeDetailsView = function closeDetailsView() {
        // ignore if there are any errors
        if (GH.DetailsView.hasCurrentError()) {
            return;
        }

        // ignore if already closed
        if (!PlanController.isDetailsViewOpened()) {
            return;
        }

        // mark the details view as closed and redraw
        PlanController.setDetailViewOpenedState(false);
        GH.RapidBoard.State.pushState();

        // update the view
        GH.DetailsView.hide();

        PlanView.updateHorizontalPositioning();
    };

    /**
     * Toggles the details view
     */
    PlanController.toggleDetailsView = function (shortcutAction) {
        if (PlanController.isDetailsViewOpened()) {
            PlanController.closeDetailsView();
        } else {
            // fetch the issue key to display, none is valid on work mode as well
            var selectedIssueKey = BacklogSelectionController.getSelectedIssueKey();
            PlanController.updateDetailsView(selectedIssueKey, true, null, shortcutAction);
        }
    };

    PlanController.getBacklogIssuesLimitConfig = function () {
        return GH.BoardState.getPerViewValue('issueLimit', PlanController.VS_DEFAULT_ISSUE_LIMIT);
    };

    PlanController.setBacklogIssuesLimitConfig = function (more) {
        return GH.BoardState.setPerViewValue('issueLimit', more);
    };

    /**
     * Toggles the epic lozenges showing on the cards
     */
    PlanController.toggleEpicsShowOnBacklog = function () {
        GH.ViewActions.toggleEpicsShowOnRapidBoard();
        PlanController.reload();
        AJS.trigger('analyticsEvent', {
            name: `jira-software.plan.boardmenu.click.${(GH.RapidBoard.State.getEpicShownOnRapidBoard() ? 'show' : 'hide')}-epic-lables`
        });
    };

    PlanController.isVersionsColumnVisible = function () {
        return GH.BoardState.getPerViewValue('planVersionsVisible', false);
    };

// Epics column open state
    PlanController.isEpicsColumnVisible = function () {
        return GH.BoardState.getPerViewValue('planEpicsVisible', false);
    };

    PlanController.isVersionsColumnVisiblePersisted = function () {
        // by default, we want the version column hidden
        return GH.BoardState.getPerViewValue('planVersionsVisible', false);
    };

// used by the PlanUrlState, as it is invoked before epicsSupport flag is properly loaded
    PlanController.isEpicsColumnVisiblePersisted = function () {
        return GH.BoardState.getPerViewValue('planEpicsVisible', false);
    };

    PlanController.setVersionsColumnVisible = function (visible) {
        GH.BoardState.setPerViewValue('planVersionsVisible', !!visible);
    };

    PlanController.setEpicsColumnVisible = function (visible) {
        GH.BoardState.setPerViewValue('planEpicsVisible', !!visible);
    };

    PlanController.toggleVersionsColumn = function () {
        var visible = PlanController.isVersionsColumnVisible();
        visible = !visible;
        PlanController.setVersionsColumnVisible(visible);

        if (!GH.EpicView.isbacklogDataV2Enabled()) {
            if (visible) {
                BrowserMetricsUtil.triggerBefore('before:versionListToggledOpen');
            }
            GH.VersionView.show();
            GH.PlanDragAndDrop.initializeClassificationDnD();
        }

        GH.RapidBoard.State.pushState();

        // update the column state
        PlanView.updateVersionColumnState();

        // updated horizontal positioning to get detail view update
        PlanView.updateHorizontalPositioning();

        if (visible) {
            BrowserMetricsUtil.triggerAfter('after:versionListToggledOpen');
        }

        AJS.trigger('analyticsEvent', {
            name: `jira-software.plan.boardmenu.click.${(visible ? 'show' : 'hide')}-versions-panel`
        });
    };

    PlanController.toggleEpicsColumn = function () {

        var visible = PlanController.isEpicsColumnVisible();
        visible = !visible;
        PlanController.setEpicsColumnVisible(visible);

        if (!GH.EpicView.isbacklogDataV2Enabled()) {
            if (visible) {
                BrowserMetricsUtil.triggerBefore('before:epicListToggledOpen');
            }
            GH.EpicView.show();
            GH.PlanDragAndDrop.initializeClassificationDnD();
        }

        GH.RapidBoard.State.pushState();

        // update the column state
        PlanView.updateEpicsColumnState();

        // updated horizontal positioning to get detail view update
        PlanView.updateHorizontalPositioning();

        if (visible) {
            BrowserMetricsUtil.triggerAfter('after:epicListToggledOpen');
        }

        AJS.trigger('analyticsEvent', {
            name: `jira-software.plan.boardmenu.click.${(visible ? 'show' : 'hide')}-epics-panel`
        });
    };

    PlanController.attachControlFHandler = function () {
        $(document).bind('keydown', PlanController.controlFHandler);
    };

    PlanController.detachControlFHandler = function () {
        $(document).unbind('keydown', PlanController.controlFHandler);
    };

    PlanController.controlFHandler = function (e) {
        if (e.ctrlKey && String.fromCharCode(e.which).toLowerCase() === "f") {
            PlanController.analytics('shortcuts').trigger('controlf'); // SAFE
        }
    };

    PlanController.collectPrintableIssues = function() {
        return {
            sprintIssues: BacklogController.extractPrintableIssuesFromAllSprints(),
            backlogIssues: BacklogController.getPrintableIssuesFromPlanBacklog(),
            epics: BacklogController.getEpicMap(),
            viewMode: PageMode.PLAN,
            boardType: GH.RapidBoard.State.getBoardType()
        };
    };

    PlanController.getShowMoreOptionItems = () => PlanController.getShowMoreOptions()
        .map(option => _.extend(option, {checked: option.value === PlanController.getBacklogIssuesLimitConfig()}));


    PlanController.getShowMoreOptions = () => {
        const showMoreOptions = [
            PlanController.VS_DEFAULT_ISSUE_LIMIT,
            PlanController.VS_ISSUE_LIMIT_500
        ].map(value => ({
            value,
            label: AJS.format("{0} issues", value)
        }));

        // All issues
        showMoreOptions.push({
                value: PlanController.VS_SHOW_ALL_ISSUES,
                label: AJS.format("{0} issues", "All")
            });
        return showMoreOptions;
    };

    // visible for testing
    PlanController.shouldValidateIssueLimit = () => true;

    PlanController.isValidIssueLimit = function (limit) {
        if (!PlanController.shouldValidateIssueLimit()) {
            return true;
        }
        const validIssueLimits = PlanController.getShowMoreOptionItems().map(option => option.value);
        return validIssueLimits.indexOf(limit) !== -1;
    };

    PlanController.adjustContentVisibilityForExtraFields = (extraFieldsConfig) => {
        if(extraFieldsConfig.length > 0){
            $('.js-issue').addClass('js-issue-extra-fields-supported');
        }
    }

    return PlanController;
});
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanController.soy' */
// This file was automatically generated from PlanController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plancontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plancontroller == 'undefined') { GH.tpl.plancontroller = {}; }


GH.tpl.plancontroller.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-plan-group" class="ghx-plan-group' + ((! opt_data.shouldShowEpic) ? ' ghx-no-epic-panel' : '') + '"><div id="ghx-classification-menu-column" class="' + ((opt_data.shouldHidePanels) ? 'agility-backlog-panel-hidden' : '') + '"><ul id="ghx-classification-menu" class="ghx-ide-menu ghx-classification-menu"><li role="button" class="js-release-toggle ghx-release-toggle"><span class="ghx-inner">' + soy.$$escapeHtml('Versions') + '</span></li>' + ((opt_data.shouldShowEpic) ? '<li role="button" class="js-epic-toggle ghx-epic-toggle"><span class="ghx-inner">' + ((opt_data.shouldShowFlexibleNomenclatureEpicText) ? soy.$$escapeHtml(opt_data.epicLevelName) : soy.$$escapeHtml('Epics')) + '</span></li>' : '') + '</ul></div><div id="ghx-version-column" class="ghx-version-column ghx-classification-column ' + ((opt_data.isbacklogDataV2Enabled) ? ' ghx-hidden ' : '') + ' ' + ((opt_data.shouldHidePanels) ? ' agility-backlog-panel-hidden' : '') + '"></div><div id="ghx-epic-column" class="ghx-epic-column ghx-classification-column ' + ((opt_data.isbacklogDataV2Enabled) ? ' ghx-hidden ' : '') + ' ' + ((opt_data.shouldHidePanels) ? ' agility-backlog-panel-hidden' : '') + '" ></div><div id="ghx-backlog-column" class="ghx-backlog-column"><div id="ghx-backlog" class="ghx-backlog' + ((opt_data.shouldHidePanels) ? ' agility-backlog' : '') + '"></div></div><div id="ghx-detail-view" class="ghx-detail-view ghx-detail-view-with-voter"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderSkeleton.soyTemplateName = 'GH.tpl.plancontroller.renderSkeleton';
}


GH.tpl.plancontroller.renderEpicPanelTipsyExpand = function(opt_data, opt_ignored) {
  return '' + ((opt_data.shouldShowFlexibleNomenclatureEpicText) ? soy.$$escapeHtml(AJS.format('Show {0} panel',opt_data.epicLevelName)) + '<b>' + soy.$$escapeHtml(AJS.format('Use {0} to plan features across multiple sprints.',opt_data.epicLevelName)) + '</b>' : soy.$$escapeHtml('Show epics panel') + '<b>' + soy.$$escapeHtml('Use epics to plan features across multiple sprints.') + '</b>');
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderEpicPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderEpicPanelTipsyExpand';
}


GH.tpl.plancontroller.renderVersionPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml('Show versions panel') + '<b>' + soy.$$escapeHtml('Use versions to keep track of code releases.') + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderVersionPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderVersionPanelTipsyExpand';
}


GH.tpl.plancontroller.renderErrorBlock = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item"><div class="ghx-classification-error"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="error">' + soy.$$escapeHtml(opt_data.errorText) + '</span></h3><span class="aui-button aui-button-compact js-try-again" role="button">' + soy.$$escapeHtml('Try again') + '</span></div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderErrorBlock.soyTemplateName = 'GH.tpl.plancontroller.renderErrorBlock';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/KanbanTransitionAndRank.js' */
/* globals
 * GH, GH.RankController, GH.WorkDragAndDrop, GH.DetailsView, GH.Notification,
 */

/**
 * @module jira-agile/rapid/ui/plan/kanban-transition-and-rank
 * @requires module:underscore
 * @requires module:jira/dialog/dialog-register
 * @requires module:jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils
 * @requires module:jira-agile/rapid/ui/plan/backlog-controller
 * @requires module:jira-agile/rapid/ui/plan/backlog-model
 * @requires module:jira-agile/rapid/ui/plan/BacklogView
 * @requires module:jira-agile/rapid/ui/plan/plan-controller
 * @requires module:jira-agile/rapid/ui/plan/plan-drag-and-drop
 * @requires module:jira/util/events
 */

define('jira-agile/rapid/ui/plan/kanban-transition-and-rank', ['require'], function (require) {
    'use strict';

    const $ = require('jquery');
    const _ = require('underscore');
    const GlobalEvents = require('jira-agile/rapid/global-events');
    const BacklogModel = require('jira-agile/rapid/ui/plan/backlog-model');
    const PlanController = require('jira-agile/rapid/ui/plan/plan-controller');
    const IssueMoveController = require('jira-agile/rapid/ui/plan/issue-move-controller');
    const JIRAEvents = require('jira/util/events');
    const Events = require('jira-agile/rapid/events');
    const DeferredResourcesLoader = require('jira-agile/rapid/deferred-resources-loader');
    const FeatureManager = require('jira/featureflags/feature-manager');
    let PlanDragAndDrop;
    let BacklogController;
    let BacklogView;

    // Resolve circular dependencies
    GlobalEvents.on('pre-initialization', function () {
        BacklogController = require('jira-agile/rapid/ui/plan/backlog-controller');
        BacklogView = require('jira-agile/rapid/ui/plan/BacklogView');
        PlanDragAndDrop = require('jira-agile/rapid/ui/plan/plan-drag-and-drop');
    });

    // We need this binding for kanban backlog. When we go down a transition with a view, a dialog will pop up. The user
    // can then fill in mandatory fields and submit OR they can cancel. This basically listens for the cancel. When
    // the user cancels, we call reload to undo all the optimistic updates that have been performed so far.
    // Note, we're not listening for the successful submit event because we have a global listener for this.
    // See: GH.Dialog.XBoardExtension.handleSuccess.
    JIRAEvents.bind('Dialog.hide', function (e, popup, reason, id) {
        const DialogRegister = require('jira/dialog/dialog-register');
        if (GH.RapidBoard.State.isPlanMode() &&
            GH.RapidBoard.State.isKanbanBoard() &&
            id &&
            id.match(/^workflow-transition-(\d+)-dialog$/) &&
            DialogRegister[id].cancelled) {
            PlanController.reload();

            var statusIdsInSelectedForDev = BacklogModel.sprintModels[0].sprintData.column.statusIds;
            var statusToMoveTo = GH.WorkDragAndDrop.transitionTargetStatus;
            AJS.trigger('analyticsEvent', {
                name: 'jira-software.plan.issuecard.transition.view.dialog.cancelled',
                data: {
                    boardtype: 'kanban',
                    toselectedfordevelopment: statusIdsInSelectedForDev.indexOf(statusToMoveTo.toString()) !== -1,
                    issuecount: 1 // We only support transitioning single issues when there is a view
                }
            });
        }
    });

    const KanbanTransitionAndRank = new Events();

    KanbanTransitionAndRank.transitionAndRankIssues = function (issueKeys, sprintId, prevRankableId, nextRankableId) {
        if (issueKeys.length === 0) {
            return $.Deferred().resolve();
        }

        let issueMoveModel = IssueMoveController.calculateIssueMoveModel(issueKeys, sprintId);

        //Let's just move the issue assuming that all will be fine. If something is wrong later on, we'll just call PlanController.reload or BacklogController.reorderIssuesInSprint
        //to redo plan mode content.
        const requiresReorder = BacklogController.moveIssues(issueKeys, sprintId, prevRankableId, nextRankableId);

        const request = {
            rapidViewId: GH.RapidBoard.State.getRapidViewId(),
            issueKeys: issueKeys,
            targetColumn: getTargetColumnId(issueMoveModel),
            rankCustomFieldId: BacklogModel.getRankCustomFieldId(),
            calculateNewIssuesOrder: requiresReorder,
            rankBeforeIssueIdOrKey: nextRankableId || undefined,
            rankAfterIssueIdOrKey: prevRankableId || undefined,
            mode: GH.RapidBoard.State.getMode()
        };

        if (IssueMoveController.isOnlyRankOperation(issueMoveModel)) {
            return rankIssues(request);
        } else {
            const submitResolveCallback = (data) => {
                const response = data.success;
                if (response.possibleTransitions.length === 0) {
                    KanbanTransitionAndRank.sendIssueTransitionedTrackEvent(request, response);
                    return handleSuccessfulTransitionAndRank(request, response, sprintId, issueMoveModel); //issue has been successfully transitioned and ranked
                } else if (response.possibleTransitions.length > 1) {
                    return handleMultipleTransitions(request, response, sprintId, issueMoveModel); //there are multiple transitions available - user needs to choose
                } else {
                    //there's only one transition but it has a view so need to pop a dialog and get user to fill the form.
                    return handleTransitionWithView(request, response.possibleTransitions[0]);
                }
            };
            return submitTransitionAndRankRequest(request).then(submitResolveCallback, () => {
                return $.Deferred().resolve();
            });
        }
    };

    KanbanTransitionAndRank.assignToListAndRank = function (issueKeys, sprintId, prevRankableId, nextRankableId) {
        if (issueKeys.length === 0) {
            return $.Deferred().resolve();
        }

        let issueMoveModel = IssueMoveController.calculateIssueMoveModel(issueKeys, sprintId);

        //Let's just move the issue assuming that all will be fine. If something is wrong later on, we'll just call PlanController.reload or BacklogController.reorderIssuesInSprint
        //to redo plan mode content.
        const requiresReorder = BacklogController.moveIssues(issueKeys, sprintId, prevRankableId, nextRankableId);

        const request = {
            rapidViewId: GH.RapidBoard.State.getRapidViewId(),
            issueKeys: issueKeys,
            rankCustomFieldId: BacklogModel.getRankCustomFieldId(),
            target: IssueMoveController.isMoveToBacklog(issueMoveModel) ? 'BACKLOG' : 'BOARD',
            calculateNewIssuesOrder: requiresReorder,
            rankBeforeIssueIdOrKey: nextRankableId,
            rankAfterIssueIdOrKey: prevRankableId
        };

        if (IssueMoveController.isOnlyRankOperation(issueMoveModel)) {
            return rankIssues(request);
        } else {
            const submitResolveCallback = (data) => {
                const response = data.success;
                KanbanTransitionAndRank.sendIssueRankedTrackEvent(request);
                return handleSuccessfulTransitionAndRank(request, response, sprintId, issueMoveModel); //issue has been successfully transitioned and ranked
            };

            return submitAssignToListAndRankRequest(request).then(submitResolveCallback, () => {
                return $.Deferred().resolve();
            });
        }
    };

    function submitTransitionAndRankRequest(request) {
        return GH.Ajax.put({
      url: "/xboard/transitionAndRank",
      data: request,
    })
      .done((data) => {
        try {
          const experiences = (
            FeatureManager.getFlagValue("odin.ec.client.integration.cbb") || ""
          ).split(",");
          if (
            Array.isArray(experiences) &&
            experiences.includes("drag-amongst-columns-issues")
          ) {
            if (data && data.success)
              JIRAEvents.trigger("issueTransitioned", {
                issueIds: data.success.issueIds || [],
              });
            }
        } catch (e) {
          const AnalyticsClient = require("jira/analytics/web-client");
          AnalyticsClient.sendTrackEvent({
            source: "backlogScreen",
            action: "mutated",
            actionSubject: "issue",
            attributes: {
              errorMsg: "FAILED_ISSUE_RANK",
              errorDetails: e?.toString(),
              error: true,
              scenario: "issueRankChanged",
            },
          });
        }
      })
      .fail((data, xhr) => {
        GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(
          request.issueKeys,
          data
        );
            PlanController.reload();
            PlanController.fireDnDSlaWithStatusCode(data, xhr);
        });
    }

    function submitAssignToListAndRankRequest(request) {
        return GH.Ajax.put({
            url: '/xboard/assignToListAndRank',
            data: request
        }).fail(function (data, xhr) {
            GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(request.issueKeys, data);
            PlanController.reload();
            PlanController.fireDnDSlaWithStatusCode(data, xhr);
        });
    }

    function handleSuccessfulTransitionAndRank(request, response, sprintId, issueMoveModel) {
        KanbanTransitionAndRank.fireTransitionAnalytics('jira-software.plan.issuecard.drop.success', request);
        PlanController.fireDnDSuccessSlaEvent();

        PlanDragAndDrop.refreshDetailsView(issueMoveModel);

        if (request.calculateNewIssuesOrder) {
            BacklogController.reorderIssuesInSprint(response.newIssuesOrder, sprintId);
        }

        JIRA.trace('gh.plan.ranking.complete');

        KanbanTransitionAndRank.triggerIssuesUpdateEvent(request.issueKeys);

        return AJS.$.Deferred().resolve().promise();
    }

    function handleTransitionWithView(request, transitionWithView) {
        KanbanTransitionAndRank.fireTransitionAnalytics('jira-software.plan.issuecard.drop.success', request);

        // Since we don't support transitioning multiple issues with transitions with views, this
        // will only be called if it's transitioning a single issue
        var issueId = BacklogModel.getIssueIdForKey(request.issueKeys[0]);

        //Note there's no way to hook into submit and cancel events for this server call. However, we have 2 global listeners
        //that listen to these events. For submit event listener, see GH.Dialog.XBoardExtension.handleSuccess and GH.Dialog.baseExtension.
        //For cancel event listener, see top of this file where we listen to Dialog.hide event. Currently, both handlers will reload
        //the plan controller ensuring we pull down the latest data.
        GH.WorkDragAndDrop.executeWorkflowTransition(issueId, transitionWithView.id, transitionWithView.targetStatus);
        return rankIssues(request);
    }

    function rankIssues(request) {
        return GH.RankController.rankIssues(request.rankCustomFieldId, request.issueKeys, request.rankBeforeIssueIdOrKey, request.rankAfterIssueIdOrKey)
            .fail(function (data, xhr) {
                triggerRankAnalyticsEvent(false, request.issueKeys.length);
                GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(request.issueKeys, data);
                PlanController.reload();
                PlanController.fireDnDSlaWithStatusCode(data, xhr);
            })
            .done(function (response) {
                var errorRankResult = GH.RankController.getErrorRankResultFromResponse(response);
                if (errorRankResult) {
                    triggerRankAnalyticsEvent(false, request.issueKeys.length, errorRankResult.errors[0]);
                    GH.Notification.showWarning(errorRankResult.errors[0]);
                    PlanController.reload();
                } else {
                    triggerRankAnalyticsEvent(true, request.issueKeys.length);

                    // For each changed issue send an analytics track event
                    response.success.rankableChanges.forEach(issue => {
                        if (issue.wasChanged) {
                            const updatedItems = [{
                                name: `customfield_${GH.BacklogModel.getRankCustomFieldId()}`
                            }]
                            GH.RapidBoard.sendIssueUpdatedTrackEvent(GH.BacklogModel.getIssueData(issue.issueKey), updatedItems)
                        }
                    });
                    //Used by WebDriver tests to check whether the backlog is redrawn after ranking
                    JIRA.trace('gh.plan.ranking.complete');
                }
                PlanController.fireDnDSuccessSlaEvent();
            });
    }

    KanbanTransitionAndRank.getObservable = function () {
        return AJS.$(GH);
    };

    /**
     *
     * @param {Array} issueKeys
     */
    KanbanTransitionAndRank.triggerIssuesUpdateEvent = function (issueKeys) {
        issueKeys.forEach((issueKey) => {
            const issueData = BacklogModel.getIssueData(issueKey);

            this.getObservable().trigger('issueUpdated', {issueId: issueData.id, source: 'issueRank'});
        });
    };

    /**
     *
     * @param {Boolean} success
     * @param {Number} issueCount
     * @param {String} [errorReason]
     */
    function triggerRankAnalyticsEvent(success, issueCount, errorReason) {
        const config = {
            name: 'jira-software.plan.issuecard.drag-rank.' + (success ? 'success' : 'error'),
            data: {
                boardtype: 'kanban',
                issuecount: issueCount
            }
        };

        if (errorReason) {
            config.data.cause = errorReason;
        }

        AJS.trigger('analyticsEvent', config);
    }


    function handleMultipleTransitions(request, response, sprintId, issueMoveModel) {
        let dialog;

        const PageMode = require('jira-agile/rapid/const/PageMode');
        DeferredResourcesLoader.handleDeferredResourceImport(GH.RapidBoard.State.getMode() === PageMode.PLAN, () => {
            const KanPlanDialogUtils = require('jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils');
            dialog = KanPlanDialogUtils.createTransitionStatusDialog(response.possibleTransitions, request.issueKeys);

            dialog.on('submit', function onSubmit(transitionId) {
                KanbanTransitionAndRank.trigger('before:submitMultipleTransitionsDialog', {selectedIssueNo: request.issueKeys.length});
                KanbanTransitionAndRank.fireViewAnalytics('jira-software.plan.transition-menu.view.confirm', request, response);

                const selectedTransition = _.find(response.possibleTransitions, function (t) {
                    return t.id === parseInt(transitionId);
                });
                let promise;
                if (selectedTransition.hasTransitionView) {
                    promise = handleTransitionWithView(request, selectedTransition);
                } else {
                    request.selectedTransitionId = selectedTransition.id;
                    promise = submitTransitionAndRankRequest(request).then((data) => {
                        KanbanTransitionAndRank.showTransitionSuccessMessage(request.issueKeys);
                        if (data.isSuccess()) KanbanTransitionAndRank.sendIssueTransitionedTrackEvent(request, response);
                        return handleSuccessfulTransitionAndRank(request, data.success, sprintId, issueMoveModel);
                    });
                }
                promise.always(() => {
                    KanbanTransitionAndRank.trigger('after:submitMultipleTransitionsDialog');
                })
            }, dialog);

            dialog.on('cancel', function onCancel() {
                KanbanTransitionAndRank.fireTransitionAnalytics('jira-software.plan.issuecard.transition.selection.dialog.cancelled', request);
                KanbanTransitionAndRank.fireViewAnalytics('jira-software.plan.transition-menu.view.cancel', request, response);


                //We've optimistically assumed that the user will proceed with the transition and rank and
                //we've already updated our client side model. There isn't an easy way to undo this, so let's
                //reload.
                PlanController.reload();
            }, dialog);

            dialog.show();

        });

        return AJS.$.Deferred().resolve().promise();
    }

    KanbanTransitionAndRank.fireTransitionAnalytics = function (name, request) {
        AJS.trigger('analyticsEvent', {
            name,
            data: {
                boardtype: 'kanban',
                toselectedfordevelopment: !request.addToBacklog,
                issuecount: request.issueKeys.length
            }
        });
    };

    KanbanTransitionAndRank.fireViewAnalytics = function (name, request, response) {
        AJS.trigger('analyticsEvent', {
            name,
            data: {
                boardType: 'kanban',
                issueCount: request.issueKeys.length,
                optionCount: response.possibleTransitions.length
            }
        });
    };

    KanbanTransitionAndRank.showTransitionSuccessMessage = function (issueKeys) {
        if (issueKeys.length === 1) {
            GH.Notification.showSuccess(AJS.format("Issue {0} successfully transitioned.", issueKeys));
        } else {
            GH.Notification.showSuccess(AJS.format("Issues {0} successfully transitioned.", issueKeys.join(', ')));
        }
    };

    const getTargetColumnId = function (issueMoveModel) {
        // TODO just pass backlog/board model to the backend for kanplan and resolve it there for issuelist backed backlogs
        //  do it off master with FF to make our lives easier in the future.
        const isAddToBacklog = IssueMoveController.isMoveToBacklog(issueMoveModel);
        const model = isAddToBacklog ? BacklogModel.getBacklogModel2() : BacklogModel.getSprintModels()[0];
        const targetColumn = model.getColumn();

        return targetColumn.id;
    };

    KanbanTransitionAndRank.sendIssueTransitionedTrackEvent = function (request, response) {
        let newStatusId = null;

        // Determine the new status id either using transition ID if there are multiple
        // or use the first status of the target column if there is only one
        if (request.selectedTransitionId) {
            newStatusId = response.possibleTransitions.find(transition => transition.id === request.selectedTransitionId).targetStatus;
        } else {
            const targetColumn = BacklogController.rapidViewConfig.columns.find(column => column.id == request.targetColumn);
            newStatusId = targetColumn.statusIds[0];
        }

        request.issueKeys.forEach(issueKey => {

            const issue = GH.BacklogModel.getIssueData(issueKey);
            const oldStatusId = issue.status ? issue.status.id : null;

            if (oldStatusId === newStatusId) return;

            const updatedItems = [{
                name: 'status',
                oldValId: oldStatusId,
                newValId: newStatusId,
            }];
            GH.RapidBoard.sendIssueUpdatedTrackEvent(issue, updatedItems);
        });
    };

    KanbanTransitionAndRank.sendIssueRankedTrackEvent = function (request) {

        // If we are dealing with agility board we are only changing rank within the same status
        if (request.target === 'BOARD' || request.target === 'BACKLOG') {
            request.issueKeys.forEach(issueKey => {
                const issue = GH.BacklogModel.getIssueData(issueKey);
                const updatedItems = [{name: `customfield_${GH.BacklogModel.getRankCustomFieldId()}`}];
                GH.RapidBoard.sendIssueUpdatedTrackEvent(issue, updatedItems);
            });
        }
    };

    return KanbanTransitionAndRank;
});
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanControls.js' */
define("jira-agile/rapid/ui/plan/plan-controls",["require"],function(i){var e=i("jquery"),t=i("underscore"),r=i("jira-agile/rapid/const/PageMode"),n=i("jira-agile/rapid/work/quick-filters-bridge"),c={rapidViewConfig:{},quickfilters:void 0,searchFilter:void 0,setRapidViewConfig:function(i){c.rapidViewConfig=i,c.quickfilters.setRapidViewConfig(i)},init:function(){c.quickfilters=new GH.Components.QuickFilters("planQuickFilters"),c.searchFilter=new GH.Components.SearchFilter(t.debounce(GH.BacklogController.executeSearch),500)},setActiveQuickFilterIds:function(i){c.quickfilters.setActiveQuickFilters(i)},getActiveQuickFilterIds:function(){return c.quickfilters.getActiveQuickFilters()},renderControls:function(){var e=document.getElementById("ghx-quick-filters");n.isReactFiltersEnabled().then(function(i){i&&e&&(GH.bridge.FilterBridge.unmount(e),GH.bridge.FilterBridge.render(e))}),GH.ViewActions.setMode(r.PLAN)},stopEdits:function(){c.searchFilter.stopEdit(e("#ghx-controls-plan"))},resizeQuickFilters:function(){c.quickfilters.quickExpanderLayout({mode:r.PLAN})},getQuickFilters:function(){return c.quickfilters.getQuickFilters()}};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanUrlState.js' */
define("jira-agile/rapid/ui/plan/plan-url-state",["require"],function(e){"use strict";var r=e("underscore"),i=e("jira-agile/rapid/ui/plan/plan-controller"),s=e("jira-agile/rapid/ui/plan/plan-controls"),l=e("jira-agile/rapid/const/PageMode"),t=(e("jira/featureflags/feature-manager"),e("jira-agile/rapid/deferred-resources-loader")),e={self:"PlanUrlState",isApplicable:function(e){return e.mode===l.PLAN},getNormalizedFromUrl:function(e,i){i["plan.selectedIssue"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedIssue,null),i.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.quickFilter),i.versions="visible"===GH.RapidBoard.UrlState.normalizeStringParam(e.versions,""),i.epics="visible"===GH.RapidBoard.UrlState.normalizeStringParam(e.epics,""),i.issueLimit=GH.RapidBoard.UrlState.normalizeNumberParam(e.issueLimit),i["plan.selectedEpic"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedEpic,null),i["plan.selectedVersion"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedVersion,null),i.search=GH.RapidBoard.UrlState.normalizeStringParam(e.search,""),i.assignee=GH.RapidBoard.UrlState.normalizeStringArrayParam(e.assignee,[]).map(function(e){return"_unassigned_"===e?"UNASSIGNED_USER_ID":e})},toUrl:function(e,i){r.isNull(e["plan.selectedIssue"])||(i.selectedIssue=e["plan.selectedIssue"]),0<e.quickFilter.length&&(i.quickFilter=e.quickFilter),e.versions&&(i.versions="visible"),e.epics&&(i.epics="visible"),r.isNull(e.issueLimit)||(i.issueLimit=e.issueLimit),r.isNull(e["plan.selectedEpic"])||(i.selectedEpic=e["plan.selectedEpic"]),r.isNull(e["plan.selectedVersion"])||(i.selectedVersion=e["plan.selectedVersion"]),e.search&&(i.search=encodeURIComponent(e.search)),e.assignee&&(i.assignee=e.assignee.map(function(e){return"UNASSIGNED_USER_ID"===e?"_unassigned_":encodeURIComponent(e)}))},getNormalizedFromInternal:function(e){i.init(),e["plan.selectedIssue"]=GH.BacklogSelectionController.getSelectedIssueKey(),e.quickFilter=s.quickfilters.getActiveQuickFilters(),e.versions=i.isVersionsColumnVisiblePersisted(),e.epics=i.isEpicsColumnVisiblePersisted(),e.issueLimit=i.getBacklogIssuesLimitConfig(),e["plan.selectedEpic"]=GH.EpicController.getFilteredEpicKey(),e["plan.selectedVersion"]=GH.VersionController.getFilteredVersionId(),e.search=GH.PlanController.activeFilters.searchText||"",e.assignee=GH.PlanController.activeFilters.assigneeList},updateInternalFromNormalized:function(e){i.init(),GH.BacklogSelectionController.setIssueFromUrlState(e["plan.selectedIssue"]),s.quickfilters.setActiveQuickFilters(e.quickFilter),i.setVersionsColumnVisible(e.versions),i.setEpicsColumnVisible(e.epics),i.setBacklogIssuesLimitConfig(e.issueLimit),GH.EpicController.setFilteredEpicKey(e["plan.selectedEpic"]),GH.VersionController.setFilteredVersionId(e["plan.selectedVersion"]),GH.PlanController.activeFilters.searchText=e.search,e.assignee&&t.handleDeferredResourceImport(!GH.WorkController,function(){GH.WorkController.activeFilters.assigneeList=e.assignee.map(function(e){return"_unassigned_"===e?"UNASSIGNED_USER_ID":e})})}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanRankController.js' */
define("jira-agile/rapid/ui/plan/plan-rank-controller",["require"],function(e){"use strict";var s=e("underscore"),n=e("jquery"),r=e("jira-agile/rapid/global-events"),a=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),t=e("jira-agile/rapid/ui/plan/backlog-model"),l=e("jira-agile/rapid/ui/plan/backlog-model2"),i=e("jira-agile/rapid/events");r.on("pre-initialization",function(){e("jira-agile/rapid/ui/plan/backlog-controller")});var u=new i;return u.init=function(){e("jira-agile/rapid/ui/plan/backlog-controller").registerIssueCreatedCallback("rankIssues",u.rankCreatedIssues)},u.rankCreatedIssues=function(e){var r=a.getSelectedIssuesInOrder();return r&&0<r.length?u.rankCreatedIssuesBySelection(e,r):u.rankCreatedIssuesByVisibility(e)},u.rankCreatedIssuesBySelection=function(e,r){var a,i=s.last(r),r=t.findModelWithIssue(s.first(r)),i=r&&l.isBacklogModel(r)?(a=i,!1):(a=t.getBacklogModel2().getIssueList().getFirstRankableIssueKeyInColumn(),!0);if(a)return u.rankCreatedIssuesAgainstIssue(e,a,i)},u.rankCreatedIssuesByVisibility=function(e){var r=n(".ghx-backlog-group"),a=n(".js-issue",r),i=n(document).height(),s=n(document).scrollTop();r=a.filter(function(){var e=n(this);return e=(e=e).offset().top,s<e&&e<i+s}),a=(0<r.length?r:a).first();if(a&&1===a.length){a=a.attr("data-issue-key");return u.rankCreatedIssuesAgainstIssue(e,a,!0)}},u.rankCreatedIssuesAgainstIssue=function(e,r,a){e=s.pluck(e,"issueKey").reverse();return GH.RankController.rankIssues(t.getRankCustomFieldId(),e,a?r:null,a?null:r,{deferErrorHandling:!0})},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogModel.js' */
define("jira-agile/rapid/ui/plan/backlog-model2",["require"],function(i){function e(e,t,s){var n=i("jira-agile/rapid/ui/plan/issue-list-model");this.column=t,this.issueList=new n("backlog",e,GH.VersionController.getVersionModel()),this.isIssueLimitExceeded=s||!1}return e.isBacklogModel=function(e){return"backlog"===e.getType()},e.prototype.getIssueList=function(){return this.issueList},e.prototype.getId=function(){return"backlog"},e.prototype.getType=function(){return"backlog"},e.prototype.getColumn=function(){return this.column},e}),define("jira-agile/rapid/ui/plan/backlog-model",["require"],function(c){"use strict";var g=c("underscore"),e=c("jira-agile/rapid/global-events"),p=c("jira-agile/rapid/ui/plan/sprint-model"),t=c("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),s=c("jira/featureflags/feature-manager"),l=null;e.on("pre-initialization",function(){l=c("jira-agile/rapid/ui/plan/sprint-controller")});var I={};I.rankCustomFieldId=void 0,I.estimationStatistic={},I.trackingStatistic={},I.sprintModels=[],I.backlogModel2=null,I.setData=function(e){I.calculateIssueLists(e),I.hasBulkChangePermission=e.hasBulkChangePermission,I.isIssueLimitExceeded=e.isIssueLimitExceeded},I.BACKLOG_ID="backlog",I.calculateIssueLists=function(e){var t,s,n,i,r,u,a,o,l,d;GH.RapidBoard.State.isScrumBoard()?function(e){var s=c("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),t=e.issues,n=e.sprints,i={};g.each(n,function(t){g.each(t.issuesIds,function(e){i[e]=t.id})});var r={};g.each(n,function(e){r[e.id]=[]});var u=[];g.each(t,function(e){s.prepareExtraFields(e.extraFields);var t=i[e.id];(t?r[t]:u).push(e)});var a=[];g.each(n,function(e){e=new p(e,r[e.id]);a.push(e)}),e=new GH.BacklogModel2(u,void 0,e.isIssueLimitExceeded),I.sprintModels=a,I.backlogModel2=e}(e):GH.RapidBoard.State.isIssueListBacklog()?(u=e,a=c("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),o=u.boardIssueIds,l=[],d=[],g.each(u.issues,function(e){a.prepareExtraFields(e.extraFields),(-1!==o.indexOf(e.id)?d:l).push(e)}),I.backlogModel2=new GH.BacklogModel2(l,{},u.isIssueLimitExceeded),I.sprintModels=[new p({id:-1,name:"On the Board",state:"FUTURE",column:{}},d)]):(e=e,t=c("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),s=e.backlogColumn.statusIds,n=e.selectedForDevelopmentColumn.statusIds,i=[],r=[],g.each(e.issues,function(e){t.prepareExtraFields(e.extraFields),-1!==s.indexOf(e.statusId)?i.push(e):-1!==n.indexOf(e.statusId)&&r.push(e)}),I.backlogModel2=new GH.BacklogModel2(i,e.backlogColumn,e.isIssueLimitExceeded),I.sprintModels=[new p({id:-1,name:e.selectedForDevelopmentColumn.name,state:"FUTURE",column:e.selectedForDevelopmentColumn},r)])},I.addNewSprint=function(e){e=new p(e,[]);I.sprintModels.push(e)},I.removeSprintAndMoveIssues=function(t){for(var e,s,n=I.getAllModels(),i=0;i<n.length;i++){var r=n[i];if(p.isSprintModel(r)&&r.getSprintId()===t){e=r,s=n[i+1];break}}var u,a=!1;return e&&(u=e.getIssueList().getIssuesInOrder(),g.isEmpty(u)||(s.getIssueList().prependIssues(u),a=GH.BacklogModel2.isBacklogModel(s)),I.sprintModels=g.reject(I.sprintModels,function(e){return e.getSprintId()===t})),a},I.updateDataForSprint=function(e,t){e=I.getSprintModel(e);return e&&e.setSprintData(t),e},I.moveSprintToTop=function(e){var t=I.getFutureSprintModels()[0].getSprintId();return n(e,t)},I.moveSprintUp=function(e){var t=I.getSprintIndex(e)-1,t=I.getSprintModels()[t].getSprintId();return n(e,t)},I.moveSprintUpUsingSwap=function(e){return I._swapSprint(e,-1)},I.moveSprintDown=function(e){var t=I.getSprintIndex(e)+1,t=I.getSprintModels()[t].getSprintId();return n(e,t)},I.moveSprintDownUsingSwap=function(e){return I._swapSprint(e,1)},I.moveSprintToBottom=function(e){var t=I.getFutureSprintModels(),t=t[t.length-1].getSprintId();return n(e,t)},I._swapSprint=function(t,e){var s=GH.Util.indexOf(I.sprintModels,function(e){if(e.getSprintId()===t)return e});return GH.Util.swapArrayItems(I.sprintModels,s,s+e)?I.sprintModels[s].getSprintId():null};var n=function(e,t){e=I.getSprintIndex(e),t=I.getSprintIndex(t);return void 0!==e&&void 0!==t&&GH.Util.moveArrayItems(I.sprintModels,e,t)};return I.getSprintModels=function(){return I.sprintModels},I.getActiveSprintModels=function(){return g.filter(I.sprintModels,function(e){return"ACTIVE"===e.getSprintData().state})},I.getFutureSprintModels=function(){return g.filter(I.sprintModels,function(e){return"FUTURE"===e.getSprintData().state&&e.getSprintId()!==I.BACKLOG_ID})},I.getSprintModel=function(t){return g.find(I.sprintModels,function(e){return t===e.getSprintId()})},I.getSprintIndex=function(t){return GH.Util.indexOf(I.sprintModels,function(e){return e.getSprintId()===t})},I.getBacklogModel2=function(){return I.backlogModel2},I.getAllModels=function(){var e=I.getSprintModels(),t=I.getBacklogModel2();return g.flatten([e,t],!0).filter(function(e){return null!=e})},I.getAllIssueListsNew=function(){var t=[];return g.each(I.getSprintModels(),function(e){t.push(e.getIssueList())}),I.getBacklogModel2()&&t.push(I.getBacklogModel2().getIssueList()),t},I.findModelWithIssue=function(t){var s=null;return g.any(I.getAllModels(),function(e){return!!e.getIssueList().isIssueValid(t)&&(s=e,!0)}),s},I.getNextModel=function(e){for(var t=I.getAllModels(),s=0;s<t.length;s++)if(e.getId()===t[s].getId()){if(s+1<t.length)return t[s+1];break}return null},I.calculateRankingDataForSprintMarkerMove=function(e,t,s){var n=I._calculateIncludedModelsData(e,t);if(e===t){var i=[],i=s?n.draggedSprintModel.getIssueList().getVisibleIssuesDataAfterKey(s):n.draggedSprintModel.getIssueList().getAllVisibleIssuesData();if(!g.isEmpty(i)){var r=I.getNextModel(n.draggedSprintModel);if(r){var u=p.isSprintModel(r)?r.getSprintId():null,a=g.first(r.getIssueList().getIssuesInOrder()),r=a?a.key:null,a=g.map(i,function(e){return e.key});if(!g.isEmpty(a))return{sprintId:u,nextRankableId:r,issueKeys:a}}}}else{s=I.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(n.otherAffectedModels,t,s),u=e,n=g.last(n.draggedSprintModel.getIssueList().getIssuesInOrder()),n=n?n.key:null,a=g.map(s,function(e){return e.key});if(!g.isEmpty(a))return{sprintId:u,prevRankableId:n,issueKeys:a}}return null},I.calculateTemporaryDataForSprintWithMarker=function(e,t,s){var n=I._calculateIncludedModelsData(e,t),i=n.draggedSprintModel.getIssueList().getAllInvisibleIssuesData(),s=I.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(n.models,t,s),s=g.flatten([i,s],!0),i=g.map(i,function(e){return e.key}),s=new(c("jira-agile/rapid/ui/plan/issue-list-model"))("fakesprint-"+e,s,GH.VersionController.getVersionModel());return s.setHiddenBySearchIssues(i),{issueList:s,modelsData:n}},I._calculateIncludedModelsData=function(e,t){for(var s=I.getSprintModels(),n=!1,i={draggedSprintModel:null,otherAffectedModels:[],models:[]},r=0;r<s.length;r++){var u=s[r],a=u.getSprintId();if(a==e?(i.draggedSprintModel=u,i.models.push(u),n=!0):n&&l.isTwixieOpen(a)&&(i.otherAffectedModels.push(u),i.models.push(u)),a==t)break}return t||(i.otherAffectedModels.push(I.getBacklogModel2()),i.models.push(I.getBacklogModel2())),i},I.getIssueDataForVisisbleIssuesInModelsUpToIssueKey=function(e,t,s){for(var n=[],i=0;i<e.length;i++){var r=e[i],u=r.getIssueList(),a=p.isSprintModel(r);a&&r.getSprintId()===t||!a&&!t?s&&n.push(u.getVisibleIssuesDataBeforeIncludingKey(s)):n.push(u.getAllVisibleIssuesData())}return n=g.flatten(n,!0)},I.reorderIssuesInModel=function(e,t){var s=t||"backlog",n=I.getAllModels().find(function(e){return e.getId()===s});if(n){var t=n.getIssueList(),i=t.getAllIssues();return t.setOrder(e.filter(function(e){return i[e]})),[n]}return[]},I.moveIssuesNew=function(s,e,t,n){if(0!==s.length){var i=[],r=[],u=e||"backlog",a=null;return g.each(I.getAllModels(),function(e){var t;e.getId()==u?a=e:(t=e.getIssueList().removeIssues(s),g.isEmpty(t)||(r.push(e),i.push(t)))}),i=g.flatten(i,!0),a&&((e=a.getIssueList()).addIssues(i),e.reorderIssues(s,t,n),r.push(a)),r}},I.hasAnySubtasks=function(e){var t=this;if(!e)throw"Selection of issueKeys as an {array} must be provided.";return s.isFeatureEnabled("safe.return-hierarchy-level-in-cbb")?e.some(function(e){return-1===t.getIssueData(e).typeHierarchyLevel}):e.some(function(e){return t.getIssueData(e).parentId})},I.assignSubtasksToSameEpicAsParent=function(e){e.forEach(function(e){var t=I.getIssueData(e);t&&g.each(I.getSubtasks(e),function(e){e.epic=t.epic})})},I.isIssueSelectable=function(t){var e=I.getAllIssueListsNew();return g.any(e,function(e){return e.isIssueValid(t)&&e.isIssueVisible(t)})},I.getIssueIndex=function(t){var s=-1,e=I.getAllIssueListsNew();return g.any(e,function(e){return!!e.isIssueValid(t)&&(s=e.getIssueIndex(t),!0)}),s},I.canAddToSelection=function(t,s){var e=I.getAllIssueListsNew();return g.any(e,function(e){return e.isIssueValid(s)&&e.canAddToSelection(t,s)})},I.getIssueRange=function(t,s){var n=[],e=I.getAllIssueListsNew();return g.any(e,function(e){return!(!e.isIssueValid(t)||!e.isIssueValid(s))&&(n=e.getIssueRange(t,s),!0)}),n},I.getNextIssueKey=function(e){for(var t=I.getAllModels(),s=0;s<t.length;s++){var n=t[s];if(n.getIssueList().isIssueValid(e)){var i=!1,r=p.isSprintModel(n),u=l.isTwixieOpen(n.getId());if((r&&u||!r)&&(i=n.getIssueList().getNextIssueKey(e)))return i;for(var a=s+1;a<t.length;a++){var o=t[a],r=p.isSprintModel(o),u=l.isTwixieOpen(o.getId());if((!r||u)&&(i=o.getIssueList().getFirstVisibleIssueKey()))break}return i}}},I.getPreviousIssueKey=function(e){for(var t=I.getAllModels(),s=0;s<t.length;s++){var n=t[s];if(n.getIssueList().isIssueValid(e)){var i=!1,r=p.isSprintModel(n),u=l.isTwixieOpen(n.getId());if((r&&u||!r)&&(i=n.getIssueList().getPreviousIssueKey(e)))return i;for(var a=s-1;0<=a;a--){var o=t[a],r=p.isSprintModel(o),u=l.isTwixieOpen(o.getId());if((!r||u)&&(i=o.getIssueList().getLastVisibleIssueKey()))break}return i}}},I.getFirstRankableIssueKeyInColumn=function(t){var s=null!=t,n=s?[t]:[],i=!1,e=I.getAllIssueListsNew();return g.any(e,function(e){return!(s&&!e.isIssueValid(t))&&(i=e.getFirstRankableIssueKeyInColumn(n),!0)}),i},I.getLastRankableIssueKeyInColumn=function(t){var s=null!=t,n=s?[t]:[],i=!1,e=I.getAllIssueListsNew();return g.any(e,function(e){return!(s&&!e.isIssueValid(t))&&(i=e.getLastRankableIssueKeyInColumn(n),!0)}),i},I.getBestFitSelectionAfterRank=function(e){var t=I.findModelWithIssue(g.first(e));return t?t.getIssueList().getBestFitSelectionAfterRank(e):null},I.setRankCustomFieldId=function(e){I.rankCustomFieldId=e},I.setEstimationStatistic=function(e){I.estimationStatistic={isEnabled:e.isEnabled,typeId:e.typeId,name:e.name,renderer:e.renderer}},I.setTrackingStatistic=function(e){I.trackingStatistic={isEnabled:e.isEnabled,typeId:e.typeId,name:e.name,renderer:e.renderer}},I.isRankable=function(){return!g.isUndefined(I.rankCustomFieldId)},I.getRankCustomFieldId=function(){return I.rankCustomFieldId},I.getHiddenBySearchIssues=function(){var t={};return g.each(I.getAllIssueListsNew(),function(e){e=e.getHiddenBySearchIssues();t=g.extend(t,e)}),t},I.isSubtask=function(t){return I._anyIssueList(t,function(e){return e.isSubtask(t)})},I.getSubtasks=function(t){var s=[];return g.each(I.getAllIssueListsNew(),function(e){s=s.concat(e.getSubtasks(t))}),s},I.getIssueData=function(t){return I._anyIssueList(t,function(e){return e.getIssueData(t)})},I.getIssueDataForId=function(t){return I._anyIssueList(t,function(e){return e.getIssueDataForId(t)})},I.getIssueIdForKey=function(t){return I._anyIssueList(t,function(e){return e.getIssueIdForKey(t)})},I.isParentAndCollapsed=function(t){return I._anyIssueList(t,function(e){return e.isCollapsed(t)&&e.hasSubTasks(t)})},I.map=function(n){return I.getAllIssueListsNew().reduce(function(e,t){var s=t.getAllIssues();return e.concat(Object.keys(s).map(function(e){return n(s[e])}))},[])},I._anyIssueList=function(t,s){var n=null;return g.any(I.getAllIssueListsNew(),function(e){return!!e.isIssueValid(t)&&(n=s(e),!0)}),n},I.isIssueVisible=function(e){var t=I.findModelWithIssue(e);if(t){t=t.getIssueList();return t.isIssueValid(e)&&t.isIssueVisible(e)}return!1},I.hasAnyIssueInvisible=function(e){return e.some(function(e){return!I.isIssueVisible(e)})},I.canManageSprints=function(){return I._canManageSprints},I.setCanManageSprints=function(e){I._canManageSprints=e},I.complexQuery=function(){return Boolean(I._complexQuery)},I.setComplexQuery=function(e){I._complexQuery=e},I.canCreateIssue=function(){return I._canCreateIssue},I.setCanCreateIssue=function(e){I._canCreateIssue=e},I.supportsPages=function(){return I._supportsPages},I.setSupportsPages=function(e){I._supportsPages=e},I.updateFiltering=function(){var e=I.getAllIssueListsNew();return t.applyToIssueLists(e)},I.getEpicsFilteredForVersion=function(s){var n=!1;g.isString(s)&&(t.isNoneVersionFilterId(s)?n=!0:s=parseInt(s,10));var e=GH.EpicController.getEpicModel().getEpicList();if(!e||0===e.getIssueCount())return[];var i=e.getOrder(),r=[];return g.each(I.getAllIssueListsNew(),function(e){0<i.length&&(e=e.getAllIssues(),g.each(e,function(e){if(e.epic&&g.contains(i,e.epic)){var t=!1;if((t=n&&g.isEmpty(e.fixVersions)||!n&&g.contains(e.fixVersions,s)?!0:t)&&(r.push(e.epic),0===(i=g.without(i,e.epic)).length))return!1}}))}),{filtered:i,unfiltered:r}},I.removeEpicFromIssues=function(e){var t=[];return g.each(e,function(e){e=I.getIssueData(e);e&&e.epic&&(delete e.epic,t.push(e))}),t},I});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintController.js' */
define("jira-agile/rapid/ui/plan/sprint-controller",["require"],function(r){"use strict";var t,p,i=r("jquery"),e=r("jira-agile/rapid/global-events"),a=r("jira-agile/rapid/analytics-tracker"),n=r("jira-agile/rapid/ui/plan/sprint-view"),s=r("jira-agile/rapid/ui/plan/backlog-model"),o=r("jira-agile/rapid/const/PageMode"),d=r("jira/featureflags/feature-manager"),l=r("jira-agile/rapid/deferred-resources-loader"),g=r("jira-agile/browser-metrics/browser-metrics-util");e.on("pre-initialization",function(){t=r("jira-agile/rapid/ui/plan/backlog-controller"),p=r("jira-agile/rapid/ui/plan/BacklogView")});var u={};u.analytics=new a("gh.rapidboard.sprint.controller"),u.init=function(){n.init(),l.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===o.PLAN,function(){i(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,u.handleSprintUpdated)})},u.handleSprintUpdated=function(e,t){t=s.updateDataForSprint(t.id,t);t&&p.redrawChangedModel(t),g.triggerAfter("after:editSprintSubmit")},u.addSprint=function(){var e=i(this);GH.Util.UI.isDisabled(e)||(g.triggerBefore("before:createSprint"),GH.Util.UI.ariaDisable(e),GH.Ajax.post({url:"/sprint/"+t.rapidViewData.id}).done(function(e){u.analytics.trigger("addsprint");e=e.success;s.addNewSprint(e),p.updateSprintsAfterAddRemove()}).always(function(){GH.Util.UI.ariaEnable(e),g.triggerAfter("after:createSprint")}))},u.openSprintDateDialog=function(e){var t=GH.RapidBoard.State.getRapidViewId(),i=s.getSprintModel(e);g.triggerBefore("before:sprintDatePopup"),l.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===o.PLAN,function(){r("jira-agile/rapid/ui/dialog/edit-sprint-dialog").show(t,i),AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.date-dialog.view",data:{sprintState:i.sprintData.state}})})},u.openStartSprintDialog=function(e){g.triggerBefore("before:sprintStartPopup");var t,i=GH.RapidBoard.State.getRapidViewId(),r=s.getSprintModel(e).getIssueList();r.getAllIssues().length<1||(t=r.getNumVisibleIssues(),GH.Dialogs.StartSprintDialog||GH.Dialog.dim(),l.triggerOnDemandResourceLoadWithCondition(!GH.Dialogs.StartSprintDialog,["wrc!gh-rapid-lwf-board-deferred"],"backlog",function(){GH.Dialogs.StartSprintDialog.showDialog(i,e,t)},function(){GH.Dialog.undim()}))},u.deleteSprintFromBacklog=function(e){var t=GH.RapidBoard.State.getRapidViewId(),e=s.getSprintModel(e).sprintData;u.deleteSprint(t,e,u.onDialogueConfirm)},u.onDialogueConfirm=function(e){s.removeSprintAndMoveIssues(e)?p.draw():p.updateSprintsAfterAddRemove(),g.triggerAfter("after:deleteSprintSubmit","backlogDelete"),GH&&GH.ECX&&GH.ECX.fireReadEvent&&GH.ECX.fireReadEvent("backlogScreen","deleteSprintDialog",{sprintId:e})},u.deleteSprint=function(i,r,a){l.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===o.PLAN,function(){GH.ConfirmDialog.create("ghx-remove-planned-sprint-confirm-dialog",{contentEscaping:!1,content:AJS.format("Are you sure you want to delete sprint {0}{1}{2}?","<b>",AJS.escapeHTML(String(r.name)),"</b>"),header:"Delete sprint",onConfirmFn:function(){return e=i,t=r.id,u.analytics.trigger("deletesprint"),g.triggerBefore("before:deleteSprintSubmit","backlogDelete"),GH.Ajax.del({url:"/sprint/"+t+"?rapidViewId="+e}).done(function(){return a(r.id)});var e,t},analyticsPageName:"deleteSprintModal"}).show()})},u.isTwixieOpen=function(e){return"open"===u._getTwixieState(e)},u.toggleTwixie=function(e){var t=u.isTwixieOpen(e);u.setTwixieOpen(e,!t)},u.setTwixieOpen=function(e,t){t=t?"open":"closed";u._setTwixieState(e,t),n.updateTwixieState(e),e===s.BACKLOG_ID&&AJS.trigger("analyticsEvent",{name:"jira-software.boards.backlog.collapse",data:{state:t}})},u._setTwixieState=function(e,t){GH.BoardState.setPerViewValue("sprintTwix-"+e,t)},u._getTwixieState=function(e){return GH.BoardState.getPerViewValue("sprintTwix-"+e,"open")},u.moveSprintToTop=function(e){var t;d.isFeatureEnabled("jsw.classic.new.move.sprint.methods")&&(t=s.getFutureSprintModels()[0].getSprintId(),c(e,t,s.moveSprintToTop))},u.moveSprintUp=function(e){var t;d.isFeatureEnabled("jsw.classic.new.move.sprint.methods")?(t=s.getSprintIndex(e)-1,t=s.getSprintModels()[t].getSprintId(),c(e,t,s.moveSprintUp)):u._swapSprint(e,s.moveSprintUpUsingSwap)},u.moveSprintDown=function(e){var t;d.isFeatureEnabled("jsw.classic.new.move.sprint.methods")?(t=s.getSprintIndex(e)+1,t=s.getSprintModels()[t].getSprintId(),c(e,t,s.moveSprintDown)):u._swapSprint(e,s.moveSprintDownUsingSwap)},u.moveSprintToBottom=function(e){var t;d.isFeatureEnabled("jsw.classic.new.move.sprint.methods")&&(t=(t=s.getFutureSprintModels())[t.length-1].getSprintId(),c(e,t,s.moveSprintToBottom))},u._swapSprint=function(e,t){var i,r,a,n,o=t(e);null!=o&&(p.updateSprintsAfterAddRemove(),i=s.getSprintModel(e),r=s.getSprintModel(o),a=i.sprintData.sprintVersion,n=r.sprintData.sprintVersion,GH.Ajax.put({url:"/sprint/"+e+"/swap/v2",data:{otherSprintId:o,sprintVersion:a,otherSprintVersion:n}}).done(function(e){e=e.success;u.analytics.trigger("movesprint"),i.sprintData.sprintVersion=e.sprintVersion,r.sprintData.sprintVersion=e.otherSprintVersion,i&&p.redrawChangedModel(i),r&&p.redrawChangedModel(r)}).fail(function(){t(o),p.updateSprintsAfterAddRemove()}))};var c=function(e,t,i){var r=s.getSprintModels().slice(0);i(e)&&(p.updateSprintsAfterAddRemove(),GH.Ajax.put({url:"/sprint/"+e+"/move/",data:{targetSprintId:t}}).done(function(e){u.analytics.trigger("movesprint")}).fail(function(){s.sprintModels=r,p.updateSprintsAfterAddRemove()}))};return u.editSprint=function(e){var t=GH.RapidBoard.State.getRapidViewId(),i=s.getSprintModel(e);g.triggerBefore("before:sprintEditPopup"),l.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===o.PLAN,function(){r("jira-agile/rapid/ui/dialog/edit-sprint-dialog").show(t,i),AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.view",data:{sprintState:i.sprintData.state}}),AJS.trigger("analyticsEvent",{name:"jsw.agility.backlog.sprint.edit"})})},u.triggerAnalytics=function(e){var t,i;1===e.changes.length&&(e=(t=e.changes[0]).currentSprint,t=t.targetSprint,e&&t&&"FUTURE"===e.state&&"FUTURE"===t.state&&(i="movebetweenfuturesprints"),e&&t&&"ACTIVE"===e.state&&"ACTIVE"===t.state&&(i="movebetweenactivesprints"),e&&t&&"FUTURE"===e.state&&"ACTIVE"===t.state&&(i="movefromfuturetoactivesprint"),e&&t&&"ACTIVE"===e.state&&"FUTURE"===t.state&&(i="movefromactivetofuturesprint"),!e&&t&&"ACTIVE"===t.state&&(i="addtoactivesprint"),!e&&t&&"FUTURE"===t.state&&(i="addtofuturesprint"),e&&!t&&"FUTURE"===e.state&&(i="removefromfuturesprint"),(i=e&&!t&&"ACTIVE"===e.state?"removefromactivesprint":i)&&u.analytics.trigger(i))},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintModel.js' */
define("jira-agile/rapid/ui/plan/sprint-model",["require"],function(r){"use strict";var e=r("underscore"),t=r("jira-agile/rapid/global-events"),i=null;t.on("pre-initialization",function(){i=r("jira-agile/rapid/ui/plan/backlog-model")});function n(t,i){var n=r("jira-agile/rapid/ui/plan/issue-list-model");this.sprintData=t,this.issueList=new n("sprint-"+t.id,i,GH.VersionController.getVersionModel())}return n.isSprintModel=function(t){return"sprint"===t.getType()},n.prototype.getSprintData=function(){return this.sprintData},n.prototype.setSprintData=function(t){this.sprintData=t},n.prototype.getIssueList=function(){return this.issueList},n.prototype.getId=function(){return this.sprintData.id},n.prototype.getType=function(){return"sprint"},n.prototype.getName=function(){return this.sprintData.name},n.prototype.getSprintId=function(){return this.sprintData.id},n.prototype.isFutureSprint=function(){return"FUTURE"===this.sprintData.state},n.prototype.isActiveSprint=function(){return"ACTIVE"===this.sprintData.state},n.prototype.isBacklog=function(){return this.sprintData.id===i.BACKLOG_ID},n.prototype.getColumn=function(){return this.sprintData.column},n.prototype.getLinkedPagesCount=function(){var t=this.sprintData.linkedPagesCount,i=GH.PageIssueLinksModel.list(this.sprintData.id).length,n=t;return n=!e.isNumber(t)||t<i?i:n},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintView.js' */
define("jira-agile/rapid/ui/plan/sprint-view",["require","underscore","jira-agile/rapid/global-events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/plan/sprint-model","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/backlog-statistics","jira-agile/tooltip","jira-agile/rapid/const/PageMode"],function(i,s,t,a,n,l,r,o,d){"use strict";var p,g,c=i("jira/featureflags/feature-manager"),S=i("jira-agile/rapid/deferred-resources-loader");t.on("pre-initialization",function(){p=i("jira-agile/rapid/ui/plan/sprint-controller"),g=i("jira-agile/rapid/ui/plan/backlog-controller")});var e=c.isFeatureEnabled("jsw-classic-override-force-consistency-after-issue-create"),u={init:function(){var t=AJS.$(document);t.on("click",".js-sprint-start",u.handleStartSprintClick),t.on("click",".js-sprint-container .js-view-entity-pages",u.handleViewSprintLinkedPages),t.on("click",".js-assigned-work-dialog-trigger",u.handleViewAllAssignedWork),t.on("click keypress",".ghx-set-sprint-date",u.handleSprintDateClick)},handleStartSprintClick:function(t){AJS.$(t.target).hasClass("disabled")||(t=u.getSprintIdForElement(t.target),p.openStartSprintDialog(t))},handleSprintDateClick:function(t){"keypress"===t.type&&13!==t.keyCode||(t=u.getSprintIdForElement(t.target),p.openSprintDateDialog(t))},showSprintLinkedPagesDialog:function(t,e){var i=AJS.$(t),t=u.getSprintIdForElement(i);GH.LinkedPagesController.showDialogForSprint(d.PLAN,t,i,e)},handleViewSprintLinkedPages:function(t){u.showSprintLinkedPagesDialog(t.target)},handleDeleteSprintClick:function(t){AJS.$(t.target).hasClass("disabled")||(t=u.getSprintIdForElement(t.target),p.deleteSprintFromBacklog(t))},handleViewAllAssignedWork:function(t){t.preventDefault();var t=u.getSprintIdForElement(t.target),e=l.getSprintModel(t);S.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===d.PLAN,function(){new(i("jira-agile/rapid/ui/plan/assigned-work-dialog"))({id:"assigned-work-dialog",assignedWorkStats:r.getAssignedWorkStats(e.getIssueList()),sprintName:e.getName(),estimateStatisticName:l.estimationStatistic.name,trackingStatisticName:l.trackingStatistic.name}).show()}),o.hide(".js-assigned-work-dialog-trigger"),new a("gh.assignedWork.dialog").trigger("show")},registerTwixies:function(){AJS.$("#ghx-backlog").undelegate(".ghx-backlog-container .ghx-expander","click.sprintTwix"),AJS.$("#ghx-backlog").delegate(".ghx-backlog-container .ghx-expander","click.sprintTwix",u.handleTwixieClick)},handleTwixieClick:function(t){var e=AJS.$(this).closest(".ghx-backlog-container").attr("data-sprint-id");p.toggleTwixie(e)},updateTwixieState:function(t){var e=p.isTwixieOpen(t),t=AJS.$('.js-sprint-container[data-sprint-id="'+t+'"]');e?t.removeClass("ghx-closed").addClass("ghx-open"):t.removeClass("ghx-open").addClass("ghx-closed")},updateSprintViewForModel:function(t){u._updateSprint(t)},renderAllSprints:function(a){var t=l.getSprintModels(),n=[],r=AJS.$("#ghx-backlog").find(".ghx-sprint-group").empty();s.each(t,function(t){var e=AJS.$(GH.tpl.sprintview.renderSprintContainer({sprintData:t.getSprintData(),isMetaExpanded:p.isTwixieOpen(t.getSprintId()),isKanbanColumn:GH.RapidBoard.State.isKanbanBoard()&&!t.isBacklog()})),i=u._renderSprintContent(t,a);e.filter(".ghx-backlog-container").append(i),r.append(e),"ACTIVE"===t.getSprintData().state&&n.push(t.getSprintId())}),u.enableTooltips(),GH.RapidBoard.ViewController.insightsOpen&&AJS.$("#ghx-issue-fragment").trigger("backlog-refreshInsightsPanel"),e&&GH.RapidBoard.State.setActiveSprintIdsForEventuallyConsistentBoard(n)},_updateSprint:function(t){var e,i=AJS.$('.js-sprint-container[data-sprint-id="'+t.getSprintId()+'"]');0!==i.length&&(e=g.calculateIssueRenderData(),e=u._renderSprintContent(t,e),i.empty().append(e),u.enableTooltips(),GH.RapidBoard.ViewController.insightsOpen&&AJS.$("#ghx-issue-fragment").trigger("backlog-refreshInsightsPanel"))},_renderSprintContent:function(t,e){var i=u.calculateSprintIssueListStats(t,t.getIssueList()),a=t.getSprintData(),n=u._getManageSprintData(a),r=GH.RapidBoard.State.isKanbanBoard()?a.column.min:void 0,s=GH.RapidBoard.State.isKanbanBoard()?a.column.max:void 0,o=t.getIssueList().getVisibleRankables(),d=t.getIssueList().getAllIssues(),p=GH.IssueListUtil.issueListToTree(o.map(function(t){return d[t]}));GH.IssueListUtil.applyExpandedState(p,GH.RapidBoard.State.getExpandedIssueKeys());o=GH.RapidBoard.State.isScrumBoard(),o=l.supportsPages()&&o&&!t.isBacklog(),t={sprintData:a,manageSprintData:n,isRankable:l.isRankable(),showLinkedPages:o,linkedPagesCount:t.getLinkedPagesCount(),issues:p,issueListStats:i,epics:GH.EpicView.isbacklogDataV2Enabled()?g.getEpicMap():GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:e,statLabel:l.estimationStatistic.name,trackLabel:l.trackingStatistic.name,estimationEnabled:l.estimationStatistic.isEnabled,showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),showAssignedWorkStats:GH.RapidBoard.State.isScrumBoard(),showSprintActions:GH.RapidBoard.State.isScrumBoard(),showSprintFooter:!GH.RapidBoard.State.isAgilityBoard()&&GH.RapidBoard.State.isScrumBoard(),minIssueCount:r,maxIssueCount:s,isAgility:GH.RapidBoard.State.isAgilityBoard(),shouldDisplayCreateSprintButton:t.isBacklog(),isbacklogDataV2Enabled:GH.EpicView.isbacklogDataV2Enabled(),isFutureSprintDatesEnabled:GH.RapidBoard.State.isScrumBoard(),isMigrateEpicFieldToIssueFieldEnabled:c.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe"),isUseIssueHierarchyEnabled:c.isFeatureEnabled("safe.return-hierarchy-level-in-cbb")};return AJS.$(GH.tpl.sprintview.renderSprintContent(t))},updateSprintStatistics:function(){var t=l.getSprintModels();s.each(t,function(t){var e=u.calculateSprintIssueListStats(t,t.getIssueList());u._updateSprintStatisticsDom(t,e,!1)})},updateSprintStatisticForDraggedSprint:function(t,e){e=u.calculateSprintIssueListStats(t,e);u._updateSprintStatisticsDom(t,e,!0)},markAsOvertaken:function(t){var e=!1,i=[];s.each(t,function(t){n.isSprintModel(t)?i.push(t.getSprintId()):e=!0}),AJS.$(".js-sprint-container").each(function(){var t=AJS.$(this);s.contains(i,u.getSprintIdForElement(t))?t.addClass("ghx-overtaken"):t.removeClass("ghx-overtaken")}),AJS.$(".ghx-everything-else").each(function(){var t=AJS.$(this);e?t.addClass("ghx-overtaken"):t.removeClass("ghx-overtaken")})},_updateSprintStatisticsDom:function(t,e,i){var a=AJS.$('.js-sprint-container[data-sprint-id="'+t.getSprintId()+'"]'),n=u._renderSprintIssueCount(e);a.find(".ghx-issue-count").replaceWith(n),GH.RapidBoard.State.isScrumBoard()&&a.find(".ghx-assigned-work-stats").replaceWith(GH.tpl.sprintview.renderAssignedWork({assignedWork:e.assignedWorkStats.assigned,estimateStatisticName:l.estimationStatistic.name,trackingStatisticName:l.trackingStatistic.name})),t.isFutureSprint()&&(e=u._renderFutureSprintFooterContent(e),a.find(".gh-sprint-footer-stats").empty().append(e),i&&AJS.$('.gh-sprint-footer-stats[data-sprint-id="'+t.getSprintId()+'"]').empty().append(e)),u.enableTooltips()},_renderSprintMetaInfos:function(t){return GH.tpl.sprintview.renderSprintMetaInfos({sprintData:t.getSprintData()})},_renderSprintIssueCount:function(t){return GH.tpl.planissuelist.renderIssueCount({issueListStats:t})},_renderFutureSprintFooterContent:function(t){return GH.RapidBoard.State.isScrumBoard()?GH.tpl.sprintview.renderFutureSprintFooterContent({issueListStats:t}):""},_getManageSprintData:function(t){var e=l.getActiveSprintModels(),i=l.getFutureSprintModels(),a=0<e.length,n=GH.RapidBoard.parallelSprints,r=0<i.length?i[0].getSprintData().id:null,s=(n||!a)&&t.canUpdateSprint,e=l.canManageSprints(),i=l.complexQuery();return{canStartSprint:s,canUpdateSprint:t.canUpdateSprint,canManageSprints:e,complexQuery:i,hasOpenSprints:a,parallelSprints:n,firstFutureSprintId:r}},calculateSprintIssueListStats:function(t,e){var i=r.getIssueListStats(e,!0,t.isActiveSprint());return t.isFutureSprint()?(t=r.getIssueListEstimateStatistics(e),s.extend(i,t)):i.progressIndicators=r.calculateSprintProgress(e,g.rapidViewConfig.columns,l.estimationStatistic),i.assignedWorkStats=r.getAssignedWorkStats(e),GH.RapidBoard.State.isKanbanBoard()&&(i.statisticsFieldValue=r.calculateStatisticsFieldValue(e,g.rapidViewConfig.statisticConfig)),i},getSprintIdForElement:function(t){t=AJS.$(t).closest(".js-sprint-container");return t.length?h(t):null},getSprintIdForMarker:function(t){t=AJS.$(t).closest(".js-marker");return t.length?h(t):null}},h=function(t){return parseInt(t.data("sprint-id"),10)};return u.enableTooltips=function(){AJS.$(".js-sprint-start").tooltip({html:!0,title:"data-tooltip"}),o.tipsify({selector:".js-assigned-work-dialog-trigger"})},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintView.soy' */
// This file was automatically generated from SprintView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintview == 'undefined') { GH.tpl.sprintview = {}; }


GH.tpl.sprintview.renderSprintContainer = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error-group"></div><div class="ghx-onboarding-fillyourbacklog-group"></div><div data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '" class="ghx-backlog-container ' + soy.$$escapeHtml(opt_data.sprintData.state == 'FUTURE' ? 'ghx-sprint-planned' : 'ghx-sprint-active') + ' js-sprint-container ' + soy.$$escapeHtml(opt_data.isMetaExpanded ? 'ghx-open' : 'ghx-closed') + ((opt_data.isKanbanColumn) ? ' ghx-kanban-column' : '') + '" ></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContainer.soyTemplateName = 'GH.tpl.sprintview.renderSprintContainer';
}


GH.tpl.sprintview.renderSprintContent = function(opt_data, opt_ignored) {
  var output = GH.tpl.sprintview.renderSprintHeader(opt_data) + '<div class="ghx-meta' + ((! opt_data.manageSprintData.canManageSprints) ? ' ghx-disabled' : '') + '" >' + ((opt_data.showAssignedWorkStats && ! opt_data.isAgility) ? GH.tpl.sprintview.renderAssignedWork({assignedWork: opt_data.issueListStats.assignedWorkStats.assigned, estimateStatisticName: opt_data.statLabel, trackingStatisticName: opt_data.trackLabel}) : '') + '<div class="ghx-issues js-issue-list' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '"><div class="ghx-plan-dropzone"></div>' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div>';
  var isMarkerDraggable__soy51 = opt_data.isRankable && opt_data.sprintData.id != 'backlog';
  output += ((opt_data.sprintData.state == 'FUTURE') ? '<div class="ghx-marker js-parent-drag js-marker ' + ((! isMarkerDraggable__soy51) ? 'ghx-not-rankable' : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '"><div class="gh-sprint-divider"><div class="gh-grabber-left-container"><div class="gh-grabber-left"></div></div><div class="gh-grabber"></div><div class="gh-grabber-right-container"><div class="gh-grabber-right"></div>' + GH.tpl.sprintview.renderFutureSprintFooter(opt_data) + '</div></div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContent.soyTemplateName = 'GH.tpl.sprintview.renderSprintContent';
}


GH.tpl.sprintview.renderSprintHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-backlog-header js-sprint-header" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '"><div class="header-left"><div class="ghx-expander"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-name">' + soy.$$escapeHtml(opt_data.sprintData.name) + '</div>' + ((opt_data.minIssueCount) ? '<div class="ghx-kanban-column-min"><span class="aui-lozenge' + ((opt_data.issueListStats.statisticsFieldValue < opt_data.minIssueCount) ? ' aui-lozenge-current' : '') + '">' + soy.$$escapeHtml('Min') + ' ' + soy.$$escapeHtml(opt_data.minIssueCount) + '</span></div>' : '') + ((opt_data.maxIssueCount) ? '<div class="ghx-kanban-column-max"><span class="aui-lozenge' + ((opt_data.issueListStats.statisticsFieldValue > opt_data.maxIssueCount) ? ' aui-lozenge-error' : '') + '">' + soy.$$escapeHtml('Max') + ' ' + soy.$$escapeHtml(opt_data.maxIssueCount) + '</span></div>' : '') + GH.tpl.planissuelist.renderIssueCount(opt_data) + '</div><div class="header-right">' + ((opt_data.showSprintActions && opt_data.shouldDisplayCreateSprintButton) ? '<div class="aui-item"><button class="js-add-sprint aui-button ' + ((! opt_data.manageSprintData.canManageSprints) ? ' disabled' : '') + '"' + ((! opt_data.manageSprintData.canManageSprints) ? ((opt_data.manageSprintData.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can update this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml('You need the Manage sprints permission for all projects in the origin board to create a sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e') + '"') + 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml('Create sprint') + '</button></div>' : (opt_data.sprintData.state == 'FUTURE') ? (opt_data.showSprintActions) ? GH.tpl.sprintview.renderFutureSprintControls(opt_data) : '' : GH.tpl.sprintview.renderSprintProgress(opt_data) + ((opt_data.showSprintActions) ? '<div class="ghx-controls aui-group">' + GH.tpl.sprintview.renderSprintActions(opt_data) + '</div>' : '')) + '</div>' + ((opt_data.sprintData.goal) ? '<div class="aui-group ghx-sprint-goal-group">' + GH.tpl.board.x.renderSprintGoal({goal: opt_data.sprintData.goal}) + '</div>' : '') + ((opt_data.sprintData.state != 'FUTURE' || opt_data.showLinkedPages || opt_data.isFutureSprintDatesEnabled) ? '<div class="ghx-sprint-info aui-group aui-group-split"><div class="ghx-dates aui-item">' + ((opt_data.sprintData.state != 'FUTURE' || opt_data.isFutureSprintDatesEnabled) ? (opt_data.sprintData.startDate != 'None' && opt_data.sprintData.startDate) ? GH.tpl.sprintview.renderSprintMetaInfos(opt_data) : (opt_data.isFutureSprintDatesEnabled) ? GH.tpl.sprintview.renderAddDatesLabel(null) : '' : '') + '</div>' + ((opt_data.showLinkedPages) ? GH.tpl.sprintview.renderSprintMetaLinkedTrigger(opt_data) : '') + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintHeader.soyTemplateName = 'GH.tpl.sprintview.renderSprintHeader';
}


GH.tpl.sprintview.renderAddDatesLabel = function(opt_data, opt_ignored) {
  return '<div><span class="ghx-set-sprint-date ghx-clickable" tabindex="0"><span class="aui-icon aui-icon-small aui-iconfont-edit">' + soy.$$escapeHtml('Add dates') + '</span>&nbsp;' + soy.$$escapeHtml('Add dates') + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderAddDatesLabel.soyTemplateName = 'GH.tpl.sprintview.renderAddDatesLabel';
}


GH.tpl.sprintview.renderFutureSprintControls = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls aui-group">' + GH.tpl.sprintview.renderStartSprintItem(opt_data) + GH.tpl.sprintview.renderSprintActions(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintControls.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintControls';
}


GH.tpl.sprintview.renderSprintMetaInfos = function(opt_data, opt_ignored) {
  return '<div class="ghx-date">' + soy.$$escapeHtml(opt_data.sprintData.startDate) + '</div><div class="ghx-divider">&bull;</div><div class="ghx-date">' + soy.$$escapeHtml(opt_data.sprintData.endDate) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaInfos.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaInfos';
}


GH.tpl.sprintview.renderSprintMetaLinkedTrigger = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: 'Create and view pages linked to this sprint'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaLinkedTrigger.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaLinkedTrigger';
}


GH.tpl.sprintview.renderSprintProgress = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueListStats.progressIndicators) {
    output += '<div class="ghx-badge-group">';
    var indicatorList195 = opt_data.issueListStats.progressIndicators;
    var indicatorListLen195 = indicatorList195.length;
    for (var indicatorIndex195 = 0; indicatorIndex195 < indicatorListLen195; indicatorIndex195++) {
      var indicatorData195 = indicatorList195[indicatorIndex195];
      var state__soy196 = '' + ((indicatorIndex195 == 0) ? ' ghx-not-started' : (indicatorIndex195 == indicatorListLen195 - 1) ? ' ghx-done' : ' ghx-in-progress');
      var text__soy204 = '' + ((indicatorData195.total.text) ? soy.$$escapeHtml(indicatorData195.total.text) : ' ');
      output += aui.badges.badge({text: text__soy204, extraAttributes: {title: indicatorData195.title}, extraClasses: [state__soy196]});
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintProgress.soyTemplateName = 'GH.tpl.sprintview.renderSprintProgress';
}


GH.tpl.sprintview.renderProgressIndicatorTitle = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.indicator.name) + ': ' + soy.$$escapeHtml(opt_data.indicator.total.text) + ' ' + soy.$$escapeHtml('of') + ' ' + soy.$$escapeHtml(opt_data.allIndicatorsTotalText) + ' (' + soy.$$escapeHtml(opt_data.statLabel) + ')';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderProgressIndicatorTitle.soyTemplateName = 'GH.tpl.sprintview.renderProgressIndicatorTitle';
}


GH.tpl.sprintview.renderStartSprintItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.manageSprintData.firstFutureSprintId == opt_data.sprintData.id || opt_data.manageSprintData.parallelSprints) ? '<div class="aui-item">' + ((opt_data.manageSprintData.canStartSprint && opt_data.issueListStats.hasIssues) ? '<button class="js-sprint-start aui-button" data-tooltip="">' + soy.$$escapeHtml('Start sprint') + '</button>' : '<button class="js-sprint-start aui-button disabled" aria-disabled="true"' + ((! opt_data.issueListStats.hasIssues) ? 'data-tooltip="' + soy.$$escapeHtml('Sprint cannot be started because it contains no issues') + '"' : (opt_data.manageSprintData.hasOpenSprints && ! opt_data.manageSprintData.parallelSprints) ? 'data-tooltip="' + soy.$$escapeHtml('Can be planned but not started until the completion of above active sprint') + '"' : (! opt_data.manageSprintData.canStartSprint) ? (opt_data.manageSprintData.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can start or complete this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml(AJS.format('You need the {0}Manage sprints permission{1} to start or complete this sprint','<a class="manage-sprint-permission-help" href="#">','</a>')) + '"' : '') + '>' + soy.$$escapeHtml('Start sprint') + '</button>') + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderStartSprintItem.soyTemplateName = 'GH.tpl.sprintview.renderStartSprintItem';
}


GH.tpl.sprintview.renderSprintActions = function(opt_data, opt_ignored) {
  var output = '<div class="aui-item">';
  var url__soy263 = soy.$$escapeHtml("") + '/rest/greenhopper/1.0/xboard/plan/sprints/actions?sprintId=' + soy.$$escapeHtml(opt_data.sprintData.id);
  output += aui.buttons.button({extraClasses: ['aui-button', 'js-sprint-actions-trigger'], tagName: 'a', text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', extraAttributes: {href: url__soy263, 'data-sprint-id': opt_data.sprintData.id}}) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintActions.soyTemplateName = 'GH.tpl.sprintview.renderSprintActions';
}


GH.tpl.sprintview.renderAssignedWork = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-assigned-work-stats">';
  var assignedWorkEntryList277 = opt_data.assignedWork;
  var assignedWorkEntryListLen277 = assignedWorkEntryList277.length;
  for (var assignedWorkEntryIndex277 = 0; assignedWorkEntryIndex277 < assignedWorkEntryListLen277; assignedWorkEntryIndex277++) {
    var assignedWorkEntryData277 = assignedWorkEntryList277[assignedWorkEntryIndex277];
    output += GH.tpl.avatar.renderIssueAvatar({issue: assignedWorkEntryData277.issues[0], tooltipHtml: soy.$$escapeHtml(assignedWorkEntryData277.assigneeName) + '<table>' + ((assignedWorkEntryData277.totalEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData277.totalEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</td></tr>' : '') + ((assignedWorkEntryData277.totalTrackingEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData277.totalTrackingEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.trackingStatisticName) + '</td></tr>' : '') + '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData277.issues.length) + '</td><td>' + soy.$$escapeHtml('Issues') + '</td></tr></table>'});
  }
  if (opt_data.assignedWork.length) {
    var tooltip__soy305 = '' + soy.$$escapeHtml('View summary of assigned work');
    output += aui.buttons.button({extraAttributes: {'data-tooltip': tooltip__soy305}, extraClasses: ['js-assigned-work-dialog-trigger', 'aui-button-subtle', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', iconText: tooltip__soy305});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderAssignedWork.soyTemplateName = 'GH.tpl.sprintview.renderAssignedWork';
}


GH.tpl.sprintview.renderFutureSprintFooter = function(opt_data, opt_ignored) {
  return '<div class="gh-sprint-footer-stats js-marker" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '">' + ((opt_data.showSprintFooter && ! opt_data.isAgility) ? GH.tpl.sprintview.renderFutureSprintFooterContent(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooter.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooter';
}


GH.tpl.sprintview.renderFutureSprintFooterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-stats ' + ((! opt_data.issueListStats.allVisible) ? 'ghx-is-filtered' : '') + '"><div class="ghx-stat-total"><span class="ghx-label">' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.issueListStats.totalCount)) : soy.$$escapeHtml(AJS.format('{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible',opt_data.issueListStats.totalCount,opt_data.issueListStats.visibleCount))) + '</span>';
  if (opt_data.issueListStats.tracking.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml('Remaining') + '</span>';
    var label__soy341 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.tracking.name) : soy.$$escapeHtml(AJS.format('{0} of {1} {2} visible',opt_data.issueListStats.tracking.visible.formatted,opt_data.issueListStats.tracking.total.formatted,opt_data.issueListStats.tracking.name)));
    var badgetext__soy349 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.tracking.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted));
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy349, extraAttributes: {title: label__soy341}});
  }
  if (opt_data.issueListStats.estimate.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml('Estimate') + '</span>';
    var label__soy366 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.estimate.name) : soy.$$escapeHtml(AJS.format('{0} of {1} {2} visible',opt_data.issueListStats.estimate.visible.formatted,opt_data.issueListStats.estimate.total.formatted,opt_data.issueListStats.estimate.name)));
    var badgetext__soy374 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.estimate.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted));
    output += aui.badges.badge({text: badgetext__soy374, extraAttributes: {title: label__soy366}});
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooterContent.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooterContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/sprintactions/SprintActions.js' */
var _extends=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e,r=arguments[t];for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n};define("jira-agile/rapid/ui/component/sprintactions/sprint-actions",["require"],function(r){"use strict";function i(){}var o=r("jquery"),a=r("underscore"),c=r("jira-agile/rapid/ui/plan/backlog-model"),n=r("jira-agile/rapid/ui/plan/sprint-controller"),t=r("jira/featureflags/feature-manager"),s=r("jira-agile/rapid/deferred-resources-loader");AJS.Dropdown;return i.CORE_SPRINT_ACTIONS=_extends({},t.isFeatureEnabled("jsw.classic.new.move.sprint.methods")&&{"gh-sprint-move-to-top":n.moveSprintToTop},{"gh-sprint-move-up":n.moveSprintUp,"gh-sprint-move-down":n.moveSprintDown},t.isFeatureEnabled("jsw.classic.new.move.sprint.methods")&&{"gh-sprint-move-to-bottom":n.moveSprintToBottom},{"gh-sprint-delete":n.deleteSprintFromBacklog,"gh-sprint-delete-disabled":o.noop,"gh-sprint-edit":n.editSprint}),i.prototype={getDropDownTrigger:function(){return o(".js-sprint-actions-trigger")},triggerClickPlaceholder:function(n){n.preventDefault()},createDropdown:function(){var e=this,n=!s.isResourceAvailable("jira/ajs/dropdown/dropdown"),t=e.getDropDownTrigger();n&&(t.unbind("click",e.triggerClickPlaceholder),t.on("click",e.triggerClickPlaceholder)),s.handleDeferredResourceImport(n,function(){t.unbind("click",e.triggerClickPlaceholder);var n=r("jira/ajs/dropdown/dropdown").create({trigger:t,ajaxOptions:{dataType:"json",cache:!1,formatSuccess:function(n){var t=n.id,t=e.getSprintData(t);return n.sections=e.filterActions(n.sections,t),o(GH.tpl.component.sprintactions.sprintActionsDropdown(n))}}});return o(document).off("click",".js-sprint-action"),o(document).on("click",".js-sprint-action",function(n){e.clickSprintAction(n)}),n})},getSprintData:function(n){var t=!1,e=!1,r=c.getFutureSprintModels(),i=c.getSprintModel(n);return 1<r.length&&i.isFutureSprint()&&(t=a.first(r).getSprintId()!==n,e=a.last(r).getSprintId()!==n),{canMoveUp:t,canMoveDown:e,canManageSprints:c.canManageSprints()}},filterActions:function(n,t){return a.each(n,function(n){n.actions=a.reject(n.actions,function(n){return!(("gh-sprint-move-to-top"!==n.id||t.canMoveUp&&t.canManageSprints)&&("gh-sprint-move-up"!==n.id||t.canMoveUp&&t.canManageSprints)&&("gh-sprint-move-down"!==n.id||t.canMoveDown&&t.canManageSprints)&&("gh-sprint-move-to-bottom"!==n.id||t.canMoveDown&&t.canManageSprints))}),a.each(n.actions,function(n){n.disabled=n.styleClass&&0<=n.styleClass.indexOf("disabled")})}),a.filter(n,function(n){return 0<n.actions.length})},clickSprintAction:function(n){var t=o(n.currentTarget),e=t.data("sprint-id"),t=t.attr("id"),t=i.CORE_SPRINT_ACTIONS[t];t&&(n.preventDefault(),t(e))}},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/sprintactions/SprintActions.soy' */
// This file was automatically generated from SprintActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintactions == 'undefined') { GH.tpl.component.sprintactions = {}; }


GH.tpl.component.sprintactions.sprintActionsDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list js-sprint-actions-list">';
  if (opt_data.sections && opt_data.sections.length > 0) {
    var sectionList6 = opt_data.sections;
    var sectionListLen6 = sectionList6.length;
    for (var sectionIndex6 = 0; sectionIndex6 < sectionListLen6; sectionIndex6++) {
      var sectionData6 = sectionList6[sectionIndex6];
      output += '<ul class=" aui-list-section' + ((sectionIndex6 == sectionListLen6 - 1) ? ' aui-last' : '') + '">';
      var actionList12 = sectionData6.actions;
      var actionListLen12 = actionList12.length;
      for (var actionIndex12 = 0; actionIndex12 < actionListLen12; actionIndex12++) {
        var actionData12 = actionList12[actionIndex12];
        output += '<li class="aui-list-item' + ((actionData12.disabled) ? ' disabled' : '') + '"><a href="' + soy.$$escapeHtml(actionData12.url) + '" class="aui-list-item-link js-sprint-action' + ((actionData12.styleClass) ? ' ' + soy.$$escapeHtml(actionData12.styleClass) : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(actionData12.id) + '"' + ((actionData12.desc) ? 'title="' + soy.$$escapeHtml(actionData12.desc) + '"' : '') + '>' + soy.$$escapeHtml(actionData12.name) + '</a></li>';
      }
      output += '</ul>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintactions.sprintActionsDropdown.soyTemplateName = 'GH.tpl.component.sprintactions.sprintActionsDropdown';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanKBShortcuts.js' */
define("jira-agile/rapid/ui/plan/plan-kb-shortcuts",["require"],function(e){"use strict";var t=e("jira-agile/rapid/analytics-tracker"),s=e("jira-agile/rapid/ui/plan/backlog-model"),a=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),l=e("jira-agile/rapid/ui/plan/plan-controller"),r=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),o=e("jira-agile/rapid/ui/plan/sprint-model"),u={};return u.analytics=new t("gh.rapidboard.rankissues"),u.sendToTop=function(e){var t,n,i;!s.isRankable()||(i=a.getSelectedIssueKey())&&(t=s.getFirstRankableIssueKeyInColumn(i),n=a.getSelectedIssuesInOrder(),u.analytics.trigger("sendToTop"+(e||""),n.length),(e=s.getBestFitSelectionAfterRank(n))&&a.selectIssue(e),t&&(i=s.findModelWithIssue(i),i=o.isSprintModel(i)?i.getSprintId():null,r.rankIssues(n,i,null,t).done(function(e){GH.Notification.showSuccess("Issue has been re-ranked to the top of its column.")}).fail(function(){l.reload()})))},u.sendToBottom=function(e){var t,n,i;!s.isRankable()||(i=a.getSelectedIssueKey())&&(t=s.getLastRankableIssueKeyInColumn(i),n=a.getSelectedIssuesInOrder(),u.analytics.trigger("sendToBottom"+(e||""),n.length),e=s.getBestFitSelectionAfterRank(n),t&&(e&&a.selectIssue(e),i=s.findModelWithIssue(i),i=o.isSprintModel(i)?i.getSprintId():null,r.rankIssues(n,i,t,null).done(function(e){GH.Notification.showSuccess("Issue has been re-ranked to the bottom of its column.")}).fail(function(){l.reload()})))},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanInlineDialog.js' */
var _createClass=function(){function t(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}define("jira-agile/rapid/ui/kanplan/KanPlanInlineDialog",["jquery","jira-agile/rapid/events","require"],function(e,n){"use strict";function i(){_classCallCheck(this,i),new n(this)}return _createClass(i,[{key:"getInlineDialogAnchor",value:function(){return this.inlineDialogContainer}},{key:"setInlineDialogAnchor",value:function(n){this.inlineDialogContainer=n}},{key:"getInlineDialog",value:function(){return this.dialog}},{key:"render",value:function(){var n=this;this.isRendered||(this.dialog=new AJS.HelpTip({title:"Kanban backlog",bodyHtml:"This column is getting full. Want an easier way to manage it?",anchor:e(document.body),showCloseButton:!0,closeButtonText:"Not now",showNextButton:!0,nextButtonText:"Tell me more",callbacks:{init:function(){n.trigger("dialog:init"),n.initEvents()}}}),this.dialog.show=function(){this.view.show()},this.isRendered=!0)}},{key:"getInlineDialogDomElement",value:function(){return this.getInlineDialog().view.$el}},{key:"initEvents",value:function(){function n(){e.trigger("moreButton:click")}var e=this,i=this.getInlineDialogDomElement();i.find(".helptip-next").off("click",n).on("click",n);function t(){e.trigger("closeButton:click")}i.find(".helptip-close").off("click",t).on("click",t),i.addClass("js-kanplan-enable-inline-dialog")}},{key:"show",value:function(){this.render();var n=this.getInlineDialogAnchor();this.getInlineDialog().view.changeAnchor(n),this.getInlineDialog().show()}},{key:"hide",value:function(){if(this.getInlineDialog()){this.getInlineDialog().hide();var n,e=document.getElementsByClassName("js-kanplan-enable-inline-dialog");for(n in Object.keys(e))e[n].innerHTML.includes("This column is getting full. Want an easier way to manage it?")&&(e[n].style.display="none")}}}]),i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanInlineDialogController.js' */
var _createClass=function(){function a(n,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(n,e,i){return e&&a(n.prototype,e),i&&a(n,i),n}}();function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}define("jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController",["jira-agile/rapid/ui/kanplan/KanPlanInlineDialog","jira-agile/rapid/events","jira-agile/rapid/analytics-tracker","require"],function(n,e,i){"use strict";var a,t=new i("jira-software.kanplan.enable-prompt"),r=new n,l="ghx.kanplan.inlineDialog.dismissed",n=(_createClass(o,null,[{key:"init",value:function(){r.on("moreButton:click",function(){o.trigger(o.CONTINUE_EVENT),s("tellmemore")}),r.on("closeButton:click",function(){o.markAsDismissed(),s("notnow")})}},{key:"changeVisibility",value:function(n){r.setInlineDialogAnchor(GH.WorkView.getFirstColumnHeader().find("h2")),o.isVisible(n)&&(r.show(),s("show"))}},{key:"hide",value:function(){r.hide()}},{key:"isVisible",value:function(n){if(!GH.RapidBoard.State.isKanbanBoard()||GH.RapidViewConfig.kanPlanEnabled)return!1;if(!GH.UserData.userConfig.isGlobalAdmin&&!GH.RapidViewConfig.isBoardAdmin)return!1;var e=r.getInlineDialogAnchor();return!(e&&e.length<1)&&(!GH.BoardState.getPerViewValue(l)&&(!(n.getColumns().length<3)&&!((a=n.getColumnIssueCount(n.getFirstColumn().id))<20)))}},{key:"markAsDismissed",value:function(){GH.BoardState.setPerViewValue(l,!0)}}]),o);function o(){_classCallCheck(this,o)}function s(n){t.trigger(n,"issueCount",a)}return n.CONTINUE_EVENT="kanplan.inlineDialog.continue.event",new e(n)});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanOnboardingController.js' */
var _createClass=function(){function e(a,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,e.key,e)}}return function(a,n,i){return n&&e(a.prototype,n),i&&e(a,i),a}}();function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}define("jira-agile/rapid/ui/kanplan/KanPlanOnboardingController",["require","jira-agile/rapid/events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController"],function(n,a,i,e){var r=void 0,t=void 0;function l(){_classCallCheck(this,l)}return _createClass(l,null,[{key:"init",value:function(){var a=n("jira-agile/rapid/ui/kanplan/KanPlanConvertDialog");t=GH.RapidBoard.State.getRapidViewId(),e.init(),e.on(e.CONTINUE_EVENT,function(){r.show()},this),(r=new a).on(a.CONVERT_SUCCESS,function(){e.markAsDismissed(),AJS.reloadViaWindowLocation()},this)}},{key:"update",value:function(a){r&&(r.setRapidViewId(t),r.setColumnName(a.getFirstColumn().name),e.changeVisibility(a))}},{key:"hide",value:function(){e.hide()}}]),l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogSelectionController.js' */
define("jira-agile/rapid/ui/plan/backlog-selection-controller",["require"],function(e){"use strict";var t,n,a=e("jquery"),s=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/ui/plan/backlog-model"),i=e("jira-agile/rapid/ui/plan/plan-issue-list-view"),o=e("jira-agile/rapid/ui/plan/plan-context-menu-controller");s.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/plan/backlog-controller"),n=e("jira-agile/rapid/ui/plan/BacklogView")});var u={selectionDataModel:{},selectionManager:void 0,init:function(){u.selectionDataModel={isIssueValid:l.isIssueSelectable,getIssueIndex:l.getIssueIndex,canAddToSelection:l.canAddToSelection,getIssueRange:l.getIssueRange},u.selectionManager=new GH.IssueSelectionManager(u.selectionDataModel,"backlog.selectedIssues"),a(document).on("click",n.containerSelector+" .js-issue",u.handleIssueClick),a(document).on("contextmenu",n.containerSelector+" .js-issue",u.handleIssueContextMenu),a(document).on("click",n.containerSelector+" .js-issue .ghx-card-expander",u.handleIssueToggleClick)},handleIssueContextMenu:function(e){var t=i.getIssueKey(a(this));u.isInSelection(t)||(u.selectionManager.handleIssueClick(GH.MouseUtils.getMetaKeys(e),t),u.updateUIAndState({openDetailsView:!1,doScroll:!0})),o.showContextMenuAt(e)},handleIssueClick:function(e){var t=i.getIssueKey(a(this)),n=a(e.target).hasClass("js-key-link"),s=!GH.MouseUtils.openInSameTab(e);if(n&&s)return!0;e.preventDefault(),u.handleIssueSelectionEvent(e,t,!0)},validateCurrentSelection:function(){var e=u.selectionManager.validateCurrentSelection();return e&&(GH.RapidBoard.State.replaceState(),u.deferredPushState()),e},handleIssueSelectionEvent:function(e,t,n){e=GH.MouseUtils.getMetaKeys(e),t=u.selectionManager.handleIssueClick(e,t);GH.IssueSelectionManager.getMultiSelectType(e)&&(n=!1),t&&u.updateUIAndState({openDetailsView:n,doScroll:!1})},handleIssueToggleClick:function(e){e.stopPropagation();var t=i.getClosestIssueElement(a(this)),e=i.getIssueKey(a(this));i.toggleExpandState(t)||u.selectIssue(e)},selectIssue:function(e){u.selectionManager.selectIssue(e),u.updateUIAndState({openDetailsView:!1,doScroll:!0})},clearSelection:function(){u.selectIssue(null)},selectNextIssue:function(){var e=null,t=u.getSelectedIssueKey(),e=t?l.getNextIssueKey(t):l.getFirstRankableIssueKeyInColumn(null);u.selectIssue(e=e||t)},selectPreviousIssue:function(){var e=null,t=u.getSelectedIssueKey(),e=t?l.getPreviousIssueKey(t):l.getLastRankableIssueKeyInColumn(null);u.selectIssue(e=e||t)},updateUIAndState:function(e){t.updateUIAfterSelectionChange(e),GH.RapidBoard.UrlState.replaceState()},pushTimeoutHandler:void 0,deferredPushState:function(){var e=new Date;GH.RapidBoard.UrlState.pushTimeoutHandler&&window.clearTimeout(GH.RapidBoard.UrlState.pushTimeoutHandler),GH.RapidBoard.UrlState.pushTimeoutHandler=window.setTimeout(function(){GH.RapidBoard.UrlState.deferredPushState(e)},1e3)},ensureIssueSelected:function(e,t){u.selectionManager.isInSelection(t)||(l.canAddToSelection(u.selectionManager.getSelectedIssueKeys(),t)?u.handleIssueSelectionEvent(e,t):(u.selectionManager.selectIssue(t),t=!0,GH.RapidBoard.State.isDetailsViewPlanOpened()||(t=!1),u.updateUIAndState({openDetailsView:t,doScroll:!0})))},getSelectedIssueKeys:function(){return u.selectionManager.getSelectedIssueKeys()},getSelectedIssueKey:function(){return u.selectionManager.getSelectedIssueKey()},isInSelection:function(e){return u.selectionManager.isInSelection(e)},setIssueFromUrlState:function(e){u.selectionManager.selectIssue(e)},addSelectedIssueKeys:function(e){u.selectionManager._addSelectedIssueKeys(e)},getCollapsedSubTasksToSelection:function(e){var t=[];return e.forEach(function(e){l.isParentAndCollapsed(e)&&(t=t.concat(l.getSubtasks(e).map(function(e){return e.key})))}),t},getSelectedIssuesInOrder:function(){return u.selectionManager.getSelectedIssuesInOrder()}};return u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/IssueListModel.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira-agile/rapid/ui/plan/issue-list-model",["require"],function(t){"use strict";function n(e,t,s){this.fixVersions=s,(s=this.data={}).id=e,s.issueByKey={},s.order=[],s.visibleIssueKeys=new GH.Collection.OrderedSet,s.hiddenIssueKeys={},s.fakeParentKeys={},this.addIssues(t)}var h=t("underscore"),s=t("jira/featureflags/feature-manager");return n.prototype.addIssues=function(e){var s=this.data.issueByKey,r=this.data.order;h.each(e,function(e){this.fixVersions&&this.processFixVersion(e);var t=e.key;s[t]=e,r.push(t)},this),this.buildCache()},n.prototype.prependIssues=function(e){var s=this.data.issueByKey,t=this.data.order;h.each(e,function(e){this.fixVersions&&this.processFixVersion(e);var t=e.key;s[t]=e},this);e=h.map(e,function(e){return e.key});this.data.order=h.flatten([e,t],!0),this.buildCache()},n.getOrderKeyForMarkerId=function(e){return"%%-"+e},n.prototype.getIssuesInOrder=function(){var s=[],e=this.data.order,r=this.data.issueByKey;return h.forEach(e,function(e,t){s.push(r[e])},this),s},n.prototype.getId=function(){return this.data.id},n.prototype.buildCache=function(){var s=this.data.visibleIssueKeys.clear(),r=this.data.orderByKey={};h.forEach(this.data.order,function(e,t){this._isMarkerId(e)?r[n.getOrderKeyForMarkerId(e)]=t:(r[e]=t,(t=this.data.issueByKey[e])&&!t.hidden&&s.push(e))},this)},n.prototype._isMarkerId=function(e){return h.isNumber(e)},n.prototype.indexOfRankable=function(e){this._isMarkerId(e)&&(e=n.getOrderKeyForMarkerId(e));e=this.data.orderByKey[e];return h.isUndefined(e)?-1:e},n.prototype.containsRankable=function(e){return-1!==this.indexOfRankable(e)},n.prototype.insertMarker=function(e,t){var s=0,r=this.data.order;this.containsRankable(e)&&(r=h.without(r,e)),t&&((s=h.indexOf(r,t))<0?s=0:s++),0===s?r.unshift(e):r=h.flatten([r.slice(0,s),e,r.slice(s)]);var i={};h.forEach(r,function(e,t){this._isMarkerId(e)&&(e=n.getOrderKeyForMarkerId(e)),i[e]=t},this),this.data.order=r,this.data.orderByKey=i},n.prototype.removeMarker=function(e){var s;this.containsRankable(e)&&(e=h.without(this.data.order,e),s={},h.forEach(e,function(e,t){this._isMarkerId(e)&&(e=n.getOrderKeyForMarkerId(e)),s[e]=t},this),this.data.order=e,this.data.orderByKey=s)},n.prototype.isSubtask=function(e){e=this.getIssueData(e);return s.isFeatureEnabled("safe.return-hierarchy-level-in-cbb")?Boolean(e&&e.typeHierarchyLevel===GH.RapidViewConfig.SUBTASK_HIERARCHY_LEVEL):Boolean(e&&e.parentKey)},n.prototype.reorderIssues=function(e,t,s){var r=this,i=this.data.order,n=void 0,a=t||s,o=this.isSubtask(a);n=t?(t=this.getRealAfterKey(t),i.indexOf(t)+1):(s=this.getRealBeforeKey(s),i.indexOf(s));var u,d,y=GH.RapidBoard.State.shouldUseTypeHierarchyLevel();e=o?(u=this.getIssueData(a).parentKey,e.filter(function(e){e=r.getIssueData(e);return e&&e.parentKey===u})):(d=[],e.forEach(function(t){var e;r.isIssueValid(t)&&!r.isSubtask(t)&&(e=Object.values(r.data.issueByKey).filter(function(e){return(!y||e.typeHierarchyLevel===GH.RapidViewConfig.SUBTASK_HIERARCHY_LEVEL)&&e.parentKey===t}).map(function(e){return e.key}),d.push(t),e.forEach(function(e){return d.push(e)}))}),d);a=i.slice(0,n),n=i.slice(n),a=this.withoutArray(a,e),n=this.withoutArray(n,e),n=h.flatten([a,e,n]);this.setOrder(n)},n.prototype.getRealAfterKey=function(e){if(this.isSubtask(e))return e;var t=Array.from(this.data.order).reverse(),t=this.findFirstSubtaskOfParentInList(t,e);return t||e},n.prototype.getRealBeforeKey=function(e){return this.isSubtask(e)||this.data.order.includes(e)?e:this.findFirstSubtaskOfParentInList(this.data.order,e)},n.prototype.findFirstSubtaskOfParentInList=function(e,t){var s=this,r=GH.RapidBoard.State.shouldUseTypeHierarchyLevel();return e.find(function(e){e=s.getIssueData(e);return r?e&&e.typeHierarchyLevel===GH.RapidViewConfig.SUBTASK_HIERARCHY_LEVEL&&e.parentKey===t:e&&e.parentKey===t})},n.prototype.getRankableBeforeId=function(e){e=this.indexOfRankable(e);return 0<e&&this.data.order[e-1]},n.prototype.isIssueHiddenBySearchByKey=function(e){return this.data.hiddenIssueKeys[e]||!1},n.prototype.isIssueHiddenBySearchByKeyOrCollapsedSubTask=function(e){if(this.isSubtask(e)){e=this.getIssueData(e).parentKey;if(!this.isFakeParent(e)&&this.isCollapsed(e))return!0}return this.isIssueHiddenBySearchByKey()},n.prototype.updateIssue=function(e){return t("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper").prepareExtraFields(e.extraFields),this.processFixVersion(e),!h.isUndefined(this.data.issueByKey[e.key])&&(this.data.issueByKey[e.key]=e,this.buildCache(),!0)},n.prototype.processFixVersion=function(e){this.fixVersions&&(e.fixVersionsUI=this.fixVersions.getVersionsForIds(e.fixVersions))},n.prototype.getNumVisibleIssues=function(){return this.getNumVisibleIssuesBeforeRankable(!1)},n.prototype.getNumVisibleIssuesBeforeRankable=function(e){var t=this;if(!1!==e){var s=this.indexOfRankable(e);if(s<0)return!1;s=t._first(t.data.order,s)}else s=t.data.order;return h.filter(s,function(e){return t.isIssueVisible(e)}).length},n.prototype.getAllIssues=function(){return this.data.issueByKey},n.prototype.getVisibleIssues=function(){var s={};return h.each(this.data.issueByKey,function(e,t){this.isIssueVisible(t)&&(s[t]=e)},this),s},n.prototype.getVisibleRankables=function(){var t=this;return this.data.order.filter(function(e){return!!t.isIssueValid(e)&&(!!t._isMarkerId(e)||-1!==t.getIssueIndex(e))})},n.prototype.getVisibleIssueKeys=function(){return this.data.visibleIssueKeys},n.prototype.getHiddenBySearchIssues=function(){return this.data.hiddenIssueKeys},n.prototype.setHiddenBySearchIssues=function(e){this.data.hiddenIssueKeys=e},n.prototype.getIssueKeyAtIndex=function(e){var t=this.data.visibleIssueKeys;return t.length>e?t.get(e):t.last()},n.prototype.getFirstVisibleIssueKey=function(){for(var e=this.data.visibleIssueKeys,t=0;t<e.length;t++){var s=e.get(t);if(!this.isIssueHiddenBySearchByKey(s))return s}return!1},n.prototype.getLastVisibleIssueKey=function(){for(var e=this.data.visibleIssueKeys,t=e.length-1;0<t;t--){var s=e.get(t);if(!this.isIssueHiddenBySearchByKey(s))return s}return!1},n.prototype.getIssueIndex=function(e){return this.data.visibleIssueKeys.indexOf(e)},n.prototype.getIssueData=function(e){return this.data.issueByKey[e]},n.prototype.getIssueDataForId=function(t){return h.find(this.data.issueByKey,function(e){return e.id===t})||void 0},n.prototype.getIssueIdForKey=function(e){e=this.getIssueData(e);if(e)return e.id},n.prototype.isIssueVisible=function(e){return-1!==this.getIssueIndex(e)&&!this.isIssueHiddenBySearchByKey(e)},n.prototype.isIssueValid=function(t){return h.isString(t)?!h.isUndefined(this.data.issueByKey[t]):h.any(this.data.issueByKey,function(e){return t==e.id})},n.prototype.areIssuesValid=function(e){if(0===e.length)return!1;var t=this;return h.all(e,function(e){return t.isIssueValid(e)})},n.prototype.getFirstRankableIssueKeyInColumn=function(e){for(var t=h.isArray(e)?e:h.isString(e)?[e]:[],s=this.data.visibleIssueKeys,r=0,i=s.length;r<i;r++)if(-1===h.indexOf(t,s.get(r)))return s.get(r);return!1},n.prototype.getLastRankableIssueKeyInColumn=function(e){for(var t=h.isArray(e)?e:h.isString(e)?[e]:[],s=this.data.visibleIssueKeys,r=s.length-1;0<=r;r--)if(-1===h.indexOf(t,s.get(r)))return s.get(r);return!1},n.prototype.getBestFitSelectionAfterRank=function(e){return this.getNextIssueKeyAfterRank(e)||this.getPreviousIssueKeyAfterRank(e)},n.prototype.getNextIssueKeyAfterRank=function(e){e=h.last(e);return this.getNextIssueKey(e)},n.prototype.getNextIssueKey=function(e){for(var t=this.getIssueIndex(e),s=this.data.visibleIssueKeys;++t<s.length;){var r=s.get(t);if(!this.isIssueHiddenBySearchByKeyOrCollapsedSubTask(r))return r}return!1},n.prototype.getPreviousIssueKeyAfterRank=function(e){e=h.first(e);return this.getPreviousIssueKey(e)},n.prototype.getPreviousIssueKey=function(e){for(var t=this.getIssueIndex(e),s=this.data.visibleIssueKeys;0<=--t;){var r=s.get(t);if(!this.isIssueHiddenBySearchByKeyOrCollapsedSubTask(r))return r}return!1},n.prototype.getLastParentSubTask=function(e){e=this.getSubtasks(e);return e[e.length-1]},n.prototype.getIssueRange=function(e,t){var s,r,i=[],n=this.data.visibleIssueKeys,e=this.getIssueIndex(e),a=this.getIssueIndex(t);if(h.isUndefined(e)||h.isUndefined(a))return i;if(e<a)for(s=e;s<=a;s++)r=n.get(s),this.isIssueHiddenBySearchByKey(r)||i.push(r);else for(s=e;a<=s;s--)r=n.get(s),this.isIssueHiddenBySearchByKey(r)||i.push(r);return i},n.prototype.canAddToSelection=function(e,t){var s=h.filter(e,function(e){return-1!==this.getIssueIndex(e)},this);return!(0<e.length&&s.length!=e.length)&&this.isIssueVisible(t)},n.prototype.removeIssues=function(e){var s=this;e="object"===(void 0===e?"undefined":_typeof(e))?e:[e];var r=[];return h.each(e,function(e){var t=s.data.issueByKey[e];t&&(r.push(t),delete s.data.issueByKey[e],s.data.order=h.without(s.data.order,e))}),this.buildCache(),r},n.prototype.getLastVisibleKeyBefore=function(e){if(void 0!==e){for(var t,s=0;s<this.data.order.length;s++){var r=this.data.order[s];if(!this._isMarkerId(r)&&this.isIssueVisible(r)&&(t=r),r===e)break}return t}},n.prototype.getOrder=function(){return this.data.order},n.prototype.setOrder=function(e){this.data.order=e,this.buildCache()},n.prototype.applySearchFilter=function(r){var i=this,n=!1;return i.data.visibleIssueKeys.forEach(function(e){var t=i.data.issueByKey[e],s=i.data.hiddenIssueKeys[e]||!1,t=!r(t);n=n||s!==t,t?i.data.hiddenIssueKeys[e]=!0:delete i.data.hiddenIssueKeys[e]}),n},n.prototype.areIssuesBetweenMarkers=function(e,t,s){var r=this.getIssuesBetweenMarkers(t,s),i=!0;return h.forEach(e,function(e){h.contains(r,e)||(i=!1)}),i},n.prototype.getIssuesBetweenMarkers=function(e,t){var s=this.indexOfRankable(e),e=this.indexOfRankable(t);return e<s&&(t=e,e=s,s=t),this.getOrder().slice(s+1,e)},n.prototype.getMarkerIdBeforeId=function(e){this._isMarkerId(e)&&(e=n.getOrderKeyForMarkerId(e));e=this.data.orderByKey[e];if(h.isUndefined(e))return!1;for(var t=e-1;0<=t;t--)if(this._isMarkerId(this.data.order[t]))return this.data.order[t];return!1},n.prototype.getLastMarkerId=function(){for(var e=!1,t=this.data.order,s=t.length-1;0<=s;s--){var r=t[s];if(this._isMarkerId(r)){e=r;break}}return e},n.prototype.getMarkerIds=function(){var t=[];return h.each(this.data.order,function(e){this._isMarkerId(e)&&t.push(e)},this),t},n.prototype.withoutArray=function(e,t){var s=e;return h.each(t,function(e){s=h.without(s,e)}),s},n.prototype._first=function(e,t){return 0===(t=parseInt(t,10))?[]:h.first(e,t)},n.prototype.getIssueCount=function(){var t=0;return h.each(this.data.issueByKey,function(e){t++}),t},n.prototype.getAllInvisibleIssuesData=function(){var e=this.data.order;return this._getInvisibleIssuesDataForKeys(e)},n.prototype.getAllVisibleIssuesData=function(){var e=this.data.order;return this._getVisibleIssuesDataForKeys(e)},n.prototype.getVisibleIssuesDataBeforeIncludingKey=function(e){e=this.indexOfRankable(e);if(e<0)return[];e=this.data.order.slice(0,e+1);return this._getVisibleIssuesDataForKeys(e)},n.prototype.getVisibleIssuesDataAfterKey=function(e){e=this.indexOfRankable(e);if(e<0)return[];e=this.data.order.slice(e+1);return this._getVisibleIssuesDataForKeys(e)},n.prototype.getSubtasks=function(t){return h.filter(this.data.issueByKey,function(e){return(!s.isFeatureEnabled("safe.return-hierarchy-level-in-cbb")||e.typeHierarchyLevel===GH.RapidViewConfig.SUBTASK_HIERARCHY_LEVEL)&&(e.parentId===t||e.parentKey===t)})},n.prototype.hasSubTasks=function(e){return 0<this.getSubtasks(e).length},n.prototype.getIssuesExcludingSubtasks=function(){return s.isFeatureEnabled("safe.return-hierarchy-level-in-cbb")?h.filter(this.data.issueByKey,function(e){return e.typeHierarchyLevel!==GH.RapidViewConfig.SUBTASK_HIERARCHY_LEVEL}):h.filter(this.data.issueByKey,function(e){return h.isUndefined(e.parentId)})},n.prototype._getVisibleIssuesDataForKeys=function(e){var t=[];return h.each(e,function(e){this.isIssueVisible(e)&&(e=this.getIssueData(e),t.push(e))},this),t},n.prototype._getInvisibleIssuesDataForKeys=function(e){var s=[];return h.each(e,function(e){var t=this.getIssueData(e);(t.hidden||this.isIssueHiddenBySearchByKey(e))&&s.push(t)},this),s},n.prototype.isCollapsed=function(e){return!this.getExpandedIssueKeys().includes(e)},n.prototype.isFakeParent=function(e){return!this.data.issueByKey[e]},n.prototype.getExpandedIssueKeys=function(){var t=this;return GH.RapidBoard.State.getExpandedIssueKeys().filter(function(e){return t.data.issueByKey[e]})},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/IssueMoveController.js' */
define("jira-agile/rapid/ui/plan/issue-move-controller",["require"],function(t){"use strict";var l=t("underscore"),i=t("jquery"),r=t("jira-agile/rapid/global-events"),g=t("jira-agile/rapid/ui/plan/backlog-model"),d=t("jira-agile/rapid/ui/plan/backlog-statistics"),S=t("jira-agile/rapid/ui/plan/sprint-model"),e=(t("jira/featureflags/feature-manager"),t("jira-agile/rapid/deferred-resources-loader")),f=void 0;r.on("pre-initialization",function(){f=t("jira-agile/rapid/ui/plan/backlog-controller")});var a={confirmMove:function(t){var r=i.Deferred(),e=a.isMoveFromActiveSprints(t),n=a.isAddToActiveSprint(t);return e?GH.RemoveIssuesFromSprintDialog.constructDialog(t,r):n?a.showAddIssuesToActiveSprintDialog(t,r):r.resolve(t),r},calculateIssueMoveModel:function(e,n){var i=null,a=null,s=!1,o=!1;l.each(g.getAllModels(),function(t){var r=S.isSprintModel(t);t.getIssueList().areIssuesValid(e)&&(i=t,s=r),n&&r&&t.getSprintId()===n?(a=t,o=!0):n||r||(a=t,o=!1)});var r,u,t,c=[],p=[];return s&&!i.isFutureSprint()&&(!o||a.isFutureSprint())?(r=[],u=i.getIssueList(),l.each(e,function(t){t=u.getIssueData(t);t&&r.push(t)}),t=f.rapidViewConfig.columns,t=d.splitIssuesIntoNotDoneAndDone(r,t),c=l.map(t.notDone,function(t){return t.key}),p=l.map(t.done,function(t){return t.key})):c=e,{changes:[{currentSprint:s?i.getSprintData():null,targetSprint:o?a.getSprintData():null,issueKeys:c,doneIssueKeys:p}]}},isMoveBetweenActiveSprints:function(t){return l.some(t.changes,function(t){var r=t.currentSprint&&"FUTURE"!=t.currentSprint.state,t=t.targetSprint&&"FUTURE"!=t.targetSprint.state;return r&&t})},isMoveFromActiveSprints:function(t){return l.some(t.changes,function(t){var r=t.currentSprint&&"FUTURE"!=t.currentSprint.state,t=t.currentSprint&&t.targetSprint&&t.currentSprint.id===t.targetSprint.id;return r&&!t})},isOnlyRankOperation:function(t){return l.some(t.changes,function(t){var r=t.currentSprint&&t.targetSprint&&t.currentSprint.id===t.targetSprint.id,t=!t.currentSprint&&!t.targetSprint;return r||t})},isRankBetweenFutureAndBacklog:function(t){return l.some(t.changes,function(t){var r=!t.currentSprint||"FUTURE"===t.currentSprint.state,t=!t.targetSprint||"FUTURE"===t.targetSprint.state;return r&&t})},isMoveToBacklog:function(t){return l.some(t.changes,function(t){var r=!!t.currentSprint&&t.currentSprint.id!==g.BACKLOG_ID,t=!t.targetSprint||t.targetSprint.id===g.BACKLOG_ID;return r&&t})},isAddToActiveSprint:function(t){return l.some(t.changes,function(t){var r=t.targetSprint&&"FUTURE"!==t.targetSprint.state;return(!t.currentSprint||!t.targetSprint||t.currentSprint.id!==t.targetSprint.id)&&r})},getAllIssueKeys:function(t){var r=[];return l.each(t.changes,function(t){r.push(t.issueKeys),r.push(t.doneIssueKeys)}),l.flatten(r,!0)},showAddIssuesToActiveSprintDialog:function(t,r){GH.AddIssuesToActiveSprintDialog||GH.Dialog.dim(),e.triggerOnDemandResourceLoadWithCondition(!GH.AddIssuesToActiveSprintDialog,["wrc!gh-rapid-lwf-board-deferred"],"IssueMoveController.showAddIssuesToActiveSprintDialog",function(){GH.AddIssuesToActiveSprintDialog.showDialog(t,r)},function(){GH.Dialog.undim()})}};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogController.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-controller",["require"],function(e){"use strict";var i=e("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-dialog"),o=e("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-service"),a=e("jira-agile/rapid/ui/plan/plan-controller"),r={},s="jira-software.agility.backlog-issue-move.";return r.showDialog=function(a){o.shouldShow(a).done(function(e){e.value&&e.value.ask&&(i.render(a,r.handleConfirmMoveIssues,r.handleDoNotMoveIssues),AJS.trigger("analyticsEvent",{name:s+"show"}))})},r.handleConfirmMoveIssues=function(e){AJS.trigger("analyticsEvent",{name:s+"execute"}),i.hide(),o.moveIssues(e).done(function(){AJS.trigger("analyticsEvent",{name:s+"execute.success"}),o.setBoardEntityPropertyAsHasAlreadyPromptedUser(e),a.reload(),console.error("should have reloaded plan mode")}).fail(function(){AJS.trigger("analyticsEvent",{name:s+"execute.failure"})})},r.handleDoNotMoveIssues=function(e){AJS.trigger("analyticsEvent",{name:s+"cancel"}),i.hide(),o.setBoardEntityPropertyAsHasAlreadyPromptedUser(e)},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogService.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-service",["require"],function(r){"use strict";var t={shouldShow:function(r){return GH.Ajax.get({bareUrl:GH.Ajax.buildBareRestUrl(AJS.format("{0}/board/{1}/properties/jsw-spb-first-column-migration",GH.Ajax.PUBLIC_REST_URL_BASE,r.toString())),deferErrorHandling:!0},"jswSpbFirstColumnMigration")},moveIssues:function(r){return GH.Ajax.put({url:"/xboard/migrateFirstColumnToBacklog",data:{rapidViewId:r}})},setBoardEntityPropertyAsHasAlreadyPromptedUser:function(r){return GH.Ajax.del({bareUrl:GH.Ajax.buildBareRestUrl(AJS.format("{0}/board/{1}/properties/jsw-spb-first-column-migration",GH.Ajax.PUBLIC_REST_URL_BASE,r.toString()))})}};return t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogDialog.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-dialog",["require"],function(i){"use strict";var e=i("jquery"),o=void 0,l={addActiveClass:!1,fadeTime:0,noBind:!0,cacheContent:!0,persistent:!0},i={render:function(n,a,t){var i=e(".agility-backlog .js-sprint-container .ghx-name")[0];(o=GH.SideInlineDialog.create("move-issues-to-agility-backlog-dialog",i,function(i,e,o){i.html(GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent()).addClass("ghx-inline-dialog"),i.find("#agility-backlog-dialog-moveissues-button-confirm").click(function(){a(n)}),i.find("#agility-backlog-dialog-moveissues-button-cancel").click(function(){t(n)}),o()},l)).show()},hide:function(){o&&o.hide()}};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogDialog.soy' */
// This file was automatically generated from MoveIssuesToAgilityBacklogDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog == 'undefined') { GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog = {}; }


GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container" id="ghx-agility-move-issues-to-backlog-dialog"><h5>' + soy.$$escapeHtml('Fill your backlog with to-do\x27s') + '</h5><p>' + soy.$$escapeHtml('Want to move all issues in your board\x27s first column to the backlog?') + '</p><div class="ghx-agility-move-issues-to-backlog-dialog-buttons">' + aui.buttons.button({id: 'agility-backlog-dialog-moveissues-button-confirm', text: 'Move', type: 'primary'}) + aui.buttons.button({id: 'agility-backlog-dialog-moveissues-button-cancel', text: 'No thanks', type: 'subtle'}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent.soyTemplateName = 'GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesController.js' */
GH.LinkedPagesController={},GH.LinkedPagesController.EPIC="epic",GH.LinkedPagesController.VERSION="version",GH.LinkedPagesController.SPRINT="sprint",GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION="/plugins/createcontent/init-dialog.action",GH.LinkedPagesController._dialog=null,GH.LinkedPagesController._authenticated=!1,function(){var e=require("jira-agile/rapid/analytics-tracker"),i=require("jira/analytics/web-client"),n=require("jira/featureflags/feature-manager");GH.LinkedPagesController.isLinkedPagesAnalyticsEnabled=function(){return n.isFeatureEnabled("jira.linked-pages-controller-show-dialog.enabled")},GH.LinkedPagesController.fireLinkedPagesAnalytics=function(e,n){i.sendUIEvent({source:"sprintView",actionSubject:"button",action:"clicked",actionSubjectId:"viewLinkedPages",attributes:{entityType:e,agileMode:n}})},GH.LinkedPagesController.analytics={show:new e("gh.linkedPages.dialog.show"),count:new e("gh.linkedPages.dialog.count"),action:new e("gh.linkedPages.dialog.action")}}(),GH.LinkedPagesController._pollingConversations=!1,GH.LinkedPagesController._dialogByLinkCreationToken={},GH.LinkedPagesController.initDialogTrigger=function(e,n,i,o){o.on("click",GH.Util.wrapPreventDefault(function(){GH.LinkedPagesController._showDialog(e,n,i,o)}))},GH.LinkedPagesController._showDialog=function(n,i,o,r,a){require("jira/featureflags/feature-manager");require("jira-agile/rapid/deferred-resources-loader").handleDeferredResourceImport(!GH.LinkedPagesInlineDialog,function(){var e=new GH.LinkedPagesInlineDialog({entityType:n,agileMode:i,entityId:o,trigger:r});e.dialogOptions=_.extend({},e.dialogOptions,a),e.show(),GH.LinkedPagesController.isLinkedPagesAnalyticsEnabled()&&GH.LinkedPagesController.fireLinkedPagesAnalytics(n,i),GH.LinkedPagesController.analytics.show.trigger([i,n].join(".")),GH.LinkedPagesController._dialog=e,GH.LinkedPagesController._authenticated||(AJS.$(document).bind("applinks.auth.completion",GH.LinkedPagesController._handleAuthenticationCompleted),GH.LinkedPagesController._authenticated=!0)})},GH.LinkedPagesController.showDialogForEpic=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.EPIC),GH.LinkedPagesController.showDialogForSprint=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.SPRINT),GH.LinkedPagesController.hideCurrentDialog=function(){GH.LinkedPagesController._dialog&&GH.LinkedPagesController._dialog.hide()},GH.LinkedPagesController.getLinkedPagesForEntity=function(e,n){switch(e){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._getLinkedPagesForEpic(n);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._getLinkedPagesForSprint(n)}},GH.LinkedPagesController._getLinkedPagesForEpic=function(n){return GH.Ajax.get({url:"/epics/"+n+"/pages"},"getEpicLinkedPages").done(function(e){GH.PageIssueLinksModel.set(n,e.pages),GH.LinkedPagesController.analytics.count.trigger("epic","pages",e.pages.length)})},GH.LinkedPagesController._getLinkedPagesForSprint=function(n){return GH.Ajax.get({url:"/sprint/"+n+"/pages"},"getSprintLinkedPages").done(function(e){GH.PageIssueLinksModel.set(n,e.pages),GH.LinkedPagesController.analytics.count.trigger("sprint","pages",e.pages.length)})},GH.LinkedPagesController.startRemoteLinkCreationConversation=function(n){return GH.LinkedPagesController._ensurePolling(),GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(e){GH.LinkedPagesController._dialogByLinkCreationToken[e]=n})},GH.LinkedPagesController.removeLinkedPage=function(e,n,i){var o;switch(e){case GH.LinkedPagesController.EPIC:o=GH.Ajax.del({url:"/issuelink/"+i});break;case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:o=GH.Ajax.del({url:"/api/sprints/"+n+"/remotelink/"+i})}return o.done(function(){GH.PageIssueLinksModel.removeLink(n,i),GH.LinkedPagesController.analytics.action.trigger([e,"removeLink"].join("."))}),o},GH.LinkedPagesController.searchPages=function(e,i,n){return GH.PageSearchRequestService.search(i,n).andThen(function(e){var n=GH.PageIssueLinksModel.list(i);return e.pages=_.reject(e.pages,function(e){return _.findWhere(n,{pageId:e.id})}),GH.PagesSearchModel.set(i,e.pages),e})},GH.LinkedPagesController.addLink=function(e,n,i,o){switch(e){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._addLinkForEpic(n,i);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._addLinkForSprint(n,i,o)}},GH.LinkedPagesController._addLinkForEpic=function(n,i){return GH.Ajax.post({url:"/epics/"+n+"/pages",data:{pageId:i}},"addConfluencePageToEpic").andThen(function(e){e=e.success;return GH.PageIssueLinksModel.addLink(n,e),GH.PagesSearchModel.removePage(n,i),GH.LinkedPagesController.analytics.action.trigger("epic.addLink"),e})},GH.LinkedPagesController._addLinkForSprint=function(n,i,e){return GH.Ajax.post({url:"/sprint/"+n+"/pages",data:{pageId:i,pageTitle:e}},"addConfluencePageToSprint").andThen(function(e){e=e.success;return GH.PageIssueLinksModel.addLink(n,e),GH.PagesSearchModel.removePage(n,i),GH.LinkedPagesController.analytics.action.trigger("sprint.addLink"),e})},GH.LinkedPagesController._handleAuthenticationCompleted=function(e,n,i,o,r){var a=GH.LinkedPagesController._dialog;i&&a?a.isSearchMode()?(a.showSearch(a.getSearchQuery()),a.refresh()):a.show():GH.Notification.showWarning("Authentication with Confluence failed. Please check your credentials or Application Links configuration in Confluence.")},GH.LinkedPagesController._ensurePolling=function(){GH.LinkedPagesController._pollingConversations||(GH.Poller.addPoller("linkedPagePoller",function(){GH.Ajax.get({url:"/remoteLinkConversation/statuses",traditional:!0,data:{token:_.keys(GH.LinkedPagesController._dialogByLinkCreationToken)}},"remoteLinksConversationStatuses").done(function(e){e=_.pluck(_.where(e,{status:"REDEEMED"}),"token"),e=_.pick(GH.LinkedPagesController._dialogByLinkCreationToken,e);_.each(e,function(e,n){var i=GH.LinkedPagesController._dialog;i===e&&i.isVisible()&&i.show(),delete GH.LinkedPagesController._dialogByLinkCreationToken[n]})})}),GH.LinkedPagesController._pollingConversations=!0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/PageIssueLinksModel.js' */
GH.PageIssueLinksModel={},GH.PageIssueLinksModel.model={},GH.PageIssueLinksModel.set=function(e,s){GH.PageIssueLinksModel.model[e]=s},GH.PageIssueLinksModel.get=function(e,s){return _.find(GH.PageIssueLinksModel.model[e],function(e){return e.id===s})},GH.PageIssueLinksModel.list=function(e){return GH.PageIssueLinksModel.model[e]||[]},GH.PageIssueLinksModel.removeLink=function(e,s){s=parseInt(s,10),GH.PageIssueLinksModel.model[e]=_.reject(GH.PageIssueLinksModel.model[e],function(e){return e.id===s})},GH.PageIssueLinksModel.addLink=function(e,s){_.isArray(GH.PageIssueLinksModel.model[e])||(GH.PageIssueLinksModel.model[e]=[]),GH.PageIssueLinksModel.model[e].push(s)},GH.PageIssueLinksModel.clear=function(e){delete GH.PageIssueLinksModel.model[e]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesCommon.soy' */
// This file was automatically generated from LinkedPagesCommon.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.createPageInputs = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="' + soy.$$escapeHtml(opt_data.entityTypeParam) + '" value="' + soy.$$escapeHtml(opt_data.entityId) + '"><input type="hidden" name="applinkId" value="' + soy.$$escapeHtml(opt_data.applinkId) + '"><input type="hidden" name="agileMode" value="' + soy.$$escapeHtml(opt_data.agileMode) + '">' + ((opt_data.fallbackUrl) ? '<input type="hidden" name="fallbackUrl" value="' + soy.$$escapeHtml(opt_data.fallbackUrl) + '">' : '');
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.createPageInputs.soyTemplateName = 'GH.tpl.component.linkedpages.createPageInputs';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.soy' */
// This file was automatically generated from LinkedPagesInlineDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.renderDialogHeader = function(opt_data, opt_ignored) {
  return '<h2>' + aui.buttons.button({extraClasses: ['js-search-panel-hide', 'ghx-search-return', 'aui-button-link'], text: 'Back'}) + '<span class="js-pages-header">' + soy.$$escapeHtml('Linked pages') + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialogHeader.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialogHeader';
}


GH.tpl.component.linkedpages.renderEmptyDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-progress-indicator ghx-initial"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderEmptyDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderEmptyDialog';
}


GH.tpl.component.linkedpages.renderDialog = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-inline-dialog-container ghx-full-width js-linked-pages-panel">';
  if (opt_data.serverUnavailable) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml('The Confluence server is currently unreachable.') + '</p>';
  } else if (! opt_data.appLink) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml('No Confluence server is configured. Please check your Application Links configuration.') + '</p>';
  } else {
    output += ((opt_data.needAuthenticationApplications.length > 0) ? GH.tpl.component.linkedpages.renderAuthenticationRequest(opt_data) : '') + '<div class="ghx-embedded js-no-linked-pages ' + ((opt_data.linkedPages.length > 0) ? 'hidden' : '') + '">' + ((opt_data.canEdit) ? '<p>' + soy.$$escapeHtml('No linked pages yet.') + ' ' + ((opt_data.entityType == 'sprint') ? soy.$$filterNoAutoescape(AJS.format('Try linking meeting notes or {0}create a new page{1}.','<a class="js-create-page-link">','</a>')) : soy.$$filterNoAutoescape(AJS.format('Try linking requirements pages or {0}create a new page{1}.','<a class="js-create-page-link">','</a>'))) + '</p>' : '<p>' + soy.$$escapeHtml('No linked pages yet.') + ' ' + soy.$$escapeHtml('Edit Issue permissions are required to add pages.') + '</p>') + '</div><ul class="ghx-doco-list js-linked-pages-list">';
    var pageList61 = opt_data.linkedPages;
    var pageListLen61 = pageList61.length;
    for (var pageIndex61 = 0; pageIndex61 < pageListLen61; pageIndex61++) {
      var pageData61 = pageList61[pageIndex61];
      output += GH.tpl.component.linkedpages.renderLinkedPageListItem({page: pageData61, entityId: opt_data.entityId, canEdit: opt_data.canEdit, hidden: pageIndex61 > opt_data.initiallyShownCount - 1});
    }
    output += '</ul>';
    if (opt_data.linkedPages.length > opt_data.initiallyShownCount) {
      output += '<div class="ghx-doco-list-view-more">';
      var viewMoreText__soy72 = '' + soy.$$escapeHtml(AJS.format('{0} more\u2026',opt_data.linkedPages.length - opt_data.initiallyShownCount));
      output += aui.buttons.button({extraClasses: ['js-wiki-view-more-pages-link', 'aui-button-link'], text: viewMoreText__soy72}) + '</div>';
    }
  }
  output += '</div>' + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderPagesActions(null) : '') + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderSearchPagesPanel(null) : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialog';
}


GH.tpl.component.linkedpages.renderAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">' + soy.$$escapeHtml('Please authenticate to view more:') + '<ul>';
  var appList90 = opt_data.needAuthenticationApplications;
  var appListLen90 = appList90.length;
  for (var appIndex90 = 0; appIndex90 < appListLen90; appIndex90++) {
    var appData90 = appList90[appIndex90];
    var authenticateLink__soy91 = '<a href="' + soy.$$escapeHtml(appData90.authenticateUrl) + '" class="applink-authenticate">';
    var serverLink__soy95 = '<a href="' + soy.$$escapeHtml(appData90.applicationLink.url) + '" target="_blank">' + soy.$$escapeHtml(appData90.applicationLink.name) + '</a>';
    output += '<li>' + soy.$$filterNoAutoescape(AJS.format('{0}Authenticate{1} with {2}',authenticateLink__soy91,'</a>',serverLink__soy95)) + '</li>';
  }
  output += '</ul></span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderAuthenticationRequest';
}


GH.tpl.component.linkedpages.renderPagesActions = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-divided js-linked-pages-actions" >' + aui.buttons.button({extraClasses: ['js-link-pages-link'], text: 'Link page'}) + aui.buttons.button({extraClasses: ['js-create-page-link'], text: 'Create page'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPagesActions.soyTemplateName = 'GH.tpl.component.linkedpages.renderPagesActions';
}


GH.tpl.component.linkedpages.renderSearchPagesPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-full-width ghx-final-container js-link-page-panel"><div class="js-page-search"><form class="aui ghx-page-search-form"><input class="ghx-search aui-field check-list-field text js-search-existing-pages-input" type="text" placeholder="' + soy.$$escapeHtml('Search') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-search-small js-search-page-icon js-search-trigger ghx-clickable"></span></form></div><div class="js-entity-view-pages-search-result"></div><div class="js-entity-view-pages-searching hidden"><div class="ghx-progress-indicator ghx-initial"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchPagesPanel.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchPagesPanel';
}


GH.tpl.component.linkedpages.renderPageResults = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-search-pages-result-panel"><div class="ghx-list-suggestions js-entity-view-pages-search-no-matches ' + ((opt_data.pages.length > 0) ? 'hidden' : '') + '">' + soy.$$escapeHtml('No matches') + '</div><ul class="ghx-doco-list">';
  var pageList128 = opt_data.pages;
  var pageListLen128 = pageList128.length;
  for (var pageIndex128 = 0; pageIndex128 < pageListLen128; pageIndex128++) {
    var pageData128 = pageList128[pageIndex128];
    output += '<li class="ghx-doco-list-item ghx-doco-list-result" data-page-id="' + soy.$$escapeHtml(pageData128.id) + '"><div class="ghx-doco-list-item-text"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span><span class="ghx-name" title="' + soy.$$escapeHtml(pageData128.title) + '">' + soy.$$filterNoAutoescape(pageData128.title) + '</span><span class="ghx-sub">' + soy.$$escapeHtml(pageData128.space) + '</span></div></li>';
  }
  output += ((! opt_data.isComplete) ? '<li class="ghx-list-suggestions">' + soy.$$escapeHtml('Continue typing to refine further') + '</li>' : '') + '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPageResults.soyTemplateName = 'GH.tpl.component.linkedpages.renderPageResults';
}


GH.tpl.component.linkedpages.renderLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item ' + ((opt_data.hidden) ? ' ghx-hidden' : '') + '">' + ((opt_data.canEdit) ? '<div class="js-wiki-remove ghx-remove"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml('Remove link to this wiki page') + '" data-page-id="' + soy.$$escapeHtml(opt_data.page.id) + '" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '"></span></div><div class="js-wiki-spin ghx-remove-spin ghx-hidden"><span class="ghx-spinner"></span></div>' : '') + '<div class="ghx-doco-list-item-text">' + ((opt_data.page.permissionDenied || opt_data.page.authenticationRequired) ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml('Restricted wiki page') + '"></span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span>') + ((! opt_data.page.appLinkExists || opt_data.page.pageDeleted || opt_data.page.serverUnavailable) ? '<span class="ghx-name">' + soy.$$escapeHtml('Wiki page failed to load') + '</span>' : '<span class="ghx-name" title="' + soy.$$escapeHtml(opt_data.page.title) + '"><a target="_blank" href="' + soy.$$escapeHtml(opt_data.page.url) + '">' + soy.$$escapeHtml(opt_data.page.title) + '</a></span>') + '</div></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderStubLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item"><div class="js-wiki-spin ghx-remove-spin"><span class="ghx-spinner"></span></div><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span><span class="ghx-name"><a href="#">' + soy.$$escapeHtml(opt_data.pageTitle) + '</a></span></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderStubLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderStubLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderTrigger = function(opt_data, opt_ignored) {
  var output = '';
  var buttonText__soy194 = 'View linked pages';
  output += aui.buttons.button({extraAttributes: {title: opt_data.title}, extraClasses: ['aui-button-link', 'js-view-entity-pages', 'ghx-linked-pages-trigger'], text: buttonText__soy194});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderTrigger.soyTemplateName = 'GH.tpl.component.linkedpages.renderTrigger';
}


GH.tpl.component.linkedpages.renderSearchAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">';
  var authenticateLink__soy201 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationUrl) + '" class="applink-authenticate">';
  var serverLink__soy205 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationLinkUrl) + '" target="_blank">' + soy.$$escapeHtml(opt_data.authenticationLinkName) + '</a>';
  output += soy.$$filterNoAutoescape(AJS.format('Please {0}Authenticate{1} with {2} to perform search',authenticateLink__soy201,'</a>',serverLink__soy205)) + '</span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchAuthenticationRequest';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicController.js' */
GH.EpicController={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.EpicController.analytics=new e("gh.rapidboard.epics"),GH.EpicController.analytics2=new e("gh.rapidboard.epics","epicCount","")}(),GH.EpicController.model=void 0;var JIRAEvents=require("jira/util/events"),FeatureFlagService=require("jira/featureflags/feature-manager");GH.EpicController.init=function(){GH.EpicController.model=new GH.EpicModel,GH.EpicView.init()},GH.EpicController.getFilteredEpicKey=function(){return GH.BoardState.getPerViewValue("planSelectedEpic",null)},GH.EpicController.setFilteredEpicKey=function(e){GH.BoardState.setPerViewValue("planSelectedEpic",e)},GH.EpicController.getEpicModel=function(){return GH.EpicController.model},GH.EpicController.setEpicData=function(e){GH.EpicController.model.setData(e)},GH.EpicController.validateSelectedEpic=function(){var e=GH.EpicController.getEpicModel().getEpicList(),i=GH.EpicController.getFilteredEpicKey();GH.PlanIssueListFiltering.isNoneEpicFilterKey(i)&&0<e.getNumVisibleIssues()||e.isIssueValid(i)||(GH.EpicController.setFilteredEpicKey(void 0),GH.RapidBoard.UrlState.replaceState())},GH.EpicController.registerEpicsCount=function(e){AJS.trigger("analytics",{name:"jira-software.board.number.of.epics",data:{boardId:GH.RapidBoard.State.getRapidViewId(),epicsOnBoard:e.epics.length}})},GH.EpicController.reorderEpics=function(e,i,r){GH.EpicController.model.getEpicList().reorderIssues(e,i,r)},GH.EpicController.addIssuesToEpic=function(i,r){var t=[];_.each(r,function(e){e=GH.BacklogModel.getIssueData(e);e&&e.typeId!==GH.EpicConfig.getEpicIssueTypeId()&&(e.epic=i,t.push(e))}),GH.EpicController.addIssuesToEpicOnServer(i,r).done(function(e){GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText()?GH.Notification.showSuccess(AJS.format("Selection successfully added to the {0}",GH.RapidBoard.State.getEpicLevelName())):GH.Notification.showSuccess("Selection successfully added to the epic"),_.each(t,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"}),GH.RapidBoard.sendIssueUpdatedTrackEvent(e,[{name:GH.EpicConfig.getEpicLinkFieldId()}])}),GH.PlanController.isActive()&&(GH.BacklogController.updateEpicData(),GH.EpicController._reloadDetailsView(GH.PlanController)),GH.BacklogModel.assignSubtasksToSameEpicAsParent(r),GH.EpicController.analytics.trigger("addIssues","issueCount",r.length);var i=(FeatureFlagService.getFlagValue("odin.ec.client.integration.cbb")||"").split(",");Array.isArray(i)&&i.includes("issue-drop-in-epic")&&JIRAEvents.trigger("issueAddedToEpic",{issueIds:(t||[]).map(function(e){return(e||{}).id})})}).fail(function(){GH.BacklogController.loadData()})},GH.EpicController.addIssuesToEpicOnServer=function(e,i){return GH.Ajax.put({url:"/epics/"+e+"/add",data:{ignoreEpics:!0,issueKeys:i}})},GH.EpicController.removeIssuesFromAssociatedEpics=function(i){var r=[];if(GH.PlanController.isActive()){if(0===(r=GH.BacklogModel.removeEpicFromIssues(i)).length)return}else if(GH.WorkController.isActive()&&0===(r=GH.GridDataController.getModel().removeEpicFromIssues(i)).length)return;GH.Ajax.put({url:"/epics/remove",data:{issueKeys:i}}).done(function(e){GH.Notification.showSuccess("Selection successfully removed from the epic"),_.isEmpty(r)||_.each(r,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"})}),GH.PlanController.isActive()?(GH.BacklogController.updateEpicData(),GH.EpicController._reloadDetailsView(GH.PlanController)):GH.WorkController.isActive()&&(GH.EpicController._reloadDetailsView(GH.WorkController),"epic"==GH.GridDataController.getModel().getSwimlaneStrategy()&&GH.WorkController.reload()),GH.EpicController.analytics.trigger("removeIssues","issueCount",i.length)})},GH.EpicController.updateEpicAsDone=function(e){GH.EpicController.updateEpicField(e,GH.EpicConfig.getEpicStatusFieldId(),GH.EpicConfig.getEpicStatusDoneValueId()).done(function(){GH.EpicController.analytics.trigger("markEpicAsDone"),GH.EpicView.showEpicMarkedAsDoneMessage(),GH.EpicController.getFilteredEpicKey()===e&&(GH.EpicController.setFilteredEpicKey(null),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.replaceState()),GH.BacklogController.updateEpicData()})},GH.EpicController.updateEpicField=function(e,i,r,t,o){return GH.Ajax.put({url:"/xboard/issue/update-field.json",data:{issueIdOrKey:e,fieldId:i,newValue:r}}).done(function(e){e&&e.success&&e.success.issueId&&JIRAEvents.trigger("epicChanged",e.success.issueId),t()}).fail(o)},GH.EpicController.applyVersionFiltering=function(){var e,i;GH.VersionController.hasFilteredVersion()?(e=GH.BacklogModel.getEpicsFilteredForVersion(GH.VersionController.getFilteredVersionId()),i=GH.EpicController.getFilteredEpicKey(),_.contains(e.filtered,i)&&(GH.EpicView.deselectAllEpics(),GH.EpicController.setFilteredEpicKey(null),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.pushState()),GH.EpicView.setFilteredStyle(e.filtered)):GH.EpicController.clearVersionFiltering()},GH.EpicController.clearVersionFiltering=function(){GH.EpicView.clearFilteredStyle()},GH.EpicController._reloadDetailsView=function(e){var i=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(i.VERSION_PANEL_CHANGED)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicModel.js' */
GH.EpicModel=function(){this.epicsList=void 0,this.canEditEpics=!1,this.supportsPages=!1},GH.EpicModel.prototype.setData=function(i){i&&(this.canEditEpics=!!i.canEditEpics,this.supportsPages=!!i.supportsPages,i=i.epics||[],_.each(i,GH.EpicModel.prototype._epicPreprocessFn),this.epicsList=new GH.IssueListModel("epics",i,GH.VersionController.getVersionModel()))},GH.EpicModel.prototype._epicPreprocessFn=function(i){i.originalSummary=i.summary||"",i.originalEpicLabel=i.epicLabel||"",i.epicLabel=GH.EpicConfig.getEpicNameString(i.epicLabel,i.key)},GH.EpicModel.prototype.getEpicList=function(){return this.epicsList},GH.EpicModel.prototype.canUserEditEpics=function(){return this.canEditEpics};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicView.js' */
!function(){"use strict";var n=require("jira-agile/rapid/const/PageMode"),p=require("jira/featureflags/feature-manager"),a=require("jira-agile/browser-metrics/browser-metrics-util"),l=require("jira/util/events"),o=require("underscore");GH.EpicView={},GH.EpicView.init=function(){GH.EpicView.initializeInlineEdits(),AJS.$(document).delegate(".js-change-epic-color","click",GH.EpicView.changeEpicColor),AJS.$(document).delegate(".js-mark-epic-done","click",GH.EpicView.handleMarkEpicAsDone),AJS.$(document).on("click",".js-epic-key-link",GH.EpicView.triggerSPAForEpicLink)},GH.EpicView.colors=["ghx-label-13","ghx-label-5","ghx-label-4","ghx-label-8","ghx-label-14","ghx-label-2","ghx-label-1","ghx-label-6","ghx-label-11","ghx-label-10","ghx-label-7","ghx-label-9","ghx-label-3","ghx-label-12"],GH.EpicView.colors_new=["purple","blue","green","teal","yellow","orange","grey","dark_purple","dark_blue","dark_green","dark_teal","dark_yellow","dark_orange","dark_grey"],GH.EpicView.defaultEpicStatusContext={mismatched:!1,willAppearJql:"",wontAppearJql:""},GH.EpicView.opts={canClose:!0},GH.EpicView.dropdowns=[],GH.EpicView.shouldHidePanels=function(){return GH.RapidBoard.State.isAgilityBoard()},GH.EpicView.isbacklogDataV2Enabled=function(){return p.isFeatureEnabled("jsw.move.epics.and.versions.out.backlog.load")},GH.EpicView.show=function(){var e,i;GH.EpicView.shouldHidePanels()||(e=require("jira-agile/rapid/deferred-resources-loader"),(i=AJS.$("#ghx-epic-column")).html(GH.tpl.epic.renderShell({isEpicPanelExpanded:GH.PlanController.isEpicsColumnVisible(),canCreateIssue:GH.UserData.userConfig.canCreateIssue,epicLevelName:GH.RapidBoard.State.getEpicLevelName(),shouldShowFlexibleNomenclatureEpicText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText()})),e.handleDeferredResourceImport(!0,function(){i.find(".js-create-epic").removeClass("ghx-hidden")}),GH.EpicView.isbacklogDataV2Enabled()||GH.EpicView.renderEpics(),e.handleDeferredResourceImport(!GH.EpicQuickCreate,function(){GH.EpicQuickCreate.registerCreateEpicDialog()}))},GH.EpicView.hide=function(){AJS.$("#ghx-epic-column").empty()},GH.EpicView.updateEpics=function(){GH.EpicView.renderEpics(),GH.PlanDragAndDrop.initializeClassificationDnD()},GH.EpicView.renderEpics=function(){var e=GH.EpicController.getEpicModel(),i=AJS.$("#ghx-epic-column"),t=i.find(".ghx-classification-scrollview"),a={},c=e.getEpicList(),l=GH.EpicController.getFilteredEpicKey();o.each(c.getAllIssues(),function(e){a[e.key]="open"===GH.EpicView.getTwixieState(e.key),e.epicStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.epicStats.doneEstimate),e.epicStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.epicStats.totalEstimate),e.epicStats.isIssueCountStatistic="issueCount"===GH.BacklogModel.estimationStatistic.typeId,e.epicStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name});c={epicKeys:c.getVisibleRankables(),epics:c.getAllIssues(),isEpicExpandedByKey:a,selectedEpicKey:l,projectKey:GH.RapidBoard.projectKey,isNoneSelected:GH.PlanIssueListFiltering.isNoneEpicFilterKey(l),isAllSelected:!l,canEditEpics:e.canUserEditEpics(),canMarkAsDone:GH.EpicConfig.canMarkEpicAsDone(),canCreateIssue:GH.UserData.userConfig.canCreateIssue,colors:p.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe")?GH.EpicView.colors_new:GH.EpicView.colors,showPages:GH.BacklogModel.supportsPages(),showEstimates:GH.RapidBoard.State.isScrumBoard(),epicLevelName:GH.RapidBoard.State.getEpicLevelName(),shouldShowFlexibleNomenclatureEpicText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText(),isEpicFieldToIssueFieldMigrationEnabled:p.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe"),isMigrateEpicStringsEnabled:p.isFeatureEnabled("safe.migrate-strings-in-cbb"),isHideMarkAsDoneEnabled:p.isFeatureEnabled("safe.hide-mark-as-done-cbb"),epicStatusContext:p.isFeatureEnabled("epic-status-message-legacy-panel_bkvzm")?GH.EpicView.getEpicStatusContext(c.getAllIssues(),GH.RapidBoard.projectKey):GH.EpicView.defaultEpicStatusContext};t.html(GH.tpl.epic.renderEpics(c)),GH.PlanView.updateFixedElementPositioning(),i.find(".ghx-classification-item").click(function(e){AJS.$(e.target).closest(".js-epic-actions, .js-create-epic-issue, .js-editing-field, .js-epic-details-toggle, .js-epic-key-link, .js-view-entity-pages").length||GH.EpicView.toggleFiltering(AJS.$(this))}),i.find(".js-epic-details-toggle").click(GH.EpicView.toggleEpicDisplay),i.find(".js-epic-name").click(function(e){e.preventDefault()});var c=AJS.$(".js-epic-actions"),s=require("jira/ajs/dropdown/dropdown");o.each(c,function(e){var i="#"+AJS.$(e).attr("id").replace(/^dd-trigger-/,"dd-content-"),i=AJS.$(i),i=s.create({trigger:e,content:i,alignment:AJS.LEFT});AJS.$(i).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()}),GH.EpicView.dropdowns.push(i)}),i.find(".js-create-epic-issue").click(GH.EpicView.showCreateIssueAssociatedWithEpicDialog),i.find(".js-view-entity-pages").each(function(){var e=AJS.$(this),i=e.closest(".ghx-classification-item").attr("data-epic-key");GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,n.PLAN,i,e)}),GH.EpicView.dropdowns=o.flatten(GH.EpicView.dropdowns),GH.EpicController.applyVersionFiltering()},GH.EpicView.getEpicStatusContext=function(e,i){return{showMessage:GH.EpicView.epicStatusesMismatched(e),willAppearJql:encodeURIComponent('project = "'+i+'" AND "Epic Status" = "Done" AND statusCategory IN ("To Do", "In Progress")'),wontAppearJql:encodeURIComponent('project = "'+i+'" AND "Epic Status" = "Done" AND statusCategory IN ("Done")')}},GH.EpicView.epicStatusesMismatched=function(e){return o.some(e,function(e){return!1===e.epicStatusConsistent})},GH.EpicView.showCreateIssueAssociatedWithEpicDialog=function(e){e.preventDefault();var t=AJS.$(this).parents(".ghx-classification-item").attr("data-epic-key"),a=AJS.$(this).parents(".ghx-classification-item").find("[data-fieldname='epicLabel']").text();GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var i="addToEpicCallback";if((GH.BacklogController.registerIssueCreatedCallback(i,function(e){return GH.EpicController.addIssuesToEpicOnServer(t,o.pluck(e,"issueKey"))}),p.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&p.isFeatureEnabled("issue-create-inside-epic-backlog-trigger-point_k8gin")&&window.IssueCreate&&window.IssueCreate.Visibility)&&window.IssueCreate.Visibility.isEnabled){var c=new CustomEvent("openIssueCreateDialog",{detail:{payload:{prefilledFields:{epic:{fieldId:GH.EpicConfig.getEpicLinkFieldId(),fieldValue:t},pid:GH.RapidBoard.projectId}},windowTitle:AJS.format("Create {0}",GH.EpicConfig.getStoryIssueTypeId()),id:"create-story-dialog",triggerPointKey:"create-issue-in-epic-backlog-trigger"}});return document.dispatchEvent(c),void l.bind("QuickCreateEpic.sessionComplete",function(){GH.BacklogController.unregisterIssueCreatedCallback(i)})}c=GH.EpicQuickCreate.createCreateStoryForm();c.bind("contentRefreshed",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssue.validationError"),AJS.$(document).bind(JIRA.EpicPicker.READY_EVENT,function(e,i){i.setSelection(new AJS.ItemDescriptor({value:"key:"+t,label:a})),setTimeout(function(){i.disable()},0),AJS.$(document).bind("QuickCreateIssue.validationError",function(e){i.disable()})})});c=c.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getStoryIssueTypeId()),id:"create-story-dialog"});c.bind("Dialog.hide",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssue.validationError"),GH.BacklogController.unregisterIssueCreatedCallback(i)}),c.show()},GH.EpicView.renderError=function(){var e=AJS.$("#ghx-epic-column"),i=e.find(".ghx-classification-scrollview"),t=GH.EpicController.getFilteredEpicKey(),t={isAllSelected:!t,isNoneSelected:GH.PlanIssueListFiltering.isNoneEpicFilterKey(t),epicLevelName:GH.RapidBoard.State.getEpicLevelName(),shouldShowFlexibleNomenclatureEpicText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText()};i.html(GH.tpl.epic.renderEpicsError(t)),e.find(".ghx-classification-item:not(.ghx-classification-error)").click(function(){GH.EpicView.toggleFiltering(AJS.$(this))}),e.find(".ghx-classification-item .js-try-again").click(function(){GH.BacklogController.updateEpicData()})},GH.EpicView.hideDropdown=function(){o.each(GH.EpicView.dropdowns,function(e){e.hide()})},GH.EpicView.toggleFiltering=function(e){a.triggerBefore("before:backlogEpicFilter","backlogEpicFilter"),GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),GH.EpicView.deselectAllEpics();var i,t=e.attr("data-epic-key");GH.EpicController.getFilteredEpicKey()===t?i=null:(i=t,AJS.$("#ghx-epic-column").find(".ghx-classification-all").removeClass("ghx-selected"),e.addClass("ghx-selected")),GH.EpicController.setFilteredEpicKey(i),GH.BacklogController.updateEpicFiltering(!1),a.triggerAfter("after:backlogEpicFilter","backlogEpicFilter"),GH.RapidBoard.State.pushState()},GH.EpicView.deselectAllEpics=function(){var e=AJS.$("#ghx-epic-column");e.find(".ghx-classification-item").removeClass("ghx-selected"),e.find(".ghx-classification-all").addClass("ghx-selected")},GH.EpicView.updateEpicStats=function(){var e=AJS.$("#ghx-epic-column");AJS.$.each(e.find(".ghx-classification-item"),function(e,i){AJS.$(i).attr("data-epic-key")})},GH.EpicView.setTwixieState=function(e,i){GH.BoardState.setPerViewValue("epicTwix-"+e,i)},GH.EpicView.getTwixieState=function(e){return GH.BoardState.getPerViewValue("epicTwix-"+e,"closed")},GH.EpicView.toggleEpicDisplay=function(e){var i=AJS.$(this).parents(".ghx-classification-item");GH.EpicView.toggleEpicDisplayByElementWithAnimation(i)},GH.EpicView.toggleEpicDisplayByElement=function(e){var i=e.attr("data-epic-key");e.hasClass("ghx-open")?(e.removeClass("ghx-open").addClass("ghx-closed"),GH.EpicView.setTwixieState(i,"closed")):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.EpicView.setTwixieState(i,"open"))},GH.EpicView.toggleEpicDisplayByElementWithAnimation=function(e){var i=e.attr("data-epic-key"),t=e.find(".ghx-expanded");e.hasClass("ghx-open")?GH.RapidBoard.Animation.animateHeight(t,160,0).done(function(){e.removeClass("ghx-open").addClass("ghx-closed"),GH.EpicView.setTwixieState(i,"closed")}):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.RapidBoard.Animation.animateHeight(t,0,160).done(function(){GH.EpicView.setTwixieState(i,"open")}))},GH.EpicView.initializeInlineEdits=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-epic-label",{getViewElement:function(e){var i=AJS.$(this).parents(".js-epic-actions-list").attr("data-epic-key");return AJS.$('.ghx-classification-item[data-epic-key="'+i+'"]').find(".js-edit-epicLabel-trigger")},getData:function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return"epicLabel"===i.fieldName&&(i.maxLength=60),AJS.$(e).closest(".ghx-header").addClass("ghx-editing-name"),i.epicKey=e.parents(".ghx-classification-item").attr("data-epic-key"),i},validate:function(e){var i=e.editElement.val();return!!GH.Validation.notBlank(e.editElement,"Epic Name is required")&&(e.newValue=i,!0)},save:function(e){GH.EpicView.updateEpicLabel(e.epicKey,e.newValue),GH.RapidBoard.Util.InlineEditable.updateView(e)},renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits,postEdit:function(e){AJS.$(e.viewElement).closest(".ghx-header").removeClass("ghx-editing-name")}})},GH.EpicView.updateEpicLabel=function(e,i){var t=GH.EpicConfig.getEpicLabelFieldId(),a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(e),l=c.epicLabel,s=c.originalEpicLabel,n=c.summary,o=c.originalSummary;p.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe")?(c.summary=i,c.originalIssueSummary=i):(c.epicLabel=i,c.originalEpicLabel=i),a.updateIssue(c),GH.BacklogView.draw(),p.isFeatureEnabled("jswcloud.17347.trigger.update.to.fix.dnd")&&GH.PlanController.trigger("after:show");function r(){GH.EpicView._reloadDetailsView(GH.PlanController)}function d(){p.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe")?(c.summary=n,c.originalSummary=o):(c.epicLabel=l,c.originalEpicLabel=s),a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw(),p.isFeatureEnabled("jswcloud.17347.trigger.update.to.fix.dnd")&&GH.PlanController.trigger("after:show")}p.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe")?GH.EpicController.updateEpicField(e,"summary",i,r,d):GH.EpicController.updateEpicField(e,t,i,r,d)},GH.EpicView.changeEpicColor=function(e){var i=AJS.$(this),t=i.attr("data-color-id"),i=i.parents(".js-epic-actions-list").attr("data-epic-key");t&&i&&GH.EpicView.updateColorField(i,t)},GH.EpicView.updateColorField=function(e,i){var t=GH.EpicConfig.getEpicColorFieldId();p.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe")&&(t=GH.EpicConfig.getColorFieldId());var a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(e),l=c.epicColor;p.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe")?(l=c.color,c.color=i):c.epicColor=i,a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw(),p.isFeatureEnabled("jswcloud.17347.trigger.update.to.fix.dnd")&&GH.PlanController.trigger("after:show");GH.EpicController.updateEpicField(e,t,i,function(){GH.EpicView._reloadDetailsView(GH.PlanController)},function(){p.isFeatureEnabled("safe.migrate-epic-fields-to-issue-fields.read-path.fe")?c.color=l:c.epicColor=l,a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw(),p.isFeatureEnabled("jswcloud.17347.trigger.update.to.fix.dnd")&&GH.PlanController.trigger("after:show")})},GH.EpicView.scrollToBottom=function(){var e=AJS.$(".ghx-epic-column .ghx-classification-scrollview");e.scrollTop(e[0].scrollHeight)},GH.EpicView.handleMarkEpicAsDone=function(e){var i,t,a,c;GH.EpicConfig.canMarkEpicAsDone()&&(GH.RapidBoard.Util.InlineEditable.cancelActiveEdits(),i=AJS.$(this).parents(".js-epic-actions-list").attr("data-epic-key"),t=(a=GH.EpicController.getEpicModel().getEpicList().getIssueData(i)).epicLabel,c=a.epicStats.notDone,a="Mark as Done",c=GH.tpl.epic.renderMarkEpicAsDoneDialog({epicName:AJS.escapeHTML(String(t)),epicKey:i,numIncompleteIssues:c,rapidView:GH.RapidBoard.State.getRapidViewId(),shouldShowFlexibleNomenclatureEpicText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText(),epicLevelName:GH.RapidBoard.State.getEpicLevelName()}),(c=GH.ConfirmDialog.create("ghx-mark-epic-done-dialog",{width:450,header:a,content:c,contentEscaping:!1,onConfirmFn:function(){GH.EpicController.updateEpicAsDone(i)}})).show(),c.updateHeight())},GH.EpicView.showEpicMarkedAsDoneMessage=function(){GH.Notification.showSuccess("Epic has been marked as Done")},GH.EpicView.setFilteredStyle=function(t){AJS.$("#ghx-epic-column").find(".ghx-classification-item").removeClass("ghx-filtered").each(function(e,i){i=AJS.$(i);o.contains(t,i.attr("data-epic-key"))&&i.addClass("ghx-filtered")})},GH.EpicView.clearFilteredStyle=function(){AJS.$("#ghx-epic-column").find(".ghx-classification-item").removeClass("ghx-filtered")},GH.EpicView.showEpicPagesUpdatedMessage=function(e,i,t){JIRA.IssueNavigator.setIssueUpdatedMsg({issueMsg:t.options.issueMsg,issueId:e,issueKey:i})},GH.EpicView.renderNewEpics=function(e){var i=AJS.$("#ghx-epic-column");o.each(e,function(e){e=i.find('.ghx-classification-item[data-epic-key="'+e.issueKey+'"]');e.hasClass("ghx-open")||GH.EpicView.toggleEpicDisplayByElement(e),GH.RapidBoard.Animation.animateHeight(e,0,200,GH.RapidBoard.Animation.LONG_DURATION)})},GH.EpicView._reloadDetailsView=function(e){var i=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(i.VERSION_PANEL_CHANGED)},GH.EpicView.triggerSPAForEpicLink=function(e){e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||(e.preventDefault(),e=AJS.$(this).text(),e=GH.Ajax.CONTEXT_PATH+"/browse/"+e,GH.spa&&GH.spa.history.push(e))},GH.EpicView.hasEpicColumnContentRendered=function(){return void 0!==AJS.$(".ghx-epic-column > .ghx-classification-group")[0]}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/IssueActions.js' */
define("jira-agile/rapid/ui/plan/issue-actions",["require"],function(e){"use strict";var r,n,a=e("underscore"),i=e("jquery"),s=e("jira-agile/rapid/global-events"),t=e("jira-agile/rapid/analytics-tracker"),o=e("jira-agile/rapid/ui/plan/issue-move-controller"),u=e("jira/container-api"),c=e("jira-agile/browser-metrics/browser-metrics-util"),l=e("jira/featureflags/feature-manager"),g=e("jira/util/events");s.on("pre-initialization",function(){e("jira-agile/rapid/ui/plan/backlog-selection-controller"),r=e("jira-agile/rapid/ui/plan/backlog-controller"),n=e("jira-agile/rapid/ui/plan/plan-drag-and-drop")});var d={Analytics:{}};return d.Analytics.removeFromSprint=new t("gh.sprint.issue.remove"),d.removeIssuesFromSprint=function(e,s){a.isArray(s)||(s=[s]),GH.Ajax.get({url:"/sprint/rank/"+e+"/remove",data:{issues:s}},"removeIssuesFromActiveSprintsCheck").done(function(e){o.confirmMove(e).done(d.removeIssuesFromCurrentSprints)})},d.extractIssueIds=function(e){var s=[],r=GH.GridDataController.getModel();return e.forEach(function(e){r&&r.getIssueDataByKey(e)&&r.getIssueDataByKey(e).id&&s.push(r.getIssueDataByKey(e).id)}),s},d.removeIssuesFromCurrentSprints=function(e){var s=o.getAllIssueKeys(e);return GH.Ajax.put({url:"/sprint/rank/"+e.rapidViewId+"/remove",data:{rapidViewId:r.rapidViewData.id,idOrKeys:s}}).done(function(e){var s=e.success,r=o.getAllIssueKeys(s),e=(l.getFlagValue("odin.ec.client.integration.cbb")||"").split(",");Array.isArray(e)&&e.includes("remove-from-sprint-issues")&&(e=d.extractIssueIds(r),g.trigger("removedIssueFromSprint",{issueIds:e})),d.showSprintRankSuccessMessage(s),i(GH).trigger("issuesRemovedFromSprint",{issueKeys:r}),d.Analytics.removeFromSprint.trigger("remove","removedIssuesCount",r.length)})},d.showSprintRankSuccessMessage=function(e){o.isOnlyRankOperation(e)||o.isRankBetweenFutureAndBacklog(e)||GH.Notification.showSuccess("Selection successfully moved.")},d._createIssueKeysLinkHtml=function(e){return a.isArray(e)||(e=[e]),a.map(e,function(e){return'<a href="'+GH.Ajax.CONTEXT_PATH+"/browse/"+e+'">'+AJS.escapeHTML(String(e))+"</a>"}).join(", ")},d.sendIssuesToBottomOfSprint=function(e,s){var r=a.last(s.getIssueList().getOrder());return n.rankIssues(e,s.getId(),r,null)},d.sendIssuesToSprint=function(e,s){return n.rankIssues(e,s.getId(),null,null)},d.sendIssuesToTopOfBacklog=function(e,s){var r=a.first(s.getIssueList().getOrder());n.rankIssues(e,s.getId(),null,r)},d.sendIssuesToBottomOfBacklog=function(e,s){var r=a.last(s.getIssueList().getOrder());n.rankIssues(e,s.getId(),r,null)},d.sendIssuesToBacklog=function(e){n.rankIssues(e,null,null,null)},d.flag=function(r,e,s,n,i){return a.isArray(r)||(r=[r]),GH.Ajax.post({url:"/xboard/issue/flag/flag.json",data:{issueKeys:r,flag:e,comment:s,commentVisibility:n,commentProperty:i}}).done(function(e){var s=(l.getFlagValue("odin.ec.client.integration.cbb")||"").split(",");Array.isArray(s)&&s.includes("flag-issues")&&(s=d.extractIssueIds(r),g.trigger("flagIssueFromSprint",{issueIds:s})),c.performanceMark("flag-browser-metric-backend-response-received"),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.COMMON.ISSUE_FLAG),a.has(e.success,"errorMessages")&&GH.Notification.showWarnings(a.map(e.success.errorMessages,function(e){return{autoHideDelay:1e4,message:e,noAutoescape:!0}}),{showTitle:!0})})},d.viewInIssueNavigator=function(e){var s=GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(e.join(","));u.navigate(s,function(){location.href=s})},d.gotoLink=function(e){u.navigate(e,function(){location.href=e})},d.bulkChange=function(e){var s=GH.Ajax.CONTEXT_PATH+"/secure/GHBulkChange.jspa?issueKeys="+encodeURIComponent(e.join(","));u.navigate(s,function(){location.href=s})},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanContextMenuController.js' */
/* globals
 * GH.ContextMenu, GH.WorkContextMenuController, GH.RapidBoard.State
 */

/**
 * @module jira-agile/rapid/ui/plan/plan-context-menu-controller
 * @requires module:jquery
 * @requires module:underscore
 * @requires module:jira-agile/rapid/global-events
 * @requires module:jira-agile/rapid/analytics-tracker
 * @requires module:jira-agile/rapid/ui/plan/backlog-controller
 * @requires module:jira-agile/rapid/ui/plan/backlog-model
 * @requires module:jira-agile/rapid/ui/plan/backlog-selection-controller
 * @requires module:jira-agile/rapid/ui/plan/issue-actions
 * @requires module:jira-agile/rapid/ui/print/card-printing-controller
 */
define('jira-agile/rapid/ui/plan/plan-context-menu-controller', ['require'], function (require) {
    'use strict';

    var _ = require('underscore');
    var $ = require('jquery');
    var GlobalEvents = require('jira-agile/rapid/global-events');
    var AnalyticsTracker = require('jira-agile/rapid/analytics-tracker');
    var BacklogModel = require('jira-agile/rapid/ui/plan/backlog-model');
    var IssueActions = require('jira-agile/rapid/ui/plan/issue-actions');
    var CardPrintingController = require('jira-agile/rapid/ui/print/card-printing-controller');
    var SplitIssueAction = require('jira-agile/rapid/ui/plan/contextmenu/split-issue-action');
    var PageMode = require('jira-agile/rapid/const/PageMode');
    const PlanIssueListView = require('jira-agile/rapid/ui/plan/plan-issue-list-view');
    const BrowserMetricsUtil = require('jira-agile/browser-metrics/browser-metrics-util');
    const AnalyticsClient = require('jira/analytics/web-client');

    var BacklogController;
    var BacklogSelectionController;

    // Resolve circular dependencies
    GlobalEvents.on('pre-initialization', function() {
        BacklogController = require('jira-agile/rapid/ui/plan/backlog-controller');
        BacklogSelectionController = require('jira-agile/rapid/ui/plan/backlog-selection-controller');
    });

    var PlanContextMenuController = {};

    PlanContextMenuController.ctxMenu = null;
    PlanContextMenuController.Analytics = {};
    PlanContextMenuController.Analytics.show = new AnalyticsTracker("gh.issue.ctx.menu.show");
    PlanContextMenuController.Analytics.action = new AnalyticsTracker("gh.issue.ctx.menu.action");
    /**
     * Resolves the current issue context based on the selected issues in the BacklogSelectionController.
     * There are 2 types of context: 'active-sprint' or 'backlog'
     */
    PlanContextMenuController.resolveContext = function () {
        const selectedIssueKeys = BacklogSelectionController.getSelectedIssuesInOrder();

        // find the model for the selected issue
        const currentModel = BacklogModel.findModelWithIssue(_.first(selectedIssueKeys));
        if (!currentModel) {
            return;
        }

        // fetch the data models
        const sprintModels = BacklogModel.getSprintModels();
        const backlogModel2 = BacklogModel.getBacklogModel2();
        const hasBulkChangePermission = BacklogModel.hasBulkChangePermission;

        // get the data for the selected issues
        const issues = _.chain(currentModel.getIssueList().getAllIssues()).pick(selectedIssueKeys).values().value();

        const containsSubtasks = selectedIssueKeys.some(BacklogModel.isSubtask);

        return {
            containsSubtasks,
            singleIssue: selectedIssueKeys.length === 1,
            selectedIssues: selectedIssueKeys,
            selectedIssuesData: issues,
            sprintModels: sprintModels,
            backlogModel2: backlogModel2,
            currentModel: currentModel,
            flaggedIssuesCount: _.where(issues, {flagged: true}).length,
            hasBulkChangePermission: hasBulkChangePermission
        };
    };

    /**
     * Initializes a context menu for use as an issue context menu and shows it at the given event's coordinates
     * @param event
     */
    PlanContextMenuController.showContextMenuAt = function (event) {
        PlanContextMenuController.hideContextMenu();

        // don't open the context menu when the user clicks on a link.
        if ($(event.target).closest('a').length > 0) {
            return;
        }

        var ctx = PlanContextMenuController.resolveContext();
        var menuOptions = {
            actionGroups: PlanContextMenuController.resolveActionsForContext(ctx)
        };
        PlanContextMenuController.ctxMenu = new GH.ContextMenu(menuOptions);
        PlanContextMenuController.ctxMenu.showAt(event);

        // prevent native context menu from showing
        event.preventDefault();
        // bring focus to the window, the preventDefault action might not have brought focus to the window
        $(GH.ContextMenu.menuSelector).focus();

        PlanContextMenuController.Analytics.show.trigger(ctx.type, "selectedIssuesCount", ctx.selectedIssues.length);
    };

    /**
     * Returns an array of action group objects relevant to the given context
     * @param ctx
     */
    PlanContextMenuController.resolveActionsForContext = function (ctx) {
        const isAgility = GH.RapidBoard.State.isAgilityBoard();

        const actionGroups = [];
        const sendToActions = [];
        const issueActions = [];
        const selectedAndCollapsedSubTasks = ctx.selectedIssues.concat(
            BacklogSelectionController.getCollapsedSubTasksToSelection(ctx.selectedIssues)
        );

        if (ctx.selectedIssues.length === 0) {
            return actionGroups;
        }

        // for each open sprint, add an action
        _.each(ctx.sprintModels, function (sprintModel) {
            // skip current model
            if (sprintModel.getId() === ctx.currentModel.getId()) {
                return;
            }

            const name = sprintModel.isActiveSprint() ? "send to active sprint" : "send to future sprint";

            sendToActions.push({
                id: "ghx-issue-ctx-action-send-to-sprint-" + sprintModel.getSprintId(),
                name: name,
                label: sprintModel.getSprintData().name,
                actionFn: function () {
                    const issueAction = (ctx.containsSubtasks) ? IssueActions.sendIssuesToSprint : IssueActions.sendIssuesToBottomOfSprint;
                    issueAction(selectedAndCollapsedSubTasks, sprintModel).done(function () {
                        PlanIssueListView.expandAllAfterTransition(selectedAndCollapsedSubTasks);
                        PlanContextMenuController.Analytics.action.trigger(
                            name,
                            "selectedIssuesCount",
                            selectedAndCollapsedSubTasks.length
                        );
                    });
                }
            });
        });


        // Send to Backlog (without ranking)
        if (ctx.containsSubtasks || !BacklogModel.isRankable()) {
            const isBacklog = ctx.backlogModel2.getId() === ctx.currentModel.getId();

            if (!isBacklog) {
                sendToActions.push({
                    id: "ghx-issue-ctx-action-send-backlog",
                    name: "send to backlog",
                    label: "Backlog",
                    actionFn: function () {
                        IssueActions.sendIssuesToBacklog(selectedAndCollapsedSubTasks);
                        PlanIssueListView.expandAllAfterTransition(selectedAndCollapsedSubTasks);
                        PlanContextMenuController.Analytics.action.trigger(
                            this.name,
                            "selectedIssuesCount",
                            selectedAndCollapsedSubTasks.length
                        );
                    }
                });
            }
        // Send to top or bottom of backlog (with ranking)
        } else {
            sendToActions.push({
                id: "ghx-issue-ctx-action-send-top-backlog",
                name: "send to top of backlog",
                label: "Top of Backlog",
                actionFn: function () {
                    IssueActions.sendIssuesToTopOfBacklog(selectedAndCollapsedSubTasks, ctx.backlogModel2);
                    PlanIssueListView.expandAllAfterTransition(selectedAndCollapsedSubTasks);
                    PlanContextMenuController.Analytics.action.trigger(
                        this.name,
                        "selectedIssuesCount",
                        selectedAndCollapsedSubTasks.length
                    );
                }
            });

            sendToActions.push({
                id: "ghx-issue-ctx-action-send-bottom-backlog",
                name: "send to bottom of backlog",
                label: "Bottom of Backlog",
                actionFn: function () {
                    IssueActions.sendIssuesToBottomOfBacklog(selectedAndCollapsedSubTasks, ctx.backlogModel2);
                    PlanIssueListView.expandAllAfterTransition(selectedAndCollapsedSubTasks);
                    PlanContextMenuController.Analytics.action.trigger(
                        this.name,
                        "selectedIssuesCount",
                        selectedAndCollapsedSubTasks.length
                    );
                }
            });
        }

        actionGroups.push({
            label: "Send to",
            actions: sendToActions
        });
        const issueNavigatorUrl = createIssueNavigatorUrl(ctx.selectedIssues);
        const viewInIssueNavigatorAction = {
            id: "ghx-issue-ctx-action-view-in-navigator",
            name: "view in navigator",
            label: "View in Issue Navigator",
            href: issueNavigatorUrl,
            actionFn: function () {
                IssueActions.gotoLink(issueNavigatorUrl);
                PlanContextMenuController.Analytics.action.trigger(this.name, "selectedIssuesCount", ctx.selectedIssues.length);
            }
        };

        const bulkChangeAction = {
            id: "ghx-issue-ctx-action-bulk-change",
            name: "bulk change",
            label: "Bulk Change",
            actionFn: function () {
                IssueActions.bulkChange(ctx.selectedIssues);
                PlanContextMenuController.Analytics.action.trigger(this.name, "selectedIssuesCount", ctx.selectedIssues.length);
            }

        };

        if (ctx.singleIssue) {
            const copyIssueLinkAction = {
                id: "ghx-issue-ctx-action-copy-issue-link",
                name: "copy issue link",
                label: "Copy issue link",
                actionFn: function () {
                    GH.IssueOperationShortcuts.copyIssueLink();
                    GH.Notification.showSuccess("Issue link copied!");
                    // trigger gas v3 analytics
                    AnalyticsClient.sendUIEvent({
                        source: 'backlogScreen',
                        actionSubject: 'dropdownItem',
                        action: 'clicked',
                        actionSubjectId: 'copyIssueLink',
                        attributes: {
                            nextGenProject: false
                        }
                    });
                }
            };
            issueActions.push(copyIssueLinkAction);

            const deleteAction = {
                id: "ghx-issue-ctx-action-delete",
                name: "delete",
                label: "Delete",
                actionFn: function () {
                    // spawn delete dialog
                    GH.IssueOperationShortcuts.deleteSelectedIssue();

                    // trigger analytics
                    AJS.trigger("analytics", { name: "gh.issue.ctx.menu.action.delete" });
                }
            };
            issueActions.push(deleteAction);
        }

        let flagAndCommentAction;
        if (ctx.flaggedIssuesCount !== ctx.selectedIssues.length) {

            flagAndCommentAction = {
                id: "ghx-issue-ctx-action-flag-and-comment",
                name: "flag-and-comment",
                label: "Add flag",
                actionFn: function() {
                    BrowserMetricsUtil.triggerBefore('before:addFlagPopup');
                    GH.IssueFlagAndCommentAction.execute(ctx.selectedIssues, true, GH.BacklogController.loadData);
                    AJS.trigger("analytics", { name: "gh.issue.ctx.menu.action.flag", data: { selectedIssueCount: ctx.selectedIssues.length } });
                }
            };
        } else {
            flagAndCommentAction = {
                id: "ghx-issue-ctx-action-unflag-and-comment",
                name: "unflag-and-comment",
                label: "Remove flag",
                actionFn: function() {
                    BrowserMetricsUtil.triggerBefore('before:removeFlagPopup');
                    GH.IssueFlagAndCommentAction.execute(ctx.selectedIssues, false, GH.BacklogController.loadData);
                    AJS.trigger("analytics", { name: "gh.issue.ctx.menu.action.unflag", data: { selectedIssueCount: ctx.selectedIssues.length } });
                }
            };
        }

        issueActions.push(flagAndCommentAction);

        SplitIssueAction.appendItem(ctx, issueActions);

        if (!ctx.singleIssue && !isAgility) {
            issueActions.push(viewInIssueNavigatorAction);
        }

        if (ctx.hasBulkChangePermission && !ctx.singleIssue && !isAgility) {
            issueActions.push(bulkChangeAction);
        }

        if (ctx.selectedIssues.length > 0 && !isAgility) {
            const printCardsAction = {
                id: "ghx-issue-ctx-action-print-cards",
                name: "print cards",
                label: AJS.format("Print selected {0,choice,1# card|1\u003c cards}", ctx.selectedIssues.length),
                actionFn: function () {
                    CardPrintingController.printSelectedIssues(prepareDataToPrintSelectedIssues(ctx.selectedIssues));
                    AnalyticsClient.sendUIEvent({
                        source: 'backlogScreen',
                        actionSubject: 'dropdownItem',
                        action: 'clicked',
                        actionSubjectId: 'printCards',
                        attributes: {
                            selectedIssuesCount: ctx.selectedIssues.length,
                            boardType: GH.RapidBoard.State?.getBoardType(),
                        }
                    });
                }
            };
            issueActions.push(printCardsAction);
        }

        if (issueActions.length > 0) {
            actionGroups.push({
                label: "Other actions",
                actions: issueActions
            });
        }

        return actionGroups;
    };

    function createIssueNavigatorUrl(issueKeys) {
        return GH.Ajax.CONTEXT_PATH + "/secure/GHViewInNavigator.jspa?issueKeys=" + (encodeURIComponent(issueKeys.join(",")));
    }

    function prepareDataToPrintSelectedIssues(issueKeys) {
        const issuesToPrint = [];

        // order of issues to be printed obeys the order of issue keys provided
        _.each(issueKeys, function(key) {
            // search for this issue in list of sprints, stop at the first found sprint
            const issue = BacklogModel.getIssueData(key);
            if (issue) {
                issuesToPrint.push(issue);
            }
        });

        return {
            issues: issuesToPrint,
            epics: BacklogController.getEpicMap(),
            viewMode: PageMode.PLAN,
            boardType: GH.RapidBoard.State.getBoardType()
        };
    }

    PlanContextMenuController.hideContextMenu = function () {
        if (PlanContextMenuController.ctxMenu != null) {
            PlanContextMenuController.ctxMenu.hide();
            PlanContextMenuController.ctxMenu = null;
        }
    };

    return PlanContextMenuController;
});
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ops/RankController.js' */
(function () {

    GH.RankController = {};
    const JIRAEvents = require('jira/util/events');
    const FeatureFlagManager = require('jira/featureflags/feature-manager');

    /**
     * Issue ranking.
     */
    GH.RankController.rankIssues = function (customFieldId, issueKeys, nextIssueKey, prevIssueKey, settings) {
        settings = settings || {};
        var data = {
            issueKeys: issueKeys,
            customFieldId: customFieldId
        };
        var op;

        if (prevIssueKey) {
            op = 'after';
            if (_.isNumber(prevIssueKey)) {
                data['rankAfterRankable'] = {
                    type: 'sprintmarker',
                    id: prevIssueKey
                };
            } else {
                data['rankAfterKey'] = prevIssueKey;
            }
        } else {
            op = 'before';
            if (_.isNumber(nextIssueKey)) {
                data['rankBeforeRankable'] = {
                    type: 'sprintmarker',
                    id: nextIssueKey
                };
            } else if (nextIssueKey) {
                data['rankBeforeKey'] = nextIssueKey;
            } else {
                // no operation
                return AJS.$.Deferred().resolve().promise();
            }
        }

        var newSettings = _.extend(settings, {
            url: '/api/rank/' + op,
            data: data
        });

        return GH.Ajax.put(newSettings).promise();
    };

    GH.RankController.rankEpics = function (customFieldId, epicId, nextEpicId, prevEpicId, settings) {
        if (!prevEpicId && !nextEpicId) {
            return AJS.$.Deferred().resolve().promise();
        }

        var data = {
            rankCustomFieldId: customFieldId
        };

        if (prevEpicId) {
            data.rankAfterEpic = prevEpicId;
        } else {
            data.rankBeforeEpic = nextEpicId;
        }

        var newSettings = _.extend(settings || {}, {
            bareUrl: GH.Ajax.buildPublicRestUrl('epic/' + epicId + '/rank'),
            data: data
        });

        return GH.Ajax.put(newSettings).promise();
    };

    /**
     * Adds/removes issues from a future/active sprint and ranks issues at the same time
     *
     * @param sprintId the id of the sprint, null for ranking the issues to the backlog (thus removing the issues from any
     * future/active sprint)
     */
    GH.RankController.sprintRankIssues = function (customFieldId, issueKeys, sprintId, nextIssueKey, prevIssueKey, settings, requireReorder, prevSprintID) {
        const BacklogModel = require('jira-agile/rapid/ui/plan/backlog-model');


        settings = settings || {};
        var data = {
            idOrKeys: issueKeys,
            customFieldId: customFieldId,
            rapidViewId: GH.RapidBoard.State.getRapidViewId(),
            calculateNewIssuesOrder: requireReorder
        };
        if (sprintId && sprintId !== BacklogModel.BACKLOG_ID) {
            data.sprintId = sprintId;
            data.addToBacklog = false;
        } else {
            data.sprintId = null;
            data.addToBacklog = true;
        }
        if (nextIssueKey) {
            data.idOrKeyBefore = nextIssueKey;
        }
        if (prevIssueKey) {
            data.idOrKeyAfter = prevIssueKey;
        }

        var newSettings = _.extend(settings, {
            url: '/sprint/rank',
            data: data
        });

    return GH.Ajax.put(newSettings)
      .promise()
      .then((data) => {
        const experiences = (
          FeatureFlagManager.getFlagValue("odin.ec.client.integration.cbb") ||
          ""
        ).split(",");
        if (Array.isArray(experiences) && experiences.includes("rank-issues")) {
                try {
            if (
              data?.success?.rankableChanges?.length > 0 &&
              data.success.rankableChanges[0].issueId
            ) {
                            let changes = data.success.rankableChanges;
              JIRAEvents.trigger("issueRankChanged", {
                issueIds: changes.map((item) => item.issueId),
              });
                        }
          } catch (e) {
            const AnalyticsClient = require("jira/analytics/web-client");
                    AnalyticsClient.sendTrackEvent({
              source: "backlogScreen",
              action: "mutated",
              actionSubject: "issue",
                        attributes: {
                errorMsg: "FAILED_ISSUE_RANK",
                errorDetails: e?.toString(),
                            error: true,
                scenario: "issueRankChanged",
              },
                    });
                }
            }
        });
    };

    /**
     * @returns the first rankResult that contains an error
     */
    GH.RankController.getErrorRankResultFromResponse = function (response) {
        // process a response
        return response.isSuccess() && _.find(response.success.rankableChanges, function (rankResult) {
            return rankResult.errors && rankResult.errors.length > 0;
        });
    };
}());
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/LegacyPlanNamespaces.js' */
AJS.namespace("GH.BacklogController",null,require("jira-agile/rapid/ui/plan/backlog-controller")),AJS.namespace("GH.BacklogModel",null,require("jira-agile/rapid/ui/plan/backlog-model")),AJS.namespace("GH.BacklogModel2",null,require("jira-agile/rapid/ui/plan/backlog-model2")),AJS.namespace("GH.BacklogSelectionController",null,require("jira-agile/rapid/ui/plan/backlog-selection-controller")),AJS.namespace("GH.BacklogStatistics",null,require("jira-agile/rapid/ui/plan/backlog-statistics")),AJS.namespace("GH.BacklogView",null,require("jira-agile/rapid/ui/plan/BacklogView")),AJS.namespace("GH.IssueActions",null,require("jira-agile/rapid/ui/plan/issue-actions")),AJS.namespace("GH.IssueListModel",null,require("jira-agile/rapid/ui/plan/issue-list-model")),AJS.namespace("GH.IssueMoveController",null,require("jira-agile/rapid/ui/plan/issue-move-controller")),AJS.namespace("GH.PlanContextMenuController",null,require("jira-agile/rapid/ui/plan/plan-context-menu-controller")),AJS.namespace("GH.PlanController",null,require("jira-agile/rapid/ui/plan/plan-controller")),AJS.namespace("GH.PlanControls",null,require("jira-agile/rapid/ui/plan/plan-controls")),AJS.namespace("GH.PlanDragAndDrop",null,require("jira-agile/rapid/ui/plan/plan-drag-and-drop")),AJS.namespace("GH.PlanIssueListFiltering",null,require("jira-agile/rapid/ui/plan/plan-issue-list-filtering")),AJS.namespace("GH.PlanIssueListView",null,require("jira-agile/rapid/ui/plan/plan-issue-list-view")),AJS.namespace("GH.PlanKBShortcuts",null,require("jira-agile/rapid/ui/plan/plan-kb-shortcuts")),AJS.namespace("GH.PlanRankController",null,require("jira-agile/rapid/ui/plan/plan-rank-controller")),AJS.namespace("GH.PlanUrlState",null,require("jira-agile/rapid/ui/plan/plan-url-state")),AJS.namespace("GH.PlanView",null,require("jira-agile/rapid/ui/plan/plan-view")),AJS.namespace("GH.SprintBacklogController",null,require("jira-agile/rapid/ui/plan/sprint-backlog-controller")),AJS.namespace("GH.SprintBacklogView",null,require("jira-agile/rapid/ui/plan/sprint-backlog-view")),AJS.namespace("GH.SprintController",null,require("jira-agile/rapid/ui/plan/sprint-controller")),AJS.namespace("GH.SprintModel",null,require("jira-agile/rapid/ui/plan/sprint-model")),AJS.namespace("GH.SprintView",null,require("jira-agile/rapid/ui/plan/sprint-view")),AJS.namespace("GH.SprintActions",null,require("jira-agile/rapid/ui/component/sprintactions/sprint-actions")),GH.sprintActions=new GH.SprintActions;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/configuration/DeleteRapidViewDialog.js' */
GH.RapidBoard.DeleteDialog={},GH.RapidBoard.DeleteDialog.showDeleteDialog=function(a,e,i,t,d){GH.RapidBoard.DeleteDialog.AnalyticsClient=require("jira/analytics/web-client");var r=GH.Dialog.create({width:500,height:150,id:"ghx-rapidview-delete"}),l="true"===t?"Agility":"true"===i?"Scrum":"Kanban";r.addPanel("","panel"),r.addButton("Delete",function(){r.disableControls(),r.dispose(),GH.RapidBoard.DeleteDialog.delete(a,e,l,d)},"aui-button aui-button-primary"),GH.Dialog.addCancelButton(r);var n="Delete board",o=GH.tpl.deleterapidviewdialog.renderDefault(),p="Cannot delete board";"true"===i?(r.show(),GH.RapidBoard.DeleteDialog.showSpinner(r),GH.RapidBoard.DeleteDialog.getAllSprints(a).done(function(e){var e=e.values.filter(function(e){return"active"===e.state});0<e.length?(e=GH.tpl.deleterapidviewdialog.renderActiveSprints({activeSprints:e,rapidViewId:a}),GH.RapidBoard.DeleteDialog.render(r,p,e,!0)):GH.RapidBoard.DeleteDialog.render(r,n,o,!1)}).fail(function(){GH.RapidBoard.DeleteDialog.hideSpinner(r),GH.RapidBoard.DeleteDialog.render(r,p,null,!0)})):(GH.RapidBoard.DeleteDialog.render(r,n,o,!1),r.show()),AJS.$("#"+r.id).find(".dialog-button-panel .button-panel-cancel-link").focus(),GH.RapidBoard.DeleteDialog.AnalyticsClient.sendScreenEvent("deleteBoardModal",null,{boardType:l})},GH.RapidBoard.DeleteDialog.delete=function(a,i,t,d){GH.Ajax.del({url:"/rapidview/"+a}).done(function(e){GH.RapidBoard.DeleteDialog.handleSuccess(a,i,t,d)})},GH.RapidBoard.DeleteDialog.handleSuccess=function(e,a,i,t){AJS.$(GH).trigger("ghx.rapidview.deleted",{rapidViewId:e,rapidViewName:a,message:AJS.format("Successfully deleted board \u003cstrong\u003e{0}\u003c/strong\u003e",AJS.escapeHTML(String(a)))});e={objectType:"board",objectId:e,attributes:{boardId:e,boardType:i},action:"deleted",actionSubject:"board",actionSubjectId:e,source:"deleteBoardModal"};t&&(e.containerType=t),GH.RapidBoard.DeleteDialog.AnalyticsClient.sendTrackEvent(e)},GH.RapidBoard.DeleteDialog.getAllSprints=function(e){return GH.Ajax.get({bareUrl:GH.Ajax.buildPublicRestUrl("/board/"+e+"/sprint")},"getAllSprintsForBoard")},GH.RapidBoard.DeleteDialog.showSpinner=function(e){e.getCurrentPanel().html(GH.tpl.deleterapidviewdialog.renderSpinner())},GH.RapidBoard.DeleteDialog.hideSpinner=function(e){e.getCurrentPanel().body.find(".ghx-spinner").hide()},GH.RapidBoard.DeleteDialog.render=function(e,a,i,t){e.addHeader(a),i&&(e.getCurrentPanel().html(i),e.updateHeight()),t&&e.disableControls()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/configuration/DeleteRapidViewDialog.soy' */
// This file was automatically generated from DeleteRapidViewDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.deleterapidviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.deleterapidviewdialog == 'undefined') { GH.tpl.deleterapidviewdialog = {}; }


GH.tpl.deleterapidviewdialog.renderDefault = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Are you sure you want to delete this board? You\x27ll have to recreate it if you change your mind.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderDefault.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderDefault';
}


GH.tpl.deleterapidviewdialog.renderActiveSprints = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml(AJS.format('This board contains {0,choice,1#an|1\x3c} active {0,choice,1#sprint|1\x3csprints}:',opt_data.activeSprints.length)) + '</p><ul class="delete-rapid-view-active-sprints">';
  var sprintList10 = opt_data.activeSprints;
  var sprintListLen10 = sprintList10.length;
  for (var sprintIndex10 = 0; sprintIndex10 < sprintListLen10; sprintIndex10++) {
    var sprintData10 = sprintList10[sprintIndex10];
    output += '<li><a href="' + soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&sprint=' + soy.$$escapeHtml(sprintData10.id) + '" target="_blank">' + soy.$$escapeHtml(sprintData10.name) + '</a></li>';
  }
  output += '</ul><p>' + soy.$$escapeHtml(AJS.format('Close or delete the {0,choice,1#sprint|1\x3csprints} first, so you don\x27\x27t lose any work.',opt_data.activeSprints.length)) + '</p><p><em>' + soy.$$escapeHtml('Need guidance? See') + ' <a href="https://confluence.atlassian.com/jirasoftwarecloud/running-sprints-in-a-scrum-project-764478111.html">Running sprints in a scrum project</a>.</em></p>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderActiveSprints.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderActiveSprints';
}


GH.tpl.deleterapidviewdialog.renderSpinner = function(opt_data, opt_ignored) {
  return '<div id="ghx-spinner-wrapper"><div class="ghx-spinner"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderSpinner.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderSpinner';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/QuickEdit.js' */
GH.RapidBoard.QuickEdit={},GH.RapidBoard.QuickEdit.fieldChanges={},GH.RapidBoard.QuickEdit.init=function(){AJS.$(AJS).unbind("QuickEdit.sessionComplete"),AJS.$(AJS).bind("QuickEdit.sessionComplete",function(){JIRA&&JIRA.IssueNavigator&&JIRA.IssueNavigator.setIssueUpdatedMsg&&JIRA.IssueNavigator.setIssueUpdatedMsg(),GH.Notification.showIssueMessage(),GH.RapidBoard.State.isDetailsViewPlanOpened()&&AJS.$("#ghx-issue-fragment").trigger("refresh-backlog-issue",{issueKey:GH.DetailsView.getSelectedIssueKey()}),AJS.$(GH).trigger("issueUpdated",{issueId:GH.IssueOperationShortcuts.getSelectedIssueId(),source:"quickEdit",fieldChanges:GH.RapidBoard.QuickEdit.fieldChanges}),GH.RapidBoard.QuickEdit.fieldChanges={},GH.IssueOperationShortcuts.clearOverrideSelectedIssue()}),JIRA.bind("Dialog.hide",function(e,i,s){"edit-issue-dialog"!==i.attr("id")||s!==JIRA.Dialog.HIDE_REASON.cancel&&s!==JIRA.Dialog.HIDE_REASON.escape||(GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.RapidBoard.QuickEdit.fieldChanges={})}),AJS.$(GH).bind("QuickEdit.fieldChange",function(e,i){GH.RapidBoard.QuickEdit.fieldChanges[i.fieldId]=i.fieldChangeData}),JIRA&&JIRA.Dialog&&JIRA.Dialog.shouldShowIssueKeyInTitle&&(JIRA.Dialog.shouldShowIssueKeyInTitle=function(){return!0})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/QuickCreate.js' */
GH.RapidBoard.QuickCreate={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.QuickCreate.analytics=new e("gh.quickcreate")}(),GH.RapidBoard.QuickCreate.init=function(){var e=require("jira/container-api"),s=require("jira/util/top-same-origin-window");function i(i){return function(e,s){AJS.$(GH).trigger("issueCreated",{issues:s,isSubtask:i});s=_.pluck(s,"issueKey");GH.RapidBoard.QuickCreate.analytics.trigger("create",s)}}[window.JIRA,e.getIsIframe()&&s(window).JIRA].filter(Boolean).forEach(function(e){e.unbind("QuickCreateIssue.sessionComplete"),e.bind("QuickCreateIssue.sessionComplete",i(!1)),e.unbind("QuickCreateSubtask.sessionComplete"),e.bind("QuickCreateSubtask.sessionComplete",i(!0)),e.unbind("QuickCreateEpic.sessionComplete"),e.bind("QuickCreateEpic.sessionComplete",i(!1))})},GH.RapidBoard.QuickCreate.showCreatedIssuesMessage=function(e,s){var i,t=GH.EpicConfig.getEpicIssueTypeId(),a=GH.SprintConfig.getSprintFieldId(),n={issues:e.issues,isSubtask:!!e.isSubtask,isRankable:GH.BacklogModel.isRankable()||GH.RankingModel.isRankable()};s&&(i=_.filter(e.issues,function(e){return e.createdIssueDetails&&e.createdIssueDetails.fields.issuetype.id!==t}),e=!_.find(e.issues,function(e){return!(!e.createdIssueDetails||!e.createdIssueDetails.fields[a])&&0<e.createdIssueDetails.fields[a].length}),n=_.extend(n,{isWorkMode:!0,issuesExcludingEpics:i,shouldShowAddToSprints:e},s)),GH.Notification.showSuccess(GH.tpl.quickcreate.renderFilteredIssuesSuccess(n),{timeout:1e4})},GH.RapidBoard.QuickCreate.showCreatedIssuesMessageNew=function(e,s){var i,t,a,n=require("jira-agile/rapid/ui/gic-success-flag/api"),r=GH.EpicConfig.getEpicIssueTypeId(),u=GH.SprintConfig.getSprintFieldId(),c=GH.WorkController.activeFilters,d=e.invalidIssueKeys,o=GH.RapidViewConfig.kanPlanEnabled,c=c&&(c.assigneeList&&0<c.assigneeList.length||c.issueTypeList&&0<c.issueTypeList.length||c.searchText&&0<c.searchText.length)||0<GH.WorkControls.quickfilters.getActiveQuickFilters().length||0<GH.WorkControls.sprintfilters.getActiveSprintFilters().length,l={issues:e.issues,invalidIssuesKeys:d,isSubtask:!!e.isSubtask,isRankable:GH.BacklogModel.isRankable()||GH.RankingModel.isRankable(),boardType:GH.RapidBoard.State.getBoardType(),kanbanBacklogEnabled:o,isFiltered:c};s&&(c=_.filter(e.issues,function(e){return e.createdIssueDetails&&e.createdIssueDetails.fields.issuetype.id!==r}),i=[],_.forEach(e.issues,function(e){e.createdIssueDetails&&!e.createdIssueDetails.fields[u]&&e.createdIssueDetails.fields.issuetype.id!==r&&i.push(e)}),t=[],o&&(a=GH.RapidViewConfig.getKanPlanColumnStatusIds(),_.forEach(e.issues,function(e){e.createdIssueDetails&&e.createdIssueDetails.fields.issuetype.id!==r&&_.contains(a,e.createdIssueDetails.fields.status.id)&&t.push(e)})),l=_.extend(l,{isWorkMode:!0,issuesExcludingEpics:c,issuesWithNoSprint:i,kanbanIssuesInBacklog:t},s)),n.then(function(e){e.renderSuccessFlag(l)})},GH.RapidBoard.QuickCreate._getPath=function(){return window.location.pathname},GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage=function(e){GH.Notification.showSuccess(GH.tpl.quickcreate.renderSubtasksAddedMessage({issues:e.issues}),{timeout:1e4})},GH.RapidBoard.QuickCreate.showCreatedEpicsMessage=function(e,s){GH.Notification.showSuccess(GH.tpl.quickcreate.renderEpicsAddedMessage({isVisible:s,epics:e.issues}),{timeout:1e4})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/QuickCreate.soy' */
// This file was automatically generated from QuickCreate.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.quickcreate.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.quickcreate == 'undefined') { GH.tpl.quickcreate = {}; }


GH.tpl.quickcreate.renderFilteredIssuesSuccess = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy3 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  var sprintHtml__soy6 = '' + ((opt_data.issuesMatch && opt_data.canManageSprints && opt_data.issuesExcludingEpics.length > 0 && opt_data.isRankable) ? GH.tpl.quickcreate.sprintHtml({sprints: opt_data.sprints, issues: opt_data.issuesExcludingEpics}) : '');
  output += (opt_data.isSubtask) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3)) : (opt_data.isWorkMode) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3)) + ((opt_data.shouldShowAddToSprints) ? ' ' + soy.$$filterNoAutoescape(sprintHtml__soy6) : '') : soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderFilteredIssuesSuccess.soyTemplateName = 'GH.tpl.quickcreate.renderFilteredIssuesSuccess';
}


GH.tpl.quickcreate.issueLinksHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueList28 = opt_data.issues;
  var issueListLen28 = issueList28.length;
  for (var issueIndex28 = 0; issueIndex28 < issueListLen28; issueIndex28++) {
    var issueData28 = issueList28[issueIndex28];
    output += '<a class="js-issue-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData28.issueKey) + '">' + soy.$$escapeHtml(issueData28.issueKey) + '</a>' + ((! (issueIndex28 == issueListLen28 - 1)) ? ', ' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueLinksHtml.soyTemplateName = 'GH.tpl.quickcreate.issueLinksHtml';
}


GH.tpl.quickcreate.issueKeysAttribute = function(opt_data, opt_ignored) {
  var output = '';
  var issueList41 = opt_data.issues;
  var issueListLen41 = issueList41.length;
  for (var issueIndex41 = 0; issueIndex41 < issueListLen41; issueIndex41++) {
    var issueData41 = issueList41[issueIndex41];
    output += soy.$$escapeHtml(issueData41.issueKey) + ((! (issueIndex41 == issueListLen41 - 1)) ? ',' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueKeysAttribute.soyTemplateName = 'GH.tpl.quickcreate.issueKeysAttribute';
}


GH.tpl.quickcreate.sprintHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeys__soy48 = '' + GH.tpl.quickcreate.issueKeysAttribute(opt_data);
  if (issueKeys__soy48.length > 0) {
    var sprintList53 = opt_data.sprints;
    var sprintListLen53 = sprintList53.length;
    for (var sprintIndex53 = 0; sprintIndex53 < sprintListLen53; sprintIndex53++) {
      var sprintData53 = sprintList53[sprintIndex53];
      output += '<a class="js-add-new-issue-to-sprint" data-issue-keys="' + soy.$$escapeHtml(issueKeys__soy48) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData53.id) + '">' + soy.$$escapeHtml(AJS.format('Add {0,choice,1# |1\x3call} to {1}',opt_data.issues.length,sprintData53.name)) + '</a> ' + ((! (sprintIndex53 == sprintListLen53 - 1)) ? '| ' : '');
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.sprintHtml.soyTemplateName = 'GH.tpl.quickcreate.sprintHtml';
}


GH.tpl.quickcreate.renderSubtasksAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy66 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy66));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderSubtasksAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderSubtasksAddedMessage';
}


GH.tpl.quickcreate.renderEpicsAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy72 = '' + GH.tpl.quickcreate.issueLinksHtml({issues: opt_data.epics});
  output += (opt_data.isVisible) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created.',opt_data.epics.length,issueLinksHtml__soy72)) : soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.epics.length,issueLinksHtml__soy72));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderEpicsAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderEpicsAddedMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanConvertDialog.js' */
var _createClass=function(){function t(n,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,a,e){return a&&t(n.prototype,a),e&&t(n,e),n}}();function _classCallCheck(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}define("jira-agile/rapid/ui/kanplan/KanPlanConvertDialog",["jira-agile/rapid/ui/kanplan/kan-plan-feature-service","jira-agile/rapid/events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/SPConfigController"],function(i,n,a,r){var e=(_createClass(o,[{key:"setRapidViewId",value:function(n){this.rapidViewId=n}},{key:"setColumnName",value:function(n){this.columnName=n}},{key:"show",value:function(){var n,a=this,e=o.Analytics.cancel,t=(e={callback:function(){i.autoConvertKanPlan(a.rapidViewId).done(function(){a.trigger(o.CONVERT_SUCCESS)}).fail(t.stopAction.bind(t)),o.Analytics.confirm()},secondaryCallback:function(){o.Analytics.configure(),r.openConfig("columns"),t.remove()},cancelCallback:e,columnName:this.columnName},(n=GH.Dialog.create({width:600,height:360,id:"ghx-kanplan-convert",onCancelFn:e.cancelCallback})).startAction=function(n){this.disableControls(),this.showSpinner(),_.isFunction(n)&&n()},n.stopAction=function(){this.enableControls(),this.hideSpinner()},n.addHeader("Kanban backlog"),n.addPanel("","panel"),n.getCurrentPanel().html(GH.tpl.kanplan.convertDialog({columnName:e.columnName})),n.addButton("Let me choose",n.startAction.bind(n,e.secondaryCallback),"aui-button"),n.addButton("Yes, use this column",n.startAction.bind(n,e.callback),"aui-button aui-button-primary"),n.addCancel("Cancel",function(){return n.cancel(n)}),n);t.show()}}]),o);function o(){_classCallCheck(this,o),new n(this)}e.CONVERT_SUCCESS="kanplan.convert.success";var t=new a("jira-software.kanplan.onboarding.convert");return e.Analytics={confirm:function(){return t.trigger("confirm")},configure:function(){return t.trigger("configure")},cancel:function(){return t.trigger("cancel")}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanConvertDialog.soy' */
// This file was automatically generated from KanPlanConvertDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }


GH.tpl.kanplan.convertDialog = function(opt_data, opt_ignored) {
  return '<div><div class="ghx-kanban-convert-image"></div><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('The Kanban backlog gives you a bigger space to plan work for your team. To enable, we\x27\x27ll move your \x3cstrong\x3e{0}\x3c/strong\x3e column to the new view. Is this the right column?',typeof (opt_data.columnName) === 'number' ? opt_data.columnName : soy.$$escapeHtml(opt_data.columnName)))) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.convertDialog.soyTemplateName = 'GH.tpl.kanplan.convertDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanAcknowledge.js' */
define("jira-agile/rapid/ui/kanplan/kanplan-acknowledge",["require"],function(){"use strict";var n=require("underscore"),a=require("jquery"),o=require("jira-agile/rapid/const/PageMode"),r={},e=require("jira-agile/rapid/ui/kanplan/kan-plan-feature-service"),d={},i="kanplan.acknowledge.display",l=null;r.init=function(){l=t()};var t=function(){d=GH.storage.get(i);var e=null;return n.isNull(d)?(e=GH.Ajax.get({url:"/xboard/plan/kanban/acknowledgeDisplay"})).done(function(e){d=e,GH.storage.put(i,e)}):e=a.Deferred().resolve(),e};return r.show=function(){r.hide(),l&&l.done(function(){var e;r.canShowAcknowledge()&&(e=void 0,GH.RapidBoard.State.isWorkMode()?(e=a(GH.tpl.kanplan.kanplanacknowledge.renderWorkMode())).find(".aui-button-primary").on("click",function(){r.close().always(function(){GH.RapidBoard.ViewController.setMode(o.PLAN)})}):e=a(GH.tpl.kanplan.kanplanacknowledge.renderPlanMode({learnMoreURL:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+your+Kanban+backlog","isLocal":false}.url})),e.find(".ghx-ack-close").on("click",r.close),a("#gh").prepend(e))})},r.canShowAcknowledge=function(){return!!e.shouldShowKanbanBacklog()&&(GH.RapidBoard.State.isWorkMode()?!d.isClosedOnWorkMode:!d.isClosedOnPlanMode)},r.hide=function(){a("#gh").find(".ghx-kanplan-ack").remove(),GH.RapidBoard.ViewController.handleResizeEvent()},r.close=function(){var e=GH.Ajax.post({url:"/xboard/plan/kanban/closeAcknowledge?mode="+GH.RapidBoard.State.data.mode});return e.done(function(){GH.RapidBoard.State.isWorkMode()?d.isClosedOnWorkMode=!0:d.isClosedOnPlanMode=!0,GH.storage.put(i,d),r.hide()}),e},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanAcknowledge.soy' */
// This file was automatically generated from KanPlanAcknowledge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.kanplanacknowledge.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.kanplanacknowledge == 'undefined') { GH.tpl.kanplan.kanplanacknowledge = {}; }


GH.tpl.kanplan.kanplanacknowledge.renderWorkMode = function(opt_data, opt_ignored) {
  return '<div class="ghx-kanplan-ack"><div class="ghx-kanplan-ack-container ghx-kanplan-ack-workmode"><div class="ghx-ack-close-button ghx-ack-close"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close acknowledge') + '</span></div><h2>' + soy.$$escapeHtml('Your Kanban board simplified') + '</h2><p>' + soy.$$filterNoAutoescape(AJS.format('You now have a Kanban backlog, where you get more space to plan your team\x27\x27s work. With this, your Kanban board is now a distraction-free zone for your work-in-progress.','<b>','</b>','<b>','</b>')) + '</p><div class="ghx-button-container"><button class="aui-button aui-button-primary">' + soy.$$escapeHtml('Take me there') + '</button><a href="#" class="ghx-ack-close">' + soy.$$escapeHtml('Not now') + '</a></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.kanplanacknowledge.renderWorkMode.soyTemplateName = 'GH.tpl.kanplan.kanplanacknowledge.renderWorkMode';
}


GH.tpl.kanplan.kanplanacknowledge.renderPlanMode = function(opt_data, opt_ignored) {
  return '<div class="ghx-kanplan-ack"><div class="ghx-kanplan-ack-container ghx-kanplan-ack-planmode"><div class="ghx-ack-close-button ghx-ack-close"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close acknowledge') + '</span></div><h2>' + soy.$$escapeHtml('Your bigger and better Backlog') + '</h2><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('You now have a dedicated backlog to create, prioritize, and select work for development. Meanwhile, your Kanban board is now a distraction-free zone for your work-in-progress.')) + '</p><div class="ghx-button-container"><button class="aui-button aui-button-primary ghx-ack-close">' + soy.$$escapeHtml('OK, got it') + '</button><a target="_blank" href="' + soy.$$escapeHtml(opt_data.learnMoreURL) + '">' + soy.$$escapeHtml('Learn more') + '</a></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.kanplanacknowledge.renderPlanMode.soyTemplateName = 'GH.tpl.kanplan.kanplanacknowledge.renderPlanMode';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/version/VersionQuickCreate.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select"),r=GH.TimeFormat,i=require("jira-agile/browser-metrics/browser-metrics-util");GH.VersionQuickCreate={},GH.VersionQuickCreate.EVENT_VERSION_CREATED="versionCreated",GH.VersionQuickCreate.accessibleProjects=[],GH.VersionQuickCreate.setAccessibleProjects=function(e){GH.VersionQuickCreate.accessibleProjects=e},GH.VersionQuickCreate.showDialog=function(){GH.Dialog.dim(),GH.VersionQuickCreate.renderDialog()},GH.VersionQuickCreate.renderDialog=function(){var e=GH.Dialog.create({width:450,height:350,id:"ghx-dialog-create-version"});e.addHeader("Create Version"),e.addPanel("","panel"),e.getCurrentPanel().html(GH.tpl.versionview.renderQuickCreateView({projects:GH.VersionQuickCreate.accessibleProjects})),e.addButton("Create",function(){e.disableControls(),GH.VersionQuickCreate.submit(e)},"aui-button"),GH.Dialog.addCancelButton(e),GH.VersionQuickCreate.registerProjectControls(),GH.VersionQuickCreate.registerCalendarControls(),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),e.updateHeight(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-version-name").focus()},GH.VersionQuickCreate.submit=function(r){GH.Validation.clearContextualErrors(AJS.$("#ghx-dialog-create-version"));var e=GH.VersionQuickCreate._extractModel();i.triggerBefore("before:createVersion","versionCreate"),GH.Ajax.post({url:"/versions",data:e,errorContextMap:{projectId:"#ghx-version-project",name:"#ghx-version-name",startDate:"#ghx-version-start-date-error",releaseDate:"#ghx-version-release-date-error"}}).done(function(e){e=e.success;r.dispose(),GH.Dialog.triggerHideEvent(),GH.Notification.showSuccess(AJS.format("Version \'\'{0}\'\' was successfully created.","<strong>"+AJS.escapeHTML(String(e.name))+"</strong>")),AJS.$(GH).trigger(GH.VersionQuickCreate.EVENT_VERSION_CREATED,[{createdVersion:e}])}).fail(r.enableControls).always(function(){i.performanceMark("api_call_done_versions")})},GH.VersionQuickCreate.registerCalendarControls=function(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-version-release-date",button:"ghx-version-release-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!1,timeFormat:12,positionStyle:"fixed",ifFormat:r.dateFormat,useISO8601WeekNumbers:r.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-version-start-date",button:"ghx-version-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!1,timeFormat:12,positionStyle:"fixed",ifFormat:r.dateFormat,useISO8601WeekNumbers:r.useISO8601WeekNumbers})},GH.VersionQuickCreate.registerProjectControls=function(){return new e({element:AJS.$("#ghx-version-project"),revertOnInvalid:!0,width:250})},GH.VersionQuickCreate.registerCreateVersionDialog=function(){AJS.$("#ghx-version-column").find(".js-create-version").click(function(){GH.VersionQuickCreate.showDialog()})},GH.VersionQuickCreate._extractModel=function(){var e=AJS.$("#ghx-dialog-create-version");return{projectId:e.find("#ghx-version-project :selected").val(),name:e.find("#ghx-version-name").val(),description:e.find("#ghx-version-description").val(),releaseDate:e.find("#ghx-version-release-date").val(),startDate:e.find("#ghx-version-start-date").val()}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/StartSprintDialog.js' */
!function(){GH.Dialogs.StartSprintDialog={},GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED="sprintStarted";var t,i=require("jira/featureflags/feature-manager");t=require("jira-agile/rapid/analytics-tracker"),GH.Dialogs.StartSprintDialog.analytics=new t("gh.start.sprint.dialog.change"),GH.Dialogs.StartSprintDialog.analyticsMetaData=function(t){AJS.trigger("analyticsEvent",{name:"gh.sprint.start",data:t})};var r=require("jira-agile/browser-metrics/browser-metrics-util");GH.Dialogs.StartSprintDialog.showDialog=function(t,a,e){GH.Dialog.dim(),GH.Ajax.get({url:"/sprint/"+a+"/start",data:{rapidViewId:t,sprintId:a}},"showStartSprintDialog").always(function(){r.performanceMark("api_call_sprint_popup_create_done")}).done(function(t){i.isFeatureEnabled("jsw.agility.always.issue.count")&&GH.RapidBoard.State.isAgilityBoard()&&(t.countNotEstimatedIssues=0,t.issuesNotEstimated=[]),GH.Dialogs.StartSprintDialog.renderDialog(t,e<t.numIssues)}).fail(GH.Dialog.undim),GH.Dialogs.StartSprintDialog.analytics.trigger("start")},GH.Dialogs.StartSprintDialog.renderDialog=function(t,a){var e=GH.Dialog.create({width:575,height:500+(a?70:0)+(0<t.countNotEstimatedIssues?90:0)+(0<t.noTrackingEstimateIssueCount?90:0),id:"ghx-dialog-start-sprint",onCancelFn:function(){GH.Dialog.triggerHideEvent(),GH.Dialogs.StartSprintDialog.analytics.trigger("cancel")},analyticsPageName:"startSprintModal"});e.addHeader("Start sprint"),e.addPanel("","panel");var i=[{value:7,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",1)},{value:14,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",2)},{value:21,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",3)},{value:28,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",4)},{value:"custom",text:"Custom"}],r=moment().utcOffset(GH.TimeFormat.userTimeZoneLabel).format("YYYY-MM-DDTHH:mm:ss"),r=new Date(r).print(GH.TimeFormat.dateTimePickerFormat);e.getCurrentPanel().html(GH.tpl.dialogs.startsprint.renderStartSprintDialog({numIssues:t.numIssues,defaultName:t.defaultName,defaultStartDate:r,defaultEndDate:t.defaultEndDate,showFilteredIssuesWarning:a,numNotEstimatedIssues:t.countNotEstimatedIssues,numExtraNotEstimatedIssues:t.countNotEstimatedIssues-t.issuesNotEstimated.length,snapshotIssuesNotEstimated:_.flatten([_.first(t.issuesNotEstimated,t.issuesNotEstimated.length-1)]).join(", "),lastIssueNotEstimated:_.last(t.issuesNotEstimated),numNoTrackingEstimateIssues:t.noTrackingEstimateIssueCount,numExtraNoTrackingEstimateIssues:t.noTrackingEstimateIssueCount-t.noTrackingEstimateIssues.length,snapshotIssuesNoTrackingEstimate:_.flatten([_.first(t.noTrackingEstimateIssues,t.noTrackingEstimateIssues.length-1)]).join(", "),lastIssueNoTrackingEstimate:_.last(t.noTrackingEstimateIssues),listOfSprintDurations:i,hasNoSubtaskDoneStatus:t.hasNoSubtaskDoneStatus,endSprintHelpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Ending+a+Sprint","isLocal":false}.url,sprintGoal:t.sprintGoal,plannedSprintDate:t.startDate})),e.addButton("Start",function(){e.disableControls(),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.COMMON.START_SPRINT_DIALOG),GH.Dialogs.StartSprintDialog.submit(e,t)},"aui-button"),GH.Dialog.addCancelButton(e),GH.Dialogs.StartSprintDialog.registerCalendarControls(),GH.Dialogs.StartSprintDialog.registerDurationDropdown(AJS.$(document.body),i),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-sprint-name").focus(),GH.Dialogs.StartSprintDialog.registerWorkdayCounter(t.rapidViewId,e)},GH.Dialogs.StartSprintDialog.submit=function(a,e){r.triggerBefore("before:startSprintSubmit");var t=AJS.$("#ghx-dialog-start-sprint"),i={rapidViewId:e.rapidViewId,sprintId:e.sprintId,name:t.find("#ghx-sprint-name").val(),startDate:t.find("#ghx-sprint-start-date").val(),endDate:t.find("#ghx-sprint-end-date").val(),goal:t.find("#ghx-sprint-goal-input").val()};GH.Validation.clearContextualErrors(t),GH.Ajax.put({url:"/sprint/"+e.sprintId+"/start",data:i,errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(t){GH.Dialogs.StartSprintDialog.createSubmitAnalytics(i,e),GH.RapidBoard.State.setRapidViewIdForEventuallyConsistentBoard(null),a.dispose(),GH.Dialog.triggerHideEvent(),GH.RapidBoard.State.isAgilityBoard()||GH.Notification.showSuccess(AJS.format("Sprint \'\'{0}\'\' has successfully been started.",AJS.escapeHTML(String(t.success.name)))),AJS.$(GH).trigger(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED)}).always(function(){r.performanceMark("api_call_done_start_sprint")}).fail(a.enableControls)},GH.Dialogs.StartSprintDialog.createSubmitAnalytics=function(t,a){var e=a.numIssues,i=GH.Dialogs.StartSprintDialog.calculateSprintDuration(t.startDate,t.endDate),r=a.totalStatistic,i={sprintId:a.sprintId,numIssues:e,sprintDuration:i,totalStatistic:r},r=Date.parseDate(t.startDate,GH.TimeFormat.dateTimePickerFormat).valueOf(),t=Date.parseDate(t.endDate,GH.TimeFormat.dateTimePickerFormat).valueOf();i.plannedStartDate=a.isoStartDate?new Date(a.isoStartDate).valueOf():"",i.committedStartDate=r,i.plannedEndDate=a.defaultIsoEndDate?new Date(a.defaultIsoEndDate).valueOf():"",i.committedEndDate=t,GH.Dialogs.StartSprintDialog.analytics.trigger("complete"),GH.Dialogs.StartSprintDialog.analyticsMetaData(i),GH&&GH.ECX&&GH.ECX.fireReadEvent&&GH.ECX.fireReadEvent("backlogScreen","startSprintDialog",i)},GH.Dialogs.StartSprintDialog.registerCalendarControls=function(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-sprint-start-date",button:"ghx-sprint-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-sprint-end-date",button:"ghx-sprint-end-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers})},GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining=function(t,a,e,i){t=Date.parseDate(t,GH.TimeFormat.dateTimePickerFormat).getTime(),a=Date.parseDate(a,GH.TimeFormat.dateTimePickerFormat).getTime();GH.Ajax.get({url:"/rapidviewconfig/workingdays/period",data:{rapidViewId:e,startDate:t,endDate:a}},"workingdaysperiod").done(function(t){AJS.$("#ghx-sprint-work-days-remaining").remove(),i.getCurrentPanel().body.append(GH.tpl.dialogs.startsprint.renderWorkDaysInSprint({numWorkDaysInSprint:t.days,helpLinkUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Configuring+Working+Days","isLocal":false}.url})),AJS.$("#ghx-sprint-work-days-loading").hide()}).fail(function(){AJS.$("#ghx-sprint-work-days-remaining").remove()})},GH.Dialogs.StartSprintDialog.calculateSprintDuration=function(t,a){return Math.ceil(GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(t,a)).toString()},GH.Dialogs.StartSprintDialog.calculateSprintDurationExact=function(t,a){t=moment(Date.parseDate(t,GH.TimeFormat.dateTimePickerFormat));return moment(Date.parseDate(a,GH.TimeFormat.dateTimePickerFormat)).diff(t,"days",!0)},GH.Dialogs.StartSprintDialog.registerDurationDropdown=function(t,e){function a(){var t;"custom"!==i.val()&&r.val()&&((t=moment(Date.parseDate(r.val(),GH.TimeFormat.dateTimePickerFormat))).add(parseInt(i.val()),"days"),n.val(t.toDate().print(GH.TimeFormat.dateTimePickerFormat)))}var i=t.find("#ghx-sprint-duration"),r=t.find("#ghx-sprint-start-date"),n=t.find("#ghx-sprint-end-date"),s=t.find("#ghx-sprint-end-date_trigger_c");i.change(function(){var t="custom"!==i.val();n.prop("disabled",t),a()}),r.change(a);function o(){var t,a;i.val((t=e,a=GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(r.val()||"",n.val()||""),(t=_.find(t,function(t){return a===t.value}))?t.value:"custom")).trigger("change")}o(),s.click(function(){n.prop("disabled")&&(i.val("custom").trigger("change"),n.prop("disabled",!1).focus(),s.trigger("click"))}),r.focusout(o),n.focusout(o)},GH.Dialogs.StartSprintDialog.registerWorkdayCounter=function(t,a){function e(){GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining(i.val(),r.val(),t,a)}var i=AJS.$("#ghx-sprint-start-date"),r=AJS.$("#ghx-sprint-end-date"),n=AJS.$("#ghx-sprint-duration");e(),i.change(e),r.change(e),n.change(function(){"custom"!==n.val()&&e()})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/StartSprintDialog.soy' */
// This file was automatically generated from StartSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.startsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.startsprint == 'undefined') { GH.tpl.dialogs.startsprint = {}; }


GH.tpl.dialogs.startsprint.renderStartSprintDialog = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.numNotEstimatedIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format('{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Estimate\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.',opt_data.numNotEstimatedIssues,opt_data.numExtraNotEstimatedIssues,opt_data.snapshotIssuesNotEstimated,opt_data.lastIssueNotEstimated)) + '</p></div>' : '') + ((opt_data.numNoTrackingEstimateIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format('{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Remaining\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.',opt_data.numNoTrackingEstimateIssues,opt_data.numExtraNoTrackingEstimateIssues,opt_data.snapshotIssuesNoTrackingEstimate,opt_data.lastIssueNoTrackingEstimate)) + '</p></div>' : '') + ((opt_data.showFilteredIssuesWarning) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Includes issue(s) currently hidden by a Quick Filter or the Instant Filter.') + '</p></div>' : '') + ((opt_data.hasNoSubtaskDoneStatus) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('You will not be able to complete this sprint, as it includes sub-tasks that cannot be transitioned to the \x22Done\x22 column.') + ' <a href="' + soy.$$escapeHtml(opt_data.endSprintHelpUrl) + '" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a></p></div>' : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be included in this sprint.','<strong>' + opt_data.numIssues + '</strong>',opt_data.numIssues)) + '</p><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml('Sprint name') + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-sprint-name" value="' + soy.$$escapeHtml(opt_data.defaultName) + '"></div><div class="field-group"><label for="ghx-sprint-duration">' + soy.$$escapeHtml('Duration') + ':<span class="aui-icon icon-required"></span></label><select class="select" id="ghx-sprint-duration" name="ghx-sprint-duration">';
  var durationList37 = opt_data.listOfSprintDurations;
  var durationListLen37 = durationList37.length;
  for (var durationIndex37 = 0; durationIndex37 < durationListLen37; durationIndex37++) {
    var durationData37 = durationList37[durationIndex37];
    output += '<option value="' + soy.$$escapeHtml(durationData37.value) + '">' + soy.$$escapeHtml(durationData37.text) + '</option>';
  }
  output += '</select></div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml('Start date') + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-start-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultStartDate) + '"><span id="ghx-sprint-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit start date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-start-date-error"></span>' + ((opt_data.plannedSprintDate) ? '<div id="ghx-sprint-planned-start-date">' + soy.$$escapeHtml('Planned sprint date') + ': <strong>' + soy.$$escapeHtml(opt_data.plannedSprintDate) + '</strong><br/>' + soy.$$escapeHtml('This start date impacts sprint velocity and scope in reports.') + '&nbsp;<a target="_blank" href="https://support.atlassian.com/jira-software-cloud/docs/plan-a-sprint/#The-planned-start-date-automatically-updates-when-you-start-a-sprint">' + soy.$$escapeHtml('Learn more') + '</a></div>' : '') + '</div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml('End date') + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-end-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultEndDate) + '"><span id="ghx-sprint-end-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit end date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-end-date-error"></span></div><div class="field-group"><label for="ghx-sprint-goal-input">' + soy.$$escapeHtml('Sprint goal:') + '</label><textarea class="textarea full-width-field" name="goal" id="ghx-sprint-goal-input">' + ((opt_data.sprintGoal) ? soy.$$escapeHtml(opt_data.sprintGoal) : '') + '</textarea></div></fieldset></form><span id="ghx-sprint-work-days-loading" class="aui-icon aui-icon-wait">' + soy.$$escapeHtml('Loading...') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderStartSprintDialog.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderStartSprintDialog';
}


GH.tpl.dialogs.startsprint.renderWorkDaysInSprint = function(opt_data, opt_ignored) {
  return '<p id="ghx-sprint-work-days-remaining" class="ghx-sprint-dialog-working-days">' + soy.$$filterNoAutoescape(AJS.format('There {1,choice,0#are|1#is|1\x3care} {0}{1} working {1,choice,0#days|1#day|1\x3cdays}{2} in this sprint','<strong>',opt_data.numWorkDaysInSprint,'</strong>')) + '<span id=\'ghx-sprint-work-days-help\'><span class="aui-icon aui-icon-small aui-iconfont-help ghx-sprint-help-icon"></span><a href=' + soy.$$escapeHtml(opt_data.helpLinkUrl) + ' target="_blank">' + soy.$$escapeHtml('More about working days') + '</a></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderWorkDaysInSprint.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderWorkDaysInSprint';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.soy' */
// This file was automatically generated from AddIssuesToActiveSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addissuestoactivesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addissuestoactivesprint == 'undefined') { GH.tpl.dialogs.addissuestoactivesprint = {}; }


GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Sprint scope will be affected by this action.') + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog.soyTemplateName = 'GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.js' */
GH.AddIssuesToActiveSprintDialog={},GH.AddIssuesToActiveSprintDialog.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.AddIssuesToActiveSprintDialog.Analytics.add=new e("gh.activesprint.issue.add")}(),GH.AddIssuesToActiveSprintDialog.showDialog=function(e,t){var i=GH.IssueMoveController.getAllIssueKeys(e),a=GH.Dialog.create({width:600,height:250,id:"ghx-add-issues-to-active-sprint",onCancelFn:function(e){t.reject(i)}});a.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",i.length)),a.addPanel("","panel");var n=GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog(e);a.getCurrentPanel().html(n);n="Confirm";a.addButton(n,function(){a.disableControls(),a.dispose(),t.resolve(e)},"aui-button"),GH.Dialog.addCancelButton(a),a.show(),a.updateHeight(),AJS.$("#"+a.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanFeatureService.js' */
define("jira-agile/rapid/ui/kanplan/kan-plan-feature-service",["require","jira-agile/rapid/ajax"],function(a,n){"use strict";var r={shouldShowKanbanBacklog:function(){return GH.RapidViewConfig.kanPlanEnabled},autoConvertKanPlan:function(a){return n.post({url:"/xboard/plan/kanban/"+a+"/autoConvert"})}};return r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanDialogUtils.js' */
define("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils",["jquery","underscore","jira-agile/rapid/events"],function(n,a,i){"use strict";var t={};function e(t){var e=GH.Dialog.create({width:t.width,height:t.height,id:t.id,onCancelFn:function(){return e.trigger("cancel")}});return new i(e),n("#"+e.id).addClass("ghx-dialog"),e.addHeader(t.header),e.addPanel("","panel"),e.getCurrentPanel().html(t.message),e.addButton(t.submitButton,function(){var n={};a.isFunction(t.getSubmitModel)&&(n=t.getSubmitModel()),e.disableControls(),e.dispose(),e.trigger("submit",n)},"aui-button aui-button-primary"),!1===a.isUndefined(t.cancelLink)&&e.addCancel(t.cancelLink,function(){e.cancel(e)}),e}return t.createTransitionStatusDialog=function(n,t){return AJS.trigger("analyticsEvent",{name:"jira-software.plan.transition-menu.view",data:{boardType:"kanban",issueCount:t.length,optionCount:n.length}}),e({width:500,height:300,id:"ghx-kanplan-transition-status",header:"Choose a transition",message:GH.tpl.kanplan.dialogutils.transitionStatusContent({transitions:n,issueKeys:t.join(", "),numIssues:t.length}),submitButton:"Choose",cancelLink:"Cancel",getSubmitModel:function(){return AJS.$("#ghx-kanplan-transition-status input[name=status]:checked").attr("id")}})},t.createAutoOffShowEpicAsPanelDialog=function(){return e({width:400,height:200,header:"Disable Kanban backlog",message:"By disabling the Kanban backlog, any epics in the Epics panel will now be displayed as cards on your board.",submitButton:"Confirm",cancelLink:"Cancel"})},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanDialogUtils.soy' */
// This file was automatically generated from KanPlanDialogUtils.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.dialogutils.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.dialogutils == 'undefined') { GH.tpl.kanplan.dialogutils = {}; }


GH.tpl.kanplan.dialogutils.transitionStatusContent = function(opt_data, opt_ignored) {
  var output = '<p>' + ((opt_data.numIssues == 1) ? soy.$$escapeHtml(AJS.format('Choose one of {0} available transitions for issue {1}',opt_data.transitions.length,opt_data.issueKeys)) : soy.$$escapeHtml(AJS.format('Choose one of {0} available transitions for issues {1}',opt_data.transitions.length,opt_data.issueKeys))) + '</p><form>';
  var transitionList10 = opt_data.transitions;
  var transitionListLen10 = transitionList10.length;
  for (var transitionIndex10 = 0; transitionIndex10 < transitionListLen10; transitionIndex10++) {
    var transitionData10 = transitionList10[transitionIndex10];
    output += '<div class="kanplan-transition-status-option"><input id="' + soy.$$escapeHtml(transitionData10.id) + '" type="radio" name="status" value="' + soy.$$escapeHtml(transitionData10.targetStatus) + '" ' + ((transitionIndex10 == 0) ? ' checked ' : '') + '><label for="' + soy.$$escapeHtml(transitionData10.id) + '">' + soy.$$escapeHtml(transitionData10.name) + '</label></div>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.kanplan.dialogutils.transitionStatusContent.soyTemplateName = 'GH.tpl.kanplan.dialogutils.transitionStatusContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/EditSprintDialog.soy' */
// This file was automatically generated from EditSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.editsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.editsprint == 'undefined') { GH.tpl.dialogs.editsprint = {}; }


GH.tpl.dialogs.editsprint.renderEditSprintDialog = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml('Sprint name') + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-sprint-name" value="' + soy.$$escapeHtml(opt_data.sprint.name) + '"></div>';
  if (opt_data.sprint.state == 'FUTURE') {
    output += '<div class="field-group"><label for="ghx-sprint-duration">' + soy.$$escapeHtml('Duration') + ':</label><select class="select" id="ghx-sprint-duration" name="ghx-sprint-duration">';
    var durationList13 = opt_data.listOfSprintDurations;
    var durationListLen13 = durationList13.length;
    for (var durationIndex13 = 0; durationIndex13 < durationListLen13; durationIndex13++) {
      var durationData13 = durationList13[durationIndex13];
      output += '<option value="' + soy.$$escapeHtml(durationData13.value) + '">' + soy.$$escapeHtml(durationData13.text) + '</option>';
    }
    output += '</select></div>';
  }
  output += '<div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml('Start date') + ':' + ((! (opt_data.sprint.state == 'FUTURE')) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input id="ghx-sprint-start-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.sprint.startDate) + '"><span id="ghx-sprint-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit start date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml('End date') + ':' + ((! (opt_data.sprint.state == 'FUTURE')) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input id="ghx-sprint-end-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.sprint.endDate) + '"><span id="ghx-sprint-end-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit end date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-end-date-error"></span></div><div class="field-group"><label for="ghx-sprint-goal-input">' + soy.$$escapeHtml('Sprint goal:') + '</label><textarea class="textarea full-width-field" name="goal" id="ghx-sprint-goal-input">' + ((opt_data.sprint.goal) ? soy.$$escapeHtml(opt_data.sprint.goal) : '') + '</textarea></div></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.editsprint.renderEditSprintDialog.soyTemplateName = 'GH.tpl.dialogs.editsprint.renderEditSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/EditSprintDialog.js' */
define("jira-agile/rapid/ui/dialog/edit-sprint-dialog",["require"],function(t){"use strict";var n=t("jquery"),e={},s=t("jira-agile/browser-metrics/browser-metrics-util");function d(e){GH.Validation.clearContextualErrors(n("#"+e.dialog.id));var t=n("#ghx-sprint-name").val(),a=n("#ghx-sprint-start-date").val(),i=n("#ghx-sprint-end-date").val(),r=n("#ghx-sprint-goal-input").val();if((null==a||0===a.length)^(null==i||0===i.length))return GH.Validation.notBlank("#ghx-sprint-start-date",AJS.format("Specify the sprint {0} date or leave both date fields empty.","start"),"#ghx-sprint-start-date-error"),void GH.Validation.notBlank("#ghx-sprint-end-date",AJS.format("Specify the sprint {0} date or leave both date fields empty.","end"),"#ghx-sprint-end-date-error");e.dialog.disableControls(),s.triggerBefore("before:editSprintSubmit"),GH.Ajax.put({url:"/sprint/"+e.sprint.id,data:{name:t,startDate:a||"None",endDate:i||"None",goal:r,rapidViewId:e.rapidViewId},errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(t){e.dialog.dispose(),AJS.$(GH).trigger(GH.Components.EVENT_SPRINT_UPDATED,t.success)}).fail(function(){e.dialog.enableControls(),AJS.$(GH).trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.update.fail"})}).always(function(){s.performanceMark("sprint_edit_api_call_done")});r={sprintState:e.sprint.state,sprintNameUpdated:t!==e.sprint.name,sprintGoalUpdated:void 0===e.sprint.goal?r&&0!==r.trim().length:r!==e.sprint.goal};r.sprintStartDateUpdated=a!==e.sprint.startDate,r.sprintEndDateUpdated=i!==e.sprint.endDate,AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.update.click",data:r})}return e.onEdit=d,e.show=function(t,e){var a,i=GH.Dialog.create({id:"ghx-dialog-edit-sprint",width:575,height:"FUTURE"===e.sprintData.state?500:438,onCancelFn:(a=e,function(){AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.cancel.click",data:{sprintState:a.sprintData.state}})}),analyticsPageName:"editSprintModal"}),r=[{value:7,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",1)},{value:14,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",2)},{value:21,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",3)},{value:28,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",4)},{value:"custom",text:"Custom"}];i.addHeader(AJS.format("Edit sprint: {0}",e.getName())),i.addPanel("","panel"),"None"!==e.sprintData.startDate&&e.sprintData.startDate||(e.sprintData.startDate="",e.sprintData.endDate=""),i.getCurrentPanel().html(GH.tpl.dialogs.editsprint.renderEditSprintDialog({sprint:e.sprintData,listOfSprintDurations:r})),i.addButton("Update",function(){d({rapidViewId:t,sprint:e.sprintData,dialog:i})}),GH.Dialog.addCancelButton(i),new Calendar,Calendar.setup({firstDay:0,inputField:"ghx-sprint-start-date",button:"ghx-sprint-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-sprint-end-date",button:"ghx-sprint-end-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),GH.Dialogs.StartSprintDialog.registerDurationDropdown(AJS.$(document.body),r),i.show(),n("#ghx-dialog-edit-sprint .dialog-page-body form").on("submit",function(t){t.preventDefault()})},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/plan/AssignedWorkDialog.js' */
define("jira-agile/rapid/ui/plan/assigned-work-dialog",["require"],function(t){"use strict";var i=t("underscore");return t("jira/dialog/form-dialog").extend({_getDefaultOptions:function(){return i.extend(this._super(),{content:function(t){t(GH.tpl.assignedWorkDialog.renderDialogContents({assignedWorkStats:this.options.assignedWorkStats,sprintName:this.options.sprintName,estimateStatisticName:this.options.estimateStatisticName,trackingStatisticName:this.options.trackingStatisticName}))}})}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/plan/AssignedWorkDialog.soy' */
// This file was automatically generated from AssignedWorkDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.assignedWorkDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.assignedWorkDialog == 'undefined') { GH.tpl.assignedWorkDialog = {}; }


GH.tpl.assignedWorkDialog.renderDialogContents = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Workload by assignee') + ' - ' + soy.$$escapeHtml(opt_data.sprintName) + '</h2><div class="form-body ghx-assigned-work-table"><table class="aui"><thead><tr><th>' + soy.$$escapeHtml('Assignee') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Issues') + '</th>' + ((opt_data.assignedWorkStats.all.totalEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</th>' : '') + ((opt_data.assignedWorkStats.all.totalTrackingEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.trackingStatisticName) + '</th>' : '') + '</tr></thead><tbody>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.unassigned, noAssigneeText: '' + soy.$$escapeHtml('Unassigned')});
  var assignedWorkEntryList27 = opt_data.assignedWorkStats.assigned;
  var assignedWorkEntryListLen27 = assignedWorkEntryList27.length;
  for (var assignedWorkEntryIndex27 = 0; assignedWorkEntryIndex27 < assignedWorkEntryListLen27; assignedWorkEntryIndex27++) {
    var assignedWorkEntryData27 = assignedWorkEntryList27[assignedWorkEntryIndex27];
    output += GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: assignedWorkEntryData27});
  }
  output += '</tbody><tfoot>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.all, noAssigneeText: '' + soy.$$escapeHtml('Total')}) + '</tfoot></table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderDialogContents.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderDialogContents';
}


GH.tpl.assignedWorkDialog.renderTableRow = function(opt_data, opt_ignored) {
  return '<tr><td>' + ((opt_data.noAssigneeText) ? '<span class="ghx-no-avatar">' + soy.$$escapeHtml(opt_data.noAssigneeText) + '</span>' : GH.tpl.avatar.renderIssueAvatar({issue: opt_data.assignedWorkEntry.issues[0]}) + soy.$$escapeHtml(opt_data.assignedWorkEntry.assigneeName)) + '</td><td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.issues.length) + '</td>' + ((opt_data.assignedWorkEntry.totalEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalEstimateText) + '</td>' : '') + ((opt_data.assignedWorkEntry.totalTrackingEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalTrackingEstimateText) + '</td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderTableRow.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderTableRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesService.js' */
GH.LinkedPagesService={initiateRemoteLinkConversation:function(){return GH.Ajax.get({url:"/remoteLinkConversation",dataType:"text"},"remoteLinkConversation")}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/PageSearchRequestService.js' */
GH.PageSearchRequestService={},GH.PageSearchRequestService.delay=400,GH.PageSearchRequestService.timeoutId=null,GH.PageSearchRequestService.search=function(e,c){GH.PageSearchRequestService.cancel();var t=AJS.$.Deferred();return GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(t,e,c)},GH.PageSearchRequestService.delay),t.promise()},GH.PageSearchRequestService.cancel=function(){null!=GH.PageSearchRequestService.timeoutId&&(clearTimeout(GH.PageSearchRequestService.timeoutId),GH.PageSearchRequestService.timeoutId=null)},GH.PageSearchRequestService._scheduleRequest=function(e,c){GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(e,c)},GH.PageSearchRequestService.delay)},GH.PageSearchRequestService._execute=function(c,e,t){var r=GH.PageSearchRequestService.timeoutId,t=GH.Ajax.get({url:"/integration/confluence/pages/search",data:{searchQuery:t},deferErrorHandling:!0},"searchConfluencePagesForEpic");t.done(function(e){r===GH.PageSearchRequestService.timeoutId&&(GH.PageSearchRequestService._replaceHighlightTokensWithHtml(e.pages),c.resolveWith(c,arguments))}),t.fail(function(e){r===GH.PageSearchRequestService.timeoutId&&c.rejectWith(c,arguments)})},GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START="@@@hl@@@",GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END="@@@endhl@@@",GH.PageSearchRequestService._replaceHighlightTokensWithHtml=function(e){function c(e){return e.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"<strong>").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"</strong>")}function t(e){return e.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"")}return _.each(e,function(e){e.title&&(e.titleHtml=c(e.title),e.title=t(e.title)),e.space&&(e.spaceHtml=c(e.space),e.space=t(e.space))}),e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/PagesSearchModel.js' */
GH.PagesSearchModel={},GH.PagesSearchModel.model={},GH.PagesSearchModel.set=function(e,a){GH.PagesSearchModel.model[e]=a},GH.PagesSearchModel.list=function(e){return GH.PagesSearchModel.model[e]},GH.PagesSearchModel.get=function(e,a){return a=parseInt(a,10),_.find(GH.PagesSearchModel.model[e],function(e){return e.id===a})},GH.PagesSearchModel.removePage=function(e,a){a=parseInt(a,10),GH.PagesSearchModel.model[e]=_.reject(GH.PagesSearchModel.model[e],function(e){return e.id===a})},GH.PagesSearchModel.clear=function(e){delete GH.PagesSearchModel.model[e]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.js' */
!function(){"use strict";GH.LinkedPagesInlineDialog=function(e){if(this.entityType=e.entityType,"sprint"===this.entityType)this.entityTypeParam="sprintId";else{if("epic"!==this.entityType)throw new Error("Did not understand entity type: "+this.entityType);this.entityTypeParam="issueKey"}this.entityId=e.entityId,this.agileMode=e.agileMode,this.$trigger=e.trigger,this.$content=null,this.dialog=null,this.dialogOptions=_.extend({},GH.LinkedPagesInlineDialog.DIALOG_OPTIONS)},GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT=3,GH.LinkedPagesInlineDialog.DIALOG_OPTIONS={fadeTime:0,noBind:!0,width:300,cacheContent:!1,hideDelay:6e4},GH.LinkedPagesInlineDialog.prototype.isVisible=function(){return AJS.$("#inline-dialog-viewPagesDialog").is(":visible")},GH.LinkedPagesInlineDialog.prototype.show=function(){return this.showDeferred=AJS.$.Deferred(),this.dialog=GH.SideInlineDialog.create("viewPagesDialog",this.$trigger,_.bind(this._render,this),this.dialogOptions),this.dialog.show(),this.showDeferred.promise()},GH.LinkedPagesInlineDialog.prototype.hide=function(){this.dialog.hide()},GH.LinkedPagesInlineDialog.prototype.refresh=function(){this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._render=function(d,e,h){return this.$content=d,this.showDeferred.notify("EmptyBegin"),d.html(GH.tpl.component.linkedpages.renderEmptyDialog({entityId:this.entityId})),this.showDeferred.notify("EmptyRender"),d.click(function(e){e.stopPropagation()}),d.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),d.find(".ghx-progress-indicator.ghx-initial").spin("medium"),_.isFunction(h)&&h(),this.showDeferred.notify("EmptyDone"),this.showDeferred.notify("AjaxCall"),GH.LinkedPagesController.getLinkedPagesForEntity(this.entityType,this.entityId).done(_.bind(function(n){this.showDeferred.notify("AjaxDone");var e=_.findWhere(n.applicationLinks,{primary:!0}),i=!!e&&e.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION;d.find(".ghx-progress-indicator.ghx-initial").spin("medium");var t=n.pages;this.canModify=n.canModifyPages,this.applicationLinks=n.applicationLinks;var a=0<t.length&&n.applicationLinks.length<=1&&_.all(t,function(e){return e.serverUnavailable}),s=_.where(t,{authenticationRequired:!0}),o=_.groupBy(s,"applicationLinkId"),l=_.keys(o),r=_.map(l,function(e){var i=o[e][0].authenticationUrl;return{applicationLink:_.findWhere(n.applicationLinks,{id:e}),authenticateUrl:i}}),s=t.length,l=GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT;l+1===s&&l++,this.showDeferred.notify("ContentRender"),d.html(GH.tpl.component.linkedpages.renderDialog({entityId:this.entityId,entityType:this.entityType,linkedPages:t,initiallyShownCount:l,canEdit:this.canModify,appLink:e,serverUnavailable:a,needAuthenticationApplications:r})),this._updateViewLinkedPagesText(t.length),d.find("a.applink-authenticate").click(function(e){window.open(this.href,"com_atlassian_applinks_authentication"),e.preventDefault()}),d.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),this._initCreateAndLink({createPageAction:i,entityId:this.entityId,entityType:this.entityType,entityTypeParam:this.entityTypeParam,agileMode:this.agileMode,jiraApplicationId:n.jiraApplicationId,jiraUrl:n.jiraBaseUrl}),d.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this)),d.find(".js-wiki-view-more-pages-link").click(_.bind(this._handleShowMoreClick,this));i=d.find(".js-page-search");i.click(function(e){return e.preventDefault(),!1}),i.keydown(_.bind(this._handleSelectNextItem,this)),i.keydown(_.bind(this._handleSelectPreviousItem,this)),i.keydown(_.bind(this._handleAddSelectedItem,this)),i.keyup(_.bind(this._handlePageSearchQueryChanged,this)),d.find(".js-search-panel-hide").on("click",_.bind(this._handleCloseSearchPanelClick,this)),d.find(".js-search-page-icon").click(_.bind(this._handleClearSearchIconClick,this)),this._showLinkedPagesPanel(),_.isFunction(h)&&h(),this.showDeferred.notify("ContentDone"),this.dialog.refresh(),this.showDeferred.resolve()},this)),!1},GH.LinkedPagesInlineDialog.prototype._renderPageSearchResults=function(e){this._hideSearchingSpinner();var i,n=this.$content.find(".js-entity-view-pages-search-result");e.authenticationRequired?(i=_.findWhere(this.applicationLinks,{id:e.applicationLinkId})||{},n.html(GH.tpl.component.linkedpages.renderSearchAuthenticationRequest({authenticationUrl:e.authenticationUrl,authenticationLinkUrl:i.url,authenticationLinkName:i.name})),n.find("a.applink-authenticate").click(function(e){window.open(this.href,"com_atlassian_applinks_authentication"),e.preventDefault()})):(n.html(GH.tpl.component.linkedpages.renderPageResults({pages:e.pages,isComplete:e.isComplete})),e.pages.length&&this._reselectItem("first",_.identity),n.find(".ghx-doco-list-item").click(_.bind(this._handlePageSearchResultClick,this)))},GH.LinkedPagesInlineDialog.prototype._renderPageSearchFailed=function(e){this._hideSearchingSpinner();e=e.getGlobalErrors();AJS.messages.warning(AJS.$(".js-link-page-panel"),{title:AJS.format("Error while searching",""),body:e&&e[0].message})},GH.LinkedPagesInlineDialog.prototype._handleCloseSearchPanelClick=GH.Util.wrapPreventDefault(function(e){this._showLinkedPagesPanel()}),GH.LinkedPagesInlineDialog.prototype._handleClearSearchIconClick=function(e){return GH.PageSearchRequestService.cancel(),this._emptySearchResults(),this._hideSearchingSpinner(),this.$content.find(".js-search-existing-pages-input").val(""),e.preventDefault(),!1},GH.LinkedPagesInlineDialog.prototype._handleRemovePageClick=function(e){var i=AJS.$(e.target),n=i.attr("data-page-id");return i.hide().closest("li").find(".js-wiki-spin").removeClass("ghx-hidden").find(".ghx-progress-indicator.ghx-small").spin("small"),GH.LinkedPagesController.removeLinkedPage(this.entityType,this.entityId,n).done(_.bind(function(){i.closest("li").remove();var e=GH.PageIssueLinksModel.list(this.entityId);0===e.length&&this.$content.find(".js-no-linked-pages").removeClass("hidden"),this._updateViewLinkedPagesText(e.length)},this)),this._showMoreLinkedPages(),e.preventDefault(),!1},GH.LinkedPagesInlineDialog.prototype._handleShowMoreClick=function(e){return e.preventDefault(),e.stopPropagation(),this._showMoreLinkedPages(),!1},GH.LinkedPagesInlineDialog.prototype._handlePageSearchQueryChanged=function(e){13!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode&&(e=AJS.$(e.target).val(),this._performSearch(e))},GH.LinkedPagesInlineDialog.prototype._performSearch=function(e){this._emptySearchResults(),0<e.length?(GH.LinkedPagesController.searchPages(this.entityType,this.entityId,e).done(_.bind(this._renderPageSearchResults,this)).fail(_.bind(this._renderPageSearchFailed,this)),this._showSearchingSpinner(),this._showClearSearchIcon()):this._hideClearSearchIcon()},GH.LinkedPagesInlineDialog.prototype._handleSelectNextItem=function(e){if(40===e.keyCode)return e.preventDefault(),this._reselectItem("first",function(e){return e+1})},GH.LinkedPagesInlineDialog.prototype._handleSelectPreviousItem=function(e){if(38===e.keyCode)return e.preventDefault(),this._reselectItem("last",function(e){return e-1})},GH.LinkedPagesInlineDialog.prototype._reselectItem=function(e,i){var n,t,a,s,o=AJS.$(".ghx-doco-list-result");0!==o.length&&(t=null,(t=0===(n=o.filter(".ghx-doco-list-selected")).length?o[e]():(s=o.index(n),n.removeClass("ghx-doco-list-selected"),(a=i(s))<0||a>o.length-1?o[e]():AJS.$(o[a])))&&(t.addClass("ghx-doco-list-selected"),o=(e=(s=t.parent()).position().top)+s.height(),a=t.position().top,s=t.height(),(a<e||o<a+s)&&t.get(0).scrollIntoView()))},GH.LinkedPagesInlineDialog.prototype._handleAddSelectedItem=function(e){13===e.keyCode&&(e.preventDefault(),0!==(e=AJS.$(".ghx-doco-list-result").filter(".ghx-doco-list-selected")).length&&this._addSearchResult(e))},GH.LinkedPagesInlineDialog.prototype._handlePageSearchResultClick=function(e){e.preventDefault();e=AJS.$(e.target).closest("[data-page-id]");this._addSearchResult(e)},GH.LinkedPagesInlineDialog.prototype._addSearchResult=function(e){var i=e.attr("data-page-id"),n=GH.PagesSearchModel.get(this.entityId,i),t=this.$content.find(".js-linked-pages-list"),n=n.title;this._showMoreLinkedPages();var a=AJS.$(GH.tpl.component.linkedpages.renderStubLinkedPageListItem({pageTitle:n}));t.append(a),GH.LinkedPagesController.addLink(this.entityType,this.entityId,i,n).done(_.bind(function(e){e=AJS.$(GH.tpl.component.linkedpages.renderLinkedPageListItem({page:e,entityId:this.entityId,canEdit:this.canModify,hidden:!1}));a.replaceWith(e),e.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this)),e.hide().fadeIn(200),this._updateViewLinkedPagesText(GH.PageIssueLinksModel.list(this.entityId).length)},this)),e.parent().fadeOut(200,function(){e.parent().remove()}),this.$content.find(".js-no-linked-pages").addClass("hidden"),this._showLinkedPagesPanel()},GH.LinkedPagesInlineDialog.prototype._emptySearchResults=function(){this.$content.find(".js-entity-view-pages-search-result").empty(),this._hideClearSearchIcon(),this.$content.find(".js-link-page-panel").find(".aui-message").remove()},GH.LinkedPagesInlineDialog.prototype._showClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-search-small ghx-iconfont-inactive").addClass("aui-iconfont-remove")},GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive aui-iconfont-search-small")},GH.LinkedPagesInlineDialog.prototype._initCreateAndLink=function(n){this.$content.find(".js-create-page-link").click(_.bind(function(){var i=window.open("","_blank");return GH.LinkedPagesController.startRemoteLinkCreationConversation(this).done(function(e){GH.LinkedPagesController.analytics.action.trigger([n.entityType,"createPage"].join("."));e={applinkId:n.jiraApplicationId,agileMode:n.agileMode,fallbackUrl:n.jiraUrl,creationToken:e};e[n.entityTypeParam]=n.entityId,i.location=n.createPageAction+"?"+AJS.$.param(e)}),!1},this)),this.$content.find(".js-link-pages-link").click(_.bind(function(){return this._showLinkPagePanel(),!1},this))},GH.LinkedPagesInlineDialog.prototype._updateViewLinkedPagesText=function(e){e=0<e?AJS.format("{0} linked {0,choice,0# pages|1# page|1\u003c pages}",e):"Linked pages";this.$content.find(".js-entity-pages-header").text(e)},GH.LinkedPagesInlineDialog.prototype._showLinkPagePanel=function(){this.$content.find(".js-link-page-panel").show(),this.$content.find(".js-search-panel-hide").show(),this.$content.find(".js-linked-pages-actions").hide(),this.$content.find(".js-linked-pages-panel").hide(),this.$content.find(".js-search-existing-pages-input").focus(),this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._showLinkedPagesPanel=function(){this.$content.find(".js-linked-pages-panel").show(),this.$content.find(".js-search-panel-hide").hide(),this.$content.find(".js-linked-pages-actions").show(),this.$content.find(".js-link-page-panel").hide(),this.$content.find(".js-entity-view-pages-search-result").empty(),this.$content.find(".js-search-existing-pages-input").val(""),this._hideClearSearchIcon(),this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._showMoreLinkedPages=function(){this.$content.find(".ghx-doco-list-item").show(),this.$content.find(".ghx-doco-list-view-more").hide()},GH.LinkedPagesInlineDialog.prototype._showSearchingSpinner=function(){var e=this.$content.find(".js-entity-view-pages-searching");e.hasClass("hidden")&&e.removeClass("hidden").spin("medium")},GH.LinkedPagesInlineDialog.prototype._hideSearchingSpinner=function(){this.$content.find(".js-entity-view-pages-searching").addClass("hidden")},GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive").addClass("aui-iconfont-search-small")},GH.LinkedPagesInlineDialog.prototype.isSearchMode=function(){return this.$content.find(".js-link-page-panel").is(":visible")},GH.LinkedPagesInlineDialog.prototype.getSearchQuery=function(){return this.$content.find(".js-search-existing-pages-input").val()},GH.LinkedPagesInlineDialog.prototype.showSearch=function(e){this._showLinkPagePanel(),this.$content.find(".js-search-existing-pages-input").val(e).focus(),this._performSearch(e)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/FlagAndAddCommentDialog.soy' */
// This file was automatically generated from FlagAndAddCommentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialog.flagandcomment.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialog == 'undefined') { GH.tpl.dialog = {}; }
if (typeof GH.tpl.dialog.flagandcomment == 'undefined') { GH.tpl.dialog.flagandcomment = {}; }


GH.tpl.dialog.flagandcomment.dialogHeader = function(opt_data, opt_ignored) {
  return '<div class="flag-and-add-comment-header"><div class="flag-and-add-comment-summary"><span class="ghx-flag-icon"></span>' + ((opt_data.isAdd) ? soy.$$escapeHtml(AJS.format('Add flag to {0}',opt_data.issueKeys)) : soy.$$escapeHtml(AJS.format('Remove flag from {0}',opt_data.issueKeys))) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.dialogHeader.soyTemplateName = 'GH.tpl.dialog.flagandcomment.dialogHeader';
}


GH.tpl.dialog.flagandcomment.comment = function(opt_data, opt_ignored) {
  return ((opt_data.isAdd) ? '(flag) ' + soy.$$escapeHtml('Flag added') : '(flagoff) ' + soy.$$escapeHtml('Flag removed')) + '\n\n' + soy.$$escapeHtml(opt_data.content);
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.comment.soyTemplateName = 'GH.tpl.dialog.flagandcomment.comment';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/plan/IssueFlagAndCommentAction.js' */
define("jira-agile/rapid/ui/plan/issue-flag-and-comment-action",["jira/dialog/form-dialog","jira/dialog/dialog-util","jquery","underscore","jira-agile/browser-metrics/browser-metrics-util"],function(i,r,l,t,m){function g(n,i){return function(){var e=l("#flag-and-add-comment-dialog");e.find(".jira-dialog-heading > h2").html((a=n,i?AJS.format("Add flag and comment: {0} {0,choice,1#issue|1\u003cissues}",a.length):AJS.format("Remove flag and add comment: {0} {0,choice,1#issue|1\u003cissues}",a.length))).removeAttr("title");var a=e.find(".jira-dialog-content");a.prepend(GH.tpl.dialog.flagandcomment.dialogHeader({isAdd:i,issueKeys:n.join(", ")})),a.find("form").addClass("ajs-dirty-warning-exempt");e=e.find(".form-footer");e.find("p").remove(),e.find('.aui-button[type="submit"]').addClass("aui-button-primary flag-and-comment-form-popup-submit")}}function o(e,a,n){var t,o,d,n=new i({id:"flag-and-add-comment-dialog",url:AJS.contextPath()+"/secure/GHBulkCommentDialog.jspa?issueKeys="+encodeURIComponent(e.join(",")),submitHandler:(t=e,o=a,d=n,function(e){o?m.triggerBefore("before:addFlagSubmit","addFlag"):m.triggerBefore("before:removeFlagSubmit","removeFlag"),e.preventDefault();var a=this,n=l("#flag-and-add-comment-dialog").find(".jira-dialog-content form .comment-input"),i=n.find("textarea").val().trim(),e=i?GH.tpl.dialog.flagandcomment.comment({isAdd:o,content:i}):"",i=n.find(".security-level select option:selected").val(),n=i||"",i=l("#flag-and-add-comment-dialog").find("input[name=commentProperty]").val(),i=i?i.slice(1,-1):"";GH.IssueActions.flag(t,o,e,n,i).always(function(){a.hide()}).done(d)}),handleRedirect:!0,ajaxOptions:r.getDefaultAjaxOptions,isIssueDialog:!0,widthClass:"large"});return n.onContentReady(g(e,a)),n}var e={execute:function(e,a,n){o(e=!t.isArray(e)?[e]:e,a,n).show()}};return e}),AJS.namespace("GH.IssueFlagAndCommentAction.execute",null,require("jira-agile/rapid/ui/plan/issue-flag-and-comment-action").execute);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicQuickCreate.js' */
!function(){"use strict";var a=require("jquery"),i=require("jira-agile/features/feature-flags"),t=require("jira/featureflags/feature-manager"),c=!1,e=require("jira-agile/browser-metrics/browser-metrics-util"),r=require("jira/util/events");GH.EpicQuickCreate={},GH.EpicQuickCreate.quickCreateReset=!0,GH.EpicQuickCreate.createModel=function(){GH.EpicQuickCreate.Model=JIRA.Forms.CreateIssueModel.extend({getActiveFieldIds:function(){var i=a.Deferred(),t=[],e=[];c||e.push("summary"),e.push(GH.EpicConfig.getEpicLabelFieldId()),a.each(e,function(e,i){t.push(i)});var r=["issuetype","summary"];return this.getRequiredFields().done(function(e){a.each(e,function(e,i){-1!==a.inArray(i.id,t)||c&&-1!==a.inArray(i.id,r)||t.push(i.id)}),i.resolve(t)}),i.promise()},getIssueSetupFields:function(){if(c){var i=jQuery.Deferred(),t=[];return this.getFields().done(function(e){a.each(e,function(e,i){"project"===i.id&&t.push(i)}),i.resolve(t)}),i.promise()}return this._super()},getUseConfigurableForm:function(){var e=a.Deferred();return e.resolve(!0),e.promise()},setUseConfigurableForm:function(){}})},GH.EpicQuickCreate.ConfigurableForm=JIRA.Forms.ConfigurableCreateIssueForm.extend({serialize:function(){var e=this._super(),i=AJS.parseUri("?"+e).queryKey;return i.summary=i[GH.EpicConfig.getEpicLabelFieldId()],i.issuetype=GH.EpicConfig.getEpicIssueTypeId(),Object.keys(i).forEach(function(e){i[e]=decodeURIComponent(i[e])}),a.param(i)},getFieldById:function(e){var i=jQuery.Deferred();return"summary"!==e?this._super(e):(i.rejectWith(this,[]),i.promise())}}),GH.EpicQuickCreate.resetQuickCreate=function(){GH.EpicQuickCreate.quickCreateReset||(GH.EpicQuickCreate.quickCreateReset=!0,GH.EpicQuickCreate.storeQuickCreateDefaults(GH.EpicQuickCreate.createFormPreferences))},GH.EpicQuickCreate.rememberQuickCreateDefaults=function(){e.triggerBefore("before:epicCreatePopup"),GH.EpicQuickCreate.quickCreateReset&&(GH.EpicQuickCreate.quickCreateReset=!1,GH.EpicQuickCreate.loadQuickCreateDefaults().done(function(e){GH.EpicQuickCreate.createFormPreferences=e}).always(function(){e.performanceMark("api_call_done_epic_create")}))},GH.EpicQuickCreate.storeQuickCreateDefaults=function(e){return GH.Ajax.put({url:"/userData/quickEditDefaults",data:e})},GH.EpicQuickCreate.loadQuickCreateDefaults=function(){return GH.Ajax.get({url:"/userData/quickEditDefaults"},"quickEditDefaults")},GH.EpicQuickCreate.createCreateEpicForm=function(r){return r=r||{},new JIRA.Forms.Container(function(){r.globalEventNamespaces=r.globalEventNamespaces||["QuickCreateEpic"];var e=AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),i=new GH.EpicQuickCreate.Model({projectId:r.pid,issueType:r.issueType}),t=new JIRA.Forms.UnconfigurableCreateIssueForm({model:i,title:e,globalEventNamespaces:r.globalEventNamespaces}),e=new(c?GH.EpicQuickCreate.ConfigurableForm:JIRA.Forms.ConfigurableCreateIssueForm)({model:i,title:e,globalEventNamespaces:r.globalEventNamespaces});return{globalEventNamespaces:r.globalEventNamespaces,model:i,errorHandler:new JIRA.Forms.CreateIssueError,configurableForm:e,unconfigurableForm:t}})},AJS.$(GH).bind("issueCreated",function(e,i){GH.EpicQuickCreate.loadQuickCreateDefaults().done(function(e){GH.UserData.quickCreateDefaultIssueTypeId=e.issueTypeId});i=i.issues[0],i={objectType:"issue",objectId:i.issueId&&i.issueId.toString(),attributes:{projectType:"software"},action:"created",actionSubject:"issue",actionSubjectId:i.issueId,source:"backlogScreen"};r.trigger("legacyIssueCreated",i)}),GH.EpicQuickCreate.getCurrentIssueTypeId=function(){var e=GH.UserData.quickCreateDefaultIssueTypeId;return e=e===GH.EpicConfig.getEpicIssueTypeId()?GH.EpicConfig.getStoryIssueTypeId():e},GH.EpicQuickCreate.createCreateStoryForm=function(){var e=GH.UserData.quickCreateDefaultIssueTypeId;return e===GH.EpicConfig.getEpicIssueTypeId()&&(e=GH.EpicConfig.getStoryIssueTypeId()),JIRA.Forms.createCreateIssueForm({issueType:e})},GH.EpicQuickCreate.bindNewGICEvent=function(){r.bind("QuickCreateEpic.sessionComplete",function(){GH.EpicQuickCreate.resetQuickCreate()})},GH.EpicQuickCreate.registerCreateEpicDialog=function(){if(t.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&window.IssueCreate&&window.IssueCreate.Visibility){var e=window.IssueCreate.Visibility.isEnabled;if(e)return GH.EpicQuickCreate.bindNewGICEvent(),void AJS.$("#ghx-epic-column").find(".js-create-epic").each(function(){a(this).on("click",function(){var e=new CustomEvent("openIssueCreateDialog",{detail:{payload:{prefilledFields:{pid:GH.RapidBoard.projectId,issuetype:GH.EpicConfig.getEpicIssueTypeId()}},displayOnlyRequiredFields:!0,title:AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),windowTitle:AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),id:"create-epic-issue-dialog",globalEventNamespaces:["QuickCreateEpic"],triggerPointKey:"create-epic-issue-backlog-trigger"}});document.dispatchEvent(e),GH.EpicQuickCreate.rememberQuickCreateDefaults()})})}JIRA&&JIRA.Forms&&JIRA.Forms.CreateIssueModel&&(c=t.isFeatureEnabled(i.EPIC_CREATE_IMPROVEMENT),GH.EpicQuickCreate.createModel(),AJS.$("#ghx-epic-column").find(".js-create-epic").each(function(){var e=GH.EpicQuickCreate.createCreateEpicForm({issueType:GH.EpicConfig.getEpicIssueTypeId()}).asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),trigger:this,id:"create-epic-issue-dialog"});e.bind("Dialog.show",GH.EpicQuickCreate.rememberQuickCreateDefaults),e.bind("Dialog.hide",GH.EpicQuickCreate.resetQuickCreate)}))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/LegacyPlanDeferredNamespaces.js' */
AJS.namespace("GH.AssignedWorkDialog",null,require("jira-agile/rapid/ui/plan/assigned-work-dialog"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/d3-3.4.13.js' */
d3=function(){var L={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var i=[].slice,h=function(n){return i.call(n)},r=document,t=r.documentElement,T=window;try{h(t.childNodes)[0].nodeType}catch(n){h=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{r.createElement("div").style.setProperty("opacity",0,"")}catch(n){var e=T.Element.prototype,o=e.setAttribute,u=e.setAttributeNS,a=T.CSSStyleDeclaration.prototype,c=a.setProperty;e.setAttribute=function(n,t){o.call(this,n,t+"")},e.setAttributeNS=function(n,t,e){u.call(this,n,t,e+"")},a.setProperty=function(n,t,e){c.call(this,n,t+"",e)}}function l(n,t){return n<t?-1:t<n?1:t<=n?0:NaN}function f(n){return null===n?NaN:+n}function s(n){return!isNaN(n)}function n(o){return{left:function(n,t,e,r){for(arguments.length<3&&(e=0),arguments.length<4&&(r=n.length);e<r;){var i=e+r>>>1;o(n[i],t)<0?e=1+i:r=i}return e},right:function(n,t,e,r){for(arguments.length<3&&(e=0),arguments.length<4&&(r=n.length);e<r;){var i=e+r>>>1;0<o(n[i],t)?r=i:e=1+i}return e}}}L.ascending=l,L.descending=function(n,t){return t<n?-1:n<t?1:n<=t?0:NaN},L.min=function(n,t){var e,r,i=-1,o=n.length;if(1===arguments.length){for(;++i<o&&!(null!=(e=n[i])&&e<=e);)e=void 0;for(;++i<o;)null!=(r=n[i])&&r<e&&(e=r)}else{for(;++i<o&&!(null!=(e=t.call(n,n[i],i))&&e<=e);)e=void 0;for(;++i<o;)null!=(r=t.call(n,n[i],i))&&r<e&&(e=r)}return e},L.max=function(n,t){var e,r,i=-1,o=n.length;if(1===arguments.length){for(;++i<o&&!(null!=(e=n[i])&&e<=e);)e=void 0;for(;++i<o;)null!=(r=n[i])&&e<r&&(e=r)}else{for(;++i<o&&!(null!=(e=t.call(n,n[i],i))&&e<=e);)e=void 0;for(;++i<o;)null!=(r=t.call(n,n[i],i))&&e<r&&(e=r)}return e},L.extent=function(n,t){var e,r,i,o=-1,u=n.length;if(1===arguments.length){for(;++o<u&&!(null!=(e=i=n[o])&&e<=e);)e=i=void 0;for(;++o<u;)null!=(r=n[o])&&(r<e&&(e=r),i<r&&(i=r))}else{for(;++o<u&&!(null!=(e=i=t.call(n,n[o],o))&&e<=e);)e=void 0;for(;++o<u;)null!=(r=t.call(n,n[o],o))&&(r<e&&(e=r),i<r&&(i=r))}return[e,i]},L.sum=function(n,t){var e,r=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)s(e=+n[o])&&(r+=e);else for(;++o<i;)s(e=+t.call(n,n[o],o))&&(r+=e);return r},L.mean=function(n,t){var e,r=0,i=n.length,o=-1,u=i;if(1===arguments.length)for(;++o<i;)s(e=f(n[o]))?r+=e:--u;else for(;++o<i;)s(e=f(t.call(n,n[o],o)))?r+=e:--u;return u?r/u:void 0},L.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),t=+n[r-1],e=e-r;return e?t+e*(n[r]-t):t},L.median=function(n,t){var e,r=[],i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)s(e=f(n[o]))&&r.push(e);else for(;++o<i;)s(e=f(t.call(n,n[o],o)))&&r.push(e);return r.length?L.quantile(r.sort(l),.5):void 0};var p=n(l);function g(n){return n.length}L.bisectLeft=p.left,L.bisect=L.bisectRight=p.right,L.bisector=function(e){return n(1===e.length?function(n,t){return l(e(n),t)}:e)},L.shuffle=function(n){for(var t,e,r=n.length;r;)e=Math.random()*r--|0,t=n[r],n[r]=n[e],n[e]=t;return n},L.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},L.pairs=function(n){for(var t=0,e=n.length-1,r=n[0],i=new Array(e<0?0:e);t<e;)i[t]=[r,r=n[++t]];return i},L.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=L.min(arguments,g),e=new Array(t);++n<t;)for(var r,i=-1,o=e[n]=new Array(r);++i<r;)o[i]=arguments[i][n];return e},L.transpose=function(n){return L.zip.apply(L,n)},L.keys=function(n){var t,e=[];for(t in n)e.push(t);return e},L.values=function(n){var t,e=[];for(t in n)e.push(n[t]);return e},L.entries=function(n){var t,e=[];for(t in n)e.push({key:t,value:n[t]});return e},L.merge=function(n){for(var t,e,r,i=n.length,o=-1,u=0;++o<i;)u+=n[o].length;for(e=new Array(u);0<=--i;)for(t=(r=n[i]).length;0<=--t;)e[--u]=r[t];return e};var q=Math.abs;function d(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function m(){this._=Object.create(null)}L.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e==1/0)throw new Error("infinite range");var r,i=[],o=function(n){var t=1;for(;n*t%1;)t*=10;return t}(q(e)),u=-1;if(n*=o,t*=o,(e*=o)<0)for(;(r=n+e*++u)>t;)i.push(r/o);else for(;(r=n+e*++u)<t;)i.push(r/o);return i},L.map=function(n){var e=new m;if(n instanceof m)n.forEach(function(n,t){e.set(n,t)});else for(var t in n)e.set(t,n[t]);return e};var v="__proto__",y="\0";function x(n){return(n+="")===v||n[0]===y?y+n:n}function M(n){return(n+="")[0]===y?n.slice(1):n}function _(n){return x(n)in this._}function b(n){return(n=x(n))in this._&&delete this._[n]}function w(){var n,t=[];for(n in this._)t.push(M(n));return t}function S(){var n,t=0;for(n in this._)++t;return t}function k(){for(var n in this._)return!1;return!0}function N(){this._=Object.create(null)}function E(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=A.length;e<r;++e){var i=A[e]+t;if(i in n)return i}}d(m,{has:_,get:function(n){return this._[x(n)]},set:function(n,t){return this._[x(n)]=t},remove:b,keys:w,values:function(){var n,t=[];for(n in this._)t.push(this._[n]);return t},entries:function(){var n,t=[];for(n in this._)t.push({key:M(n),value:this._[n]});return t},size:S,empty:k,forEach:function(n){for(var t in this._)n.call(this,M(t),this._[t])}}),L.nest=function(){var s,h,p={},g=[],t=[];function d(e,n,r){if(r>=g.length)return h?h.call(p,n):s?n.sort(s):n;for(var t,i,o,u,a=-1,c=n.length,l=g[r++],f=new m;++a<c;)(u=f.get(t=l(i=n[a])))?u.push(i):f.set(t,[i]);return o=e?(i=e(),function(n,t){i.set(n,d(e,t,r))}):(i={},function(n,t){i[n]=d(e,t,r)}),f.forEach(o),i}return p.map=function(n,t){return d(t,n,0)},p.entries=function(n){return function e(n,r){if(r>=g.length)return n;var i=[],o=t[r++];return n.forEach(function(n,t){i.push({key:n,values:e(t,r)})}),o?i.sort(function(n,t){return o(n.key,t.key)}):i}(d(L.map,n,0),0)},p.key=function(n){return g.push(n),p},p.sortKeys=function(n){return t[g.length-1]=n,p},p.sortValues=function(n){return s=n,p},p.rollup=function(n){return h=n,p},p},L.set=function(n){var t=new N;if(n)for(var e=0,r=n.length;e<r;++e)t.add(n[e]);return t},d(N,{has:_,add:function(n){return this._[x(n+="")]=!0,n},remove:b,values:w,size:S,empty:k,forEach:function(n){for(var t in this._)n.call(this,M(t))}}),L.behavior={},L.rebind=function(n,t){for(var e,r=1,i=arguments.length;++r<i;)n[e=arguments[r]]=function(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}(n,t,t[e]);return n};var A=["webkit","ms","moz","Moz","o","O"];function C(){}function z(){}function R(i){var o=[],r=new m;function n(){for(var n,t=o,e=-1,r=t.length;++e<r;)(n=t[e].on)&&n.apply(this,arguments);return i}return n.on=function(n,t){var e=r.get(n);return arguments.length<2?e&&e.on:(e&&(e.on=null,o=o.slice(0,e=o.indexOf(e)).concat(o.slice(e+1)),r.remove(n)),t&&o.push(r.set(n,{on:t})),i)},n}function D(){L.event.preventDefault()}function P(){for(var n,t=L.event;n=t.sourceEvent;)t=n;return t}function U(i){for(var o=new z,n=0,t=arguments.length;++n<t;)o[arguments[n]]=R(o);return o.of=function(e,r){return function(n){try{var t=n.sourceEvent=L.event;n.target=i,L.event=n,o[n.type].apply(e,r)}finally{L.event=t}}},o}L.dispatch=function(){for(var n=new z,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=R(n);return n},z.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(0<=e&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},L.event=null,L.requote=function(n){return n.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,F={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]};function H(n){return F(n,V),n}var O=function(n,t){return t.querySelector(n)},Y=function(n,t){return t.querySelectorAll(n)},I=t.matches||t[E(t,"matchesSelector")],Z=function(n,t){return I.call(n,t)};"function"==typeof Sizzle&&(O=function(n,t){return Sizzle(n,t)[0]||null},Z=(Y=Sizzle).matchesSelector),L.selection=function(){return sn};var V=L.selection.prototype=[];function X(n){return"function"==typeof n?n:function(){return O(n,this)}}function $(n){return"function"==typeof n?n:function(){return Y(n,this)}}V.select=function(n){var t,e,r,i,o=[];n=X(n);for(var u=-1,a=this.length;++u<a;){o.push(t=[]),t.parentNode=(r=this[u]).parentNode;for(var c=-1,l=r.length;++c<l;)(i=r[c])?(t.push(e=n.call(i,i.__data__,c,u)),e&&"__data__"in i&&(e.__data__=i.__data__)):t.push(null)}return H(o)},V.selectAll=function(n){var t,e,r=[];n=$(n);for(var i=-1,o=this.length;++i<o;)for(var u=this[i],a=-1,c=u.length;++a<c;)(e=u[a])&&(r.push(t=h(n.call(e,e.__data__,a,i))),t.parentNode=e);return H(r)};var B={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function W(t,e){return t=L.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function J(n){return n.trim().replace(/\s+/g," ")}function G(n){return new RegExp("(?:^|\\s+)"+L.requote(n)+"(?:\\s+|$)","g")}function K(n){return(n+"").trim().split(/^|\s+/)}function Q(e,r){var i=(e=K(e).map(nn)).length;return"function"==typeof r?function(){for(var n=-1,t=r.apply(this,arguments);++n<i;)e[n](this,t)}:function(){for(var n=-1;++n<i;)e[n](this,r)}}function nn(r){var i=G(r);return function(n,t){if(e=n.classList)return t?e.add(r):e.remove(r);var e=n.getAttribute("class")||"";t?(i.lastIndex=0,i.test(e)||n.setAttribute("class",J(e+" "+r))):n.setAttribute("class",J(e.replace(i," ")))}}function tn(t,e,r){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}:function(){this.style.setProperty(t,e,r)}}function en(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function rn(n){return"function"==typeof n?n:(n=L.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function on(n){return{__data__:n}}function un(n){return function(){return Z(this,n)}}function an(n,t){for(var e=0,r=n.length;e<r;e++)for(var i,o=n[e],u=0,a=o.length;u<a;u++)(i=o[u])&&t(i,u,e);return n}function cn(n){return F(n,ln),n}L.ns={prefix:B,qualify:function(n){var t=n.indexOf(":"),e=n;return 0<=t&&(e=n.slice(0,t),n=n.slice(t+1)),B.hasOwnProperty(e)?{space:B[e],local:n}:n}},V.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return(n=L.ns.qualify(n)).local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(W(t,n[t]));return this}return this.each(W(n,t))},V.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=K(n)).length,i=-1;if(t=e.classList){for(;++i<r;)if(!t.contains(n[i]))return!1}else for(t=e.getAttribute("class");++i<r;)if(!G(n[i]).test(t))return!1;return!0}for(t in n)this.each(Q(t,n[t]));return this}return this.each(Q(n,t))},V.style=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){for(e in r<2&&(t=""),n)this.each(tn(e,n[e],t));return this}if(r<2)return T.getComputedStyle(this.node(),null).getPropertyValue(n);e=""}return this.each(tn(n,t,e))},V.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(en(t,n[t]));return this}return this.each(en(n,t))},V.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},V.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},V.append=function(n){return n=rn(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},V.insert=function(n,t){return n=rn(n),t=X(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},V.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})},V.data=function(n,g){var t,e,r=-1,i=this.length;if(!arguments.length){for(n=new Array(i=(t=this[0]).length);++r<i;)(e=t[r])&&(n[r]=e.__data__);return n}function o(n,t){var e,r,i=n.length,o=t.length,u=Math.min(i,o),a=new Array(o),c=new Array(o),l=new Array(i);if(g){for(var f,s=new m,h=new Array(i),p=-1;++p<i;)s.has(f=g.call(e=n[p],e.__data__,p))?l[p]=e:s.set(f,e),h[p]=f;for(p=-1;++p<o;)(e=s.get(f=g.call(t,r=t[p],p)))?!0!==e&&((a[p]=e).__data__=r):c[p]=on(r),s.set(f,!0);for(p=-1;++p<i;)!0!==s.get(h[p])&&(l[p]=n[p])}else{for(p=-1;++p<u;)e=n[p],r=t[p],e?(e.__data__=r,a[p]=e):c[p]=on(r);for(;p<o;++p)c[p]=on(t[p]);for(;p<i;++p)l[p]=n[p]}c.update=a,c.parentNode=a.parentNode=l.parentNode=n.parentNode,d.push(c),v.push(a),y.push(l)}var d=cn([]),v=H([]),y=H([]);if("function"==typeof n)for(;++r<i;)o(t=this[r],n.call(t,t.parentNode.__data__,r));else for(;++r<i;)o(t=this[r],n);return v.enter=function(){return d},v.exit=function(){return y},v},V.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},V.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=un(n));for(var o=0,u=this.length;o<u;o++){i.push(t=[]),t.parentNode=(e=this[o]).parentNode;for(var a=0,c=e.length;a<c;a++)(r=e[a])&&n.call(r,r.__data__,a,o)&&t.push(r)}return H(i)},V.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],i=r.length-1,o=r[i];0<=--i;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},V.sort=function(n){n=function(e){arguments.length||(e=l);return function(n,t){return n&&t?e(n.__data__,t.__data__):!n-!t}}.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},V.each=function(r){return an(this,function(n,t,e){r.call(n,n.__data__,t,e)})},V.call=function(n){var t=h(arguments);return n.apply(t[0]=this,t),this},V.empty=function(){return!this.node()},V.node=function(){for(var n=0,t=this.length;n<t;n++)for(var e=this[n],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},V.size=function(){var n=0;return an(this,function(){++n}),n};var ln=[];function fn(){var n=this.__transition__;n&&++n.active}L.selection.enter=cn,(L.selection.enter.prototype=ln).append=V.append,ln.empty=V.empty,ln.node=V.node,ln.call=V.call,ln.size=V.size,ln.select=function(n){for(var t,e,r,i,o,u=[],a=-1,c=this.length;++a<c;){r=(i=this[a]).update,u.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,f=i.length;++l<f;)(o=i[l])?(t.push(r[l]=e=n.call(i.parentNode,o.__data__,l,a)),e.__data__=o.__data__):t.push(null)}return H(u)},ln.insert=function(n,t){var u,a,c;return arguments.length<2&&(u=this,t=function(n,t,e){var r,i=u[e].update,o=i.length;for(e!=c&&(c=e,a=0),a<=t&&(a=t+1);!(r=i[a])&&++a<o;);return r}),V.insert.call(this,n,t)},V.transition=function(){for(var n,t,e=ba||++ka,r=[],i=wa||{time:Date.now(),ease:So,delay:0,duration:250},o=-1,u=this.length;++o<u;){r.push(n=[]);for(var a=this[o],c=-1,l=a.length;++c<l;)(t=a[c])&&Aa(t,c,e,i),n.push(t)}return _a(r,e)},V.interrupt=function(){return this.each(fn)},L.select=function(n){n=["string"==typeof n?O(n,r):n];return n.parentNode=t,H([n])},L.selectAll=function(n){n=h("string"==typeof n?Y(n,r):n);return n.parentNode=t,H([n])};var sn=L.select(t);function hn(i,t,e){var r="__on"+i,n=i.indexOf("."),o=gn;0<n&&(i=i.slice(0,n));var u=pn.get(i);function a(){var n=this[r];n&&(this.removeEventListener(i,n,n.$),delete this[r])}return u&&(i=u,o=dn),n?t?function(){var n=o(t,h(arguments));a.call(this),this.addEventListener(i,this[r]=n,n.$=e),n._=t}:a:t?C:function(){var n,t,e,r=new RegExp("^__on([^.]+)"+L.requote(i)+"$");for(t in this)(n=t.match(r))&&(e=this[t],this.removeEventListener(n[1],e,e.$),delete this[t])}}V.on=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){for(e in r<2&&(t=!1),n)this.each(hn(e,n[e],t));return this}if(r<2)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(hn(n,t,e))};var pn=L.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gn(e,r){return function(n){var t=L.event;L.event=n,r[0]=this.__data__;try{e.apply(this,r)}finally{L.event=t}}}function dn(n,t){var e=gn(n,t);return function(n){var t=n.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||e.call(this,n)}}pn.forEach(function(n){"on"+n in r&&pn.remove(n)});var vn="onselectstart"in r?null:E(t.style,"userSelect"),yn=0;function mn(){var e,r,i=".dragsuppress-"+ ++yn,o="click"+i,u=L.select(T).on("touchmove"+i,D).on("dragstart"+i,D).on("selectstart"+i,D);return vn&&(e=t.style,r=e[vn],e[vn]="none"),function(n){function t(){u.on(o,null)}u.on(i,null),vn&&(e[vn]=r),n&&(u.on(o,function(){D(),t()},!0),setTimeout(t,0))}}L.mouse=function(n){return Mn(n,P())};var xn=/WebKit/.test(T.navigator.userAgent)?-1:0;function Mn(n,t){if(t.changedTouches&&(t=t.changedTouches[0]),(e=n.ownerSVGElement||n).createSVGPoint){var e,r,i=e.createSVGPoint();return xn<0&&(T.scrollX||T.scrollY)&&(r=(e=L.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),xn=!(r.f||r.e),e.remove()),xn?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),[(i=i.matrixTransform(n.getScreenCTM().inverse())).x,i.y]}i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}function _n(){return L.event.changedTouches[0].identifier}function bn(){return L.event.target}function wn(){return T}L.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=P().changedTouches),t)for(var r,i=0,o=t.length;i<o;++i)if((r=t[i]).identifier===e)return Mn(n,r)},L.behavior.drag=function(){var d=U(e,"drag","dragstart","dragend"),v=null,n=r(C,L.mouse,wn,"mousemove","mouseup"),t=r(_n,L.touch,bn,"touchmove","touchend");function e(){this.on("mousedown.drag",n).on("touchstart.drag",t)}function r(f,s,h,p,g){return function(){var r,n=L.event.target,i=this.parentNode,o=d.of(this,arguments),u=0,a=f(),t=".drag"+(null==a?"":"-"+a),e=L.select(h()).on(p+t,function(){var n,t,e=s(i,a);e&&(n=e[0]-l[0],t=e[1]-l[1],u|=n|t,o({type:"drag",x:(l=e)[0]+r[0],y:e[1]+r[1],dx:n,dy:t}))}).on(g+t,function(){s(i,a)&&(e.on(p+t,null).on(g+t,null),c(u&&L.event.target===n),o({type:"dragend"}))}),c=mn(),l=s(i,a);r=v?[(r=v.apply(this,arguments)).x-l[0],r.y-l[1]]:[0,0],o({type:"dragstart"})}}return e.origin=function(n){return arguments.length?(v=n,e):v},L.rebind(e,d,"on")},L.touches=function(e,n){return(n=arguments.length<2?P().touches:n)?h(n).map(function(n){var t=Mn(e,n);return t.identifier=n.identifier,t}):[]};var Sn=Math.PI,kn=2*Sn,Nn=Sn/2,En=1e-6,An=En*En,Cn=Sn/180,zn=180/Sn;function Ln(n){return 0<n?1:n<0?-1:0}function Tn(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function qn(n){return 1<n?0:n<-1?Sn:Math.acos(n)}function Rn(n){return 1<n?Nn:n<-1?-Nn:Math.asin(n)}function Dn(n){return((n=Math.exp(n))+1/n)/2}function Pn(n){return(n=Math.sin(n/2))*n}var Un=Math.SQRT2;L.interpolateZoom=function(n,t){var i=n[0],o=n[1],u=n[2],e=t[0],n=t[1],t=t[2],a=e-i,c=n-o,e=a*a+c*c,l=Math.sqrt(e),n=(t*t-u*u+4*e)/(2*u*2*l),e=(t*t-u*u-4*e)/(2*t*2*l),f=Math.log(Math.sqrt(n*n+1)-n),s=Math.log(Math.sqrt(e*e+1)-e)-f,h=(s||Math.log(t/u))/Un;function r(n){var t=n*h;if(s){var e=Dn(f),r=u/(2*l)*(e*(r=Un*t+f,((r=Math.exp(2*r))-1)/(r+1))-(r=f,((r=Math.exp(f))-1/r)/2));return[i+r*a,o+r*c,u*e/Dn(Un*t+f)]}return[i+n*a,o+n*c,u*Math.exp(Un*t)]}return r.duration=1e3*h,r},L.behavior.zoom=function(){var t,e,r,i,m,o,u,a,c,x={x:0,y:0,k:1},l=[960,500],f=Fn,M="mousedown.zoom",s="mousemove.zoom",h="mouseup.zoom",_="touchstart.zoom",b=U(p,"zoomstart","zoom","zoomend");function p(n){n.on(M,C).on(Hn+".zoom",d).on("dblclick.zoom",v).on(_,z)}function w(n){return[(n[0]-x.x)/x.k,(n[1]-x.y)/x.k]}function S(n){x.k=Math.max(f[0],Math.min(f[1],n))}function k(n,t){var e;t=[(e=t)[0]*x.k+x.x,e[1]*x.k+x.y],x.x+=n[0]-t[0],x.y+=n[1]-t[1]}function g(){u&&u.domain(o.range().map(function(n){return(n-x.x)/x.k}).map(o.invert)),c&&c.domain(a.range().map(function(n){return(n-x.y)/x.k}).map(a.invert))}function N(n){n({type:"zoomstart"})}function E(n){g(),n({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function A(n){n({type:"zoomend"})}function C(){var n=this,t=L.event.target,e=b.of(n,arguments),r=0,i=L.select(T).on(s,function(){r=1,k(L.mouse(n),o),E(e)}).on(h,function(){i.on(s,null).on(h,null),u(r&&L.event.target===t),A(e)}),o=w(L.mouse(n)),u=mn();fn.call(n),N(e)}function z(){var c,l=this,f=b.of(l,arguments),s={},h=0,i=".zoom-"+L.event.changedTouches[0].identifier,a="touchmove"+i,p="touchend"+i,g=[],o=L.select(l),u=mn();function d(){var n=L.touches(l);return c=x.k,n.forEach(function(n){n.identifier in s&&(s[n.identifier]=w(n))}),n}function n(){var n=L.event.target;L.select(n).on(a,v).on(p,y),g.push(n);for(var t=L.event.changedTouches,e=0,r=t.length;e<r;++e)s[t[e].identifier]=null;var i,o=d(),u=Date.now();1===o.length?(u-m<500&&(i=o[0],n=s[i.identifier],S(2*x.k),k(i,n),D(),E(f)),m=u):1<o.length&&(i=o[0],u=o[1],o=i[0]-u[0],u=i[1]-u[1],h=o*o+u*u)}function v(){for(var n,t,e,r,i,o=L.touches(l),u=0,a=o.length;u<a;++u,t=null)if(n=o[u],t=s[n.identifier]){if(i)break;r=n,i=t}t&&(e=(e=n[0]-r[0])*e+(e=n[1]-r[1])*e,e=h&&Math.sqrt(e/h),r=[(r[0]+n[0])/2,(r[1]+n[1])/2],i=[(i[0]+t[0])/2,(i[1]+t[1])/2],S(e*c)),m=null,k(r,i),E(f)}function y(){if(L.event.touches.length){for(var n,t=L.event.changedTouches,e=0,r=t.length;e<r;++e)delete s[t[e].identifier];for(n in s)return void d()}L.selectAll(g).on(i,null),o.on(M,C).on(_,z),u(),A(f)}fn.call(l),n(),N(f),o.on(M,null).on(_,n)}function d(){var n=b.of(this,arguments);i?clearTimeout(i):(t=w(e=r||L.mouse(this)),fn.call(this),N(n)),i=setTimeout(function(){i=null,A(n)},50),D(),S(Math.pow(2,.002*jn())*x.k),k(e,t),E(n)}function v(){var n=b.of(this,arguments),t=L.mouse(this),e=w(t),r=Math.log(x.k)/Math.LN2;N(n),S(Math.pow(2,L.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)),k(t,e),E(n),A(n)}return p.event=function(n){n.each(function(){var u=b.of(this,arguments),t=x;ba?L.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1},N(u)}).tween("zoom:zoom",function(){var e=l[0],n=l[1],r=e/2,i=n/2,o=L.interpolateZoom([(r-x.x)/x.k,(i-x.y)/x.k,e/x.k],[(r-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(n){var t=o(n),n=e/t[2];this.__chart__=x={x:r-t[0]*n,y:i-t[1]*n,k:n},E(u)}}).each("end.zoom",function(){A(u)}):(this.__chart__=x,N(u),E(u),A(u))})},p.translate=function(n){return arguments.length?(x={x:+n[0],y:+n[1],k:x.k},g(),p):[x.x,x.y]},p.scale=function(n){return arguments.length?(x={x:x.x,y:x.y,k:+n},g(),p):x.k},p.scaleExtent=function(n){return arguments.length?(f=null==n?Fn:[+n[0],+n[1]],p):f},p.center=function(n){return arguments.length?(r=n&&[+n[0],+n[1]],p):r},p.size=function(n){return arguments.length?(l=n&&[+n[0],+n[1]],p):l},p.x=function(n){return arguments.length?(o=(u=n).copy(),x={x:0,y:0,k:1},p):u},p.y=function(n){return arguments.length?(a=(c=n).copy(),x={x:0,y:0,k:1},p):c},L.rebind(p,b,"on")};var jn,Fn=[0,1/0],Hn="onwheel"in r?(jn=function(){return-L.event.deltaY*(L.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(jn=function(){return L.event.wheelDelta},"mousewheel"):(jn=function(){return-L.event.detail},"MozMousePixelScroll");function On(){}function Yn(n,t,e){return this instanceof Yn?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof Yn?new Yn(n.h,n.s,n.l):ut(""+n,at,Yn):new Yn(n,t,e)}(L.color=On).prototype.toString=function(){return this.rgb()+""};e=(L.hsl=Yn).prototype=new On;function In(n,t,e){var r,i;function o(n){return Math.round(255*(360<(n=n)?n-=360:n<0&&(n+=360),n<60?r+(i-r)*n/60:n<180?i:n<240?r+(i-r)*(240-n)/60:r))}return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)||t<0?0:1<t?1:t,r=2*(e=e<0?0:1<e?1:e)-(i=e<=.5?e*(1+t):e+t-e*t),new et(o(n+120),o(n),o(n-120))}function Zn(n,t,e){return this instanceof Zn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof Zn?new Zn(n.h,n.c,n.l):Kn((n instanceof Xn?n:n=ct((n=L.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new Zn(n,t,e)}e.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new Yn(this.h,this.s,this.l/n)},e.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new Yn(this.h,this.s,n*this.l)},e.rgb=function(){return In(this.h,this.s,this.l)};a=(L.hcl=Zn).prototype=new On;function Vn(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new Xn(e,Math.cos(n*=Cn)*t,Math.sin(n)*t)}function Xn(n,t,e){return this instanceof Xn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof Xn?new Xn(n.l,n.a,n.b):n instanceof Zn?Vn(n.h,n.c,n.l):ct((n=et(n)).r,n.g,n.b):new Xn(n,t,e)}a.brighter=function(n){return new Zn(this.h,this.c,Math.min(100,this.l+$n*(arguments.length?n:1)))},a.darker=function(n){return new Zn(this.h,this.c,Math.max(0,this.l-$n*(arguments.length?n:1)))},a.rgb=function(){return Vn(this.h,this.c,this.l).rgb()},L.lab=Xn;var $n=18,Bn=.95047,Wn=1,Jn=1.08883,p=Xn.prototype=new On;function Gn(n,t,e){var n=(n+16)/116,e=n-e/200;return new et(tt(3.2404542*(t=Qn(t=n+t/500)*Bn)-1.5371385*(n=Qn(n)*Wn)-.4985314*(e=Qn(e)*Jn)),tt(-.969266*t+1.8760108*n+.041556*e),tt(.0556434*t-.2040259*n+1.0572252*e))}function Kn(n,t,e){return 0<n?new Zn(Math.atan2(e,t)*zn,Math.sqrt(t*t+e*e),n):new Zn(NaN,NaN,n)}function Qn(n){return.206893034<n?n*n*n:(n-4/29)/7.787037}function nt(n){return.008856<n?Math.pow(n,1/3):7.787037*n+4/29}function tt(n){return Math.round(255*(n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function et(n,t,e){return this instanceof et?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof et?new et(n.r,n.g,n.b):ut(""+n,et,In):new et(n,t,e)}function rt(n){return new et(n>>16,n>>8&255,255&n)}function it(n){return rt(n)+""}p.brighter=function(n){return new Xn(Math.min(100,this.l+$n*(arguments.length?n:1)),this.a,this.b)},p.darker=function(n){return new Xn(Math.max(0,this.l-$n*(arguments.length?n:1)),this.a,this.b)},p.rgb=function(){return Gn(this.l,this.a,this.b)};e=(L.rgb=et).prototype=new On;function ot(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function ut(n,t,e){var r,i=0,o=0,u=0,a=/([a-z]+)\((.*)\)/i.exec(n);if(a)switch(r=a[2].split(","),a[1]){case"hsl":return e(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(ft(r[0]),ft(r[1]),ft(r[2]))}return(a=st.get(n))?t(a.r,a.g,a.b):(null==n||"#"!==n.charAt(0)||isNaN(a=parseInt(n.slice(1),16))||(4===n.length?(i=(3840&a)>>4,i|=i>>4,o=240&a,o|=o>>4,u=15&a,u|=u<<4):7===n.length&&(i=(16711680&a)>>16,o=(65280&a)>>8,u=255&a)),t(i,o,u))}function at(n,t,e){var r,i,o=Math.min(n/=255,t/=255,e/=255),u=Math.max(n,t,e),a=u-o,c=(u+o)/2;return a?(i=c<.5?a/(u+o):a/(2-u-o),r=n==u?(t-e)/a+(t<e?6:0):t==u?(e-n)/a+2:(n-t)/a+4,r*=60):(r=NaN,i=0<c&&c<1?0:r),new Yn(r,i,c)}function ct(n,t,e){var r=nt((.4124564*(n=lt(n))+.3575761*(t=lt(t))+.1804375*(e=lt(e)))/Bn),i=nt((.2126729*n+.7151522*t+.072175*e)/Wn);return Xn(116*i-16,500*(r-i),200*(i-nt((.0193339*n+.119192*t+.9503041*e)/Jn)))}function lt(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function ft(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}e.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b;return t||e||r?(t&&t<30&&(t=30),e&&e<30&&(e=30),r&&r<30&&(r=30),new et(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new et(30,30,30)},e.darker=function(n){return new et((n=Math.pow(.7,arguments.length?n:1))*this.r,n*this.g,n*this.b)},e.hsl=function(){return at(this.r,this.g,this.b)},e.toString=function(){return"#"+ot(this.r)+ot(this.g)+ot(this.b)};var st=L.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ht(n){return"function"==typeof n?n:function(){return n}}function pt(n){return n}function gt(r){return function(n,t,e){return 2===arguments.length&&"function"==typeof t&&(e=t,t=null),dt(n,t,r,e)}}function dt(i,o,u,n){var e,a={},c=L.dispatch("beforesend","progress","load","error"),l={},f=new XMLHttpRequest,s=null;function t(){var n,t,e,r=f.status;if(!r&&((e=(t=f).responseType)&&"text"!==e?t.response:t.responseText)||200<=r&&r<300||304===r){try{n=u.call(a,f)}catch(n){return void c.error.call(a,n)}c.load.call(a,n)}else c.error.call(a,f)}return"onload"in(f=T.XDomainRequest&&!("withCredentials"in f)&&/^(http(s)?:)?\/\//.test(i)?new XDomainRequest:f)?f.onload=f.onerror=t:f.onreadystatechange=function(){3<f.readyState&&t()},f.onprogress=function(n){var t=L.event;L.event=n;try{c.progress.call(a,f)}finally{L.event=t}},a.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?l[n]:(null==t?delete l[n]:l[n]=t+"",a)},a.mimeType=function(n){return arguments.length?(o=null==n?null:n+"",a):o},a.responseType=function(n){return arguments.length?(s=n,a):s},a.response=function(n){return u=n,a},["get","post"].forEach(function(n){a[n]=function(){return a.send.apply(a,[n].concat(h(arguments)))}}),a.send=function(n,t,e){if(2===arguments.length&&"function"==typeof t&&(e=t,t=null),f.open(n,i,!0),null==o||"accept"in l||(l.accept=o+",*/*"),f.setRequestHeader)for(var r in l)f.setRequestHeader(r,l[r]);return null!=o&&f.overrideMimeType&&f.overrideMimeType(o),null!=s&&(f.responseType=s),null!=e&&a.on("error",e).on("load",function(n){e(null,n)}),c.beforesend.call(a,f),f.send(null==t?null:t),a},a.abort=function(){return f.abort(),a},L.rebind(a,c,"on"),null==n?a:a.get(1===(e=n).length?function(n,t){e(null==n?t:null)}:e)}st.forEach(function(n,t){st.set(n,rt(t))}),L.functor=ht,L.xhr=gt(pt),L.dsv=function(i,o){var t=new RegExp('["'+i+"\n]"),h=i.charCodeAt(0);function u(n,t,e){arguments.length<3&&(e=t,t=null);var r=dt(n,o,null==t?a:c(t),e);return r.row=function(n){return arguments.length?r.response(null==(t=n)?a:c(n)):t},r}function a(n){return u.parse(n.responseText)}function c(t){return function(n){return u.parse(n.responseText,t)}}function e(n){return n.map(l).join(i)}function l(n){return t.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}return u.parse=function(n,r){var i;return u.parseRows(n,function(n,t){if(i)return i(n,t-1);var e=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");i=r?function(n,t){return r(e(n),t)}:e})},u.parseRows=function(i,n){var t,o,u={},a={},e=[],c=i.length,l=0,r=0;function f(){if(c<=l)return a;if(o)return o=!1,u;var n=l;if(34===i.charCodeAt(n)){for(var t=n;t++<c;)if(34===i.charCodeAt(t)){if(34!==i.charCodeAt(t+1))break;++t}return l=t+2,13===(e=i.charCodeAt(t+1))?(o=!0,10===i.charCodeAt(t+2)&&++l):10===e&&(o=!0),i.slice(n+1,t).replace(/""/g,'"')}for(;l<c;){var e,r=1;if(10===(e=i.charCodeAt(l++)))o=!0;else if(13===e)o=!0,10===i.charCodeAt(l)&&(++l,++r);else if(e!==h)continue;return i.slice(n,l-r)}return i.slice(n)}for(;(t=f())!==a;){for(var s=[];t!==u&&t!==a;)s.push(t),t=f();n&&null==(s=n(s,r++))||e.push(s)}return e},u.format=function(n){if(Array.isArray(n[0]))return u.formatRows(n);var e=new N,r=[];return n.forEach(function(n){for(var t in n)e.has(t)||r.push(e.add(t))}),[r.map(l).join(i)].concat(n.map(function(t){return r.map(function(n){return l(t[n])}).join(i)})).join("\n")},u.formatRows=function(n){return n.map(e).join("\n")},u},L.csv=L.dsv(",","text/csv"),L.tsv=L.dsv("\t","text/tab-separated-values");var vt,yt,mt,xt,Mt,_t=T[E(T,"requestAnimationFrame")]||function(n){setTimeout(n,17)};function bt(){var n=wt(),n=St()-n;24<n?(isFinite(n)&&(clearTimeout(xt),xt=setTimeout(bt,n)),mt=0):(mt=1,_t(bt))}function wt(){var n=Date.now();for(Mt=vt;Mt;)n>=Mt.t&&(Mt.f=Mt.c(n-Mt.t)),Mt=Mt.n;return n}function St(){for(var n,t=vt,e=1/0;t;)t=t.f?n?n.n=t.n:vt=t.n:(t.t<e&&(e=t.t),(n=t).n);return yt=n,e}function kt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}L.timer=function(n,t,e){var r=arguments.length;r<2&&(t=0);r={c:n,t:(e=r<3?Date.now():e)+t,f:!1,n:null};yt?yt.n=r:vt=r,yt=r,mt||(xt=clearTimeout(xt),mt=1,_t(bt))},L.timer.flush=function(){wt(),St()},L.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var Nt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(n,t){var e=Math.pow(10,3*q(8-t));return{scale:8<t?function(n){return n/e}:function(n){return n*e},symbol:n}});L.formatPrefix=function(n,t){var e=0;return n&&(n<0&&(n*=-1),t&&(n=L.round(n,kt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),Nt[8+e/3]};var Et=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,At=L.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=L.round(n,kt(n,t))).toFixed(Math.max(0,Math.min(20,kt(n*(1+1e-15),t))))}});function Ct(n){return n+""}var zt=L.time={},Lt=Date;function Tt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Tt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){qt.setUTCDate.apply(this._,arguments)},setDay:function(){qt.setUTCDay.apply(this._,arguments)},setFullYear:function(){qt.setUTCFullYear.apply(this._,arguments)},setHours:function(){qt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){qt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){qt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){qt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){qt.setUTCSeconds.apply(this._,arguments)},setTime:function(){qt.setTime.apply(this._,arguments)}};var qt=Date.prototype;function Rt(r,o,u){function n(n){var t=r(n),e=i(t,1);return n-t<e-n?t:e}function a(n){return o(n=r(new Lt(n-1)),1),n}function i(n,t){return o(n=new Lt(+n),t),n}function c(n,t,e){var r=a(n),i=[];if(1<e)for(;r<t;)u(r)%e||i.push(new Date(+r)),o(r,1);else for(;r<t;)i.push(new Date(+r)),o(r,1);return i}(r.floor=r).round=n,r.ceil=a,r.offset=i,r.range=c;var t=r.utc=Dt(r);return(t.floor=t).round=Dt(n),t.ceil=Dt(a),t.offset=Dt(i),t.range=function(n,t,e){try{var r=new(Lt=Tt);return r._=n,c(r,t,e)}finally{Lt=Date}},r}function Dt(r){return function(n,t){try{var e=new(Lt=Tt);return e._=n,r(e,t)._}finally{Lt=Date}}}function Pt(n){var t=n.dateTime,e=n.date,r=n.time,i=n.periods,o=n.days,u=n.shortDays,a=n.months,c=n.shortMonths;function l(a){var c=a.length;function n(n){for(var t,e,r,i=[],o=-1,u=0;++o<c;)37===a.charCodeAt(o)&&(i.push(a.slice(u,o)),null!=(e=Ut[t=a.charAt(++o)])&&(t=a.charAt(++o)),(r=M[t])&&(t=r(n,null==e?"e"===t?" ":"0":e)),i.push(t),u=o+1);return i.push(a.slice(u,o)),i.join("")}return n.parse=function(n){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(t,a,n,0)!=n.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);var e=null!=t.Z&&Lt!==Tt,n=new(e?Tt:Lt);return"j"in t?n.setFullYear(t.y,0,t.j):"w"in t&&("W"in t||"U"in t)?(n.setFullYear(t.y,0,1),n.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(n.getDay()+5)%7:t.w+7*t.U-(n.getDay()+6)%7)):n.setFullYear(t.y,t.m,t.d),n.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L),e?n._:n},n.toString=function(){return a},n}function f(n,t,e,r){for(var i,o,u=0,a=t.length,c=e.length;u<a;){if(c<=r)return-1;if(37===(i=t.charCodeAt(u++))){if(o=t.charAt(u++),!(o=_[o in Ut?t.charAt(u++):o])||(r=o(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}l.multi=(l.utc=function(n){var e=l(n);function t(n){try{var t=new(Lt=Tt);return t._=n,e(t)}finally{Lt=Date}}return t.parse=function(n){try{Lt=Tt;var t=e.parse(n);return t&&t._}finally{Lt=Date}},t.toString=e.toString,t}).multi=ie;var s=L.map(),h=Ot(o),p=Yt(o),g=Ot(u),d=Yt(u),v=Ot(a),y=Yt(a),m=Ot(c),x=Yt(c);i.forEach(function(n,t){s.set(n.toLowerCase(),t)});var M={a:function(n){return u[n.getDay()]},A:function(n){return o[n.getDay()]},b:function(n){return c[n.getMonth()]},B:function(n){return a[n.getMonth()]},c:l(t),d:function(n,t){return Ht(n.getDate(),t,2)},e:function(n,t){return Ht(n.getDate(),t,2)},H:function(n,t){return Ht(n.getHours(),t,2)},I:function(n,t){return Ht(n.getHours()%12||12,t,2)},j:function(n,t){return Ht(1+zt.dayOfYear(n),t,3)},L:function(n,t){return Ht(n.getMilliseconds(),t,3)},m:function(n,t){return Ht(n.getMonth()+1,t,2)},M:function(n,t){return Ht(n.getMinutes(),t,2)},p:function(n){return i[+(12<=n.getHours())]},S:function(n,t){return Ht(n.getSeconds(),t,2)},U:function(n,t){return Ht(zt.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Ht(zt.mondayOfYear(n),t,2)},x:l(e),X:l(r),y:function(n,t){return Ht(n.getFullYear()%100,t,2)},Y:function(n,t){return Ht(n.getFullYear()%1e4,t,4)},Z:ee,"%":function(){return"%"}},_={a:function(n,t,e){g.lastIndex=0;t=g.exec(t.slice(e));return t?(n.w=d.get(t[0].toLowerCase()),e+t[0].length):-1},A:function(n,t,e){h.lastIndex=0;t=h.exec(t.slice(e));return t?(n.w=p.get(t[0].toLowerCase()),e+t[0].length):-1},b:function(n,t,e){m.lastIndex=0;t=m.exec(t.slice(e));return t?(n.m=x.get(t[0].toLowerCase()),e+t[0].length):-1},B:function(n,t,e){v.lastIndex=0;t=v.exec(t.slice(e));return t?(n.m=y.get(t[0].toLowerCase()),e+t[0].length):-1},c:function(n,t,e){return f(n,M.c.toString(),t,e)},d:Jt,e:Jt,H:Kt,I:Kt,j:Gt,L:te,m:Wt,M:Qt,p:function(n,t,e){t=s.get(t.slice(e,e+=2).toLowerCase());return null==t?-1:(n.p=t,e)},S:ne,U:Zt,w:It,W:Vt,x:function(n,t,e){return f(n,M.x.toString(),t,e)},X:function(n,t,e){return f(n,M.X.toString(),t,e)},y:$t,Y:Xt,Z:Bt,"%":re};return l}zt.year=Rt(function(n){return(n=zt.day(n)).setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),zt.years=zt.year.range,zt.years.utc=zt.year.utc.range,zt.day=Rt(function(n){var t=new Lt(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),zt.days=zt.day.range,zt.days.utc=zt.day.utc.range,zt.dayOfYear=function(n){var t=zt.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,e){e=7-e;var t=zt[n]=Rt(function(n){return(n=zt.day(n)).setDate(n.getDate()-(n.getDay()+e)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var t=zt.year(n).getDay();return Math.floor((zt.dayOfYear(n)+(t+e)%7)/7)-(t!==e)});zt[n+"s"]=t.range,zt[n+"s"].utc=t.utc.range,zt[n+"OfYear"]=function(n){var t=zt.year(n).getDay();return Math.floor((zt.dayOfYear(n)+(t+e)%7)/7)}}),zt.week=zt.sunday,zt.weeks=zt.sunday.range,zt.weeks.utc=zt.sunday.utc.range,zt.weekOfYear=zt.sundayOfYear;var Ut={"-":"",_:" ",0:"0"},jt=/^\s*\d+/,Ft=/^%/;function Ht(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",n=i.length;return r+(n<e?new Array(e-n+1).join(t)+i:i)}function Ot(n){return new RegExp("^(?:"+n.map(L.requote).join("|")+")","i")}function Yt(n){for(var t=new m,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function It(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+1));return t?(n.w=+t[0],e+t[0].length):-1}function Zt(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e));return t?(n.U=+t[0],e+t[0].length):-1}function Vt(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e));return t?(n.W=+t[0],e+t[0].length):-1}function Xt(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+4));return t?(n.y=+t[0],e+t[0].length):-1}function $t(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+2));return t?(n.y=(n=+t[0])+(68<n?1900:2e3),e+t[0].length):-1}function Bt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Wt(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+2));return t?(n.m=t[0]-1,e+t[0].length):-1}function Jt(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+2));return t?(n.d=+t[0],e+t[0].length):-1}function Gt(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+3));return t?(n.j=+t[0],e+t[0].length):-1}function Kt(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+2));return t?(n.H=+t[0],e+t[0].length):-1}function Qt(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+2));return t?(n.M=+t[0],e+t[0].length):-1}function ne(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+2));return t?(n.S=+t[0],e+t[0].length):-1}function te(n,t,e){jt.lastIndex=0;t=jt.exec(t.slice(e,e+3));return t?(n.L=+t[0],e+t[0].length):-1}function ee(n){var t=n.getTimezoneOffset(),e=0<t?"-":"+",n=q(t)/60|0,t=q(t)%60;return e+Ht(n,"0",2)+Ht(t,"0",2)}function re(n,t,e){Ft.lastIndex=0;t=Ft.exec(t.slice(e,e+1));return t?e+t[0].length:-1}function ie(r){for(var n=r.length,t=-1;++t<n;)r[t][0]=this(r[t][0]);return function(n){for(var t=0,e=r[t];!e[1](n);)e=r[++t];return e[0](n)}}L.locale=function(n){return{numberFormat:(_=n.decimal,a=n.thousands,c=n.grouping,e=n.currency,b=c&&a?function(n,t){for(var e=n.length,r=[],i=0,o=c[0],u=0;0<e&&0<o&&(t<u+o+1&&(o=Math.max(1,t-u)),r.push(n.substring(e-=o,e+o)),!((u+=o+1)>t));)o=c[i=(i+1)%c.length];return r.reverse().join(a)}:pt,function(n){var n=Et.exec(n),a=n[1]||" ",c=n[2]||">",l=n[3]||"-",t=n[4]||"",f=n[5],s=+n[6],h=n[7],p=n[8],g=n[9],d=1,v="",y="",m=!1,x=!0,p=p&&+p.substring(1);switch((f||"0"===a&&"="===c)&&(f=a="0",c="="),g){case"n":h=!0,g="g";break;case"%":d=100,y="%",g="f";break;case"p":d=100,y="%",g="r";break;case"b":case"o":case"x":case"X":"#"===t&&(v="0"+g.toLowerCase());case"c":x=!1;case"d":m=!0,p=0;break;case"s":d=-1,g="r"}"$"===t&&(v=e[0],y=e[1]),"r"!=g||p||(g="g"),null!=p&&("g"==g?p=Math.max(1,Math.min(21,p)):"e"!=g&&"f"!=g||(p=Math.max(0,Math.min(20,p))));var g=At.get(g)||Ct,M=f&&h;return function(n){var t=y;if(m&&n%1)return"";var e=n<0||0===n&&1/n<0?(n=-n,"-"):"-"===l?"":l;d<0?(n=(i=L.formatPrefix(n,p)).scale(n),t=i.symbol+y):n*=d;var r,i,o=(n=g(n,p)).lastIndexOf(".");i=o<0?(u=x?n.lastIndexOf("e"):-1)<0?(r=n,""):(r=n.substring(0,u),n.substring(u)):(r=n.substring(0,o),_+n.substring(o+1)),!f&&h&&(r=b(r,1/0));var u=v.length+r.length+i.length+(M?0:e.length),o=u<s?new Array(u=s-u+1).join(a):"";return M&&(r=b(o+r,o.length?s-i.length:1/0)),e+=v,n=r+i,("<"===c?e+n+o:">"===c?o+e+n:"^"===c?o.substring(0,u>>=1)+e+n+o.substring(u):e+(M?n:o+n))+t}}),timeFormat:Pt(n)};var _,a,c,e,b};a=L.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oe(){}L.format=a.numberFormat,L.geo={},oe.prototype={s:0,t:0,add:function(n){ae(n,this.t,ue),ae(ue.s,this.s,this),this.s?this.t+=ue.t:this.s=ue.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ue=new oe;function ae(n,t,e){var r=e.s=n+t,i=r-n;e.t=n-(r-i)+(t-i)}function ce(n,t){n&&fe.hasOwnProperty(n.type)&&fe[n.type](n,t)}L.geo.stream=function(n,t){n&&le.hasOwnProperty(n.type)?le[n.type](n,t):ce(n,t)};var le={Feature:function(n,t){ce(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)ce(e[r].geometry,t)}},fe={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){se(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)se(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)ce(e[r],t)}};function se(n,t,e){var r,i=-1,o=n.length-e;for(t.lineStart();++i<o;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)se(n[e],t,1);t.polygonEnd()}L.geo.area=function(n){return pe=0,L.geo.stream(n,je),pe};var pe,ge,de,ve,ye,me,xe,Me,_e,be,we,Se,ke,Ne,Ee,Ae,Ce,ze,Le,Te,qe,Re,De,Pe,Ue=new oe,je={sphere:function(){pe+=4*Sn},point:C,lineStart:C,lineEnd:C,polygonStart:function(){Ue.reset(),je.lineStart=Fe},polygonEnd:function(){var n=2*Ue;pe+=n<0?4*Sn+n:n,je.lineStart=je.lineEnd=je.point=C}};function Fe(){var e,r,a,c,l;function i(n,t){t=t*Cn/2+Sn/4;var e=(n*=Cn)-a,r=0<=e?1:-1,i=r*e,o=Math.cos(t),u=Math.sin(t),e=l*u,t=c*o+e*Math.cos(i),i=e*r*Math.sin(i);Ue.add(Math.atan2(i,t)),a=n,c=o,l=u}je.point=function(n,t){je.point=i,a=(e=n)*Cn,c=Math.cos(t=(r=t)*Cn/2+Sn/4),l=Math.sin(t)},je.lineEnd=function(){i(e,r)}}function He(n){var t=n[0],e=n[1],n=Math.cos(e);return[n*Math.cos(t),n*Math.sin(t),Math.sin(e)]}function Oe(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Ye(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Ie(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Ze(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Ve(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Xe(n){return[Math.atan2(n[1],n[0]),Rn(n[2])]}function $e(n,t){return q(n[0]-t[0])<En&&q(n[1]-t[1])<En}function Be(n,t){we.push(Se=[ge=n,ve=n]),t<de&&(de=t),ye<t&&(ye=t)}function We(n,t){var e,r,i,o,u,a=He([n*Cn,t*Cn]);_e?(i=Ye(_e,a),Ve(e=Ye([i[1],-i[0],0],i)),e=Xe(e),o=n-me,i=e[0]*zn*(r=0<o?1:-1),(o=180<q(o))^(r*me<i&&i<r*n)?(u=e[1]*zn,ye<u&&(ye=u)):o^(r*me<(i=(i+360)%360-180)&&i<r*n)?(u=-e[1]*zn)<de&&(de=u):(t<de&&(de=t),ye<t&&(ye=t)),o?n<me?tr(ge,n)>tr(ge,ve)&&(ve=n):tr(n,ve)>tr(ge,ve)&&(ge=n):ge<=ve?(n<ge&&(ge=n),ve<n&&(ve=n)):me<n?tr(ge,n)>tr(ge,ve)&&(ve=n):tr(n,ve)>tr(ge,ve)&&(ge=n)):Be(n,t),_e=a,me=n}function Je(){ke.point=We}function Ge(){Se[0]=ge,Se[1]=ve,ke.point=Be,_e=null}function Ke(n,t){var e;_e?be+=180<q(e=n-me)?e+(0<e?360:-360):e:(xe=n,Me=t),je.point(n,t),We(n,t)}function Qe(){je.lineStart()}function nr(){Ke(xe,Me),je.lineEnd(),q(be)>En&&(ge=-(ve=180)),Se[0]=ge,Se[1]=ve,_e=null}function tr(n,t){return(t-=n)<0?t+360:t}function er(n,t){return n[0]-t[0]}function rr(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}L.geo.bounds=(ke={point:Be,lineStart:Je,lineEnd:Ge,polygonStart:function(){ke.point=Ke,ke.lineStart=Qe,ke.lineEnd=nr,be=0,je.polygonStart()},polygonEnd:function(){je.polygonEnd(),ke.point=Be,ke.lineStart=Je,ke.lineEnd=Ge,Ue<0?(ge=-(ve=180),de=-(ye=90)):En<be?ye=90:be<-En&&(de=-90),Se[0]=ge,Se[1]=ve}},function(n){if(ye=ve=-(ge=de=1/0),we=[],L.geo.stream(n,ke),i=we.length){we.sort(er);for(var t=1,e=[a=we[0]];t<i;++t)rr((o=we[t])[0],a)||rr(o[1],a)?(tr(a[0],o[1])>tr(a[0],a[1])&&(a[1]=o[1]),tr(o[0],a[1])>tr(a[0],a[1])&&(a[0]=o[0])):e.push(a=o);for(var r,i,o,u=-1/0,t=0,a=e[i=e.length-1];t<=i;a=o,++t)o=e[t],(r=tr(a[1],o[0]))>u&&(u=r,ge=o[0],ve=a[1])}return we=Se=null,ge===1/0||de===1/0?[[NaN,NaN],[NaN,NaN]]:[[ge,de],[ve,ye]]}),L.geo.centroid=function(n){Ne=Ee=Ae=Ce=ze=Le=Te=qe=Re=De=Pe=0,L.geo.stream(n,ir);var t=Re,e=De,r=Pe,n=t*t+e*e+r*r;return n<An&&(t=Le,e=Te,r=qe,Ee<En&&(t=Ae,e=Ce,r=ze),(n=t*t+e*e+r*r)<An)?[NaN,NaN]:[Math.atan2(e,t)*zn,Rn(r/Math.sqrt(n))*zn]};var ir={sphere:C,point:or,lineStart:ar,lineEnd:cr,polygonStart:function(){ir.lineStart=lr},polygonEnd:function(){ir.lineStart=ar}};function or(n,t){n*=Cn;var e=Math.cos(t*=Cn);ur(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function ur(n,t,e){Ae+=(n-Ae)/++Ne,Ce+=(t-Ce)/Ne,ze+=(e-ze)/Ne}function ar(){var i,o,u;function r(n,t){n*=Cn;var e=Math.cos(t*=Cn),r=e*Math.cos(n),e=e*Math.sin(n),n=Math.sin(t),t=Math.atan2(Math.sqrt((t=o*n-u*e)*t+(t=u*r-i*n)*t+(t=i*e-o*r)*t),i*r+o*e+u*n);Ee+=t,Le+=t*(i+(i=r)),Te+=t*(o+(o=e)),qe+=t*(u+(u=n)),ur(i,o,u)}ir.point=function(n,t){n*=Cn;var e=Math.cos(t*=Cn);i=e*Math.cos(n),o=e*Math.sin(n),u=Math.sin(t),ir.point=r,ur(i,o,u)}}function cr(){ir.point=or}function lr(){var r,i,l,f,s;function o(n,t){n*=Cn;var e=Math.cos(t*=Cn),r=e*Math.cos(n),i=e*Math.sin(n),o=Math.sin(t),u=f*o-s*i,a=s*r-l*o,c=l*i-f*r,e=Math.sqrt(u*u+a*a+c*c),n=l*r+f*i+s*o,t=e&&-qn(n)/e,n=Math.atan2(e,n);Re+=t*u,De+=t*a,Pe+=t*c,Ee+=n,Le+=n*(l+(l=r)),Te+=n*(f+(f=i)),qe+=n*(s+(s=o)),ur(l,f,s)}ir.point=function(n,t){r=n,i=t,ir.point=o,n*=Cn;var e=Math.cos(t*=Cn);l=e*Math.cos(n),f=e*Math.sin(n),s=Math.sin(t),ur(l,f,s)},ir.lineEnd=function(){o(r,i),ir.lineEnd=cr,ir.point=or}}function fr(){return!0}function sr(n,t,e,r,a){var c=[],l=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if($e(e,r)){a.lineStart();for(var i=0;i<t;++i)a.point((e=n[i])[0],e[1]);a.lineEnd()}else{var o=new pr(e,n,null,!0),u=new pr(e,null,o,!1);o.o=u,c.push(o),l.push(u),o=new pr(r,n,null,!1),u=new pr(r,null,o,!0),o.o=u,c.push(o),l.push(u)}}}),l.sort(t),hr(c),hr(l),c.length){for(var i=0,o=e,u=l.length;i<u;++i)l[i].e=o=!o;for(var f,s=c[0];;){for(var h=s,p=!0;h.v;)if((h=h.n)===s)return;g=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(i=0,u=g.length;i<u;++i)a.point((f=g[i])[0],f[1]);else r(h.x,h.n.x,1,a);h=h.n}else{if(p)for(var g,i=(g=h.p.z).length-1;0<=i;--i)a.point((f=g[i])[0],f[1]);else r(h.x,h.p.x,-1,a);h=h.p}}while(g=(h=h.o).z,p=!p,!h.v);a.lineEnd()}}}function hr(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function pr(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function gr(m,x,M,_){return function(r,u){var a,e=x(u),t=r.invert(_[0],_[1]),i={point:o,lineStart:c,lineEnd:l,polygonStart:function(){i.point=d,i.lineStart=v,i.lineEnd=y,a=[],f=[]},polygonEnd:function(){i.point=o,i.lineStart=c,i.lineEnd=l,a=L.merge(a);var n=function(n,t){var e=n[0],r=n[1],i=[Math.sin(e),-Math.cos(e),0],o=0,u=0;Ue.reset();for(var a=0,c=t.length;a<c;++a){var l=t[a],f=l.length;if(f)for(var s=l[0],h=s[0],p=s[1]/2+Sn/4,g=Math.sin(p),d=Math.cos(p),v=1;;){var y=(n=l[v=v===f?0:v])[0],m=n[1]/2+Sn/4,x=Math.sin(m),M=Math.cos(m),_=y-h,b=0<=_?1:-1,w=b*_,S=Sn<w,m=g*x;if(Ue.add(Math.atan2(m*b*Math.sin(w),d*M+m*Math.cos(w))),o+=S?_+b*kn:_,S^e<=h^e<=y&&(Ve(w=Ye(He(s),He(n))),Ve(b=Ye(i,w)),((b=(S^0<=_?-1:1)*Rn(b[2]))<r||r===b&&(w[0]||w[1]))&&(u+=S^0<=_?1:-1)),!v++)break;h=y,g=x,d=M,s=n}}return(o<-En||o<En&&Ue<0)^1&u}(t,f);a.length?(g||(u.polygonStart(),g=!0),sr(a,yr,n,M,u)):n&&(g||(u.polygonStart(),g=!0),u.lineStart(),M(null,null,1,u),u.lineEnd()),g&&(u.polygonEnd(),g=!1),a=f=null},sphere:function(){u.polygonStart(),u.lineStart(),M(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function o(n,t){var e=r(n,t);m(n=e[0],t=e[1])&&u.point(n,t)}function n(n,t){t=r(n,t);e.point(t[0],t[1])}function c(){i.point=n,e.lineStart()}function l(){i.point=o,e.lineEnd()}var f,s,h=vr(),p=x(h),g=!1;function d(n,t){s.push([n,t]);t=r(n,t);p.point(t[0],t[1])}function v(){p.lineStart(),s=[]}function y(){d(s[0][0],s[0][1]),p.lineEnd();var n=p.clean(),t=h.buffer(),e=t.length;if(s.pop(),f.push(s),s=null,e)if(1&n){var r,i,o=-1;if(0<(e=(r=t[0]).length-1)){for(g||(u.polygonStart(),g=!0),u.lineStart();++o<e;)u.point((i=r[o])[0],i[1]);u.lineEnd()}}else 1<e&&2&n&&t.push(t.pop().concat(t.shift())),a.push(t.filter(dr))}return i}}function dr(n){return 1<n.length}function vr(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(n,t){e.push([n,t])},lineEnd:C,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function yr(n,t){return((n=n.x)[0]<0?n[1]-Nn-En:Nn-n[1])-((t=t.x)[0]<0?t[1]-Nn-En:Nn-t[1])}var mr=gr(fr,function(l){var f,s=NaN,h=NaN,p=NaN;return{lineStart:function(){l.lineStart(),f=1},point:function(n,t){var e,r,i,o,u,a=0<n?Sn:-Sn,c=q(n-s);q(c-Sn)<En?(l.point(s,h=0<(h+t)/2?Nn:-Nn),l.point(p,h),l.lineEnd(),l.lineStart(),l.point(a,h),l.point(n,h),f=0):p!==a&&Sn<=c&&(q(s-p)<En&&(s-=p*En),q(n-a)<En&&(n-=a*En),e=s,r=h,i=n,o=t,u=Math.sin(e-i),h=q(u)>En?Math.atan((Math.sin(r)*(c=Math.cos(o))*Math.sin(i)-Math.sin(o)*(i=Math.cos(r))*Math.sin(e))/(i*c*u)):(r+o)/2,l.point(p,h),l.lineEnd(),l.lineStart(),l.point(a,h),f=0),l.point(s=n,h=t),p=a},lineEnd:function(){l.lineEnd(),s=h=NaN},clean:function(){return 2-f}}},function(n,t,e,r){var i;null==n?(i=e*Nn,r.point(-Sn,i),r.point(0,i),r.point(Sn,i),r.point(Sn,0),r.point(Sn,-i),r.point(0,-i),r.point(-Sn,-i),r.point(-Sn,0),r.point(-Sn,i)):q(n[0]-t[0])>En?(n=n[0]<t[0]?Sn:-Sn,i=e*n/2,r.point(-n,i),r.point(0,i),r.point(n,i)):r.point(t[0],t[1])},[-Sn,-Sn/2]);function xr(i){var p=Math.cos(i),h=0<p,g=q(p)>En;return gr(d,function(u){var a,c,l,f,s;return{lineStart:function(){f=l=!1,s=1},point:function(n,t){var e,r,i=[n,t],o=d(n,t),t=h?o?0:y(n,t):o?y(n+(n<0?Sn:-Sn),t):0;!a&&(f=l=o)&&u.lineStart(),o!==l&&(e=v(a,i),($e(a,e)||$e(i,e))&&(i[0]+=En,i[1]+=En,o=d(i[0],i[1]))),o!==l?(s=0,o?(u.lineStart(),e=v(i,a),u.point(e[0],e[1])):(e=v(a,i),u.point(e[0],e[1]),u.lineEnd()),a=e):g&&a&&h^o&&(t&c||!(r=v(i,a,!0))||(s=0,h?(u.lineStart(),u.point(r[0][0],r[0][1]),u.point(r[1][0],r[1][1]),u.lineEnd()):(u.point(r[1][0],r[1][1]),u.lineEnd(),u.lineStart(),u.point(r[0][0],r[0][1])))),!o||a&&$e(a,i)||u.point(i[0],i[1]),a=i,l=o,c=t},lineEnd:function(){l&&u.lineEnd(),a=null},clean:function(){return s|(f&&l)<<1}}},ei(i,6*Cn),h?[0,-i]:[-Sn,i-Sn]);function d(n,t){return Math.cos(n)*Math.cos(t)>p}function v(n,t,e){var r=[1,0,0],i=Ye(He(n),He(t)),o=Oe(i,i),u=i[0],a=o-u*u;if(!a)return!e&&n;var c=Ye(r,i),l=Ze(r,p*o/a);Ie(l,Ze(i,-p*u/a));var f=c,s=Oe(l,f),r=Oe(f,f),o=s*s-r*(Oe(l,l)-1);if(!(o<0)){i=Math.sqrt(o),u=Ze(f,(-s-i)/r);if(Ie(u,l),u=Xe(u),!e)return u;var h,a=n[0],c=t[0],o=n[1],e=t[1];c<a&&(h=a,a=c,c=h);n=c-a,t=q(n-Sn)<En;if(!t&&e<o&&(h=o,o=e,e=h),t||n<En?t?0<o+e^u[1]<(q(u[0]-a)<En?o:e):o<=u[1]&&u[1]<=e:Sn<n^(a<=u[0]&&u[0]<=c)){r=Ze(f,(-s+i)/r);return Ie(r,l),[u,Xe(r)]}}}function y(n,t){var e=h?i:Sn-i,r=0;return n<-e?r|=1:e<n&&(r|=2),t<-e?r|=4:e<t&&(r|=8),r}}function Mr(c,l,f,s){return function(n){var t=n.a,e=n.b,r=t.x,i=t.y,o=0,u=1,a=e.x-r,t=e.y-i,e=c-r;if(a||!(0<e)){if(e/=a,a<0){if(e<o)return;e<u&&(u=e)}else if(0<a){if(u<e)return;o<e&&(o=e)}if(e=f-r,a||!(e<0)){if(e/=a,a<0){if(u<e)return;o<e&&(o=e)}else if(0<a){if(e<o)return;e<u&&(u=e)}if(e=l-i,t||!(0<e)){if(e/=t,t<0){if(e<o)return;e<u&&(u=e)}else if(0<t){if(u<e)return;o<e&&(o=e)}if(e=s-i,t||!(e<0)){if(e/=t,t<0){if(u<e)return;o<e&&(o=e)}else if(0<t){if(e<o)return;e<u&&(u=e)}return 0<o&&(n.a={x:r+o*a,y:i+o*t}),u<1&&(n.b={x:r+u*a,y:i+u*t}),n}}}}}}var _r=1e9;function br(M,_,b,w){return function(i){var r,f,o,u,a,c,l,s,h,p,g,d=i,n=vr(),v=Mr(M,_,b,w),t={point:e,lineStart:function(){t.point=x,f&&f.push(o=[]);p=!0,h=!1,l=s=NaN},lineEnd:function(){r&&(x(u,a),c&&h&&n.rejoin(),r.push(n.buffer()));t.point=e,h&&i.lineEnd()},polygonStart:function(){i=n,r=[],f=[],g=!0},polygonEnd:function(){i=d,r=L.merge(r);var n=function(n){for(var t=0,e=f.length,r=n[1],i=0;i<e;++i)for(var o,u=1,a=f[i],c=a.length,l=a[0];u<c;++u)o=a[u],l[1]<=r?o[1]>r&&0<Tn(l,o,n)&&++t:o[1]<=r&&Tn(l,o,n)<0&&--t,l=o;return 0!==t}([M,w]),t=g&&n,e=r.length;(t||e)&&(i.polygonStart(),t&&(i.lineStart(),y(null,null,1,i),i.lineEnd()),e&&sr(r,k,n,y,i),i.polygonEnd()),r=f=o=null}};function y(n,t,e,r){var i=0,o=0;if(null==n||(i=S(n,e))!==(o=S(t,e))||N(n,t)<0^0<e)for(;r.point(0===i||3===i?M:b,1<i?w:_),(i=(i+e+4)%4)!==o;);else r.point(t[0],t[1])}function m(n,t){return M<=n&&n<=b&&_<=t&&t<=w}function e(n,t){m(n,t)&&i.point(n,t)}function x(n,t){var e,r=m(n=Math.max(-_r,Math.min(_r,n)),t=Math.max(-_r,Math.min(_r,t)));f&&o.push([n,t]),p?(u=n,a=t,p=!1,(c=r)&&(i.lineStart(),i.point(n,t))):r&&h?i.point(n,t):v(e={a:{x:l,y:s},b:{x:n,y:t}})?(h||(i.lineStart(),i.point(e.a.x,e.a.y)),i.point(e.b.x,e.b.y),r||i.lineEnd(),g=!1):r&&(i.lineStart(),i.point(n,t),g=!1),l=n,s=t,h=r}return t};function S(n,t){return q(n[0]-M)<En?0<t?0:3:q(n[0]-b)<En?0<t?2:1:q(n[1]-_)<En?0<t?1:0:0<t?3:2}function k(n,t){return N(n.x,t.x)}function N(n,t){var e=S(n,1),r=S(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}}function wr(e,r){function n(n,t){return n=e(n,t),r(n[0],n[1])}return e.invert&&r.invert&&(n.invert=function(n,t){return(n=r.invert(n,t))&&e.invert(n[0],n[1])}),n}function Sr(n){var t=0,e=Sn/3,r=Br(n),n=r(t,e);return n.parallels=function(n){return arguments.length?r(t=n[0]*Sn/180,e=n[1]*Sn/180):[t/Sn*180,e/Sn*180]},n}function kr(n,t){var n=Math.sin(n),e=(n+Math.sin(t))/2,r=1+n*(2*e-n),i=Math.sqrt(r)/e;function o(n,t){t=Math.sqrt(r-2*e*Math.sin(t))/e;return[t*Math.sin(n*=e),i-t*Math.cos(n)]}return o.invert=function(n,t){t=i-t;return[Math.atan2(n,t)/e,Rn((r-(n*n+t*t)*e*e)/(2*e))]},o}L.geo.clipExtent=function(){var t,e,r,i,o,u,a={stream:function(n){return o&&(o.valid=!1),(o=u(n)).valid=!0,o},extent:function(n){return arguments.length?(u=br(t=+n[0][0],e=+n[0][1],r=+n[1][0],i=+n[1][1]),o&&(o.valid=!1,o=null),a):[[t,e],[r,i]]}};return a.extent([[0,0],[960,500]])},(L.geo.conicEqualArea=function(){return Sr(kr)}).raw=kr,L.geo.albers=function(){return L.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},L.geo.albersUsa=function(){var e,i,o,u,a=L.geo.albers(),c=L.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=L.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(n,t){e=[n,t]}};function s(n){var t=n[0],n=n[1];return e=null,i(t,n),e||(o(t,n),e)||u(t,n),e}return s.invert=function(n){var t=a.scale(),e=a.translate(),r=(n[0]-e[0])/t,t=(n[1]-e[1])/t;return(.12<=t&&t<.234&&-.425<=r&&r<-.214?c:.166<=t&&t<.234&&-.214<=r&&r<-.115?l:a).invert(n)},s.stream=function(n){var e=a.stream(n),r=c.stream(n),i=l.stream(n);return{point:function(n,t){e.point(n,t),r.point(n,t),i.point(n,t)},sphere:function(){e.sphere(),r.sphere(),i.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),i.polygonEnd()}}},s.precision=function(n){return arguments.length?(a.precision(n),c.precision(n),l.precision(n),s):a.precision()},s.scale=function(n){return arguments.length?(a.scale(n),c.scale(.35*n),l.scale(n),s.translate(a.translate())):a.scale()},s.translate=function(n){if(!arguments.length)return a.translate();var t=a.scale(),e=+n[0],r=+n[1];return i=a.translate(n).clipExtent([[e-.455*t,r-.238*t],[e+.455*t,r+.238*t]]).stream(f).point,o=c.translate([e-.307*t,r+.201*t]).clipExtent([[e-.425*t+En,r+.12*t+En],[e-.214*t-En,r+.234*t-En]]).stream(f).point,u=l.translate([e-.205*t,r+.212*t]).clipExtent([[e-.214*t+En,r+.166*t+En],[e-.115*t-En,r+.234*t-En]]).stream(f).point,s},s.scale(1070)};var Nr,Er,Ar,Cr,zr,Lr,Tr={point:C,lineStart:C,lineEnd:C,polygonStart:function(){Er=0,Tr.lineStart=qr},polygonEnd:function(){Tr.lineStart=Tr.lineEnd=Tr.point=C,Nr+=q(Er/2)}};function qr(){var e,r,i,o;function u(n,t){Er+=o*n-i*t,i=n,o=t}Tr.point=function(n,t){Tr.point=u,e=i=n,r=o=t},Tr.lineEnd=function(){u(e,r)}}var Rr={point:function(n,t){n<Ar&&(Ar=n);zr<n&&(zr=n);t<Cr&&(Cr=t);Lr<t&&(Lr=t)},lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C};function Dr(){var e=Pr(4.5),r=[],i={point:n,lineStart:function(){i.point=t},lineEnd:u,polygonStart:function(){i.lineEnd=a},polygonEnd:function(){i.lineEnd=u,i.point=n},pointRadius:function(n){return e=Pr(n),i},result:function(){if(r.length){var n=r.join("");return r=[],n}}};function n(n,t){r.push("M",n,",",t,e)}function t(n,t){r.push("M",n,",",t),i.point=o}function o(n,t){r.push("L",n,",",t)}function u(){i.point=n}function a(){r.push("Z")}return i}function Pr(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}var Ur,jr={point:Fr,lineStart:Hr,lineEnd:Or,polygonStart:function(){jr.lineStart=Yr},polygonEnd:function(){jr.point=Fr,jr.lineStart=Hr,jr.lineEnd=Or}};function Fr(n,t){Ae+=n,Ce+=t,++ze}function Hr(){var i,o;function e(n,t){var e=n-i,r=t-o,r=Math.sqrt(e*e+r*r);Le+=r*(i+n)/2,Te+=r*(o+t)/2,qe+=r,Fr(i=n,o=t)}jr.point=function(n,t){jr.point=e,Fr(i=n,o=t)}}function Or(){jr.point=Fr}function Yr(){var e,r,i,o;function u(n,t){var e=n-i,r=t-o,r=Math.sqrt(e*e+r*r);Le+=r*(i+n)/2,Te+=r*(o+t)/2,qe+=r,Re+=(r=o*n-i*t)*(i+n),De+=r*(o+t),Pe+=3*r,Fr(i=n,o=t)}jr.point=function(n,t){jr.point=u,Fr(e=i=n,r=o=t)},jr.lineEnd=function(){u(e,r)}}function Ir(e){var r=4.5,i={point:n,lineStart:function(){i.point=t},lineEnd:u,polygonStart:function(){i.lineEnd=a},polygonEnd:function(){i.lineEnd=u,i.point=n},pointRadius:function(n){return r=n,i},result:C};function n(n,t){e.moveTo(n,t),e.arc(n,t,r,0,kn)}function t(n,t){e.moveTo(n,t),i.point=o}function o(n,t){e.lineTo(n,t)}function u(){i.point=n}function a(){e.closePath()}return i}function Zr(E){var A=.5,C=Math.cos(30*Cn),_=16;function t(n){return(_?r:e)(n)}function e(e){return Xr(e,function(n,t){n=E(n,t),e.point(n[0],n[1])})}function r(r){var e,i,o,u,a,c,l,f,s,h,p,g,d={point:n,lineStart:t,lineEnd:y,polygonStart:function(){r.polygonStart(),d.lineStart=m},polygonEnd:function(){r.polygonEnd(),d.lineStart=t}};function n(n,t){n=E(n,t),r.point(n[0],n[1])}function t(){f=NaN,d.point=v,r.lineStart()}function v(n,t){var e=He([n,t]),t=E(n,t);z(f,s,l,h,p,g,f=t[0],s=t[1],l=n,h=e[0],p=e[1],g=e[2],_,r),r.point(f,s)}function y(){d.point=n,r.lineEnd()}function m(){t(),d.point=x,d.lineEnd=M}function x(n,t){v(e=n,t),i=f,o=s,u=h,a=p,c=g,d.point=v}function M(){z(f,s,l,h,p,g,i,o,e,u,a,c,_,r),d.lineEnd=y,y()}return d}function z(n,t,e,r,i,o,u,a,c,l,f,s,h,p){var g,d,v,y,m,x,M,_,b,w,S=u-n,k=a-t,N=S*S+k*k;4*A<N&&h--&&(g=r+l,d=i+f,v=o+s,y=Math.sqrt(g*g+d*d+v*v),b=Math.asin(v/=y),m=q(q(v)-1)<En||q(e-c)<En?(e+c)/2:Math.atan2(d,g),x=(w=E(m,b))[0],M=w[1],(A<(w=k*(_=x-n)-S*(b=M-t))*w/N||.3<q((S*_+k*b)/N-.5)||r*l+i*f+o*s<C)&&(z(n,t,e,r,i,o,x,M,m,g/=y,d/=y,v,h,p),p.point(x,M),z(x,M,m,g,d,v,u,a,c,l,f,s,h,p)))}return t.precision=function(n){return arguments.length?(_=0<(A=n*n)&&16,t):Math.sqrt(A)},t}function Vr(n){this.stream=n}function Xr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function $r(n){return Br(function(){return n})()}function Br(n){var e,t,r,i,o,u,a=Zr(function(n,t){return[(n=e(n,t))[0]*c+i,o-n[1]*c]}),c=150,l=480,f=250,s=0,h=0,p=0,g=0,d=0,v=mr,y=pt,m=null,x=null;function M(n){return[(n=r(n[0]*Cn,n[1]*Cn))[0]*c+i,o-n[1]*c]}function _(n){return(n=r.invert((n[0]-i)/c,(o-n[1])/c))&&[n[0]*zn,n[1]*zn]}function b(){r=wr(t=Kr(p,g,d),e);var n=e(s,h);return i=l-n[0]*c,o=f+n[1]*c,w()}function w(){return u&&(u.valid=!1,u=null),M}return M.stream=function(n){return u&&(u.valid=!1),(u=Wr(v(t,a(y(n))))).valid=!0,u},M.clipAngle=function(n){return arguments.length?(v=null==n?(m=n,mr):xr((m=+n)*Cn),w()):m},M.clipExtent=function(n){return arguments.length?(y=(x=n)?br(n[0][0],n[0][1],n[1][0],n[1][1]):pt,w()):x},M.scale=function(n){return arguments.length?(c=+n,b()):c},M.translate=function(n){return arguments.length?(l=+n[0],f=+n[1],b()):[l,f]},M.center=function(n){return arguments.length?(s=n[0]%360*Cn,h=n[1]%360*Cn,b()):[s*zn,h*zn]},M.rotate=function(n){return arguments.length?(p=n[0]%360*Cn,g=n[1]%360*Cn,d=2<n.length?n[2]%360*Cn:0,b()):[p*zn,g*zn,d*zn]},L.rebind(M,a,"precision"),function(){return e=n.apply(this,arguments),M.invert=e.invert&&_,b()}}function Wr(e){return Xr(e,function(n,t){e.point(n*Cn,t*Cn)})}function Jr(n,t){return[n,t]}function Gr(n,t){return[Sn<n?n-kn:n<-Sn?n+kn:n,t]}function Kr(n,t,e){return n?t||e?wr(ni(n),ti(t,e)):ni(n):t||e?ti(t,e):Gr}function Qr(e){return function(n,t){return[Sn<(n+=e)?n-kn:n<-Sn?n+kn:n,t]}}function ni(n){var t=Qr(n);return t.invert=Qr(-n),t}function ti(n,t){var i=Math.cos(n),o=Math.sin(n),u=Math.cos(t),a=Math.sin(t);function e(n,t){var e=Math.cos(t),r=Math.cos(n)*e,n=Math.sin(n)*e,e=Math.sin(t),t=e*i+r*o;return[Math.atan2(n*u-t*a,r*i-e*o),Rn(t*u+n*a)]}return e.invert=function(n,t){var e=Math.cos(t),r=Math.cos(n)*e,n=Math.sin(n)*e,e=Math.sin(t),t=e*u-n*a;return[Math.atan2(n*u+e*a,r*i+t*o),Rn(t*i-r*o)]},e}function ei(a,c){var l=Math.cos(a),f=Math.sin(a);return function(n,t,e,r){var i=e*c;null!=n?(n=ri(l,n),t=ri(l,t),(0<e?n<t:t<n)&&(n+=e*kn)):(n=a+e*kn,t=a-.5*i);for(var o,u=n;0<e?t<u:u<t;u-=i)r.point((o=Xe([l,-f*Math.cos(u),-f*Math.sin(u)]))[0],o[1])}}function ri(n,t){t=He(t);t[0]-=n,Ve(t);n=qn(-t[1]);return((-t[2]<0?-n:n)+2*Math.PI-En)%(2*Math.PI)}function ii(n,t,e){var r=L.range(n,t-En,e).concat(t);return function(t){return r.map(function(n){return[t,n]})}}function oi(n,t,e){var r=L.range(n,t-En,e).concat(t);return function(t){return r.map(function(n){return[n,t]})}}function ui(n){return n.source}function ai(n){return n.target}L.geo.path=function(){var r,t,i,e,o,u=4.5;function a(n){return n&&("function"==typeof u&&e.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(e)),L.geo.stream(n,o)),e.result()}function c(){return o=null,a}return a.area=function(n){return Nr=0,L.geo.stream(n,i(Tr)),Nr},a.centroid=function(n){return Ae=Ce=ze=Le=Te=qe=Re=De=Pe=0,L.geo.stream(n,i(jr)),Pe?[Re/Pe,De/Pe]:qe?[Le/qe,Te/qe]:ze?[Ae/ze,Ce/ze]:[NaN,NaN]},a.bounds=function(n){return zr=Lr=-(Ar=Cr=1/0),L.geo.stream(n,i(Rr)),[[Ar,Cr],[zr,Lr]]},a.projection=function(n){return arguments.length?(i=(r=n)?n.stream||(e=n,t=Zr(function(n,t){return e([n*zn,t*zn])}),function(n){return Wr(t(n))}):pt,c()):r;var e,t},a.context=function(n){return arguments.length?(e=null==(t=n)?new Dr:new Ir(n),"function"!=typeof u&&e.pointRadius(u),c()):t},a.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(e.pointRadius(+n),+n),a):u},a.projection(L.geo.albersUsa()).context(null)},L.geo.transform=function(r){return{stream:function(n){var t,e=new Vr(n);for(t in r)e[t]=r[t];return e}}},Vr.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},L.geo.projection=$r,L.geo.projectionMutator=Br,(L.geo.equirectangular=function(){return $r(Jr)}).raw=Jr.invert=Jr,L.geo.rotation=function(t){function n(n){return(n=t(n[0]*Cn,n[1]*Cn))[0]*=zn,n[1]*=zn,n}return t=Kr(t[0]%360*Cn,t[1]*Cn,2<t.length?t[2]*Cn:0),n.invert=function(n){return(n=t.invert(n[0]*Cn,n[1]*Cn))[0]*=zn,n[1]*=zn,n},n},Gr.invert=Jr,L.geo.circle=function(){var t,i,o=[0,0],e=6;function r(){var n="function"==typeof o?o.apply(this,arguments):o,e=Kr(-n[0]*Cn,-n[1]*Cn,0).invert,r=[];return i(null,null,1,{point:function(n,t){r.push(n=e(n,t)),n[0]*=zn,n[1]*=zn}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(n){return arguments.length?(o=n,r):o},r.angle=function(n){return arguments.length?(i=ei((t=+n)*Cn,e*Cn),r):t},r.precision=function(n){return arguments.length?(i=ei(t*Cn,(e=+n)*Cn),r):e},r.angle(90)},L.geo.distance=function(n,t){var e=(t[0]-n[0])*Cn,r=n[1]*Cn,i=t[1]*Cn,o=Math.sin(e),n=Math.cos(e),t=Math.sin(r),e=Math.cos(r),r=Math.sin(i),i=Math.cos(i);return Math.atan2(Math.sqrt((o=i*o)*o+(o=e*r-t*i*n)*o),t*r+e*i*n)},L.geo.graticule=function(){var t,e,r,i,o,u,a,c,l,f,s,h,p=10,g=p,d=90,v=360,y=2.5;function m(){return{type:"MultiLineString",coordinates:n()}}function n(){return L.range(Math.ceil(i/d)*d,r,d).map(s).concat(L.range(Math.ceil(c/v)*v,a,v).map(h)).concat(L.range(Math.ceil(e/p)*p,t,p).filter(function(n){return q(n%d)>En}).map(l)).concat(L.range(Math.ceil(u/g)*g,o,g).filter(function(n){return q(n%v)>En}).map(f))}return m.lines=function(){return n().map(function(n){return{type:"LineString",coordinates:n}})},m.outline=function(){return{type:"Polygon",coordinates:[s(i).concat(h(a).slice(1),s(r).reverse().slice(1),h(c).reverse().slice(1))]}},m.extent=function(n){return arguments.length?m.majorExtent(n).minorExtent(n):m.minorExtent()},m.majorExtent=function(n){return arguments.length?(i=+n[0][0],r=+n[1][0],c=+n[0][1],a=+n[1][1],r<i&&(n=i,i=r,r=n),a<c&&(n=c,c=a,a=n),m.precision(y)):[[i,c],[r,a]]},m.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],u=+n[0][1],o=+n[1][1],t<e&&(n=e,e=t,t=n),o<u&&(n=u,u=o,o=n),m.precision(y)):[[e,u],[t,o]]},m.step=function(n){return arguments.length?m.majorStep(n).minorStep(n):m.minorStep()},m.majorStep=function(n){return arguments.length?(d=+n[0],v=+n[1],m):[d,v]},m.minorStep=function(n){return arguments.length?(p=+n[0],g=+n[1],m):[p,g]},m.precision=function(n){return arguments.length?(y=+n,l=ii(u,o,90),f=oi(e,t,y),s=ii(c,a,90),h=oi(i,r,y),m):y},m.majorExtent([[-180,-90+En],[180,90-En]]).minorExtent([[-180,-80-En],[180,80+En]])},L.geo.greatArc=function(){var t,e,r=ui,i=ai;function o(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}return o.distance=function(){return L.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},o.source=function(n){return arguments.length?(t="function"==typeof(r=n)?null:n,o):r},o.target=function(n){return arguments.length?(e="function"==typeof(i=n)?null:n,o):i},o.precision=function(){return arguments.length?o:0},o},L.geo.interpolate=function(n,t){return e=n[0]*Cn,r=n[1]*Cn,i=t[0]*Cn,o=t[1]*Cn,n=Math.cos(r),u=Math.sin(r),t=Math.cos(o),a=Math.sin(o),c=n*Math.cos(e),l=n*Math.sin(e),f=t*Math.cos(i),s=t*Math.sin(i),h=2*Math.asin(Math.sqrt(Pn(o-r)+n*t*Pn(i-e))),p=1/Math.sin(h),(i=h?function(n){var t=Math.sin(n*=h)*p,e=Math.sin(h-n)*p,r=e*c+t*f,n=e*l+t*s,t=e*u+t*a;return[Math.atan2(n,r)*zn,Math.atan2(t,Math.sqrt(r*r+n*n))*zn]}:function(){return[e*zn,r*zn]}).distance=h,i;var e,r,i,o,u,a,c,l,f,s,h,p},L.geo.length=function(n){return Ur=0,L.geo.stream(n,ci),Ur};var ci={sphere:C,point:C,lineStart:function(){var o,u,a;function e(n,t){var e=Math.sin(t*=Cn),r=Math.cos(t),i=q((n*=Cn)-o),t=Math.cos(i);Ur+=Math.atan2(Math.sqrt((i=r*Math.sin(i))*i+(i=a*e-u*r*t)*i),u*e+a*r*t),o=n,u=e,a=r}ci.point=function(n,t){o=n*Cn,u=Math.sin(t*=Cn),a=Math.cos(t),ci.point=e},ci.lineEnd=function(){ci.point=ci.lineEnd=C}},lineEnd:C,polygonStart:C,polygonEnd:C};function li(i,o){function n(n,t){var e=Math.cos(n),r=Math.cos(t),e=i(e*r);return[e*r*Math.sin(n),e*Math.sin(t)]}return n.invert=function(n,t){var e=Math.sqrt(n*n+t*t),r=o(e),i=Math.sin(r),r=Math.cos(r);return[Math.atan2(n*i,e*r),Math.asin(e&&t*i/e)]},n}var fi=li(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(L.geo.azimuthalEqualArea=function(){return $r(fi)}).raw=fi;var si=li(function(n){n=Math.acos(n);return n&&n/Math.sin(n)},pt);function hi(n,t){function e(n){return Math.tan(Sn/4+n/2)}var r=Math.cos(n),i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(e(t)/e(n)),o=r*Math.pow(e(n),i)/i;return i?(u.invert=function(n,t){var e=o-t,t=Ln(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/t,1/i))-Nn]},u):di;function u(n,t){0<o?t<-Nn+En&&(t=-Nn+En):Nn-En<t&&(t=Nn-En);t=o/Math.pow(e(t),i);return[t*Math.sin(i*n),o-t*Math.cos(i*n)]}}function pi(n,t){var e=Math.cos(n),r=n===t?Math.sin(n):(e-Math.cos(t))/(t-n),i=e/r+n;return q(r)<En?Jr:(o.invert=function(n,t){t=i-t;return[Math.atan2(n,t)/r,i-Ln(r)*Math.sqrt(n*n+t*t)]},o);function o(n,t){t=i-t;return[t*Math.sin(r*n),i-t*Math.cos(r*n)]}}(L.geo.azimuthalEquidistant=function(){return $r(si)}).raw=si,(L.geo.conicConformal=function(){return Sr(hi)}).raw=hi,(L.geo.conicEquidistant=function(){return Sr(pi)}).raw=pi;var gi=li(function(n){return 1/n},Math.atan);function di(n,t){return[n,Math.log(Math.tan(Sn/4+t/2))]}function vi(n){var i,o=$r(n),u=o.scale,a=o.translate,c=o.clipExtent;return o.scale=function(){var n=u.apply(o,arguments);return n===o?i?o.clipExtent(null):o:n},o.translate=function(){var n=a.apply(o,arguments);return n===o?i?o.clipExtent(null):o:n},o.clipExtent=function(n){var t,e,r=c.apply(o,arguments);return r===o?(i=null==n)&&(t=Sn*u(),e=a(),c([[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]])):i&&(r=null),r},o.clipExtent(null)}(L.geo.gnomonic=function(){return $r(gi)}).raw=gi,di.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Nn]},(L.geo.mercator=function(){return vi(di)}).raw=di;var yi=li(function(){return 1},Math.asin);(L.geo.orthographic=function(){return $r(yi)}).raw=yi;var mi=li(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});function xi(n,t){return[Math.log(Math.tan(Sn/4+t/2)),-n]}function Mi(n){return n[0]}function _i(n){return n[1]}function bi(n){for(var t=n.length,e=[0,1],r=2,i=2;i<t;i++){for(;1<r&&Tn(n[e[r-2]],n[e[r-1]],n[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function wi(n,t){return n[0]-t[0]||n[1]-t[1]}(L.geo.stereographic=function(){return $r(mi)}).raw=mi,xi.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Nn]},(L.geo.transverseMercator=function(){var n=vi(xi),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):[(n=t())[1],-n[0]]},n.rotate=function(n){return n?e([n[0],n[1],2<n.length?n[2]+90:90]):[(n=e())[0],n[1],n[2]-90]},e([0,0,90])}).raw=xi,L.geom={},L.geom.hull=function(n){var h=Mi,p=_i;return arguments.length?t(n):(t.x=function(n){return arguments.length?(h=n,t):h},t.y=function(n){return arguments.length?(p=n,t):p},t);function t(n){if(n.length<3)return[];for(var t=ht(h),e=ht(p),r=n.length,i=[],o=[],u=0;u<r;u++)i.push([+t.call(this,n[u],u),+e.call(this,n[u],u),u]);for(i.sort(wi),u=0;u<r;u++)o.push([i[u][0],-i[u][1]]);var a=bi(i),c=bi(o),l=c[0]===a[0],f=c[c.length-1]===a[a.length-1],s=[];for(u=a.length-1;0<=u;--u)s.push(n[i[a[u]][2]]);for(u=+l;u<c.length-f;++u)s.push(n[i[c[u]][2]]);return s}},L.geom.polygon=function(n){return F(n,Si),n};var Si=L.geom.polygon.prototype=[];function ki(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Ni(n,t,e,r){var i=n[0],o=e[0],u=t[0]-i,a=r[0]-o,n=n[1],e=e[1],t=t[1]-n,r=r[1]-e,a=(a*(n-e)-r*(i-o))/(r*u-a*t);return[i+a*u,n+a*t]}function Ei(n){var t=n[0],n=n[n.length-1];return!(t[0]-n[0]||t[1]-n[1])}Si.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return.5*i},Si.centroid=function(n){var t,e,r=-1,i=this.length,o=0,u=0,a=this[i-1];for(arguments.length||(n=-1/(6*this.area()));++r<i;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],o+=(t[0]+a[0])*e,u+=(t[1]+a[1])*e;return[o*n,u*n]},Si.clip=function(n){for(var t,e,r,i,o,u,a=Ei(n),c=-1,l=this.length-Ei(this),f=this[l-1];++c<l;){for(t=n.slice(),n.length=0,i=this[c],o=t[(r=t.length-a)-1],e=-1;++e<r;)ki(u=t[e],f,i)?(ki(o,f,i)||n.push(Ni(o,u,f,i)),n.push(u)):ki(o,f,i)&&n.push(Ni(o,u,f,i)),o=u;a&&n.push(n[0]),f=i}return n};var Ai,Ci,zi,Li,Ti,qi=[],Ri=[];function Di(){Ki(this),this.edge=this.site=this.circle=null}function Pi(n){var t=qi.pop()||new Di;return t.site=n,t}function Ui(n){Vi(n),zi.remove(n),qi.push(n),Ki(n)}function ji(n){for(var t,e,r,i,o=n.x,u=n.y,a=zi._;a;)if(r=Fi(a,u)-o,En<r)a=a.L;else{if(i=o-function(n,t){var e=n.N;if(e)return Fi(e,t);n=n.site;return n.y===t?n.x:1/0}(a,u),!(En<i)){-En<r?(t=a.P,e=a):-En<i?e=(t=a).N:t=e=a;break}if(!a.R){t=a;break}a=a.R}var c,l,f,s,h,p,g,d,v,y,m=Pi(n);if(zi.insert(t,m),t||e){if(t===e)return Vi(t),e=Pi(t.site),zi.insert(m,e),m.edge=e.edge=Bi(t.site,m.site),Zi(t),void Zi(e);e?(Vi(t),Vi(e),l=(c=t.site).x,y=c.y,f=n.x-l,g=n.y-y,h=(s=e.site).x-l,p=s.y-y,Wi(e.edge,c,s,y={x:(p*(d=f*f+g*g)-g*(v=h*h+p*p))/(g=2*(f*p-g*h))+l,y:(f*v-h*d)/g+y}),m.edge=Bi(c,n,null,y),e.edge=Bi(n,s,null,y),Zi(t),Zi(e)):m.edge=Bi(t.site,m.site)}}function Fi(n,t){var e=n.site,r=e.x,i=e.y,o=i-t;if(!o)return r;var u=n.P;if(!u)return-1/0;var a=(e=u.site).x,c=e.y,n=c-t;if(!n)return a;u=a-r,e=1/o-1/n,t=u/n;return e?(-t+Math.sqrt(t*t-2*e*(u*u/(-2*n)-c+n/2+i-o/2)))/e+r:(r+a)/2}function Hi(n){this.site=n,this.edges=[]}function Oi(n){for(var t,e,r,i,o,u,a,c,l,f=n[0][0],s=n[1][0],h=n[0][1],p=n[1][1],g=Ci,d=g.length;d--;)if((i=g[d])&&i.prepare())for(a=(u=i.edges).length,o=0;o<a;)e=(l=u[o].end()).x,r=l.y,t=(c=u[++o%a].start()).x,c=c.y,(q(e-t)>En||q(r-c)>En)&&(u.splice(o,0,new Ji(function(n,t,e){n=new $i(n,null);return n.a=t,n.b=e,Ai.push(n),n}(i.site,l,q(e-f)<En&&En<p-r?{x:f,y:q(t-f)<En?c:p}:q(r-p)<En&&En<s-e?{x:q(c-p)<En?t:s,y:p}:q(e-s)<En&&En<r-h?{x:s,y:q(t-s)<En?c:h}:q(r-h)<En&&En<e-f?{x:q(c-h)<En?t:f,y:h}:null),i.site,null)),++a)}function Yi(n,t){return t.angle-n.angle}function Ii(){Ki(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zi(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,o=e.site;if(r!==o){var u=i.x,a=i.y,c=r.x-u,l=r.y-a,f=o.x-u,e=2*(c*(t=o.y-a)-l*f);if(!(-An<=e)){var r=c*c+l*l,o=f*f+t*t,l=(t*r-l*o)/e,e=(c*o-f*r)/e,t=e+a,s=Ri.pop()||new Ii;s.arc=n,s.site=i,s.x=l+u,s.y=t+Math.sqrt(l*l+e*e),s.cy=t,n.circle=s;for(var h=null,p=Ti._;p;)if(s.y<p.y||s.y===p.y&&s.x<=p.x){if(!p.L){h=p.P;break}p=p.L}else{if(!p.R){h=p;break}p=p.R}Ti.insert(h,s),h||(Li=s)}}}}function Vi(n){var t=n.circle;t&&(t.P||(Li=t.N),Ti.remove(t),Ri.push(t),Ki(t),n.circle=null)}function Xi(n){for(var t,e=Ai,r=Mr(n[0][0],n[0][1],n[1][0],n[1][1]),i=e.length;i--;)(function(n,t){var e=n.b;if(e)return!0;var r=n.a,i=t[0][0],o=t[1][0],u=t[0][1],a=t[1][1],c=n.l,l=n.r,f=c.x,s=c.y,h=l.x,t=l.y,c=(f+h)/2,l=(s+t)/2;if(t===s){if(c<i||o<=c)return;if(h<f){if(r){if(r.y>=a)return}else r={x:c,y:u};e={x:c,y:a}}else{if(r){if(r.y<u)return}else r={x:c,y:a};e={x:c,y:u}}}else if(c=l-(l=(f-h)/(t-s))*c,l<-1||1<l)if(h<f){if(r){if(r.y>=a)return}else r={x:(u-c)/l,y:u};e={x:(a-c)/l,y:a}}else{if(r){if(r.y<u)return}else r={x:(a-c)/l,y:a};e={x:(u-c)/l,y:u}}else if(s<t){if(r){if(r.x>=o)return}else r={x:i,y:l*i+c};e={x:o,y:l*o+c}}else{if(r){if(r.x<i)return}else r={x:o,y:l*o+c};e={x:i,y:l*i+c}}return n.a=r,n.b=e,!0})(t=e[i],n)&&r(t)&&!(q(t.a.x-t.b.x)<En&&q(t.a.y-t.b.y)<En)||(t.a=t.b=null,e.splice(i,1))}function $i(n,t){this.l=n,this.r=t,this.a=this.b=null}function Bi(n,t,e,r){var i=new $i(n,t);return Ai.push(i),e&&Wi(i,n,t,e),r&&Wi(i,t,n,r),Ci[n.i].edges.push(new Ji(i,n,t)),Ci[t.i].edges.push(new Ji(i,t,n)),i}function Wi(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Ji(n,t,e){var r=n.a,i=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Gi(){this._=null}function Ki(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function Qi(n,t){var e=t,r=t.R,t=e.U;t?t.L===e?t.L=r:t.R=r:n._=r,r.U=t,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function no(n,t){var e=t,r=t.L,t=e.U;t?t.L===e?t.L=r:t.R=r:n._=r,r.U=t,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function to(n){for(;n.L;)n=n.L;return n}function eo(n,t){var e,r,i,o=n.sort(ro).pop();for(Ai=[],Ci=new Array(n.length),zi=new Gi,Ti=new Gi;;)if(i=Li,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===e&&o.y===r||(Ci[o.i]=new Hi(o),ji(o),e=o.x,r=o.y),o=n.pop();else{if(!i)break;!function(n){var t=n.circle,e=t.x,r=t.cy,i={x:e,y:r},o=n.P,u=n.N,a=[n];Ui(n);for(var c=o;c.circle&&q(e-c.circle.x)<En&&q(r-c.circle.cy)<En;)o=c.P,a.unshift(c),Ui(c),c=o;a.unshift(c),Vi(c);for(var l=u;l.circle&&q(e-l.circle.x)<En&&q(r-l.circle.cy)<En;)u=l.N,a.push(l),Ui(l),l=u;a.push(l),Vi(l);for(var f=a.length,s=1;s<f;++s)l=a[s],c=a[s-1],Wi(l.edge,c.site,l.site,i);c=a[0],(l=a[f-1]).edge=Bi(c.site,l.site,null,i),Zi(c),Zi(l)}(i.arc)}t&&(Xi(t),Oi(t));t={cells:Ci,edges:Ai};return zi=Ti=Ai=Ci=null,t}function ro(n,t){return t.y-n.y||t.x-n.x}Hi.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)(n=t[e].edge).b&&n.a||t.splice(e,1);return t.sort(Yi),t.length},Ji.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Gi.prototype={insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else e=this._?(n=to(this._),t.P=null,(t.N=n).P=n.L=t,n):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(Qi(this,e),e=(n=e).U),e.C=!1,r.C=!0,no(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(no(this,e),e=(n=e).U),e.C=!1,r.C=!0,Qi(this,r)),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r=n.U,i=n.L,o=n.R,u=i?o?to(o):i:o;if(r?r.L===n?r.L=u:r.R=u:this._=u,i&&o?(e=u.C,u.C=n.C,((u.L=i).U=u)!==o?(r=u.U,u.U=n.U,n=u.R,r.L=n,(u.R=o).U=u):(u.U=r,n=(r=u).R)):(e=n.C,n=u),n&&(n.U=r),!e)if(n&&n.C)n.C=!1;else{do{if(n===this._)break;if(n===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,Qi(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,no(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,Qi(this,r),n=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,no(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Qi(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,no(this,r),n=this._;break}}while(t.C=!0,r=(n=r).U,!n.C);n&&(n.C=!1)}}},L.geom.voronoi=function(n){var t=Mi,e=_i,r=t,i=e,l=io;return n?o(n):(o.links=function(t){return eo(h(t)).edges.filter(function(n){return n.l&&n.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},o.triangles=function(f){var s=[];return eo(h(f)).cells.forEach(function(n,t){for(var e,r,i=n.site,o=n.edges.sort(Yi),u=-1,a=o.length,c=o[a-1].edge,l=c.l===i?c.r:c.l;++u<a;)e=l,l=(c=o[u].edge).l===i?c.r:c.l,t<e.i&&t<l.i&&(r=l,(i.x-r.x)*(e.y-i.y)-(i.x-e.x)*(r.y-i.y)<0)&&s.push([f[t],f[e.i],f[l.i]])}),s},o.x=function(n){return arguments.length?(r=ht(t=n),o):t},o.y=function(n){return arguments.length?(i=ht(e=n),o):e},o.clipExtent=function(n){return arguments.length?(l=null==n?io:n,o):l===io?null:l},o.size=function(n){return arguments.length?o.clipExtent(n&&[[0,0],n]):l===io?null:l&&l[1]},o);function o(r){var i=new Array(r.length),o=l[0][0],u=l[0][1],a=l[1][0],c=l[1][1];return eo(h(r),l).cells.forEach(function(n,t){var e=n.edges,n=n.site;(i[t]=e.length?e.map(function(n){n=n.start();return[n.x,n.y]}):n.x>=o&&n.x<=a&&n.y>=u&&n.y<=c?[[o,c],[a,c],[a,u],[o,u]]:[]).point=r[t]}),i}function h(n){return n.map(function(n,t){return{x:Math.round(r(n,t)/En)*En,y:Math.round(i(n,t)/En)*En,i:t}})}};var io=[[-1e6,-1e6],[1e6,1e6]];function oo(n){return n.x}function uo(n){return n.y}function ao(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function co(n,t){n=L.rgb(n),t=L.rgb(t);var e=n.r,r=n.g,i=n.b,o=t.r-e,u=t.g-r,a=t.b-i;return function(n){return"#"+ot(Math.round(e+o*n))+ot(Math.round(r+u*n))+ot(Math.round(i+a*n))}}function lo(n,t){var e,r={},i={};for(e in n)e in t?r[e]=go(n[e],t[e]):i[e]=n[e];for(e in t)e in n||(i[e]=t[e]);return function(n){for(e in r)i[e]=r[e](n);return i}}function fo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function so(n,r){var t,e,i,o=ho.lastIndex=po.lastIndex=0,u=-1,a=[],c=[];for(n+="",r+="";(t=ho.exec(n))&&(e=po.exec(r));)(i=e.index)>o&&(i=r.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(t=t[0])===(e=e[0])?a[u]?a[u]+=e:a[++u]=e:(a[++u]=null,c.push({i:u,x:fo(t,e)})),o=po.lastIndex;return o<r.length&&(i=r.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?c[0]?(r=c[0].x,function(n){return r(n)+""}):function(){return r}:(r=c.length,function(n){for(var t,e=0;e<r;++e)a[(t=c[e]).i]=t.x(n);return a.join("")})}L.geom.delaunay=function(n){return L.geom.voronoi().triangles(n)},L.geom.quadtree=function(n,x,M,_,b){var w,S=Mi,k=_i;return(w=arguments.length)?(S=oo,k=uo,3===w&&(b=M,_=x,M=x=0),t(n)):(t.x=function(n){return arguments.length?(S=n,t):S},t.y=function(n){return arguments.length?(k=n,t):k},t.extent=function(n){return arguments.length?(null==n?x=M=_=b=null:(x=+n[0][0],M=+n[0][1],_=+n[1][0],b=+n[1][1]),t):null==x?null:[[x,M],[_,b]]},t.size=function(n){return arguments.length?(null==n?x=M=_=b=null:(x=M=0,_=+n[0],b=+n[1]),t):null==x?null:[_-x,b-M]},t);function t(n){var t,e,r,i,o,u,a,c,l,f=ht(S),s=ht(k);if(null!=x)u=x,a=M,c=_,l=b;else if(c=l=-(u=a=1/0),e=[],r=[],o=n.length,w)for(i=0;i<o;++i)(t=n[i]).x<u&&(u=t.x),t.y<a&&(a=t.y),t.x>c&&(c=t.x),t.y>l&&(l=t.y),e.push(t.x),r.push(t.y);else for(i=0;i<o;++i){var h=+f(t=n[i],i),p=+s(t,i);h<u&&(u=h),p<a&&(a=p),c<h&&(c=h),l<p&&(l=p),e.push(h),r.push(p)}var g=c-u,d=l-a;function v(n,t,e,r,i,o,u,a){var c,l,f;isNaN(e)||isNaN(r)||(n.leaf?(c=n.x,l=n.y,null!=c?(q(c-e)+q(l-r)<.01||(f=n.point,n.x=n.y=n.point=null,y(n,f,c,l,i,o,u,a)),y(n,t,e,r,i,o,u,a)):(n.x=e,n.y=r,n.point=t)):y(n,t,e,r,i,o,u,a))}function y(n,t,e,r,i,o,u,a){var c=.5*(i+u),l=.5*(o+a),f=c<=e,s=l<=r,h=(s<<1)+f;n.leaf=!1,f?i=c:u=c,s?o=l:a=l,v(n=n.nodes[h]||(n.nodes[h]=ao()),t,e,r,i,o,u,a)}d<g?l=a+g:c=u+d;var m=ao();if(m.add=function(n){v(m,n,+f(n,++i),+s(n,i),u,a,c,l)},m.visit=function(n){!function n(t,e,r,i,o,u){{var a,c;t(e,r,i,o,u)||(a=.5*(r+o),c=.5*(i+u),(e=e.nodes)[0]&&n(t,e[0],r,i,a,c),e[1]&&n(t,e[1],a,i,o,c),e[2]&&n(t,e[2],r,c,a,u),e[3]&&n(t,e[3],a,c,o,u))}}(n,m,u,a,c,l)},i=-1,null==x){for(;++i<o;)v(m,n[i],e[i],r[i],u,a,c,l);--i}else n.forEach(m.add);return e=r=n=t=null,m}},L.interpolateRgb=co,L.interpolateObject=lo,L.interpolateNumber=fo,L.interpolateString=so;var ho=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,po=new RegExp(ho.source,"g");function go(n,t){for(var e,r=L.interpolators.length;0<=--r&&!(e=L.interpolators[r](n,t)););return e}function vo(n,t){for(var e=[],r=[],i=n.length,o=t.length,u=Math.min(n.length,t.length),a=0;a<u;++a)e.push(go(n[a],t[a]));for(;a<i;++a)r[a]=n[a];for(;a<o;++a)r[a]=t[a];return function(n){for(a=0;a<u;++a)r[a]=e[a](n);return r}}L.interpolate=go,L.interpolators=[function(n,t){var e=typeof t;return("string"==e?st.has(t)||/^(#|rgb\(|hsl\()/.test(t)?co:so:t instanceof On?co:Array.isArray(t)?vo:"object"==e&&isNaN(t)?lo:fo)(n,t)}],L.interpolateArray=vo;function yo(){return pt}var mo=L.map({linear:yo,poly:function(t){return function(n){return Math.pow(n,t)}},quad:function(){return bo},cubic:function(){return wo},sin:function(){return ko},exp:function(){return No},circle:function(){return Eo},elastic:function(t,e){var r;arguments.length<2&&(e=.45);r=arguments.length?e/kn*Math.asin(1/t):(t=1,e/4);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-r)*kn/e)}},back:function(t){t=t||1.70158;return function(n){return n*n*((t+1)*n-t)}},bounce:function(){return Ao}}),xo=L.map({in:pt,out:Mo,"in-out":_o,"out-in":function(n){return _o(Mo(n))}});function Mo(t){return function(n){return 1-t(1-n)}}function _o(t){return function(n){return.5*(n<.5?t(2*n):2-t(2-2*n))}}function bo(n){return n*n}function wo(n){return n*n*n}function So(n){if(n<=0)return 0;if(1<=n)return 1;var t=n*n,e=t*n;return 4*(n<.5?e:3*(n-t)+e-.75)}function ko(n){return 1-Math.cos(n*Nn)}function No(n){return Math.pow(2,10*(n-1))}function Eo(n){return 1-Math.sqrt(1-n*n)}function Ao(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Co(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function zo(n){var t,e,r=[n.a,n.b],i=[n.c,n.d],o=To(r),u=Lo(r,i),a=To(((a=i)[0]+=(e=-u)*(t=r)[0],a[1]+=e*t[1],a))||0;r[0]*i[1]<i[0]*r[1]&&(r[0]*=-1,r[1]*=-1,o*=-1,u*=-1),this.rotate=(o?Math.atan2(r[1],r[0]):Math.atan2(-i[0],i[1]))*zn,this.translate=[n.e,n.f],this.scale=[o,a],this.skew=a?Math.atan2(u,a)*zn:0}function Lo(n,t){return n[0]*t[0]+n[1]*t[1]}function To(n){var t=Math.sqrt(Lo(n,n));return t&&(n[0]/=t,n[1]/=t),t}L.ease=function(n){var t,e=n.indexOf("-"),r=0<=e?n.slice(0,e):n,e=0<=e?n.slice(e+1):"in",r=mo.get(r)||yo,e=xo.get(e)||pt;return t=e(r.apply(null,i.call(arguments,1))),function(n){return n<=0?0:1<=n?1:t(n)}},L.interpolateHcl=function(n,t){n=L.hcl(n),t=L.hcl(t);var e=n.h,r=n.c,i=n.l,o=t.h-e,u=t.c-r,a=t.l-i;isNaN(u)&&(u=0,r=isNaN(r)?t.c:r);isNaN(o)?(o=0,e=isNaN(e)?t.h:e):180<o?o-=360:o<-180&&(o+=360);return function(n){return Vn(e+o*n,r+u*n,i+a*n)+""}},L.interpolateHsl=function(n,t){n=L.hsl(n),t=L.hsl(t);var e=n.h,r=n.s,i=n.l,o=t.h-e,u=t.s-r,a=t.l-i;isNaN(u)&&(u=0,r=isNaN(r)?t.s:r);isNaN(o)?(o=0,e=isNaN(e)?t.h:e):180<o?o-=360:o<-180&&(o+=360);return function(n){return In(e+o*n,r+u*n,i+a*n)+""}},L.interpolateLab=function(n,t){n=L.lab(n),t=L.lab(t);var e=n.l,r=n.a,i=n.b,o=t.l-e,u=t.a-r,a=t.b-i;return function(n){return Gn(e+o*n,r+u*n,i+a*n)+""}},L.interpolateRound=Co,L.transform=function(n){var e=r.createElementNS(L.ns.prefix.svg,"g");return(L.transform=function(n){var t;return null!=n&&(e.setAttribute("transform",n),t=e.transform.baseVal.consolidate()),new zo(t?t.matrix:qo)})(n)},zo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var qo={a:1,b:0,c:0,d:1,e:0,f:0};function Ro(n,t){var r,i=[],o=[],e=L.transform(n),u=L.transform(t),a=e.translate,c=u.translate,l=e.rotate,f=u.rotate,n=e.skew,t=u.skew,e=e.scale,u=u.scale;return a[0]!=c[0]||a[1]!=c[1]?(i.push("translate(",null,",",null,")"),o.push({i:1,x:fo(a[0],c[0])},{i:3,x:fo(a[1],c[1])})):c[0]||c[1]?i.push("translate("+c+")"):i.push(""),l!=f?(180<l-f?f+=360:180<f-l&&(l+=360),o.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:fo(l,f)})):f&&i.push(i.pop()+"rotate("+f+")"),n!=t?o.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:fo(n,t)}):t&&i.push(i.pop()+"skewX("+t+")"),e[0]!=u[0]||e[1]!=u[1]?(r=i.push(i.pop()+"scale(",null,",",null,")"),o.push({i:r-4,x:fo(e[0],u[0])},{i:r-2,x:fo(e[1],u[1])})):1==u[0]&&1==u[1]||i.push(i.pop()+"scale("+u+")"),r=o.length,function(n){for(var t,e=-1;++e<r;)i[(t=o[e]).i]=t.x(n);return i.join("")}}function Do(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Po(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Uo(n){for(var t=[],e=n.parent;null!=e;)t.push(n),e=(n=e).parent;return t.push(n),t}function jo(n){n.fixed|=2}function Fo(n){n.fixed&=-7}function Ho(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Oo(n){n.fixed&=-5}L.interpolateTransform=Ro,L.layout={},L.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(function(n){var t=n.source,e=n.target,r=function(n,t){if(n===t)return n;var e=Uo(n),r=Uo(t),i=e.pop(),o=r.pop(),u=null;for(;i===o;)u=i,i=e.pop(),o=r.pop();return u}(t,e),i=[t];for(;t!==r;)t=t.parent,i.push(t);var o=i.length;for(;e!==r;)i.splice(o,0,e),e=e.parent;return i}(n[e]));return t}},L.layout.chord=function(){var v,y,m,x,M,_,b,t={},w=0;function n(){var n,t,e,r,i,o={},u=[],a=L.range(x),c=[];for(v=[],y=[],n=0,r=-1;++r<x;){for(t=0,i=-1;++i<x;)t+=m[r][i];u.push(t),c.push(L.range(x)),n+=t}for(M&&a.sort(function(n,t){return M(u[n],u[t])}),_&&c.forEach(function(n,e){n.sort(function(n,t){return _(m[e][n],m[e][t])})}),n=(kn-w*x)/n,t=0,r=-1;++r<x;){for(e=t,i=-1;++i<x;){var l=a[r],f=c[l][i],s=m[l][f],h=t,p=t+=s*n;o[l+"-"+f]={index:l,subindex:f,startAngle:h,endAngle:p,value:s}}y[l]={index:l,startAngle:e,endAngle:t,value:(t-e)/n},t+=w}for(r=-1;++r<x;)for(i=r-1;++i<x;){var g=o[r+"-"+i],d=o[i+"-"+r];(g.value||d.value)&&v.push(g.value<d.value?{source:d,target:g}:{source:g,target:d})}b&&S()}function S(){v.sort(function(n,t){return b((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(n){return arguments.length?(x=(m=n)&&m.length,v=y=null,t):m},t.padding=function(n){return arguments.length?(w=n,v=y=null,t):w},t.sortGroups=function(n){return arguments.length?(M=n,v=y=null,t):M},t.sortSubgroups=function(n){return arguments.length?(_=n,v=null,t):_},t.sortChords=function(n){return arguments.length?(b=n,v&&S(),t):b},t.chords=function(){return v||n(),v},t.groups=function(){return y||n(),y},t},L.layout.force=function(){var n,s,h,p,g,o={},d=L.dispatch("start","tick","end"),v=[1,1],y=.9,u=Yo,f=Io,m=-30,x=Zo,M=.1,_=.64,b=[],w=[];function t(n){n.px=L.event.x,n.py=L.event.y,o.resume()}return o.tick=function(){if((s*=.99)<.005)return d.end({type:"end",alpha:s=0}),!0;for(var n,t,e,r,i,o,u,a,c=b.length,l=w.length,f=0;f<l;++f)e=(t=w[f]).source,(i=(u=(r=t.target).x-e.x)*u+(a=r.y-e.y)*a)&&(u*=i=s*p[f]*((i=Math.sqrt(i))-h[f])/i,a*=i,r.x-=u*(o=e.weight/(r.weight+e.weight)),r.y-=a*o,e.x+=u*(o=1-o),e.y+=a*o);if((o=s*M)&&(u=v[0]/2,a=v[1]/2,f=-1,o))for(;++f<c;)(t=b[f]).x+=(u-t.x)*o,t.y+=(a-t.y)*o;if(m)for(!function n(t,e,r){var i=0,o=0;t.charge=0;if(!t.leaf)for(var u,a=t.nodes,c=a.length,l=-1;++l<c;)null!=(u=a[l])&&(n(u,e,r),t.charge+=u.charge,i+=u.charge*u.cx,o+=u.charge*u.cy);{var f;t.point&&(t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5),f=e*r[t.point.index],t.charge+=t.pointCharge=f,i+=f*t.point.x,o+=f*t.point.y)}t.cx=i/t.charge;t.cy=o/t.charge}(n=L.geom.quadtree(b),s,g),f=-1;++f<c;)(t=b[f]).fixed||n.visit(function(a){return function(n,t,e,r){if(n.point!==a){var i,o=n.cx-a.x,u=n.cy-a.y,r=r-t,t=o*o+u*u;if(r*r/_<t)return t<x&&(i=n.charge/t,a.px-=o*i,a.py-=u*i),!0;n.point&&t&&t<x&&(i=n.pointCharge/t,a.px-=o*i,a.py-=u*i)}return!n.charge}}(t));for(f=-1;++f<c;)(t=b[f]).fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*y,t.y-=(t.py-(t.py=t.y))*y);d.tick({type:"tick",alpha:s})},o.nodes=function(n){return arguments.length?(b=n,o):b},o.links=function(n){return arguments.length?(w=n,o):w},o.size=function(n){return arguments.length?(v=n,o):v},o.linkDistance=function(n){return arguments.length?(u="function"==typeof n?n:+n,o):u},o.distance=o.linkDistance,o.linkStrength=function(n){return arguments.length?(f="function"==typeof n?n:+n,o):f},o.friction=function(n){return arguments.length?(y=+n,o):y},o.charge=function(n){return arguments.length?(m="function"==typeof n?n:+n,o):m},o.chargeDistance=function(n){return arguments.length?(x=n*n,o):Math.sqrt(x)},o.gravity=function(n){return arguments.length?(M=+n,o):M},o.theta=function(n){return arguments.length?(_=n*n,o):Math.sqrt(_)},o.alpha=function(n){return arguments.length?(n=+n,s?s=0<n?n:0:0<n&&(d.start({type:"start",alpha:s=n}),L.timer(o.tick)),o):s},o.start=function(){for(var a,n,c=b.length,t=w.length,e=v[0],r=v[1],l=0;l<c;++l)(n=b[l]).index=l,n.weight=0;for(l=0;l<t;++l)"number"==typeof(n=w[l]).source&&(n.source=b[n.source]),"number"==typeof n.target&&(n.target=b[n.target]),++n.source.weight,++n.target.weight;for(l=0;l<c;++l)n=b[l],isNaN(n.x)&&(n.x=i("x",e)),isNaN(n.y)&&(n.y=i("y",r)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(h=[],"function"==typeof u)for(l=0;l<t;++l)h[l]=+u.call(this,w[l],l);else for(l=0;l<t;++l)h[l]=u;if(p=[],"function"==typeof f)for(l=0;l<t;++l)p[l]=+f.call(this,w[l],l);else for(l=0;l<t;++l)p[l]=f;if(g=[],"function"==typeof m)for(l=0;l<c;++l)g[l]=+m.call(this,b[l],l);else for(l=0;l<c;++l)g[l]=m;function i(n,t){if(!a){for(a=new Array(c),o=0;o<c;++o)a[o]=[];for(o=0;o<u;++o){var e=w[o];a[e.source.index].push(e.target),a[e.target.index].push(e.source)}}for(var r,i=a[l],o=-1,u=i.length;++o<u;)if(!isNaN(r=i[o][n]))return r;return Math.random()*t}return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){if(n=n||L.behavior.drag().origin(pt).on("dragstart.force",jo).on("drag.force",t).on("dragend.force",Fo),!arguments.length)return n;this.on("mouseover.force",Ho).on("mouseout.force",Oo).call(n)},L.rebind(o,d,"on")};var Yo=20,Io=1,Zo=1/0;function Vo(n,t){return L.rebind(n,t,"sort","children","value"),(n.nodes=n).links=Go,n}function Xo(n,t){for(var e,r,i=[n];null!=(n=i.pop());)if(t(n),(r=n.children)&&(e=r.length))for(;0<=--e;)i.push(r[e])}function $o(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(o=n.children)&&(i=o.length))for(var i,o,u=-1;++u<i;)e.push(o[u]);for(;null!=(n=r.pop());)t(n)}function Bo(n){return n.children}function Wo(n){return n.value}function Jo(n,t){return t.value-n.value}function Go(n){return L.merge(n.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}L.layout.hierarchy=function(){var a=Jo,c=Bo,l=Wo;function f(n){var t,e,r,i,o=[n],u=[];for(n.depth=0;null!=(t=o.pop());)if(u.push(t),(r=c.call(f,t,t.depth))&&(e=r.length)){for(;0<=--e;)o.push(i=r[e]),i.parent=t,i.depth=t.depth+1;l&&(t.value=0),t.children=r}else l&&(t.value=+l.call(f,t,t.depth)||0),delete t.children;return $o(n,function(n){var t,e;a&&(t=n.children)&&t.sort(a),l&&(e=n.parent)&&(e.value+=n.value)}),u}return f.sort=function(n){return arguments.length?(a=n,f):a},f.children=function(n){return arguments.length?(c=n,f):c},f.value=function(n){return arguments.length?(l=n,f):l},f.revalue=function(n){return l&&(Xo(n,function(n){n.children&&(n.value=0)}),$o(n,function(n){var t;n.children||(n.value=+l.call(f,n,n.depth)||0),(t=n.parent)&&(t.value+=n.value)})),n},f},L.layout.partition=function(){var e=L.layout.hierarchy(),r=[1,1];function t(n,t){t=e.call(this,n,t);return function n(t,e,r,i){var o=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(u=o.length)){var u,a,c=-1;for(r=t.value?r/t.value:0;++c<u;)n(a=o[c],e,a=a.value*r,i),e+=a}}(t[0],0,r[0],r[1]/function n(t){var e=t.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,n(e[o]));return 1+r}(t[0])),t}return t.size=function(n){return arguments.length?(r=n,t):r},Vo(t,e)},L.layout.pie=function(){var u=Number,a=Ko,c=0,l=kn;function f(e){var r=e.map(function(n,t){return+u.call(f,n,t)}),t=+("function"==typeof c?c.apply(this,arguments):c),i=(("function"==typeof l?l.apply(this,arguments):l)-t)/L.sum(r),n=L.range(e.length);null!=a&&n.sort(a===Ko?function(n,t){return r[t]-r[n]}:function(n,t){return a(e[n],e[t])});var o=[];return n.forEach(function(n){o[n]={data:e[n],value:n=r[n],startAngle:t,endAngle:t+=n*i}}),o}return f.value=function(n){return arguments.length?(u=n,f):u},f.sort=function(n){return arguments.length?(a=n,f):a},f.startAngle=function(n){return arguments.length?(c=n,f):c},f.endAngle=function(n){return arguments.length?(l=n,f):l},f};var Ko={};function Qo(n){return n.x}function nu(n){return n.y}function tu(n,t,e){n.y0=t,n.y=e}L.layout.stack=function(){var s=pt,h=iu,p=ou,g=tu,d=Qo,v=nu;function y(n,t){if(!(e=n.length))return n;for(var e,r,i,o=(a=n.map(function(n,t){return s.call(y,n,t)})).map(function(n){return n.map(function(n,t){return[d.call(y,n,t),v.call(y,n,t)]})}),u=h.call(y,o,t),a=L.permute(a,u),o=L.permute(o,u),c=p.call(y,o,t),l=a[0].length,f=0;f<l;++f)for(g.call(y,a[0][f],i=c[f],o[0][f][1]),r=1;r<e;++r)g.call(y,a[r][f],i+=o[r-1][f][1],o[r][f][1]);return n}return y.values=function(n){return arguments.length?(s=n,y):s},y.order=function(n){return arguments.length?(h="function"==typeof n?n:eu.get(n)||iu,y):h},y.offset=function(n){return arguments.length?(p="function"==typeof n?n:ru.get(n)||ou,y):p},y.x=function(n){return arguments.length?(d=n,y):d},y.y=function(n){return arguments.length?(v=n,y):v},y.out=function(n){return arguments.length?(g=n,y):g},y};var eu=L.map({"inside-out":function(n){for(var t,e=n.length,r=n.map(uu),i=n.map(au),o=L.range(e).sort(function(n,t){return r[n]-r[t]}),u=0,a=0,c=[],l=[],f=0;f<e;++f)t=o[f],u<a?(u+=i[t],c.push(t)):(a+=i[t],l.push(t));return l.reverse().concat(c)},reverse:function(n){return L.range(n.length).reverse()},default:iu}),ru=L.map({silhouette:function(n){for(var t,e,r=n.length,i=n[0].length,o=[],u=0,a=[],c=0;c<i;++c){for(e=t=0;t<r;t++)e+=n[t][c][1];u<e&&(u=e),o.push(e)}for(c=0;c<i;++c)a[c]=(u-o[c])/2;return a},wiggle:function(n){var t,e,r,i,o,u,a,c,l,f=n.length,s=n[0],h=s.length,p=[];for(p[0]=c=l=0,e=1;e<h;++e){for(i=t=0;t<f;++t)i+=n[t][e][1];for(a=s[e][o=t=0]-s[e-1][0];t<f;++t){for(r=0,u=(n[t][e][1]-n[t][e-1][1])/(2*a);r<t;++r)u+=(n[r][e][1]-n[r][e-1][1])/a;o+=u*n[t][e][1]}p[e]=c-=i?o/i*a:0,c<l&&(l=c)}for(e=0;e<h;++e)p[e]-=l;return p},expand:function(n){for(var t,e,r=n.length,i=n[0].length,o=1/r,u=[],a=0;a<i;++a){for(e=t=0;t<r;t++)e+=n[t][a][1];if(e)for(t=0;t<r;t++)n[t][a][1]/=e;else for(t=0;t<r;t++)n[t][a][1]=o}for(a=0;a<i;++a)u[a]=0;return u},zero:ou});function iu(n){return L.range(n.length)}function ou(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function uu(n){for(var t,e=1,r=0,i=n[0][1],o=n.length;e<o;++e)(t=n[e][1])>i&&(r=e,i=t);return r}function au(n){return n.reduce(cu,0)}function cu(n,t){return n+t[1]}function lu(n,t){return fu(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function fu(n,t){for(var e=-1,r=+n[0],i=(n[1]-r)/t,o=[];++e<=t;)o[e]=i*e+r;return o}function su(n){return[L.min(n),L.max(n)]}function hu(n,t){return n.value-t.value}function pu(n,t){var e=n._pack_next;(n._pack_next=t)._pack_prev=n,(t._pack_next=e)._pack_prev=t}function gu(n,t){(n._pack_next=t)._pack_prev=n}function du(n,t){var e=t.x-n.x,r=t.y-n.y,t=n.r+t.r;return e*e+r*r<.999*t*t}function vu(n){if((t=n.children)&&(u=t.length)){var t,e,r,i,o,u,a=1/0,c=-1/0,l=1/0,f=-1/0;if(t.forEach(yu),(e=t[0]).x=-e.r,e.y=0,x(e),1<u&&((r=t[1]).x=r.r,r.y=0,x(r),2<u))for(xu(e,r,i=t[2]),x(i),pu(e,i),pu(e._pack_prev=i,r),r=e._pack_next,m=3;m<u;m++){xu(e,r,i=t[m]);for(var s=0,h=1,p=1,g=r._pack_next;g!==r;g=g._pack_next,h++)if(du(g,i)){s=1;break}if(1==s)for(o=e._pack_prev;o!==g._pack_prev&&!du(o,i);o=o._pack_prev,p++);s?(h<p||h==p&&r.r<e.r?gu(e,r=g):gu(e=o,r),m--):(pu(e,i),x(r=i))}for(var d=(a+c)/2,v=(l+f)/2,y=0,m=0;m<u;m++)(i=t[m]).x-=d,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=y,t.forEach(mu)}function x(n){a=Math.min(n.x-n.r,a),c=Math.max(n.x+n.r,c),l=Math.min(n.y-n.r,l),f=Math.max(n.y+n.r,f)}}function yu(n){n._pack_next=n._pack_prev=n}function mu(n){delete n._pack_next,delete n._pack_prev}function xu(n,t,e){var r,i,o=n.r+e.r,u=t.x-n.x,a=t.y-n.y;o&&(u||a)?(r=t.r+e.r,t=.5+((o*=o)-(r*=r))/(2*(i=u*u+a*a)),i=Math.sqrt(Math.max(0,2*r*(o+i)-(o-=i)*o-r*r))/(2*i),e.x=n.x+t*u+i*a,e.y=n.y+t*a-i*u):(e.x=n.x+o,e.y=n.y)}function Mu(n,t){return n.parent==t.parent?1:2}function _u(n){var t=n.children;return t.length?t[0]:n.t}function bu(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function wu(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Su(n,t){var e=n.x+t[3],r=n.y+t[0],i=n.dx-t[1]-t[3],t=n.dy-t[0]-t[2];return i<0&&(e+=i/2,i=0),t<0&&(r+=t/2,t=0),{x:e,y:r,dx:i,dy:t}}function ku(n){var t=n[0],n=n[n.length-1];return t<n?[t,n]:[n,t]}function Nu(n){return n.rangeExtent?n.rangeExtent():ku(n.range())}function Eu(n,t,e,r){var i=e(n[0],n[1]),o=r(t[0],t[1]);return function(n){return o(i(n))}}function Au(n,t){var e,r=0,i=n.length-1,o=n[r],u=n[i];return u<o&&(e=r,r=i,i=e,e=o,o=u,u=e),n[r]=t.floor(o),n[i]=t.ceil(u),n}L.layout.histogram=function(){var s=!0,h=Number,p=su,g=lu;function e(n,t){for(var e,r,i=[],o=n.map(h,this),u=p.call(this,o,t),a=g.call(this,u,o,t),t=-1,c=o.length,l=a.length-1,f=s?1:1/c;++t<l;)(e=i[t]=[]).dx=a[t+1]-(e.x=a[t]),e.y=0;if(0<l)for(t=-1;++t<c;)(r=o[t])>=u[0]&&r<=u[1]&&((e=i[L.bisect(a,r,1,l)-1]).y+=f,e.push(n[t]));return i}return e.value=function(n){return arguments.length?(h=n,e):h},e.range=function(n){return arguments.length?(p=ht(n),e):p},e.bins=function(t){return arguments.length?(g="number"==typeof t?function(n){return fu(n,t)}:ht(t),e):g},e.frequency=function(n){return arguments.length?(s=!!n,e):s},e},L.layout.pack=function(){var u,a=L.layout.hierarchy().sort(hu),c=0,l=[1,1];function t(n,t){var e,r=a.call(this,n,t),i=r[0],n=l[0],t=l[1],o=null==u?Math.sqrt:"function"==typeof u?u:function(){return u};return i.x=i.y=0,$o(i,function(n){n.r=+o(n.value)}),$o(i,vu),c&&(e=c*(u?1:Math.max(2*i.r/n,2*i.r/t))/2,$o(i,function(n){n.r+=e}),$o(i,vu),$o(i,function(n){n.r-=e})),function n(t,e,r,i){var o=t.children;t.x=e+=i*t.x;t.y=r+=i*t.y;t.r*=i;if(o)for(var u=-1,a=o.length;++u<a;)n(o[u],e,r,i)}(i,n/2,t/2,u?1:1/Math.max(2*i.r/n,2*i.r/t)),r}return t.size=function(n){return arguments.length?(l=n,t):l},t.radius=function(n){return arguments.length?(u=null==n||"function"==typeof n?n:+n,t):u},t.padding=function(n){return arguments.length?(c=+n,t):c},Vo(t,a)},L.layout.tree=function(){var l=L.layout.hierarchy().sort(null).value(null),h=Mu,f=[1,1],s=null;function t(n,t){var e,r,i,o,u,a,c=l.call(this,n,t),n=c[0],t=function(n){var t,n={A:null,children:[n]},e=[n];for(;null!=(t=e.pop());)for(var r,i=t.children,o=0,u=i.length;o<u;++o)e.push((i[o]=r={_:i[o],parent:t,children:(r=i[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}(n);return $o(t,p),t.parent.m=-t.z,Xo(t,g),s?Xo(n,d):(Xo(i=r=e=n,function(n){n.x<e.x&&(e=n),n.x>r.x&&(r=n),n.depth>i.depth&&(i=n)}),o=h(e,r)/2-e.x,u=f[0]/(r.x+h(r,e)/2+o),a=f[1]/(i.depth||1),Xo(n,function(n){n.x=(n.x+o)*u,n.y=n.depth*a})),c}function p(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;t.length?(function(n){var t,e=0,r=0,i=n.children,o=i.length;for(;0<=--o;)(t=i[o]).z+=e,t.m+=e,e+=t.s+(r+=t.c)}(n),t=(t[0].z+t[t.length-1].z)/2,r?(n.z=r.z+h(n._,r._),n.m=n.z-t):n.z=t):r&&(n.z=r.z+h(n._,r._)),n.parent.A=function(n,t,e){if(t){for(var r,i=n,o=n,u=t,a=i.parent.children[0],c=i.m,l=o.m,f=u.m,s=a.m;u=bu(u),i=_u(i),u&&i;)a=_u(a),(o=bu(o)).a=n,0<(r=u.z+f-i.z-c+h(u._,i._))&&(function(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}(function(n,t,e){return n.a.parent===t.parent?n.a:e}(u,n,e),n,r),c+=r,l+=r),f+=u.m,c+=i.m,s+=a.m,l+=o.m;u&&!bu(o)&&(o.t=u,o.m+=f-l),i&&!_u(a)&&(a.t=i,a.m+=c-s,e=n)}return e}(n,r,n.parent.A||e[0])}function g(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function d(n){n.x*=f[0],n.y=n.depth*f[1]}return t.separation=function(n){return arguments.length?(h=n,t):h},t.size=function(n){return arguments.length?(s=null==(f=n)?d:null,t):s?null:f},t.nodeSize=function(n){return arguments.length?(s=null==(f=n)?null:d,t):s?f:null},Vo(t,l)},L.layout.cluster=function(){var c=L.layout.hierarchy().sort(null).value(null),l=Mu,f=[1,1],s=!1;function t(n,t){var r,e=c.call(this,n,t),i=e[0],o=0;$o(i,function(n){var t,e=n.children;e&&e.length?(n.x=(t=e).reduce(function(n,t){return n+t.x},0)/t.length,n.y=1+L.max(e,function(n){return n.y})):(n.x=r?o+=l(n,r):0,n.y=0,r=n)});var n=function n(t){var e=t.children;return e&&e.length?n(e[0]):t}(i),t=function n(t){var e,r=t.children;return r&&(e=r.length)?n(r[e-1]):t}(i),u=n.x-l(n,t)/2,a=t.x+l(t,n)/2;return $o(i,s?function(n){n.x=(n.x-i.x)*f[0],n.y=(i.y-n.y)*f[1]}:function(n){n.x=(n.x-u)/(a-u)*f[0],n.y=(1-(i.y?n.y/i.y:1))*f[1]}),e}return t.separation=function(n){return arguments.length?(l=n,t):l},t.size=function(n){return arguments.length?(s=null==(f=n),t):s?null:f},t.nodeSize=function(n){return arguments.length?(s=null!=(f=n),t):s?f:null},Vo(t,c)},L.layout.treemap=function(){var e,r=L.layout.hierarchy(),f=Math.round,i=[1,1],o=null,l=wu,u=!1,s="squarify",h=.5*(1+Math.sqrt(5));function p(n,t){for(var e,r,i=-1,o=n.length;++i<o;)r=(e=n[i]).value*(t<0?0:t),e.area=isNaN(r)||r<=0?0:r}function g(n){var t=n.children;if(t&&t.length){var e,r,i=l(n),o=[],u=t.slice(),a=1/0,c="slice"===s?i.dx:"dice"===s?i.dy:"slice-dice"===s?1&n.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(p(u,i.dx*i.dy/n.value),o.area=0;0<(r=u.length);)o.push(r=u[r-1]),o.area+=r.area,a="squarify"!==s||(e=function(n,t){var e,r=n.area,i=0,o=1/0,u=-1,a=n.length;for(;++u<a;)(e=n[u].area)&&(e<o&&(o=e),i<e&&(i=e));return t*=t,(r*=r)?Math.max(t*i*h/r,r/(t*o*h)):1/0}(o,c))<=a?(u.pop(),e):(o.area-=o.pop().area,d(o,c,i,!1),c=Math.min(i.dx,i.dy),1/(o.length=o.area=0));o.length&&(d(o,c,i,!0),o.length=o.area=0),t.forEach(g)}}function a(n){var t=n.children;if(t&&t.length){var e,r=l(n),i=t.slice(),o=[];for(p(i,r.dx*r.dy/n.value),o.area=0;e=i.pop();)o.push(e),o.area+=e.area,null!=e.z&&(d(o,e.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);t.forEach(a)}}function d(n,t,e,r){var i,o=-1,u=n.length,a=e.x,c=e.y,l=t?f(n.area/t):0;if(t==e.dx){for((r||l>e.dy)&&(l=e.dy);++o<u;)(i=n[o]).x=a,i.y=c,i.dy=l,a+=i.dx=Math.min(e.x+e.dx-a,l?f(i.area/l):0);i.z=!0,i.dx+=e.x+e.dx-a,e.y+=l,e.dy-=l}else{for((r||l>e.dx)&&(l=e.dx);++o<u;)(i=n[o]).x=a,i.y=c,i.dx=l,c+=i.dy=Math.min(e.y+e.dy-c,l?f(i.area/l):0);i.z=!1,i.dy+=e.y+e.dy-c,e.x+=l,e.dx-=l}}function c(n){var t=e||r(n),n=t[0];return n.x=0,n.y=0,n.dx=i[0],n.dy=i[1],e&&r.revalue(n),p([n],n.dx*n.dy/n.value),(e?a:g)(n),u&&(e=t),t}return c.size=function(n){return arguments.length?(i=n,c):i},c.padding=function(e){return arguments.length?(l=null==(o=e)?wu:"function"==(t=typeof e)?function(n){var t=e.call(c,n,n.depth);return null==t?wu(n):Su(n,"number"==typeof t?[t,t,t,t]:t)}:("number"==t&&(e=[e,e,e,e]),n),c):o;function n(n){return Su(n,e)}var t},c.round=function(n){return arguments.length?(f=n?Math.round:Number,c):f!=Number},c.sticky=function(n){return arguments.length?(u=n,e=null,c):u},c.ratio=function(n){return arguments.length?(h=n,c):h},c.mode=function(n){return arguments.length?(s=n+"",c):s},Vo(c,r)},L.random={normal:function(r,i){var n=arguments.length;return n<2&&(i=1),n<1&&(r=0),function(){for(var n,t,e;!(e=(n=2*Math.random()-1)*n+(t=2*Math.random()-1)*t)||1<e;);return r+i*n*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var n=L.random.normal.apply(L,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=L.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(e){return function(){for(var n=0,t=0;t<e;t++)n+=Math.random();return n}}},L.scale={};var Cu={floor:pt,ceil:pt};function zu(e,n,t,r){var i=[],o=[],u=0,a=Math.min(e.length,n.length)-1;for(e[a]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++u<=a;)i.push(t(e[u-1],e[u])),o.push(r(n[u-1],n[u]));return function(n){var t=L.bisect(e,n,1,a)-1;return o[t](i[t](n))}}function Lu(n,t){return L.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Tu(n,t){return Au(n,(e=qu(n,t)[2])?{floor:function(n){return Math.floor(n/e)*e},ceil:function(n){return Math.ceil(n/e)*e}}:Cu);var e}function qu(n,t){null==t&&(t=10);var e=ku(n),r=e[1]-e[0],n=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),r=t/r*n;return r<=.15?n*=10:r<=.35?n*=5:r<=.75&&(n*=2),e[0]=Math.ceil(e[0]/n)*n,e[1]=Math.floor(e[1]/n)*n+.5*n,e[2]=n,e}function Ru(n,t){return L.range.apply(L,qu(n,t))}function Du(n,t,e){var r,i=qu(n,t);if(e){var o=Et.exec(e);if(o.shift(),"s"===o[8]){var u=L.formatPrefix(Math.max(q(i[0]),q(i[1])));return o[7]||(o[7]="."+Uu(u.scale(i[2]))),o[8]="f",e=L.format(o.join("")),function(n){return e(u.scale(n))+u.symbol}}o[7]||(o[7]="."+(r=o[8],t=Uu((n=i)[2]),r in Pu?Math.abs(t-Uu(Math.max(q(n[0]),q(n[1]))))+ +("e"!==r):t-2*("%"===r))),e=o.join("")}else e=",."+Uu(i[2])+"f";return L.format(e)}L.scale.linear=function(){return function n(e,r,i,o){var u,a;function t(){var n=2<Math.min(e.length,r.length)?zu:Eu,t=o?Po:Do;return u=n(e,r,t,i),a=n(r,e,t,go),c}function c(n){return u(n)}c.invert=function(n){return a(n)};c.domain=function(n){return arguments.length?(e=n.map(Number),t()):e};c.range=function(n){return arguments.length?(r=n,t()):r};c.rangeRound=function(n){return c.range(n).interpolate(Co)};c.clamp=function(n){return arguments.length?(o=n,t()):o};c.interpolate=function(n){return arguments.length?(i=n,t()):i};c.ticks=function(n){return Ru(e,n)};c.tickFormat=function(n,t){return Du(e,n,t)};c.nice=function(n){return Tu(e,n),t()};c.copy=function(){return n(e,r,i,o)};return t()}([0,1],[0,1],go,!1)};var Pu={s:1,g:1,p:1,r:1,e:1};function Uu(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}L.scale.log=function(){return function n(t,c,l,f){function s(n){return(l?Math.log(n<0?0:n):-Math.log(0<n?0:-n))/Math.log(c)}function h(n){return l?Math.pow(c,n):-Math.pow(c,-n)}function o(n){return t(s(n))}o.invert=function(n){return h(t.invert(n))};o.domain=function(n){return arguments.length?(l=0<=n[0],t.domain((f=n.map(Number)).map(s)),o):f};o.base=function(n){return arguments.length?(c=+n,t.domain(f.map(s)),o):c};o.nice=function(){var n=Au(f.map(s),l?Math:Fu);return t.domain(n),f=n.map(h),o};o.ticks=function(){var n=ku(f),t=[],e=n[0],r=n[1],i=Math.floor(s(e)),o=Math.ceil(s(r)),u=c%1?2:c;if(isFinite(o-i)){if(l){for(;i<o;i++)for(var a=1;a<u;a++)t.push(h(i)*a);t.push(h(i))}else for(t.push(h(i));i++<o;)for(a=u-1;0<a;a--)t.push(h(i)*a);for(i=0;t[i]<e;i++);for(o=t.length;t[o-1]>r;o--);t=t.slice(i,o)}return t};o.tickFormat=function(n,t){if(!arguments.length)return ju;arguments.length<2?t=ju:"function"!=typeof t&&(t=L.format(t));var e,r=Math.max(.1,n/o.ticks().length),i=l?(e=1e-12,Math.ceil):(e=-1e-12,Math.floor);return function(n){return n/h(i(s(n)+e))<=r?t(n):""}};o.copy=function(){return n(t.copy(),c,l,f)};return Lu(o,t)}(L.scale.linear().domain([0,1]),10,!0,[1,10])};var ju=L.format(".0e"),Fu={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};function Hu(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}L.scale.pow=function(){return function n(t,e,r){var i=Hu(e),o=Hu(1/e);function u(n){return t(i(n))}u.invert=function(n){return o(t.invert(n))};u.domain=function(n){return arguments.length?(t.domain((r=n.map(Number)).map(i)),u):r};u.ticks=function(n){return Ru(r,n)};u.tickFormat=function(n,t){return Du(r,n,t)};u.nice=function(n){return u.domain(Tu(r,n))};u.exponent=function(n){return arguments.length?(i=Hu(e=n),o=Hu(1/e),t.domain(r.map(i)),u):e};u.copy=function(){return n(t.copy(),e,r)};return Lu(u,t)}(L.scale.linear(),1,[0,1])},L.scale.sqrt=function(){return L.scale.pow().exponent(.5)},L.scale.ordinal=function(){return function n(a,c){var i,l,f;function s(n){return l[((i.get(n)||("range"===c.t?i.set(n,a.push(n)):NaN))-1)%l.length]}function h(t,e){return L.range(a.length).map(function(n){return t+e*n})}s.domain=function(n){if(!arguments.length)return a;a=[],i=new m;for(var t,e=-1,r=n.length;++e<r;)i.has(t=n[e])||i.set(t,a.push(t));return s[c.t].apply(s,c.a)};s.range=function(n){return arguments.length?(l=n,f=0,c={t:"range",a:arguments},s):l};s.rangePoints=function(n,t){arguments.length<2&&(t=0);var e=n[0],r=n[1],i=(r-e)/(Math.max(1,a.length-1)+t);return l=h(a.length<2?(e+r)/2:e+i*t/2,i),f=0,c={t:"rangePoints",a:arguments},s};s.rangeBands=function(n,t,e){arguments.length<2&&(t=0),arguments.length<3&&(e=t);var r=n[1]<n[0],i=n[+r],o=n[1-r],o=(o-i)/(a.length-t+2*e);return l=h(i+o*e,o),r&&l.reverse(),f=o*(1-t),c={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(n,t,e){arguments.length<2&&(t=0),arguments.length<3&&(e=t);var r=n[1]<n[0],i=n[+r],o=n[1-r],u=Math.floor((o-i)/(a.length-t+2*e)),o=o-i-(a.length-t)*u;return l=h(i+Math.round(o/2),u),r&&l.reverse(),f=Math.round(u*(1-t)),c={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return f};s.rangeExtent=function(){return ku(c.a[0])};s.copy=function(){return n(a,c)};return s.domain(a)}([],{t:"range",a:[[]]})},L.scale.category10=function(){return L.scale.ordinal().range(Ou)},L.scale.category20=function(){return L.scale.ordinal().range(Yu)},L.scale.category20b=function(){return L.scale.ordinal().range(Iu)},L.scale.category20c=function(){return L.scale.ordinal().range(Zu)};var Ou=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(it),Yu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(it),Iu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(it),Zu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(it);L.scale.quantile=function(){return function n(e,r){var i;function t(){var n=0,t=r.length;for(i=[];++n<t;)i[n-1]=L.quantile(e,n/t);return o}function o(n){if(!isNaN(n=+n))return r[L.bisect(i,n)]}o.domain=function(n){return arguments.length?(e=n.map(f).filter(s).sort(l),t()):e};o.range=function(n){return arguments.length?(r=n,t()):r};o.quantiles=function(){return i};o.invertExtent=function(n){return(n=r.indexOf(n))<0?[NaN,NaN]:[0<n?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]};o.copy=function(){return n(e,r)};return t()}([],[])},L.scale.quantize=function(){return function n(t,e,r){var i,o;function u(n){return r[Math.max(0,Math.min(o,Math.floor(i*(n-t))))]}function a(){return i=r.length/(e-t),o=r.length-1,u}u.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]};u.range=function(n){return arguments.length?(r=n,a()):r};u.invertExtent=function(n){return[n=(n=r.indexOf(n))<0?NaN:n/i+t,n+1/i]};u.copy=function(){return n(t,e,r)};return a()}(0,1,[0,1])},L.scale.threshold=function(){return function n(t,e){function r(n){if(n<=n)return e[L.bisect(t,n)]}r.domain=function(n){return arguments.length?(t=n,r):t};r.range=function(n){return arguments.length?(e=n,r):e};r.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]};r.copy=function(){return n(t,e)};return r}([.5],[0,1])},L.scale.identity=function(){return function n(e){function t(n){return+n}t.invert=t;t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e};t.ticks=function(n){return Ru(e,n)};t.tickFormat=function(n,t){return Du(e,n,t)};t.copy=function(){return n(e)};return t}([0,1])},L.svg={},L.svg.arc=function(){var c=$u,l=Bu,f=Wu,s=Ju;function t(){var n=c.apply(this,arguments),t=l.apply(this,arguments),e=f.apply(this,arguments)+Vu,r=s.apply(this,arguments)+Vu,i=(r<e&&(i=e,e=r,r=i),r-e),o=i<Sn?"0":"1",u=Math.cos(e),a=Math.sin(e),e=Math.cos(r),r=Math.sin(r);return Xu<=i?n?"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"M0,"+n+"A"+n+","+n+" 0 1,0 0,"+-n+"A"+n+","+n+" 0 1,0 0,"+n+"Z":"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z":n?"M"+t*u+","+t*a+"A"+t+","+t+" 0 "+o+",1 "+t*e+","+t*r+"L"+n*e+","+n*r+"A"+n+","+n+" 0 "+o+",0 "+n*u+","+n*a+"Z":"M"+t*u+","+t*a+"A"+t+","+t+" 0 "+o+",1 "+t*e+","+t*r+"L0,0Z"}return t.innerRadius=function(n){return arguments.length?(c=ht(n),t):c},t.outerRadius=function(n){return arguments.length?(l=ht(n),t):l},t.startAngle=function(n){return arguments.length?(f=ht(n),t):f},t.endAngle=function(n){return arguments.length?(s=ht(n),t):s},t.centroid=function(){var n=(c.apply(this,arguments)+l.apply(this,arguments))/2,t=(f.apply(this,arguments)+s.apply(this,arguments))/2+Vu;return[Math.cos(t)*n,Math.sin(t)*n]},t};var Vu=-Nn,Xu=kn-En;function $u(n){return n.innerRadius}function Bu(n){return n.outerRadius}function Wu(n){return n.startAngle}function Ju(n){return n.endAngle}function Gu(l){var f=Mi,s=_i,h=fr,p=Qu,t=p.key,g=.7;function e(n){var t,e=[],r=[],i=-1,o=n.length,u=ht(f),a=ht(s);function c(){e.push("M",p(l(r),g))}for(;++i<o;)h.call(this,t=n[i],i)?r.push([+u.call(this,t,i),+a.call(this,t,i)]):r.length&&(c(),r=[]);return r.length&&c(),e.length?e.join(""):null}return e.x=function(n){return arguments.length?(f=n,e):f},e.y=function(n){return arguments.length?(s=n,e):s},e.defined=function(n){return arguments.length?(h=n,e):h},e.interpolate=function(n){return arguments.length?(t="function"==typeof n?p=n:(p=Ku.get(n)||Qu).key,e):t},e.tension=function(n){return arguments.length?(g=n,e):g},e}L.svg.line=function(){return Gu(pt)};var Ku=L.map({linear:Qu,"linear-closed":function(n){return Qu(n)+"Z"},step:function(n){var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];for(;++t<e;)i.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);1<e&&i.push("H",r[0]);return i.join("")},"step-before":na,"step-after":ta,basis:ia,"basis-open":function(n){if(n.length<4)return Qu(n);var t,e=[],r=-1,i=n.length,o=[0],u=[0];for(;++r<3;)t=n[r],o.push(t[0]),u.push(t[1]);e.push(oa(ca,o)+","+oa(ca,u)),--r;for(;++r<i;)t=n[r],o.shift(),o.push(t[0]),u.shift(),u.push(t[1]),la(e,o,u);return e.join("")},"basis-closed":function(n){var t,e,r=-1,i=n.length,o=i+4,u=[],a=[];for(;++r<4;)e=n[r%i],u.push(e[0]),a.push(e[1]);t=[oa(ca,u),",",oa(ca,a)],--r;for(;++r<o;)e=n[r%i],u.shift(),u.push(e[0]),a.shift(),a.push(e[1]),la(t,u,a);return t.join("")},bundle:function(n,t){var e=n.length-1;if(e)for(var r,i,o=n[0][0],u=n[0][1],a=n[e][0]-o,c=n[e][1]-u,l=-1;++l<=e;)r=n[l],i=l/e,r[0]=t*r[0]+(1-t)*(o+i*a),r[1]=t*r[1]+(1-t)*(u+i*c);return ia(n)},cardinal:function(n,t){return n.length<3?Qu(n):n[0]+ea(n,ra(n,t))},"cardinal-open":function(n,t){return n.length<4?Qu(n):n[1]+ea(n.slice(1,n.length-1),ra(n,t))},"cardinal-closed":function(n,t){return n.length<3?Qu(n):n[0]+ea((n.push(n[0]),n),ra([n[n.length-2]].concat(n,[n[1]]),t))},monotone:function(n){return n.length<3?Qu(n):n[0]+ea(n,function(n){var t,e,r,i,o=[],u=function(n){var t=0,e=n.length-1,r=[],i=n[0],o=n[1],u=r[0]=fa(i,o);for(;++t<e;)r[t]=(u+(u=fa(i=o,o=n[t+1])))/2;return r[t]=u,r}(n),a=-1,c=n.length-1;for(;++a<c;)t=fa(n[a],n[a+1]),q(t)<En?u[a]=u[a+1]=0:(e=u[a]/t,r=u[a+1]/t,9<(i=e*e+r*r)&&(i=3*t/Math.sqrt(i),u[a]=i*e,u[a+1]=i*r));a=-1;for(;++a<=c;)i=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+u[a]*u[a])),o.push([i||0,u[a]*i||0]);return o}(n))}});function Qu(n){return n.join("L")}function na(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("V",(r=n[t])[1],"H",r[0]);return i.join("")}function ta(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r=n[t])[0],"V",r[1]);return i.join("")}function ea(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return Qu(n);var e=n.length!=t.length,r="",i=n[0],o=n[1],u=t[0],a=u,c=1;if(e&&(r+="Q"+(o[0]-2*u[0]/3)+","+(o[1]-2*u[1]/3)+","+o[0]+","+o[1],i=n[1],c=2),1<t.length){a=t[1],o=n[c],c++,r+="C"+(i[0]+u[0])+","+(i[1]+u[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var l=2;l<t.length;l++,c++)o=n[c],a=t[l],r+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}return e&&(e=n[c],r+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+e[0]+","+e[1]),r}function ra(n,t){for(var e,r=[],i=(1-t)/2,o=n[0],u=n[1],a=1,c=n.length;++a<c;)e=o,o=u,u=n[a],r.push([i*(u[0]-e[0]),i*(u[1]-e[1])]);return r}function ia(n){if(n.length<3)return Qu(n);var t=1,e=n.length,r=n[0],i=r[0],o=r[1],u=[i,i,i,(r=n[1])[0]],a=[o,o,o,r[1]],c=[i,",",o,"L",oa(ca,u),",",oa(ca,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],u.shift(),u.push(r[0]),a.shift(),a.push(r[1]),la(c,u,a);return n.pop(),c.push("L",r),c.join("")}function oa(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}Ku.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var ua=[0,2/3,1/3,0],aa=[0,1/3,2/3,0],ca=[0,1/6,2/3,1/6];function la(n,t,e){n.push("C",oa(ua,t),",",oa(ua,e),",",oa(aa,t),",",oa(aa,e),",",oa(ca,t),",",oa(ca,e))}function fa(n,t){return(t[1]-n[1])/(t[0]-n[0])}function sa(n){for(var t,e,r,i=-1,o=n.length;++i<o;)e=(t=n[i])[0],r=t[1]+Vu,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function ha(g){var d=Mi,v=Mi,y=0,m=_i,x=fr,M=Qu,t=M.key,_=M,b="L",w=.7;function e(n){var t,e,r,i=[],o=[],u=[],a=-1,c=n.length,l=ht(d),f=ht(y),s=d===v?function(){return e}:ht(v),h=y===m?function(){return r}:ht(m);function p(){i.push("M",M(g(u),w),b,_(g(o.reverse()),w),"Z")}for(;++a<c;)x.call(this,t=n[a],a)?(o.push([e=+l.call(this,t,a),r=+f.call(this,t,a)]),u.push([+s.call(this,t,a),+h.call(this,t,a)])):o.length&&(p(),o=[],u=[]);return o.length&&p(),i.length?i.join(""):null}return e.x=function(n){return arguments.length?(d=v=n,e):v},e.x0=function(n){return arguments.length?(d=n,e):d},e.x1=function(n){return arguments.length?(v=n,e):v},e.y=function(n){return arguments.length?(y=m=n,e):m},e.y0=function(n){return arguments.length?(y=n,e):y},e.y1=function(n){return arguments.length?(m=n,e):m},e.defined=function(n){return arguments.length?(x=n,e):x},e.interpolate=function(n){return arguments.length?(t="function"==typeof n?M=n:(M=Ku.get(n)||Qu).key,_=M.reverse||M,b=M.closed?"M":"L",e):t},e.tension=function(n){return arguments.length?(w=n,e):w},e}function pa(n){return n.radius}function ga(n){return[n.x,n.y]}function da(){return 64}function va(){return"circle"}function ya(n){n=Math.sqrt(n/Sn);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}L.svg.line.radial=function(){var n=Gu(sa);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},(na.reverse=ta).reverse=na,L.svg.area=function(){return ha(pt)},L.svg.area.radial=function(){var n=ha(sa);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},L.svg.chord=function(){var i=ui,o=ai,u=pa,a=Wu,c=Ju;function t(n,t){var e=l(this,i,n,t),r=l(this,o,n,t);return"M"+e.p0+f(e.r,e.p1,e.a1-e.a0)+(n=r,(t=e).a0==n.a0&&t.a1==n.a1?s(e.r,e.p1,e.r,e.p0):s(e.r,e.p1,r.r,r.p0)+f(r.r,r.p1,r.a1-r.a0)+s(r.r,r.p1,e.r,e.p0))+"Z"}function l(n,t,e,r){var i=t.call(n,e,r),t=u.call(n,i,r),e=a.call(n,i,r)+Vu,r=c.call(n,i,r)+Vu;return{r:t,a0:e,a1:r,p0:[t*Math.cos(e),t*Math.sin(e)],p1:[t*Math.cos(r),t*Math.sin(r)]}}function f(n,t,e){return"A"+n+","+n+" 0 "+ +(Sn<e)+",1 "+t}function s(n,t,e,r){return"Q 0,0 "+r}return t.radius=function(n){return arguments.length?(u=ht(n),t):u},t.source=function(n){return arguments.length?(i=ht(n),t):i},t.target=function(n){return arguments.length?(o=ht(n),t):o},t.startAngle=function(n){return arguments.length?(a=ht(n),t):a},t.endAngle=function(n){return arguments.length?(c=ht(n),t):c},t},L.svg.diagonal=function(){var r=ui,i=ai,o=ga;function t(n,t){var e=r.call(this,n,t),n=i.call(this,n,t),t=(e.y+n.y)/2,n=[e,{x:e.x,y:t},{x:n.x,y:t},n];return"M"+(n=n.map(o))[0]+"C"+n[1]+" "+n[2]+" "+n[3]}return t.source=function(n){return arguments.length?(r=ht(n),t):r},t.target=function(n){return arguments.length?(i=ht(n),t):i},t.projection=function(n){return arguments.length?(o=n,t):o},t},L.svg.diagonal.radial=function(){var n=L.svg.diagonal(),t=ga,r=n.projection;return n.projection=function(n){return arguments.length?r((e=t=n,function(){var n=e.apply(this,arguments),t=n[0],n=n[1]+Vu;return[t*Math.cos(n),t*Math.sin(n)]})):t;var e},n},L.svg.symbol=function(){var e=va,r=da;function t(n,t){return(ma.get(e.call(this,n,t))||ya)(r.call(this,n,t))}return t.type=function(n){return arguments.length?(e=ht(n),t):e},t.size=function(n){return arguments.length?(r=ht(n),t):r},t};var ma=L.map({circle:ya,cross:function(n){n=Math.sqrt(n/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ma)),n=t*Ma;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(n){n=Math.sqrt(n)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/xa),n=t*xa/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/xa),n=t*xa/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});L.svg.symbolTypes=ma.keys();var xa=Math.sqrt(3),Ma=Math.tan(30*Cn);function _a(n,t){return F(n,Sa),n.id=t,n}var ba,wa,Sa=[],ka=0;function Na(n,r,i,o){var u=n.id;return an(n,"function"==typeof i?function(n,t,e){n.__transition__[u].tween.set(r,o(i.call(n,n.__data__,t,e)))}:(i=o(i),function(n){n.__transition__[u].tween.set(r,i)}))}function Ea(n){return null==n&&(n=""),function(){this.textContent=n}}function Aa(f,s,h,n){var p,g=f.__transition__||(f.__transition__={active:0,count:0}),d=g[h];d||(p=n.time,d=g[h]={tween:new m,time:p,ease:n.ease,delay:n.delay,duration:n.duration},++g.count,L.timer(function(n){var r=f.__data__,i=d.ease,t=d.delay,o=d.duration,e=Mt,u=[];if(e.t=t+p,t<=n)return a(n-t);function a(n){if(g.active>h)return l();g.active=h,d.event&&d.event.start.call(f,r,s),d.tween.forEach(function(n,t){(t=t.call(f,r,s))&&u.push(t)}),L.timer(function(){return e.c=c(n||1)?fr:c,1},0,p)}function c(n){if(g.active!==h)return l();for(var n=n/o,t=i(n),e=u.length;0<e;)u[--e].call(f,t);return 1<=n?(d.event&&d.event.end.call(f,r,s),l()):void 0}function l(){return--g.count?delete g[h]:delete f.__transition__,1}e.c=a},0,p))}Sa.call=V.call,Sa.empty=V.empty,Sa.node=V.node,Sa.size=V.size,L.transition=function(n){return arguments.length?ba?n.transition():n:sn.transition()},(L.transition.prototype=Sa).select=function(n){var t,e,r,i=this.id,o=[];n=X(n);for(var u=-1,a=this.length;++u<a;){o.push(t=[]);for(var c=this[u],l=-1,f=c.length;++l<f;)(r=c[l])&&(e=n.call(r,r.__data__,l,u))?("__data__"in r&&(e.__data__=r.__data__),Aa(e,l,i,r.__transition__[i]),t.push(e)):t.push(null)}return _a(o,i)},Sa.selectAll=function(n){var t,e,r,i,o,u=this.id,a=[];n=$(n);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],s=-1,h=f.length;++s<h;)if(r=f[s]){o=r.__transition__[u],e=n.call(r,r.__data__,s,c),a.push(t=[]);for(var p=-1,g=e.length;++p<g;)(i=e[p])&&Aa(i,p,u,o),t.push(i)}return _a(a,u)},Sa.filter=function(n){var t,e,r=[];"function"!=typeof n&&(n=un(n));for(var i=0,o=this.length;i<o;i++){r.push(t=[]);for(var u,a=0,c=(u=this[i]).length;a<c;a++)(e=u[a])&&n.call(e,e.__data__,a,i)&&t.push(e)}return _a(r,this.id)},Sa.tween=function(t,e){var r=this.id;return arguments.length<2?this.node().__transition__[r].tween.get(t):an(this,null==e?function(n){n.__transition__[r].tween.remove(t)}:function(n){n.__transition__[r].tween.set(t,e)})},Sa.attr=function(n,t){if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var r="transform"==n?Ro:go,i=L.ns.qualify(n);function o(){this.removeAttribute(i)}function u(){this.removeAttributeNS(i.space,i.local)}return Na(this,"attr."+n,t,i.local?function(e){return null==e?u:(e+="",function(){var t,n=this.getAttributeNS(i.space,i.local);return n!==e&&(t=r(n,e),function(n){this.setAttributeNS(i.space,i.local,t(n))})})}:function(e){return null==e?o:(e+="",function(){var t,n=this.getAttribute(i);return n!==e&&(t=r(n,e),function(n){this.setAttribute(i,t(n))})})})},Sa.attrTween=function(n,r){var i=L.ns.qualify(n);return this.tween("attr."+n,i.local?function(n,t){var e=r.call(this,n,t,this.getAttributeNS(i.space,i.local));return e&&function(n){this.setAttributeNS(i.space,i.local,e(n))}}:function(n,t){var e=r.call(this,n,t,this.getAttribute(i));return e&&function(n){this.setAttribute(i,e(n))}})},Sa.style=function(r,n,i){var t=arguments.length;if(t<3){if("string"!=typeof r){for(i in t<2&&(n=""),r)this.style(i,r[i],n);return this}i=""}function o(){this.style.removeProperty(r)}return Na(this,"style."+r,n,function(e){return null==e?o:(e+="",function(){var t,n=T.getComputedStyle(this,null).getPropertyValue(r);return n!==e&&(t=go(n,e),function(n){this.style.setProperty(r,t(n),i)})})})},Sa.styleTween=function(r,i,o){return arguments.length<3&&(o=""),this.tween("style."+r,function(n,t){var e=i.call(this,n,t,T.getComputedStyle(this,null).getPropertyValue(r));return e&&function(n){this.style.setProperty(r,e(n),o)}})},Sa.text=function(n){return Na(this,"text",n,Ea)},Sa.remove=function(){return this.each("end.transition",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})},Sa.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=L.ease.apply(L,arguments)),an(this,function(n){n.__transition__[e].ease=t}))},Sa.delay=function(r){var i=this.id;return arguments.length<1?this.node().__transition__[i].delay:an(this,"function"==typeof r?function(n,t,e){n.__transition__[i].delay=+r.call(n,n.__data__,t,e)}:(r=+r,function(n){n.__transition__[i].delay=r}))},Sa.duration=function(r){var i=this.id;return arguments.length<1?this.node().__transition__[i].duration:an(this,"function"==typeof r?function(n,t,e){n.__transition__[i].duration=Math.max(1,r.call(n,n.__data__,t,e))}:(r=Math.max(1,r),function(n){n.__transition__[i].duration=r}))},Sa.each=function(r,t){var n,e,i=this.id;return arguments.length<2?(n=wa,e=ba,ba=i,an(this,function(n,t,e){wa=n.__transition__[i],r.call(n,n.__data__,t,e)}),wa=n,ba=e):an(this,function(n){n=n.__transition__[i];(n.event||(n.event=L.dispatch("start","end"))).on(r,t)}),this},Sa.transition=function(){for(var n,t,e,r=this.id,i=++ka,o=[],u=0,a=this.length;u<a;u++){o.push(n=[]);for(var c,l=0,f=(c=this[u]).length;l<f;l++)(t=c[l])&&((e=Object.create(t.__transition__[r])).delay+=e.duration,Aa(t,l,i,e)),n.push(t)}return _a(o,i)},L.svg.axis=function(){var _,b=L.scale.linear(),w=Ca,S=6,k=6,N=3,E=[10],A=null;function e(n){n.each(function(){var n,t=L.select(this),e=this.__chart__||b,r=this.__chart__=b.copy(),i=null==A?r.ticks?r.ticks.apply(r,E):r.domain():A,o=null==_?r.tickFormat?r.tickFormat.apply(r,E):pt:_,u=t.selectAll(".tick").data(i,r),a=u.enter().insert("g",".domain").attr("class","tick").style("opacity",En),c=L.transition(u.exit()).style("opacity",En).remove(),l=L.transition(u.order()).style("opacity",1),f=Math.max(S,0)+N,s=Nu(r),h=t.selectAll(".domain").data([0]),p=(h.enter().append("path").attr("class","domain"),L.transition(h));a.append("line"),a.append("text");var g,d,v,y,m,x,M=a.select("line"),i=l.select("line"),t=u.select("text").text(o),h=a.select("text"),u=l.select("text"),o="top"===w||"left"===w?-1:1;"bottom"===w||"top"===w?(n=La,g="x",v="y",d="x2",y="y2",t.attr("dy",o<0?"0em":".71em").style("text-anchor","middle"),p.attr("d","M"+s[0]+","+o*k+"V0H"+s[1]+"V"+o*k)):(n=Ta,g="y",v="x",d="y2",y="x2",t.attr("dy",".32em").style("text-anchor",o<0?"end":"start"),p.attr("d","M"+o*k+","+s[0]+"H0V"+s[1]+"H"+o*k)),M.attr(y,o*S),h.attr(v,o*f),i.attr(d,0).attr(y,o*S),u.attr(g,0).attr(v,o*f),r.rangeBand?(x=(m=r).rangeBand()/2,e=r=function(n){return m(n)+x}):e.rangeBand?e=r:c.call(n,r,e),a.call(n,e,r),l.call(n,r,r)})}return e.scale=function(n){return arguments.length?(b=n,e):b},e.orient=function(n){return arguments.length?(w=n in za?n+"":Ca,e):w},e.ticks=function(){return arguments.length?(E=arguments,e):E},e.tickValues=function(n){return arguments.length?(A=n,e):A},e.tickFormat=function(n){return arguments.length?(_=n,e):_},e.tickSize=function(n){var t=arguments.length;return t?(S=+n,k=+arguments[t-1],e):S},e.innerTickSize=function(n){return arguments.length?(S=+n,e):S},e.outerTickSize=function(n){return arguments.length?(k=+n,e):k},e.tickPadding=function(n){return arguments.length?(N=+n,e):N},e.tickSubdivide=function(){return arguments.length&&e},e};var Ca="bottom",za={top:1,right:1,bottom:1,left:1};function La(n,e,r){n.attr("transform",function(n){var t=e(n);return"translate("+(isFinite(t)?t:r(n))+",0)"})}function Ta(n,e,r){n.attr("transform",function(n){var t=e(n);return"translate(0,"+(isFinite(t)?t:r(n))+")"})}L.svg.brush=function(){var y,m,x=U(N,"brushstart","brush","brushend"),M=null,_=null,b=[0,0],w=[0,0],S=!0,k=!0,i=Ra[0];function N(n){n.each(function(){var n=L.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),t=n.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var e=n.selectAll(".resize").data(i,pt);e.exit().remove(),e.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return qa[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),e.style("display",N.empty()?"none":null);var r,n=L.transition(n),t=L.transition(t);M&&(r=Nu(M),t.attr("x",r[0]).attr("width",r[1]-r[0]),A(n)),_&&(r=Nu(_),t.attr("y",r[0]).attr("height",r[1]-r[0]),C(n)),E(n)})}function E(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+b[+/e$/.test(n)]+","+w[+/^s/.test(n)]+")"})}function A(n){n.select(".extent").attr("x",b[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",b[1]-b[0])}function C(n){n.select(".extent").attr("y",w[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",w[1]-w[0])}function o(){var c,n,e,r=this,t=L.select(L.event.target),i=x.of(r,arguments),o=L.select(r),u=t.datum(),a=!/^(n|s)$/.test(u)&&M,l=!/^(e|w)$/.test(u)&&_,f=t.classed("extent"),s=mn(),h=L.mouse(r),p=L.select(T).on("keydown.brush",function(){32==L.event.keyCode&&(f||(c=null,h[0]-=b[1],h[1]-=w[1],f=2),D())}).on("keyup.brush",function(){32==L.event.keyCode&&2==f&&(h[0]+=b[1],h[1]+=w[1],f=0,D())});function g(){var n=L.mouse(r),t=!1;e&&(n[0]+=e[0],n[1]+=e[1]),f||(L.event.altKey?(c=c||[(b[0]+b[1])/2,(w[0]+w[1])/2],h[0]=b[+(n[0]<c[0])],h[1]=w[+(n[1]<c[1])]):c=null),a&&d(n,M,0)&&(A(o),t=!0),l&&d(n,_,1)&&(C(o),t=!0),t&&(E(o),i({type:"brush",mode:f?"move":"resize"}))}function d(n,t,e){var r,i=Nu(t),o=i[0],u=i[1],a=h[e],t=e?w:b,i=t[1]-t[0];return f&&(o-=a,u-=i+a),n=(e?k:S)?Math.max(o,Math.min(u,n[e])):n[e],f?r=(n+=a)+i:(a=c?Math.max(o,Math.min(u,2*c[e]-n)):a)<n?(r=n,n=a):r=a,(t[0]!=n||t[1]!=r)&&(e?m=null:y=null,t[0]=n,t[1]=r,1)}function v(){g(),o.style("pointer-events","all").selectAll(".resize").style("display",N.empty()?"none":null),L.select("body").style("cursor",null),p.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),s(),i({type:"brushend"})}L.event.changedTouches?p.on("touchmove.brush",g).on("touchend.brush",v):p.on("mousemove.brush",g).on("mouseup.brush",v),o.interrupt().selectAll("*").interrupt(),f?(h[0]=b[0]-h[0],h[1]=w[0]-h[1]):u?(n=+/w$/.test(u),u=+/^n/.test(u),e=[b[1-n]-h[0],w[1-u]-h[1]],h[0]=b[n],h[1]=w[u]):L.event.altKey&&(c=h.slice()),o.style("pointer-events","none").selectAll(".resize").style("display",null),L.select("body").style("cursor",t.style("cursor")),i({type:"brushstart"}),g()}return N.event=function(n){n.each(function(){var r=x.of(this,arguments),i={x:b,y:w,i:y,j:m},n=this.__chart__||i;this.__chart__=i,ba?L.select(this).transition().each("start.brush",function(){y=n.i,m=n.j,b=n.x,w=n.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=vo(b,i.x),e=vo(w,i.y);return y=m=null,function(n){b=i.x=t(n),w=i.y=e(n),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=i.i,m=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},N.x=function(n){return arguments.length?(i=Ra[!(M=n)<<1|!_],N):M},N.y=function(n){return arguments.length?(i=Ra[!M<<1|!(_=n)],N):_},N.clamp=function(n){return arguments.length?(M&&_?(S=!!n[0],k=!!n[1]):M?S=!!n:_&&(k=!!n),N):M&&_?[S,k]:M?S:_?k:null},N.extent=function(n){var t,e,r,i,o;return arguments.length?(M&&(t=n[0],e=n[1],_&&(t=t[0],e=e[0]),y=[t,e],M.invert&&(t=M(t),e=M(e)),e<t&&(o=t,t=e,e=o),t==b[0]&&e==b[1]||(b=[t,e])),_&&(r=n[0],i=n[1],M&&(r=r[1],i=i[1]),m=[r,i],_.invert&&(r=_(r),i=_(i)),i<r&&(o=r,r=i,i=o),r==w[0]&&i==w[1]||(w=[r,i])),N):(M&&(y?(t=y[0],e=y[1]):(t=b[0],e=b[1],M.invert&&(t=M.invert(t),e=M.invert(e)),e<t&&(o=t,t=e,e=o))),_&&(m?(r=m[0],i=m[1]):(r=w[0],i=w[1],_.invert&&(r=_.invert(r),i=_.invert(i)),i<r&&(o=r,r=i,i=o))),M&&_?[[t,r],[e,i]]:M?[t,e]:_&&[r,i])},N.clear=function(){return N.empty()||(b=[0,0],w=[0,0],y=m=null),N},N.empty=function(){return!!M&&b[0]==b[1]||!!_&&w[0]==w[1]},L.rebind(N,x,"on")};var qa={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ra=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],p=zt.format=a.timeFormat,e=p.utc,a=e("%Y-%m-%dT%H:%M:%S.%LZ");function Da(n){return n.toISOString()}function Pa(t,i,n){function o(n){return t(n)}function u(n,t){var e=(n[1]-n[0])/t,r=L.bisect(ja,e);return r==ja.length?[i.year,qu(n.map(function(n){return n/31536e6}),t)[2]]:r?i[e/ja[r-1]<ja[r]/e?r-1:r]:[Oa,qu(n,t)[2]]}return o.invert=function(n){return Ua(t.invert(n))},o.domain=function(n){return arguments.length?(t.domain(n),o):t.domain().map(Ua)},o.nice=function(t,e){var n=o.domain(),r=ku(n),r=null==t?u(r,10):"number"==typeof t&&u(r,t);function i(n){return!isNaN(n)&&!t.range(n,Ua(+n+1),e).length}return r&&(t=r[0],e=r[1]),o.domain(Au(n,1<e?{floor:function(n){for(;i(n=t.floor(n));)n=Ua(n-1);return n},ceil:function(n){for(;i(n=t.ceil(n));)n=Ua(+n+1);return n}}:t))},o.ticks=function(n,t){var e=ku(o.domain()),r=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return r&&(n=r[0],t=r[1]),n.range(e[0],Ua(+e[1]+1),t<1?1:t)},o.tickFormat=function(){return n},o.copy=function(){return Pa(t.copy(),i,n)},Lu(o,t)}function Ua(n){return new Date(n)}p.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Da:a,Da.parse=function(n){n=new Date(n);return isNaN(n)?null:n},Da.toString=a.toString,zt.second=Rt(function(n){return new Lt(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),zt.seconds=zt.second.range,zt.seconds.utc=zt.second.utc.range,zt.minute=Rt(function(n){return new Lt(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),zt.minutes=zt.minute.range,zt.minutes.utc=zt.minute.utc.range,zt.hour=Rt(function(n){var t=n.getTimezoneOffset()/60;return new Lt(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),zt.hours=zt.hour.range,zt.hours.utc=zt.hour.utc.range,zt.month=Rt(function(n){return(n=zt.day(n)).setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),zt.months=zt.month.range,zt.months.utc=zt.month.utc.range;var ja=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Fa=[[zt.second,1],[zt.second,5],[zt.second,15],[zt.second,30],[zt.minute,1],[zt.minute,5],[zt.minute,15],[zt.minute,30],[zt.hour,1],[zt.hour,3],[zt.hour,6],[zt.hour,12],[zt.day,1],[zt.day,2],[zt.week,1],[zt.month,1],[zt.month,3],[zt.year,1]],Ha=p.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",fr]]),Oa={range:function(n,t,e){return L.range(Math.ceil(n/e)*e,+t,e).map(Ua)},floor:pt,ceil:pt};Fa.year=zt.year,zt.scale=function(){return Pa(L.scale.linear(),Fa,Ha)};var Ya=Fa.map(function(n){return[n[0].utc,n[1]]}),Ia=e.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",fr]]);function Za(n){return JSON.parse(n.responseText)}function Va(n){var t=r.createRange();return t.selectNode(r.body),t.createContextualFragment(n.responseText)}return Ya.year=zt.year.utc,zt.scale.utc=function(){return Pa(L.scale.linear(),Ya,Ia)},L.text=gt(function(n){return n.responseText}),L.json=function(n,t){return dt(n,"application/json",Za,t)},L.html=function(n,t){return dt(n,"text/html",Va,t)},L.xml=gt(function(n){return n.responseXML}),L}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/d3-amd.js' */
define("jira-agile/d3",d3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/figue.js' */
var figue=function(){function v(r,t){for(var n=r.length,e=0,i=0;i<n;i++)e+=Math.pow(r[i]-t[i],2);return e=Math.sqrt(e)}function d(r,t){for(var n=r.length,e=0,i=0;i<n;i++)e+=Math.abs(r[i]-t[i]);return e}function _(r,t){for(var n=r.length,e=0,i=0;i<n;i++)e=Math.max(e,Math.abs(r[i]-t[i]));return e}function p(r,t){for(var n="",e=0;e<t;e++)n+=r;return n}function w(r,t){var n=t-r.length;if(!(n<0)){t=Math.floor(n/2);return p(" ",t)+r+p(" ",n-t)}}function T(r,t,n){if(!(t-r.length<0))return p(" ",n)+r+p(" ",t-(r.length+n))}function m(r,t,n,e,i){this.label=r,this.left=t,this.right=n,this.dist=e,this.centroid=i,null==t&&null==n?(this.size=1,this.depth=0):(this.size=t.size+n.size,this.depth=1+Math.max(t.depth,n.depth))}function c(r){if(this.length!=r.length)return!1;for(var t=0;t<r.length;t++){if(this[t]instanceof Array&&!c.call(this[t],r[t]))return!1;if(this[t]!==r[t])return!1}return!0}return{SINGLE_LINKAGE:0,COMPLETE_LINKAGE:1,AVERAGE_LINKAGE:2,EUCLIDIAN_DISTANCE:0,MANHATTAN_DISTANCE:1,MAX_DISTANCE:2,PRINT_VECTOR_VALUE_PRECISION:2,KMEANS_MAX_ITERATIONS:10,Matrix:function(r,t){this.rows=r,this.cols=t,this.mtx=new Array(r);for(var n=0;n<r;n++){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;this.mtx[n]=e}},Node:m,generateDendogram:function r(t,n,e,i,h,a){var o=new Array,f=function(r){for(var t=new Array(r.length),n=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION),e=0;e<r.length;e++)t[e]=Math.round(r[e]*n)/n;return t.join(",")}(t.centroid);if(t.isLeaf()){var l=String(t.label),u=1;h&&(u=Math.max(f.length,u)),i&&(u=Math.max(l.length,u)),o.push(w("|",u)),h&&o.push(w(f,u)),i&&o.push(w(l,u))}else{var g=(g=t.dist,l=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION),String(Math.round(g*l)/l)),s=r(t.left,n,e,i,h,a),A=r(t.right,n,e,i,h,a),l=s[0].indexOf("|"),t=A[0].indexOf("|"),u=n+A[0].length+s[0].length;if(h&&(u=Math.max(f.length,u)),a&&(u=Math.max(g.length,u)),i=l+Math.floor((s[0].length-l+n+(1+t))/2),o.push(T("|",u,i)),h&&o.push(T(f,u,i-Math.floor(f.length/2))),a&&o.push(T(g,u,i-Math.floor(g.length/2))),t=p("_",n+(s[0].length-l)+t+1),o.push(T(t,u,l)),e&&s.length!=A.length){var E,M=s.length>A.length?(E=s,A):(E=A,s);header=M[0];for(var N=E.length-M.length,c=0;c<N;c++)M.splice(0,0,header)}for(c=0;c<Math.max(s.length,A.length);c++){var I="",I=c<s.length?s[c]:p(" ",s[0].length),v="",v=c<A.length?A[c]:p(" ",A[0].length);o.push(I+p(" ",n)+v),p(" ",n)}}return o},agglomerate:function(r,t,n,e){var i,h,a,o,f,l,u,g,s,A,E=t.length,M=new Array(E),N=new Array(E),c=new figue.Matrix(E,E).mtx,I=new Array(E);for(n==figue.EUCLIDIAN_DISTANCE?n=v:n==figue.MANHATTAN_DISTANCE?n=d:n==figue.MAX_DISTANCE&&(n=_),f=0;f<E;f++)for(l=M[f]=0;l<E;l++)c[f][l]=f==l?1/0:n(t[f],t[l]),c[f][M[f]]>c[f][l]&&(M[f]=l);for(f=0;f<E;f++)I[f]=[],I[f][0]=new m(r[f],null,null,0,t[f]),N[f]=1;for(u=0;u<E-1;u++){for(f=i=0;f<E;f++)c[f][M[f]]<c[i][M[i]]&&(i=f);for(h=M[i],a=I[i][0],o=I[h][0],s=function(r,t,n,e){for(var i=new Array(t.length),h=r+n,a=0;a<t.length;a++)i[a]=(r*t[a]+n*e[a])/h;return i}(a.size,a.centroid,o.size,o.centroid),s=new m(-1,a,o,c[i][h],s),I[i].splice(0,0,s),N[i]+=N[h],l=0;l<E;l++)e==figue.SINGLE_LINKAGE?c[i][l]>c[h][l]&&(c[l][i]=c[i][l]=c[h][l]):e==figue.COMPLETE_LINKAGE?c[i][l]<c[h][l]&&(c[l][i]=c[i][l]=c[h][l]):e==figue.AVERAGE_LINKAGE&&(A=(N[i]*c[i][l]+N[h]*c[h][l])/(N[i]+N[l]),c[l][i]=c[i][l]=A);for(c[i][i]=1/0,f=0;f<E;f++)c[f][h]=c[h][f]=1/0;for(l=0;l<E;l++)M[l]==h&&(M[l]=i),c[i][l]<c[i][M[i]]&&(M[i]=l);g=s}return g},kmeans:function(r,t){var n=t.length;if(n<=r)return null;for(var e=new Array(r),i=new Object,h=0;h<r;){var a=Math.floor(Math.random()*n);a in i||(i[a]=1,e[h]=t[a],h++)}for(var o=new Array(n),f=new Array(r),l=!0,u=0;l;){for(var g=0;g<r;g++)f[g]=0;for(var s=0;s<n;s++){for(var A,E=t[s],M=Number.MAX_VALUE,g=0;g<r;g++)dist=v(e[g],E),dist<M&&(M=dist,A=g);f[A]++,o[s]=A}for(var N=new Array(r),g=0;g<r;g++)N[g]=null;for(s=0;s<n;s++)null==N[h=o[s]]?N[h]=t[s]:N[h]=function(r,t){for(var n=r.length,e=new Array(n),i=0;i<n;i++)e[i]=r[i]+t[i];return e}(N[h],t[s]);for(g=0;g<r;g++)N[g]=function(r,t){for(var n=t.length,e=new Array(n),i=0;i<n;i++)e[i]=r*t[i];return e}(1/f[g],N[g]);for(l=!1,g=0;g<r;g++)if(!c.call(N[g],e[g])){l=!0;break}e=N,++u>figue.KMEANS_MAX_ITERATIONS&&(l=!1)}return{centroids:e,assignments:o}}}}();figue.Matrix.prototype.toString=function(){for(var r=[],t=0;t<this.rows;t++)r.push(this.mtx[t].join("\t"));return r.join("\n")},figue.Node.prototype.isLeaf=function(){return null==this.left&&null==this.right},figue.Node.prototype.buildDendogram=function(r,t,n,e,i){return figue.generateDendogram(this,r,t,n,e,i).join("\n")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/cluster.js' */
var clusterVectors=function(e,t,n,r,s){var i=_.map(e,function(e){return[r(e[0]),s(e[1])]});if(0===e.length)return[];if(1===e.length)return[{issue:t[0],point:e[0],size:1,distance:0,cluster:!1}];e=[];return function e(t,i){t&&(t.dist&&t.dist>n?(e(t.left,i),e(t.right,i)):t.left||t.right?i.push({issues:function e(t){return t?1===t.size&&t.label?[t.label]:e(t.left).concat(e(t.right)):[]}(t),point:[r.invert(t.centroid[0]),s.invert(t.centroid[1])],size:t.size,distance:t.dist,cluster:!0}):i.push({issue:t.label,point:[r.invert(t.centroid[0]),s.invert(t.centroid[1])],size:t.size,distance:t.dist,cluster:!1}))}(figue.agglomerate(t,i,figue.MAX_DISTANCE,figue.COMPLETE_LINKAGE),e),e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/core.js' */
var c3={defaults:{x:function(n){return n[0]},y:function(n){return n[1]}},checkIsNumber:function(n){if("number"!=typeof n)throw new Error("Expected a number, but received: "+n);return n},isEmpty:function(n){return!n||!n.length},prop:function(n){var t=n,r=function(n){return n},e=function(n,t){return n};function u(n){return 0===arguments.length?r.call(this,t):(t=e.call(this,n,t),this)}return u.get=function(n){return r=n,this},u.set=function(n){return e=n,this},u},inherit:function(r,e){var u,n=c3.prop().get(function(n){if(null!=n)return n;for(var t=this.parent();t;t=t.parent())if("function"==typeof t[r]&&null!=(n=t[r]()))return n;return u?u.call(this):e});return n.onDefault=function(n){return u=n,this},n}};c3.event=function(n){var u=[];function t(){return("function"==typeof arguments[0]?function(n,t){u.push({handler:n,context:t})}:function(t){var r=this;t=t||{},_.each(u,function(n){n.handler.call(n.context||r,t)}),n&&n.call(this,t)}).apply(this,arguments),this}return t.off=function(r,e){return u=_.reject(u,function(n){var t=null==r||n.handler==r,n=null==e||n.context==e;return t&&n}),this},t};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/areaPlot.js' */
c3.areaPlot=function(){return c3.component("areaPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).extend({areaConstructor:c3.prop(d3.svg.area)}).update(function(t){var e=this.areaConstructor()().x(this.x());this.cartesian()?e.y0(this.height()).y1(this.y()):e.y0(this.y()).y1(0),t.selection.attr("d",e(this.data()))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/axis.js' */
c3.axis=function(){return c3.component("axis").extend(c3.plottable()).extend(function(){this.selection().call(this.axis())}).extend({axisConstructor:c3.inherit("axisConstructor",d3.svg.axis),orient:c3.prop("bottom"),horizontal:function(){var t=this.orient();return"bottom"===t||"top"===t},axis:function(){var t=this.horizontal();return this.axisConstructor().call(this).scale(t?this.xScale():this.yScale()).orient(this.orient())}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/borderLayout.js' */
c3.borderLayout=function(){function t(){return c3.prop().set(function(t){return t.parent(this)})}var e=c3.drawable().extend({data:function(){return h.occupiedRegions()}}).dataKey(function(t){return t.name}).update(function(t){var n=h.positions();t.selection.each(function(t){var e=d3.select(this),h=n[t.name];e.attr("transform","translate("+h.left+","+h.top+")"),t.component.width(h.width).height(h.height),t.component(e)})}),h=c3.component("borderLayout").extend(c3.plottable()).extend(function(){e(this.selection())}).extend({center:t(),north:t(),south:t(),west:t(),east:t(),xRange:function(){return[0,this.centerWidth()]},yRange:function(){return[this.centerHeight(),0]},centerWidth:function(){return this.positions().center.width},centerHeight:function(){return this.positions().center.height},occupiedRegions:function(){var e=this;return _.compact(_.map(["north","south","west","east","center"],function(t){return e[t]()?{name:t,component:e[t]()}:null}))},positions:function(){var t={top:c3.checkIsNumber(this.north()?this.north().height():0),bottom:c3.checkIsNumber(this.south()?this.south().height():0),left:c3.checkIsNumber(this.west()?this.west().width():0),right:c3.checkIsNumber(this.east()?this.east().width():0)},e=c3.checkIsNumber(this.width()),h=c3.checkIsNumber(this.height()),n={},i=n.center={left:t.left,top:t.top,width:e-t.left-t.right,height:h-t.top-t.bottom};return this.north()&&(n.north={top:t.top,left:t.left,height:t.top,width:i.width}),this.south()&&(n.south={top:h-t.bottom,left:t.left,height:t.bottom,width:i.width}),this.west()&&(n.west={top:t.top,left:t.left,height:i.height,width:t.left}),this.east()&&(n.east={top:t.top,left:e-t.right,height:i.height,width:t.right}),n}});return h};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/circlePlot.js' */
c3.circlePlot=function(){return c3.component("circlePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("circle").update(function(t){t.selection.attr("cx",this.x()).attr("cy",this.y()).attr("r",this.radiusAccessor())}).extend({radiusAccessor:c3.prop(function(){return 4})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/clippable.js' */
c3.clippable=function(){var n=0;return function(){return c3.component("clippable").extend({clipped:c3.prop(!1)}).extend(function(){var i;this.clipped()&&(i=this,c3.singular().elementTag("clipPath").enter(function(t){var e="c3clip"+n;n++,i.selection().attr("clip-path","url(#"+e+")"),t.selection.attr("id",e).append("rect").attr("x","0").attr("y","0").attr("fill","none")}).update(function(t){t.selection.select("rect").attr("width",i.width()).attr("height",i.height())})(this.selection()))})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/component.js' */
c3.component=function(n){var r=[];var o=t;function t(n){return t.applyTo(t,n)}var e={displayName:n,selection:c3.prop(null),parent:c3.prop(null),applyTo:function(t,e){return o.selection(e),_.each(r,function(n){n.applyTo?n.applyTo(t,e):n.call(t,e)}),o},extend:function(n){return"function"==typeof n&&(n.parent&&n.parent(o),r.push(n)),function(n,t,e){for(var r in t)e&&r in e||(n[r]=t[r]);return n}(o,n,e)}};return _.extend(o,e)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/deviationPlot.js' */
c3.deviationPlot=function(){return c3.component("deviationPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).update(function(t){var e=this.yAccessor(),n=this.deviationAccessor(),a=this.yScale(),i=d3.svg.area().x(this.x()).y0(function(t){return a(e(t)+n(t))}).y1(function(t){return a(Math.max(e(t)-n(t),0))});t.selection.attr("d",i(this.data()))}).extend({deviationAccessor:c3.prop(function(t){return t[2]})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/drawable.js' */
c3.drawable=function(){return c3.component("drawable").extend(c3.withData()).extend(c3.withElements()).extend(function(){var t=this.dataBinding();this.enter({selection:this.drawEnter(t.enter())}),this.exit({selection:this.drawExit(t.exit())}),this.update({selection:t})}).extend({enter:c3.event(),exit:c3.event(),update:c3.event(),dataFilter:c3.prop(_.identity),dataBinding:function(){var t=this.dataFilter().call(this,this.data());return this.elements().data(t,this.dataKey())},drawEnter:function(t){var e=t.append(this.elementTag()),t=this.elementClass();return t&&e.classed(t,!0),e},drawExit:function(t){return t.remove()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/fitToParent.js' */
c3.fitToParent=function(){return c3.component("fitToParent").extend({width:c3.prop(),height:c3.prop()}).extend(function(){var e=this.selection().node().domNode.parentElement;this.height(c3.checkIsNumber(e.clientHeight)),this.width(c3.checkIsNumber(e.clientWidth))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/gridLines.js' */
c3.gridLines=function(){return c3.component("gridLines").extend(c3.axis()).axisConstructor(function(){var t;switch(this.orient()){case"left":t=-this.width();break;case"right":t=this.width();break;case"top":t=-this.height();break;case"bottom":t=this.height()}return d3.svg.axis().tickSize(t).tickFormat("")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/label.js' */
c3.label=function(){return c3.component("label").extend(c3.singular()).extend({text:c3.prop(""),orient:c3.prop("bottom")}).elementTag("text").elementClass("label").enter(function(t){t.selection.attr("text-anchor","middle")}).update(function(t){t.selection.text(this.text());var e=0,i=0,h=0,n=t.selection.node().getBBox();switch(this.orient()){case"left":h=270,e=-1*this.width()+n.height,i=this.height()/2;break;case"right":h=90,e=this.width()-n.height,i=this.height()/2;break;case"top":h=0,e=this.width()/2,i=-1*this.height()+n.height;break;default:h=0,e=this.width()/2,i=this.height()-n.height/2}t.selection.attr("transform","translate("+e+", "+i+") rotate("+h+", 0, 0)")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/labelledAxis.js' */
c3.labelledAxis=function(){return c3.component("labelledAxis").extend(c3.axis()).extend(c3.label()).elementClass("axis-label")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/layerable.js' */
c3.layerable=function(){var e=c3.drawable().elementClass("layer").update(function(e){e.selection.each(function(e,n){e.component(d3.select(this).classed(e.name,!0))})});return c3.component("layerable").extend(function(){e(this.selection())}).extend(c3.plottable()).extend({layers:function(){return e.data()},getLayer:function(e){e=_.findWhere(this.layers(),{name:e});return e?e.component:void 0},addLayer:function(e,n){return this.getLayer(e)||this.layers().push({name:e,component:n.parent(this)}),this},removeLayer:function(n){var e=this.layers(),t=_.reject(e,function(e){return e.name===n});return t.length!==e.length&&this.layers(t),this}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/linePlot.js' */
c3.linePlot=function(){return c3.component("linePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("line").dataFilter(function(t){return[t]}).extend({lineConstructor:c3.prop(d3.svg.line)}).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/plottable.js' */
c3.plottable=function(){return c3.component("plottable").extend(c3.withData()).extend(c3.withDimensions()).extend(c3.clippable()).extend({x:function(){var e=this.xScale(),n=this.xAccessor();return function(t,c){return e(n(t,c))}},y:function(){var e=this.yScale(),n=this.yAccessor();return function(t,c){return e(n(t,c))}},xAccessor:c3.inherit("xAccessor",c3.defaults.x),yAccessor:c3.inherit("yAccessor",c3.defaults.y),xScaleConstructor:c3.inherit("xScaleConstructor",d3.scale.linear),yScaleConstructor:c3.inherit("yScaleConstructor",d3.scale.linear),xDomain:c3.inherit("xDomain").onDefault(function(){return c3.isEmpty(this.data())?[0,1]:[c3.checkIsNumber(d3.min(this.data(),this.xAccessor())),c3.checkIsNumber(d3.max(this.data(),this.xAccessor()))]}),yDomain:c3.inherit("yDomain").onDefault(function(){return c3.isEmpty(this.data())?[0,1]:[c3.checkIsNumber(d3.min(this.data(),this.yAccessor())),c3.checkIsNumber(d3.max(this.data(),this.yAccessor()))]}),xRange:c3.inherit("xRange").onDefault(function(){return[0,c3.checkIsNumber(this.width())]}),yRange:c3.inherit("yRange").onDefault(function(){var t=c3.checkIsNumber(this.height());return this.cartesian()?[t,0]:[0,t]}),xScale:function(){return this.xScaleConstructor().call(this).domain(this.xDomain()).range(this.xRange())},yScale:function(){return this.yScaleConstructor().call(this).domain(this.yDomain()).range(this.yRange())},cartesian:c3.prop(!0)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/singular.js' */
c3.singular=function(){return c3.component("singular").extend(c3.withElements()).extend({enter:c3.event(),update:c3.event(),exit:c3.event(),showCondition:c3.prop(function(){return!0})}).extend(function(){var e=this.elements();this.showCondition().call(this)?(e.node()||(e=this.selection().append(this.elementTag()),this.elementClass()&&e.classed(this.elementClass(),!0),this.enter({selection:e})),this.update({selection:e})):e.node()&&this.exit({selection:e.remove()})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/utils.js' */
c3.utils={wrapText:function(t,c,d){t.each(function(){for(var t,n=d3.select(this),e=n.text().split(/\s+/).reverse(),i=[e.pop()],o=[i];t=e.pop();)i.push(t),n.text(i.join(" ")),n.node().getComputedTextLength()>c&&(i.pop(),o.push(i=[t]));n.text(null);var a=n.attr("y")||0,h=parseFloat(n.attr("dy"))||0;o.forEach(function(t,e){d&&(e-=o.length-1),n.append("tspan").attr({x:c/2,y:a,dy:1.1*e+h+"em"}).text(t.join(" "))})})},containText:function(t,i,o){t.each(function(){var t=this.__data__,e=d3.select(this),n={width:0,height:0};try{n=e.node().getBBox()}catch(t){}n.height+4>o(t)?e.text(""):n.width+4>i(t)&&e.text("…")})},defaultViewBox:function(t){var e=t.node().parentNode.getBoundingClientRect();t.attr("viewBox","0 0 "+e.width+" "+e.height)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/withData.js' */
c3.withData=function(){return c3.component("withData").extend({data:c3.inherit("data",[]),dataKey:c3.inherit("dataKey")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/fillWithRect.js' */
c3.fillWithRect=function(){return c3.singular().elementTag("rect").elementClass("fill-rect").enter(function(t){t.selection.attr("x",0).attr("y",0).attr("fill","none").attr("width","100%").attr("height","100%").style("pointer-events","all")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/withDimensions.js' */
c3.withDimensions=function(){return c3.component("withDimensions").extend({width:c3.inherit("width").onDefault(function(){return parseInt(this.selection().style("width"),10)||0}),height:c3.inherit("height").onDefault(function(){return parseInt(this.selection().style("height"),10)||0})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/withElements.js' */
c3.withElements=function(){return c3.component("withElements").extend({elementTag:c3.prop("g"),elementClass:c3.prop(""),elementSelector:function(){return this.elementClass()?this.elementTag()+"."+this.elementClass():this.elementTag()},elements:function(){var e=this.selection().node();return this.selection().selectAll(this.elementSelector()).filter(function(){return this.parentNode===e})}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/interactive.js' */
c3.interactive=function(){var n,t=c3.component(),u=!1,r=_.throttle(function(){n=AJS.$(t.region().selection().node()).offset()},200);function c(o){var e=function(o){r();var e=o.pageX-n.left,o=o.pageY-n.top;return[e,o]}(o),o=e[0],e=e[1];return t.mouseCoordinates([o,e]),0<o&&0<e&&o<=t.width()&&e<=t.height()}function o(n){return function(o,e){return t.domContext().on(n+".c3."+o,function(o){c(o)&&(d3.event=o,e.call(this,o))}),this}}return t.extend(c3.withDimensions()).extend(_.once(function(){t.domContext().on("mousemove",function(o){var e=c(o);!e&&u?(u=!1,t.mouseout(o)):e&&!u&&(u=!0,t.mouseover(o))}).on("mouseout",function(o){u&&(u=!1,t.mouseout(o))}),AJS.$(t.selection().node()).on("dragstart",function(o){o.preventDefault()})})).extend({mouseCoordinates:c3.prop(),domContext:c3.prop(),region:c3.prop(),mousedown:o("mousedown"),mouseup:o("mouseup"),mousemove:o("mousemove"),mouseover:c3.event(),mouseout:c3.event()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/scrubber.js' */
c3.scrubber=function(){var t=c3.singular();function n(){t.elements().style("visibility","hidden")}return t.elementTag("line").enter(function(e){e.selection.style("pointer-events","none"),this.interactiveLayer().mousemove("scrubber",function(){var e;e=t.parent().mouseCoordinates(),t.elements().attr("x1",e[0]).attr("x2",e[0]),t.shouldHideScrubber()()||t.elements().style("visibility","")}).mouseout(function(){n()})}).extend(c3.withDimensions()).extend({interactiveLayer:c3.prop(),shouldHideScrubber:c3.prop(function(){}),hideScrubber:n}).update(function(e){e.selection.attr("y1",0).attr("y2",this.height())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/barChart.js' */
c3.barChart=function(){return c3.component("barChart").extend(c3.drawable()).extend(c3.plottable()).elementTag("rect").xAccessor(function(t,e){return e}).yAccessor(function(t){return t}).extend({baselineAccessor:c3.prop(function(){return 0}),barWidth:function(){return this.xScale().rangeBand()},barHeight:function(){var e=this.baselineAccessor(),r=this.yAccessor(),n=this.yScale();return function(t){return n(e(t))-n(r(t))}},maxBarWidth:c3.prop(0),padding:c3.prop(.25).set(function(t){if(0<=t&&t<=1)return t;throw new Error("Expected padding to be between 0 and 1 inclusive, but received "+t)}),outerPadding:c3.prop(.25).set(function(t){if(0<=t&&t<=1)return t;throw new Error("Expected outerPadding to be between 0 and 1 inclusive, but received "+t)}),showLabels:c3.prop(!1),rotateLabels:c3.prop(!1),labelAccessor:function(){return this.xAccessor()},xRange:function(){var t=this.width(),e=t;return 0<this.maxBarWidth()&&(e=Math.floor(this.maxBarWidth()/(1-this.padding())*(this.xDomain().length-this.padding()+2*this.outerPadding()))),[0,Math.min(e,t)]},xScale:function(){return d3.scale.ordinal().domain(this.xDomain()).rangeRoundBands(this.xRange(),this.padding(),this.outerPadding())},xDomain:c3.inherit("xDomain").onDefault(function(){return c3.isEmpty(this.data())?[0,1]:d3.range(this.data().length)}),yDomain:c3.inherit("yDomain").onDefault(function(){return c3.isEmpty(this.data())?[0,1]:[c3.checkIsNumber(d3.min(this.data(),this.baselineAccessor())),c3.checkIsNumber(d3.max(this.data(),this.yAccessor()))]})}).enter(function(t){"g"===this.elementTag()&&this.showLabels()&&t.selection.append("text").classed("bar-label",!0)}).update(function(t){var r=this.x(),n=this.y(),a=this.barWidth(),i=this.barHeight(),e=t.selection.select("text.bar-label");t.selection.attr("transform",function(t,e){return"translate("+r(t,e)+","+n(t,e)+")"}).attr("height",i).attr("width",a),this.showLabels()&&(e.attr("x",a/2).attr("y",i).text(this.labelAccessor()),this.rotateLabels()?e.attr("transform",function(t,e){return"rotate(90 "+a/2+","+i(t)+")"}).attr("text-anchor","start").attr("dx",".5em").attr("dy",".25em"):e.attr("transform",null).attr("text-anchor","middle").attr("dx",null).attr("dy","1.25em").call(c3.utils.wrapText,a))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/floatingBarChart.js' */
c3.floatingBarChart=function(){return c3.component("floatingBarChart").extend(c3.barChart()).yAccessor(function(n){return n[0]+n[1]}).baselineAccessor(function(n){return n[0]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/stack.js' */
c3.stack=function(){return c3.component("stack").extend(c3.floatingBarChart()).elementTag("g").xAccessor(function(){return 0}).extend({classPrefix:c3.prop(),labelAccessor:function(){return this.yAccessor()},labelFormatter:function(){return d3.format(",d")}}).enter(function(t){var r=this.classPrefix();t.selection.insert("rect",":first-child").attr("class",function(t,e){return r+"-series-"+e})}).update(function(t){var r=this.classPrefix(),e=this.barHeight(),s=this.barWidth();t.selection.select("rect").attr("height",e).attr("width",s),this.showLabels()&&t.selection.select("text").attr("dy","0.45em").attr("y",function(t){return e(t)/2}).attr("class",function(t,e){return r+"-series-label-"+e}).classed("bar-label",!0).text(this.labelAccessor()).call(c3.utils.containText,function(){return s},e)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/brush.js' */
c3.brush=function(){var o=0,a=!1,i=c3.singular();function t(e){o=e,a=!0,i.elements().style("display",""),i.elements().attr("x",e).attr("y",0).attr("width","1"),i.onDrag(e)}function n(){i.elements().style("display","none")}return i.elementTag("rect").extend(c3.withDimensions()).enter(function(e){n(),e.selection.attr("height",this.height()).style("pointer-events","none");var r=this.interactiveLayer();r.mousedown("brush",function(){t(r.mouseCoordinates()[0])}).mousemove("brush",function(){var e,t,n;e=r.mouseCoordinates()[0],a&&(t=i.elements(),(n=parseInt(e-o,10))<0?t.attr("x",e):t.attr("x",o),t.attr("width",Math.abs(n)),e=_.sortBy([o,e],_.identity),i.onUpdate(e),i.currentRange(e))}).mouseup("brush",function(){var e;e=r.mouseCoordinates()[0],a&&(a=!1,n(),i.onEndDrag(_.sortBy([o,e],_.identity)))})}).extend({interactiveLayer:c3.prop(),onDrag:c3.event(),onUpdate:c3.event(),onEndDrag:c3.event(),currentRange:c3.prop(),cancelDrag:function(){a=!1,n()},isDragging:function(){return a}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReportController.js' */
define("jira-agile/rapid/ui/chart/report-controller",["require"],function(t){var r=t("jquery"),i=t("underscore"),e=t("jira-agile/rapid/analytics-tracker"),a=t("jira-agile/rapid/ui/chart/burndown-chart-controller"),n=t("jira-agile/rapid/ui/chart/cfd-controller"),o=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"),p=t("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller"),l=t("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller"),d=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller"),c=t("jira-agile/rapid/ui/chart/version-report-controller"),h=t("jira-agile/rapid/ui/plan/sprint-controller"),s=t("jira-agile/tooltip"),g=t("jira-agile/rapid/const/PageMode"),u=(t("jira/featureflags/feature-manager"),t("jira-agile/rapid/configuration/ConfigContextLoader")),S=t("jira/analytics/web-client"),w={charts:[],rapidViewData:{},visible:!1,rapidViewConfig:{}};return w.analytics=new e("gh.report"),w.ANALYTICS_TIME_SPENT_MILESTONES=[1e4,3e4,6e4,12e4,24e4,48e4],w.init=i.once(function(){w.initCharts(),i.each(w.getCharts(),function(t){t.controller.setRapidView(w.rapidViewData)}),GH.ChartTimeFrames.init(),GH.ChartFilters.init(),r(GH).bind("issueCreated",w.handleIssueCreated),r(GH).bind(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,w.handleSprintReopened)}),w.initCharts=function(){w.charts=[{id:a.id,name:"Burndown Chart",description:"Track the total work remaining and project the likelihood of achieving the sprint goal. This helps your team manage its progress and respond accordingly.",tooltip:"Track the total work remaining and project the likelihood of achieving the sprint goal",preview:"burndown",controller:a},{id:GH.SprintRetrospectiveController.id,name:"Sprint Report",description:"Understand the work completed or pushed back to the backlog in each sprint. This helps you determine if your team is overcommitting or if there is excessive scope creep.",tooltip:"Understand the work completed or pushed back to the backlog in each sprint",preview:"sprint-retrospective",controller:GH.SprintRetrospectiveController},{id:GH.VelocityChartController.id,name:"Velocity Chart",description:"Track the amount of work completed from sprint to sprint. This helps you determine your team\'s velocity and estimate the work your team can realistically achieve in future sprints.",tooltip:"Track the amount of work completed from sprint to sprint. This helps to predict future performance",preview:"velocity",controller:GH.VelocityChartController},{id:n.id,name:"Cumulative Flow Diagram",description:"Shows the statuses of issues over time. This helps you identify potential bottlenecks that need to be investigated.",tooltip:"Identify the number of issues in each status over time. An increase in the number of issues in a particular status means there could be a bottleneck to be investigated",preview:"cumulative-flow-diagram",controller:n},{id:c.id,name:"Version Report",description:"Track the projected release date for a version. This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the likelihood of releasing it on time",preview:"version-report",controller:c},{id:GH.EpicReportController.id,name:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("{0} Report",GH.RapidBoard.State.getEpicLevelName()):"Epic Report",description:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("Understand the progress towards completing one {0} over time. This helps you manage your team\'\'s progress by tracking the remaining incomplete/unestimated work.",GH.RapidBoard.State.getEpicLevelName()):"Understand the progress towards completing an epic over time. This helps you manage your team\'s progress by tracking the remaining incomplete/unestimated work.",tooltip:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("Understand the progress towards completing one {0} over time",GH.RapidBoard.State.getEpicLevelName()):"Understand the progress towards completing an epic over time",preview:"epic-report",controller:GH.EpicReportController},{id:o.id,name:"Control Chart",description:"Shows the cycle time for your product, version or sprint. This helps you identify whether data from the current process can be used to determine future performance.",tooltip:"Identify whether data from the current process can be used to determine future performance. Analyze the cycle time of issues to determine patterns in your process",preview:"control-chart",howTos:[{title:"Visibility",description:"See outliers and investigate their cause to reduce them in the future."},{title:"Efficiency",description:"Decreasing rolling average indicates process improvements and increased throughput."},{title:"Predictability",description:"Narrow standard deviation through process improvements to improve predictability of cycle time."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Control+Chart","isLocal":false}.url,controller:o},{id:p.id,name:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("{0} Burndown",GH.RapidBoard.State.getEpicLevelName()):"Epic Burndown",description:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("Track the projected number of sprints required to complete your {0} (optimized for Scrum). This helps you monitor whether your {0} will release on time, so you can take action if work is falling behind.",GH.RapidBoard.State.getEpicLevelName()):"Track the projected number of sprints required to complete the epic (optimized for Scrum). This helps you monitor whether the epic will release on time, so you can take action if work is falling behind.",tooltip:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("Understand the progress towards completing one {0} and the effort remaining for it to be released",GH.RapidBoard.State.getEpicLevelName()):"Understand the progress towards completing an epic and the effort remaining for it to be released",howTos:[{title:"View progress",description:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText()?AJS.format("See sprint by sprint progress for one {0}.",GH.RapidBoard.State.getEpicLevelName()):"See sprint by sprint progress for an epic."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict completion",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Epic+Burndown","isLocal":false}.url,controller:new p},{id:l.id,name:"Release Burndown",description:"Track the projected release date for a version (optimized for Scrum). This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for a version."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict release",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Release+Burndown","isLocal":false}.url,controller:new l}];var t=GH.RapidBoard.State.isAgilityBoard();w.getCharts().unshift({id:"burnupChart",name:t?"Burnup report":"Burnup Chart",description:t?"The Burnup report provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.":"The Burnup Chart provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.",tooltip:"The Burnup Chart provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.",documentation:{"url":"https://confluence.atlassian.com/jirasoftwarecloud/burnup-chart-945124716.html","isLocal":false}.url,controller:new d}),i.each(w.getCharts(),function(t){t.controller.init&&t.controller.init()})},w.getCharts=function(){return w.charts},w.getApplicableCharts=function(e){return i.filter(w.getCharts(),function(t){return t.controller.isApplicable(e||w.rapidViewConfig)})},w.isApplicableChart=function(e,t){var r=!1;return i.each(w.getApplicableCharts(t),function(t){t.id===e&&(r=!0)}),r},w.getChart=function(t){return i.findWhere(w.charts,{id:t})},w.getSelectedChart=function(){return GH.RapidBoard.State.getChartType()},w.renderReportView=function(){var t=!GH.RapidBoard.ViewController.shouldShowSubnavigator();r("#ghx-report").html(GH.tpl.reportcontroller.renderReportView({shouldShowNavigation:t}))},w.renderSprintActions=function(t,e,r,i,a){var n=this.showSprintReopenButton(r,i.state),o=this.showSprintDeleteButton();t.empty(),t.append(GH.tpl.reportcontroller.renderSprintActions({showReopen:n,showDelete:o,sprintStatus:i.state,canManageSprints:GH.RapidViewConfig.canManageSprints,noParallelSprintsAndSprintActive:this.hasNoParallelSprintAndSprintActive(r),allJql:a})),n&&t.find("#ghx-reopen-sprint").on("click",function(t){t.preventDefault(),GH.Dialogs.ReopenSprintDialog.showDialog(e,i.id)}),o&&t.find("#ghx-delete-sprint").on("click",function(t){t.preventDefault(),h.deleteSprint(e,i,w.show)}),t.find("[title]").tooltip({gravity:"e"})},w.showSprintReopenButton=function(t,e){t=this.hasNoParallelSprintAndSprintActive(t);return GH.RapidViewConfig.canManageSprints&&"CLOSED"===e&&!t},w.hasNoParallelSprintAndSprintActive=function(t){var e=GH.RapidBoard.parallelSprints,t=i.any(t,function(t){return"ACTIVE"===t.state});return!e&&t},w.showSprintDeleteButton=function(){return GH.RapidViewConfig.canManageSprints},w.setRapidView=function(t){w.rapidViewData=t||{},i.each(w.getCharts(),function(t){t.controller.setRapidView(w.rapidViewData)})},w.show=function(){w.rapidViewData.id&&(w.visible=!0,GH.ChartTimeFrameService.setRapidViewId(w.rapidViewData.id),w.renderReportView(),w.loadRapidViewConfig())},w.loadRapidViewConfig=function(){r.when(GH.RapidViewConfig.fetchConfiguration(w.rapidViewData.id),JIRA.API.getSidebar()).done(function(t){w.visible&&(w.rapidViewConfig=t,w.configureContent())})},w.configureContent=function(){GH.ViewActions.setMode(g.REPORT);var t=GH.RapidBoard.State.getChartType();(t=!w.isApplicableChart(t)?!1:t)||(t=w.getApplicableCharts(),GH.RapidBoard.State.setChartType(i.first(t).id)),GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),GH.RapidBoard.ViewController.updateContentContainer(),w.showChart(),u.prefetch()},w.hide=function(){w.visible&&(w.hideCharts(),w.visible=!1,r("#ghx-report").empty(),w.analyticsTimer&&w.analyticsTimer.destroy())},w.hideCharts=function(e){i.each(w.getCharts(),function(t){t.id!==e&&t.controller.hide()})},w.selectChart=function(t){GH.SprintRetrospectiveView.clearDialog(),t!==GH.RapidBoard.State.getChartType()&&(GH.RapidBoard.State.setChartType(t),w.showChart())},w.getCurrentChart=function(){var t=GH.RapidBoard.State.getChartType(),e=GH.RapidBoard.UrlState.getCurrentUrlState().chart;if(e!==t&&w.selectChart(e||t),t)return w.getChart(t)},w.showChart=function(){var r=w.getCurrentChart();r&&(w.updateChartMenu(r.id),w.updateChartHeader(r),w.hideCharts(),r.controller.show(),S.sendScreenEvent(r.id+"Screen",null,{boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()}),w.handleIntroState(),w.analyticsTimer&&w.analyticsTimer.destroy(),w.analyticsTimer=new GH.DurationsTimer(w.ANALYTICS_TIME_SPENT_MILESTONES).on("tick",function(t){var e=r.id+(r.inLabs?".new":"")+".view."+(w.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");w.analytics.trigger(e,"duration",t/1e3)}))},w.updateChartMenu=function(t){var e=r("#ghx-chart-nav");e.html(r(GH.tpl.reportcontroller.renderChartMenu({activeChart:t,availableCharts:w.getApplicableCharts(),board:w.rapidViewConfig})));e=e.find("li");e.bind("simpleClick",GH.Util.wrapPreventDefault(function(t){w.handleChartSelection(t,r(this))})),r(".tipsy").remove(),s.tipsify({selector:e,gravity:"w",className:"ghx-tipsy-left"})},w.updateChartHeader=function(t){r("#ghx-chart-message").empty(),r("#ghx-chart-header .ghx-linked-pages-trigger").remove(),r("#ghx-chart-selector").empty(),r("#ghx-chart-snapshot").empty(),r(".ghx-chart-legend").hide(),r("#ghx-chart-sprint-actions").empty(),r("#ghx-chart-intro").html(GH.tpl.reportcontroller.renderChartIntro({marginClass:"ghx-margin-right-spa",activeChart:t})),r("#ghx-chart-help").html(GH.tpl.reportcontroller.renderChartDescriptionClosed()),r("#ghx-chart-panel-content").find(".js-chart-intro-toggle").on("click",function(t){w.toggleIntroState(t)})},w.handleChartSelection=function(t,e){e=e.find("a").attr("data-chart");w.selectChart(e)},w.handleIssueCreated=function(t,e){w.visible&&GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(e)},w.handleSprintReopened=function(t,e){GH.RapidBoard.ViewController.setMode(g.WORK),GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_RENDERED,"afterSprintReopened",function(){GH.WorkControls.sprintfilters.setActiveSprintFilters([e]),r(GH.WorkControls.sprintfilters).trigger("sprintFilterChange"),GH.RapidBoard.State.pushState()}),GH.RapidBoard.ViewController.sidebarController.updateSidebar()},w.handleIntroState=function(){!1===GH.RapidBoard.State.getStoredChartIntroState()&&w.closeIntro()},w.toggleIntroState=function(){var t=r(".ghx-intro-content"),e=r("#ghx-chart-help");t.hasClass("ghx-closed")?(t.removeClass("ghx-closed"),GH.RapidBoard.Animation.animateHeightToAuto(t),e.addClass("ghx-closed"),GH.RapidBoard.State.setChartIntroState(!0)):(GH.RapidBoard.Animation.animateHeightToZero(t).done(function(){t.addClass("ghx-closed"),e.removeClass("ghx-closed")}),GH.RapidBoard.State.setChartIntroState(!1))},w.closeIntro=function(){r(".ghx-intro-content").height(0).addClass("ghx-closed"),r("#ghx-chart-help").removeClass("ghx-closed")},w});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReportController.soy' */
// This file was automatically generated from ReportController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reportcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reportcontroller == 'undefined') { GH.tpl.reportcontroller = {}; }


GH.tpl.reportcontroller.renderReportView = function(opt_data, opt_ignored) {
  return '<div id="ghx-report-scrollarea"><div class="aui-page-panel"><div class="aui-page-panel-inner">' + ((opt_data.shouldShowNavigation) ? '<div class="aui-page-panel-nav js-reports-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml('Reports') + '</strong></div><ul id="ghx-chart-nav" class="aui-nav"></ul></div></nav></div>' : '') + '<section id="ghx-chart-panel-content" class="aui-page-panel-content"><div id="ghx-chart-message"></div><div id="ghx-chart-intro"></div><div id="ghx-chart-header" class="aui-group aui-group-split ghx-fluid"><div id="ghx-chart-header-primary" class="aui-item"><div id="ghx-chart-title"></div><div id="ghx-chart-selector"></div><div id="ghx-chart-controls"></div><div id="ghx-chart-help" class="ghx-closed"></div><div id="ghx-chart-snapshot"></div></div><div id="ghx-chart-header-secondary" class="aui-item"><div id="ghx-chart-sprint-actions"></div><div class="ghx-chart-legend"></div></div></div><div id="ghx-chart-content"></div></section></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderReportView.soyTemplateName = 'GH.tpl.reportcontroller.renderReportView';
}


GH.tpl.reportcontroller.renderSprintActions = function(opt_data, opt_ignored) {
  return '' + ((opt_data.allJql || opt_data.canManageSprints) ? aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-more', iconText: 'Sprint actions', id: 'ghx-sprint-actions-button', extraClasses: 'aui-dropdown2-trigger aui-dropdown2-trigger-arrowless', extraAttributes: {'aria-owns': 'ghx-sprint-actions-content', 'aria-haspopup': true}}) + '<div id="ghx-sprint-actions-content" class="aui-style-default aui-dropdown2"><ul class="aui-list-section aui-first">' + ((opt_data.canManageSprints) ? ((opt_data.sprintStatus == 'CLOSED') ? '<li class="aui-list-item"><a id="ghx-reopen-sprint" role="button" href="#" class="aui-list-item-link ' + ((! opt_data.showReopen) ? ' disabled' : '') + '" title="' + soy.$$escapeHtml(opt_data.noParallelSprintsAndSprintActive ? 'This sprint can\x27t be reopened at the moment! Complete your currently active sprint, or enable Parallel Sprints to work on multiple sprints concurrently.' : '') + '" >' + soy.$$escapeHtml('Reopen sprint') + '</a></li>' : '') + '<li class="aui-list-item"><a id="ghx-delete-sprint" role="button" href="#" class="aui-list-item-link ' + ((! opt_data.showDelete) ? ' disabled' : '') + '">' + soy.$$escapeHtml('Delete sprint') + '</a></li>' : '') + ((opt_data.allJql) ? '<li class="aui-list-item"><a role="button" href="' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.allJql}) + '" class="aui-list-item-link">' + soy.$$escapeHtml('View sprint in Issue Navigator') + '</a></li>' : '') + '</ul></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderSprintActions.soyTemplateName = 'GH.tpl.reportcontroller.renderSprintActions';
}


GH.tpl.reportcontroller.renderChartMenu = function(opt_data, opt_ignored) {
  var output = '';
  var chartList52 = opt_data.availableCharts;
  var chartListLen52 = chartList52.length;
  for (var chartIndex52 = 0; chartIndex52 < chartListLen52; chartIndex52++) {
    var chartData52 = chartList52[chartIndex52];
    output += '<li ' + ((opt_data.activeChart == chartData52.id) ? 'class="aui-nav-selected"' : '') + ' data-tooltip="' + soy.$$escapeHtml(chartData52.tooltip) + '"><a data-chart="' + soy.$$escapeHtml(chartData52.id) + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.board.id) + '&amp;view=reporting&amp;chart=' + soy.$$escapeHtml(chartData52.id) + '">' + soy.$$escapeHtml(chartData52.name) + ((chartData52.inLabs) ? ' <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success">' + soy.$$escapeHtml('New') + '</span>' : '') + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartMenu.soyTemplateName = 'GH.tpl.reportcontroller.renderChartMenu';
}


GH.tpl.reportcontroller.renderChartTitle = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.activeChart.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartTitle.soyTemplateName = 'GH.tpl.reportcontroller.renderChartTitle';
}


GH.tpl.reportcontroller.renderChartIntro = function(opt_data, opt_ignored) {
  return '<div class="ghx-intro-content ghx-open"><div class="aui-group ghx-content-open">' + GH.tpl.reportcontroller.renderChartDescription(opt_data) + ((opt_data.activeChart.howTos) ? '<div class="aui-item ghx-item-how"><div class="aui-group ghx-group-how">' + GH.tpl.reportcontroller.renderChartHow(opt_data) + '</div></div>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartIntro.soyTemplateName = 'GH.tpl.reportcontroller.renderChartIntro';
}


GH.tpl.reportcontroller.renderChartDescription = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><h4 class="ghx-margin-none"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help ghx-margin-right ' + soy.$$escapeHtml(opt_data.marginClass) + '"></span>' + soy.$$escapeHtml('How to read this chart') + '</h4><p>' + soy.$$escapeHtml(opt_data.activeChart.description) + '</p><p>' + ((opt_data.activeChart.documentation) ? aui.buttons.button({extraAttributes: {href: opt_data.activeChart.documentation, target: '_blank'}, text: 'Learn more', tagName: 'a'}) : '') + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: 'Hide this information'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescription.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescription';
}


GH.tpl.reportcontroller.renderChartDescriptionClosed = function(opt_data, opt_ignored) {
  return '<div class="ghx-howto-trigger ghx-closed"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help"></span> ' + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: 'How to read this chart', tagName: 'a'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescriptionClosed.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescriptionClosed';
}


GH.tpl.reportcontroller.renderChartHow = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.activeChart.howTos) {
    var howToList120 = opt_data.activeChart.howTos;
    var howToListLen120 = howToList120.length;
    for (var howToIndex120 = 0; howToIndex120 < howToListLen120; howToIndex120++) {
      var howToData120 = howToList120[howToIndex120];
      output += GH.tpl.reportcontroller.renderChartHowItem({howTitle: howToData120.title, howDescription: howToData120.description});
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHow.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHow';
}


GH.tpl.reportcontroller.renderChartHowItem = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><svg class="ghx-svg-chart"></svg><strong class="ghx-how-title">' + soy.$$escapeHtml(opt_data.howTitle) + '</strong><div class="ghx-how-description">' + soy.$$escapeHtml(opt_data.howDescription) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHowItem.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHowItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReportUrlState.js' */
!function(){"use strict";var t=require("jira-agile/rapid/const/PageMode");GH.ReportUrlState={},GH.ReportUrlState.self="ReportUrlState",GH.ReportUrlState.isApplicable=function(r){return r.mode===t.REPORT},GH.ReportUrlState.getNormalizedFromUrl=function(r,t){GH.ReportController.init();var e=t.chart=GH.RapidBoard.UrlState.normalizeStringParam(r.chart,""),e=GH.ReportController.getChart(e);e&&_.defaults(t,e.controller.getNormalizedFromUrl(r))},GH.ReportUrlState.toUrl=function(r,t){var e=t.chart=r.chart,e=GH.ReportController.getChart(e);e&&_.defaults(t,e.controller.toUrl(r))},GH.ReportUrlState.getNormalizedFromInternal=function(r){GH.ReportController.init();var t,e=GH.ReportController.getCurrentChart();r.chart=GH.RapidBoard.State.getChartType(),GH.ReportController.isApplicableChart(r.chart,r)||(t=GH.ReportController.getApplicableCharts(r))&&(e=t[0],r.chart=e.id),e&&_.defaults(r,e.controller.getNormalizedFromInternal())},GH.ReportUrlState.updateInternalFromNormalized=function(r){GH.ReportController.init(),GH.RapidBoard.State.setChartType(r.chart);var t=GH.ReportController.getChart(r.chart);t&&t.controller.updateInternalFromNormalized(r)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/Chart.js' */
/* global GH */
/**
 * Chart
 * @module jira-agile/rapid/ui/chart/chart
 * @requires module:jquery
 */
define('jira-agile/rapid/ui/chart/chart', ['require'], function (require) {
    'use strict';

    // This class is put here temporary until we can find out a way to abstract or just import it.
    class ThemeMutationObserver {
        observer = null;

        constructor(callback) {
            this.callback = callback;
        }

        observe() {
            if (!this.observer) {
                this.observer = new MutationObserver(() => {
                    this.callback();
                });
            }
            this.observer.observe(document.documentElement, {
                attributeFilter: ['data-color-mode'],
            });
        }

        disconnect() {
            this.observer && this.observer.disconnect();
        }
    }

    // REQUIRES
    var $ = require('jquery');

    // GLOBALS... FIX ME
    var Layout = GH.Layout;

    /**
     * This library is a wrapper for flot (see http://people.iola.dk/olau/flot/API.txt) for API doc.
     * It allows us to centralise utility functions and add default options to all charts.
     */
    var Chart = {};
    var observer = null;

    /** fired before a chart is redrawn on window resize, giving others the opportunity to do stuff */
    Chart.EVENT_RESIZE_REDRAW = 'gh.chart.resize_redraw';

    /**
     * Default chart options. Specific options will override these.
     * Use as function so that it will create a new one each time when we call it, because value can change based on color theme
     */
    Chart.getDefaultOptions = () => ({
        colors: ["#9eb6d4", "#afd8f8", "#cb4b4b", "#4da74d", "#9440ed"],
        grid: {
            color: window.getComputedStyle(document.body).getPropertyValue("--ds-text") || "#545454", // primary color used for outline and labels
            backgroundColor: window.getComputedStyle(document.body).getPropertyValue("--ds-surface") || "#fff",
            borderColor: window.getComputedStyle(document.body).getPropertyValue("--ds-border") || "#bbb",
            borderWidth: 1,
            internalLineWidth: 0,
            labelMargin: 2,
            minBorderMargin: 1
        },
        legend: {
            container: "#ghx-chart-legend",
            noColumns: 1 // number of columns in legend table
        },
        shadowSize: 0,
        xaxis: {
            tickLength: 4 // sets the little marks next to the units on the x axis, a value here also stops horizontal lines across chart
        },
        yaxis: {
            tickLength: 4 // sets the little marks next to the units on the y axis, a value here also stops horizontal lines across chart
        },
    });

    /**
     * Draw a chart using flot
     *
     * @param container : jQuery object or selector of the element where the chart will be drawn
     * @param series : flot data series
     * @param options : chart options (optional). Override default options.
     * @param getOptions : function that returns the options (optional). Override default options.
     *
     * @returns the created flot chart object, for future reference
     */
    Chart.draw = function (id, container, series, options, getOptions) {
        container = $(container);

        // clone the global defaults into a local variable (we might have more than one chart in a page)
        var effectiveOptions = Chart.getDefaultOptions();
        if (options) {
            // override the defaults with the given options
            $.extend(true, effectiveOptions, options, getOptions && getOptions());
        }

        var chart = $.plot(container, series, effectiveOptions);
        Chart.bindToWindowSize(id, chart);

        observer = new ThemeMutationObserver(() => {
            try {
                // Close the previous chart
                chart.shutdown();

                // We need to re-plot the chart if the color theme is changed. However, option cannot be updated once
                // the chart is plotted. We will need to recreate and plot it again.
                effectiveOptions = Chart.getDefaultOptions();
                if (options) {
                    // override the defaults with the given options
                    $.extend(true, effectiveOptions, options, getOptions && getOptions());
                }
                chart = $.plot(container, series, effectiveOptions);
            } catch (error) {
                // Error on change color theme
            }
        });
        observer.observe();

        return chart;
    };

    Chart.bindToWindowSize = function (id, chart) {
        $(GH).bind(Layout.EVENT_DELAYED_RESIZE + '.' + id, function () {
            $(GH).trigger(Chart.EVENT_RESIZE_REDRAW, {
                id: id,
                chart: chart
            });

            // GHS-4621: we are temporarily catching potential errors due to canvas resizing until we refactor this code.
            try {
                chart.resize();
                chart.setupGrid();
                chart.draw();
            } catch (error) {
                // Error resizing chart
            }
        });
    };

    Chart.destroy = function (id) {
        $(GH).unbind(Layout.EVENT_DELAYED_RESIZE + '.' + id);
        if (observer) {
            observer.disconnect();
        }
    };

    return Chart;
});
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartUtils.js' */
!function(){"use strict";var i=require("aui/inline-dialog");GH.ChartUtils={},GH.ChartUtils.oneMinuteInMillis=6e4,GH.ChartUtils.oneHourInMillis=60*GH.ChartUtils.oneMinuteInMillis,GH.ChartUtils.oneDayInMillis=24*GH.ChartUtils.oneHourInMillis,GH.ChartUtils.fixButtons=function(t){var r,a,e;AJS.$(t).find(".aui-buttons").each(function(){r=AJS.$(this).position(),a=r.left,AJS.$(this).find(".aui-button").each(function(){e=AJS.$(this).position(),e.left===a&&(AJS.$(this).addClass("first"),AJS.$(this).prev(".aui-button").addClass("last"))})})},GH.ChartUtils.registerInlineDialogHacks=function(e){AJS.$(document).bind("showLayer",function(t,r,a){"inlineDialog"===r&&AJS&&i&&i.current&&i.current.id===e&&(a._validateClickToClose=function(t){return!(0<AJS.$(t.target).parents(".calendar").length)&&!(0<AJS.$(t.target).parents("#inline-dialog-"+i.current.id).length)},AJS.$("body").unbind("click."+i.current.id+".inline-dialog-check"),setTimeout(function(){i.current&&i.current.id&&GH.ChartUtils.fixButtons("#inline-dialog-"+i.current.id)},0))})},GH.ChartUtils.createIssueJql=function(t){return"issueKey in ("+_.pluck(t,"key").join(",")+")"},GH.ChartUtils.createEpicJql=function(t){return'"'+GH.EpicConfig.getEpicLinkFieldName()+'" = "'+t.key+'"'},GH.ChartUtils.createVersionJql=function(t){return"fixVersion="+encodeURIComponent(t.jqlEncodedName)+" AND project="+t.projectKey},GH.ChartUtils.createStatusJql=function(t){return'Status IN ("'+_.pluck(t,"name").join('","')+'")'},GH.ChartUtils.getStatisticConsumer=function(t){var r=require("jira-agile/rapid/ui/chart/burndown-timeline-producer");return t?r.TimeTrackingStatisticConsumer:r.EstimateStatisticConsumer},GH.ChartUtils.renderStatisticText=function(t,r,a){var e=(r=!_.isUndefined(r)&&r)?Math.abs(t):t;if("duration"!==a)return GH.NumberFormat.format(e);t=!r&&t<0?"-":"",e=Math.abs(e);return t+GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e)},GH.ChartUtils.renderUTCMillisAsDate=function(t){return GH.ChartUtils.renderUTCMillisInFormat(t,GH.ChartTimeFrames.momentTimeFormat)},GH.ChartUtils.renderUTCMillisAsDateWithoutTime=function(t){return GH.ChartUtils.renderUTCMillisInFormat(t,GH.ChartTimeFrames.momentDateFormat)},GH.ChartUtils.renderUTCMillisInFormat=function(t,r){return moment.utc(t).format(r)},GH.ChartUtils.getTimeFrameReportUrlParams=function(t){t={days:GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),swimlane:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.swimlanes",[]),column:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.columns."+t,[]),quickFilter:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.quickFilters",[])};return-1===t.days?(t.from=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from"),t.to=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to")):(t.from=0,t.to=0),t},GH.ChartUtils.timeFrameReportParamsToUrl=function(t){var r={};return t.swimlane&&0<t.swimlane.length&&(r.swimlane=t.swimlane),t.column&&0<t.column.length&&(r.column=t.column),t.quickFilter&&0<t.quickFilter.length&&(r.quickFilter=t.quickFilter),-1===t.days?(r.from=new Date(t.from).print(GH.RapidBoard.UrlState.dateFormat),r.to=new Date(t.to).print(GH.RapidBoard.UrlState.dateFormat)):0<t.days&&(r.days=t.days),r},GH.ChartUtils.getNormalizedFromUrlForTimeFrameReport=function(t){var r={swimlane:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.swimlane),column:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.column),quickFilter:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.quickFilter)},a=GH.RapidBoard.UrlState.normalizeNumberParam(t.days,0),e=GH.RapidBoard.UrlState.normalizeDateParam(t.from,null),t=GH.RapidBoard.UrlState.normalizeDateParam(t.to,null);return null!==e&&null!==t?(r.days=-1,r.from=e.getTime(),r.to=t.getTime()):(r.days=a,r.from=0,r.to=0),r},GH.ChartUtils.getChartOptions=function(t){var r=require("jira-agile/rapid/ui/chart/chart-controller");return{xaxis:{mode:"time",min:t.getXAxisStart(),max:t.getXAxisEnd()},yaxes:t.getYAxes(),legend:{container:AJS.$("#ghx-chart-legend"),backgroundOpacity:.5,position:"se"},grid:{markings:r.getNonWorkingBlocks,hoverable:!0,clickable:!1,autoHighlight:!1},mouseEnterExitEvents:!0}},GH.ChartUtils.updateFromNormalizedStateDateTimeParams=function(t){GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",t.days),GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",t.from),GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",t.to),GH.RapidBoard.State.setBoardSetting("chart.filters.swimlanes",t.swimlane),GH.RapidBoard.State.setBoardSetting("chart.filters.columns."+t.chart,t.column),GH.RapidBoard.State.setBoardSetting("chart.filters.quickFilters",t.quickFilter)},GH.ChartUtils.calculateYProjection=function(t,r,a){function e(t){return _.isArray(t)?{x:t[0],y:t[1]}:t}t=e(t),r=e(r),a=e(a);var i=r.x-t.x,a=a.x-t.x;return(r.y-t.y)*a/i+t.y}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartColors.js' */
define("jira-agile/rapid/ui/chart/chart-colors",function(){"use strict";return{estimate:"#89c495",trend:"#3b73af",scope:"#cccccc",completed:"#3b7fc4",issueCount:"#205081",unestimated:"#815b3a",unestimatedPercent:"#d04437",timeSpent:"#14892c",nonWorkingDays:"#f2f2f2",nonWorkingDaysWallboard:"#333",dashedMarking:"#000",releaseDate:"#999",wallboard:{backgroundColor:"#000",borderColor:"#999",textColor:"#999",tickColor:"#999"}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/FlotChartUtils.js' */
GH.FlotChartUtils={},GH.FlotChartUtils.handlePlotClick=function(t,r,i){},GH.FlotChartUtils.deferredRenderPoints=function(t,r){r.save(),r.translate(t.getPlotOffset().left,t.getPlotOffset().top),r.strokeStyle="rgb(100, 100, 100)",r.fillStyle="rgba(255, 255, 255, 0.5)",_.each(t.realPointsPerSeries,function(t){_.each(t,function(t){GH.FlotChartUtils.drawPoint(r,t)})}),r.restore()},GH.FlotChartUtils.drawPoint=function(t,r){t.beginPath(),t.arc(r.x,r.y,3,0,2*Math.PI,!1),t.fill(),t.closePath(),t.stroke()},GH.FlotChartUtils.handleMouseOverStateChange=function(t,r){r.realPointsPerSeries={},r.draw()},GH.FlotChartUtils.setAndAlignAxisLabels=function(t,r,i){AJS.$("#ghx-axis-x").text(t),AJS.$("#ghx-axis-y").find(".ghx-inner").text(r),i&&AJS.$("#ghx-axis-y-right").find(".ghx-inner").text(i)},GH.FlotChartUtils.calculateYAxis=function(t,r){return"duration"===r.renderer?GH.FlotChartUtils.createYAxisForDuration(t):"issueCount"===r.typeId?GH.FlotChartUtils.createYAxisForIssueCount(t):{tickFormatter:GH.FlotChartUtils.numberFormatter}},GH.FlotChartUtils.issueCountFormatter=function(t,r){return t.toFixed(0)},GH.FlotChartUtils.durationFormatter=function(t,r){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(t,{timeFormat:GH.TimeFormatDisplays.HOURS,durationUnit:GH.TimeFormatDurationUnits.SECONDS})},GH.FlotChartUtils.numberFormatter=function(t,r){return GH.NumberFormat.format(t)},GH.FlotChartUtils.createYAxisForIssueCount=function(t){var r={tickFormatter:GH.FlotChartUtils.issueCountFormatter};return t<15?r.minTickSize=1:(numTicks=8,minTickSize=Math.ceil(t/numTicks),r.tickSize=minTickSize),r},GH.FlotChartUtils.createYAxisForDuration=function(t){var r=parseInt(t/8,10),t=(r=0===t?3600:r)%3600;return 0!=t&&(r+=3600-t),{tickSize:r,tickFormatter:GH.FlotChartUtils.durationFormatter}},GH.FlotChartUtils.gatherPoints=function(t,r){for(var i=t.datapoints,e=i.points,a=i.pointsize,o=t.xaxis,n=t.yaxis,s=[],l=0;l<e.length;l+=a){var u,c,h,F=r[Math.ceil(l/a)];_.isEmpty(F)||(u=e[l],c=e[l+1],null==u||u<o.min||u>o.max||c<n.min||c>n.max||(h=o.p2c(u),F=n.p2c(c),s.push({x:h,y:F,time:u,statValue:c})))}return s};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/ChartPicker.js' */
define("jira-agile/rapid/ui/component/chart-picker",["require"],function(e){var t,s=e("jquery"),i=e("underscore"),r=e("jira-agile/rapid/global-events"),n=e("jira/ajs/select/single-select"),o=e("jira-agile/rapid/ui/chart/report-sla-tracker"),c=GH.tpl;r.on("pre-initialization",function(){t=GH.BoardState});function d(e,t){this.selectedItemStateKey=e,this.items=[],this.defaultItem=void 0,this.emptyItemsMsg=t||"There are no available sprints for this board."}d.prototype.setItems=function(e){this.items=e||[]},d.prototype.getItems=function(){return this.items},d.prototype.hasItems=function(){return!i.isEmpty(this.items)},d.prototype.getDefaultItem=function(){return this.defaultItem},d.prototype.getDefaultItemId=function(){return!!this.defaultItem&&this.defaultItem.id},d.prototype.setDefaultItem=function(e){this.defaultItem=e||void 0},d.prototype.getItemById=function(t){var e=i.find(this.items,function(e){return e.id.toString()===t.toString()});return!i.isUndefined(e)&&e},d.prototype.getSelectedItem=function(){var e,t=this.getStoredSelectedItemId();return(e=t?this.getItemById(t):e)||(this.getDefaultItem()?e=this.getDefaultItem():this.hasItems()&&(e=i.last(this.getItems()))),e&&(t=this.getDefaultItemId()===e.id?-1:e.id,this.storeSelectedItemId(t)),e||!1},d.prototype.setSelectedItem=function(e,t){this.previousSelectedItem=this.getSelectedItem();var i=this.getItemById(e);i?(e=this.getDefaultItemId()===i.id?-1:i.id,this.storeSelectedItemId(e)):this.storeSelectedItemId(!1),t||s(this).trigger("selectedItemChanged",{item:i})},d.prototype.removeSelectedItemAndRevert=function(e){var t;this.previousSelectedItem&&(t=this.getSelectedItem().id,this.items=i.reject(this.items,function(e){return e.id===t}),this.setSelectedItem(this.previousSelectedItem.id),this.render(e))},d.prototype.getStoredSelectedItemId=function(){return t.getPerViewValue(this.selectedItemStateKey,!1)},d.prototype.storeSelectedItemId=function(e){t.setPerViewValue(this.selectedItemStateKey,e||!1)},d.prototype.render=function(t){var e=1<this.items.length,i=this.getSelectedItem(),r=this,n=function(e,t){r.setSelectedItem(t.value())};e?(t.html(c.component.chartpicker.renderSingleSelect({items:this.items,selectedItem:i})),s("#ghx-items-trigger").click(function(e){r.showDropdown(e,function(){r.render(t)},n)})):i?t.html(c.component.chartpicker.renderSingleItem({selectedItemId:i.id,selectedItemName:i.name||""})):(s("#ghx-chart-content").html(c.component.chartpicker.renderEmpty({emptyItemsMsg:this.emptyItemsMsg})),o.checkReportAndFireSlaEvent(m(this.selectedItemStateKey))),s("#ghx-chart-picker-form").submit(function(){return!1})};var m=function(e){switch(e){case"burndown.selectedSprintId":return o.reportNames.burndown;case"sprintRetrospective.selectedSprintId":return o.reportNames.sprintReport;default:return o.reportNames.unknown}};return d.prototype.showDropdown=function(e,t,i){s(e.target).hide();var e=s("#ghx-chart-picker"),r=(new n({element:e,width:250,errorMessage:"",setMaxHeightToWindow:!0}),s("#ghx-chart-picker-field"));e.bind("selected",function(e,t){t.value()&&i(e,t),r.blur()}),r.blur(t),r.focus().select(),setTimeout(function(){s("#ghx-chart-picker-field").trigger("click")},20)},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/ChartPicker.soy' */
// This file was automatically generated from ChartPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.chartpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.chartpicker == 'undefined') { GH.tpl.component.chartpicker = {}; }


GH.tpl.component.chartpicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleItem';
}


GH.tpl.component.chartpicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderEmpty.soyTemplateName = 'GH.tpl.component.chartpicker.renderEmpty';
}


GH.tpl.component.chartpicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderDropdown.soyTemplateName = 'GH.tpl.component.chartpicker.renderDropdown';
}


GH.tpl.component.chartpicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-chart-picker-form" class="aui ghx-chart-picker">' + aui.buttons.button({id: 'ghx-items-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-chart-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/EstimatePicker.js' */
define("jira-agile/rapid/ui/component/estimate-picker",["require"],function(t){function e(t,e){this.selectedItemStateKey=t,this.items=[],this.defaultItem=void 0,this.supportTimeTracking=e}var n=t("jquery"),i=t("underscore"),o=t("jira-agile/rapid/ui/chart/chart-view"),s=t("jira/ajs/select/single-select"),a=t("jira-agile/rapid/ajax"),r=GH.BoardState,c=GH.RapidBoard.State,d=GH.tpl;return e.prototype.setItems=function(t){this.items=t||[]},e.prototype.getItems=function(){return this.items},e.prototype.hasItems=function(){return!i.isEmpty(this.items)},e.prototype.getDefaultItem=function(){return this.defaultItem},e.prototype.getDefaultItemId=function(){return!!this.defaultItem&&this.defaultItem.id},e.prototype.setDefaultItem=function(t){this.defaultItem=t||void 0},e.prototype.getItemById=function(e){return i.find(this.items,function(t){return t.id===e})},e.prototype.getSelectedItem=function(){var t=this.getStoredSelectedItemId(),t=t?this.getItemById(t):null;return t||(this.getDefaultItem()?t=this.getDefaultItem():this.hasItems()&&(t=i.last(this.getItems())),this.storeSelectedItemId(),c.pushState()),t||!1},e.prototype.setSelectedItem=function(t,e){this.previousSelectedItem=this.getSelectedItem();var i=this.getItemById(t);i?this.storeSelectedItemId(t):this.storeSelectedItemId(),e||n(this).trigger("selectedItemChanged",{item:i})},e.prototype.getStoredSelectedItemId=function(){return r.getPerViewValue(this.selectedItemStateKey,null)},e.prototype.storeSelectedItemId=function(t){r.setPerViewValue(this.selectedItemStateKey,t)},e.prototype.render=function(e){var t=1<this.items.length,i=this.getSelectedItem(),r=this,s=function(t,e){r.setSelectedItem(e.value())};t?(e.html(d.component.estimatePicker.renderSingleSelect({items:this.items,selectedItem:i})),n("#ghx-estimate-picker-trigger").click(function(t){r.showDropdown(t,function(){r.render(e)},s)})):i&&e.html(d.component.estimatePicker.renderSingleItem({selectedItemId:i.id,selectedItemName:i.name||""})),n("#ghx-estimate-picker-form").submit(function(){return!1})},e.prototype.showDropdown=function(t,e,i){n(t.target).hide();var t=n("#ghx-estimate-picker"),r=(new s({element:t,width:250,errorMessage:"",setMaxHeightToWindow:!0}),n("#ghx-estimate-picker-field"));t.bind("selected",function(t,e){e.value()&&i(t,e),r.blur()}),r.blur(e),r.focus().select(),setTimeout(function(){n("#ghx-estimate-picker-field").trigger("click")},20)},e.prototype.load=function(t,r){var s=this;return a.get({url:"/rapidviewconfig/estimation.json",data:{rapidViewId:t}},"rapidBoardEstimateStatistics").done(function(t){var e,i;t.availableEstimationStatistics&&(e=t.availableEstimationStatistics,i=t.currentEstimationStatistic,s.supportTimeTracking&&t.currentTrackingStatistic.isEnabled&&(e.push(t.currentTrackingStatistic),i=t.currentTrackingStatistic),s.setItems(e),s.setDefaultItem(i),n(s).bind("selectedItemChanged",function(){var t=s.getSelectedItem().id;r(t)}),s.render(o.getChartControls(!0)),o.showChartControls())})},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/EstimatePicker.soy' */
// This file was automatically generated from EstimatePicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.estimatePicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.estimatePicker == 'undefined') { GH.tpl.component.estimatePicker = {}; }


GH.tpl.component.estimatePicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleItem';
}


GH.tpl.component.estimatePicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderEmpty.soyTemplateName = 'GH.tpl.component.estimatePicker.renderEmpty';
}


GH.tpl.component.estimatePicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-estimate-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderDropdown.soyTemplateName = 'GH.tpl.component.estimatePicker.renderDropdown';
}


GH.tpl.component.estimatePicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-estimate-picker-form" class="aui ghx-estimate-picker">' + aui.buttons.button({id: 'ghx-estimate-picker-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-estimate-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartTooltip.js' */
GH.ChartTooltip=function(t,e,a){this.item=t,this.data=e,this.type=a},GH.ChartTooltip.prototype.render=function(){var t=require("jira-agile/rapid/ui/chart/change-event"),e=this.type===t.releaseDate?AJS.$(GH.tpl.charttooltip.renderReleaseDatePredictionTooltip({data:this.data})):this.type===t.startDate?AJS.$(GH.tpl.charttooltip.renderStartDateTooltip({data:this.data})):this.type===t.uncertainty?AJS.$(GH.tpl.charttooltip.renderUncertainty({tooltipData:this.data})):AJS.$(GH.tpl.charttooltip.renderTooltip({tooltipData:this.data})),a=this.item.pageX,i=this.item.pageY,t=this.item.series;e.css({position:"absolute",display:"none",top:i+5,"border-left-color":t.color}),e.appendTo("body");i=e.width(),t=AJS.$("#ghx-chart-view canvas.base");a+i>t.offset().left+t.width()?e.css({left:a-(30+i)}):e.css({left:a+15}),e.fadeIn(200)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartTooltip.soy' */
// This file was automatically generated from ChartTooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttooltip.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttooltip == 'undefined') { GH.tpl.charttooltip = {}; }


GH.tpl.charttooltip.renderTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  if (opt_data.tooltipData.initial || opt_data.tooltipData.complete) {
    output += '<strong>' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.tooltipData.issueCount)) + '</strong><br/>' + soy.$$escapeHtml(opt_data.tooltipData.event.type) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.statisticName) + ': ' + soy.$$escapeHtml(opt_data.tooltipData.statisticValue) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText);
  } else {
    var changeList17 = opt_data.tooltipData.changes;
    var changeListLen17 = changeList17.length;
    for (var changeIndex17 = 0; changeIndex17 < changeListLen17; changeIndex17++) {
      var changeData17 = changeList17[changeIndex17];
      output += '<strong>' + soy.$$escapeHtml(changeData17.key) + '</strong><br/>' + ((changeData17.event.typeAsHtml) ? soy.$$filterNoAutoescape(changeData17.event.type) : soy.$$escapeHtml(changeData17.event.type)) + '<br/>' + soy.$$escapeHtml(changeData17.event.detail) + '<br/>&#x394; ' + soy.$$escapeHtml(changeData17.statisticName) + ': ' + soy.$$escapeHtml(changeData17.statisticDelta) + '<br />';
    }
    output += soy.$$escapeHtml(opt_data.tooltipData.dateText);
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderTooltip';
}


GH.tpl.charttooltip.renderReleaseDatePredictionTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.predictedReleaseDate) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderReleaseDatePredictionTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderReleaseDatePredictionTooltip';
}


GH.tpl.charttooltip.renderStartDateTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.dateText) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderStartDateTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderStartDateTooltip';
}


GH.tpl.charttooltip.renderUncertainty = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  var changeList51 = opt_data.tooltipData.changes;
  var changeListLen51 = changeList51.length;
  for (var changeIndex51 = 0; changeIndex51 < changeListLen51; changeIndex51++) {
    var changeData51 = changeList51[changeIndex51];
    output += '<strong>' + soy.$$escapeHtml(changeData51.key) + '</strong><br/>' + soy.$$escapeHtml(changeData51.event.detail) + '<br/>';
  }
  output += soy.$$filterNoAutoescape(AJS.format('{0}% Unestimated Issues',opt_data.tooltipData.unestimated)) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderUncertainty.soyTemplateName = 'GH.tpl.charttooltip.renderUncertainty';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartController.js' */
define("jira-agile/rapid/ui/chart/chart-controller",["require"],function(i){"use strict";var r=i("underscore"),n=i("jira-agile/rapid/ui/chart/burndown-rate"),a=i("jira-agile/rapid/ui/chart/chart-colors"),o=GH.RapidViewConfig,i={loadRapidViewConfig:function(r,n){o.fetchConfiguration(r.rapidViewData.id).done(function(i){r.displayed&&(r.rapidViewConfig=i,n(i))})},getNonWorkingBlocks:function(){var i=n.getNonWorkingDays();return r.map(i,function(i){return{xaxis:{from:i.start,to:i.end},color:a.nonWorkingDays}})}};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartView.js' */
define("jira-agile/rapid/ui/chart/chart-view",["require","jira-agile/rapid/wrm-spa-utils"],function(t,e){"use strict";var n,a=t("jquery"),h={getChartContentElem:function(t){return h.chartContentElem&&!t||(h.chartContentElem=a("#ghx-chart-content")),h.chartContentElem},getChartGroup:function(t){return h.chartGroup&&!t||(h.chartGroup=a("#ghx-chart-group")),h.chartGroup},getChartStatus:function(t){return h.chartStatus&&!t||(h.chartStatus=a("#ghx-chart-status")),h.chartStatus},getChartView:function(t){return h.chartView&&!t||(h.chartView=a("#ghx-chart-view")),h.chartView},getChartControls:function(t){return h.chartControls&&!t||(h.chartControls=a("#ghx-chart-controls")),h.chartControls},getChartAllControlsElem:function(t){return h.chartAllControlsElem&&!t||(h.chartAllControlsElem=a("#ghx-chart-options")),h.chartAllControlsElem},getChartTimeControlsElem:function(t){return h.chartTimeControlsElem&&!t||(h.chartTimeControlsElem=a("#ghx-chart-options-time")),h.chartTimeControlsElem},getChartSelector:function(t){return h.chartSelector&&!t||(h.chartSelector=a("#ghx-chart-selector")),h.chartSelector},getChartLegend:function(t){return h.chartLegend&&!t||(h.chartLegend=a("#ghx-chart-legend")),h.chartLegend},getChartLegendD3:function(t){return h.chartLegendD3&&!t||(h.chartLegendD3=a(".ghx-chart-legend")),h.chartLegendD3},getChartSnapshot:function(t){return h.chartSnapshot&&!t||(h.chartSnapshot=a("#ghx-chart-snapshot")),h.chartSnapshot},getSprintActions:function(t){return h.sprintActions&&!t||(h.sprintActions=a("#ghx-chart-sprint-actions")),h.sprintActions},showChartGroup:function(){h.getChartGroup().show()},hideChartGroup:function(){h.getChartGroup().hide()},showChartStatus:function(){h.getChartStatus().show()},hideChartStatus:function(){h.getChartStatus().hide()},hideChartControls:function(){h.getChartControls().hide()},showChartControls:function(){h.getChartControls().show()},showSpinner:function(){var t=h.getChartGroup(!0);0===t.find(".ghx-chart-blanket.js-blanket-spinner").length&&(a('<div>    <div class="adg-throbber">       <span class="adg-throbber-container">           <span class="adg-throbber-spinner" size="48">               <svg                   class="adg-throbber-svg"                   focusable="false"                   height="48"                   size="48"                   viewBox="0 0 48 48"                   width="48"                   xmlns="http://www.w3.org/2000/svg"               >                   <circle cx="24" cy="24" r="21.5"></circle>               </svg>           </span>       </span>   </div></div>').addClass("ghx-chart-blanket js-blanket-spinner").appendTo(t),a(".ghx-chart-blanket .adg-throbber").show()),e.sendSpinnerShowEvent("report")},hideSpinner:function(){h.getChartGroup(!0).find(".ghx-chart-blanket.js-blanket-spinner").remove(),e.sendSpinnerHideEvent("report")},showBlankStateMessage:function(t){var e=h.getChartGroup(!0),r=e.find(".ghx-chart-blanket.ghx-blank-state").empty();(r=0===r.length?a("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(e):r).append(t)},hideBlankStateMessage:function(){h.getChartGroup(!0).find(".ghx-chart-blanket.ghx-blank-state").remove()},showIE8SupportMessage:function(t){var e=h.getChartContentElem(),r=e.find(".ghx-chart-blanket.ghx-no-ie8").empty();(r=0===r.length?a("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(e):r).append(t)},hideIE8SupportMessage:function(){h.getChartContentElem(!0).find(".ghx-chart-blanket.ghx-no-ie8").remove()}};return h.showToast=(n=null,function(t){var e=h.getChartGroup(!0),r=e.find(".ghx-chart-toast");(r=0===r.length?a("<div></div>").addClass("ghx-chart-toast").appendTo(e):r).stop().text(t).css({opacity:0,top:(e=e,e=a("#ghx-report-scrollarea").offset().top-e.offset().top,Math.max(e,0)+20),right:20}).animate({opacity:.9},500),null!==n&&clearTimeout(n),n=setTimeout(function(){r.closest("html").length&&r.fadeOut(1e3,function(){r.remove()})},1e3)}),h.showChartUpdatedToast=function(){h.showToast("Chart updated")},h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartView.soy' */
// This file was automatically generated from ChartView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartview == 'undefined') { GH.tpl.chartview = {}; }


GH.tpl.chartview.renderChartControls = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-timeframe">' + GH.tpl.charttimeframes.renderChartTimeFrame(null) + '</div><div id="ghx-chart-filter">' + GH.tpl.chartfilters.renderChartFilter(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartControls.soyTemplateName = 'GH.tpl.chartview.renderChartControls';
}


GH.tpl.chartview.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartBody.soyTemplateName = 'GH.tpl.chartview.renderChartBody';
}


GH.tpl.chartview.renderDataExceeded = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning closeable"><p><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Maximum number of viewable issues exceeded for this chart.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderDataExceeded.soyTemplateName = 'GH.tpl.chartview.renderDataExceeded';
}


GH.tpl.chartview.renderCfdTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip"' + ((opt_data.changes.length > 8) ? 'class="ghx-alt"' : '') + '>';
  if (opt_data.changes.length > 8) {
    var changeList22 = opt_data.changes;
    var changeListLen22 = changeList22.length;
    for (var changeIndex22 = 0; changeIndex22 < changeListLen22; changeIndex22++) {
      var changeData22 = changeList22[changeIndex22];
      output += ((! (changeIndex22 == 0)) ? ', ' : '') + '<strong>' + soy.$$escapeHtml(changeData22.key) + '</strong>: ' + ((changeData22.columnFrom) ? soy.$$escapeHtml(changeData22.columnFrom) + ' >> ' : '') + ((changeData22.columnTo) ? soy.$$escapeHtml(changeData22.columnTo) : '');
    }
  } else {
    var changeList38 = opt_data.changes;
    var changeListLen38 = changeList38.length;
    for (var changeIndex38 = 0; changeIndex38 < changeListLen38; changeIndex38++) {
      var changeData38 = changeList38[changeIndex38];
      output += ((! (changeIndex38 == 0)) ? '<br/>' : '') + '<strong>' + soy.$$escapeHtml(changeData38.key) + '</strong><br/>' + ((changeData38.columnFrom) ? soy.$$escapeHtml(changeData38.columnFrom) + ' >> ' : '') + ((changeData38.columnTo) ? soy.$$escapeHtml(changeData38.columnTo) : '');
    }
  }
  output += '<br/>' + soy.$$escapeHtml(opt_data.time) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderCfdTooltip.soyTemplateName = 'GH.tpl.chartview.renderCfdTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartFilters.js' */
!function(){"use strict";var s=require("aui/inline-dialog");GH.ChartFilters={},GH.ChartFilters.rapidViewConfig={},GH.ChartFilters.columns=[],GH.ChartFilters.quickFilters=[],GH.ChartFilters.swimlanes=[],GH.ChartFilters.chartType=null,GH.ChartFilters.defaultColumns=[],GH.ChartFilters.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartFiltersInlineDialog")},GH.ChartFilters.update=function(t,i,e){GH.ChartFilters.chartType=t,GH.ChartFilters.rapidViewConfig=i,GH.ChartFilters.defaultColumns=e.defaultColumns,GH.ChartFilters.initializeColumns(t),GH.ChartFilters.initializeQuickFilters(t),GH.ChartFilters.initializeSwimlanes(t);e=GH.ChartFilters.getDefaultColumnIds(),t=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.columns."+t,e);t.length<1&&(t=e),GH.ChartFilters.setActiveColumnIds(t);e=GH.ChartFilters.getDefaultQuickFilterIds(),t=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.quickFilters",e);GH.ChartFilters.setActiveQuickFilterIds(t);e=GH.ChartFilters.getDefaultSwimlaneIds(),t=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.swimlanes",e);t.length<1&&(t=e),GH.ChartFilters.setActiveSwimlaneIds(t),GH.ChartFilters.updateFilterInfo()},GH.ChartFilters.updateFilterInfo=function(){var t=GH.ChartFilters.isDefaultColumns()&&GH.ChartFilters.isDefaultQuickFilters()&&GH.ChartFilters.isDefaultSwimlanes(),i=AJS.$("#js-chart-filter"),e=AJS.$(i).find(".aui-icon"),r=AJS.$(e).text();t?(i.addClass("ghx-icon-hide"),e.removeAttr("title")):(i.removeClass("ghx-icon-hide"),e.attr("title",r))},GH.ChartFilters.addRequestParams=function(t){var e=[];_.each(GH.ChartFilters.swimlanes,function(t,i){t.active&&e.push(t.id)}),0<e.length&&(t.swimlaneId=e);var r=[];_.each(GH.ChartFilters.quickFilters,function(t,i){t.active&&r.push(t.id)}),0<r.length&&(t.quickFilterId=r);var i=[];_.each(GH.ChartFilters.columns,function(t){t.active&&i.push(t.id)}),0<i.length&&(t.columnId=i)},GH.ChartFilters.initializeColumns=function(t){for(var i=GH.ChartFilters.rapidViewConfig.columns,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.columns=e},GH.ChartFilters.getColumns=function(){return GH.ChartFilters.columns},GH.ChartFilters.isDefaultColumns=function(){for(var t=GH.ChartFilters.getDefaultColumns(),i=0;i<GH.ChartFilters.columns.length;i++)if(GH.ChartFilters.columns[i].active!=t[i])return!1;return!0},GH.ChartFilters.getDefaultColumnIds=function(){for(var t=GH.ChartFilters.getDefaultColumns(),i=[],e=0;e<GH.ChartFilters.columns.length;e++)t[e]&&i.push(GH.ChartFilters.columns[e].id);return i},GH.ChartFilters.getActiveColumns=function(){return _.filter(GH.ChartFilters.columns,function(t){return t.active})},GH.ChartFilters.getActiveColumnIds=function(){for(var t=[],i=0;i<GH.ChartFilters.columns.length;i++)GH.ChartFilters.columns[i].active&&t.push(GH.ChartFilters.columns[i].id);return t},GH.ChartFilters.setActiveColumnIds=function(t){_.each(GH.ChartFilters.columns,function(i){i.active=!1,_.each(t,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.columns."+GH.ChartFilters.chartType,t)},GH.ChartFilters.getDefaultColumns=function(){return GH.ChartFilters.defaultColumns},GH.ChartFilters.isColumnActive=function(t){t=GH.ChartFilters.getColumn(t);return!!t&&t.active},GH.ChartFilters.getColumn=function(t){for(var i=0;i<GH.ChartFilters.columns.length;i++){var e=GH.ChartFilters.columns[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeQuickFilters=function(t){for(var i=GH.ChartFilters.rapidViewConfig.quickFilters,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.quickFilters=e},GH.ChartFilters.isDefaultQuickFilters=function(){return 0===GH.ChartFilters.getActiveQuickFilterIds().length},GH.ChartFilters.getDefaultQuickFilterIds=function(){return[]},GH.ChartFilters.getActiveQuickFilterIds=function(){var i=[];return _.each(GH.ChartFilters.quickFilters,function(t){t.active&&i.push(t.id)}),i},GH.ChartFilters.setActiveQuickFilterIds=function(t){_.each(GH.ChartFilters.quickFilters,function(i){i.active=!1,_.each(t,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.quickFilters",t)},GH.ChartFilters.getQuickFilters=function(){return GH.ChartFilters.quickFilters},GH.ChartFilters.isQuickFilterActive=function(t){t=GH.ChartFilters.getQuickFilter(t);return!!t&&t.active},GH.ChartFilters.getQuickFilter=function(t){for(var i=0;i<GH.ChartFilters.quickFilters.length;i++){var e=GH.ChartFilters.quickFilters[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeSwimlanes=function(t){for(var i=GH.ChartFilters.rapidViewConfig.swimlanes,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.swimlanes=e},GH.ChartFilters.isDefaultSwimlanes=function(){return GH.ChartFilters.getDefaultSwimlaneIds().length==GH.ChartFilters.getActiveSwimlaneIds().length},GH.ChartFilters.getDefaultSwimlaneIds=function(){var i=[];return _.each(GH.ChartFilters.swimlanes,function(t){i.push(t.id)}),i},GH.ChartFilters.getActiveSwimlaneIds=function(){var i=[];return _.each(GH.ChartFilters.swimlanes,function(t){t.active&&i.push(t.id)}),i},GH.ChartFilters.setActiveSwimlaneIds=function(t){var e=_.filter(t,function(i){return _.find(GH.ChartFilters.swimlanes,function(t){return i==t.id})});0===e.length&&(e=_.pluck(GH.ChartFilters.swimlanes,"id")),_.each(GH.ChartFilters.swimlanes,function(i){i.active=!1,_.each(e,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.swimlanes",e)},GH.ChartFilters.getSwimlanes=function(){return GH.ChartFilters.swimlanes},GH.ChartFilters.isSwimlaneActive=function(t){t=GH.ChartFilters.getSwimlane(t);return!!t&&t.active},GH.ChartFilters.getSwimlane=function(t){for(var i=0;i<GH.ChartFilters.swimlanes.length;i++){var e=GH.ChartFilters.swimlanes[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeDialog=function(){AJS.$("#inline-dialog-chartFiltersInlineDialog").remove(),s.current&&s.current.hide();s("#js-chart-filter","chartFiltersInlineDialog",GH.ChartFilters.renderChartFiltersDialog,{width:500,cacheContent:!1,hideDelay:6e4})},GH.ChartFilters.renderChartFiltersDialog=function(i,t,e){var r=GH.ChartFilters.getColumns(),a=GH.ChartFilters.getSwimlanes(),l=GH.ChartFilters.getQuickFilters();i.html(GH.tpl.chartfilters.renderChartFilters({columns:r,swimlanes:a,quickFilters:l})),i.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),i.find(".js-toggle").click(function(t){t.preventDefault();t=AJS.$(this);!t.hasClass("active")?t.addClass("active"):t.removeClass("active"),GH.ChartFilters.checkFilterValidity(i)}),i.find(".js-save-button").click(function(t){t.preventDefault(),GH.ChartFilters.handleDialogSave(i)}),i.find(".js-cancel-button").click(function(t){s.current.hide()}),e()},GH.ChartFilters.checkFilterValidity=function(t){t.find(".ghx-error").remove();var i=!0;return t.find(".js-column-options .js-toggle.active").length<1&&(i=!1,t.find(".js-column-options").after('<div class="ghx-error">'+"At least one column must be selected"+"</div>")),t.find(".js-swimlane-options .js-toggle.active").length<1&&(i=!1,t.find(".js-swimlane-options").after('<div class="ghx-error">'+"At least one swimlane must be selected"+"</div>")),i},GH.ChartFilters.handleDialogSave=function(t){var r,a,l,i,e;GH.ChartFilters.checkFilterValidity(t)&&(r=[],t.find(".js-column-options .js-toggle").each(function(t,i){var e=AJS.$(i),i=e.attr("data-column-id");e.hasClass("active")&&r.push(parseInt(i,10))}),a=[],t.find(".js-swimlane-options .js-toggle").each(function(t,i){var e=AJS.$(i),i=e.attr("data-swimlane-id");e.hasClass("active")&&a.push(parseInt(i,10))}),l=[],t.find(".js-quickfilter-options .js-toggle").each(function(t,i){var e=AJS.$(i),i=e.attr("data-quickfilter-id");e.hasClass("active")&&l.push(parseInt(i,10))}),i=!_.isEqual(a,GH.ChartFilters.getActiveSwimlaneIds()),e=!_.isEqual(l,GH.ChartFilters.getActiveQuickFilterIds()),t=!_.isEqual(r,GH.ChartFilters.getActiveColumnIds()),GH.ChartFilters.setActiveColumnIds(r),GH.ChartFilters.setActiveSwimlaneIds(a),GH.ChartFilters.setActiveQuickFilterIds(l),GH.RapidBoard.State.pushState(),AJS.$(GH).trigger("chartFiltersChanged",{swimlanesChanged:i,quickFiltersChanged:e,columnsChanged:t}),GH.ChartFilters.updateFilterInfo(),s.current.hide())}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartFilters.soy' */
// This file was automatically generated from ChartFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartfilters == 'undefined') { GH.tpl.chartfilters = {}; }


GH.tpl.chartfilters.renderChartFilter = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy3 = ' ' + soy.$$escapeHtml('Chart is using non-default settings');
  var buttonText__soy6 = ' ' + soy.$$escapeHtml('Refine report');
  output += aui.buttons.button({id: ['js-chart-filter'], extraClasses: ['aui-button-icon', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: buttonText__soy6, iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-info', iconText: tooltip__soy3, iconType: 'aui'});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilter.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilter';
}


GH.tpl.chartfilters.renderChartFilters = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml('Report Filters') + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml('Columns') + '</h3><div class="ghx-group aui-buttons js-column-options">';
  var columnList22 = opt_data.columns;
  var columnListLen22 = columnList22.length;
  for (var columnIndex22 = 0; columnIndex22 < columnListLen22; columnIndex22++) {
    var columnData22 = columnList22[columnIndex22];
    if (columnData22.active) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy27 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy36 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml('Swimlanes') + '</h3><div class="ghx-group aui-buttons js-swimlane-options">';
  var swimlaneList46 = opt_data.swimlanes;
  var swimlaneListLen46 = swimlaneList46.length;
  for (var swimlaneIndex46 = 0; swimlaneIndex46 < swimlaneListLen46; swimlaneIndex46++) {
    var swimlaneData46 = swimlaneList46[swimlaneIndex46];
    if (swimlaneData46.active) {
      var buttonText__soy49 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy51 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy51], text: buttonText__soy49});
    } else {
      var buttonText__soy58 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy60 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy60], text: buttonText__soy58});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml('Quick Filters') + '</h3><div class="ghx-group aui-buttons js-quickfilter-options">';
  var quickFilterList70 = opt_data.quickFilters;
  var quickFilterListLen70 = quickFilterList70.length;
  for (var quickFilterIndex70 = 0; quickFilterIndex70 < quickFilterListLen70; quickFilterIndex70++) {
    var quickFilterData70 = quickFilterList70[quickFilterIndex70];
    if (quickFilterData70.active) {
      var buttonText__soy73 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy75 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy75], text: buttonText__soy73});
    } else {
      var buttonText__soy82 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy84 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy84], text: buttonText__soy82});
    }
  }
  output += '</div></fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml('Cancel') + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilters.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilters';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartTimeFrames.js' */
!function(){"use strict";var n=require("aui/inline-dialog");GH.ChartTimeFrames={},GH.ChartTimeFrames.day=864e5,GH.ChartTimeFrames.momentDateFormat="LL",GH.ChartTimeFrames.momentTimeFormat="LLL",GH.ChartTimeFrames.from=null,GH.ChartTimeFrames.to=null,GH.ChartTimeFrames.days=7,GH.ChartTimeFrames.now=(new Date).getTime(),GH.ChartTimeFrames.isRelative=!0,GH.ChartTimeFrames.minXValue=null,GH.ChartTimeFrames.chartId=null,GH.ChartTimeFrames.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartTimeFramesInlineDialog")},GH.ChartTimeFrames.isValidDate=function(e){function a(e){return 0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()}return a(Date.parseDate(e,GH.TimeFormat.dateFormat))&&a(Date.parseDate(e,GH.TimeFormat.dateFormat))},GH.ChartTimeFrames.getDateAsText=function(e){return new Date(e).print(GH.TimeFormat.dateFormat)},GH.ChartTimeFrames.roundMillisToNextDay=function(e){var a=GH.ChartTimeFrames.roundMillisToBeginOfDay(e),a=a<e?a+GH.ChartTimeFrames.day:a;return a},GH.ChartTimeFrames.roundMillisToBeginOfDay=function(e){return Math.floor(e/GH.ChartTimeFrames.day)*GH.ChartTimeFrames.day},GH.ChartTimeFrames.millisToDays=function(e){return e&&e/GH.ChartTimeFrames.day},GH.ChartTimeFrames.daysToMillis=function(e){return e&&e*GH.ChartTimeFrames.day},GH.ChartTimeFrames.timeFrames=[{relative:!0,days:7,name:"Past Week"},{relative:!0,days:14,name:"Past 2 Weeks"},{relative:!0,days:30,name:"Past Month"},{relative:!0,days:90,name:"Past 3 Months"},{relative:!0,days:180,name:"Past 6 Months"},{relative:!0,days:0,name:"All Time"},{relative:!1,days:-1,name:"Custom"}],GH.ChartTimeFrames.getSelectedTimeFrame=function(){for(var e=0;e<GH.ChartTimeFrames.timeFrames.length;e++){if(!GH.ChartTimeFrames.isRelative&&!GH.ChartTimeFrames.timeFrames[e].relative)return GH.ChartTimeFrames.timeFrames[e];if(GH.ChartTimeFrames.timeFrames[e].days==GH.ChartTimeFrames.days)return GH.ChartTimeFrames.timeFrames[e]}return!1},GH.ChartTimeFrames.getChartStartDate=function(){var e=GH.ChartTimeFrames.day;if(GH.ChartTimeFrames.isRelative){if(0!=GH.ChartTimeFrames.days)return GH.ChartTimeFrames.now-GH.ChartTimeFrames.days*e;var a=GH.ChartTimeFrames.minXValue,e=GH.ChartTimeFrames.now-+e;return a=!a||e<a?e:a}return GH.ChartTimeFrames.from},GH.ChartTimeFrames.getChartEndDate=function(){GH.ChartTimeFrames.day;return GH.ChartTimeFrames.isRelative?GH.ChartTimeFrames.now:GH.ChartTimeFrames.to},GH.ChartTimeFrames.update=function(){var e=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),a=(new Date).getTime(),a=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from",a),t=(new Date).getTime()-7*GH.ChartTimeFrames.day,t=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to",t);GH.ChartTimeFrames.setNewChartLimits(e,a,t,!0)},GH.ChartTimeFrames.setBoundaries=function(e,a){GH.ChartTimeFrames.now=a,GH.ChartTimeFrames.minXValue=e||a-7*GH.ChartTimeFrames.day,GH.ChartTimeFrames.updateDatesInfo()},GH.ChartTimeFrames.updateDialogFromAndToDates=function(e){var a,t=e.find(".js-timeframe-button.active").attr("data-timeframe-id");-1!=t&&(a=GH.ChartTimeFrames.now,t=0<t?a-t*GH.ChartTimeFrames.day:GH.ChartTimeFrames.minXValue,t=new Date(t).print(GH.TimeFormat.dateFormat),a=new Date(a).print(GH.TimeFormat.dateFormat),e.find("#ghx-field-from").val(t),e.find("#ghx-field-to").val(a))},GH.ChartTimeFrames.updateDatesInfo=function(){var e=GH.ChartTimeFrames.getSelectedTimeFrame();e.relative&&(GH.ChartTimeFrames.to=GH.ChartTimeFrames.now,0<e.days?GH.ChartTimeFrames.from=GH.ChartTimeFrames.to-e.days*GH.ChartTimeFrames.day:GH.ChartTimeFrames.from=GH.ChartTimeFrames.minXValue);var a=new Date(GH.ChartTimeFrames.from).print(GH.TimeFormat.dateFormat),t=new Date(GH.ChartTimeFrames.to).print(GH.TimeFormat.dateFormat),e=AJS.format("{0} to {1} ({2})",a,t,e.name);AJS.$(".js-timeframe-info").text(e)},GH.ChartTimeFrames.setNewChartLimits=function(e,a,t,r){e<0?(GH.ChartTimeFrames.from=a,GH.ChartTimeFrames.to=t,GH.ChartTimeFrames.isRelative=!1,GH.ChartTimeFrames.days=-1):(GH.ChartTimeFrames.isRelative=!0,GH.ChartTimeFrames.days=e),GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",GH.ChartTimeFrames.days),GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",a),GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",t),GH.ChartTimeFrames.updateDatesInfo(),r||AJS.$(GH).trigger("chartTimeFramesChanged")},GH.ChartTimeFrames.initializeDialog=function(e){AJS.$("#inline-dialog-chartTimeFramesInlineDialog").remove(),GH.ChartTimeFrames.chartId=e;n("#js-chart-timeframe","chartTimeFramesInlineDialog",GH.ChartTimeFrames.renderChartTimeFramesDialog,{width:710,cacheContent:!1,hideDelay:6e4})},GH.ChartTimeFrames.renderChartTimeFramesDialog=function(a,e,t){var r=GH.ChartTimeFrames.from?new Date(GH.ChartTimeFrames.from).print(GH.TimeFormat.dateFormat):"",i=GH.ChartTimeFrames.to?new Date(GH.ChartTimeFrames.to).print(GH.TimeFormat.dateFormat):"",m=!1;GH.ChartTimeFrames.chartId==GH.CFDController.id?m="Alternatively, click and drag cursor across chart to select date range (double-click overview to reset).":GH.ChartTimeFrames.chartId==GH.Reports.ControlChartController.id&&(m="Alternatively, click and drag cursor across chart to select date range (double-click to reset)."),a.html(GH.tpl.charttimeframes.renderChartTimeFrames({timeFrames:GH.ChartTimeFrames.timeFrames,relative:GH.ChartTimeFrames.isRelative,days:GH.ChartTimeFrames.days,from:r,to:i,desc:m})),a.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),GH.ChartTimeFrames.updateDialogFromAndToDates(a);function s(e){e.hasClass("disabled")||(a.find(".js-timeframe-button").removeClass("active"),e.addClass("active"),GH.ChartTimeFrames.updateDialogFromAndToDates(a))}a.find(".js-timeframe-button").click(function(e){e.preventDefault(),s(AJS.$(this))}),Calendar.setup({firstDay:0,inputField:"ghx-field-from",button:"ghx-field-from-button",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers,showsTime:!1,onUpdate:function(){s(a.find('.js-timeframe-button[data-timeframe-id="-1"]'))}}),Calendar.setup({firstDay:0,inputField:"ghx-field-to",button:"ghx-field-to-button",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers,showsTime:!1,onUpdate:function(){s(a.find('.js-timeframe-button[data-timeframe-id="-1"]'))}}),a.find(".js-save-button").click(function(e){e.preventDefault(),GH.ChartTimeFrames.handleDialogSave(a)}),a.find(".js-cancel-button").click(function(e){n.current.hide()}),t()},GH.ChartTimeFrames.handleDialogSave=function(e){var a=e.find(".js-timeframe-button.active"),t=parseInt(a.attr("data-timeframe-id"),10),r=null,i=null;if(e.find(".ghx-error").remove(),t<0){if(!(m=e.find("#ghx-field-from").val())||!GH.ChartTimeFrames.isValidDate(m))return void e.find("#ghx-field-from").closest(".field-group").append('<div class="ghx-error">'+"From-date required"+"</div>");var m=Date.parseDate(m,GH.TimeFormat.dateFormat),a=e.find("#ghx-field-to").val();if(!a||!GH.ChartTimeFrames.isValidDate(a))return void e.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"To-date required"+"</div>");if(a=Date.parseDate(a,GH.TimeFormat.dateFormat),m.getTime()>a.getTime())return void e.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"From-date must be before to-date"+"</div>");r=m.getTime(),i=a.getTime()}GH.ChartTimeFrames.setNewChartLimits(t,r,i),GH.RapidBoard.State.pushState(),n.current&&n.current.hide()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartTimeFrames.soy' */
// This file was automatically generated from ChartTimeFrames.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttimeframes.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttimeframes == 'undefined') { GH.tpl.charttimeframes = {}; }


GH.tpl.charttimeframes.renderChartTimeFrame = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: ['js-chart-timeframe'], extraClasses: ['aui-button-subtle', 'ghx-dropdown-trigger', 'js-timeframe-info', 'ghx-pull-left'], text: ''});
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrame.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrame';
}


GH.tpl.charttimeframes.renderChartTimeFrames = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml('Report Timeframe') + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml('Timeframe') + '</h3><div class="ghx-group aui-buttons js-timeframe-options">';
  var timeFrameList13 = opt_data.timeFrames;
  var timeFrameListLen13 = timeFrameList13.length;
  for (var timeFrameIndex13 = 0; timeFrameIndex13 < timeFrameListLen13; timeFrameIndex13++) {
    var timeFrameData13 = timeFrameList13[timeFrameIndex13];
    if (timeFrameData13.days == opt_data.days) {
      var buttonText__soy16 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy18 = 'js-timeframe-button active';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy18], text: buttonText__soy16});
    } else if (timeFrameData13.disabled) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy27 = 'js-timeframe-button disabled';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy36 = 'js-timeframe-button';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><div class="field-group"><label for="ghx-field-from">' + soy.$$escapeHtml('From') + '</label><input class="text medium-field" type="text" id="ghx-field-from" value="' + soy.$$escapeHtml(opt_data.from) + '"><span id="ghx-field-from-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div><div class="field-group"><label for="ghx-field-to">' + soy.$$escapeHtml('To') + '</label><input class="text medium-field" type="text" id="ghx-field-to" value="' + soy.$$escapeHtml(opt_data.to) + '"><span id="ghx-field-to-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div>' + ((opt_data.desc) ? '<div class="field-group"><div class="description">' + soy.$$escapeHtml(opt_data.desc) + '</div></div>' : '') + '</fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml('Cancel') + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrames.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrames';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/CFDController.js' */
define("jira-agile/rapid/ui/chart/cfd-controller",["require"],function(e){"use strict";var t=e("jquery"),i=e("jira/analytics/web-client"),a=e("jira-agile/rapid/analytics-tracker"),r=e("jira-agile/rapid/ui/chart/cfd-data"),n=e("jira-agile/rapid/ui/chart/cfd-view"),o=e("jira-agile/rapid/ui/chart/chart-controller"),d=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/ajax"),c=e("jira-agile/rapid/ui/chart/report-sla-tracker"),u=GH.ChartFilters,s=GH.ChartTimeFrames,p=GH.ChartUtils,h=GH.RapidBoard.State,C=GH.tpl,g={id:"cumulativeFlowDiagram",displayed:!1,rapidViewData:{},rapidViewConfig:{}};g.analytics=new a("gh.report.cumulativeFlowDiagram"),g.setRapidView=function(e){g.rapidViewData=e||{}},g.isApplicable=function(){return!h.isAgilityBoard()},g.getNormalizedFromInternal=function(){return p.getTimeFrameReportUrlParams(g.id)},g.toUrl=function(e){return p.timeFrameReportParamsToUrl(e)},g.updateInternalFromNormalized=function(e){p.updateFromNormalizedStateDateTimeParams(e)},g.getNormalizedFromUrl=function(e){return p.getNormalizedFromUrlForTimeFrameReport(e)},g.show=function(){var e;g.displayed=!0,g.rapidViewData&&(t(GH).unbind("."+g.id).bind("chartTimeFramesChanged."+g.id,g.handleChartTimeFramesChangedEvent).bind("chartFiltersChanged."+g.id,g.handleChartFiltersChangedEvent),n.show(),g.renderChartView(),e="show."+(g.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban"),g.analytics.trigger(e))},g.hide=function(){g.displayed=!1,n.hide(),t("#ghx-chart-controls").hide(),t(GH).unbind("."+g.id)},g.renderChartView=function(){g.initializeControls(),d.getChartContentElem(!0).html(C.chartview.renderChartBody()),d.showSpinner(),o.loadRapidViewConfig(g,g.loadChartData)},g.initializeControls=function(){d.hideChartControls(),d.getChartControls(!0).html(C.chartview.renderChartControls()),u.initializeDialog(),s.initializeDialog(g.id)};function m(e,t){c.checkReportAndFireSlaEvent(c.reportNames.cfd,t)}return g.loadChartData=function(){g.updateTools(),d.showChartControls();var e={rapidViewId:h.getRapidViewId()};u.addRequestParams(e),l.get({url:"/rapid/charts/cumulativeflowdiagram.json",data:e},"rapidChartData").done(g.processChartData).fail(m).always(function(){d.hideSpinner()})},g.updateTools=function(){s.update();var e=g.rapidViewConfig,t=g.buildChartFilterConfig(e);u.update(g.id,e,t),h.pushState()},g.buildChartFilterConfig=function(e){for(var t={defaultColumns:[]},i=0;i<e.columns.length;i++)t.defaultColumns.push(!0);return t},g.processChartData=function(e){g.displayed&&(r.setRawData(e),s.setBoundaries(e.firstChangeTime,e.now),n.renderChart(e),c.checkReportAndFireSlaEvent(c.reportNames.cfd),i.sendTrackEvent({source:"cumulativeFlowScreen",action:"viewed",actionSubject:"report",actionSubjectId:"cumulativeFlow",attributes:{boardId:g.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(!0),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile",appliedColumns:u.getActiveColumns().length,totalColumns:u.getColumns().length,quickfiltersAppliedCount:u.getActiveQuickFilterIds().length,swimlanesAppliedCount:u.getActiveSwimlaneIds().length}}))},g.handleChartFiltersChangedEvent=function(e,t){g.displayed&&(g.loadChartData(),g.fireQuickFilterToggledEvent())},g.handleChartTimeFramesChangedEvent=function(e){var t;g.displayed&&(t=r.getRawData(),n.renderChart(t))},g.fireQuickFilterToggledEvent=function(){var t=u.getActiveQuickFilterIds(),e=GH.ChartFilters.rapidViewConfig.quickFilters.filter(function(e){return-1<t.indexOf(e.id)}).map(function(e){return e.query});0<e.length&&i.sendTrackEvent({source:"cumulativeFlowScreen",actionSubject:"quickFilter",actionSubjectId:"applyQuickfilter",action:"applied",attributes:{boardId:g.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),quickFiltersAppliedCount:e.length,onlyMyIssuesQuickFilterApplied:-1<e.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY),recentlyUpdatedQuickFilterApplied:-1<e.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY),customQuickFilterApplied:e.some(function(e){return e!==GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY&&e!==GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY})}})},g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/CFDData.js' */
define("jira-agile/rapid/ui/chart/cfd-data",["require"],function(n){"use strict";var e=n("jquery"),l=n("underscore"),i=AJS.escapeHtml,t={raw:{},getRawData:function(){return t.raw},setRawData:function(n){t.raw=n},computeSeries:function(n,u){var a=[],e=n.columnChanges,t=n.columns;l.each(t,function(n){n.issueCount=0,n.data=[]}),l.each(e,function(n,e){e=parseInt(e,10),l.each(n,function(a){l.each(t,function(n,u){a.columnFrom==u&&n.issueCount--,a.columnTo==u&&n.issueCount++,n.data.push([e,n.issueCount])})})});for(var o=t.length-1;0<=o;o--){var c=t[o],r=c.data;0<r.length&&r[r.length-1][0]<u&&r.push([u,r[r.length-1][1]]),a.push({data:r,label:i(String(c.name)),columnIndex:o})}return a},getChangeDetails:function(n){var u=t.raw,a=[];return l.each(u.columnChanges[n],function(n){null!=(n=e.extend(!0,{},n)).columnFrom&&(n.columnFrom=u.columns[n.columnFrom].name),null!=n.columnTo&&(n.columnTo=u.columns[n.columnTo].name),a.push(n)}),a},isRealDatapoint:function(n,u){n=t.raw.columnChanges[n];return l.any(n,function(n){return u==n.columnTo})}};return t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/CFDView.js' */
define("jira-agile/rapid/ui/chart/cfd-view",["require"],function(e){"use strict";var v,p,c=e("jquery"),r=e("underscore"),h=e("jira-agile/rapid/ui/chart/chart"),u=e("jira-agile/rapid/ui/chart/chart-view");e("jira-agile/rapid/global-events").on("pre-initialization",function(){v=e("jira-agile/rapid/ui/chart/cfd-controller"),p=e("jira-agile/rapid/ui/chart/cfd-data")});var g=GH.ChartFilters,x=GH.ChartTimeFrames,o=GH.TimeFormat,f=GH.FlotChartUtils,a=GH.tpl,C={COLUMN_COLORS:["#FF800D","#23819C","#9669FE","#59955C","#B9264F","#B05F3C","#2966B8","#9A03FE","#FF2626","#FF5353","#C8B400","#79FC4E","#8C8CFF","#C48484","#4FBDDD","#FFBE28","#99C7FF","#AE70ED","#FFA8A8","#DAAF85"],context:{},previousPlotHoverPoint:null,init:function(){},show:function(){c(GH).unbind(h.EVENT_RESIZE_REDRAW+"."+v.id),c(GH).bind(h.EVENT_RESIZE_REDRAW+"."+v.id,function(e,t){t.id===v.id&&(C.resetRealPoints(),C._reverseLegendTable())})},hide:function(){c(GH).unbind(h.EVENT_RESIZE_REDRAW+"."+v.id),h.destroy(v.id+"Overview"),h.destroy(v.id)},renderChart:function(e){h.destroy(v.id+"Overview"),h.destroy(v.id);var t=x.getChartStartDate(),i=x.getChartEndDate(),n=p.computeSeries(e,e.now),o=C.getColors(g.getColumns(),g.getActiveColumns()),a={colors:o,xaxis:{mode:"time",min:t,max:i},yaxis:{tickDecimals:0,minTickSize:1,min:0,tickLength:"full"},series:{stack:!0,lines:{show:!0,fill:1,lineWidth:1}},grid:{hoverable:!0,clickable:!0,autoHighlight:!1},mouseEnterExitEvents:!0,selection:{mode:"x"},legend:{container:null,backgroundOpacity:.5,position:"nw"}},r={colors:o,xaxis:{mode:"time"},yaxis:{show:!1},series:{stack:!0,lines:{show:!0,fill:1,lineWidth:1}},selection:{mode:"x"},legend:{show:!1}};u.hideChartStatus(),u.showChartGroup(),f.setAndAlignAxisLabels("Time","Number of Issues");var s=u.getChartView(!0),l=c("#ghx-chart-overview-group"),d=c("#ghx-chart-overview"),e=c(l).find("h4"),o=c(l).find(".ghx-description");c(e).text("Overview"),c(o).text("Click and drag cursor across chart or chart overview to select date range (double-click overview to reset)."),e.show(),o.show(),s.show(),l.show();l=C.context={chartContainer:s,series:n,options:a,realPoints:[],showPoints:!1};s.unbind("plothover plotselected"),s.bind("plotselected",C.handleSelection),s.bind("plothover",C.handlePlotHover),l.mainChart=h.draw(v.id,s,n,a),s.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter",C.handleMouseEnter).bind("flotMouseLeave",C.handleMouseLeave),l.mainChart.hooks.drawSeries.push(C.gatherPoints),l.mainChart.hooks.draw.push(C.deferredRenderPoints),C._reverseLegendTable(),d.unbind("plotselected dblclick"),d.bind("plotselected",C.handleSelection),d.bind("dblclick",C.resetSelection),l.overviewChart=h.draw(v.id+"Overview",d,n,r),l.overviewChart.setSelection({xaxis:{from:t,to:i}},!0)},getColors:function(e,i){var n=[];return r.each(e,function(t,e){r.any(i,function(e){return e.id==t.id})&&n.push(C.COLUMN_COLORS.slice(e))}),n.reverse()},_reverseLegendTable:function(){var e=u.getChartView().find(".legend").find("tbody");e.children().each(function(){e.prepend(c(this))})},updateTimeFrameSelection:function(){var e=x.getChartStartDate(),t=x.getChartEndDate(),i=C.context;i.options.xaxis.min=e,i.options.xaxis.max=t,0!=x.getSelectedTimeFrame().days&&i.overviewChart.setSelection({xaxis:{from:e,to:t}},!0),i.mainChart=h.draw(v.id,i.chartContainer,i.series,i.options),C._reverseLegendTable()},handleSelection:function(e,t){var i=t.xaxis.from,t=t.xaxis.to;x.setNewChartLimits(-1,i,t)},resetSelection:function(e){var t=C.context.overviewChart.getXAxes()[0];x.setNewChartLimits(-1,t.min,t.max)},handlePlotHover:function(e,t,i){i?i.dataIndex!=C.previousPlotHoverPoint&&C.isRealPoint(i)&&(c("#ghx-tooltip").remove(),C.previousPlotHoverPoint=i.dataIndex,C.renderTooltip(i.datapoint[0],i.pageX,i.pageY)):(c("#ghx-tooltip").remove(),C.previousPlotHoverPoint=null)},isRealPoint:function(e){var i=e.series.xaxis,n=e.series.yaxis,o=i.p2c(e.datapoint[0]),a=n.p2c(e.datapoint[1]);return r.any(C.context.realPoints,function(e){var t=i.p2c(e.time),e=n.p2c(e.issueCount);return Math.abs(o-t)<1&&Math.abs(a-e)<1})},handleMouseEnter:function(e){var t=C.context;t.showPoints||(t.showPoints=!0,t.realPoints=[],t.mainChart.draw())},handleMouseLeave:function(e){var t=C.context;t.showPoints&&(t.showPoints=!1,t.mainChart.draw())},renderTooltip:function(e,t,i){var n=new Date(e),n=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()),e=p.getChangeDetails(e),e=c(a.chartview.renderCfdTooltip({changes:e,time:n.print(o.dateTimePickerFormat)})).css({position:"absolute",display:"none",top:i+5});e.appendTo("body");n=e.width(),i=c("#ghx-chart-view canvas.base");t+n>i.offset().left+i.width()?e.css({left:t-(30+n)}):e.css({left:t+15}),e.fadeIn(200)},resetRealPoints:function(e,t){C.context.realPoints=[]},gatherPoints:function(e,t,i){if(v.displayed&&C.context.showPoints)for(var n=i.datapoints,o=n.points,a=n.pointsize,r=i.xaxis,s=i.yaxis,l=0;l<o.length;l+=a){var d,c,h=o[l],u=o[l+1];p.isRealDatapoint(h,i.columnIndex)&&(null==h||h<r.min||h>r.max||u<s.min||u>s.max||(d=r.p2c(h),c=s.p2c(u),C.context.realPoints.push({x:d,y:c,time:h,issueCount:u})))}},deferredRenderPoints:function(e,t){v.displayed&&C.context.showPoints&&(t.save(),t.translate(e.getPlotOffset().left,e.getPlotOffset().top),t.strokeStyle="rgb(100, 100, 100)",t.fillStyle="rgba(255, 255, 255, 0.5)",r.each(C.context.realPoints,function(e){f.drawPoint(t,e)}),t.restore())}};return c(C.init),C});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-controller",["require"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),r=e("jira-agile/rapid/analytics-tracker"),n=e("jira-agile/rapid/ui/chart/burndown-chart-view"),a=e("jira-agile/rapid/ui/chart/burndown-report-chart-controller"),d=e("jira-agile/rapid/ui/chart/chart"),s=e("jira-agile/rapid/ui/component/chart-picker"),o=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/ui/component/estimate-picker"),c=e("jira-agile/rapid/ajax"),p=GH.RapidBoard.State,u=GH.RapidBoard.UrlState,m={id:"burndownChart",displayed:!1,rapidViewId:void 0};return m.analytics=new r("gh.report.burndownChart"),m.setRapidView=function(e){m.rapidViewId=e.id,a.setRapidView(e.id)},m.getNormalizedFromInternal=function(){return{sprint:m.getSprintIdForUrl()||null,estimate:m.getEstimateIdForUrl()||null}},m.getSprintIdForUrl=function(){var e=m.sprintPicker.getSelectedItem();if(e)return e.id;e=m.sprintPicker.getStoredSelectedItemId();return-1!==e?e:null},m.getEstimateIdForUrl=function(){var e=m.estimatePicker.getStoredSelectedItemId();return-1!==e?e:null},m.toUrl=function(e){var t={};return null!==e.sprint&&(t.sprint=e.sprint),null!==e.estimate&&(t.estimate=e.estimate),t},m.updateInternalFromNormalized=function(e){m.setSelectedSprintFromUrlState(e.sprint),m.setSelectedEstimateFromUrlState(e.estimate)},m.setSelectedSprintFromUrlState=function(e){e&&m.sprintPicker.storeSelectedItemId(e)},m.setSelectedEstimateFromUrlState=function(e){e&&m.estimatePicker.storeSelectedItemId(e)},m.getNormalizedFromUrl=function(e){return{sprint:u.normalizeNumberParam(e.sprint,null),estimate:u.normalizeStringParam(e.estimate,null)}},m.isApplicable=function(e){return e.sprintSupportEnabled&&!p.isAgilityBoard()},m.init=function(){m.sprintPicker=new s("burndown.selectedSprintId"),m.estimatePicker=new l("burndown.selectedEstimate",!0)},m.show=function(){var e;m.displayed=!0,a.show(),m.rapidViewId&&(e="."+m.id,t(GH).unbind(e),t(GH).bind(d.EVENT_RESIZE_REDRAW+e,m.handleResizeEvent),m.loadChart(),m.analytics.trigger("show"))},m.hide=function(){a.hide(),m.displayed=!1,t(GH).unbind("."+m.id),d.destroy(n.id),t(GH).unbind("."+m.id)},m.loadChart=function(){n.renderChartLoading(),t(m.sprintPicker).bind("selectedItemChanged",m.handleSprintChanged),a.setNonWorkingDaysShown(p.getNonWorkingDaysShown("burndown"));var e=m.rapidViewId;m.loadSprintOptions(e).done(function(e){m.processSprintsData(e),e.sprints&&0<e.sprints.length&&m.estimatePicker.load(m.rapidViewId,m.handleEstimateChanged).done(function(){var e=m.sprintPicker.getSelectedItem(),t=m.estimatePicker.getSelectedItem();e?(a.setSprint(e),a.setEstimationStatistic(t.id),a.loadChartData()):o.hideSpinner()})})},m.loadSprintOptions=function(e){return c.get({url:"/sprintquery/"+e,data:{includeFutureSprints:!1}},"sprintOptions")},m.processSprintsData=function(e){m.displayed&&(e.sprints.reverse(),m.sprintPicker.setItems(e.sprints),m.sprintPicker.setDefaultItem(m.getDefaultSprintForPicker(e.sprints)),n.renderAndShowSprintPicker(),e.sprints&&0!==e.sprints.length||(m.estimatePicker.shouldRender=!1),p.replaceState())},m.handleSprintChanged=function(){m.displayed&&(p.pushState(),a.setSprint(m.sprintPicker.getSelectedItem()),a.loadChartData())},m.getDefaultSprintForPicker=function(e){var t=i.filter(e,function(e){return!e.closed});return 0<t.length?i.first(t):i.first(e)},m.handleEstimateChanged=function(e){m.displayed&&(p.pushState(),a.setEstimationStatistic(e),a.loadChartData())},m.handleResizeEvent=function(e,t){t.id===m.id&&(t.chart.realPointsPerSeries={},setTimeout(n.addNonWorkingDaysToLegend,0))},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownReportChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-report-chart-controller",["require"],function(i){"use strict";var t=i("jira-agile/rapid/ui/chart/burndown-chart-model"),r=i("jira-agile/rapid/ui/chart/burndown-chart-view"),a=i("jira-agile/rapid/ui/chart/chart-view"),e=i("jira-agile/rapid/ajax"),n=i("jira-agile/rapid/ui/chart/report-sla-tracker"),o=i("jira/util/safe-logger"),d={displayed:!1,rapidViewId:void 0,sprint:void 0,estimationStatisticId:void 0,nonWorkingDaysShown:void 0,setRapidView:function(i){d.rapidViewId=i},setSprint:function(i){d.sprint=i},setEstimationStatistic:function(i){d.estimationStatisticId=i},show:function(){d.displayed=!0},hide:function(){d.displayed=!1},setNonWorkingDaysShown:function(i){d.nonWorkingDaysShown=i},loadChartData:function(){if(d.sprint){var i={rapidViewId:d.rapidViewId,sprintId:d.sprint.id,statisticFieldId:d.estimationStatisticId},r=(new Date).getTime(),a=null;return e.get({url:"/rapid/charts/scopechangeburndownchart.json",data:i},"rapidChartData").done(function(i){a=(new Date).getTime();try{d.processChartData(i)}catch(i){o.safeError("burndown","Error processing chart data",i)}}).fail(function(i,t){return null==a&&(a=(new Date).getTime()),s(i,t,a-r)})}}},s=function(i,t,r){n.checkReportAndFireSlaEvent(n.reportNames.burndown,t,{requestTime:r,rapidViewId:d.rapidViewId,sprintId:d.sprint.id,statisticFieldId:d.estimationStatisticId}),a.hideSpinner()};return d.processChartData=function(i){d.displayed&&(t.setRawData(i),r.setNonWorkingDaysShown(d.nonWorkingDaysShown),r.gadgetMode||r.wallboardMode||(a.getChartGroup().find(".ghx-sprint-goal").remove(),a.getChartGroup().prepend(GH.tpl.board.x.renderSprintGoal({goal:d.sprint.goal}))),r.showChart(),n.checkReportAndFireSlaEvent(n.reportNames.burndown))},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownChartModel.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-model",["require"],function(e){"use strict";var n,a,c=e("underscore"),o=e("jira-agile/rapid/ui/chart/burndown-chart-view"),r=e("jira-agile/rapid/ui/chart/burndown-rate"),d=e("jira-agile/rapid/ui/chart/chart-colors"),t=e("jira-agile/rapid/global-events"),s=GH.ChartUtils,i=GH.FlotChartUtils;t.on("pre-initialization",function(){n=e("jira-agile/rapid/ui/chart/burndown-table-producer"),a=e("jira-agile/rapid/ui/chart/burndown-timeline-producer")});var g={rawData:{},tableHandler:{},timelineData:{},series:[],seriesData:{},yAxisData:{},dataTable:{},setRawData:function(e){g.rawData=e,r.setRateData(e.workRateData),g.prepareData()},getStatistic:function(){return g.rawData.statisticField},isTimeTracking:function(){return"timeestimate"===g.getStatistic().fieldId},getParentIssueKey:function(e){return!c.isUndefined(g.rawData.issueToParentKeys)&&g.rawData.issueToParentKeys[e]||!1},prepareData:function(){var e=g.isTimeTracking();g.tableHandler=e?n.TimeTrackingTableHandler:n.EstimateStatisticTableHandler;var t=s.getStatisticConsumer(e);g.timelineData=a.calculateTimelineData(g.rawData,t),g.calculateSeries();e=g.rawData.lastUserWhoClosedHtml,e=n.getDataTable(g.timelineData,g.tableHandler,t,e);g.renderDataTableValues(e),g.dataTable=e},getChartStartTime:function(){return g.timelineData.startTime},calculateGuidelineSeries:function(a){var i=a.startValue,e=r.getRateDefinitions(),e=r.limitToTimeRange(e,a.startTime,a.endTime),n=g.calculateTimePerUnit(e,i),e=[[a.startTime,a.startValue]].concat(c.map(e,function(e){var t;return e.rate===r.WORKING_DAY&&(t=e.start-e.end,i-=t/n),[c.min([e.end,a.endTime]),c.max([i,0])]}));return{id:"guideline",data:e=c.reject(e,function(e){return 0===e.length}),color:"#999",label:"Guideline"}},calculateTimePerUnit:function(e,t){e=r.limitToWorkingDays(e);return c.reduce(e,function(e,t){return e+(t.start-t.end)},0)/t},calculateSeries:function(){var e,t,a,i,n,r,s,l=g.timelineData,u=l.timeline;c.isEmpty(u)||(e=u[0],(t=[]).push(g.calculateGuidelineSeries({startTime:l.startTime,startValue:e.values.estimate,endTime:l.endTime})),a=["estimate"],g.isTimeTracking()&&a.push("timeSpent"),i={},n={},c.each(a,function(e){i[e]=[],n[e]=[]}),c.each(u,function(t){t.openCloseEntries||c.each(a,function(e){t.deltas&&c.isNumber(t.deltas[e])&&0!==t.deltas[e]&&(i[e].push([t.time,t.values[e]-t.deltas[e]]),n[e].push({})),i[e].push([t.time,t.values[e]]),n[e].push(t)})}),l.completeTime||(r=c.last(u),c.each(a,function(e){i[e].push([Math.max(l.startTime,l.now),r.values[e]])})),g.isTimeTracking()&&t.push({id:"timeSpent",data:i.timeSpent,color:"#14892c",label:"Time Spent"}),t.push({id:"estimate",data:i.estimate,color:"#d04437",label:"Remaining Values"}),u=o.wallboardMode?d.nonWorkingDaysWallboard:d.nonWorkingDays,t.push({id:"markings",color:u,data:[],label:"Non-Working Days"}),s=0,c.each(a,function(e){s=Math.max(s,l.maxValues[e]||0)}),g.calculateYAxis(s),g.series=t,g.seriesData=n)},calculateYAxis:function(e){g.yAxisData=i.calculateYAxis(e,g.getStatistic())},getDataTable:function(){return g.dataTable},getSeries:function(){return g.series},getYAxis:function(){return g.yAxisData},getDataBySeries:function(e){return g.seriesData[e]},getDataBySeriesAtIndex:function(e,t){if(g.seriesData[e])return g.seriesData[e][t]},getStatisticDefinitionForSeries:function(t){var e=g.getStatisticDefinitions();return c.find(e,function(e){return t===e.valueId})},getStatisticDefinitions:function(){return g.dataTable.statistics},getWarning:function(){return g.rawData.warningMessage},isEmpty:function(){return 0===Object.keys(g.rawData.changes).length},renderDataTableValues:function(e){var i="";c.each(e.rows,function(t){var e,a=s.renderUTCMillisAsDate(t.time);t.recordedTime&&(e=s.renderUTCMillisAsDate(t.recordedTime)),a===i&&!e||(t.dateString=a,t.recordedDateString=e,i=a),t.valuesText={},c.each(c.keys(t.values),function(e){t.valuesText[e]=g.renderStatisticText(t.values[e])}),t.initial||t.complete?(c.each(t.issues,function(t){t.valuesText={},c.each(c.keys(t.values),function(e){t.valuesText[e]=g.renderStatisticText(t.values[e])}),t.parentKey=g.getParentIssueKey(t.key)}),t.issues=c.sortBy(t.issues,function(e){return e.parentKey||e.key})):t.openClose||(t.deltasType={},t.deltasText={},c.each(c.keys(t.deltas),function(e){t.deltasText[e]=g.renderStatisticText(t.deltas[e],!0),t.deltasType[e]=t.deltas[e]<0?"dec":"inc"}),t.parentKey=g.getParentIssueKey(t.key))})},renderStatisticText:function(e,t){return s.renderStatisticText(e,t,g.getStatistic().renderer)},getTooltipData:function(e,t){var t=t,a={},i=g.getStatisticDefinitionForSeries(e);return a.statistic=i,t.initial||t.complete?(t.initial?(a.initial=!0,a.event=n.getSprintStartChangeEvent()):(a.complete=!0,a.event=n.getSprintCompleteChangeEvent()),a.issueCount=c.size(t.issues),a.statisticName=i.name,a.statisticValue=g.renderStatisticText(t.values[i.valueId])):(a.changes=[],c.each(t.issues,function(e){var t={};t.key=e.key,t.statisticName=i.name,t.statisticDelta=g.renderStatisticText(e.deltas[i.valueId]),t.event=g.tableHandler.getChangeEvent(e),a.changes.push(t)})),a.dateText=s.renderUTCMillisAsDate(t.time),a},hasAnyWorkingDays:function(){return 0<r.getWorkingDays().length}};return g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownRate.js' */
define("jira-agile/rapid/ui/chart/burndown-rate",["require"],function(t){"use strict";var e=t("underscore"),a={WORKING_DAY:1,NON_WORKING_DAY:0,setRateData:function(t){a.rateData=t},getRateDefinitions:function(){return a.rateData.rates},getNonWorkingDays:function(){var t=a.getRateDefinitions();return a.limitToNonWorkingDays(t)},getWorkingDays:function(){var t=a.getRateDefinitions();return a.limitToWorkingDays(t)},limitToWorkingDays:function(t){return e.filter(t,function(t){return t.rate===a.WORKING_DAY})},limitToNonWorkingDays:function(t){return e.filter(t,function(t){return t.rate===a.NON_WORKING_DAY})},limitToTimeRange:function(t,n,r){t=e.reject(t,function(t){return r<t.start||t.end<n});return e.map(t,function(t){return{start:Math.max(n,t.start),rate:t.rate,end:Math.min(r,t.end)}})},isDateInNonWorkingBlock:function(t){for(var n=!1,r=a.getNonWorkingDays(),e=0;e<r.length;e++){var i=r[e];if(i.start<=t&&i.end>t){n=!0;break}}return n},getAdjustedNonWorkingDays:function(n){var t=a.getNonWorkingDays(),t=e.filter(t,function(t){return t.end>n});return e.map(t,function(t){return{moveTo:t.start===n?t.end:t.start,start:t.start,end:t.end}})}};return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownTableProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-table-producer",["require"],function(e){"use strict";var u=e("underscore"),h=e("jira-agile/rapid/ui/chart/burndown-chart-model"),p=e("jira-agile/rapid/ui/chart/burndown-timeline-producer"),l=GH.ChartUtils,t=GH.tpl,m={getDataTable:function(e,a,i,t){var r={rows:[],pastChangeRows:{},currentValues:[]};return u.each(e.timeline,function(n){var e;n.initial?(e={initial:!0,time:n.time,event:m.getSprintStartChangeEvent(),values:n.values,issues:n.issues},r.rows.push(e),r.currentValues=u.clone(n.values)):n.complete?(e={complete:!0,time:n.time,event:m.getSprintCompleteChangeEvent(t),values:n.values,issues:n.issues},r.rows.push(e)):n.openCloseInstances?u.each(n.openCloseInstances,function(e){r.rows.push({time:n.time,event:m.getSprintStateChangeEvent(e),openClose:!0,values:{}})}):u.each(n.issues,function(e){p.addStatisticValueDeltas(e.deltas,r.currentValues,1,i);var t={time:n.time,key:e.key,deltas:e.deltas,values:u.clone(r.currentValues)};t.event=a.getChangeEvent(e),a.addAdditionalRowInformation(r,n,e,t),r.rows.push(t)})}),{statistics:a.getStatisticDefinitions(),rows:r.rows}},getSprintStartChangeEvent:function(){return{type:"Sprint start",detail:""}},getSprintCompleteChangeEvent:function(e){return{type:t.burndownchart.renderSprintCompleteEventType({closingUserHtml:e}),typeAsHtml:!0,detail:""}},getSprintReopenChangeEvent:function(e){return{type:GH.tpl.burndownchart.renderSprintReopenEventType({reopenUserHtml:e}),typeAsHtml:!0,detail:""}},getSprintStateChangeEvent:function(e){return"CLOSE"===e.operation?m.getSprintCompleteChangeEvent(e.user||e.userDisplayNameHtml):m.getSprintReopenChangeEvent(e.user||e.userDisplayNameHtml)},getSprintOrColumnChangeEvent:function(e,t){return e.scopeChange?e.inScope?{type:"Scope change",detail:"Issue added to sprint"}:{type:"Scope change",detail:"Issue removed from sprint"}:m.getColumnChangeEvent(e,t)},getColumnChangeEvent:function(e,t){return!!e.columnChange&&("notDone"===e.column?e.oldColumn?{type:t,detail:"Issue reopened"}:{type:"Scope change",detail:"Open issue moved into board (from an unmapped status)"}:"done"===e.column?e.oldColumn?{type:t,detail:"Issue completed"}:{type:"Scope change",detail:"Done issue moved into board (from an unmapped status)"}:"notDone"===e.oldColumn?{type:"Scope change",detail:"Open issue moved out of board (into an unmapped status)"}:{type:"Scope change",detail:"Done issue moved out of board (into an unmapped status)"})},TimeTrackingTableHandler:{getStatisticDefinitions:function(){var e=[{id:"timeSpent",name:"Time Spent",isSum:!0},h.getStatistic()];return e[0].valueId="timeSpent",e[1].valueId="estimate",e},addAdditionalRowInformation:function(n,e,t,a){var i;t.change&&t.change.timeC&&t.change.timeC.changeDate&&(i=t.change.timeC.changeDate,e.time-e.time%6e4!=i-i%6e4&&(a.recordedTime=i),n.pastChangeRows[t.key+"-"+i]=a);t=p.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(t,t.change);u.each(t,function(e){var t=n.pastChangeRows[e.issueKey+"-"+e.date];t&&(t.event.loggedNoteAdded||(t.event.loggedNoteAdded=!0,t.event.notes||(t.event.notes=[]),t.event.notes.push(AJS.format("Backdated event, recorded at {0}",l.renderUTCMillisAsDate(e.date)))))})},getChangeEvent:function(e){var t="Issue state change",n=m.getSprintOrColumnChangeEvent(e,t);if(n)return n;if(e.estimateChange||e.timeChange){var a=0,i=!1,r=0,d=!1,s=0,o=!1;e.timeChange&&(a=e.deltas.timeSpent,i=!0),e.estimateChange&&(s=e.values.estimate,r=e.values.estimate-e.deltas.estimate||0,d=!u.isUndefined(r),o=!u.isUndefined(s));t={};i?t.type="Work logged":(n="Remaining Time Estimate",g="RTE",t.type=AJS.format("{0} change",'<acronym title="'+n+'">'+g+"</acronym>"),t.typeAsHtml=!0);var g="",c=[];return i&&(g+=AJS.format("{0} logged",h.renderStatisticText(a))),(d||o)&&(r=d?h.renderStatisticText(r):"no value",s=o?h.renderStatisticText(s):"no value",g+=0<g.length?", ":"",g+=AJS.format("{0} changed from {1} to {2}",h.getStatistic().name,r,s),e=p.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(e,e.change),u.each(e,function(e){c.push(AJS.format("Includes {0} backdated to {1}, recorded at {2}",l.renderStatisticText(e.delta),l.renderUTCMillisAsDate(e.worklogDate),l.renderUTCMillisAsDate(e.date)))})),t.detail=g,t.notes=c,t}return{type:"unknown",detail:["unknown change"]}}},EstimateStatisticTableHandler:{getStatisticDefinitions:function(){var e=[h.getStatistic()];return e[0].valueId="estimate",e},addAdditionalRowInformation:function(e,t,n,a){},getChangeEvent:function(e){var t="Burndown",n=m.getSprintOrColumnChangeEvent(e,t);if(n)return n;if(e.estimateChange){var a=e.values.oldEstimateFieldValue,t=e.values.estimateFieldValue,n=!u.isUndefined(a),e=!u.isUndefined(t);return n&&e?{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",h.renderStatisticText(a),h.renderStatisticText(t))}:n?{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",h.renderStatisticText(a))}:{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",h.renderStatisticText(t))}}return{type:"unknown",detail:"unknown change"}}}};return m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownTimelineProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-timeline-producer",["require"],function(e){"use strict";var f=e("underscore"),g={calculateTimelineData:function(e,t){var a={timeline:[]};if(e.startTime===e.endTime)return a;var n=!f.isUndefined(e.completeTime)&&e.completeTime,t=g.calculateTimeline(e.startTime,n,e.changes,e.openCloseChanges,t,e.estimatableIssueKeys);return a.timeline=t.timeline,a.now=e.now,a.startTime=e.startTime,a.endTime=e.endTime,a.completeTime=n,a.maxValues=t.maxValues,a.statisticField=e.statisticField,a.finalIssueStates=t.issueState,a},calculateTimeline:function(e,t,a,n,s,i){var u={issueState:{},timeline:[],currentValues:{},maxValues:{},pastSprintStart:!1,statisticConsumer:s,estimatableIssueKeys:i};g.addStatisticValueDeltas({},u.currentValues,1,s);for(var r=f.keys(a),l=n?f.keys(n):[],o=0,m=0;m<r.length;m++){var c=r[m],d=parseInt(c,10);if(!u.pastSprintStart&&e<=d&&(g.addSprintStartTimelineEntry(u,e),u.pastSprintStart=!0),t&&t<d)break;var C=a[c],C=g.processTimeChanges(u,C,d);if(u.pastSprintStart&&C){if(0<l.length)for(var S=l[o];S<c;){var h=parseInt(S,10),p=n[S];g.addSprintStateChangeTimelineEntry(u,h,p),S=l[++o]}g.addChangeTimelineEntry(u,d,C.issues,C.deltas)}}return u.pastSprintStart||(g.addSprintStartTimelineEntry(u,e),u.pastSprintStart=!0),t&&g.addSprintCompleteTimelineEntry(u,t),u},processTimeChanges:function(s,e,i){var u={},r=[];return f.each(e,function(e){var t={},a=s.issueState[e.key];a||(a={key:e.key,isInChart:!1,burned:!1,values:{},estimatable:f.contains(s.estimatableIssueKeys,e.key)},s.issueState[e.key]=a),g.removeStatisticValues(a,t,s.statisticConsumer),g.removeStatisticValues(a,u,s.statisticConsumer),s.statisticConsumer.beforeProcessChange(a,i,e);var n=a.isInChart||!1;g.processInChartChanges(a,e),s.statisticConsumer.processChange(a,e),g.addStatisticValues(a,t,s.statisticConsumer),g.addStatisticValues(a,u,s.statisticConsumer),(n||a.isInChart)&&((t=g.getCurrentState(s,a,t)).change=e,r.push(t)),s.statisticConsumer.afterProcessChange(a,i,e)}),!f.isEmpty(r)&&(g.addStatisticValueDeltas(u,s.currentValues,1,s.statisticConsumer),{issues:r,deltas:u})},processInChartChanges:function(e,t){f.isUndefined(t.added)?e.scopeChange=!1:(e.inScope=t.added,e.scopeChange=!0),t.column?(!1===t.column.done&&(t.column.notDone=!0),!1===t.column.notDone&&(t.column.done=!0),t.column.notDone?(e.column="notDone",f.isBoolean(t.column.done)?e.oldColumn="done":e.oldColumn=void 0):t.column.done?(e.column="done",f.isBoolean(t.column.notDone)?e.oldColumn="notDone":e.oldColumn=void 0):(e.column=void 0,f.isBoolean(t.column.notDone)?e.oldColumn="notDone":e.oldColumn="done"),e.columnChange=!0):e.columnChange=!1,e.isInChart=!(!e.column||!e.inScope),e.burned="done"===e.column},addStatisticValues:function(e,t,a){e.isInChart&&g.addStatisticValueDeltas(e.values,t,1,a)},removeStatisticValues:function(e,t,a){e.isInChart&&g.addStatisticValueDeltas(e.values,t,-1,a)},addStatisticValueDeltas:function(t,a,n,e){n=n||1,f.each(e.dataFields,function(e){a[e]=(a[e]||0)+(t[e]||0)*n})},getMaxStatisticValues:function(t,a,e){var n={};return f.each(e.dataFields,function(e){n[e]=(t[e]>a[e]?t:a)[e]}),n},addChangeTimelineEntry:function(e,t,a,n){n={time:t,issues:a,values:f.clone(e.currentValues),deltas:n};e.timeline.push(n),e.maxValues=g.getMaxStatisticValues(e.maxValues,e.currentValues,e.statisticConsumer)},addSprintStateChangeTimelineEntry:function(e,t,a){e.timeline.push({time:t,issues:{},values:{},deltas:{},openCloseInstances:a})},addSprintStartTimelineEntry:function(e,t){e.statisticConsumer.beforeSprintStart(e);t=g.getTimelineEntryForCurrentState(e,t);t.initial=!0,e.timeline.push(t),e.maxValues=f.clone(e.currentValues)},addSprintCompleteTimelineEntry:function(e,t){t=g.getTimelineEntryForCurrentState(e,t);t.complete=!0,e.timeline.push(t)},getTimelineEntryForCurrentState:function(t,e){var a=[];return f.each(t.issueState,function(e){e.isInChart&&a.push(g.getCurrentState(t,e))}),{time:e,issues:a,values:f.clone(t.currentValues)}},getCurrentState:function(e,t,a){var n=f.clone(t);return n.values=f.clone(t.values),a&&(n.deltas=a,e.statisticConsumer.copyToCurrentState(n,t)),n},TimeTrackingStatisticConsumer:{dataFields:["estimate","timeSpent"],processChange:function(e,t){t.timeC&&(f.isUndefined(t.timeC.timeSpent)?e.timeChange=!1:e.isInChart&&(e.values.timeSpent=(e.values.timeSpent||0)+(t.timeC.timeSpent||0),e.timeChange=!0),f.isUndefined(t.timeC.newEstimate)?e.estimateChange=!1:(e.values.estimate=(e.values.estimate||0)+((t.timeC.newEstimate||0)-(t.timeC.oldEstimate||0)),e.estimateChange=!0))},beforeProcessChange:function(e,t,a){g.TimeTrackingStatisticConsumer.removeExpiredEstimateChanges(e,t)},afterProcessChange:function(e,t,a){g.TimeTrackingStatisticConsumer.addEstimateChange(e,t,a)},beforeSprintStart:function(e){f.each(e.issueState,function(e){f.isUndefined(e.values.timeSpent)||(e.values.timeSpent=0)}),e.maxValues.timeSpent=0,e.currentValues.timeSpent=0},copyToCurrentState:function(e,t){e.estimateDeltas=f.clone(t.estimateDeltas)},removeExpiredEstimateChanges:function(e,t){e.estimateDeltas||(e.estimateDeltas=[]),e.estimateDeltas=f.reject(e.estimateDeltas,function(e){return e.date<=t})},addEstimateChange:function(e,t,a){var n,s;e.estimateDeltas||(e.estimateDeltas=[]),a.timeC&&a.timeC.changeDate&&(n=a.timeC.changeDate,s=(a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0),e.estimateDeltas.push({worklogDate:t,date:n,issueKey:a.key,delta:s,change:a}))},getAffectingEstimateChanges:function(e,t){return t.timeC&&t.timeC.changeDate?f.filter(e.estimateDeltas,function(e){return t.timeC.changeDate<e.date}):[]}},EstimateStatisticConsumer:{dataFields:["realValue","estimate"],processChange:function(e,t){t.statC?(e.values.oldEstimateFieldValue=t.statC.oldValue,e.values.estimateFieldValue=t.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue&&0},beforeProcessChange:function(e,t,a){},afterProcessChange:function(e,t,a){},beforeSprintStart:function(e){},copyToCurrentState:function(e,t){}},ProgressConsumer:{dataFields:["issueCount","unestimatedIssueCount","totalEstimate","completedEstimate"],processChange:function(e,t){t.statC?(e.values.oldEstimateFieldValue=t.statC.oldValue,e.values.estimateFieldValue=t.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart?(e.values.issueCount=1,e.values.unestimatedIssueCount=e.estimatable&&f.isUndefined(e.values.estimateFieldValue)&&!e.burned?1:0,t=e.values.estimateFieldValue||0,e.values.totalEstimate=t,e.values.completedEstimate=e.burned?t:0):(e.values.issueCount=0,e.values.unestimatedIssueCount=0,e.values.totalEstimate=0,e.values.completedEstimate=0),e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue&&0},beforeProcessChange:function(e,t,a){},afterProcessChange:function(e,t,a){},beforeSprintStart:function(e){},copyToCurrentState:function(e,t){}}};return g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownChartView.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-view",["require"],function(r){"use strict";var t,i,e,n=r("jira/featureflags/feature-manager"),d=r("jquery"),s=r("underscore"),o=r("jira-agile/rapid/ui/chart/chart"),a=r("jira-agile/rapid/ui/chart/chart-colors"),l=r("jira-agile/rapid/ui/chart/chart-controller"),h=r("jira-agile/rapid/ui/chart/chart-view"),g=r("jira-agile/rapid/global-events"),c=r("jira-agile/rapid/ui/chart/non-working-days-util"),u=r("jira-agile/rapid/ui/SPConfigController"),p=r("jira/analytics/web-client"),w=GH.ChartTimeFrames,f=GH.ChartTooltip,k=GH.FlotChartUtils,b=GH.RapidBoard,C=GH.tpl;g.on("pre-initialization",function(){t=r("jira-agile/rapid/ui/chart/burndown-chart-controller"),i=r("jira-agile/rapid/ui/chart/burndown-chart-model"),e=r("jira-agile/rapid/ui/chart/report-controller")});var y={gadgetMode:!1,wallboardMode:!1,nonWorkingDaysShown:void 0,renderStats:!0,renderNonWorkingDayControls:!0,renderDataPoints:!0,setNonWorkingDaysShown:function(r){y.nonWorkingDaysShown=r},setGadgetMode:function(r){y.gadgetMode=r,y.renderStats=!r,y.renderNonWorkingDayControls=!r,y.renderDataPoints=!r},setWallboardMode:function(r){y.wallboardMode=r},renderChartLoading:function(){h.hideChartControls(),h.getChartContentElem(!0).html(C.burndownchart.renderChartBody()),h.showSpinner()},showWarning:function(r){AJS.$(C.burndownchart.renderWarningMessage({message:r})).prependTo("#ghx-chart-content"),h.hideSpinner()},showChart:function(){h.hideSpinner(),i.getWarning()&&y.showWarning(i.getWarning()),i.isEmpty()||(y.renderUI(),y.gadgetMode||y.sprintActions())},sprintActions:function(){e.renderSprintActions(h.getSprintActions(!0),b.State.getRapidViewId(),t.sprintPicker.getItems(),t.sprintPicker.getSelectedItem())},renderUI:function(){h.showChartGroup(),y.renderChart(),y.renderStats&&y.renderChartStats()},renderChartStats:function(){var r=i.getDataTable(),r=d(C.burndownchart.renderBurndownChartTable({statistics:r.statistics,rows:r.rows,isUseIssueHierarchyEnabled:n.isFeatureEnabled("safe.return-hierarchy-level-in-cbb")}));d("#ghx-chart-data").empty().append(r)},renderChart:function(){if(!i.hasAnyWorkingDays()){d("#ghx-chart-wrap").hide();var r=d("#ghx-chart-empty").html(C.burndownchart.renderNoWorkingDaysMessage({}));return r.find("a").click(function(r){r.preventDefault(),u.openConfig("time")}),void r.show()}d("#ghx-chart-empty").hide(),d("#ghx-chart-wrap").show(),y.nonWorkingDaysShown?y.renderChartWithNonWorkingDays():y.renderChartWithoutNonWorkingDays();r={attributes:{boardId:b.State.getRapidViewId(),boardType:"scrum",reportType:"agile",projectId:JIRA.API.Projects.getCurrentProjectId(!0),simplified:b.State.isAgilityBoard()},action:"viewed",actionSubject:"report",actionSubjectId:"burndownChart",source:"burndownChartScreen"};p.sendTrackEvent(r)},renderChartWithoutNonWorkingDays:function(){var r=i.getChartStartTime(),e=c.transformSeriesExcludingNonWorkingDays(i.getSeries(),r);y.showNotificationIfEmpty(e);r=y.getDefaultPlotOptions();r.xaxis.tickFormatter=function(r,e){var n=c.transformDateIfInNonWorkingDays(r,i.getChartStartTime()),r="%b %d";return"hour"===e.tickSize[1]&&(r+=" %h:%M"),d.plot.formatDate(n,r)},y.renderBurndownChart(e,r)},renderChartWithNonWorkingDays:function(){var r=i.getSeries();y.showNotificationIfEmpty(r);var e=y.getDefaultPlotOptions();e.grid.markings||(e.grid.markings=l.getNonWorkingBlocks),y.renderBurndownChart(r,e),y.renderNonWorkingDayControls&&y.addNonWorkingDaysToLegend()},renderBurndownChart:function(r,e){k.setAndAlignAxisLabels("Time",y.getYAxisLabel());var n=h.getChartView(!0),e=o.draw(t.id,n,r,e);y.renderDataPoints&&(e.hooks.drawSeries.push(y.gatherPoints),e.hooks.draw.push(k.deferredRenderPoints),y.bindEvents(n)),y.renderNonWorkingDayControls&&y.addNonWorkingDaysToLegend()},addNonWorkingDaysToLegend:function(){var r,e=h.getChartView().find(".legend").find("tbody");0===e.find("#ghx-chart-show-non-working-days").length&&(r=d(C.burndownchart.renderShowNonWorkingDaysOption({checked:y.nonWorkingDaysShown})),e.append(r),e.find("#ghx-chart-show-non-working-days").click(y.toggleNonWorkingDays))},toggleNonWorkingDays:function(){y.nonWorkingDaysShown=d("#ghx-chart-show-non-working-days").is(":checked"),b.State.setNonWorkingDaysShown("burndown",y.nonWorkingDaysShown),y.renderChart()},showNotificationIfEmpty:function(r){s.isEmpty(r)&&d(C.burndownchart.renderBurndownNoSprint()).css({"margin-top":"0px"}).prependTo("#ghx-chart-content")},renderAndShowSprintPicker:function(){t.sprintPicker.render(h.getChartSelector(!0)),h.showChartGroup()},getDefaultPlotOptions:function(){var r={xaxis:{mode:"time"},yaxis:i.getYAxis(),series:{points:{show:!1,radius:3,symbol:"circle"},lines:{show:!0}},grid:{hoverable:!0,clickable:!1,autoHighlight:!1},mouseEnterExitEvents:!0,legend:{container:null,backgroundOpacity:.5,position:"ne"}};return(y.gadgetMode||y.wallboardMode)&&(r.series={lines:{show:!0,lineWidth:y.wallboardMode?4:2},points:{show:!1},shadowSize:0},y.wallboardMode?r.grid={backgroundColor:a.wallboard.backgroundColor,borderWidth:1,borderColor:a.wallboard.borderColor,color:a.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:a.wallboard.tickColor,markings:y.getMarkingsForGadget}:r.grid={color:"#333",borderWidth:1,borderColor:"#999",tickColor:"#eee"}),r},getMarkingsForGadget:function(){var e=a.nonWorkingDaysWallboard,r=l.getNonWorkingBlocks();return s.map(r,function(r){return r.color=e,r})},bindEvents:function(r){r.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",k.handleMouseOverStateChange),r.unbind("plothover plotclick plotselected dblclick"),r.bind("plothover",y.handlePlotHover),r.bind("plotclick",k.handlePlotClick),r.bind("plotselected",y.handleRangeSelection),r.bind("dblclick",y.resetRangeSelection)},handlePlotHover:function(r,e,n){var t=d("#ghx-tooltip");if(n){var o=n.series.id,a=n.dataIndex,a=i.getDataBySeriesAtIndex(o,a);if(!s.isEmpty(a))return void(y.previousPlotHoverPoint!==n.dataIndex&&(y.previousPlotHoverPoint=n.dataIndex,t.remove(),y.showChartTooltip(n,o,a,n.datapoint[0]),t.hasClass("ghx-has-warnings")||h.getChartView().addClass("ghx-clickable")))}t.remove(),y.previousPlotHoverPoint=null,h.getChartView().removeClass("ghx-clickable")},previousPlotHoverPoint:void 0,roundDuration:function(r){return 0!==r?Math.round(10*r)/10:0},showChartTooltip:function(r,e,n){n&&(n=i.getTooltipData(e,n),new f(r,n).render())},gatherPoints:function(r,e,n){var t,o;r.mouseEntered&&(t=n.id,(o=i.getDataBySeries(t))&&(o=k.gatherPoints(n,o),r.realPointsPerSeries[t]=o))},getYAxisLabel:function(){return i.getStatistic().name},handleRangeSelection:function(r,e){var n=e.xaxis.from,e=e.xaxis.to;w.setNewChartLimits(-1,n,e)},resetRangeSelection:function(r){w.setNewChartLimits(0,0,0)}};return y});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownChart.soy' */
// This file was automatically generated from BurndownChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.burndownchart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.burndownchart == 'undefined') { GH.tpl.burndownchart = {}; }


GH.tpl.burndownchart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-empty"></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderChartBody.soyTemplateName = 'GH.tpl.burndownchart.renderChartBody';
}


GH.tpl.burndownchart.renderBurndownNoSprint = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml('There are no sprints currently in progress.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownNoSprint.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownNoSprint';
}


GH.tpl.burndownchart.renderBurndownChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight ghx-vertical-lines"><thead><tr><th></th><th></th><th></th><th></th>';
  var statisticList10 = opt_data.statistics;
  var statisticListLen10 = statisticList10.length;
  for (var statisticIndex10 = 0; statisticIndex10 < statisticListLen10; statisticIndex10++) {
    var statisticData10 = statisticList10[statisticIndex10];
    output += '<th colspan="3" id="series-' + soy.$$escapeHtml(statisticData10.id) + '" class="ghx-center">' + soy.$$escapeHtml(statisticData10.name) + '</th>';
  }
  output += '</tr><tr><th id="series-date">' + soy.$$escapeHtml('Date') + '</th><th id="series-issue">' + soy.$$escapeHtml('Issue') + '</th><th id="series-event-type">' + soy.$$escapeHtml('Event Type') + '</th><th id="series-event-detail">' + soy.$$escapeHtml('Event Detail') + '</th>';
  var statisticList26 = opt_data.statistics;
  var statisticListLen26 = statisticList26.length;
  for (var statisticIndex26 = 0; statisticIndex26 < statisticListLen26; statisticIndex26++) {
    var statisticData26 = statisticList26[statisticIndex26];
    output += '<th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-inc" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml('Increase') + '">' + soy.$$escapeHtml('Inc.') + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-dec" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml('Decrease') + '">' + soy.$$escapeHtml('Dec.') + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-value" class="ghx-right ghx-minimal">' + ((statisticData26.isSum) ? 'Sum' : soy.$$escapeHtml('Remaining')) + '</th>';
  }
  output += '</tr></thead><tbody>';
  var rowList50 = opt_data.rows;
  var rowListLen50 = rowList50.length;
  for (var rowIndex50 = 0; rowIndex50 < rowListLen50; rowIndex50++) {
    var rowData50 = rowList50[rowIndex50];
    output += '<tr><td headers="series-date">' + ((rowData50.dateString) ? (rowData50.recordedDateString) ? '<span class="ghx-backdated-event" title="' + soy.$$escapeHtml(AJS.format('Recorded at {0}',rowData50.recordedDateString)) + '">' + soy.$$escapeHtml(rowData50.dateString) + '</span>' : soy.$$escapeHtml(rowData50.dateString) : '') + '</td><td headers="series-issue">';
    if (rowData50.initial || rowData50.complete) {
      var issueList66 = rowData50.issues;
      var issueListLen66 = issueList66.length;
      for (var issueIndex66 = 0; issueIndex66 < issueListLen66; issueIndex66++) {
        var issueData66 = issueList66[issueIndex66];
        output += ((! opt_data.isUseIssueHierarchyEnabled && issueData66.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.parentKey}) + ' / ' : '') + ((opt_data.isUseIssueHierarchyEnabled && issueData66.typeHierarchyLevel == -1) ? GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.key}) + '<br />';
      }
    } else if (! rowData50.openClose) {
      output += ((! opt_data.isUseIssueHierarchyEnabled && rowData50.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.parentKey}) + ' / ' : '') + ((opt_data.isUseIssueHierarchyEnabled && rowData50.typeHierarchyLevel == -1) ? GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.key});
    }
    output += '</td><td headers="series-event-type">' + ((rowData50.event.typeAsHtml) ? soy.$$filterNoAutoescape(rowData50.event.type) : soy.$$escapeHtml(rowData50.event.type)) + '</td><td headers="series-event-detail">' + soy.$$escapeHtml(rowData50.event.detail);
    if (rowData50.event.notes) {
      output += '<div class="description">';
      var noteList106 = rowData50.event.notes;
      var noteListLen106 = noteList106.length;
      for (var noteIndex106 = 0; noteIndex106 < noteListLen106; noteIndex106++) {
        var noteData106 = noteList106[noteIndex106];
        output += ((! (noteIndex106 == 0)) ? '<br />' : '') + soy.$$escapeHtml(noteData106);
      }
      output += '</div>';
    }
    output += '</td>';
    var statisticList114 = opt_data.statistics;
    var statisticListLen114 = statisticList114.length;
    for (var statisticIndex114 = 0; statisticIndex114 < statisticListLen114; statisticIndex114++) {
      var statisticData114 = statisticList114[statisticIndex114];
      if (rowData50.initial) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-inc" class="ghx-right">';
        var issueList120 = rowData50.issues;
        var issueListLen120 = issueList120.length;
        for (var issueIndex120 = 0; issueIndex120 < issueListLen120; issueIndex120++) {
          var issueData120 = issueList120[issueIndex120];
          output += '<div class="ghx-nowrap">' + ((issueData120.valuesText[statisticData114.valueId]) ? soy.$$escapeHtml(issueData120.valuesText[statisticData114.valueId]) : '-') + '</div>';
        }
        output += '</td><td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-dec"></td>';
      } else if (rowData50.complete || rowData50.openClose) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-dec"></td>';
      } else {
        output += (rowData50.deltasType[statisticData114.valueId] == 'inc') ? '<td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-inc" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData114.valueId]) + '</div></td><td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-dec"></td>' : '<td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-dec" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData114.valueId]) + '</div></td>';
      }
      output += '<td headers="series-' + soy.$$escapeHtml(statisticData114.id) + '-value" class="ghx-right">';
      if (rowData50.initial) {
        var issueList161 = rowData50.issues;
        var issueListLen161 = issueList161.length;
        for (var issueIndex161 = 0; issueIndex161 < issueListLen161; issueIndex161++) {
          var issueData161 = issueList161[issueIndex161];
          output += '<br />';
        }
      } else if (rowData50.complete) {
        var issueList165 = rowData50.issues;
        var issueListLen165 = issueList165.length;
        for (var issueIndex165 = 0; issueIndex165 < issueListLen165; issueIndex165++) {
          var issueData165 = issueList165[issueIndex165];
          output += '<div class="ghx-nowrap">' + ((issueData165.valuesText[statisticData114.valueId]) ? soy.$$escapeHtml(issueData165.valuesText[statisticData114.valueId]) : '-') + '</div>';
        }
      }
      output += ((! rowData50.openClose) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.valuesText[statisticData114.valueId]) + '</div>' : '') + '</td>';
    }
    output += '</tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownChartTable.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownChartTable';
}


GH.tpl.burndownchart.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderIssueKeyLink.soyTemplateName = 'GH.tpl.burndownchart.renderIssueKeyLink';
}


GH.tpl.burndownchart.renderShowNonWorkingDaysOption = function(opt_data, opt_ignored) {
  return '<tr><td></td><td><input type="checkbox" id="ghx-chart-show-non-working-days" ' + ((opt_data.checked) ? ' checked="checked"' : '') + '/> <label for="ghx-chart-show-non-working-days"><span class="ghx-description">' + soy.$$escapeHtml('Show Non-Working Days') + '</span></label></td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderShowNonWorkingDaysOption.soyTemplateName = 'GH.tpl.burndownchart.renderShowNonWorkingDaysOption';
}


GH.tpl.burndownchart.renderNoWorkingDaysMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span><strong>' + soy.$$escapeHtml('Chart cannot be displayed') + '</strong></p><p>' + soy.$$filterNoAutoescape(AJS.format('All of the days within this sprint are {0}configured as non-working days{1}. To display a Burndown Chart some days need to be working days.','<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidView.jspa?tab=time&rapidView=' + GH.RapidViewConfig.currentData.data.id + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderNoWorkingDaysMessage.soyTemplateName = 'GH.tpl.burndownchart.renderNoWorkingDaysMessage';
}


GH.tpl.burndownchart.renderSprintCompleteEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.closingUserHtml) ? soy.$$filterNoAutoescape(AJS.format('Sprint ended by {0}',opt_data.closingUserHtml)) : soy.$$escapeHtml('Sprint ended'));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintCompleteEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintCompleteEventType';
}


GH.tpl.burndownchart.renderSprintReopenEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.reopenUserHtml) ? soy.$$filterNoAutoescape(AJS.format('Sprint reopened by {0}',opt_data.reopenUserHtml)) : soy.$$escapeHtml('Sprint reopened'));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintReopenEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintReopenEventType';
}


GH.tpl.burndownchart.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderWarningMessage.soyTemplateName = 'GH.tpl.burndownchart.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReportSLATracker.js' */
var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r,a=arguments[e];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};define("jira-agile/rapid/ui/chart/report-sla-tracker",["require"],function(t){"use strict";var n=t("jira/analytics/web-client"),i=t("jira/ajs/ajax/smart-ajax"),o=t("jquery"),s=t("jira/util/unsafe-logger"),u={},c="jira-software",p="report-failed-elements-missing";u.reportNames={burndown:"sprintBurndown",burnup:"burnup",sprintReport:"sprintReport",cfd:"cumulativeFlowDiagram",velocity:"velocity",unknown:"unknown"},u.checkReportAndFireSlaEvent=function(t,e,r,a,n){if(e)v(t,e,r);else switch(t){case u.reportNames.burndown:return void m();case u.reportNames.burnup:return void g();case u.reportNames.sprintReport:return void f();case u.reportNames.cfd:return void d();case u.reportNames.velocity:return void l(a,n);default:return void b({reason:"report-failed-unknown-report",reportName:u.reportNames.unknown})}};var l=function(t,e){var r=o("#ghx-chart-view").length,a=o("#ghx-chart-content .info").length,n=o("#content").html();h(u.reportNames.velocity,r,a,n,t,e)},d=function(){var t=o("#ghx-chart-view").length;r(t,!1,u.reportNames.cfd)},f=function(){var t=o("#ghx-report-content").length,e=o("#ghx-chart-content .info").length;r(t,e,u.reportNames.sprintReport)},m=function(){var t=o("#ghx-chart-view").length,e=o("#ghx-chart-content .info").length;r(t,e,u.reportNames.burndown)},g=function(){var t=o("#ghx-sprint-burnup-report svg").length,e=o(".ghx-blank-state").length;r(t,e,u.reportNames.burnup)},r=function(t,e,r){t||e?w({reportName:r,attributes:{isChart:!!t,isBlankExperience:!!e}}):b({reason:p,reportName:r})},h=function(t,e,r,a,n,i){e||r?w({reportName:t,attributes:{isChart:!!e,isBlankExperience:!!r}}):(b({reason:p,reportName:t}),s.unsafeError(t,"Missing elements on the "+t+" report page",{dom:a,requestSuccess:n,ajaxErrors:i&&i.error?JSON.stringify(i.error):""}))},v=function(t,e,r){var a,n=e&&e.status;n?400===n||401===n||403===n?w({reportName:t,attributes:r||{}}):404===n||(400<n&&n<500?w({reportName:t,attributes:r||{}}):b({reason:"report-critical-data-failed-with-status-code",reportName:t,statusCode:n.toString(),attributes:r||{}})):(a=(e&&e.statusText)===i.SmartAjaxResult.TIMEOUT,n=0===(e&&e.readyState),e=!0===(e&&e.aborted),a||n||e?N({reportName:t,attributes:{isClientTimeout:a,readyStateWasUnopened:n,isAborted:e}}):b({reason:"report-critical-data-failed-unknown-reason",reportName:t,attributes:r||{}}))},b=function(t){var e=t.reason,r=t.reportName,a=t.statusCode,t=t.attributes;n.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskFail",attributes:_extends({task:x(r),analyticsSource:r,application:c,edition:GH.Util.getEdition(c),isClassic:!0,failureReason:e,statusCode:a},t)})},N=function(t){var e=t.reportName,t=t.attributes;n.sendOperationalEvent({source:"ui",actionSubject:"reports",action:"networkFail",attributes:_extends({task:x(e),analyticsSource:e,application:c,edition:GH.Util.getEdition(c),isClassic:!0},t)})},w=function(t){var e=t.reportName,t=t.attributes;n.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:_extends({task:x(e),analyticsSource:e,application:c,edition:GH.Util.getEdition(c),isClassic:!0},t)})},x=function(t){return"view"+(t[0].toUpperCase()+t.substring(1))};return u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/SprintReportGrowthUtils.js' */
GH.SprintReportGrowthUtils={};var AnalyticsClient=require("jira/analytics/web-client"),ProjectPropertyService=require("jira/service/project-property-service"),HaveISeenItService=require("jira/featureflags/have-i-seen-it"),SPRINT_REPORT_V2_HAVEISEENIT_KEY="jsw.og.sprint.report.v2",DISPLAY_OPSGENIE_SPRINTREPORT_PROPERTY="sprintreport.is-opsgenie-integration-enabled";GH.SprintReportGrowthUtils.hasOpsgenie=function(){var e=!1;try{var r=JSON.parse(AJS.Meta.get("licensed-products")),e=!!r.opsgenie||!!r["jira-servicedesk"]}catch(e){}return e},GH.SprintReportGrowthUtils.isEligibleForOpsgenieExperiment=function(){return AJS.Meta.getBoolean("xflow-product-suggestions-enabled")&&!GH.SprintReportGrowthUtils.hasOpsgenie()},GH.SprintReportGrowthUtils.deferredHasSprintReportV1BeenDismissed=function(){var r=AJS.$.Deferred();return HaveISeenItService.haveISeenIt("growth","jsw.og.sprint.report.learning.experiment","sprint-report-banner").done(function(e){r.resolve(e)}).fail(function(e){r.resolve(!1)}),r},GH.SprintReportGrowthUtils.deferredHasAdminUserDismissed=function(){var r=AJS.$.Deferred(),e=$("meta[name=ghx-project-id]").attr("content");return ProjectPropertyService.getProperty(e,DISPLAY_OPSGENIE_SPRINTREPORT_PROPERTY,!0).done(function(e){r.resolve(!e)}).fail(function(e){r.resolve(!1)}),r},GH.SprintReportGrowthUtils.deferredHasBasicUserDismissed=function(){var r=AJS.$.Deferred();return window.JIRA.isSiteadmin()?r.resolve(!1):HaveISeenItService.haveISeenIt("growth",SPRINT_REPORT_V2_HAVEISEENIT_KEY,DISPLAY_OPSGENIE_SPRINTREPORT_PROPERTY).done(function(e){r.resolve(e)}).fail(function(e){r.resolve(!1)}),r},GH.SprintReportGrowthUtils.deferredAdminUserUpdateOpsgenieSprintReport=function(e){var r=$("meta[name=ghx-project-id]").attr("content");return ProjectPropertyService.setProperty(r,DISPLAY_OPSGENIE_SPRINTREPORT_PROPERTY,e.toString())},GH.SprintReportGrowthUtils.deferredIsEnabledSprintReportV2=function(){var t=AJS.$.Deferred();return AJS.$.when(GH.SprintReportGrowthUtils.deferredHasAdminUserDismissed(),GH.SprintReportGrowthUtils.deferredHasBasicUserDismissed()).done(function(e,r){t.resolve(!e&&!r)}),t},GH.SprintReportGrowthUtils.isEnabledSprintReportV2PostExpanding=function(){var r=AJS.$.Deferred();return AJS.$.when(GH.SprintReportGrowthUtils.deferredHasAdminUserDismissed()).done(function(e){r.resolve(!e)}),r.promise()},GH.SprintReportGrowthUtils.deferredIsInSprintReportV2PreExperiment=function(){var r=AJS.$.Deferred();return GH.SprintReportGrowthUtils.isEligibleForOpsgenieExperiment()?GH.SprintReportGrowthUtils.deferredHasSprintReportV1BeenDismissed().done(function(e){r.resolve(!e)}):r.resolve(!1),r},GH.SprintReportGrowthUtils.isInSprintReportV2PreExperiment=function(){return GH.SprintReportGrowthUtils.deferredIsInSprintReportV2PreExperiment().promise()},GH.SprintReportGrowthUtils.shouldSeeSprintReportV2PreExpanding=function(){var t=AJS.$.Deferred(),e=t.promise();return AJS.$.when(GH.SprintReportGrowthUtils.deferredIsInSprintReportV2PreExperiment(),GH.SprintReportGrowthUtils.deferredIsEnabledSprintReportV2()).done(function(e,r){t.resolve(e&&r)}),e},GH.SprintReportGrowthUtils.shouldSeeSprintReportV2PostExpanding=function(){var e=AJS.$.Deferred(),r=e.promise();return GH.SprintReportGrowthUtils.hasOpsgenie()?GH.SprintReportGrowthUtils.isEnabledSprintReportV2PostExpanding():(e.resolve(!1),r)},GH.SprintReportGrowthUtils.fireOperationalEvent=function(e,r){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();AnalyticsClient.sendOperationalEvent({source:"sprintReportScreen",actionSubject:e,action:r,attributes:{boardId:GH.SprintRetrospectiveController.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile",sprintId:t.id}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/SprintReportController.js' */
var AnalyticsClient=require("jira/analytics/web-client"),ReportSLATracker=require("jira-agile/rapid/ui/chart/report-sla-tracker"),moment=require("jira/moment");GH.SprintRetrospectiveController=new GH.Events,GH.SprintRetrospectiveController.id="sprintRetrospective",GH.SprintRetrospectiveController.displayed=!1,GH.SprintRetrospectiveController.supportsPages=!1,GH.SprintRetrospectiveController.rapidViewData={},GH.SprintRetrospectiveController.rapidViewConfig={},GH.SprintRetrospectiveController.referredBySprintCompleteDialog=!1,function(){var t=require("jira-agile/rapid/analytics-tracker");GH.SprintRetrospectiveController.loadAlertChart=require("jira-agile/rapid/ui/alert-chart/api"),GH.SprintRetrospectiveController.analytics=new t("gh.report.sprintRetrospective"),GH.SprintRetrospectiveController.linkPagesAnalytics={action:new t("gh.linkedPages.discovery.action"),show:new t("gh.linkedPages.discovery.show")}}(),GH.SprintRetrospectiveController.setRapidView=function(t){GH.SprintRetrospectiveController.rapidViewData=t||{}},GH.SprintRetrospectiveController.isApplicable=function(t){return t.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.SprintRetrospectiveController.getNormalizedFromInternal=function(){return{sprint:GH.SprintRetrospectiveController.getSelectedSprintId()||null}},GH.SprintRetrospectiveController.toUrl=function(t){return _.isNull(t.sprint)?{}:{sprint:t.sprint}},GH.SprintRetrospectiveController.updateInternalFromNormalized=function(t){GH.SprintRetrospectiveController.setSelectedSprintFromUrlState(t.sprint)},GH.SprintRetrospectiveController.getNormalizedFromUrl=function(t){return{sprint:GH.RapidBoard.UrlState.normalizeNumberParam(t.sprint,null)}},GH.SprintRetrospectiveController.init=function(){GH.SprintRetrospectiveController.trigger("before:renderChart");var t=require("jira-agile/rapid/ui/component/chart-picker");GH.SprintRetrospectiveController.sprintPicker=new t("sprintRetrospective.selectedSprintId")},GH.SprintRetrospectiveController.show=function(){GH.SprintRetrospectiveController.displayed=!0,GH.SprintRetrospectiveController.rapidViewData&&(GH.SprintRetrospectiveController.renderChartView(),GH.SprintRetrospectiveController.analytics.trigger("show"))},GH.SprintRetrospectiveController.hide=function(){GH.SprintRetrospectiveController.displayed=!1,GH.SprintRetrospectiveView.hide(),AJS.$(GH).unbind("."+GH.SprintRetrospectiveController.id)},GH.SprintRetrospectiveController.renderChartView=function(){GH.SprintRetrospectiveController.initializeControls(),GH.ChartView.getChartContentElem(!0).html(GH.tpl.sprintretrospective.renderReportBody()),GH.ChartView.showSpinner(),GH.SprintRetrospectiveController.loadRapidViewConfig()},GH.SprintRetrospectiveController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide(),AJS.$(GH.SprintRetrospectiveController.sprintPicker).bind("selectedItemChanged",GH.SprintRetrospectiveController.handleSprintChanged)},GH.SprintRetrospectiveController.loadRapidViewConfig=function(){GH.RapidViewConfig.fetchConfiguration(GH.SprintRetrospectiveController.rapidViewData.id).done(function(t){GH.SprintRetrospectiveController.displayed&&(GH.SprintRetrospectiveController.rapidViewConfig=t,GH.SprintRetrospectiveController.loadSprintOptions())})},GH.SprintRetrospectiveController.loadSprintOptions=function(){var t=GH.RapidBoard.State.getRapidViewId();GH.Ajax.get({url:"/sprintquery/"+t,data:{includeFutureSprints:!1}},"rapidChartData").done(GH.SprintRetrospectiveController.processSprintsData)},GH.SprintRetrospectiveController.processSprintsData=function(t){GH.SprintRetrospectiveController.displayed&&(t.sprints.reverse(),GH.SprintRetrospectiveController.sprintPicker.setItems(t.sprints),GH.SprintRetrospectiveController.sprintPicker.setDefaultItem(GH.SprintRetrospectiveController.getDefaultSprintForPicker(t.sprints)),t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem(),GH.SprintRetrospectiveController.sprintPicker.render(AJS.$("#ghx-chart-selector")),GH.ChartView.showChartGroup(),GH.RapidBoard.State.pushState(),t?(GH.SprintRetrospectiveController.loadReportData(),GH.SprintRetrospectiveController.fireTrackEvent()):GH.ChartView.hideSpinner())},GH.SprintRetrospectiveController.loadReportData=function(){var e=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.Ajax.get({url:"rapid/charts/sprintreport",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:e.id}},"rapidChartData").done(function(t){GH.SprintRetrospectiveController.displayed&&GH.SprintRetrospectiveController.processReportData(e,t)}).fail(GH.ChartView.hideSpinner),GH.Ajax.get({url:"/rapid/charts/scopechangeburndownchart.json",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:e.id}},"rapidChartData.burndown").done(function(t){GH.SprintRetrospectiveController.displayed&&GH.SprintRetrospectiveView.showMiniBurndown(t)}).fail(handleFail)};var handleFail=function(t,e){ReportSLATracker.checkReportAndFireSlaEvent(ReportSLATracker.reportNames.sprintReport,e),GH.ChartView.hideSpinner()};GH.SprintRetrospectiveController.processReportData=function(t,e){GH.SprintRetrospectiveController.supportsPages=e.supportsPages,GH.SprintRetrospectiveView.show();function r(t){return null==t?"-":i(t)}var i="duration"===GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration:GH.NumberFormat.format;e.contents.completedIssuesEstimateSum.text=r(e.contents.completedIssuesEstimateSum.value),e.contents.completedIssuesInitialEstimateSum.text=r(e.contents.completedIssuesInitialEstimateSum.value),e.contents.issuesNotCompletedEstimateSum.text=r(e.contents.issuesNotCompletedEstimateSum.value),e.contents.issuesNotCompletedInitialEstimateSum.text=r(e.contents.issuesNotCompletedInitialEstimateSum.value),e.contents.issuesCompletedInAnotherSprintEstimateSum.text=r(e.contents.issuesCompletedInAnotherSprintEstimateSum.value),e.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text=r(e.contents.issuesCompletedInAnotherSprintInitialEstimateSum.value),e.contents.puntedIssuesEstimateSum.text=r(e.contents.puntedIssuesEstimateSum.value),e.contents.puntedIssuesInitialEstimateSum.text=r(e.contents.puntedIssuesInitialEstimateSum.value),e.contents.allIssuesEstimateSum.text=r(e.contents.allIssuesEstimateSum.value);function n(t){GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(t,"estimateStatistic",i),GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(t,"currentEstimateStatistic",i)}_.each(e.contents.completedIssues,n),_.each(e.contents.issuesNotCompletedInCurrentSprint,n),_.each(e.contents.issuesCompletedInAnotherSprint,n),_.each(e.contents.puntedIssues,n);var o=GH.ChartUtils.createIssueJql(e.contents.completedIssues.concat(e.contents.issuesNotCompletedInCurrentSprint).concat(e.contents.puntedIssues)),p=GH.ChartUtils.createIssueJql(e.contents.completedIssues),s=GH.ChartUtils.createIssueJql(e.contents.issuesNotCompletedInCurrentSprint),l=GH.ChartUtils.createIssueJql(e.contents.issuesCompletedInAnotherSprint),a=GH.ChartUtils.createIssueJql(e.contents.puntedIssues);GH.SprintRetrospectiveView.showSprintReport(t,e,GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic,encodeURIComponent(o),encodeURIComponent(p),encodeURIComponent(s),encodeURIComponent(l),encodeURIComponent(a),!0),GH.SprintRetrospectiveController.postProcessReportData(t),GH.SprintReportGrowthUtils.shouldSeeSprintReportV2PreExpanding().done(function(t){t?GH.SprintRetrospectiveController.showOpsgenieSprintReportBanner(e):GH.SprintRetrospectiveController.hideOpsgenieSprintReportBanner()}),GH.SprintReportGrowthUtils.shouldSeeSprintReportV2PostExpanding().done(function(t){t&&GH.SprintRetrospectiveController.initAlertChart(e)})},GH.SprintRetrospectiveController.fireTrackEvent=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();AnalyticsClient.sendTrackEvent({source:"sprintReportScreen",action:"viewed",actionSubject:"report",actionSubjectId:"sprint",attributes:{boardId:GH.SprintRetrospectiveController.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(!0),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile",sprintId:t.id}})},GH.SprintRetrospectiveController.handleSprintChanged=function(t){GH.SprintRetrospectiveView.clearDialog(),GH.SprintRetrospectiveController.displayed&&(GH.RapidBoard.State.pushState(),GH.SprintRetrospectiveController.loadReportData())},GH.SprintRetrospectiveController.getDefaultSprintForPicker=function(t){var e=_.filter(t,function(t){return"CLOSED"===t.state});return 0<e.length?_.first(e):_.first(t)},GH.SprintRetrospectiveController.getSelectedSprintId=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();if(t)return t.id;t=GH.SprintRetrospectiveController.sprintPicker.getStoredSelectedItemId();return-1!==t?t:null},GH.SprintRetrospectiveController.setSelectedSprintFromUrlState=function(t){GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(t)},GH.SprintRetrospectiveController.postProcessReportData=function(t){GH.SprintRetrospectiveController.trigger("after:renderChart"),GH.SprintRetrospectiveController.supportsPages&&GH.SprintRetrospectiveController.shouldShowCreateRetroDialog(t.id)&&GH.SprintRetrospectiveView.showCreateRetrospectiveDialog(t)},GH.SprintRetrospectiveController.shouldShowCreateRetroDialog=function(e){return!!_.find(GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog(),function(t){return t.sprintId===e&&!t.dismissed})},GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog=function(){return GH.storage.get("gh.markedSprintsForRetroDialog")||[]},GH.SprintRetrospectiveController.markSprintAsDismissed=function(e){var t=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();_.each(t,function(t){t.sprintId===e&&(t.dismissed=!0)}),GH.storage.put("gh.markedSprintsForRetroDialog",t)},GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog=function(e){var t=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();!_.find(t,function(t){return t.sprintId===e})&&t.length<5&&t.push({dismissed:!1,sprintId:e}),GH.storage.put("gh.markedSprintsForRetroDialog",t)},GH.SprintRetrospectiveController.getAppLinkData=function(){var r=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();return GH.LinkedPagesController.getLinkedPagesForEntity(GH.LinkedPagesController.SPRINT,r.id).andThen(function(t){var e;return{jiraApplicationId:t.jiraApplicationId,appLinkUrl:(e=t.applicationLinks,(e=_.findWhere(e,{primary:!0}))?e.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION:null),entityId:r.id,jiraUrl:t.jiraBaseUrl}})},GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash=function(t,e,r){_.isUndefined(t[e])||_.isUndefined(t[e].statFieldValue.value)?t[e]={statFieldValue:{text:"-"}}:t[e].statFieldValue.text=r(t[e].statFieldValue.value)},GH.SprintRetrospectiveController.showOpsgenieSprintReportBanner=function(t){require("jira-agile/rapid/ui/opsgenie-sprint-report-banner/api").then(function(t){var e=AJS.$("#opsgenie-sprint-report-banner");0<e.length&&(t.render(e[0]),e.removeClass("hidden"))}).catch(function(t){AnalyticsClient.sendTrackEvent({source:GH.SprintRetrospectiveController.id,actionSubject:"component",action:"failed",actionSubjectId:"opsgenieSprintReportBannerComponent"})})},GH.SprintRetrospectiveController.hideOpsgenieSprintReportBanner=function(){AJS.$("#opsgenie-sprint-report-banner").addClass("hidden")},GH.SprintRetrospectiveController.updateAlertChart=function(e,r){var i=document.querySelector("#ghx-report-content .ghx-alerts-chart");AJS.$(i).removeClass("hidden");var n=require("jira-agile/rapid/ui/chart/chart-controller"),o=[r.sprint.isoStartDate,r.sprint.isoEndDate],p=r.sprint.isoEndDate;r.sprint.isoCompleteDate&&moment(r.sprint.isoCompleteDate).isValid()&&(o.push(r.sprint.isoCompleteDate),p=r.sprint.isoEndDate>r.sprint.isoCompleteDate?r.sprint.isoEndDate:r.sprint.isoCompleteDate);var o=o.sort(),t=null;try{t=require("jira/api/projects")}catch(t){GH.SprintReportGrowthUtils.fireOperationalEvent("loadAlertChart","projectModuleNotFound")}var s=$("meta[name=ghx-project-id]").attr("content")||t&&t.getCurrentProjectId(!0);i&&GH.SprintRetrospectiveController.loadAlertChart.then(function(t){"unmount"===e&&t.unmount(i),"render"===e&&(t.render(i,{sourceComponent:"jira-board-sprint-report",startDate:moment(r.sprint.isoStartDate).toISOString(),endDate:moment(p).toISOString(),height:150,nonWorkingBlocks:n.getNonWorkingBlocks(),ticks:o,projectId:s,projectKey:GH.RapidBoard.projectKey,isProjectAdmin:GH.ViewActions.canEdit}),GH.SprintReportGrowthUtils.fireOperationalEvent("loadAlertChart","success"))}).catch(function(t){GH.SprintReportGrowthUtils.fireOperationalEvent("loadAlertChart","failed")})},GH.SprintRetrospectiveController.initAlertChart=function(t){GH.SprintRetrospectiveController.updateAlertChart("render",t)},GH.SprintRetrospectiveController.unmountAlertChart=function(){GH.SprintRetrospectiveController.updateAlertChart("unmount")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/SprintReportView.js' */
!function(){"use strict";var p=require("jira-agile/rapid/const/PageMode"),a=require("jira-agile/rapid/ui/chart/report-sla-tracker");GH.SprintRetrospectiveView={};var s=GH.FlotChartUtils;GH.SprintRetrospectiveView.createRetroDialog=null,GH.SprintRetrospectiveView.retroApplinkData=null,GH.SprintRetrospectiveView.showSprintReport=function(e,t,r,i,n,o,a,s){AJS.$("#ghx-report-content .ghx-sprint-report").empty().append(GH.tpl.sprintretrospective.renderSprintReport({sprint:t,estimationStatistic:r,completedIssuesJql:n,incompletedIssuesJql:o,puntedIssuesJql:s,issuescompletedInAnotherSprintJql:a,hasIssuesAddedAfterSprintStart:_.keys(t.contents.issueKeysAddedDuringSprint).length})).show(),AJS.$("#ghx-sprint-report-meta").empty().append(GH.tpl.sprintretrospective.renderSprintReportHeader({sprint:t.sprint,showPages:!0,linkedPagesCount:t.sprint.remoteLinks.length,endedByHtml:t.lastUserToClose})).append(GH.tpl.board.x.renderSprintGoal({goal:e.goal})).show(),GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.SPRINT,p.REPORT,t.sprint.id,AJS.$("#ghx-sprint-report-meta .js-view-entity-pages")),GH.ReportController.renderSprintActions(AJS.$("#ghx-chart-sprint-actions"),GH.RapidBoard.State.getRapidViewId(),GH.SprintRetrospectiveController.sprintPicker.getItems(),e,i)},GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom=function(e,t){var r;return 3===e.length?(r=.1*(e[2]-e[0]),e[1]-e[0]<r||e[2]-e[1]<r):e[1]<t&&(r=.1*(t-e[0]),e[1]-e[0]<r)},GH.SprintRetrospectiveView.clearDialog=function(){GH.SprintRetrospectiveView.createRetroDialog&&GH.SprintRetrospectiveView.createRetroDialog._hide()},GH.SprintRetrospectiveView.showMiniBurndown=function(e){var t,r=require("jira-agile/rapid/ui/chart/burndown-chart-controller"),i=require("jira-agile/rapid/ui/chart/burndown-chart-model"),n=require("jira-agile/rapid/ui/chart/chart"),o=require("jira-agile/rapid/ui/chart/chart-controller");i.setRawData(e),e.warningMessage?AJS.$("#ghx-report-content").prepend(GH.tpl.sprintretrospective.renderWarningMessage({message:e.warningMessage})):(t=[e.startTime,e.endTime],_.isNumber(e.completeTime)&&t.push(e.completeTime),t=t.sort(),GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom(t,e.now)&&(AJS.$(".ghx-sprint-report-burndown").addClass("ghx-close-ticklabels"),AJS.$(".ghx-sprint-report-burndown-full-width").addClass("ghx-close-ticklabels")),t={xaxis:{mode:"time",ticks:t,reserveSpace:!0,labelWidth:60},yaxis:i.getYAxis(),series:{points:{show:!1,radius:3,symbol:"circle"},lines:{show:!0}},grid:{markings:o.getNonWorkingBlocks}},0===(o=AJS.$("#ghx-report-content .ghx-sprint-report-burndown")).length&&(o=AJS.$("#ghx-report-content .ghx-sprint-report-burndown-full-width"),t.legend={container:null,backgroundOpacity:.5,position:"ne"},s.setAndAlignAxisLabels("Time",i.getStatistic().name)),n.draw(r.id,o,i.getSeries(),t),a.checkReportAndFireSlaEvent(a.reportNames.sprintReport))},GH.SprintRetrospectiveView.show=function(){GH.ChartView.hideSpinner()},GH.SprintRetrospectiveView.hide=function(){},GH.SprintRetrospectiveView.showCreateRetrospectiveDialog=function(t){var e={noBind:!0,width:320,addActiveClass:!1,persistent:!0,container:"#ghx-report-controls-group",calculatePositions:function(e,t){var r=t.target.offset(),t=AJS.$("#ghx-report-controls-group").offset();return{popupCss:{top:r.top-t.top+40,left:r.left-t.left},arrowCss:{left:40},displayAbove:!1}}};GH.SprintRetrospectiveView.createRetroDialog=GH.InlineDialog.create("retroDialog",AJS.$("#ghx-sprint-report-meta .js-view-entity-pages"),GH.SprintRetrospectiveView.renderCreateRetroDialog,e),GH.SprintRetrospectiveView.createRetroDialog.show(),GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur(),GH.SprintRetrospectiveController.linkPagesAnalytics.show.trigger("sprint.retroDialog"),AJS.$(".js-retro-dialog-dismiss, #ghx-sprint-report-meta .js-view-entity-pages").live("click",function(e){GH.SprintRetrospectiveView.createRetroDialog._hide(),GH.SprintRetrospectiveController.markSprintAsDismissed(t.id),GH.SprintRetrospectiveController.linkPagesAnalytics.action.trigger("sprint.retroDialog.createPage")}),AJS.$(document).on("submit","#js-create-page-form",function(e){var t=window.open("","_blank");GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(e){e={applinkId:GH.SprintRetrospectiveView.retroApplinkData.jiraApplicationId,agileMode:p.REPORT,fallbackUrl:GH.SprintRetrospectiveView.retroApplinkData.jiraUrl,creationToken:e};e.sprintId=GH.SprintRetrospectiveView.retroApplinkData.entityId,t.location=GH.SprintRetrospectiveView.retroApplinkData.appLinkUrl+"?"+AJS.$.param(e)}),e.preventDefault()})},GH.SprintRetrospectiveView.renderCreateRetroDialog=function(t,e,r){GH.SprintRetrospectiveController.getAppLinkData().done(function(e){e.appLinkUrl&&(GH.SprintRetrospectiveView.retroApplinkData=e,t.html(GH.tpl.sprintretrospective.renderCreateRetroDialog(e)).addClass("ghx-inline-dialog"),r())})},GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur=function(){GH.SprintRetrospectiveView.createRetroDialog._hide=GH.SprintRetrospectiveView.createRetroDialog.hide,AJS.$(document).bind("showLayer",function(e,t,r){"inlineDialog"===t&&"retroDialog"===r.id&&(AJS.$(document.body).unbind("click.retroDialog.inline-dialog-check"),r.hide=function(){return!1})})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/SprintReport.soy' */
// This file was automatically generated from SprintReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintretrospective.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintretrospective == 'undefined') { GH.tpl.sprintretrospective = {}; }


GH.tpl.sprintretrospective.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div><div id="ghx-sprint-report-meta"></div></div><div id="ghx-report-content"><div id="ghx-chart-wrap" class="ghx-sprint-report-scroll-fix"><div class="ghx-sprint-report-burndown-full-width"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="opsgenie-sprint-report-banner" class="hidden"></div><div class="ghx-alerts-chart hidden"></div><div class="ghx-sprint-report"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderReportBody.soyTemplateName = 'GH.tpl.sprintretrospective.renderReportBody';
}


GH.tpl.sprintretrospective.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.issueNavLink.soyTemplateName = 'GH.tpl.sprintretrospective.issueNavLink';
}


GH.tpl.sprintretrospective.renderSprintReportHeader = function(opt_data, opt_ignored) {
  return '<span class="ghx-sprint-status">' + ((opt_data.sprint.state == 'CLOSED') ? (opt_data.endedByHtml) ? soy.$$filterNoAutoescape(AJS.format('Closed sprint, ended by {0}',opt_data.endedByHtml)) : soy.$$escapeHtml('Closed sprint') : '<em>' + soy.$$escapeHtml('Active sprint') + '</em>') + '</span><span title="' + soy.$$escapeHtml('Start Date') + '">' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</span> - ' + ((opt_data.sprint.state == 'CLOSED') ? '<span title="' + soy.$$escapeHtml('Completion Date') + '">' + soy.$$escapeHtml(opt_data.sprint.completeDate) + '</span>' : '<span class="ghx-projected" title="' + soy.$$escapeHtml('Projected End Date') + '">' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</span>') + ((opt_data.showPages) ? GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: 'Create and view pages linked to this sprint'}) : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReportHeader.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReportHeader';
}


GH.tpl.sprintretrospective.renderSprintReport = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item"><h3>' + soy.$$escapeHtml('Status Report') + '</h3></div>' + ((opt_data.hasIssuesAddedAfterSprintStart) ? '<div class="ghx-added-legend aui-item">* ' + soy.$$escapeHtml('Issue added to sprint after start time') + '</div>' : '') + '</div><div class="ghx-sprint-report-table ghx-report-issue-list" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.sprint ? opt_data.sprint.sprint.id : '') + '">' + ((opt_data.sprint.contents.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.completedIssuesJql}), issues: opt_data.sprint.contents.completedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.completedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.completedIssuesEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesNotCompletedInCurrentSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues Not Completed'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.incompletedIssuesJql}), issues: opt_data.sprint.contents.issuesNotCompletedInCurrentSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesNotCompletedInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesNotCompletedEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesCompletedInAnotherSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues completed outside of this sprint'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.issuescompletedInAnotherSprintJql}), issues: opt_data.sprint.contents.issuesCompletedInAnotherSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintEstimateSum.text}) : '') + ((opt_data.sprint.contents.puntedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues Removed From Sprint'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.puntedIssuesJql}), issues: opt_data.sprint.contents.puntedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.puntedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.puntedIssuesEstimateSum.text}) : '') + '</table>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReport.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReport';
}


GH.tpl.sprintretrospective.renderCreateRetroDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><h2>' + soy.$$escapeHtml('Retrospective time!') + '</h2><p>' + soy.$$escapeHtml('Create a retrospective page to review \x26 improve your iterations!') + '</p><form id="js-create-page-form" class="aui" target="_blank" action="' + soy.$$escapeHtml(opt_data.appLinkUrl) + '" method="post"><div class="buttons-container">' + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], text: 'Create'}) + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], tagName: 'a', text: 'Close', type: 'link'}) + '</div>' + GH.tpl.component.linkedpages.createPageInputs({entityTypeParam: 'sprintId', entityId: opt_data.entityId, applinkId: opt_data.jiraApplicationId, agileMode: 'report', fallbackUrl: opt_data.jiraUrl}) + '</form></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderCreateRetroDialog.soyTemplateName = 'GH.tpl.sprintretrospective.renderCreateRetroDialog';
}


GH.tpl.sprintretrospective.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderWarningMessage.soyTemplateName = 'GH.tpl.sprintretrospective.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VelocityChartController.js' */
GH.VelocityChartController={},GH.VelocityChartController.id="velocityChart",GH.VelocityChartController.displayed=!1,GH.VelocityChartController.rapidViewData={},GH.VelocityChartController.rapidViewConfig={},function(){var t=require("jira-agile/rapid/analytics-tracker");GH.VelocityChartController.analytics=new t("gh.report.velocityChart")}(),GH.VelocityChartController.setRapidView=function(t){GH.VelocityChartController.rapidViewData=t||{}},GH.VelocityChartController.isApplicable=function(t){return t.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.VelocityChartController.getNormalizedFromInternal=function(){return{}},GH.VelocityChartController.toUrl=function(){return{}},GH.VelocityChartController.updateInternalFromNormalized=function(t){},GH.VelocityChartController.getNormalizedFromUrl=function(t){return{}},GH.VelocityChartController.init=function(){},GH.VelocityChartController.show=function(){var t,r;GH.VelocityChartController.displayed=!0,GH.VelocityChartController.rapidViewData&&(GH.RapidBoard.State.pushState(),GH.VelocityChartController.renderChartView(),GH.VelocityChartController.analytics.trigger("show"),t=require("jira/analytics/web-client"),r={attributes:{boardId:GH.RapidBoard.State.getRapidViewId(),boardType:"scrum",reportType:"agile",projectId:JIRA.API.Projects.getCurrentProjectId(!0),simplified:GH.RapidBoard.State.isAgilityBoard()},action:"viewed",actionSubject:"report",actionSubjectId:"velocityChart",source:"velocityChartScreen"},t.sendTrackEvent(r))},GH.VelocityChartController.hide=function(){GH.VelocityChartController.displayed=!1,GH.SprintRetrospectiveView.hide(),AJS.$(GH).unbind("."+GH.VelocityChartController.id)},GH.VelocityChartController.renderChartView=function(){GH.VelocityChartController.initializeControls(),GH.ChartView.getChartContentElem(!0).html(GH.tpl.velocity.renderReportBody()),GH.ChartView.showSpinner(),GH.VelocityChartController.loadRapidViewConfig()},GH.VelocityChartController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide()},GH.VelocityChartController.loadRapidViewConfig=function(){GH.RapidViewConfig.fetchConfiguration(GH.VelocityChartController.rapidViewData.id).done(function(t){GH.VelocityChartController.displayed&&(GH.VelocityChartController.rapidViewConfig=t,GH.VelocityChartController.loadReportData())})},function(){function e(){window.removeEventListener("error",i)}function t(t,r){o.checkReportAndFireSlaEvent(o.reportNames.velocity,r,null,!1,t),GH.ChartView.hideSpinner(),e()}var o=require("jira-agile/rapid/ui/chart/report-sla-tracker"),r=require("jira/util/unsafe-logger"),i=function(t){t&&t.error&&r.unsafeError("velocity","Uncaught error on the Velocity report",t.error)};GH.VelocityChartController.loadReportData=function(){window.addEventListener("error",i),GH.Ajax.get({url:"/rapid/charts/velocity.json",data:{rapidViewId:GH.VelocityChartController.rapidViewConfig.id}},"rapidChartData.velocity").done(GH.VelocityChartController.processChartData).fail(t)},GH.VelocityChartController.processChartData=function(t){var r;GH.VelocityChartController.displayed&&(r="duration"===GH.VelocityChartController.rapidViewConfig.estimationStatistic.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration:GH.NumberFormat.format,_.each(t.velocityStatEntries,function(t){t.estimated.text=r(t.estimated.value),t.completed.text=r(t.completed.value)}),GH.VelocityChartView.showVelocityChart(t),o.checkReportAndFireSlaEvent(o.reportNames.velocity,null,null,!0,null),e())}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VelocityChartView.js' */
GH.VelocityChartView={},GH.VelocityChartView.showVelocityChart=function(o){var t=require("jira-agile/rapid/ui/chart/burndown-chart-controller"),e=require("jira-agile/rapid/ui/chart/chart");if(0===o.sprints.length)return AJS.$("#ghx-chart-content").html(GH.tpl.velocity.renderNoSprintsMessage({})),void GH.ChartView.hideSpinner();var l=[],n=[],c=[],d=[],i=o.sprints.reverse(),s=0;_.each(i,function(t,e){var i=o.velocityStatEntries[t.id],r=i.estimated.value,a=i.completed.value;s=Math.max(s,r,a),l[e]=[e,r],n[e]=[e,a];a=GH.tpl.velocity.formatSprintName({sprintName:t.name});c[e]=[e,a],d[e]={sprint:{name:t.name,id:t.id},estimated:i.estimated.text,completed:i.completed.text}});var r=[{label:"Commitment",data:l},{label:"Completed",data:n}];GH.ChartView.hideSpinner();i=GH.VelocityChartController.rapidViewConfig.estimationStatistic,e.draw(t.id,GH.ChartView.getChartView(!0),r,{series:{bars:{show:!0,barWidth:.2,align:"center",lineWidth:0,fillColor:{colors:[{opacity:1},{opacity:1}]}}},colors:["#ccc","#14892c"],xaxis:{ticks:c,min:-.5,max:6.5},yaxis:GH.FlotChartUtils.calculateYAxis(s,i),legend:{container:null,position:"ne"},multiplebars:!0},function(){return{colors:[window.getComputedStyle(document.body).getPropertyValue("--ds-chart-neutral")||"#ccc",window.getComputedStyle(document.body).getPropertyValue("--ds-chart-success")||"#14892c"]}}),r=AJS.$(GH.tpl.velocity.renderVelocityChartTable({rows:d,rapidBoardId:GH.RapidViewConfig.currentData.id}));GH.FlotChartUtils.setAndAlignAxisLabels(void 0,i.name),r.find("tbody").find("tr").find(":first").find("a").mousedown(function(t){1===t.which&&(t=parseInt(AJS.$(this).attr("data-value"),10),GH.BoardState.setPerViewValue("sprintRetrospective.selectedSprintId",t),GH.ReportController.selectChart(GH.SprintRetrospectiveController.id))}),AJS.$("#ghx-chart-data").empty().append(r),GH.ChartView.hideSpinner()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VelocityChart.soy' */
// This file was automatically generated from VelocityChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.velocity.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.velocity == 'undefined') { GH.tpl.velocity = {}; }


GH.tpl.velocity.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderReportBody.soyTemplateName = 'GH.tpl.velocity.renderReportBody';
}


GH.tpl.velocity.renderNoSprintsMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('There are no available sprints for this board.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderNoSprintsMessage.soyTemplateName = 'GH.tpl.velocity.renderNoSprintsMessage';
}


GH.tpl.velocity.renderVelocityChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-auto"><thead><tr><th>' + soy.$$escapeHtml('Sprint') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Commitment') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Completed') + '</th></tr></thead><tbody>';
  var rowList16 = opt_data.rows;
  var rowListLen16 = rowList16.length;
  for (var rowIndex16 = 0; rowIndex16 < rowListLen16; rowIndex16++) {
    var rowData16 = rowList16[rowIndex16];
    output += '<tr><td><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidBoardId) + '&view=reporting&chart=sprintRetrospective&sprint=' + soy.$$escapeHtml(rowData16.sprint.id) + '" data-value=' + soy.$$escapeHtml(rowData16.sprint.id) + '>' + soy.$$escapeHtml(rowData16.sprint.name) + '</a></td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.estimated) + '</td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.completed) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderVelocityChartTable.soyTemplateName = 'GH.tpl.velocity.renderVelocityChartTable';
}


GH.tpl.velocity.formatSprintName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.sprintName);
};
if (goog.DEBUG) {
  GH.tpl.velocity.formatSprintName.soyTemplateName = 'GH.tpl.velocity.formatSprintName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChangesReportModel.js' */
define("jira-agile/rapid/ui/chart/changes-report-model",["require"],function(t){"use strict";function e(){}var o=t("underscore"),i=t("jira-agile/rapid/ui/chart/burndown-rate"),s=t("jira-agile/rapid/ui/chart/burndown-table-producer"),a=t("jira-agile/rapid/ui/chart/burndown-timeline-producer"),u=t("jira-agile/rapid/ui/chart/chart-colors"),c=GH.FlotChartUtils,n=GH.ChartUtils,r=GH.TimeFormat,d=GH.NumberFormat;return e.prototype.setParams=function(t){this.statistic=t.statistic,this.issueAddedText=t.issueAddedText,this.issueRemovedText=t.issueRemovedText,this.startText=t.startText},e.prototype.setRawData=function(t){this.data=t,this.processData()},e.prototype.processData=function(){this.ensureIssuesHaveEstimateText(),this.makeStatisticsValuesRenderable()},e.prototype.setRawChartData=function(t){this.chartData=t,this.processChartData()},e.prototype.getStartTime=function(){return this.chartData.startTime},e.prototype.processChartData=function(){this.chartData.endTime||(this.chartData.endTime=this.chartData.now),i.setRateData(this.chartData.workRateData);var t=a.ProgressConsumer;this.timelineData=a.calculateTimelineData(this.chartData,t),this.calculateSeries()},e.prototype.hasIssues=function(){var t=this.getReportContent();return t?0<t.completedIssues.length||0<t.incompleteEstimatedIssues.length||0<t.incompleteUnestimatedIssues.length:!!this.chartData&&!o.isEmpty(this.chartData.changes)},e.prototype.getReportContent=function(){if(this.data)return this.data.contents},e.prototype.getRenderer=function(){return this.statistic.renderer},e.prototype.isIssueCountStatistic=function(){return"issueCount"===this.statistic.typeId},e.prototype.isTimeTracking=function(){return"timeSpent"===this.statistic.fieldId},e.prototype.shouldAddToSeries=function(e,t){var i=!1;return o.each(t,function(t){i=i||t.deltas&&0!==t.deltas[e.id]}),i},e.prototype.getAllSeriesDefinitions=function(){var t=AJS.escapeHtml(this.statistic.name||"");return{totalEstimate:{id:"totalEstimate",label:AJS.format("Total {0}",t),renderer:this.getRenderer(),statisticName:t},completedEstimate:{id:"completedEstimate",label:AJS.format("Completed {0}",t),renderer:this.getRenderer(),statisticName:t},issueCount:{id:"issueCount",label:"Number of issues",renderer:"number",statisticName:"Issue Count"},unestimatedIssueCount:{id:"unestimatedIssueCount",label:"Number of unestimated issues",renderer:"number",statisticName:"Issue Count"}}},e.prototype.calculateSeries=function(){var t=[],e=this.getAllSeriesDefinitions();this.isIssueCountStatistic()?(t.push(o.defaults({color:u.scope,yaxis:1,fill:.3,lineWidth:1},e.totalEstimate)),t.push(o.defaults({color:u.completed,yaxis:1,fill:.2,lineWidth:1},e.completedEstimate))):(t.push(o.defaults({color:u.scope,yaxis:1,fill:.3,lineWidth:1},e.totalEstimate)),t.push(o.defaults({color:u.completed,yaxis:1,fill:.2,lineWidth:1},e.completedEstimate)),t.push(o.defaults({color:u.issueCount,yaxis:2,lineWidth:1},e.issueCount)),t.push(o.defaults({color:u.unestimated,yaxis:2,lineWidth:1},e.unestimatedIssueCount))),this.calculateSeriesFromIds(t)},e.prototype.calculateSeriesFromIds=function(t){var i,s,e,a=this.timelineData,n=a?a.timeline:void 0,r=this.series=[];o.isEmpty(n)||(i={},s={},o.each(t,function(t){i[t.id]=[],s[t.id]=[]}),o.each(n,function(e){o.each(t,function(t){this.shouldAddToSeries(t,e.issues)&&(e.deltas&&o.isNumber(e.deltas[t.id])&&0!=e.deltas[t.id]&&(i[t.id].push([e.time,e.values[t.id]-e.deltas[t.id]]),s[t.id].push({})),i[t.id].push([e.time,e.values[t.id]]),s[t.id].push(e))},this)},this),e=o.last(n),!a.completeTime||a.completeTime>a.now?o.each(t,function(t){i[t.id].push([Math.max(a.startTime,a.now),e.values[t.id]])}):o.each(t,function(t){i[t.id].push([a.completeTime,e.values[t.id]])}),this.isTimeTracking()&&r.push({id:"timeSpent",data:i.timeSpent,color:u.timeSpent,label:"Time Spent"}),o.each(t,function(t){r.push({id:t.id,data:i[t.id],color:t.color,label:t.label,yaxis:t.yaxis,lines:{fill:t.fill,lineWidth:t.lineWidth,show:!0}})}),r.push({id:"markings",color:u.nonWorkingDays,data:[],label:"Non-Working Days"}),n=a.maxValues.totalEstimate,this.yAxisData=c.calculateYAxis(n,this.statistic),this.yAxisData.min=0,this.yAxisData.max=n,this.series=r,this.seriesData=s)},e.prototype.getXAxisStart=function(){return this.chartData.startTime-.02*(this.chartData.endTime-this.chartData.startTime)},e.prototype.getYAxes=function(){var t,e,i=[];return i.push(this.yAxisData),this.isIssueCountStatistic()||(e=1,15<(t=this.timelineData.maxValues.issueCount)&&(e=Math.ceil(t/8)),i.push({position:"right",min:0,tickFormatter:function(t,e){return t.toFixed(0)},tickSize:e})),i},e.prototype.getDataBySeries=function(t){return this.seriesData&&this.seriesData[t]},e.prototype.getTooltipData=function(i,t){var s={};return t.initial?(t.initial&&(s.initial=!0,s.event=this.getEpicStartChangeEvent()),s.issueCount=o.size(t.issues),s.statisticName=this.getSeriesStatisticName(i),s.statisticValue=n.renderStatisticText(t.values[i],!1,this.getSeriesRenderer(i))):(s.changes=[],o.each(t.issues,function(t){var e={};e.key=t.key,e.statisticName=this.getSeriesStatisticName(i),e.statisticDelta=n.renderStatisticText(t.deltas[i],!1,this.getSeriesRenderer(i)),e.event=this.getChangeEvent(t),s.changes.push(e)},this)),s.dateText=n.renderUTCMillisAsDate(t.time),s},e.prototype.getSeriesRenderer=function(t){return this.getAllSeriesDefinitions()[t].renderer},e.prototype.getSeriesStatisticName=function(t){return this.getAllSeriesDefinitions()[t].statisticName},e.prototype.getDataBySeriesAtIndex=function(t,e){t=this.getDataBySeries(t);if(t)return t[e]},e.prototype.getChangeEvent=function(t){var e="Burnup",i=this.getScopeOrColumnChangeEvent(t,e);if(i)return i;if(t.estimateChange){var s=t.values.oldEstimateFieldValue,e=t.values.estimateFieldValue,i=!o.isUndefined(s),t=!o.isUndefined(e);return i&&t?{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",this.renderStatisticText(s),this.renderStatisticText(e))}:i?{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",this.renderStatisticText(s))}:{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",this.renderStatisticText(e))}}return{type:"unknown",detail:"unknown change"}},e.prototype.getScopeOrColumnChangeEvent=function(t,e){return t.scopeChange?t.inScope?{type:"Scope change",detail:this.issueAddedText}:{type:"Scope change",detail:this.issueRemovedText}:s.getColumnChangeEvent(t,e)},e.prototype.getStartChangeEvent=function(){return{type:this.startText,detail:""}},e.prototype.getSeries=function(){return this.series},e.prototype.getXAxisEnd=function(){},e.prototype.ensureIssuesHaveEstimateText=function(){var t=this.getReportContent(),e=this._getValueRenderer();function i(t){return o.isUndefined(t.estimateStatistic)||o.isUndefined(t.estimateStatistic.statFieldValue.value)?t.estimateStatistic={statFieldValue:{text:"-"}}:t.estimateStatistic.statFieldValue.text=e(t.estimateStatistic.statFieldValue.value),t}t.completedIssues=o.map(this.data.contents.completedIssues,i),t.incompleteUnestimatedIssues=o.map(this.data.contents.incompleteUnestimatedIssues,i),t.incompleteEstimatedIssues=o.map(this.data.contents.incompleteEstimatedIssues,i)},e.prototype._getValueRenderer=function(){var t="duration"===this.getStatistic().renderer?r.formatShortDurationForTimeTrackingConfiguration:d.format;return t},e.prototype.makeStatisticsValuesRenderable=function(){var t=this.getReportContent(),e=this._getValueRenderer();t.completedIssuesEstimateSum.text=e(t.completedIssuesEstimateSum.value),t.incompletedIssuesEstimateSum.text=e(t.incompletedIssuesEstimateSum.value)},e.prototype.getJql=function(){return this.jql},e.prototype.getDoneStatuses=function(){return this.data.doneStatuses},e.prototype.getNotDoneStatuses=function(){return this.data.notDoneStatuses},e.prototype.renderStatisticText=function(t,e){return n.renderStatisticText(t,e,this.getStatistic().renderer)},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/NonWorkingDaysUtils.js' */
define("jira-agile/rapid/ui/chart/non-working-days-util",["require"],function(n){"use strict";var o=n("underscore"),d=n("jira-agile/rapid/ui/chart/burndown-rate"),n={};return n.transformSeriesExcludingNonWorkingDays=function(n,e,t){o.isUndefined(t)&&(t=o.pluck(n,"id"));var a=o.map(n,function(n){var r=o.clone(n);return r.data=o.map(n.data,function(n){return{xValue:n[0],yValue:n[1],xTransform:0}}),r}),n=d.getAdjustedNonWorkingDays(e);return o.each(n,function(r){o.each(a,function(n){n.data=o.map(n.data,function(n){return{xValue:n.xValue,yValue:n.yValue,xTransform:n.xTransform+function(n,r){if(n.xValue>=r.start){if(!(r.start<=e&&r.end>=e))return n.xValue<r.end?n.xValue-r.moveTo:r.end-r.moveTo;if(n.xValue>=r.end)return r.end-e}return 0}(n,r)}})})}),o.map(a,function(n){var r=o.clone(n);return-1<o.indexOf(t,n.id)?r.data=o.map(n.data,function(n){return[n.xValue-n.xTransform,n.yValue]}):r.data=o.map(n.data,function(n){return[n.xValue,n.yValue]}),r})},n.transformDateIfInNonWorkingDays=function(n,r){if(n<r)return new Date(n);var r=d.getAdjustedNonWorkingDays(r),e=n;return o.each(r,function(n){e>=n.start&&(e+=n.end-n.moveTo)}),new Date(e)},n.deductNonWorkingDays=function(r,e){var n=d.getAdjustedNonWorkingDays(e),t=o.filter(n,function(n){return e>=n.start&&e<n.end}),a=o.filter(n,function(n){return r>=n.start&&r<n.end}),u=r;0<a.length&&(u=a[0].start);var i=e;0<t.length&&(i=t[0].end,u-=i-e);n=o.filter(n,function(n){return n.end>i&&n.start<u});return o.each(n,function(n){u-=n.end-n.start}),u},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/EpicReportController.js' */
GH.EpicReportController={},GH.EpicReportController.id="epicReport",function(){var e=require("jira-agile/rapid/analytics-tracker");GH.EpicReportController.analytics=new e("gh.report.epicReport")}(),GH.EpicReportController.init=function(){var e=require("jira-agile/rapid/ui/component/chart-picker");GH.EpicReportController.epicPicker=new e("epicReport.selectedEpicId",GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("This board doesn\'\'t currently contain any {0}",GH.RapidBoard.State.getEpicLevelName()):"There are currently no epics on this board"),AJS.$(GH.EpicReportController.epicPicker).bind("selectedItemChanged",GH.EpicReportController.handleEpicChanged)},GH.EpicReportController.setRapidView=function(e){GH.EpicReportController.rapidViewData=e||{}},GH.EpicReportController.isApplicable=function(e){return e.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.EpicReportController.getNormalizedFromInternal=function(){return{epic:GH.EpicReportController.getSelectedEpicKey()||null}},GH.EpicReportController.toUrl=function(e){return _.isNull(e.epic)?{}:{epic:e.epic}},GH.EpicReportController.updateInternalFromNormalized=function(e){GH.EpicReportController.setSelectedEpicFromUrlState(e.epic)},GH.EpicReportController.getNormalizedFromUrl=function(e){return{epic:GH.RapidBoard.UrlState.normalizeStringParam(e.epic,null)}},GH.EpicReportController.hide=function(){GH.EpicReportController.displayed=!1},GH.EpicReportController.show=function(){var e=require("jira-agile/rapid/ui/chart/chart-controller");GH.EpicReportController.displayed=!0,GH.EpicReportController.rapidViewData&&(GH.EpicReportView.renderChartLoading(),e.loadRapidViewConfig(GH.EpicReportController,GH.EpicReportController.loadEpicsList),GH.EpicReportController.analytics.trigger("show"),require("jira/analytics/web-client").sendTrackEvent({source:"epicReportScreen",action:"viewed",actionSubject:"report",actionSubjectId:"epicReport",attributes:{boardId:GH.SprintRetrospectiveController.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(!0),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile"}}))},GH.EpicReportController.loadEpicsList=function(){var e={rapidViewId:GH.EpicReportController.rapidViewData.id};GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epicListForEpicReport").done(GH.EpicReportController.processEpicData).fail(GH.ChartView.hideSpinner)},GH.EpicReportController.processEpicData=function(e){var t=require("jira/featureflags/feature-manager");GH.EpicReportController.displayed&&(GH.EpicReportController.epicsData=e,e=_.map(e.epics,function(e){var r=t.isFeatureEnabled("epic-reports-use-summary-rather-than-epic-name_jo7cv");return{id:e.key,name:r?GH.EpicConfig.getEpicNameString(e.summary,e.key):GH.EpicConfig.getEpicNameString(e.epicLabel,e.key)}}),GH.EpicReportController.epicPicker.setItems(e),GH.EpicReportController.epicPicker.setDefaultItem(_.first(e)),GH.EpicReportView.renderEpicPicker(),GH.EpicReportView.setUserTimeZoneLabel(GH.TimeFormat.userTimeZoneLabel),GH.EpicReportController.epicPicker.getSelectedItem()?GH.EpicReportController.loadReportData():GH.ChartView.hideSpinner(),GH.RapidBoard.State.replaceState())},GH.EpicReportController.loadReportData=function(){GH.EpicReport.createModel();var e=GH.EpicReportController.epicPicker.getSelectedItem().id,r={rapidViewId:GH.EpicReportController.rapidViewData.id,epicKey:e},t=GH.Ajax.get({url:"/rapid/charts/epicreport",data:r},"epicReportData"+e).done(GH.EpicReportController.processReportData),e=GH.Ajax.get({url:"/rapid/charts/epicprogresschart",data:r},"epicprogresschart"+e).done(GH.EpicReportController.processChartData);AJS.$.when(t,e).then(GH.EpicReportController.performDataConsistencyCheck,GH.EpicReportController.failedToLoad)},GH.EpicReportController.failedToLoad=function(){GH.ChartView.hideSpinner(),GH.EpicReportController.epicPicker.removeSelectedItemAndRevert(GH.ChartView.getChartSelector(!0))},GH.EpicReportController.processReportData=function(e){var r;GH.EpicReportController.displayed&&((r=_.findWhere(GH.EpicReportController.epicsData.epics,{id:e.epic.id}))&&(e.epic.linkedPagesCount=r.linkedPagesCount,_.extend(e,_.pick(GH.EpicReportController.epicsData,"canEditEpics","supportsPages"))),GH.EpicReport.model.setRawData(e),GH.EpicReportView.renderReport())},GH.EpicReportController.processChartData=function(e){GH.EpicReportController.displayed&&(GH.EpicReport.model.setRawEpicChartData(e),GH.EpicReportView.renderChart())},GH.EpicReportController.performDataConsistencyCheck=function(){var e;GH.EpicReportController.displayed&&(e=GH.EpicReport.model.getIssuesWithStatisticFieldMismatch(),_.isEmpty(e)||GH.EpicReportView.renderStatisticMismatchWarning(e))},GH.EpicReportController.handleEpicChanged=function(){GH.EpicReportController.displayed&&(GH.RapidBoard.State.pushState(),GH.EpicReportController.loadReportData())},GH.EpicReportController.getSelectedEpicKey=function(){var e=GH.EpicReportController.epicPicker.getSelectedItem();if(e)return e.id},GH.EpicReportController.setSelectedEpicFromUrlState=function(e){GH.EpicReportController.epicPicker.storeSelectedItemId(e)},GH.EpicReportController.setPointsForChart=function(e,r){var t=r.id,o=GH.EpicReport.model.getDataBySeries(t);o&&(o=GH.FlotChartUtils.gatherPoints(r,o),e.realPointsPerSeries[t]=o)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/EpicReportView.js' */
!function(){"use strict";var t=require("jira-agile/rapid/const/PageMode");GH.EpicReportView={},GH.EpicReportView.setUserTimeZoneLabel=function(e){GH.EpicReportView.userTimeZoneLabel=e},GH.EpicReportView.renderChartLoading=function(){GH.ChartView.getChartContentElem(!0).html(GH.tpl.epicreport.renderReportBody({shouldUseFlexibleNaming:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports(),epicLevelName:GH.RapidBoard.State.getEpicLevelName()})),GH.ChartView.showSpinner()},GH.EpicReportView.toggleChartVisibility=function(){GH.ChartView.hideSpinner(),AJS.$("#ghx-chart-mismatch").empty(),GH.EpicReport.model.hasIssues()?(AJS.$("#ghx-epic-report-no-issues").hide(),AJS.$("#ghx-report-content").show()):(AJS.$("#ghx-report-content").hide(),AJS.$("#ghx-epic-report-no-issues").show())},GH.EpicReportView.renderReport=function(){GH.EpicReportView.toggleChartVisibility(),GH.EpicReportView.renderMeta(),GH.EpicReport.model.hasIssues()&&(GH.EpicReportView.renderIssuesReport(),GH.EpicReportView.renderSummary())},GH.EpicReportView.renderEpicPicker=function(){GH.EpicReportController.epicPicker.render(GH.ChartView.getChartSelector(!0))},GH.EpicReportView.renderIssuesReport=function(){var e=GH.EpicReport.model.getReportContent(),t=GH.EpicReport.model.hasIssues(),i=AJS.$("#ghx-report-content .ghx-epic-report");i.empty().html(GH.tpl.epicreport.renderEpicReport({content:e,jql:GH.EpicReport.model.getJql(),estimationStatistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,hasIssues:t})),i.find(".issue-table-title-tooltip").tooltip()},GH.EpicReportView.renderSummary=function(){AJS.$("#ghx-report-content .ghx-epic-summary").empty().html(GH.tpl.epicreport.renderEpicSummary({epic:GH.EpicReport.model.getEpicSummary(),issuesJql:GH.EpicReport.model.getJql().allIssues}))},GH.EpicReportView.renderMeta=function(){var e=GH.EpicReport.model.getEpic();AJS.$("#ghx-epic-meta").empty().append(GH.tpl.epicreport.renderEpicReportHeader({epic:e,showPages:GH.EpicReport.model.supportsPages(),shouldUseFlexibleNaming:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports(),epicLevelName:GH.RapidBoard.State.getEpicLevelName()})).show(),GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,t.REPORT,e.id,AJS.$("#ghx-epic-meta .js-view-entity-pages"))},GH.EpicReportView.renderStatisticMismatchWarning=function(e){e=_.pluck(e,"key"),e=GH.tpl.epicreport.renderStatisticValueMismatchMessage({statisticName:GH.EpicReport.model.getStatistic().name,keys:e.join(", ")});AJS.messages.warning("#ghx-chart-mismatch",{body:e,closeable:!0,shadowed:!1})},GH.EpicReportView.renderChart=function(){var e,t,i=require("jira-agile/rapid/ui/chart/chart");GH.EpicReportView.toggleChartVisibility(),GH.EpicReport.model.hasIssues()&&(e=GH.ChartView.getChartView(!0),t=GH.EpicReport.model.getSeries(),i=i.draw(GH.EpicReportController.id,e,t,GH.ChartUtils.getChartOptions(GH.EpicReport.model)),t=!1,1<GH.EpicReport.model.getYAxes().length&&(t="Issue Count"),GH.FlotChartUtils.setAndAlignAxisLabels(AJS.format("Time ({0})",GH.EpicReportView.userTimeZoneLabel),GH.EpicReport.model.getStatistic().name,t),i.hooks.drawSeries.push(GH.EpicReportView.gatherPoints),i.hooks.draw.push(GH.FlotChartUtils.deferredRenderPoints),GH.EpicReportView.bindEvents(e))},GH.EpicReportView.handlePlotHover=function(e,t,i){if(i){var r=i.series.id,o=i.dataIndex,o=GH.EpicReport.model.getDataBySeriesAtIndex(r,o);if(!_.isEmpty(o))return void(GH.EpicReportView.previousPlotHoverPoint!==i.dataIndex&&(GH.EpicReportView.previousPlotHoverPoint=i.dataIndex,AJS.$("#ghx-tooltip").remove(),GH.EpicReportView.showChartTooltip(i,r,o,i.datapoint[0]),AJS.$("#ghx-tooltip").hasClass("ghx-has-warnings")||GH.ChartView.getChartView().addClass("ghx-clickable")))}AJS.$("#ghx-tooltip").remove(),GH.EpicReportView.previousPlotHoverPoint=null,GH.ChartView.getChartView().removeClass("ghx-clickable")},GH.EpicReportView.showChartTooltip=function(e,t,i){i&&(i=GH.EpicReport.model.getTooltipData(t,i),new GH.ChartTooltip(e,i).render())},GH.EpicReportView.previousPlotHoverPoint=void 0,GH.EpicReportView.gatherPoints=function(e,t,i){e.mouseEntered&&GH.EpicReportController.setPointsForChart(e,i)},GH.EpicReportView.bindEvents=function(e){e.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",GH.FlotChartUtils.handleMouseOverStateChange),e.unbind("plothover plotclick"),e.bind("plothover",GH.EpicReportView.handlePlotHover),e.bind("plotclick",GH.FlotChartUtils.handlePlotClick)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/EpicReportModel.js' */
GH.EpicReport={},GH.EpicReport.createModel=function(){GH.EpicReport.model=new GH.EpicReportModel,GH.EpicReport.model.setParams({statistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,issueAddedText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("Issue added to {0}",GH.RapidBoard.State.getEpicLevelName()):"Issue added to epic",issueRemovedText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("Issue removed from {0}",GH.RapidBoard.State.getEpicLevelName()):"Issue removed from epic",startText:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("{0} Created",GH.RapidBoard.State.getEpicLevelName()):"Epic Created"})},GH.EpicReportModel=function(){},function(){var t=require("jira-agile/rapid/ui/chart/changes-report-model");GH.EpicReportModel.prototype=new t}(),GH.EpicReportModel.prototype.setRawEpicChartData=function(t){t.startTime=t.epicCreationTime,this.setRawChartData(t)},GH.EpicReportModel.prototype.setRawData=function(t){this.data=t,this.processData(),this.generateJql(),this.generateSummary()},GH.EpicReportModel.prototype.generateSummary=function(){var t=require("jira/featureflags/feature-manager"),e={},i={},s=this.getReportContent();function a(t){return _.reduce(t,function(t,e){e=e.estimateStatistic.statFieldValue.value;return t+(e=_.isUndefined(e)?0:e)},0)}i.done=s.completedIssues.length,i.notEstimated=s.incompleteUnestimatedIssues.length,i.totalIssueCount=i.done+i.notEstimated+s.incompleteEstimatedIssues.length,e.epicStats=i,e.estimateDone=a(s.completedIssues),e.estimateTotal=e.estimateDone+a(s.incompleteEstimatedIssues),e.estimateStatisticName=this.getStatistic().name,e.isIssueCountStatistic=this.isIssueCountStatistic(),e.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,e.estimateDone),e.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,e.estimateTotal);s=this.getEpic(),t=t.isFeatureEnabled("epic-reports-use-summary-rather-than-epic-name_jo7cv");e.epicName=t?GH.EpicConfig.getEpicNameString(s.summary,s.key):GH.EpicConfig.getEpicNameString(s.label,s.key),this.data.epicSummary=e},GH.EpicReportModel.prototype.generateJql=function(){var t=this.getStatistic();this.jql={};var e,i,s=GH.ChartUtils.createEpicJql(this.data.epic),a=s+" AND "+GH.ChartUtils.createStatusJql(this.getNotDoneStatuses());this.isIssueCountStatistic()?this.jql.incompleteEstimatedIssues=a:(e=t.fieldId,(t=(i=/^customfield_(\d+)/.exec(e))&&0<i.length)&&(e="cf["+i[1]+"]"),this.jql.incompleteUnestimatedIssues=a+" AND "+e+" IS EMPTY",t?0<this.data.contents.incompleteEstimatedIssues.length&&(this.jql.incompleteEstimatedIssues=GH.ChartUtils.createIssueJql(this.data.contents.incompleteEstimatedIssues)):this.jql.incompleteEstimatedIssues=a+" AND "+e+" IS NOT EMPTY"),this.jql.completedIssues=s+" AND "+GH.ChartUtils.createStatusJql(this.getDoneStatuses()),this.jql.allIssues=s},GH.EpicReportModel.prototype.getEpic=function(){return this.data.epic},GH.EpicReportModel.prototype.getEpicSummary=function(){return this.data.epicSummary},GH.EpicReportModel.prototype.getStatistic=function(){return GH.EpicReportController.rapidViewConfig.estimationStatistic},GH.EpicReportModel.prototype.canUserEditEpics=function(){return!!this.data.canEditEpics},GH.EpicReportModel.prototype.supportsPages=function(){return!!this.data.supportsPages},GH.EpicReportModel.prototype.getIssuesWithStatisticFieldMismatch=function(){if(this.isIssueCountStatistic())return[];var i=this.timelineData.finalIssueStates,t=this.data.contents,t=_.flatten([t.completedIssues,t.incompleteEstimatedIssues,t.incompleteUnestimatedIssues]),s=[];return _.each(t,function(t){var e=i[t.key];e&&t.estimateStatistic&&t.estimateStatistic.statFieldValue&&t.estimateStatistic.statFieldValue.value!=e.values.estimateFieldValue&&s.push({key:e.key,reportValue:t.estimateStatistic.statFieldValue.value,chartValue:e.values.estimateFieldValue,reportIssue:t,chartIssue:e})}),s};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/EpicReport.soy' */
// This file was automatically generated from EpicReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epicreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epicreport == 'undefined') { GH.tpl.epicreport = {}; }


GH.tpl.epicreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-chart-controls"></div><div id="ghx-epic-meta" class="ghx-epic-meta"></div><div id="ghx-epic-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.shouldUseFlexibleNaming ? AJS.format('{0} does not contain any issues.',opt_data.epicLevelName) : 'This epic does not contain any issues.') + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-epic-summary-wrap"><div id="ghx-chart-legend" class="ghx-epic-chart-legend"></div><div class="ghx-epic-summary"></div></div><div id="ghx-chart-wrap" class="ghx-epic-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-epic-report ghx-margin-top"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderReportBody.soyTemplateName = 'GH.tpl.epicreport.renderReportBody';
}


GH.tpl.epicreport.renderStatisticValueMismatchMessage = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(AJS.format('Some issues have {0} even though their current configuration does not allow a value to be set.',opt_data.statisticName)) + ' ' + soy.$$escapeHtml('As a result the numbers in the chart will be different to the summary and status report.') + '<br>' + soy.$$escapeHtml(AJS.format('Affected issues are: {0}',opt_data.keys));
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderStatisticValueMismatchMessage.soyTemplateName = 'GH.tpl.epicreport.renderStatisticValueMismatchMessage';
}


GH.tpl.epicreport.renderEpicReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Status Report') + '</h3><div class="ghx-epic-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Issues'), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: 'Incomplete Unestimated Issues', titleTooltip: '\x22Unestimated issues\x22 also includes issues that cannot be estimated due to their configuration, e.g. no Story Points field.', issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReport.soyTemplateName = 'GH.tpl.epicreport.renderEpicReport';
}


GH.tpl.epicreport.renderEpicSummary = function(opt_data, opt_ignored) {
  var output = '<h4>' + soy.$$escapeHtml('Summary') + '</h4><h5>' + soy.$$escapeHtml('Issues') + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Total') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.totalIssueCount) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Completed') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.done) + '</div></div>' + ((! opt_data.epic.isIssueCountStatistic) ? '<div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Unestimated') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.notEstimated) + '</div></div><h5 id="ghx-stat-name">' + soy.$$escapeHtml(opt_data.epic.estimateStatisticName) + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Total') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateTotal) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Done') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateDone) + '</div></div>' : '') + '<div class="ghx-margin-top">';
  var issueNavLink__soy82 = '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.issuesJql});
  output += '<a href="' + soy.$$escapeHtml(issueNavLink__soy82) + '">' + soy.$$escapeHtml(AJS.format('View {0} in Issue Navigator',opt_data.epic.epicName)) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicSummary.soyTemplateName = 'GH.tpl.epicreport.renderEpicSummary';
}


GH.tpl.epicreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.epicreport.issueNavLink.soyTemplateName = 'GH.tpl.epicreport.issueNavLink';
}


GH.tpl.epicreport.renderEpicReportHeader = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-inline-blocks"><div class="aui-item"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.epic.key) + '">' + soy.$$escapeHtml(opt_data.epic.key) + '</a> ' + soy.$$escapeHtml(opt_data.epic.summary) + '</div>' + ((opt_data.showPages) ? '<div class="aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.epic.linkedPagesCount, title: opt_data.shouldUseFlexibleNaming ? AJS.format('Create and view pages linked to {0}',opt_data.epicLevelName) : 'Create and view pages linked to this epic'}) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReportHeader.soyTemplateName = 'GH.tpl.epicreport.renderEpicReportHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReportController.js' */
define("jira-agile/rapid/ui/chart/version-report-controller",["require"],function(e){"use strict";var t=e("jquery"),a=e("underscore"),r=e("jira/analytics/web-client"),i=e("jira-agile/rapid/analytics-tracker"),n=e("jira-agile/rapid/ui/chart/burndown-rate"),o=e("jira-agile/rapid/ui/chart/chart-controller"),s=e("jira-agile/rapid/ui/component/chart-picker"),d=e("jira-agile/rapid/ui/chart/chart-view"),c=e("jira-agile/rapid/ui/chart/version-report"),l=e("jira-agile/rapid/ui/chart/version-report-view"),p=e("jira-agile/rapid/ajax"),u=(e("jira/featureflags/feature-manager"),e("jira-agile/features/feature-flags"),GH.ChartUtils),g=GH.FlotChartUtils,v=GH.RapidBoard.State,h=GH.RapidBoard.UrlState,f=GH.TimeFormat,m=GH.VersionsModel,D={nonWorkingDaysShown:!0,id:"versionReport"};return D.analytics=new i("gh.report.versionReport"),D.init=function(){D.versionPicker=new s("versionReport.selectedVersionId","There are currently no versions on this board.")},D.isApplicable=function(e){return e.sprintSupportEnabled},D.setRapidView=function(e){D.rapidViewData=e||{}},D.getRapidView=function(){return D.rapidViewData},D.getNormalizedFromInternal=function(){return{version:D.getSelectedVersionId()||null}},D.toUrl=function(e){return a.isNull(e.version)?{}:{version:e.version}},D.updateInternalFromNormalized=function(e){D.setSelectedVersionFromState(e.version)},D.getNormalizedFromUrl=function(e){return{version:h.normalizeNumberParam(e.version,null)}},D.getSelectedVersionId=function(){var e=D.versionPicker.getSelectedItem();if(e)return e.id;e=D.versionPicker.getStoredSelectedItemId();return-1!=e?e:null},D.show=function(){D.displayed=!0,D.rapidViewData&&(l.renderChartLoading(),t(D.versionPicker).on("selectedItemChanged",D.handleVersionChanged),o.loadRapidViewConfig(D,D.loadVersionsList),D.analytics.trigger("show"))},D.hide=function(){t(D.versionPicker).off("selectedItemChanged",D.handleVersionChanged),D.displayed=!1},D.loadVersionsList=function(){var e={rapidViewId:D.rapidViewData.id};p.get({url:"/xboard/plan/backlog/versions.json",data:e},"versionsListForReport").done(D.processVersionData).fail(d.hideSpinner)},D.processVersionData=function(e){var r;D.displayed&&((r=D.versionModel=new m(e.projects)).updateRawData(e.versionData),(r=a.map(r.getAllVersions(),function(e){return{id:e.id,name:e.project?e.project.key+": "+e.name:e.name}})).reverse(),D.versionPicker.setItems(r),D.versionPicker.setDefaultItem(a.first(r)),l.setUserTimeZoneLabel(f.userTimeZoneLabel),l.renderVersionPicker(),D.versionPicker.getSelectedItem()?D.loadReportData():d.hideSpinner(),D.nonWorkingDaysShown=v.getNonWorkingDaysShown("version"),v.replaceState())},D.loadReportData=function(){c.createModel(D.rapidViewConfig.estimationStatistic);var e={rapidViewId:D.getRapidView().id,versionId:D.getSelectedVersionId()},r=p.get({url:"/rapid/charts/versionprogresschart",data:e},"versionChartData").done(D.processChartData),e=p.get({url:"/rapid/charts/versionreport",data:e},"versionReportData").done(D.processReportData);t.when(r,e).then(D.calculatePredictions,D.failedToLoad)},D.failedToLoad=function(){d.hideSpinner(),D.versionPicker.removeSelectedItemAndRevert(d.getChartSelector(!0))},D.processChartData=function(e){D.displayed&&c.model.setRawVersionChartData(e)},D.calculatePredictions=function(){var e,r=c.model.getFurthestDateForNonWorkingDaysData();r<1/0&&r>c.model.getVersionStartDate()?((e=r)<=(r=(new Date).valueOf()+90*u.oneDayInMillis)&&(e=r),p.get({url:"/rapidviewconfig/workingdays/rates",data:{rapidViewId:D.rapidViewData.id,startDate:c.model.getVersionStartDate()-3*u.oneDayInMillis,endDate:e}},"workingdaysrates").done(function(e){n.setRateData(e),D.renderChart()})):D.renderChart()},D.renderChart=function(){D.displayed&&(l.renderChart(),l.renderIssuesLink(),l.renderMeta(),r.sendTrackEvent({source:"versionReportScreen",action:"viewed",actionSubject:"report",actionSubjectId:"version",attributes:{boardId:D.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),versionId:D.getSelectedVersionId(),projectId:JIRA.API.Projects.getCurrentProjectId(!0),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile"}}))},D.setSelectedVersionFromState=function(e){D.versionPicker.storeSelectedItemId(e)},D.setPointsForChart=function(e,r){var t=r.id,a=c.model.getDataBySeries(t);a&&(a=g.gatherPoints(r,a),e.realPointsPerSeries[t]=a)},D.handleVersionChanged=function(e){D.displayed&&(v.pushState(),D.loadReportData())},D.processReportData=function(e){D.displayed&&(c.model.setRawData(e),l.renderReport())},D});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReportView.js' */
define("jira-agile/rapid/ui/chart/version-report-view",["require"],function(e){"use strict";var d,l=e("jquery"),h=e("underscore"),n=e("jira-agile/rapid/ui/chart/change-event"),s=e("jira-agile/rapid/ui/chart/chart"),g=e("jira-agile/rapid/ui/chart/chart-colors"),p=e("jira-agile/rapid/ui/chart/chart-controller"),c=e("jira-agile/rapid/ui/chart/chart-view"),t=e("jira-agile/rapid/global-events"),m=e("jira-agile/rapid/ui/chart/non-working-days-util"),u=e("jira-agile/rapid/ui/chart/version-report"),a=GH.ChartTooltip,x=GH.ChartUtils,f=GH.FlotChartUtils,v=GH.tpl;t.on("pre-initialization",function(){d=e("jira-agile/rapid/ui/chart/version-report-controller")});var S={unmodifiedSeries:void 0,series:void 0,setUserTimeZoneLabel:function(e){S.userTimeZoneLabel=e},renderChartLoading:function(){c.getChartContentElem(!0).html(v.versionreport.renderReportBody()),c.showSpinner()},renderVersionPicker:function(){d.versionPicker.render(c.getChartSelector(!0))},renderChart:function(){var e,i,t,r,o,n,a;S.toggleChartVisibility(!0),u.model.hasIssues()&&!u.model.notStarted()&&(e=c.getChartView(!0),n=u.model.getVersionSeries(),S.wallboardMode&&(h.findWhere(n,{id:"markings"}).color=g.nonWorkingDaysWallboard),a=S.getChartOptions(),S.unmodifiedSeries=n,S.series=n,d.nonWorkingDaysShown||(i=u.model.getXAxisStart(),n=m.transformSeriesExcludingNonWorkingDays(n,i),S.series=n,h.findWhere(n,{id:"prediction"})&&(r=h.findWhere(n,{id:"pessimistic"}),o=h.findWhere(n,{id:"prediction"}),t=h.first(r.data),r=h.last(r.data),o=h.last(o.data),o=x.calculateYProjection(t,r,o),h.findWhere(n,{id:"pessimisticFillerBottom"}).data[0][1]=o),h.findWhere(n,{id:"scope"})&&(h.last(h.findWhere(n,{id:"scope"}).data)[0]=a.xaxis.max),a.xaxis.tickFormatter=function(e,t){var r=m.transformDateIfInNonWorkingDays(e,i),e="%b %d";return"hour"===t.tickSize[1]?e+=" %h:%M":"minute"===t.tickSize[1]?e=" %h:%M":"second"===t.tickSize[1]&&(e=" %h:%M:%S"),l.plot.formatDate(r,e)}),n=s.draw(d.id,e,n,a),a=!1,1<u.model.getYAxes().length&&(a="Percent"),S.renderLabelsForNowAndRelease(n),S.setLegendOpacity(),f.setAndAlignAxisLabels(AJS.format("Time ({0})",S.userTimeZoneLabel),u.model.getStatistic().name,a),n.hooks.drawSeries.push(S.gatherPoints),n.hooks.draw.push(f.deferredRenderPoints),n.hooks.draw.push(S.renderLabelsForNowAndRelease),n.hooks.draw.push(S.setLegendOpacity),S.bindEvents(e))},getChartOptions:function(){var a=u.model,s=x.getChartOptions(a);return d.nonWorkingDaysShown||(s.xaxis.max=m.deductNonWorkingDays(s.xaxis.max,s.xaxis.min)),S.gadgetMode&&(s.legend.position="nw",s.legend.container=null,s.legend.backgroundOpacity=.5,s.legend.margin=[6,12],l("#ghx-chart-legend").hide()),S.wallboardMode?s.grid={backgroundColor:g.wallboard.backgroundColor,borderWidth:1,borderColor:g.wallboard.borderColor,color:g.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:g.wallboard.tickColor,markings:S.getMarkingsForGadget}:s.grid.markings=function(e){var t,r=p.getNonWorkingBlocks(),i=a.getNow(),o=[],n=[];return!a.getVersion().released&&e.xmax>i&&(d.nonWorkingDaysShown||(i=m.deductNonWorkingDays(i,s.xaxis.min)),t=e.ymax/198,o=S.drawDashedMarkings(i,e=4*t,t,70),i=a.getVersion().releaseDate,d.nonWorkingDaysShown||(i=m.deductNonWorkingDays(i,s.xaxis.min)),h.isUndefined(i)||(n=S.drawDashedMarkings(i,e*=2,t*=2,20,g.releaseDate))),d.nonWorkingDaysShown?r.concat(o,n):o.concat(n)},s},getMarkingsForGadget:function(){var t=g.nonWorkingDaysWallboard,e=p.getNonWorkingBlocks();return h.map(e,function(e){return e.color=t,e})},drawDashedMarkings:function(e,t,r,i,o){for(var n=[],a=0;a<i;a++){var s=a*(t+r);n.push({color:o||g.dashedMarking,lineWidth:1,xaxis:{from:e,to:e},yaxis:{from:s,to:s+t}})}return n},setLegendOpacity:function(){var e=l("#ghx-chart-legend").find(".legendColorBox");l(e[0]).find("div").find("div").css("opacity",.3),l(e[1]).find("div").find("div").css("opacity",.8)},renderIssuesLink:function(){var e=u.model.getVersion(),t=!0;60<e.name.length&&(t=!1),l("#ghx-report-controls").empty().append(v.versionreport.renderViewIssuesLink({projectKey:u.model.getProjectKey(),version:e,nameUse:t})).show()},renderLabelsForNowAndRelease:function(e){var t,r,i,o,n,a=e.getXAxes()[0],s=e.getYAxes()[0];u.model.chartData&&(t=u.model.getNow(),d.nonWorkingDaysShown||(t=m.deductNonWorkingDays(t,u.model.getXAxisStart())),i=(r=u.model.getVersion()).releaseDate,d.nonWorkingDaysShown||(i=m.deductNonWorkingDays(i,u.model.getXAxisStart())),(n=l("#ghx-axis-x-top")).empty(),t<a.max&&(o=l(v.versionreport.renderXaxisTopLabel({text:"Today",left:e.pointOffset({x:t,y:s.max}).left})),n.append(o)),!h.isUndefined(i)&&!r.released&&i>a.min&&i<a.max&&(s=e.pointOffset({x:i,y:s.max}).left,s=l(v.versionreport.renderXaxisTopLabel({text:"Release Date",date:x.renderUTCMillisAsDateWithoutTime(u.model.getVersion().releaseDate),left:s})),n.append(s),h.isUndefined(o)||S.labelsAreOverlapping(o,s)&&s.addClass("ghx-raised")))},labelsAreOverlapping:function(e,t){var r=e.position().left,i=r+e.width(),e=t.position().left,t=e+t.width();return r<e&&e<i||r<t&&t<i||e<r&&i<t},toggleChartVisibility:function(e){l("#ghx-chart-mismatch").empty(),e&&u.model.notStarted()?(l("#ghx-version-report-no-issues").hide(),l("#ghx-report-content").hide(),l("#ghx-version-report-not-started").show(),c.hideSpinner()):u.model.hasIssues()?(l("#ghx-version-report-no-issues").hide(),l("#ghx-version-report-not-started").hide(),l("#ghx-report-content").show()):(l("#ghx-report-content").hide(),l("#ghx-version-report-not-started").hide(),l("#ghx-version-report-no-issues").show(),c.hideSpinner())},gatherPoints:function(e,t,r){e.mouseEntered&&d.setPointsForChart(e,r)},bindEvents:function(e){e.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",f.handleMouseOverStateChange),e.unbind("plothover plotclick"),e.bind("plothover",S.handlePlotHover),e.bind("plotclick",f.handlePlotClick)},handlePlotHover:function(e,t,r){if(r){var i=r.series.id,o=r.dataIndex,o=u.model.getDataBySeriesAtIndex(i,o);if(!h.isEmpty(o))return void(S.isDataPointSameAsPrevious(r)||(S.previousPlotHoverPoint={dataIndex:r.dataIndex,seriesIndex:r.seriesIndex},l("#ghx-tooltip").remove(),S.showChartTooltip(r,i,o,r.datapoint[0]),l("#ghx-tooltip").hasClass("ghx-has-warnings")||c.getChartView().addClass("ghx-clickable")))}l("#ghx-tooltip").remove(),S.previousPlotHoverPoint=null,c.getChartView().removeClass("ghx-clickable")},isDataPointSameAsPrevious:function(e){return!h.isUndefined(S.previousPlotHoverPoint)&&!h.isNull(S.previousPlotHoverPoint)&&(e.dataIndex==S.previousPlotHoverPoint.dataIndex&&e.seriesIndex==S.previousPlotHoverPoint.seriesIndex)},showChartTooltip:function(e,t,r){var i,o;r&&(u.model.isReleaseDatePredictionSeriesId(t)?(i="Predicted Completion Date",o=h.findWhere(S.unmodifiedSeries,{id:"prediction"}).data[1][0],"optimistic"===t?(i="Predicted Completion Date"+" ("+"Optimistic"+")",o=h.findWhere(S.unmodifiedSeries,{id:"optimistic"}).data[1][0]):"pessimisticFillerBottom"===t&&(i="Predicted Completion Date"+" ("+"Pessimistic"+")",o=h.findWhere(S.unmodifiedSeries,{id:"pessimisticFillerBottom"}).data[1][0]),i={predictedReleaseDate:x.renderUTCMillisAsDateWithoutTime(o),description:i},new a(e,i,n.releaseDate)):"trendline"===t?(i={description:"Start Date",dateText:x.renderUTCMillisAsDateWithoutTime(e.datapoint[0])},new a(e,i,n.startDate)):"unestimatedPercent"===t?((i={unestimated:(r.values.unestimatedIssueCount/r.values.issueCount*100).toFixed(2),dateText:x.renderUTCMillisAsDate(r.time)}).changes=h.map(r.issues,function(e){return{key:e.key,event:this.getChangeEvent(e)}},u.model),new a(e,i,n.uncertainty)):(i=u.model.getTooltipData(t,r),new a(e,i))).render()},renderMeta:function(){var e,t,r,i,o;u.model.hasIssues()&&!u.model.notStarted()&&(e=u.model.getVersion(),t=h.findWhere(S.unmodifiedSeries,{id:"prediction"}),r=h.findWhere(S.unmodifiedSeries,{id:"optimistic"}),o=h.findWhere(S.unmodifiedSeries,{id:"pessimisticFillerBottom"}),i=e.released?"Released":"Unreleased",o={prediction:t?x.renderUTCMillisAsDateWithoutTime(t.data[1][0]):null,optimistic:r?x.renderUTCMillisAsDateWithoutTime(r.data[1][0]):null,pessimisticFillerBottom:o?x.renderUTCMillisAsDateWithoutTime(o.data[1][0]):null},S.gadgetMode?(AJS.$("#ghx-gadget-version-meta").empty().append(v.versionreport.renderVersionReportGadgetHeader({version:e,formattedReleaseDate:e.formattedReleaseDate,formattedStartDate:e.formattedStartDate,startTimezone:e.startTimeOffset,releaseTimezone:e.releaseTimeOffset,completionDate:o})).show(),AJS.$("#ghx-chart-header .ghx-version-report-version-status").text(" ("+i+")")):(AJS.$("#ghx-version-meta").empty().append(GH.tpl.versionreport.renderVersionReportHeader({version:e,formattedReleaseDate:e.formattedReleaseDate,formattedStartDate:e.formattedStartDate,startTimezone:e.startTimeOffset,releaseTimezone:e.releaseTimeOffset})).show(),e.released||AJS.$("#ghx-report-content .ghx-version-report-completion-date-estimates").empty().append(GH.tpl.versionreport.renderNonGadgetCompletionDates({completionDate:o})).show()))},renderReport:function(){S.toggleChartVisibility(),u.model.hasIssues()&&S.renderIssuesReport()},renderIssuesReport:function(){var e=u.model.getReportContent(),t=u.model.hasIssues();l("#ghx-report-content .ghx-version-report").empty().html(v.versionreport.renderVersionReport({content:e,jql:u.model.getJql(),estimationStatistic:u.model.getStatistic(),hasIssues:t})),c.hideSpinner()},setGadgetMode:function(e){S.gadgetMode=e},setWallboardMode:function(e){S.wallboardMode=e}};return S});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReportModel.js' */
define("jira-agile/rapid/ui/chart/version-report-model",["require"],function(t){"use strict";function e(t){this.estimationStatistic=t}var h=t("underscore"),s=t("jira-agile/rapid/ui/chart/changes-report-model"),l=t("jira-agile/rapid/ui/chart/chart-colors"),a=t("jira-agile/rapid/ui/chart/chart-controller"),r=t("jira-agile/rapid/ui/chart/release-date-predictor"),u=GH.ChartUtils;return(e.prototype=new s).getStatistic=function(){return this.estimationStatistic},e.prototype.getProjectKey=function(){return this.chartData.projectKey},e.prototype.getVersionName=function(){return this.chartData.version.name},e.prototype.getNow=function(){return this.chartData.now},e.prototype.getVersion=function(){return this.data&&this.data.version?this.data.version:this.chartData&&this.chartData.version?this.chartData.version:{}},e.prototype.setRawVersionChartData=function(t){t.version.released&&(t.endTime=t.version.releaseDate,t.completeTime=t.endTime),this.setRawChartData(t)},e.prototype.getXAxisEnd=function(){return h.isUndefined(this.xAxisEndDate)?this.chartData.endTime:this.xAxisEndDate},e.prototype.getYAxes=function(){var t=[];return t.push(this.yAxisData),this.isIssueCountStatistic()||t.push({position:"right",min:0,max:100,tickFormatter:function(t,e){return t.toFixed(0)},tickSize:10}),t},e.prototype.setRawData=function(t){this.data=t,this.processData(),this.generateJql()},e.prototype.generateJql=function(){var t=this.getStatistic();this.jql={};var e,i,s=u.createVersionJql(this.getVersion()),r=s+" AND "+u.createStatusJql(this.getNotDoneStatuses());this.isIssueCountStatistic()?this.jql.incompleteEstimatedIssues=r:(e=t.fieldId,(t=(i=/^customfield_(\d+)/.exec(e))&&0<i.length)&&(e="cf["+i[1]+"]"),this.jql.incompleteUnestimatedIssues=r+" AND "+e+" IS EMPTY",t?0<this.data.contents.incompleteEstimatedIssues.length&&(this.jql.incompleteEstimatedIssues=u.createIssueJql(this.data.contents.incompleteEstimatedIssues)):this.jql.incompleteEstimatedIssues=r+" AND "+e+" IS NOT EMPTY"),this.jql.completedIssues=s+" AND "+u.createStatusJql(this.getDoneStatuses()),this.jql.allIssues=s},e.prototype.getDataBySeries=function(t){var e=s.prototype.getDataBySeries.call(this,t);if(e)return e;if(this.isReleaseDatePredictionSeriesId(t)&&(e=h.findWhere(this.series,{id:t}))&&0<e.data.length){var i=new Array(e.data.length-1);return i.push(h.last(e.data)),i}return"trendline"===t&&(e=h.findWhere(this.series,{id:t}))?[h.first(e.data)]:"unestimatedPercent"===t&&(e=h.findWhere(this.series,{id:t}))&&0<e.data.length?h.map(e.data,function(t,e,i){e=i[e+1];if(h.isUndefined(e)||t[0]!==e[0])return t}):void 0},e.prototype.getDataBySeriesAtIndex=function(t,e){var i=this.getDataBySeries(t);if(i){if("unestimatedPercent"!==t)return i[e];i=i[e];if(i){e=s.prototype.getDataBySeries.call(this,"issueCount"),e=h.findWhere(e,{time:i[0]});if(!h.isUndefined(e))return e;e=s.prototype.getDataBySeries.call(this,"unestimatedIssueCount");return h.findWhere(e,{time:i[0]})}}},e.prototype.getVersionSeries=function(t){var e=this.getVersion();return!this.attemptedTrendlinePrediction&&h.isUndefined(h.findWhere(this.series,{id:"trendline"}))&&(this.series=this.series.concat(this.getTrendlineSeries()),this.attemptedTrendlinePrediction=!0),!this.isIssueCountStatistic()&&h.isUndefined(h.findWhere(this.series,{id:"unestimatedPercent"}))&&(this.series=this.series.concat(this.getUnestimatedSeries()),this.series=h.reject(this.series,function(t){return"issueCount"===t.id||"unestimatedIssueCount"===t.id})),e.released||h.isUndefined(h.findWhere(this.series,{id:"prediction"}))&&(this.series=this.series.concat(this.getPredictedSeries()),e=h.findWhere(this.series,{id:"trendline"}),h.isUndefined(e)||(e.label="Predicted Completion Date")),this.series},e.prototype.getPredictedSeries=function(){var t=this.getPredictionData();t.xAxisEndDate&&(this.xAxisEndDate=t.xAxisEndDate);var e=h.last(t.optimistic),i=h.last(t.standard),s=h.last(t.pessimistic);if(h.isUndefined(i))return[];var r={lineWidth:0,fill:.3},a={color:l.trend,data:t.standard,id:"prediction",lines:{lineWidth:3}},n={color:l.trend,data:t.optimistic,id:"optimistic",lines:r,fillBetween:"prediction"},o={color:l.trend,data:[e,i],id:"optimisticFiller",lines:r,fillBetween:"prediction",hoverable:!1},d={color:l.trend,data:t.pessimistic,id:"pessimistic",lines:r,fillBetween:"prediction",hoverable:!1},c={color:l.trend,data:[i,s],id:"pessimisticFillerTop",lines:{lineWidth:0},hoverable:!1},e=h.first(t.pessimistic),e=u.calculateYProjection(e,s,i),r={color:l.trend,data:[[i[0],e],s],id:"pessimisticFillerBottom",lines:r,fillBetween:"pessimisticFillerTop"};return[{color:l.scope,data:t.scope,id:"scope",lines:{lineWidth:1,fill:.3}},a,n,o,d,r,c]},e.prototype.getPredictionData=function(){var t=h.last(h.findWhere(this.series,{id:"totalEstimate"}).data),e=h.last(h.findWhere(this.series,{id:"completedEstimate"}).data),i=this.getPredictedCompletedEstimatePerDay();return r.calculateSeries({startDate:this.getNow(),totalScope:t[1],totalCompleted:e[1],estimatePerDay:i})},e.prototype.getPredictedCompletedEstimatePerDay=function(){var t=this.getVersionStartDate(),e=this.chartData.now+u.oneDayInMillis,i=h.findWhere(this.series,{id:"completedEstimate"}).data;return r.getPredictedCompletedEstimatePerDay(i,t,e,this.seriesData.completedEstimate)},e.prototype.getFurthestDateForNonWorkingDaysData=function(){if(h.isUndefined(this.series)||0==this.series.length)return 1/0;var t=h.last(h.findWhere(this.series,{id:"totalEstimate"}).data),e=h.last(h.findWhere(this.series,{id:"completedEstimate"}).data),i=t[1]-e[1];if(0==i)return this.getXAxisEnd();t=this.getPredictedCompletedEstimatePerDay();return 0<t.pessimistic?r.calculatePredictionDate(e[0],t.pessimistic/5,i):0<t.standard?r.calculatePredictionDate(e[0],t.standard/5,i):r.calculatePredictionDate(e[0],t.optimistic/5,i)},e.prototype.getTrendlineSeries=function(){var t=(this.isIssueCountStatistic()?h.findWhere(this.series,{id:"totalEstimate"}):h.findWhere(this.series,{id:"issueCount"})).data,e=h.first(t),i=h.findWhere(this.series,{id:"completedEstimate"}).data,s=h.last(i),r=this.getVersionStartDate(),t=[r,0],s=s;return r>e[0]&&(e=h.chain(i).filter(function(t){return t[0]<r}).last().value(),h.isUndefined(e)&&(e=h.first(i)),t=[r,e[1]]),0===s[1]||s[1]<=t[1]?[]:[{id:"trendline",color:l.trend,data:[t,s],lines:{lineWidth:3},label:"Trend"}]},e.prototype.getUnestimatedSeries=function(){var t=h.findWhere(this.series,{id:"issueCount"}).data,e=h.findWhere(this.series,{id:"unestimatedIssueCount"}).data,i=h.first(t)[1],s=h.first(e)[1];function r(t,s){return h.reduce(t,function(t,e){var i={time:e[0]};i[s]=e[1];e=h.last(t);return h.isUndefined(e)||e.time!==i.time?t.push(i):e[s]=i[s],t},[])}t=r(t,"total"),e=r(e,"unestimated"),e=h.sortBy(h.flatten([t,e],!0),"time"),e=h.reduce(e,function(t,e){var i=h.last(t);return h.isUndefined(i)||i.time!=e.time?t.push(e):h.defaults(i,e),t},[]),e=h.flatten(h.map(e,function(t,e,i){if(e<i.length-1){e=i[e+1];return[t,h.defaults({time:e.time},t)]}return[t]}),!0);e.unshift({time:e[0].time,total:i,unestimated:s}),h.each(e,function(t,e,i){e<1||(e=i[e-1],h.isUndefined(t.total)&&(t.total=e.total),h.isUndefined(t.unestimated)&&(t.unestimated=e.unestimated))});e=h.map(e,function(t){return[t.time,0===t.total?0:t.unestimated/t.total*100]});return{id:"unestimatedPercent",label:"Percent Unestimated Issues",color:l.unestimatedPercent,data:e,yaxis:2,lines:{lineWidth:1}}},e.prototype.getChartOptions=function(){var t=u.getChartOptions(this);return t.grid.markings=this.getMarkings(),t},e.prototype.getMarkings=function(){var r=this;return function(t){var e,i=a.getNonWorkingBlocks(),s=r.getNow();return t.xmax>s&&(!r.getVersion().released||r.getVersion().releaseDate<=t.xmax)&&(e=t.ymax/198,r.drawDashedMarkings(i,s,t=4*e,e,70),s=r.getVersion().releaseDate,h.isUndefined(s)||r.drawDashedMarkings(i,s,t*=2,e*=2,20,l.releaseDate)),i}},e.prototype.drawDashedMarkings=function(t,e,i,s,r,a){for(var n=0;n<r;n++){var o=n*(i+s);t.push({color:a||l.dashedMarking,lineWidth:1,xaxis:{from:e,to:e},yaxis:{from:o,to:o+i}})}},e.prototype.isReleaseDatePredictionSeriesId=function(t){switch(t){case"prediction":case"optimistic":case"pessimisticFillerBottom":return!0}return!1},e.prototype.getStartTime=function(){return this.chartData.startTime||this.getNow()},e.prototype.getVersionStartDate=function(){return this.getVersion().startDate?this.getVersion().startDate:this.getStartTime()},e.prototype.notStarted=function(){return this.getVersionStartDate()>this.getNow()},e.prototype.getXAxisStart=function(){var t=this.chartData.startTime;return(t=this.getVersion().startDate?this.getVersion().startDate:t)-.02*(this.chartData.endTime-t)},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReport.js' */
define("jira-agile/rapid/ui/chart/version-report",["require"],function(e){"use strict";var t=e("jira-agile/rapid/ui/chart/version-report-model"),r={createModel:function(e){r.model=new t(e),r.model.setParams({statistic:e,issueAddedText:"Issue added to version",issueRemovedText:"Issue removed from version",startText:"Version start date"})}};return r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReport.soy' */
// This file was automatically generated from VersionReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionreport == 'undefined') { GH.tpl.versionreport = {}; }


GH.tpl.versionreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-report-controls"></div><div id="ghx-version-meta" class="ghx-version-meta"></div><div id="ghx-version-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('This version does not contain any issues.') + '</p></div></div><div id="ghx-version-report-not-started" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('The chart cannot be generated because the version has a start date in the future.') + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-version-summary-wrap"><div id="ghx-chart-legend" class="ghx-release-chart-legend"></div><div class="ghx-release-summary"></div></div><div id="ghx-chart-wrap" class="ghx-version-chart-wrap"><div id="ghx-axis-x-top"></div><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-version-report-completion-date-estimates ghx-margin-top"></div><div class="ghx-version-report ghx-margin-top"></div></div><div id="ghx-gadget-version-meta" class="ghx-version-meta"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderReportBody.soyTemplateName = 'GH.tpl.versionreport.renderReportBody';
}


GH.tpl.versionreport.renderViewIssuesLink = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls"><a href="' + GH.tpl.versionreport.issueNavLink({jql: 'fixVersion=' + soy.$$escapeUri(opt_data.version.jqlEncodedName) + ' AND project=' + soy.$$escapeHtml(opt_data.projectKey)}) + '">' + ((opt_data.nameUse == true) ? soy.$$escapeHtml(AJS.format('View {0} in Issue Navigator',opt_data.version.name)) : soy.$$escapeHtml('View in Issue Navigator')) + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderViewIssuesLink.soyTemplateName = 'GH.tpl.versionreport.renderViewIssuesLink';
}


GH.tpl.versionreport.renderVersionReportHeader = function(opt_data, opt_ignored) {
  return '<p>' + ((opt_data.version.startDate) ? soy.$$escapeHtml('Start Date:') + ' ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '<br />' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format('Released on {0}',opt_data.formattedReleaseDate)) : (opt_data.version.released) ? soy.$$escapeHtml('Released') : (opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format('Scheduled Release Date: {0}',opt_data.formattedReleaseDate)) : soy.$$escapeHtml('Unreleased')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportHeader';
}


GH.tpl.versionreport.renderVersionReportGadgetHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + ((opt_data.version.startDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml('Start date') + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '</span></p>' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml('Released') + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedReleaseDate) + '</span></p>' : '') + ((! opt_data.version.released) ? GH.tpl.versionreport.renderCompletionDates(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportGadgetHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportGadgetHeader';
}


GH.tpl.versionreport.renderNonGadgetCompletionDates = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + GH.tpl.versionreport.renderCompletionDates(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderNonGadgetCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderNonGadgetCompletionDates';
}


GH.tpl.versionreport.renderCompletionDates = function(opt_data, opt_ignored) {
  return '' + ((opt_data.completionDate.prediction) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Predicted'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.prediction), showTitle: 'true'}) + '<br>' : '') + ((opt_data.completionDate.optimistic) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Optimistic'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.optimistic), showTitle: 'false'}) + '<br>' : '') + ((opt_data.completionDate.pessimisticFillerBottom) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Pessimistic'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.pessimisticFillerBottom), showTitle: 'false'}) + '<br>' : '');
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDates';
}


GH.tpl.versionreport.renderCompletionDate = function(opt_data, opt_ignored) {
  return ((opt_data.showTitle) ? '<span class="ghx-date-title">' + soy.$$escapeHtml(opt_data.dateTitle) + ' ' + soy.$$escapeHtml('completion date') + ':</span>' : '') + '<span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.dateValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDate.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDate';
}


GH.tpl.versionreport.renderVersionReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Status Report') + '</h3><div class="ghx-version-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, showEpicColumn: true, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Unestimated Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReport.soyTemplateName = 'GH.tpl.versionreport.renderVersionReport';
}


GH.tpl.versionreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.versionreport.issueNavLink.soyTemplateName = 'GH.tpl.versionreport.issueNavLink';
}


GH.tpl.versionreport.renderXaxisTopLabel = function(opt_data, opt_ignored) {
  return '<div style="left:' + soy.$$escapeHtml(opt_data.left) + 'px" class="ghx-axis-x-top-label">' + soy.$$escapeHtml(opt_data.text) + ((opt_data.date) ? ': ' + soy.$$escapeHtml(opt_data.date) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderXaxisTopLabel.soyTemplateName = 'GH.tpl.versionreport.renderXaxisTopLabel';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReleaseDatePredictor.js' */
define("jira-agile/rapid/ui/chart/release-date-predictor",["require"],function(e){"use strict";var v=e("underscore"),h=e("jira-agile/rapid/ui/chart/burndown-rate"),g=e("jira-agile/rapid/ui/chart/change-event"),y=GH.ChartUtils,s={calculateSeries:function(e){var t={standard:[],optimistic:[],pessimistic:[],scope:[]};if(e.totalCompleted/e.totalScope<.1||e.totalCompleted===e.totalScope)return t;var a=s.createDataSeries(v.defaults({estimatePerDay:e.estimatePerDay.standard},e)),r=1/0;if((r=0<a.length?v.last(a)[0]:r)==1/0)return t;var i=s.createDataSeries(v.defaults({estimatePerDay:e.estimatePerDay.optimistic},e)),n=s.createDataSeries(v.defaults({estimatePerDay:e.estimatePerDay.pessimistic},e)),t=s.calculateXAxisEndDate(n,r),r=[];return r.push([e.startDate,e.totalScope]),r.push([t,e.totalScope]),{standard:a,optimistic:i,pessimistic:n,scope:r,xAxisEndDate:t}},calculateXAxisEndDate:function(e,t){var a=1/0;return a=(a=0<e.length?v.last(e)[0]+y.oneDayInMillis:a)===1/0?t+y.oneDayInMillis:a},createDataSeries:function(e){var t=[],a=e.estimatePerDay;if(t.push([e.startDate,e.totalCompleted]),a<=0)return t.push([1/0,e.totalCompleted]),t;var r=h.getWorkingDays();if(0===r.length)return[];for(var i=e.totalScope-e.totalCompleted,n=e.totalCompleted,s=0;s<r.length;s++){var o=r[s];if(o.end>e.startDate){var l=o.start;o.start>e.startDate?t.push([o.start,n]):l=e.startDate;var c=(o.end-l)/y.oneDayInMillis,u=i/a;if(u<=c){u=new Date(l+u*y.oneDayInMillis);t.push([u.valueOf(),e.totalScope]);break}c=c*a;n+=c,i-=c,t.push([o.end,n])}}return[v.first(t),v.last(t)]},getCompletedEstimatePerDay:function(e,t,a,r){var i=[],n=0,s=0,o=[],l=0;function c(e){var t=g.getChangeEvent(e);t!=g.burndown&&t!=g.completeScopeAdded||o.push(e.key)}function u(e,t){if(v.contains(o,t.key)){var a=g.getChangeEvent(t);if(a===g.completeScopeAdded||a===g.scopeAdded)return e-t.completedEstimate}return e}for(var d=t;d<=a;d+=y.oneDayInMillis){h.isDateInNonWorkingBlock(d)||l++;for(var p=0,m=s;m<e.length;m++){var D=e[m][0];if(!(D<=d)){n=e[m][1],s=m;break}var f,n=(t<D?(D=e[m][1],(f=r[m]?r[m].issues:[])&&(D=v.reduce(f,u,D),v.each(f,c)),n<D&&(p+=D-n)):(f=r[m]?r[m].issues:[])&&v.each(f,c),e[m][1])}i.push({time:d,estimate:p})}return{completedData:i,workingDays:l}},calculateAverageEstimateCompletedPerDay:function(e){var t=e.workingDays;return 0===t?0:v.reduce(e.completedData,function(e,t){return e+t.estimate},0)/t},calculateDeviation:function(e){return.1*e},getPredictedCompletedEstimatePerDay:function(e,t,a,r){a=s.getCompletedEstimatePerDay(e,t,a,r),r=s.calculateAverageEstimateCompletedPerDay(a),a=s.calculateDeviation(r);return{standard:r,optimistic:r+a,pessimistic:Math.max(r-a,0)}},calculatePredictionDate:function(e,t,a){if(t<=0)return 1/0;a=e+y.oneDayInMillis*(a/t),t=(new Date).getTime()+365*y.oneDayInMillis*19,a=Math.min(a,t);return new Date(a).valueOf()}};return s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChangeEvent.js' */
define("jira-agile/rapid/ui/chart/change-event",["require"],function(e){"use strict";var t=e("underscore"),d={scopeAdded:"scopeAdded",scopeRemoved:"scopeRemoved",reopened:"reopened",burndown:"burndown",completeScopeAdded:"completeScopeAdded",estimateChanged:"estimateChanged",estimateAdded:"estimateAdded",estimateRemoved:"estimateRemoved",releaseDate:"releaseDate",uncertainty:"uncertainty",unknown:"unknown",startDate:"startDate",getScopeOrColumnChangeEvent:function(e,n){return e.scopeChange?e.inScope?d.scopeAdded:d.scopeRemoved:!!e.columnChange&&("notDone"===e.column?e.oldColumn?d.reopened:d.scopeAdded:"done"===e.column?e.oldColumn?d.burndown:d.completeScopeAdded:(e.oldColumn,d.scopeRemoved))},getChangeEvent:function(e){var n="Burnup",n=d.getScopeOrColumnChangeEvent(e,n);if(n)return n;if(e.estimateChange){n=e.values.oldEstimateFieldValue,e=e.values.estimateFieldValue,n=!t.isUndefined(n),e=!t.isUndefined(e);return n&&e?d.estimateChanged:n?d.estimateRemoved:d.estimateAdded}return d.unknown}};return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/MultipleCharts.js' */
GH.Reports=GH.Reports||{},GH.Reports.multipleCharts=function(){return c3.component("multipleCharts").extend({charts:c3.prop([]),chartSelector:c3.prop(".ghx-svg-chart")}).extend(function(){this.selection().selectAll(this.chartSelector()).data(this.charts()).each(function(t){t&&t(d3.select(this))})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ChartConfigService.js' */
!function(){function a(t,o){return GH.RapidBoard.State.getBoardSetting(t,"chart.config."+o,{})}function t(){}t.prototype={mapOldConfigToNewConfig:function(t,o){var n=a(t,o),t=GH.RapidBoard.State.getCycleTimeCalculationType();n.includeNonWorkingDays="total"===t,GH.RapidBoard.State.setBoardSetting("chart.config."+o,n)},mapNewConfigToOldConfig:function(t,o){o=a(t,o).includeNonWorkingDays?"total":"workingDays";GH.RapidBoard.State.setCycleTimeCalculationType(o)}},GH.ChartNWDConfigService=t,GH.chartNWDConfigService=new t}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ChartTimeFrameModel.js' */
!function(i,t,e){var r="%Y-%m-%d",a="custom",s=t.time.day;function m(t,e){if(!i.isDate(t))throw e+" must be a Date object";return t}function n(t){return s.floor(s.offset(t,1))}function o(t){return new Date(n(t)-1)}function u(){}u.prototype={timeFrame:null,fromDate:null,toDate:null,setSimpleDates:function(t,e){return this.timeFrame=a,this.fromDate=s.floor(m(t,"fromDate")),this.toDate=o(m(e,"toDate")),this},setExactDates:function(t,e){return this.timeFrame=a,this.fromDate=m(t),this.toDate=m(e),this},setDays:function(t){return this.timeFrame=t,this},setAllTime:function(){return this.timeFrame=0,this},resetToDefault:function(){return this.timeFrame=90,this},isDefault:function(){return 90===this.timeFrame},setBounds:function(t,e){return this.earliestDate=m(t,"earliestDate"),this.currentDate=m(e,"currentDate"),this},getTimeFrame:function(){return i.findWhere(e,{days:this.timeFrame})?this.timeFrame:a},getTimeFrameDates:function(){if(!this.earliestDate||!this.currentDate)throw"Cannot calculate time frame dates without earliestDate and currentDate";var t,e;return 0<this.timeFrame?(t=s.offset(n(this.currentDate),-1*this.timeFrame),e=o(this.currentDate)):this.timeFrame<=0?(t=s.floor(this.earliestDate),e=o(this.currentDate)):this.timeFrame===a&&(t=this.fromDate,e=this.toDate),{fromDate:t,toDate:e}},getTimeFrameDuration:function(){var t=this.getTimeFrameDates();return t.toDate-t.fromDate+1},fromNormalized:function(t){if(null==t.days)this.resetToDefault();else if(0<t.days)this.setDays(Number(t.days));else if(t.days===a)try{this.setSimpleDates(Date.parseDate(t.from,r),Date.parseDate(t.to,r))}catch(t){this.resetToDefault()}else this.setAllTime();return this},toNormalized:function(){var t={};return i.isNumber(this.timeFrame)&&90!==this.timeFrame?t.days=this.timeFrame:this.timeFrame===a&&(t.days=this.timeFrame,t.from=this.fromDate.print(r),t.to=this.toDate.print(r)),t},clone:function(){return(new u).fromNormalized(this.toNormalized())}},GH.Reports.ChartTimeFrameModel=u}(_,d3,GH.ChartTimeFrames.timeFrames);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ChartTimeFrameService.js' */
GH.ChartTimeFrameService={},GH.ChartTimeFrameService.rapidViewId=null,GH.ChartTimeFrameService.normalizedDateFormat="%Y-%m-%d",GH.ChartTimeFrameService.setRapidViewId=function(e){GH.ChartTimeFrameService.rapidViewId=e},GH.ChartTimeFrameService.getTimeFramesConfigForChart=function(e){return GH.RapidBoard.State.getBoardSetting(GH.ChartTimeFrameService.rapidViewId,"chart.config."+e,{})},GH.ChartTimeFrameService.saveTimeFrameConfigForChart=function(e,r){GH.RapidBoard.State.setBoardSetting("chart.config."+e,_.defaults(r,{view:"reporting"}))},GH.ChartTimeFrameService._getFormattedDate=function(e){return e=_.isNumber(e)?new Date(e):e,_.isDate(e)?e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate():e},GH.ChartTimeFrameService._convertDateFormattedStringToDate=function(e){return _.isString(e)&&0<e.length?new Date(Date.parse(e)):null},GH.ChartTimeFrameService.mapOldConfigToNewConfig=function(e){var r=GH.ChartTimeFrameService.rapidViewId,t=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.days",GH.ChartTimeFrames.days),a=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.from",""),i=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.to",""),a=GH.ChartTimeFrameService._getFormattedDate(a),i=GH.ChartTimeFrameService._getFormattedDate(i),r=GH.ChartTimeFrameService.getTimeFramesConfigForChart(e);r.days=0<=t?t:"custom",r.from=a,r.to=i,GH.ChartTimeFrameService.saveTimeFrameConfigForChart(e,r)},GH.ChartTimeFrameService.mapNewConfigToOldConfig=function(e){var r=GH.ChartTimeFrameService.getTimeFramesConfigForChart(e),t=r.days,a=null,e=null;if(t<0||"custom"===t){t=-1;try{a=GH.ChartTimeFrameService._convertDateFormattedStringToDate(r.from).getTime(),e=GH.ChartTimeFrameService._convertDateFormattedStringToDate(r.to).getTime()}catch(e){t=0}}else _.isUndefined(t)&&(t=0);GH.ChartTimeFrames.setNewChartLimits(t,a,e,!1)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintTransformer.js' */
!function(w,r,h,v,s){"use strict";var y=3;function I(e){var i,r,t=e.changes,s=[];function n(e,t){var n={time:+i,key:r.key};n[e]=t,s.push(n)}for(i in t)for(var o=0;o<t[i].length;o++)(r=t[i][o]).column&&n("done",!r.column.notDone),r.statC&&n("estimate",r.statC.newValue),"added"in r&&n("added",r.added);return w.sortBy(s,"time")}function T(s){var o=[],a={};return w.each(s,function(e){var t,n,i,r;"estimate"in e||(t=e.key,a[t]||(a[t]={}),n=a[t],"added"in e?n.added!==e.added&&(n.done&&(e=w.extend({wasDone:!0},e)).added&&(e.time=(r=e.key,r=w.where(s,{key:r,done:!0}),w.last(r).time),(o=w.reject(o,function(e){return e.key===t&&"done"in e})).push({key:e.key,done:!0,time:e.time})),o.push(e),n.added=e.added):"done"in e&&(e.done?n.done||!1===n.added||o.push(e):(i=t,o=w.reject(o,function(e){return e.key===i&&(e.wasDone&&(e.wasDone=!1),"done"in e)}),a[i].done=!1),n.done=e.done))}),{changes:o=w.sortBy(o,"time"),issueStates:a}}function S(e,t,n,i){var r,s,o,d,a={};return e?(r=u(e,n,i),e=n,s=(o=r)&&"original"!==o?e.find(function(e){return e.id.toString()===o}):null,w.each(t,function(e){var t=void 0;(t=s&&"added"in e&&e.time<s.startTime?"original":u(e,n,i))&&(t=t.toString(),a[t]||(a[t]=[]),a[t].push(e))})):a.original=t,d={},w.each(a,function(e,r){d[r]=d[r]||[],w.each(e,function(e){"added"in e||d[r].push(e)});var s={};function o(e,t){return w.find(w.clone(e).reverse(),function(e){return e.added===t})}function a(e){return w.reject(e,function(e){return"added"in e})}w.each(e,function(e){"added"in e&&(s[e.key]=s[e.key]||[],s[e.key].push(e))}),w.each(s,function(e,t){var n,i=w.reduce(e,function(e,t){return e+(t.added?1:-1)},0);0<i?(n=o(e,!0))&&(s[t]=a(),s[t].push(n)):i<0?(i=o(e,!1))&&(s[t]=a(),s[t].push(i)):(s[t]=a(),!1===w.last(e).added&&(d[r]=w.reject(d[r],function(e){return e.key===t})))}),w.each(w.flatten(s),function(e){d[r].push(e)})}),d}function u(e,t,n){var i,r,s=n[e.key],n=void 0;return!t.length||e.time<t[0].startTime?"original":(n=s&&0!==s.length?"done"in e||"wasDone"in e?function(t,e){if(1===e.length)return e[0].id;e=e.filter(function(e){return"ACTIVE"===e.state&&t.time>=e.startTime||e.endTime&&t.time>=e.startTime&&t.time<=e.endTime}),e=w.sortBy(e,"endTime").pop();return e?e.id:null}(e,s):function(t,e,n){var i=null,r=n.filter(function(e){return t.time>=e.startTime}),n=r.filter(function(e){return e.endTime&&t.time<=e.endTime});{var s;i=1<n.length?(s=e.map(function(e){return e.id}),(i=n.slice().reverse().find(function(e){return s.includes(e.id)}))||n.pop()):1===n.length?n[0]:r.pop()}return i?i.id:null}(e,s,t):(i=t,r=e.time,w.find(i,function(e,t){return t===i.length-1||e.startTime<=r&&i[t+1].startTime>r}).id))?n.toString():null}function R(n,e){var i={added:0,removed:0,net:0};return w.each(e||[],function(e){var t;"added"in e&&(t=n[e.key]||0,e.added?i.added+=t:e.wasDone||(i.removed+=t))}),i.net=i.added-i.removed,i}function b(n,e){return w.reduce(e,function(e,t){return t.done?e+(n[t.key]||0):e},0)}function C(i,e){if(i.forecastError||0===i.sprintsRemaining)return w.map(w.range(e),function(e){return{sprintId:"forecast"+e,sprintName:"",baseline:i.baseline,workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:!0,isActive:!1}});var r=i.workRemaining;return w.map(w.range(e),function(e){var t=r,n=Math.min(r,i.velocity);return r-=n,{sprintId:"forecast"+e,sprintName:"",baseline:i.baseline,workAtStart:t,workAdded:0,workRemoved:0,workCompleted:n,workRemaining:r,isForecast:!0,isActive:!1}})}var e={getScopeBySprintData:function(e,r){var t={sprints:[],series:{baseline:[],workAdded:[],workRemaining:[],workCompleted:[]},estimationStatistic:e.estimationStatistic,labels:e.labels||{},rapidViewId:e.rapidViewId};e.epic&&(t.epic=e.epic),e.version&&(t.version=e.version);var n,i,s=T(k=I(e)),o=s.changes,a=(c=k,m=e.estimatableIssueKeys,n={},i=w.groupBy(m),w.each(c,function(e){"estimate"in e&&w.has(i,e.key)&&(w.isNumber(e.estimate)?n[e.key]=e.estimate:delete n[e.key])}),n),d=w.sortBy(e.sprints,"startTime"),u=S(k=w.find(o,function(e){return"done"in e}),o,d,e.estimatableIssueKeyToSprints),m=R(a,u.original).net,c=b(a,u.original),l=m={sprintId:"original",sprintName:t.labels.originalEstimate,baseline:0,workAtStart:m,workAdded:0,workRemoved:0,workCompleted:c,workRemaining:m-c,isForecast:!1,isActive:!1,issues:w.pluck(w.where(u.original,{done:!0}),"key")};t.sprints=w.map(d,function(e){var t=u[e.id],n=R(a,t),i=b(a,t),t={sprintId:e.id,sprintName:e.name,baseline:r?0:l.baseline-n.net,workAtStart:l.workRemaining,workAdded:n.added,workRemoved:n.removed,workCompleted:i,workRemaining:l.workRemaining-i+n.net,startTime:e.startTime,endTime:e.endTime,isForecast:!1,isActive:"ACTIVE"===e.state,issues:w.pluck(w.where(t,{done:!0}),"key")};return l=t});var p,c=void 0,d=void 0;t.sprints.length&&(k?(p=Object.keys(u),d=v.indexOf(t.sprints,function(e){return p.includes(e.sprintId.toString())}),c=v.indexOf(t.sprints,function(e){return e.workAdded||e.workRemoved||e.workCompleted||e.workRemaining},!0),t.sprints=0<=d&&0<=c?t.sprints.slice(d,c+1):[]):t.sprints=[]),k=w.last(t.sprints),d=(t.sprints.length?k:m).workRemaining,c=m.workCompleted+w.reduce(t.sprints,function(e,t){return e+t.workCompleted},0),k=t.forecast=function(e){function t(e){return Math.round(h.mean(e,function(e){return e.workCompleted}))}var n=w.last(e),i=n&&n.isActive,r=i?e.slice(0,-1):e,s={baseline:n?n.baseline:0};if(r.length<y)return w.extend(s,{forecastError:AJS.format("A forecast cannot be shown until at least {0,choice,1#1 sprint has|1\u003c{0,number} sprints have} been completed.",y)});if(0===n.workRemaining)return w.extend(s,{sprintsRemaining:0});var o=t(w.last(r,y)),a=n.workRemaining,r=!1;return i&&(n.workCompleted>o?o=t(w.last(e,y)):(a=(n=n.workAtStart+n.workAdded-n.workRemoved)-Math.min(n,o),r=!0)),0===o?w.extend(s,{forecastError:AJS.format("A forecast cannot be shown until at least one of {0,number} most recent {0,choice,1#sprint|1\u003csprints} contains completed work.",y)}):w.extend(s,{sprintsRemaining:Math.ceil(a/o),velocity:o,workRemaining:a,isLastSprintForecast:r})}(t.sprints),t.sprints.unshift(m),t.getForecast=w.partial(C,k);var f,m=(f={},w.each(o,function(e){"added"in e&&(e.added?f[e.key]=!0:delete f[e.key])}),w.keys(f)),k=w.intersection(m,w.keys(a));function g(t){return function(e){return t[e].added}}return 0===d&&(o=w.pluck(w.where(o,{done:!0}),"key"),o=w.filter(o,g(s.issueStates)),s=w.filter(e.estimatableIssueKeys,g(s.issueStates)),o=w.difference(s,o).length,t.forecast.remainingEstimatableIssueCount=o),t.snapshot={workRemaining:d,workCompleted:c,estimatedIssueCount:k.length,estimatableIssueCount:w.intersection(m,e.estimatableIssueKeys).length,issueCount:m.length},t},getIssuesBySprintData:function(n,e){var t=n.contents,i=w.object(w.pluck(t.completedIssues,"key"),t.completedIssues);return n.estimationStatistic=e.estimationStatistic,t.incompleteIssues=w.union(t.incompleteEstimatedIssues,t.incompleteUnestimatedIssues),t.incompleteIssuesSum={text:n.estimationStatistic.formatter.formatFull(t.incompletedIssuesEstimateSum.value),value:t.incompletedIssuesEstimateSum.value},t.incompleteIssuesUrl=s.getUrlForIssues(t.incompleteIssues),n.sprints=w.filter(e.sprints,function(e){return"original"!==e.sprintId||e.issues.length}).reverse(),n.sprints=w.map(n.sprints,function(e){var t={sprintId:e.sprintId};return t.issues=w.map(e.issues,function(e){return i[e]}),t.issues=w.compact(t.issues),t.issueNavUrl=s.getUrlForIssues(t.issues),"original"===e.sprintId?t.sprintName="Before initial sprint":(t.sprintName=e.sprintName,t.sprintReportUrl=s.prependBaseUrl("/secure/RapidBoard.jspa?rapidView="+n.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+e.sprintId)),e.startTime&&(t.formattedStartTime=r(e.startTime).format("LL")),e.endTime&&(t.formattedEndTime=r(e.endTime).format("LL")),t.formatedWorkCompleted=n.estimationStatistic.formatter.formatFull(e.workCompleted),t}),n},getEstimationStatisticFormatter:function(e){return e="duration"===e?{formatFull:function(e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,dropMinutesIfLongerThanADay:!0})},formatCompact:function(e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,timeFormat:GH.TimeFormatDisplays.MOST_SIGNIFICANT})}}:{formatFull:GH.NumberFormat.format,formatCompact:GH.NumberFormat.format}},_getIssueHistory:function(e){var e=I(e),t={};return w.each(e,function(e){(t[e.key]=t[e.key]||[]).push(e)}),t}};GH.Reports=GH.Reports||{},GH.Reports.ScopeBurndownBySprintTransformer=e}(_,moment,(AJS.$,d3),(GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util),GH.UrlFormat);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ReportIssueTable.soy' */
// This file was automatically generated from ReportIssueTable.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.issueTable.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.issueTable == 'undefined') { GH.tpl.reports.issueTable = {}; }


GH.tpl.reports.issueTable.renderIssueTable = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group ghx-issue-table-title"><div class="aui-item">';
  if (opt_data.sprint || opt_data.listName) {
    output += '<h4>';
    if (opt_data.sprint) {
      var sprintName__soy9 = '' + ((opt_data.sprint.isActive) ? soy.$$escapeHtml(AJS.format('{0} (active)',opt_data.sprint.sprintName)) : soy.$$escapeHtml(opt_data.sprint.sprintName));
      output += (opt_data.sprint.sprintReportUrl) ? '<a href="' + soy.$$escapeHtml(opt_data.sprint.sprintReportUrl) + '">' + soy.$$escapeHtml(sprintName__soy9) + '</a>' : soy.$$escapeHtml(sprintName__soy9);
    } else {
      output += soy.$$escapeHtml(opt_data.listName);
    }
    output += '</h4>' + ((opt_data.titleTooltip) ? '<span class="aui-icon aui-icon-small aui-iconfont-help issue-table-title-tooltip" title="' + soy.$$escapeHtml(opt_data.titleTooltip) + '"></span>' : '');
  }
  output += ((opt_data.sprint && opt_data.sprint.formattedStartTime && opt_data.sprint.formattedEndTime) ? ' <span>' + soy.$$escapeHtml(opt_data.sprint.formattedStartTime) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndTime) + '</span>' : '') + '</div><div class="aui-item">' + ((opt_data.issues.length > 0) ? '<a class="ghx-controls" href="' + soy.$$escapeHtml(opt_data.issueNavLink) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a>' : '') + '</div></div>' + ((opt_data.issues.length > 0) ? '<table class="aui">' + GH.tpl.reports.issueTable.renderIssueTableHeader({estimateStatisticName: opt_data.estimationStatistic.name, estimateStatisticValue: opt_data.estimationValue, currentEstimateStatisticValue: opt_data.currentEstimationValue, showEpicColumn: opt_data.showEpicColumn}) + GH.tpl.reports.issueTable.renderIssueTableRows(opt_data) + '</table>' : (opt_data.emptyMessage) ? '<p>' + soy.$$escapeHtml(opt_data.emptyMessage) + '</p>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTable.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTable';
}


GH.tpl.reports.issueTable.renderIssueTableHeader = function(opt_data, opt_ignored) {
  var output = '<tr><th>' + soy.$$escapeHtml('Key') + '</th><th>' + soy.$$escapeHtml('Summary') + '</th><th>' + soy.$$escapeHtml('Issue Type') + '</th><th>' + soy.$$escapeHtml('Priority') + '</th><th>' + soy.$$escapeHtml('Status') + '</th>' + ((opt_data.showEpicColumn) ? '<th>' + soy.$$escapeHtml('Epic') + '</th>' : '');
  var headerTooltip__soy82 = opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue ? AJS.format('Estimate modified from {0} to {1}',opt_data.estimateStatisticValue,opt_data.currentEstimateStatisticValue) : '';
  output += '<th class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(headerTooltip__soy82) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + ' <span>(';
  if (opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue) {
    output += GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: opt_data.estimateStatisticValue, currentEstimate: opt_data.currentEstimateStatisticValue});
  } else {
    var className__soy94 = '' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.estimateStatisticValue});
    output += '<span class="' + soy.$$escapeHtml(className__soy94) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticValue) + '</span>';
  }
  output += ')</span></th></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableHeader.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableHeader';
}


GH.tpl.reports.issueTable.renderIssueTableRows = function(opt_data, opt_ignored) {
  var output = '';
  var issueList104 = opt_data.issues;
  var issueListLen104 = issueList104.length;
  for (var issueIndex104 = 0; issueIndex104 < issueListLen104; issueIndex104++) {
    var issueData104 = issueList104[issueIndex104];
    var issueAdded__soy105 = opt_data.addedIssues && opt_data.addedIssues[issueData104.key];
    output += '<tr' + ((issueAdded__soy105) ? ' class="ghx-added" title="' + soy.$$escapeHtml('Issue added to sprint after start time') + '"' : '') + '><td class="ghx-nowrap"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData104.key) + '">' + soy.$$escapeHtml(issueData104.key) + '</a>' + ((issueAdded__soy105) ? ' *' : '') + '</td><td>' + soy.$$escapeHtml(issueData104.summary) + '</td><td class="ghx-nowrap">' + ((issueData104.typeName) ? '<img src="' + soy.$$escapeHtml(issueData104.typeUrl) + '" />' + soy.$$escapeHtml(issueData104.typeName) : soy.$$escapeHtml('None')) + '</td><td class="ghx-nowrap">' + ((issueData104.priorityName) ? '<img src="' + soy.$$escapeHtml(issueData104.priorityUrl) + '" />' + soy.$$escapeHtml(issueData104.priorityName) : soy.$$escapeHtml('None')) + '</td><td class="ghx-nowrap">' + GH.tpl.status.renderFull({status: issueData104.status}) + '</td>' + ((opt_data.showEpicColumn) ? '<td class="ghx-nowrap">' + ((issueData104.epic) ? aui.labels.label({extraClasses: [issueData104.epicColor], text: '' + GH.tpl.epic.getEpicNameString({epicLabel: issueData104.epicLabel, epicKey: issueData104.epic}), url: GH.Ajax.CONTEXT_PATH + '/browse/' + issueData104.epic, extraAttributes: {title: issueData104.epic}}) : '') + '</td>' : '');
    var tooltip__soy160 = issueData104.estimateStatistic && issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text ? AJS.format('Estimate modified from {0} to {1}',issueData104.estimateStatistic.statFieldValue.text,issueData104.currentEstimateStatistic.statFieldValue.text) : '';
    output += '<td class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(tooltip__soy160) + '">' + ((issueData104.estimateStatistic && issueData104.estimateStatistic.statFieldValue && issueData104.estimateStatistic.statFieldValue.text) ? (issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text) ? GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: issueData104.estimateStatistic.statFieldValue.text, currentEstimate: issueData104.currentEstimateStatistic.statFieldValue.text}) : soy.$$escapeHtml(issueData104.estimateStatistic.statFieldValue.text) : '-') + '</td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableRows.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableRows';
}


GH.tpl.reports.issueTable.renderChangedEstimateIndicator = function(opt_data, opt_ignored) {
  return '<span class="ghx-previous-value  ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.initialEstimate}) + '">' + soy.$$escapeHtml(opt_data.initialEstimate) + ((opt_data.initialEstimate == '-') ? ' ' : '') + ' &#8594; </span><span class="ghx-current-value ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.currentEstimate}) + '">' + soy.$$escapeHtml(opt_data.currentEstimate) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderChangedEstimateIndicator.soyTemplateName = 'GH.tpl.reports.issueTable.renderChangedEstimateIndicator';
}


GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.value == '-' ? 'empty-mode' : '');
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar.soyTemplateName = 'GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprint.soy' */
// This file was automatically generated from ScopeBurndownBySprint.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.scopeBurndownBySprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.scopeBurndownBySprint == 'undefined') { GH.tpl.reports.scopeBurndownBySprint = {}; }


GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy3 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: 'at start of sprint', estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy3}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workAdded, estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workRemoved, estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('completed') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy3}) : '') + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('remaining') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy3}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueList = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.sprints.length > 0) ? '<h3>' + soy.$$escapeHtml('Completed Issues') + '</h3>' : '');
  var sprintList77 = opt_data.sprints;
  var sprintListLen77 = sprintList77.length;
  for (var sprintIndex77 = 0; sprintIndex77 < sprintListLen77; sprintIndex77++) {
    var sprintData77 = sprintList77[sprintIndex77];
    output += GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({listName: sprintData77.sprintName, sprint: sprintData77, issues: sprintData77.issues, issueNavLink: sprintData77.issueNavUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: sprintData77.formatedWorkCompleted, showEpicColumn: opt_data.showEpicColumn, emptyMessage: opt_data.emptySprintMessage});
  }
  output += (opt_data.contents.incompleteIssues.length > 0) ? '<h3>' + soy.$$escapeHtml('Incomplete Issues') + '</h3>' + GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({issues: opt_data.contents.incompleteIssues, issueNavLink: opt_data.contents.incompleteIssuesUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.contents.incompleteIssuesSum.text, showEpicColumn: opt_data.showEpicColumn}) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueList.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueList';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueTable = function(opt_data, opt_ignored) {
  return '<div class="ghx-scope-burndown-table-section">' + GH.tpl.reports.issueTable.renderIssueTable(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueTable.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueTable';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints = function(opt_data, opt_ignored) {
  return '<img class="ghx-infographic-trophy" src="' + soy.$$escapeHtml(opt_data.imageURL) + '"><p class="ghx-work-done-message">' + soy.$$escapeHtml(AJS.format('{0,choice,0#All issues are done!|1\x3c All estimated issues are done!}',opt_data.unestimatedIssuesCount)) + ((opt_data.unestimatedIssuesCount) ? ' ' + soy.$$escapeHtml(AJS.format('{0,choice,1#There is 1 unestimated issue.|1\x3cThere are {0} unestimated issues.}',opt_data.unestimatedIssuesCount)) : '') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent = function(opt_data, opt_ignored) {
  return '<h2><span class="aui-icon aui-icon-small aui-iconfont-success"></span> ' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 sprints|1#1 sprint|1\x3c{0,number} sprints} remaining',opt_data.sprintsRemaining)) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><table class="ghx-stat-table"><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.velocity) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml('Velocity per sprint') + '</td></tr><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.workRemaining) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml('remaining') + '</td></tr></table><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage';
}


GH.tpl.reports.scopeBurndownBySprint.renderHelpLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.helpUrl) + '" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderHelpLink.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderHelpLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartDialog.js' */
!function(i,e,o){var d,s="scope-by-sprint-dlg",n="LL",l=null,p=require("jira-agile/rapid/ajax");function c(e,t,i){var r,a="";return e.isForecast&&!e.isActive||"original"===e.sprintId||(a=p.buildBareRestUrl("secure/RapidBoard.jspa?rapidView="+e.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+e.sprintId)),GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent({sprint:(r=e,e=(e=t).formatter.formatFull,r.startTime&&r.endTime&&(r.formattedStartDate=moment(r.startTime).format(n),r.formattedEndDate=moment(r.endTime).format(n)),r.formattedWorkAtStart=e(r.workAtStart),r.formattedWorkAdded=e(r.workAdded),r.formattedWorkRemoved=e(r.workRemoved),r.formattedWorkCompleted=e(r.workCompleted),r.formattedWorkRemaining=e(r.workRemaining),r),estimationStatistic:t,url:a,labels:i})}function m(){return!!d&&d.is(":visible")}e.preventCloseOnClick(s),GH.Reports.ScopeBurndownBySprintChartDialog={show:function(e,r,a,n){var t;return m()&&r.sprintId===l?d.hide():((t=i.select(e)).classed("active",!0),d=o.create(s,e,function(e,t,i){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(c(r,a,n)),i()},{addActiveClass:!1,container:"#ghx-report-scrollarea > .aui-page-panel",fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,offsetX:8,hideCallback:function(){t.classed("active",!1)}}),l=r.sprintId,d.show()),d},hide:function(){d&&(d.hide(),l=null)},isVisible:m}}(d3,(GH.Reports,GH.InlineDialog),GH.SideInlineDialog);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChart.js' */
!function(c,m,f,s,a){"use strict";function g(t){return t.workRemaining-x(t)}function x(t){var e=Math.max(0,t.workAdded-t.workRemoved);return Math.min(t.workRemaining,e)}function o(t){return t.isForecast&&!t.isActive}GH.Reports.ScopeBurndownBySprintChart=function(){function l(){return f.floatingBarChart().baselineAccessor(function(t){return t.baseline}).xAccessor(function(t){return t.sprintId}).yAccessor(function(t){return t.baseline+t.workCompleted+g(t)+x(t)}).maxBarWidth(80).extend({emptyBarHeight:f.prop(25),labelAccessor:function(){return function(t){return t.isActive?AJS.format("{0} (active)",t.sprintName):t.sprintName}},isCollapsedBar:function(){return function(t){return!!t.collapsed}},isEmptyBar:function(){var e=this.baselineAccessor(),i=this.yAccessor(),n=this.isCollapsedBar();return function(t){return!n(t)&&i(t)===e(t)}},barHeight:function(){var e=this.baselineAccessor(),i=this.yAccessor(),n=this.yScale(),r=this.isEmptyBar(),s=this.emptyBarHeight();return function(t){return r(t)?s:n(e(t))-n(i(t))}},data:function(){return p.sprints()}}).update(function(t){var n=this.x(),r=this.y(),s=this.isEmptyBar(),a=this.emptyBarHeight();t.selection.attr("transform",function(t,e){var i=r(t,e);return s(t)&&(i-=a),"translate("+n(t,e)+","+i+")"})})}function t(){return l().elementTag("g").showLabels(!0).update(function(t){var a=this.barWidth(),o=this.barHeight(),l=this.isEmptyBar(),c=this.isCollapsedBar(),h=p.data().estimationStatistic.formatter.formatCompact,d=this.showLabels();t.selection.each(function(t){var e,i=o(t),n=c(t),r=l(t),s=m.select(this).classed("ghx-prediction",t.isForecast);(e=f.stack().classPrefix("ghx").showLabels(!0).extend({barWidth:f.prop(),labelAccessor:function(){return function(t){return t[2]||""}},labelFormatter:f.prop()})).data.get(function(t){if(!t)return[];var e=x(t),i=g(t),n=this.labelFormatter(),r=[];return r.push([e+i,t.workCompleted,t.workCompleted?"-"+n(t.workCompleted):""]),r.push([e,i,n(i)]),r.push([0,e,e?"+"+n(e):""]),r}),e.elementClass("ghx-stack").height(i).barWidth(a).showLabels(d).labelFormatter(h).data(n||r?null:t)(s),f.drawable().extend(f.withDimensions()).enter(function(t){t=t.selection;t.append("rect").classed("ghx-series-0",!0),t.append("text").classed("ghx-series-label-0 bar-label",!0),t.append("polyline").classed("ghx-bar-underlined",!0)}).update(function(t){var e=this.height(),i=this.width(),t=t.selection;t.selectAll("rect").attr("height",e).attr("width",i),t.selectAll("text").attr("x",i/2).attr("y",e/2).attr("dy","0.45em").text(0),t.selectAll("polyline").attr("points","0,"+e+" "+i+","+e)}).elementClass("ghx-zero-value-sprint").height(i).width(a).data(r?[0]:[])(s),f.drawable().extend(f.withDimensions()).elementClass("ghx-collapsed-sprint").extend({ellipsisHeight:function(){return.5*this.width()}}).enter(function(t){t.selection.append("text").attr({"text-anchor":"middle",y:-this.ellipsisHeight(),dy:"-.4em"})}).update(function(t){var e=this.width();t.selection.select("text").each(function(t){t=m.select(this).text(AJS.format("{0,choice,0#0 sprints|1#1 sprint|1\u003c{0,number} sprints} not shown",t));f.utils.wrapText(t,e,!0)}),u().height(-this.ellipsisHeight()).width(e)(t.selection)}).width(a).data(n?[t.collapsed]:[])(s)})})}var u=function(){var e=m.scale.linear().domain([40,80]).range([3,5]);return f.circlePlot().extend({yRange:function(){return[0,this.height()]},radiusAccessor:function(){var t=this.width();return function(){return e(t)}}}).elementClass("ghx-ellipsis").data([[0,0],[1,0],[2,0]]).xDomain([-1,3]).yDomain([-1,1])},e=f.labelledAxis().height(60).text("Sprints").orient("bottom").axisConstructor(function(){return m.svg.axis().outerTickSize(0)}),i=f.labelledAxis().width(50).orient("left").extend({text:function(){return p.data().estimationStatistic.name}}).axisConstructor(function(){var e=p.data().estimationStatistic.formatter.formatCompact;return m.svg.axis().outerTickSize(0).tickFormat(function(t){return e(Math.abs(t))}).tickValues([0])}),n=f.layerable().addLayer("grid",f.gridLines().orient("left").extend({width:function(){return p.restrictedWidth()}})).addLayer("divider",f.singular().extend(f.withDimensions()).elementTag("line").elementClass("chart-divider").update(function(t){t.selection.attr({x1:p.restrictedWidth(),x2:p.restrictedWidth(),y1:-20,y2:this.height()+20})})).addLayer("border",f.drawable().extend(f.withDimensions()).data([{from:[0,0],to:[1,0]},{from:[1,0],to:[1,1]}]).elementTag("line").update(function(t){var e=m.scale.linear().domain([0,1]).range([0,this.width()]),i=m.scale.linear().domain([0,1]).range([0,this.height()]);t.selection.each(function(t){return m.select(this).attr({x1:e(t.from[0]),y1:i(t.from[1]),x2:e(t.to[0]),y2:i(t.to[1])})})})).addLayer("sprints",t().elementClass("ghx-bar-sprint").dataFilter(function(t){return s.reject(t,o)})).addLayer("forecastSprints",t().elementClass("ghx-bar-sprint").showLabels(!1).dataFilter(function(t){return s.filter(t,function(t){return o(t)&&0<t.workAtStart})})).addLayer("dialogTargets",l().enter(function(t){a.hide(),t.selection.on("click.dialog",function(t){var e=p.data();t.rapidViewId=e.rapidViewId,a.show(this,t,e.estimationStatistic,e.labels)})}).elementClass("ghx-clickable-bar-sprint").dataFilter(function(t){return s.reject(t,o)})),p=f.component().extend(function(){var t=this.data().sprints,e=this.positions().center.width,i=e-320,n=l(),r=n.padding(),s=n.outerPadding(),a=40/(1-r),o=80/(1-r),n=Math.max(Math.min(i/t.length,o),a),i=Math.max(Math.ceil(320/n),Math.ceil((e-o*t.length)/n)),o=Math.floor((e-a*(2*s-r))/a),a=t.length+i-o+1;1<a&&(o=t[1+a],(t=t.slice()).splice(1,a,{sprintId:"sprints collapsed",sprintName:"",baseline:Math.min(0,o.baseline),workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:!1,isActive:!1,collapsed:a}));a=this.data(),i=a.getForecast(i),i=t.concat(i),n=e/(i.length+s);a.forecast.forecastError?this.restrictedWidth(n*(t.length+2*s-r)):this.restrictedWidth(n*(t.length+s-r/2)),this.sprints(i)}).extend(f.borderLayout()).extend(f.utils.defaultViewBox).center(n).north(f.withDimensions().height(25)).south(e).west(i).east(f.withDimensions().width(1)).extend({sprints:f.prop([]),restrictedWidth:f.prop(null),xDomain:function(){return s.pluck(this.sprints(),"sprintId")},yDomain:function(){var t=this.sprints();return[s.min(s.pluck(t,"baseline")),m.max(t,function(t){return t.baseline+t.workCompleted+x(t)+g(t)})]}}),r=f.singular().extend(f.withDimensions()).elementTag("div").elementClass("ghx-infographic-overlay").update(function(t){var e=p.data();e.forecast.forecastError?t.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage({title:"No forecast available yet",description:e.forecast.forecastError,helpUrl:e.labels.helpUrl})):0===e.forecast.sprintsRemaining?t.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints({unestimatedIssuesCount:e.forecast.remainingEstimatableIssueCount,imageURL:AJS.contextPath()+"/download/resources/"+c.getPluginKey()+"/images/trophy.svg"})):t.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent({sprintsRemaining:e.forecast.sprintsRemaining,velocity:e.estimationStatistic.formatter.formatFull(e.forecast.velocity),workRemaining:e.estimationStatistic.formatter.formatFull(e.forecast.workRemaining),description:e.labels.forecastDescription(e.forecast.sprintsRemaining),estimationStatistic:e.estimationStatistic.name,helpUrl:e.labels.helpUrl}));var i=p.height(),n=p.width(),r=p.positions(),s=r.west.width+p.restrictedWidth(),a=n-s,o=r.center.height,l=t.selection.node().offsetHeight,e=t.selection.node().offsetWidth,o=r.north.height+o/2;t.selection.style({left:(s+a/2)/n*100+"%",top:o/i*100+"%","margin-left":-e/2+"px","margin-top":-l/2+"px"})});return f.component().extend(f.withData()).extend(function(){var t=this.selection(),e=f.singular().elementTag("svg").elementClass("ghx-svg-chart");e(t),p.parent(this)(e.elements()),r.parent(this)(t)})}}(GH.Util,d3,c3,_,(GH.NumberFormat,GH.Reports.ScopeBurndownBySprintChartDialog));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartHowTo.js' */
!function(c,a,i,o){o.ScopeBurndownBySprintChartHowTo=function(){function t(){return a.floatingBarChart().elementClass("ghx-bar-sprint").elementTag("g").yAccessor(function(t){return t[0]+i.reduce(t[1],function(t,n){return t+n},0)}).yDomain([-1,9]).update(function(t){var e=this.barWidth(),r=this.barHeight();t.selection.each(function(n){a.stack().classPrefix("ghx").height(r(n)).extend({barWidth:function(){return e},data:function(){var t=n[1];return[[t[0]+t[1],t[2]],[t[0],t[1]],[0,t[0]]]}})(c.select(this))})})}var n=t().data([[0,[0,8,0]],[0,[0,6,2]],[0,[0,4,2]],[0,[0,2,2]],[0,[0,0,2]]]),e=t().data([[2,[0,6,0]],[0,[2,4.5,1.5]],[0,[0,5,1.5]],[2,[0,1.5,1.5]],[2,[0,0,1.5]]]),r=t().data([[0,[0,6,1.5]],[0,[0,4.5,1.5]],[0,[0,3,1.5]],[0,[0,1.5,1.5]],[0,[0,0,1.5]]]).update(function(t){t.selection.classed("ghx-prediction",function(t,n){return 2<=n})});return a.component("scopeBurndownBySprintChartHowTo").extend(o.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-scope-burndown-chart-svg",!0)}).charts([n,e,r])}}(d3,c3,_,GH.Reports);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartLegend.js' */
!function(t,n){"use strict";GH.Reports.ScopeBurndownBySprintChartLegend=function(){function e(t,e,n){return t.append("g").classed(e,!0).append("rect").attr("width","100%").attr("height","100%").classed(n,!0)}return n.component("scopeBurndownBySprintChartLegend").extend(t()).charts([function(t){e(t,"ghx-bar-sprint","ghx-series-0")},function(t){var e,n,r;e="ghx-prediction",n="ghx-series-0",r="ghx-series-1",(e=t.append("g").classed(e,!0)).append("rect").classed(n,!0).attr({y:0,width:"100%",height:"50%"}),e.append("rect").classed(r,!0).attr({y:"50%",width:"100%",height:"50%"})},function(t){e(t,"ghx-bar-sprint","ghx-series-1")},function(t){e(t,"ghx-bar-sprint","ghx-series-2")}])}}(GH.Reports.multipleCharts,c3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChart.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart",["require"],function(t){"use strict";var h,i,p=t("underscore"),f=t("jira-agile/d3");function e(){}return t("jira-agile/rapid/global-events").on("pre-initialization",function(){h=c3,i=GH.FlotChartUtils}),e.prototype={hide:function(t){GH.Reports.BurnupChartDialog.hide(),t.html("")},show:function(e,t){t.html("");var n=GH.Reports.BurnupChartScrubber();t=t.append("svg").attr("height",parseInt(t.style("height"))).attr("width",parseInt(t.style("width")));var r=[e.start,e.end],a=[f.min(e.scope.concat(e.work),function(t){return t.value}),f.max([{value:8}].concat(e.scope.concat(e.work)),function(t){return t.value})],i=h.component().extend(function(){n.enableScrubber(),GH.Reports.BurnupChartDialog.hide()}).extend(h.borderLayout()).extend(h.utils.defaultViewBox).extend({xDomain:function(){var t=r;return p.each(t,function(t){h.checkIsNumber(t)}),t},yDomain:function(){var t=a;return p.each(t,function(t){h.checkIsNumber(t)}),t},clusters:h.prop()}).xScaleConstructor(f.time.scale).yScaleConstructor(f.scale.linear),o=h.labelledAxis().axisConstructor(function(){return f.svg.axis().tickFormat(function(t){return e.formatShortDate(t)})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return-1!==this.getAttribute("transform").indexOf("translate(-")}).remove()}).height(50).text("Time").orient("bottom"),c=this.calculateYTicks(a[1],e.statisticField),s=h.labelledAxis().axisConstructor(function(){return f.svg.axis().tickValues(c.tickValues).tickFormat(e.formatStatistic).ticks(8)}).width(60).text(e.statisticField.name).orient("left"),u=h.fillWithRect().elementClass("ghx-dragging"),l=this.buildGuideline(e),d=h.component().extend(h.interactive().domContext(AJS.$("#ghx-chart-group")).region(u)).extend(h.layerable());e.sprintCompleted||d.addLayer("today-line",h.linePlot().extend({data:function(){return[[e.now,a[0]],[e.now,a[1]]]}}).elementClass("today-line")).addLayer("today-line-label",h.label().extend({width:function(){return 2*i.xScale()(e.now)},height:function(){return i.yScale()(a[1])},orient:function(){return"bottom"},text:function(){return "Today"}})),d.extend(n).addLayer("grid",h.gridLines().orient("left")).addLayer("non-work-days",h.areaPlot().extend({data:function(){return i.data().nonWorkPeriods.map(function(t){return[[t.start,a[0]],[t.start,a[1]],[t.end,a[1]],[t.end,a[0]]]}).reduce(function(t,e){return t.concat(e)},[])}}).elementClass("non-working-days")).addLayer("guideline",h.linePlot().extend({data:function(){return l}}).elementClass("guide-line")).addLayer("scope-projection",h.linePlot().extend({data:function(){var t=i.data().scope[e.scope.length-1];return[[t.timestamp,t.value],[e.end,t.value]]}}).elementClass("scope-projection-line")).addLayer("scope",this.steppedLinePlot().extend({data:function(){return i.data().scope.map(function(t){return[t.timestamp,t.value]})}}).elementClass("scope-line")).addLayer("work",this.steppedLinePlot().extend({data:function(){return i.data().work.map(function(t){return[t.timestamp,t.value]})}}).elementClass("work-line")).addLayer("filler",u).addLayer("scope-marker",h.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return i.data().scope.slice(1,-1)}}).enter(function(t){t.selection.on("click.dialog",function(t){GH.Reports.BurnupChartDialog.show(this,e,t),n.hideScrubber()})}).elementClass("scope-line-marker")).addLayer("work-marker",h.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return i.data().work.slice(1,-1)}}).enter(function(t){t.selection.on("click.dialog",function(t){GH.Reports.BurnupChartDialog.show(this,e,t),n.hideScrubber()})}).elementClass("work-line-marker")),(i=i.center(d).north(h.withDimensions().height(20)).south(o).east(h.withDimensions().width(40)).west(s)).data(e),i(t)},buildGuideline:function(n){var r=[[n.start,0]],a=n.scope[n.scope.length-1].value,i=n.end-n.start;n.nonWorkPeriods.forEach(function(t){i-=t.end-t.start});var o=0;return n.nonWorkPeriods.forEach(function(t){var e=t.start-n.start;e-=o;e=Math.min(e/i,1);r.push([t.start,e*a]),r.push([t.end,e*a]),o+=t.end-t.start}),r.push([n.end,a]),r},steppedLinePlot:function(){return h.component("steppedlinePlot").extend(h.linePlot()).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());e.interpolate("step-after"),t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})},calculateYTicks:function(t,e){var e=i.calculateYAxis(t,e),n=e.tickSize||e.minTickSize;if(n)for(var r=[],a=0;a<=t;a+=n)r.push(a);return{tickValues:r}}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartLegend.js' */
!function(n,t){"use strict";GH.Reports.BurnupChartLegend=function(){function e(n,e,t){return n.append("g").classed(e,!0).append("line").attr("stroke-linecap","round").attr("x1","0").attr("y1","20").attr("x2","20").attr("y2","20").attr("transform","translate(-10,3), rotate(-45)").classed(t,!0)}return t.component("sprintBurnupChartLegend").extend(n()).charts([function(n){e(n,"ghx-burnup-line-legend","scope")},function(n){e(n,"ghx-burnup-line-legend","scope-projection")},function(n){e(n,"ghx-burnup-line-legend","completed-work")},function(n){e(n,"ghx-burnup-line-legend","guideline")}])}}(GH.Reports.multipleCharts,c3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupTransformer.js' */
!function(u,o){"use strict";function p(e,s){var a=[],i=[];return e.forEach(function(e){var t=s[e.key];t||(t={key:e.key,prevEstimate:0,estimate:0,inSprint:!1,done:!1},s[e.key]=t);var n=!1,r=!1;switch(e.type){case"estimate update":t.estimate!==e.newEstimate&&(t.prevEstimate=t.estimate,t.estimate=e.newEstimate,n=t.inSprint&&!t.isExcluded,r=t.inSprint&&!t.isExcluded&&t.done);break;case"issue done":t.done||(t.done=!0,r=t.inSprint&&!t.isExcluded);break;case"issue not done":t.done&&(t.done=!1,t.isExcluded?(e.isInclusion=!0,t.isExcluded=!1,n=t.inSprint):r=t.inSprint);break;case"issue removed":t.inSprint&&(t.inSprint=!1,n=!t.isExcluded,r=!t.isExcluded&&t.done);break;case"issue added":t.inSprint||(n=t.inSprint=!0,r=t.done)}n&&a.push(d("scope",e.timestamp,f(s,!1),e,t)),r&&i.push(d("done",e.timestamp,f(s,!0),e,t))}),{scope:a,done:i}}function c(e,t,n){return d(e,t,n,{type:"start event"},{})}function m(e,t,n){return d(e,t,n,{type:"end event"},{})}function d(e,t,n,r,s){s=s||{};var a=0,i=0,i="issue removed"===(r=r||{}).type?(a=0,s.estimate):"issue added"===r.type?(a=s.estimate,0):"issue not done"===r.type?r.isInclusion?(a=s.estimate,0):(a=0,s.estimate):(a=s.estimate,s.prevEstimate);return{timestamp:t,value:n,change:{type:r.type,line:e,key:s.key,fromValue:i,toValue:a}}}function f(e,t){var n,r,s=0;for(n in e)!e.hasOwnProperty(n)||(r=e[n]).inSprint&&!r.isExcluded&&(t&&r.done||!t)&&(s+=r.estimate);return s}function h(t){return Object.keys(t).filter(function(e){e=t[e];return e.inSprint&&!e.isExcluded}).sort(e)}function e(e,t){if(e===t)return 0;var n=/(\w+)-(\d+)/,r=n.exec(e);if(!r)return-1;e=n.exec(t);if(!e)return 1;n=r[1],t=e[1];if(n!==t)return t<n?1:-1;r=parseInt(r[2],10),e=parseInt(e[2],10);return r===e?0:e<r?1:-1}var t={getBurnupModelFromScopeBurndownModel:function(t){var e,n,r,s,a=(e=t).completeTime||(e.now>e.endTime?e.now:e.endTime),i=function(e,t){var n,r=function(e){function t(e){e.column&&(e.column.notDone?r.push({type:"issue not done",key:e.key,timestamp:parseInt(n)}):e.column.notDone||r.push({type:"issue done",key:e.key,timestamp:parseInt(n)})),e.statC&&e.statC.newValue&&r.push({type:"estimate update",key:e.key,timestamp:parseInt(n),newEstimate:0<e.statC.newValue?e.statC.newValue:0}),!1===e.added&&r.push({type:"issue removed",key:e.key,timestamp:parseInt(n)}),!0===e.added&&r.push({type:"issue added",key:e.key,timestamp:parseInt(n)})}var n,r=[];for(n in e)e.hasOwnProperty(n)&&e[n].forEach(t);return r}(e.changes).sort(function(e,t){return e.timestamp>t.timestamp?1:e.timestamp===t.timestamp?0:-1}),s=parseInt(e.startTime),a=e.now>t?t:e.now,i={};for(n in p(r.filter(function(e){return e.timestamp<=s}),i),i){var u;!i.hasOwnProperty(n)||(u=i[n]).done&&u.inSprint&&(u.isExcluded=!0)}var o=h(i),d=[c("scope",s,f(i,!1))],t=[c("done",s,0)],e=p(r.filter(function(e){return e.timestamp>s&&e.timestamp<=a}),i),r=h(i);return d=d.concat(e.scope),t=t.concat(e.done),d.push(m("scope",a,d[d.length-1].value)),t.push(m("done",a,t[t.length-1].value)),{scope:d,done:t,startKeys:o,endKeys:r}}(t,a);return t.chartData={now:t.now,start:t.startTime,startKeys:i.startKeys,end:a,sprintCompleted:!!t.completeTime,endKeys:i.endKeys,nonWorkPeriods:(e=t.workRateData,n=t.startTime,r=a,s=[],e.rates.forEach(function(e){e.rate<1&&e.start<=r&&e.end>=n&&s.push({start:e.start<n?n:e.start,end:e.end>r?r:e.end})}),s),scope:i.scope,work:i.done,statisticField:t.statisticField,rapidViewId:t.rapidViewId,estimatedIssueEvents:i.scope.filter(function(e){return 0<e.value}).length,issueToSummary:t.issueToSummary},t.chartData.formatDate=function(e){return u.utc(e).format("lll")},t.chartData.formatShortDate=function(e){return 0<u.duration(u.utc(t.chartData.end).diff(t.chartData.start)).years()?u.utc(e).format("MMM YYYY"):u.utc(e).format("MMM D")},t.chartData.formatStatistic=function(e){return o.renderStatisticText(e,!1,t.chartData.statisticField.renderer)},t.chartData.formatEventType=function(e){switch(e){case"estimate update":return "Estimate updated";case"issue done":return "Issue completed";case"issue not done":return "Issue re-opened";case"issue removed":return "Removed from sprint";case"issue added":return "Added to sprint";case"start event":return "Sprint started";case"end event":return "Sprint finished";default:return e}},t}};GH.Reports=GH.Reports||{},GH.Reports.SprintBurnupTransformer=t}((_,moment),(AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat,GH.ChartUtils));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChart.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChart=function(){"use strict";function e(){return c3.circlePlot().xAccessor(function(e){return e.point[0]}).yAccessor(function(e){return e.point[1]})}var n=c3.component().extend(function(){this.clusters(n.data().getClusteredIssueSeries(20,this.xScale(),this.yScale())),0<n.data().issues.length?o.enableScrubber():o.disableScrubber(),GH.Reports.ControlChartDialog.hide()}).extend(c3.borderLayout()).extend(c3.utils.defaultViewBox).extend({xDomain:function(){var e=n.data().bounds.x;return _.each(e,function(e){c3.checkIsNumber(e)}),e},yDomain:function(){var e=n.data().bounds.y;return _.each(e,function(e){c3.checkIsNumber(e)}),e},clusters:c3.prop()}).xScaleConstructor(d3.time.scale).yScaleConstructor(function(){return n.data().bounds.y[1]<30?d3.scale.linear():d3.scale.pow().exponent(1/3)}),t=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(e){var t=moment(n.data().bounds.x[1]).diff(n.data().bounds.x[0],"days");return moment(e).format(t<2?"LLL":"LL")})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return-1!==this.getAttribute("transform").indexOf("translate(-")}).remove()}).height(50).text("Issue Transition Date").orient("bottom"),r=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(e){return GH.NumberFormat.format(e)})}).width(60).text("Elapsed time (days)").orient("left"),a=d3.scale.log().domain([2,100]).range([6,15]).clamp(!0),i=c3.fillWithRect().elementClass("ghx-dragging"),o=GH.Reports.ControlChartScrubber(),i=c3.component().extend(c3.interactive().domContext(AJS.$("#ghx-chart-group")).region(i)).extend(c3.layerable()).extend(o).clipped(!0).addLayer("standard-deviation",c3.deviationPlot().extend({data:function(){return n.data().series.standardDeviationArea}}).elementClass("standard-deviation")).addLayer("grid",c3.gridLines().orient("left")).addLayer("mean",c3.linePlot().extend({data:function(){return n.data().series.meanLine}}).elementClass("control-chart-mean")).addLayer("aggregate-mean",c3.linePlot().extend({data:function(){return n.data().series.rollingAverageLine}}).elementClass("control-chart-aggregate-mean")).addLayer("filler",i).addLayer("issues",e().extend({data:function(){return n.clusters().unclustered}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.ControlChartDialog.show(this,e.issue),o.hideScrubber()})}).dataKey(function(e){return e.issue.key}).elementClass("issue")).addLayer("issue-clusters",e().extend({data:function(){return n.clusters().clustered}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.ControlChartDialog.show(this,e.issues),o.hideScrubber()})}).dataKey(function(e){return e.point[0]}).elementClass("cluster").radiusAccessor(function(e){return a(e.size)}));return n.center(i).north(c3.withDimensions().height(10)).south(t).west(r)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartHowTo.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChartHowTo=function(){var e=_.range(8),t=c3.circlePlot().data(_.zip(e,[0,2,1,1.5,2,0,11,1.2])).xDomain([-1,8]).yDomain([-2,14]).elementClass("issue").update(function(e){e.selection.each(function(e){11===e[1]&&d3.select(this).classed("active",!0)})}),a=c3.linePlot().data(_.zip(e,[7,5,5.5,3.5,4,3,3,2])).yDomain([0,10]).elementClass("control-chart-aggregate-mean"),n=[4,6,3,4,5,4,4.5,4],n=c3.layerable().xDomain([0,e.length-1]).yDomain([0,10]).addLayer("standard-deviation",c3.deviationPlot().data(_.zip(e,n,[4,4,3.5,2,2,1.5,1,1])).elementClass("standard-deviation")).addLayer("rolling-average",c3.linePlot().data(_.zip(e,n)).elementClass("control-chart-aggregate-mean"));return c3.component("controlChartHowTo").extend(GH.Reports.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-control-chart-svg",!0)}).charts([t,a,n])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartLegend.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChartLegend=function(){var t=[[0,1],[1,0]],e=c3.linePlot().data(t).elementClass("control-chart-mean"),t=c3.linePlot().data(t).elementClass("control-chart-aggregate-mean");return c3.component("controlChartLegend").extend(GH.Reports.multipleCharts()).charts([function(t){t.append("circle").attr("cx","50%").attr("cy","50%").attr("r",4).classed("issue",!0)},function(t){t.append("circle").attr("cx","50%").attr("cy","50%").attr("r",9).classed("cluster",!0)},e,t,function(t){t.append("rect").attr("width","100%").attr("height","100%").classed("standard-deviation",!0)}])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsModel.js' */
!function(){function n(){}n.prototype={includeNonWorkingDays:!1,resetToDefaults:function(){return this.includeNonWorkingDays=!1,this},fromNormalized:function(n){return"includeNonWorkingDays"in n?this.includeNonWorkingDays=n.includeNonWorkingDays:this.resetToDefaults(),this},toNormalized:function(){var n={};return this.includeNonWorkingDays&&(n.includeNonWorkingDays=this.includeNonWorkingDays),n},isDefault:function(){return!1===this.includeNonWorkingDays}},GH.Reports.ControlChartViewingOptionsModel=n}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsModel.js' */
!function(a){function e(){}e.prototype={available:null,selected:null,setAvailable:function(e){return this.available=e,this.fromNormalized(this.selected),this},getDefaults:function(){if(!this.available)return null;var e=a.pluck(this.available.columns,"id");return{columnIds:e.length<3?[a.last(e)]:e.slice(1,-1),swimlaneIds:a.pluck(this.available.swimlanes,"id"),quickFilterIds:[]}},resetToDefaults:function(){return this.selected=this.getDefaults(),this},fromNormalized:function(l){l=l?a.pick(l,"columnIds","swimlaneIds","quickFilterIds"):{};var s={columnIds:"columns",swimlaneIds:"swimlanes",quickFilterIds:"quickFilters"},n=this.available;return n&&a.each(l,function(e,t){var i=a.pluck(n[s[t]],"id"),i=a.intersection(l[t],i);i.length?l[t]=i:delete l[t]}),this.selected=a.defaults(l,this.getDefaults()),this},toNormalized:function(){var t=this.getDefaults(),i=this.selected,l={};return t?(e("columnIds"),e("swimlaneIds"),e("quickFilterIds"),l):a.extend(l,i);function e(e){a.isEqual(i[e].sort(),t[e].sort())||(l[e]=i[e])}},isDefault:function(){return a.isEmpty(this.toNormalized())}},GH.Reports.ControlChartRefinementsModel=e}(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service",["require"],function(e){"use strict";var u,c=e("underscore"),h=e("jira-agile/d3"),a=e("jira-agile/rapid/global-events"),t=e("jira-agile/rapid/ajax");a.on("pre-initialization",function(){u=clusterVectors});function g(e){return e.duration}var v=864e5;function d(a,t){var l=[];t=t||{},c.each(a.columns,function(e,a){c.contains(t.refinements.selected.columnIds,e.id)&&l.push(a)});var e=c.compact(c.map(a.issues,function(e){return i=e,n=a,r=t.viewingOptions.includeNonWorkingDays,m=-1,s=0,o=[],c.each(l,function(e){var a,t=i.leaveTimes[e];t!==n.currentTime&&(a=(r?i.totalTime:i.workingTime)[e],s+=a,o.push({name:n.columns[e].name,duration:a}),m<t&&(m=t))}),-1===m?null:{key:i.key,summary:i.summary,endTime:m,duration:s,columns:o};var i,n,r,m,s,o}));return c.sortBy(e,"endTime")}function f(o,e,a){var l={rollingAverageLine:[],standardDeviationArea:[],rollingAverageWindow:0,maxStandardDeviation:0};if(!e.length)return l;var t=Math.max(5,.2*e.length),u=Math.floor((t-1)/2);l.rollingAverageWindow=2*u+1;var t=c.indexOf(o,e[0]),d=e[0].endTime>a.timeFrameTimes.from?Math.max(0,t-1):t,t=c.last(e).endTime<a.timeFrameTimes.to?Math.min(o.length,t+e.length+1):t+e.length,e=o.slice(d,t);c.each(e,function(e,a){var t,i,n,r,m=Math.max(0,d+a-u),s=Math.min(o.length,d+a+u+1),a=o.slice(m,s),m=h.mean(a,g),s=m/v,a=(t=m,a=a,i=g,r=0,c.each(a,function(e){i&&(e=i(e)),r+=(n=e-t)*n}),a=r/(0<a.length?a.length:1),Math.sqrt(a)/v);l.rollingAverageLine.push([e.endTime,s]),l.standardDeviationArea.push([e.endTime,s,a]),l.maxStandardDeviation=Math.max(l.maxStandardDeviation,s+a)});t=c.last(l.rollingAverageLine),e=c.last(l.standardDeviationArea);return t[0]<a.timeFrameTimes.to&&(l.rollingAverageLine.push([a.timeFrameTimes.to,t[1]]),l.standardDeviationArea.push([a.timeFrameTimes.to,e[1],e[2]])),l}function i(){}return i._calculateRollingSeries=f,i.prototype={get:function(e,l){return l=l||{},this._getData(e,l).andThen(function(e){var a=d(e,l),t=a.length?a[0].endTime:e.currentTime;l.timeFrame=l.timeFrame.clone(),l.timeFrame.setBounds(new Date(t),new Date(e.currentTime));var i=l.timeFrame.getTimeFrameDates();l.timeFrameTimes={from:i.fromDate.getTime(),to:i.toDate.getTime()};var n,r,m=(n=l,c.filter(a,function(e){return n.timeFrameTimes.from<=e.endTime&&e.endTime<=n.timeFrameTimes.to})),s=f(a,m,l),a=(r=m,i=s.rollingAverageWindow,{mean:h.mean(r,g),median:h.median(r,g),min:h.min(r,g),max:h.max(r,g),rollingAverageWindow:i}),o=c.map(m,function(e){return[e.endTime,e.duration/v]});return{issues:m,series:{meanLine:(r=a.mean||0,[[(i=l).timeFrameTimes.from,r/=v],[i.timeFrameTimes.to,r]]),rollingAverageLine:s.rollingAverageLine,standardDeviationArea:s.standardDeviationArea},stats:a,bounds:(r=m,a=s.maxStandardDeviation,s=l,r=Math.ceil(h.max(m,g)/v),a=Math.max(r,a),{x:[s.timeFrameTimes.from,s.timeFrameTimes.to],y:[0,1.1*a]}),earliestTime:t,currentTime:e.currentTime,getClusteredIssueSeries:function(e,a,t){return t=new u(o,m,e,a,t=t),{clustered:c.filter(t,function(e){return e.cluster}),unclustered:c.reject(t,function(e){return e.cluster})}}}})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_getData:function(e,a){a={rapidViewId:e,swimlaneId:a.refinements.selected.swimlaneIds,quickFilterId:a.refinements.selected.quickFilterIds};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&c.isEqual(this._dataRequestParams,a)||(this._dataRequestParams=a,this._dataPromise=t.get({url:"/rapid/charts/controlchart.json",data:a},"rapidChartData")),this._dataPromise}},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller",["require"],function(e){var t,i,r,n,a,o,l,s={},d=e("underscore"),c=e("jira-agile/rapid/global-events"),u=e("jira/analytics/web-client"),m=e("jira-agile/rapid/analytics-tracker"),p=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view"),f=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service"),g=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller"),h=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller"),F=new f;return c.on("pre-initialization",function(){t=GH.Reports.ChartTimeFrameModel,i=GH.Reports.ControlChartRefinementsModel,r=GH.Reports.ControlChartViewingOptionsModel,n=GH.ChartTimeFrames,a=GH.PromiseKeeper,o=GH.RapidBoard.State,l=GH.RapidViewConfig}),s.id="controlChart",s.SETTINGS_KEY="chart.config.controlChart",s.displayed=!1,s.rapidViewData=null,s.initPhasePromise=null,s.filterOptions=null,s.firstTimeLoadingData=!0,s.analytics=new m("gh.report.controlChart"),s.setRapidView=function(e){s.rapidViewData=e||{}},s.update=function(){s.saveFilterOptions(),o.pushState(),s.loadAndProcess(),s.fireQuickFilterToggledEvent()},s.fireQuickFilterToggledEvent=function(){var e=s.getFilterOptions(),t=e.refinements.selected.quickFilterIds,e=e.refinements.available.quickFilters.filter(function(e){return-1<t.indexOf(e.id)}).map(function(e){return e.query});0<e.length&&u.sendTrackEvent({source:"controlChartScreen",actionSubject:"quickFilter",actionSubjectId:"applyQuickfilter",action:"applied",attributes:{boardId:s.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),quickFiltersAppliedCount:e.length,onlyMyIssuesQuickFilterApplied:-1<e.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY),recentlyUpdatedQuickFilterApplied:-1<e.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY),customQuickFilterApplied:e.some(function(e){return e!==GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY&&e!==GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY})}})},s.show=function(){var t=s,i=t.getFilterOptions();t.initPhasePromise||(t.initPhasePromise=l.fetchConfiguration(t.rapidViewData.id).done(function(e){i.refinements.setAvailable(d.pick(e,"columns","swimlanes","quickFilters"))})),t._dataPromiseKeeper=new a,t.initPhasePromise.done(function(){t.displayed=!0;s.getFilterOptions();"custom"===l.currentData.data.swimlaneStrategy||(i.refinements.selected.swimlaneIds=d.pluck(i.refinements.available.swimlanes,"id")),o.pushState(),p.init(),g.start(i.refinements),h.start(i.viewingOptions),s.loadAndProcess();var e="show."+(s.rapidViewData.sprintSupportEnabled?"scrum":"kanban");s.analytics.trigger(e)})},s.hide=function(){s.displayed=!1,s._dataPromiseKeeper&&s._dataPromiseKeeper.reset(),p.destroy(),F.clearCache()},s.loadAndProcess=function(){p.showSpinner();var t=s.getFilterOptions(),e=F.get(s.rapidViewData.id,t);return s._dataPromiseKeeper.add(e).done(function(e){s.displayed&&(0<e.issues.length?(p.hideBlankState(),u.sendTrackEvent({source:"controlChartScreen",action:"viewed",actionSubject:"report",actionSubjectId:"controlChart",attributes:{boardId:s.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(!0),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile",appliedColumns:t.refinements.selected.columnIds.length,totalColumns:t.refinements.available.columns.length,quickfiltersAppliedCount:t.refinements.selected.quickFilterIds.length,swimlanesAppliedCount:t.refinements.selected.swimlaneIds.length}})):(p.showBlankState(t),s.analytics.trigger("blank")),s.processChartData(e))}).always(function(e){"abort"!==e&&p.hideSpinner()})},s.getFilterOptions=function(){var e;return s.filterOptions||(e=o.getBoardSetting(o.getRapidViewId(),s.SETTINGS_KEY,{}),s.filterOptions={timeFrame:(new t).fromNormalized(e),refinements:(new i).fromNormalized(e),viewingOptions:(new r).fromNormalized(e)}),s.filterOptions},s.saveFilterOptions=function(){o.setBoardSetting(s.SETTINGS_KEY,s.getNormalizedFromInternal())},s.processChartData=function(e){var t=new Date(e.earliestTime),i=new Date(e.currentTime),r=s.getFilterOptions();r.timeFrame.setBounds(t,i),s.firstTimeLoadingData&&(t=(i-t)/n.day,s.firstTimeLoadingData=!1,r.timeFrame.isDefault()&&t<90&&(r.timeFrame.setAllTime(),o.pushState())),p.render(e,r.timeFrame)},s.isApplicable=function(e){return!o.isAgilityBoard()},s.getNormalizedFromInternal=function(){var e=s.getFilterOptions();return d.extend({chart:s.id},e.timeFrame.toNormalized(),e.refinements.toNormalized(),e.viewingOptions.toNormalized())},s.updateInternalFromNormalized=function(e){var t=s.getFilterOptions();t.timeFrame.fromNormalized(e),t.refinements.fromNormalized(e),t.viewingOptions.fromNormalized(e),s.saveFilterOptions()},s.toUrl=function(e){return{days:e.days,from:e.from,to:e.to,column:e.columnIds,swimlane:e.swimlaneIds,quickfilter:e.quickFilterIds,nwd:e.includeNonWorkingDays}},s.getNormalizedFromUrl=function(e){function t(e){return d.isArray(e)?d.map(e,Number):[Number(e)]}var i={};return"days"in e&&(i.days=isNaN(e.days)?e.days:Number(e.days)),"to"in e&&(i.to=e.to),"from"in e&&(i.from=e.from),"column"in e&&(i.columnIds=t(e.column)),"swimlane"in e&&(i.swimlaneIds=t(e.swimlane)),"quickfilter"in e&&(i.quickFilterIds=t(e.quickfilter)),"nwd"in e&&(i.includeNonWorkingDays=e.nwd===(!0).toString()),i},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartView.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view",["require"],function(e){var a,n,t,r,o,i,s,l,d,m,c,u={},h=e("jquery"),f=e("jira-agile/d3"),g=e("jira/moment"),p=e("jira/analytics/web-client");return e("jira-agile/rapid/global-events").on("pre-initialization",function(){a=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"),i=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller"),n=GH.ChartView,t=GH.Reports.controlChart,r=GH.Reports.controlChartHowTo,o=GH.Reports.controlChartLegend,s=GH.Layout,l=GH.RapidViewConfig,d=GH.TimeFormat,m=GH.NumberFormat,c=GH.ChartTimeFrames}),u.$timeWindowSelect=null,u.$fromDateInput=null,u.$toDateInput=null,u.$timeFrameResetLink=null,u.ControlChart=null,u.bindingToModel=!1,u._firstRender=null,u.init=function(){u._firstRender=!0;var e=l.currentData.data.swimlaneStrategy;n.getChartContentElem(!0).html(GH.tpl.reports.controlChart.renderChartBody({shouldShowSwimlaneRefine:"custom"===e})),n.getChartLegendD3(!0).html(GH.tpl.reports.controlChart.renderLegend()),h("#ghx-chart-header-secondary .ghx-chart-legend").show(),(new r)(f.select(".ghx-group-how")),(new o)(f.select(".ghx-chart-legend")),u.renderControls(),u.renderChartSelector(),u.ControlChart=new t,u.bindToWindowResize()},u.destroy=function(){u.unbindToWindowResize()},u.render=function(e,t){u.bindModelToView(e,t),u._firstRender||n.showChartUpdatedToast(),u._firstRender=!1},u.renderChart=function(){u.ControlChart(f.select("#control-chart .ghx-svg-chart"))},u.renderChartSelector=function(){n.getChartSelector(!0).html(GH.tpl.reports.controlChart.renderChartSelector())},u.bindModelToChartHeader=function(e,t){var r=t.getTimeFrameDates(),t=GH.tpl.reports.controlChart.renderChartTimeWindow({fromDate:g(r.fromDate).format("LL"),toDate:g(r.toDate).format("LL"),timeFrame:t.timeFrame});h(".js-chart-time-window").text(t);t=0===e.issues.length?"":GH.tpl.reports.controlChart.renderChartSnapshots({mean:d.formatSensibleShortDuration(e.stats.mean),median:d.formatSensibleShortDuration(e.stats.median),min:d.formatSensibleShortDuration(e.stats.min),max:d.formatSensibleShortDuration(e.stats.max),issueCount:m.format(e.issues.length)});n.getChartSnapshot(!0).html(t);t=h(".js-chart-legend-rollingaveragewindow");e.stats.rollingAverageWindow?t.text(AJS.format("{0,number} issue window",e.stats.rollingAverageWindow)):t.text("Not available")},u.bindModelToControls=function(e){u.bindingToModel=!0;var t=e.getTimeFrameDates(),r=u.$timeFrameResetLink;u.$timeWindowSelect.val(e.getTimeFrame()).trigger("change"),u.updateCustomDatesFields(t.fromDate,t.toDate),u.validateCustomDates(),e.isDefault()?r.attr("aria-disabled","true").attr("title","Time scale is currently using default settings"):r.removeAttr("aria-disabled title"),u.bindingToModel=!1},u.bindModelToChart=function(e){u.ControlChart.data(e),u.renderChart()},u.bindModelToView=function(e,t){u.bindModelToChart(e),u.bindModelToChartHeader(e,t),u.bindModelToControls(t)},u.bindToWindowResize=function(){s.bindDelayedWindowResize(),h(GH).bind(s.EVENT_DELAYED_RESIZE+"."+a.id,function(){u.renderChart()})},u.unbindToWindowResize=function(){h(GH).unbind(s.EVENT_DELAYED_RESIZE+"."+a.id)},u.showBlankState=function(e){e=h(GH.tpl.reports.controlChart.renderBlankStateMessage({canResetRefinements:!e.timeFrame.isDefault()||!e.refinements.isDefault()}));e.find(".js-options-reset").on("click",function(e){u.resetDefaultTimeWindow(e),i.resetToDefaults()}),n.showBlankStateMessage(e)},u.hideBlankState=function(){n.hideBlankStateMessage()},u.showSpinner=function(){n.showSpinner()},u.hideSpinner=function(){n.hideSpinner()},u.handleTimeWindowChanged=function(e){var t,r;u.bindingToModel||("custom"===(t=u.$timeWindowSelect.val())?(r=u.getCustomDates(),a.getFilterOptions().timeFrame.setSimpleDates(r.fromDate,r.toDate)):a.getFilterOptions().timeFrame.setDays(+t),a.update(),p.sendUIEvent({source:"controlChartScreen",actionSubject:"select",actionSubjectId:"timeWindow",action:"changed"}))},u.renderControls=function(){Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-from",button:"js-option-timeframe-custom-from_trigger_c",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:d.dateFormat,useISO8601WeekNumbers:d.useISO8601WeekNumbers,showsTime:!1}),Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-to",button:"js-option-timeframe-custom-to_trigger_c",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:d.dateFormat,useISO8601WeekNumbers:d.useISO8601WeekNumbers,showsTime:!1}),u.$timeWindowSelect=h("#js-option-timeframe"),u.$fromDateInput=h("#js-option-timeframe-custom-from"),u.$toDateInput=h("#js-option-timeframe-custom-to"),u.$timeFrameResetLink=h("#js-option-timeframe-reset"),u.$timeWindowSelect.change(u.handleTimeWindowChanged),u.$fromDateInput.change(u.handleCustomDateSelected),u.$toDateInput.change(u.handleCustomDateSelected),u.$timeFrameResetLink.click(u.resetDefaultTimeWindow)},u.handleCustomDateSelected=function(){var e;u.bindingToModel||(u.validateCustomDates()&&(u.$timeWindowSelect.val("custom"),e=u.getCustomDates(),a.getFilterOptions().timeFrame.setSimpleDates(e.fromDate,e.toDate),a.update()),p.sendUIEvent({source:"controlChartScreen",actionSubject:"input",actionSubjectId:"date",action:"changed"}))},u.getCustomDates=function(){var e=u.$fromDateInput.val(),t=u.$toDateInput.val();return{fromDate:Date.parseDate(e,d.dateFormat),toDate:Date.parseDate(t,d.dateFormat),fromText:e,toText:t}},u.updateCustomDatesFields=function(e,t){u.$fromDateInput.val(e.print(d.dateFormat)),u.$toDateInput.val(t.print(d.dateFormat))},u.resetDefaultTimeWindow=function(e){u.bindingToModel||(a.getFilterOptions().timeFrame.resetToDefault(),a.update(),e.preventDefault())},u.validateCustomDates=function(){var e=u.getCustomDates(),t=!0,r="";return e.fromDate&&e.toDate&&c.isValidDate(e.fromText)&&c.isValidDate(e.toText)?e.fromDate>e.toDate&&(r="From-date must be before to-date",t=!1):(r=AJS.format("Date format should be as follows: {0}",c.getDateAsText(new Date)),t=!1),u.setTimeFrameError(r),t},u.setTimeFrameError=function(e){h(".js-timeframes-error").html(e)},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsView.js' */
GH.Reports.ControlChartRefinementsView=function(t,s,a){var c,u,n,l,d=null,i=null,o=t.noop,f=!0;function r(e,t,n,l){var i=e.find("select"),e=e.find(".ghx-refinement-selector"),t=_.map(d.available[t],function(e){return{value:e.id,label:e.name,selected:!1}});i.empty().append(GH.tpl.reports.controlChart.renderSelectOptions({options:t}));var o=new a({element:i,itemAttrDisplayed:"label"});o.$container.addClass("hidden").append(GH.tpl.reports.controlChart.renderRefineInfoMessage({message:l}));var r=s.create({content:o.$container,offsetTarget:e,width:"auto"});return e.on("click",function(e){e.preventDefault(),r.toggle(),o.$field.focus()}),o.model.$element.on("unselect selected",function(){var e,t;f&&(e=0<c.multiSelect.model.getSelectedValues().length,t=!u||0<u.multiSelect.model.getSelectedValues().length,e&&t?(d.selected[n]=_.map(o.model.getSelectedValues(),function(e){return+e}),p()):setTimeout(function(){g()},0))}),{multiSelect:o,$button:e}}function m(e){i=null;var t="custom"===GH.RapidViewConfig.currentData.data.swimlaneStrategy;c=r(e.find("#js-options-refine-columns"),"columns","columnIds","At least one column must be selected"),t&&(u=r(e.find("#js-options-refine-swimlanes"),"swimlanes","swimlaneIds","At least one swimlane must be selected")),n=r(e.find("#js-options-refine-quickfilters"),"quickFilters","quickFilterIds",""),l=e.find(".js-reset-btn").on("click",function(e){e.preventDefault(),o("resetToDefaults")})}function p(){_.isEqual(d.toNormalized(),i)||(null!==i&&o("modelChanged"),g(),i=d.toNormalized())}function g(){function e(t,e){t&&(t.multiSelect.clear(),_.each(e,function(e){e=t.multiSelect.model.getDescriptor(e.toString());t.multiSelect.selectItem(e,!0)}),e=t.multiSelect.model.$element.find("option:selected").map(function(){return this.text}).get().join(", "),t.$button.find(".ghx-refinement-wrap").text(e||"None"))}f=!1,e(c,d.selected.columnIds),e(u,d.selected.swimlaneIds),e(n,d.selected.quickFilterIds),d.isDefault()?l.attr("aria-disabled","true"):l.removeAttr("aria-disabled"),f=!0}return{start:function(e){d=e,m(t("#ghx-controlchart-refine-options"))},digest:function(){p()},setHandler:function(e){o=e},getModel:function(){return d}}}(AJS.$,(AJS.I18n,AJS.InlineLayer),AJS.CheckboxMultiSelect);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller",["require"],function(t){"use strict";var e,r=GH.Reports.ControlChartRefinementsView;t("jira-agile/rapid/global-events").on("pre-initialization",function(){e=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var n={modelChanged:function(){e.update()},resetToDefaults:function(){r.getModel().resetToDefaults(),r.digest()}};return{start:function(t){r.setHandler(function(t){n[t]()}),r.start(t),r.digest()},resetToDefaults:n.resetToDefaults}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsView.js' */
GH.Reports.ControlChartViewingOptionsView=function(t){var o,e,i=null,r=null,l=t.noop,u=!0;function a(n){r=null,o=n.find("#js-option-nwd").on("change",function(){u&&(i.includeNonWorkingDays=this.checked,c())}),e=n.find(".js-reset-btn").on("click",function(n){n.preventDefault(),l("resetToDefaults")})}function c(){_.isEqual(i.toNormalized(),r)||(null!==r&&l("modelChanged"),function(){u=!1,o.prop("checked",i.includeNonWorkingDays),i.isDefault()?e.attr("aria-disabled","true"):e.removeAttr("aria-disabled");u=!0}(),r=i.toNormalized())}return{start:function(n){i=n,a(t("#ghx-controlchart-viewing-options"))},digest:function(){c()},setHandler:function(n){l=n},getModel:function(){return i}}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller",["require"],function(t){"use strict";var r,i=GH.Reports.ControlChartViewingOptionsView;t("jira-agile/rapid/global-events").on("pre-initialization",function(){r=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var e={modelChanged:function(){r.update()},resetToDefaults:function(){i.getModel().resetToDefaults(),i.digest()}};return{start:function(t){i.setHandler(function(t){e[t]()}),i.start(t),i.digest()}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartDialog.js' */
GH.Reports=GH.Reports||{},GH.Reports.ControlChartDialog=function(){var n,a="control-chart-issues",r=GH.TimeFormat.formatShortDuration;function i(e){function t(e){return e.duration}return[{label:"Max time",value:r(d3.max(e,t))},{label:"Average time",value:r(d3.mean(e,t))},{label:"Min time",value:r(d3.min(e,t))}]}function l(e){return GH.tpl.reports.controlChart.renderDialogIssueContent({issue:(t=e,_.each(t.columns,function(e){e.formattedDuration=r(e.duration)}),t.formattedDuration=r(t.duration),t),url:GH.Ajax.CONTEXT_PATH+"/browse/"+encodeURIComponent(e.key)});var t}return GH.InlineDialog.preventCloseOnClick(a),{show:function(e,r){var t=d3.select(e);t.classed("active",!0);var o=_.isArray(r);return(n=GH.SideInlineDialog.create(a,e,function(e,t,n){var a;e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(o?(a=r,e=_.pluck(a,"key"),GH.tpl.reports.controlChart.renderDialogClusterContent({issueCount:a.length,stats:i(a),url:GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(e.join(","))})):l(r)),n()},{addActiveClass:!1,container:"#ghx-report-scrollarea > .aui-page-panel",fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,hideCallback:function(){t.classed("active",!1)}})).show(),n},hide:function(){n&&n.hide()},isVisible:function(){return!!n&&n.is(":visible")}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubberDialog.js' */
GH.Reports.ControlChartScrubberDialog=function(){var i,e=!0,r="scrubber-dialog",n={container:"#ghx-chart-group",fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,width:230,closeOthers:!1,persistent:!0,addActiveClass:!1};function t(){!GH.Reports.ControlChartDialog.isVisible()&&e&&i.show()}function o(e){var i=GH.Reports.ControlChartController.getFilterOptions().timeFrame.getTimeFrameDuration()/GH.ChartTimeFrames.day;return e=30<i?moment(e).format("LL"):moment(e).format("LLL")}function a(){return!!i&&i.is(":visible")}return{init:function(e){i=GH.SideInlineDialog.create(r,e,function(e,i,n){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog"),e.addClass("ghx-scrubber-contents"),e.next("#arrow-"+r).addClass("ghx-arrow-scrubber-dialog"),n()},n),GH.InlineDialog.registerInlineDialogHacks(r,{validateClickToCloseFn:function(){return!1}})},show:t,hide:function(){i&&i.hide()},isVisible:a,refresh:function(e){a()||t(),function(e){e=e.time?GH.tpl.reports.controlChart.renderScrubberDialogContent({indicatedTime:o(e.time),rollingAverage:GH.Util.roundToDecimalPlaces(e.rollingAverage,1),standardDeviation:GH.Util.roundToDecimalPlaces(e.standardDeviation,1)}):GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent({startTime:o(e.startTime),endTime:o(e.endTime)});AJS.$("#inline-dialog-"+r).find(".ghx-scrubber-contents").html(e)}(e),i.refresh()},disable:function(){e=!1},enable:function(){e=!0}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubber.js' */
GH.Reports.ControlChartScrubber=function(){var t=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.ControlChartDialog.isVisible()}),o=GH.Reports.ControlChartBrush();function n(){var r,e,t,n=this.mouseCoordinates(),i=this.xScale().invert;n&&(o.isDragging()?(e=o.currentRange(),GH.Reports.ControlChartScrubberDialog.refresh({startTime:i(e[0]),endTime:i(e[1])})):(r=i(n[0]),e=this.data().series,t=r,i={},e.rollingAverageLine.length&&e.rollingAverageLine[0][0]<=t&&(n=GH.Util.indexOf(e.rollingAverageLine,function(r){return r[0]<=t},!0),i.rollingAverage=e.rollingAverageLine[n][1],i.standardDeviation=e.standardDeviationArea[n][2]),GH.Reports.ControlChartScrubberDialog.refresh({time:r,rollingAverage:i.rollingAverage,standardDeviation:i.standardDeviation})))}return c3.component().extend(_.once(function(){var r=this.selection();t.parent(this),t.interactiveLayer(this),t(r),o.parent(this),o.interactiveLayer(this),o(r),GH.Reports.ControlChartScrubberDialog.init(t.elements()[0]);var e=this;o.onEndDrag(_.bind(n,e)),this.mouseover(function(){!function(){GH.Reports.ControlChartScrubberDialog.show()}.call(e)}),this.mousemove("ccscrubber",function(){n.call(e)}),this.mouseout(function(){!function(){GH.Reports.ControlChartScrubberDialog.hide()}.call(e)})})).extend(function(){o.cancelDrag()}).extend({hideScrubber:function(){t.hideScrubber()},disableScrubber:function(){GH.Reports.ControlChartScrubberDialog.disable()},enableScrubber:function(){GH.Reports.ControlChartScrubberDialog.enable()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ControlChartBrush.js' */
GH.Reports.ControlChartBrush=function(){return c3.brush().elementClass("ghx-chart-brush").enter(function(){var e=this;AJS.$(document).on("click mouseup",function(t){0===AJS.$(t.target).closest(e.parent().selection().node()).size()&&e.cancelDrag()}),AJS.$(document).on("keydown",function(t){27===t.keyCode&&e.cancelDrag()})}).onDrag(function(){0<AJS.$(d3.event.target).closest(this.parent().selection().node()).size()?GH.Reports.ControlChartDialog.hide():this.cancelDrag()}).onEndDrag(function(t){var e=this;t[1]-t[0]<5||(t=_.map(t,function(t){return e.parent().xScale().invert(t)}),GH.Reports.ControlChartController.getFilterOptions().timeFrame.setSimpleDates(t[0],t[1]),GH.Reports.ControlChartController.update())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChart.soy' */
// This file was automatically generated from ControlChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.controlChart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.controlChart == 'undefined') { GH.tpl.reports.controlChart = {}; }


GH.tpl.reports.controlChart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="control-chart" class="ghx-control-chart-svg"><svg class="ghx-svg-chart"></svg></div></div><div id="ghx-chart-options" class="aui-group"><div id="ghx-chart-options-time" class="aui-item">' + GH.tpl.reports.controlChart.renderChartTimeOptions(null) + '</div><div id="ghx-chart-options-refine" class="aui-item">' + GH.tpl.reports.controlChart.renderChartRefineOptions(opt_data) + '</div><div id="ghx-chart-options-view" class="aui-item">' + GH.tpl.reports.controlChart.renderChartViewingOptions(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartBody.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartBody';
}


GH.tpl.reports.controlChart.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2><p>' + soy.$$escapeHtml('There are either no issues on this board, or all the issues have been filtered out by the chart refinements.') + '</p>' + ((opt_data.canResetRefinements) ? '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-options-reset'], text: 'Reset the report filters'}) + '</p>' : '<p>' + soy.$$escapeHtml('Change the filter values for this report below') + '</p>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderBlankStateMessage';
}


GH.tpl.reports.controlChart.renderChartSnapshots = function(opt_data, opt_ignored) {
  return '<div class="ghx-chart-snapshot"><dl><dt class="js-chart-snapshot-mean">' + soy.$$escapeHtml(opt_data.mean) + '</dt><dd>' + soy.$$escapeHtml('Average') + '</dd></dl><dl><dt class="js-chart-snapshot-median">' + soy.$$escapeHtml(opt_data.median) + '</dt><dd>' + soy.$$escapeHtml('Median') + '</dd></dl><dl><dt class="js-chart-snapshot-min-time">' + soy.$$escapeHtml(opt_data.min) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('Min {0}','Time')) + '</dd></dl><dl><dt class="js-chart-snapshot-max-time">' + soy.$$escapeHtml(opt_data.max) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('Max {0}','Time')) + '</dd></dl><dl><dt class="js-chart-snapshot-issue-count">' + soy.$$escapeHtml(opt_data.issueCount) + '</dt><dd>' + soy.$$escapeHtml('Issues') + '</dd></dl></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSnapshots.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSnapshots';
}


GH.tpl.reports.controlChart.renderChartSelector = function(opt_data, opt_ignored) {
  return '<div class="ghx-time-window js-chart-time-window"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSelector.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSelector';
}


GH.tpl.reports.controlChart.renderChartTimeWindow = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.timeFrame) {
    case 0:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'All Time'));
      break;
    case 7:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past Week'));
      break;
    case 14:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 2 Weeks'));
      break;
    case 30:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past Month'));
      break;
    case 90:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 3 Months'));
      break;
    case 180:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 6 Months'));
      break;
    default:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Custom'));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeWindow.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeWindow';
}


GH.tpl.reports.controlChart.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Issue') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Cluster of issues') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Average') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Rolling average') + '<div class="ghx-description js-chart-legend-rollingaveragewindow"></div></li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Standard deviation') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderLegend.soyTemplateName = 'GH.tpl.reports.controlChart.renderLegend';
}


GH.tpl.reports.controlChart.renderChartTimeOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Time scale') + '</h4><form class="aui"><fieldset><div class="field-group"><label for="js-option-timeframe">' + soy.$$escapeHtml('Timeframe') + '</label><select class="select" id="js-option-timeframe" title="' + soy.$$escapeHtml('Timeframe') + '"><option value="7">' + soy.$$escapeHtml('Past Week') + '</option><option value="14">' + soy.$$escapeHtml('Past 2 Weeks') + '</option><option value="30">' + soy.$$escapeHtml('Past Month') + '</option><option value="90">' + soy.$$escapeHtml('Past 3 Months') + '</option><option value="180">' + soy.$$escapeHtml('Past 6 Months') + '</option><option value="0">' + soy.$$escapeHtml('All Time') + '</option><option value="custom">' + soy.$$escapeHtml('Custom') + '</option></select></div></fieldset><fieldset><div class="field-group"><label>' + soy.$$escapeHtml('Custom dates') + '</label><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-from_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit date') + '">' + soy.$$escapeHtml('Edit') + '</span><input class="text" type="text" id="js-option-timeframe-custom-from"></div><span class="ghx-conjunction">' + soy.$$escapeHtml('to') + '</span><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-to_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit date') + '">' + soy.$$escapeHtml('Edit') + '</span><input class="text" type="text" id="js-option-timeframe-custom-to"></div><div class="ghx-error js-timeframes-error"></div></div></fieldset><fieldset>' + aui.buttons.button({id: ['js-option-timeframe-reset'], extraClasses: ['js-reset-btn', 'js-options-timeframe-reset', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeOptions';
}


GH.tpl.reports.controlChart.renderChartRefineOptions = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<h4>' + soy.$$escapeHtml('Refine report') + '</h4><form id="ghx-controlchart-refine-options" class="aui">' + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-columns', label: 'Columns'}) + ((opt_data.shouldShowSwimlaneRefine) ? GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-swimlanes', label: 'Swimlanes'}) : '') + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-quickfilters', label: 'Quick Filters'}) + '<fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'js-options-refine-reset', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartRefineOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartRefineOptions';
}


GH.tpl.reports.controlChart.renderRefineOption = function(opt_data, opt_ignored) {
  return '<fieldset><div id="' + soy.$$escapeHtml(opt_data.id) + '" class="field-group"><label>' + soy.$$escapeHtml(opt_data.label) + '</label><button id="' + soy.$$escapeHtml(opt_data.id) + '-selector" type="button" class="ghx-refinement-selector aui-button aui-button-subtle ghx-drop-arrow"><div class="ghx-refinement-wrap"></div></button><select id="' + soy.$$escapeHtml(opt_data.id) + '-select" multiple="multiple" class="hidden"></select></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineOption.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineOption';
}


GH.tpl.reports.controlChart.renderRefineInfoMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-description ghx-sparkler-description js-options-refine-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineInfoMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineInfoMessage';
}


GH.tpl.reports.controlChart.renderSelectOptions = function(opt_data, opt_ignored) {
  var output = '';
  var optionList158 = opt_data.options;
  var optionListLen158 = optionList158.length;
  for (var optionIndex158 = 0; optionIndex158 < optionListLen158; optionIndex158++) {
    var optionData158 = optionList158[optionIndex158];
    output += '<option' + ((optionData158.value) ? ' value="' + soy.$$escapeHtml(optionData158.value) + '"' : '') + ((optionData158.selected) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData158.label) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderSelectOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderSelectOptions';
}


GH.tpl.reports.controlChart.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-controlchart-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-nwd" /><label for="js-option-nwd">' + soy.$$escapeHtml('Include non-working days in calculations') + '</label></div></fieldset><fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartViewingOptions';
}


GH.tpl.reports.controlChart.renderDialogIssueContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a> <span>' + soy.$$escapeHtml(opt_data.issue.summary) + '</span>';
  var columnList192 = opt_data.issue.columns;
  var columnListLen192 = columnList192.length;
  for (var columnIndex192 = 0; columnIndex192 < columnListLen192; columnIndex192++) {
    var columnData192 = columnList192[columnIndex192];
    output += GH.tpl.reports.controlChart.renderDialogItem({label: columnData192.name, value: columnData192.formattedDuration});
  }
  output += GH.tpl.reports.controlChart.renderDialogItem({label: 'Cycle time', value: opt_data.issue.formattedDuration}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogIssueContent';
}


GH.tpl.reports.controlChart.renderDialogClusterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><strong>' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.issueCount)) + '</strong> <a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a>';
  var statList209 = opt_data.stats;
  var statListLen209 = statList209.length;
  for (var statIndex209 = 0; statIndex209 < statListLen209; statIndex209++) {
    var statData209 = statList209[statIndex209];
    output += GH.tpl.reports.controlChart.renderDialogItem(statData209);
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogClusterContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogClusterContent';
}


GH.tpl.reports.controlChart.renderDialogItem = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml(opt_data.label) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.value) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogItem';
}


GH.tpl.reports.controlChart.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.rollingAverage != null || opt_data.standardDeviation != null) ? '<table class="aui-table">' + ((opt_data.rollingAverage != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'Rolling average', value: AJS.format('{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}',opt_data.rollingAverage)}) : '') + ((opt_data.standardDeviation != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'Standard deviation', value: AJS.format('{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}',opt_data.standardDeviation)}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><table class="aui-table">' + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'From', value: opt_data.startTime}) + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'To', value: opt_data.endTime}) + '</table></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service",["require"],function(t){"use strict";var r,i,n=t("underscore"),e=t("jira-agile/rapid/global-events"),s=t("jira-agile/rapid/ajax");function o(t,e){return i.getScopeBySprintData(t,e)}function a(){}return e.on("pre-initialization",function(){r=GH.RapidViewConfig,i=GH.Reports.ScopeBurndownBySprintTransformer}),a.prototype={get:function(t,e,a){return this._getData(t,e,a).andThen(function(t){return t.rapidViewId=r.currentData.id,t.estimationStatistic=r.currentData.data.estimationStatistic,t.estimationStatistic.formatter=i.getEstimationStatisticFormatter(t.estimationStatistic.renderer),t.labels={originalEstimate:"Original estimate at start of version",workAdded:"added to version",workRemoved:"removed from version",forecastDescription:function(t){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this version.",t)},helpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Release+Burndown","isLocal":false}.url},o(t,a.zeroBaseline)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:o,_getData:function(t,e,a){e={rapidViewId:t,versionId:e};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&n.isEqual(this._dataRequestParams,e)||(this._dataRequestParams=e,this._dataPromise=s.get({url:"/rapid/charts/releaseburndownchart",data:e},"rapidChartData")),this._dataPromise}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service",["require"],function(a){"use strict";var e,r=a("underscore"),t=a("jira-agile/rapid/global-events"),i=a("jira-agile/rapid/ajax");function n(a,t){return a.showIssueEpic=!0,e.getIssuesBySprintData(a,t)}function s(){}return t.on("pre-initialization",function(){e=GH.Reports.ScopeBurndownBySprintTransformer}),s.prototype={get:function(t,a,e){return this._getData(t,a).andThen(function(a){return a.rapidViewId=t,n(a,e)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:n,_getData:function(a,t){t={rapidViewId:a,versionId:t};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&r.isEqual(this._dataRequestParams,t)||(this._dataRequestParams=t,this._dataPromise=i.get({url:"/rapid/charts/versionreport",data:t},"versionReportData")),this._dataPromise}},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReport.soy' */
// This file was automatically generated from ReleaseBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.releaseBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.releaseBurndownReport == 'undefined') { GH.tpl.reports.releaseBurndownReport = {}; }


GH.tpl.reports.releaseBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-release-burndown-report" class="ghx-scope-burndown-chart-svg ghx-release-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartBody';
}


GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoVersion) ? '<p>' + soy.$$escapeHtml('There are no versions on this board.') + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml('There are no estimated issues in this version.') + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoVersion ? 'Add versions in the Versions panel of the Backlog' : 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.releaseBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work completed') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work forecast') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work remaining') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work added') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderLegend';
}


GH.tpl.reports.releaseBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy35 = soy.$$escapeHtml(AJS.format('{0}% of issues do not have an estimate ({1} of {2})',opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml('Issue types that do not include the estimation statistic are not counted.') + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy35) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml('unestimated issues') + '</dd></dl>' : '') + '<dl class=\'ghx-completed-overview\'><dt>' + soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('completed ({0})',opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderSnapshot';
}


GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml('Align sprints at the base of the chart') + '</label><p class="ghx-description">' + soy.$$escapeHtml('Use this view to see trends in the scope for the version.') + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.releaseBurndownReport.renderVersionMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.name) + '</h3>' + ((opt_data.description) ? '<p>' + soy.$$escapeHtml(opt_data.description) + '</p>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Planned start date') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedStartDate ? opt_data.formattedStartDate : 'None') + '</div></div><div class="aui-group"><div class="aui-item">' + ((opt_data.released) ? soy.$$escapeHtml('Release date') : soy.$$escapeHtml('Planned release date')) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedReleaseDate ? opt_data.formattedReleaseDate : 'None') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderVersionMetadata.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderVersionMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view",["jquery","underscore","jira-agile/d3","jira-agile/rapid/events","jira-agile/rapid/global-events","jira-agile/rapid/ui/chart/chart-view","jira-agile/rapid/ui/component/chart-picker","jira-agile/tooltip","jira-agile/rapid/const/PageMode"],function(r,t,e,n,s,i,o,a,d){var h,l,p,u,c,g,m;function w(){new n(this)}return s.on("pre-initialization",function(){h=GH.Reports.ScopeBurndownBySprintChart,l=GH.Reports.ScopeBurndownBySprintChartLegend,p=GH.Reports.ScopeBurndownBySprintChartHowTo,u=GH.Layout,c=GH.Ajax,g=GH.RapidViewConfig,m=GH.RapidBoard.ViewController}),w.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(e){this._model=e,i.getChartContentElem(!0).html(GH.tpl.reports.releaseBurndownReport.renderChartBody()),i.getChartLegendD3(!0).html(GH.tpl.reports.releaseBurndownReport.renderLegend()).show(),this._renderOptions(),this._versionPicker=new o("releaseBurndown.selectedVersionId","There are currently no versions on this board."),r(this._versionPicker).on("selectedItemChanged",t.bind(this._handleVersionSelected,this)),this._chart=new h,this._legend=new l,this._howTo=new p,this._renderLegend(),this._renderHowTo()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,i.getChartContentElem(!0).empty(),i.getChartLegendD3(!0).empty(),r(GH).unbind(u.EVENT_DELAYED_RESIZE+".releaseBurndownReport")},setVersions:function(e){this._versionPicker.setItems(e),this._versionPicker.setDefaultItem(e[0])},update:function(e){this._versionPicker.setSelectedItem(e.version.id,!0),this._versionPicker.render(i.getChartSelector(!0)),this._chart.data(e),this._renderChart(),this._renderSnapshot(e),this._renderVersionMetadata(e),this._firstRender?(u.bindDelayedWindowResize(),r(GH).bind(u.EVENT_DELAYED_RESIZE+".releaseBurndownReport",t.bind(this._handleWindowResized,this))):i.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(e,t){t=r(GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage({planModeUrl:c.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+g.currentData.data.id+"&view=planning&versions=visible",hasNoVersion:e,hasNoEstimatedStories:t}));t.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),m.setMode(d.PLAN)}),i.showBlankStateMessage(t)},hideBlankState:function(){i.hideBlankStateMessage()},showSpinner:function(){i.showSpinner()},hideSpinner:function(){i.hideSpinner()},_renderSnapshot:function(e){var t=e.snapshot.estimatableIssueCount-e.snapshot.estimatedIssueCount,n=0<e.snapshot.estimatableIssueCount?Math.round(t/e.snapshot.estimatableIssueCount*100):0,e=0===e.snapshot.issueCount?"":GH.tpl.reports.releaseBurndownReport.renderSnapshot({estimatableIssuesCount:e.snapshot.estimatableIssueCount,unestimatedIssuesCount:t,unestimatedIssuesPercentage:n,unestimatedIssuesThresholdExceeded:30<n,workCompleted:e.estimationStatistic.formatter.formatFull(e.snapshot.workCompleted),workTotal:e.estimationStatistic.formatter.formatFull(e.snapshot.workCompleted+e.snapshot.workRemaining),estimationStatistic:e.estimationStatistic.name,shouldShowUnestimatedIssues:"issueCount"!==e.estimationStatistic.typeId});r("#ghx-chart-snapshot").html(e),a.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:!0,className:"ghx-tipsy-left"})},_renderTable:function(e){i.getChartContentElem(!0).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(t.extend({emptySprintMessage:"No issues completed this sprint for current version."},e)))},_renderLegend:function(){this._legend(e.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(e.select(".ghx-group-how"))},_renderChart:function(){this._chart(e.select("#ghx-release-burndown-report"))},_renderVersionMetadata:function(e){i.getChartContentElem(!0).find(".ghx-version-metadata").html(GH.tpl.reports.releaseBurndownReport.renderVersionMetadata(e.version))},_renderOptions:function(){var e=this;r("#ghx-chart-options").html(GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions(this._model)),r("#js-option-zero-baseline").on("change",function(){e.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleVersionSelected:function(e,t){this.trigger("versionSelected",t.item.id)},_handleWindowResized:function(){this._renderChart()}},w});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller",["require"],function(e){var r,t,a,n=e("underscore"),i=e("jira-agile/rapid/global-events"),o=e("jira/analytics/web-client"),s=e("jira-agile/rapid/analytics-tracker"),d=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view"),l=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service"),u=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service"),c=(e("jira/featureflags/feature-manager"),e("jira-agile/features/feature-flags"),new l),h=new u;function p(){}return i.on("pre-initialization",function(){r=GH.PromiseKeeper,t=GH.RapidBoard.State,a=new GH.VersionsDataService}),p.id="releaseBurndown",p.prototype={SETTINGS_KEY:"chart.config.releaseBurndown",displayed:!1,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(e){this._rapidViewData=e||{}},show:function(){this.displayed=!0,this._tracker=new s("gh.report.releaseburndown"),t.pushState();var i=this._view=new d;i.on("versionSelected",n.bind(function(e){this._model.versionId=e,this.update()},this)).on("optionChanged",n.bind(function(e){this._model.zeroBaseline=e.zeroBaseline,this._tracker.trigger("zeroBaseline."+(e.zeroBaseline?"on":"off")),this.update()},this)),i.init(this._model),i.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new r;var e=a.getSimpleVersions(this._rapidViewData.id);this._dataPromiseKeeper.add(e).done(n.bind(function(e){e.length?(e.reverse(),null!=this._model.versionId&&a.versionExists(e,this._model.versionId)||(this._model.versionId=e[0].id),i.setVersions(e),this.update(!0)):(this._model.versionId=null,i.showBlankState(!0,!0),this._tracker.trigger("blank"),i.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),c.clearCache(),h.clearCache()},update:function(e){if(e?t.replaceState():t.pushState(),this.saveState(),null!=this._model.versionId){var i=this;i._view.showSpinner();e=c.get(i._rapidViewData.id,i._model.versionId,{zeroBaseline:i._model.zeroBaseline});return i._dataPromiseKeeper.add(e).done(function(e){0===e.snapshot.estimatedIssueCount?(i._view.showBlankState(!1,!0),i._tracker.trigger("blank")):(i._view.hideBlankState(),o.sendTrackEvent({source:"releaseBurndownReportScreen",action:"viewed",actionSubject:"report",actionSubjectId:"releaseBurndown",attributes:{boardId:i._rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(!0),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile"}})),i._view.update(e);e=h.get(i._rapidViewData.id,i._model.versionId,e);i._dataPromiseKeeper.add(e).done(function(e){i._view.updateTable(e)})}).always(function(e){"abort"!==e&&i._view.hideSpinner()})}},saveState:function(){t.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=t.getBoardSetting(t.getRapidViewId(),this.SETTINGS_KEY,{versionId:null,zeroBaseline:!1})},isApplicable:function(e){return e.sprintSupportEnabled&&!t.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),n.defaults(n.clone(this._model),{zeroBaseline:!1})},updateInternalFromNormalized:function(e){this._model=e},toUrl:function(e){return{version:null!==e.versionId?e.versionId:void 0,zeroBaseline:!!e.zeroBaseline||void 0}},getNormalizedFromUrl:function(e){return{versionId:isNaN(e.version)?null:+e.version,zeroBaseline:"true"===e.zeroBaseline}}},p});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service",["require"],function(e){"use strict";var i,r,n=e("underscore"),t=e("jira-agile/rapid/global-events"),o=e("jira-agile/rapid/ajax");function d(e,t){return r.getScopeBySprintData(e,t)}function a(){}return t.on("pre-initialization",function(){i=GH.RapidViewConfig,r=GH.Reports.ScopeBurndownBySprintTransformer}),a.prototype={get:function(e,t,a){return this._getData(e,t,a).andThen(function(e){return e.rapidViewId=i.currentData.id,e.estimationStatistic=i.currentData.data.estimationStatistic,e.estimationStatistic.formatter=r.getEstimationStatisticFormatter(e.estimationStatistic.renderer),e.labels={originalEstimate:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("Original estimate at start of {0}",GH.RapidBoard.State.getEpicLevelName()):"Original estimate at start of epic",workAdded:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("added to {0}",GH.RapidBoard.State.getEpicLevelName()):"added to epic",workRemoved:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("removed from {0}",GH.RapidBoard.State.getEpicLevelName()):"removed from epic",forecastDescription:function(e){return GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete current {1}.",e,GH.RapidBoard.State.getEpicLevelName()):"Based on your velocity for the last 3 sprints, it will take {0} to complete this epic."},helpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Epic+Burndown","isLocal":false}.url},e.epic={key:e.epicKey,summary:e.epicSummary,creationTime:e.epicCreationTime},d(e,a.zeroBaseline)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:d,_getData:function(e,t,a){t={rapidViewId:e,epicKey:t};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&n.isEqual(this._dataRequestParams,t)||(this._dataRequestParams=t,this._dataPromise=o.get({url:"/rapid/charts/epicburndownchart",data:t},"epicBurndownChartData")),this._dataPromise}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service",["require"],function(a){"use strict";var e,i=a("underscore"),t=a("jira-agile/rapid/global-events"),r=a("jira-agile/rapid/ajax");function n(a,t){return a.showIssueEpic=!1,e.getIssuesBySprintData(a,t)}function s(){}return t.on("pre-initialization",function(){e=GH.Reports.ScopeBurndownBySprintTransformer}),s.prototype={get:function(t,a,e){return this._getData(t,a).andThen(function(a){return a.rapidViewId=t,n(a,e)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:n,_getData:function(a,t){t={rapidViewId:a,epicKey:t};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&i.isEqual(this._dataRequestParams,t)||(this._dataRequestParams=t,this._dataPromise=r.get({url:"/rapid/charts/epicreport",data:t},"epicBurndownData")),this._dataPromise}},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReport.soy' */
// This file was automatically generated from EpicBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.epicBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.epicBurndownReport == 'undefined') { GH.tpl.reports.epicBurndownReport = {}; }


GH.tpl.reports.epicBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-epic-burndown-report" class="ghx-scope-burndown-chart-svg ghx-epic-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="js-epic-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartBody';
}


GH.tpl.reports.epicBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoEpic) ? '<p>' + ((opt_data.shouldUseFlexibleNaming) ? soy.$$escapeHtml(AJS.format('This board doesn\x27\x27t currently contain any {0}',opt_data.epicLevelName)) : soy.$$escapeHtml('There are currently no epics on this board')) + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + ((opt_data.shouldUseFlexibleNaming) ? soy.$$escapeHtml(AJS.format('There are no estimated issues here for {0}.',opt_data.epicLevelName)) : soy.$$escapeHtml('There are no estimated issues in this epic.')) + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoEpic ? (opt_data.shouldUseFlexibleNaming ? AJS.format('To add your {0} go to the Backlog and find the panel named {0}',opt_data.epicLevelName) : 'Add epics in the Epics panel of the Backlog') : 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.epicBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work completed') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work forecast') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work remaining') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work added') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderLegend';
}


GH.tpl.reports.epicBurndownReport.renderDialogSprintContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy43 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'at start of sprint', estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy43}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'added', estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy43}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'removed', estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy43}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('completed') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy43}) : '') + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('remaining') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy43}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogSprintContent.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogSprintContent';
}


GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate';
}


GH.tpl.reports.epicBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy112 = soy.$$escapeHtml(AJS.format('{0}% of issues do not have an estimate ({1} of {2})',opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml('Issue types that do not include the estimation statistic are not counted.') + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy112) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml('unestimated issues') + '</dd></dl>' : '') + '<dl><dt>' + soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('completed ({0})',opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderSnapshot';
}


GH.tpl.reports.epicBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml('Align sprints at the base of the chart') + '</label><p class="ghx-description">' + ((opt_data.shouldUseFlexibleNaming) ? soy.$$escapeHtml(AJS.format('Use this view to see trends in the scope for {0}.',opt_data.epicLevelName)) : soy.$$escapeHtml('Use this view to see trends in the scope for the epic.')) + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.epicBurndownReport.renderEpicMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + ((opt_data.shouldUseFlexibleNaming) ? soy.$$escapeHtml(opt_data.epicLevelName) : soy.$$escapeHtml('Epic')) + '</h3><p><span class="ghx-issue-list-epic-information"><a role="button" class="ghx-epic-key-link" title="' + ((opt_data.shouldUseFlexibleNaming) ? soy.$$escapeHtml(AJS.format('View {0} details',opt_data.epicLevelName)) : soy.$$escapeHtml('View epic details')) + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="ghx-issue-list-epic-summary"> ' + soy.$$escapeHtml(opt_data.summary) + ' </span></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderEpicMetadata.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderEpicMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view",["jquery","underscore","jira-agile/rapid/ui/component/chart-picker","jira-agile/rapid/ui/chart/chart-view","jira-agile/d3","jira-agile/rapid/events","jira-agile/rapid/global-events","jira-agile/tooltip","jira-agile/rapid/const/PageMode"],function(n,i,t,r,e,o,a,s,d){"use strict";var p,l,h,c,u,g,m,w;function _(){new o(this)}return a.on("pre-initialization",function(){p=GH.Layout,l=GH.Ajax,h=GH.LinkedPagesController,c=GH.RapidBoard.ViewController,u=GH.RapidViewConfig,g=GH.Reports.ScopeBurndownBySprintChart,m=GH.Reports.ScopeBurndownBySprintChartLegend,w=GH.Reports.ScopeBurndownBySprintChartHowTo}),_.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(e){this._model=e,r.getChartContentElem(!0).html(GH.tpl.reports.epicBurndownReport.renderChartBody()),r.getChartLegendD3(!0).html(GH.tpl.reports.epicBurndownReport.renderLegend()).show(),this._renderOptions(),this._epicPicker=new t("epicBurndown.selectedEpicId","There are currently no epics on this board"),n(this._epicPicker).on("selectedItemChanged",i.bind(this._handleEpicSelected,this)),this._chart=new g,this._legend=new m,this._howTo=new w,this._renderLegend(),this._renderHowTo()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,r.getChartContentElem(!0).empty(),r.getChartLegendD3(!0).empty(),n(GH).unbind(p.EVENT_DELAYED_RESIZE+".epicBurndownReport")},setEpics:function(e){this._epics=e,this._epicPicker.setItems(e),this._epicPicker.setDefaultItem(e[0])},update:function(e,t){t&&(t=i.findWhere(this._epics,{id:e.epic.key}).linkedPagesCount,this._renderLinkedPagesTrigger(e.epic.key,t)),this._epicPicker.setSelectedItem(e.epic.key,!0),this._epicPicker.render(r.getChartSelector(!0)),this._chart.data(e),this._renderChart(),this._renderSnapshot(e),this._renderEpicMetadata(e.epic),this._firstRender?(p.bindDelayedWindowResize(),n(GH).bind(p.EVENT_DELAYED_RESIZE+".epicBurndownReport",i.bind(this._handleWindowResized,this))):r.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(t,e){e=n(GH.tpl.reports.epicBurndownReport.renderBlankStateMessage({planModeUrl:l.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+u.currentData.data.id+"&view=planning"+(t?"&epics=visible":""),hasNoEpic:t,hasNoEstimatedStories:e,shouldUseFlexibleNaming:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports(),epicLevelName:GH.RapidBoard.State.getEpicLevelName()}));e.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),t&&GH.PlanController.setEpicsColumnVisible(!0),c.setMode(d.PLAN)}),r.showBlankStateMessage(e)},hideBlankState:function(){r.hideBlankStateMessage()},showSpinner:function(){r.showSpinner()},hideSpinner:function(){r.hideSpinner()},_renderSnapshot:function(e){var t=e.snapshot.estimatableIssueCount-e.snapshot.estimatedIssueCount,i=0<e.snapshot.estimatableIssueCount?Math.round(t/e.snapshot.estimatableIssueCount*100):0,e=0===e.snapshot.issueCount?"":GH.tpl.reports.epicBurndownReport.renderSnapshot({estimatableIssuesCount:e.snapshot.estimatableIssueCount,unestimatedIssuesCount:t,unestimatedIssuesPercentage:i,unestimatedIssuesThresholdExceeded:30<i,workCompleted:e.estimationStatistic.formatter.formatFull(e.snapshot.workCompleted),workTotal:e.estimationStatistic.formatter.formatFull(e.snapshot.workCompleted+e.snapshot.workRemaining),estimationStatistic:e.estimationStatistic.name,shouldShowUnestimatedIssues:"issueCount"!==e.estimationStatistic.typeId});n("#ghx-chart-snapshot").html(e),s.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:!0,className:"ghx-tipsy-left"})},_renderEpicMetadata:function(e){n(".js-epic-metadata").html(GH.tpl.reports.epicBurndownReport.renderEpicMetadata(i.extend({epicLevelName:GH.RapidBoard.State.getEpicLevelName(),shouldUseFlexibleNaming:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()},e)))},_renderLinkedPagesTrigger:function(e,t){var i=GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount:t,title:"Create and view pages linked to this epic"}),t=n("#ghx-chart-header-primary .ghx-linked-pages-trigger");t.remove(),t=n(i),n("#ghx-chart-selector").after(t),h.initDialogTrigger(h.EPIC,d.REPORT,e,t)},_renderTable:function(e){r.getChartContentElem(!0).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(i.extend({emptySprintMessage:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports()?AJS.format("No issues completed this sprint for current {0}.",GH.RapidBoard.State.getEpicLevelName()):"No issues completed this sprint for current epic."},e)))},_renderLegend:function(){this._legend(e.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(e.select(".ghx-group-how"))},_renderChart:function(){this._chart(e.select("#ghx-epic-burndown-report"))},_renderOptions:function(){var e=this;n("#ghx-chart-options").html(GH.tpl.reports.epicBurndownReport.renderChartViewingOptions({zeroBaseline:this._model.zeroBaseline,shouldUseFlexibleNaming:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports(),epicLevelName:GH.RapidBoard.State.getEpicLevelName()})),n("#js-option-zero-baseline").on("change",function(){e.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleEpicSelected:function(e,t){this.trigger("epicSelected",t.item)},_handleWindowResized:function(){this._renderChart()}},_});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller",["require"],function(e){"use strict";var t,r,a,i,n,o=e("underscore"),d=e("jira-agile/rapid/analytics-tracker"),s=e("jira/analytics/web-client"),l=e("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service"),p=e("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service"),e=e("jira-agile/rapid/global-events"),c=new l,u=new p;function h(){}return e.on("pre-initialization",function(){t=GH.PromiseKeeper,r=GH.RapidBoard.State,a=GH.Reports.EpicBurndownReportView,i=GH.EpicsDataService,n=new i}),h.id="epicBurndown",h.prototype={SETTINGS_KEY:"chart.config.epicBurndown",displayed:!1,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(e){this._rapidViewData=e||{}},show:function(){this.displayed=!0,this._tracker=new d("gh.report.epicburndown"),r.pushState();var i=this._view=new a;i.on("epicSelected",o.bind(function(e){this._model.epicKey=e.id,this.update()},this)).on("optionChanged",o.bind(function(e){this._model.zeroBaseline=e.zeroBaseline,this._tracker.trigger("zeroBaseline."+(e.zeroBaseline?"on":"off")),this.update()},this)),i.init(this._model),i.showSpinner(),this._tracker.trigger("show");var e={attributes:{boardId:GH.RapidBoard.State.getRapidViewId(),boardType:"scrum",reportType:"agile",projectId:JIRA.API.Projects.getCurrentProjectId(!0),simplified:GH.RapidBoard.State.isAgilityBoard()},action:"viewed",actionSubject:"report",actionSubjectId:"epicBurndownReport",source:"epicBurndownReportScreen"};s.sendTrackEvent(e),this._dataPromiseKeeper=new t;e=n.getSimpleEpics(this._rapidViewData.id);this._dataPromiseKeeper.add(e).done(o.bind(function(e){e.length?(e.reverse(),null!=this._model.epicKey&&n.epicExists(e,this._model.epicKey)||(this._model.epicKey=e[0].id),i.setEpics(e),this.update(!0)):(this._model.epicKey=null,i.showBlankState(!0,!0),this._tracker.trigger("blank"),i.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),c.clearCache(),u.clearCache()},update:function(e){if(e?r.replaceState():r.pushState(),this.saveState(),null!=this._model.epicKey){var i=this;i._view.showSpinner();e=c.get(i._rapidViewData.id,i._model.epicKey,{zeroBaseline:i._model.zeroBaseline});return i._dataPromiseKeeper.add(e).done(function(e){0===e.snapshot.estimatedIssueCount?(i._view.showBlankState(!1,!0),i._tracker.trigger("blank")):i._view.hideBlankState(),i._view.update(e,n.supportsPages());e=u.get(i._rapidViewData.id,i._model.epicKey,e);i._dataPromiseKeeper.add(e).done(function(e){i._view.updateTable(e)})}).always(function(e){"abort"!==e&&i._view.hideSpinner()})}},saveState:function(){r.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=r.getBoardSetting(r.getRapidViewId(),this.SETTINGS_KEY,{epicKey:null,zeroBaseline:!1})},isApplicable:function(e){return e.sprintSupportEnabled&&!r.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),o.defaults(o.clone(this._model),{zeroBaseline:!1})},updateInternalFromNormalized:function(e){this._model=e},toUrl:function(e){return{epic:null!==e.epicKey?e.epicKey:void 0,zeroBaseline:!!e.zeroBaseline||void 0}},getNormalizedFromUrl:function(e){return{epicKey:e.epic||null,zeroBaseline:"true"===e.zeroBaseline}}},h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service",["require"],function(t){"use strict";var e,i,a,n=t("underscore");function s(t){return a.getBurnupModelFromScopeBurndownModel(t)}function r(){}return t("jira-agile/rapid/global-events").on("pre-initialization",function(){e=GH.Ajax,i=GH.RapidViewConfig,a=GH.Reports.SprintBurnupTransformer}),r.prototype={get:function(t,a,r){return this._getData(t,a,r).andThen(function(t){return t.rapidViewId=i.currentData.id,s(t)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:s,_getData:function(t,a,r){r={rapidViewId:t,sprintId:a,statisticFieldId:r};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&n.isEqual(this._dataRequestParams,r)||(this._dataRequestParams=r,this._dataPromise=e.get({url:"/rapid/charts/scopechangeburndownchart",data:r},"sprintburnupchart")),this._dataPromise}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupReport.soy' */
// This file was automatically generated from BurnupReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.burnupReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.burnupReport == 'undefined') { GH.tpl.reports.burnupReport = {}; }


GH.tpl.reports.burnupReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-sprint-burnup-report" class="ghx-burnup-chart ghx-svg-chart"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.burnupReport.renderChartBody';
}


GH.tpl.reports.burnupReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml('There are no estimated issues in this sprint.') + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.burnupReport.renderBlankStateMessage';
}


GH.tpl.reports.burnupReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Work scope') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Scope projection') + '</li></ul></div><div><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Completed Work') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Guideline') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderLegend.soyTemplateName = 'GH.tpl.reports.burnupReport.renderLegend';
}


GH.tpl.reports.burnupReport.renderDialogIssueContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><b>' + GH.tpl.reports.burnupReport.renderIssueKeyLink({key: opt_data.issueKey}) + '</b> ' + soy.$$escapeHtml(opt_data.issueSummary) + '<h5>' + soy.$$escapeHtml(opt_data.eventDescription) + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.fromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.toValue) + '</div></div><h5>' + soy.$$escapeHtml('Effect on sprint') + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalFromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.totalToValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderDialogIssueContent';
}


GH.tpl.reports.burnupReport.renderDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><div class="aui-group"><div class="aui-item">\u2211 ' + soy.$$escapeHtml(opt_data.statistic) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderDialogContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderDialogContent';
}


GH.tpl.reports.burnupReport.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.scope != null || opt_data.completedWork != null) ? '<table class="aui-table">' + ((opt_data.scope != null) ? GH.tpl.reports.burnupReport.renderScrubberDialogItem({label: 'Work scope', value: opt_data.scope}) : '') + ((opt_data.completedWork != null) ? GH.tpl.reports.burnupReport.renderScrubberDialogItem({label: 'Completed Work', value: opt_data.completedWork}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderScrubberDialogContent';
}


GH.tpl.reports.burnupReport.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.burnupReport.renderScrubberDialogItem';
}


GH.tpl.reports.burnupReport.renderChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight"><thead><tr><th id="series-date">' + soy.$$escapeHtml('Date') + '</th><th id="series-event-type">' + soy.$$escapeHtml('Event Type') + '</th><th id="series-issue">' + soy.$$escapeHtml('Issue') + '</th><th id="series-completed-work" class="ghx-minimal">' + soy.$$escapeHtml('Completed Work') + '</th><th id="series-scope" class="ghx-minimal">' + soy.$$escapeHtml('Work scope') + '</th></tr></thead><tbody>';
  var rowList96 = opt_data.rows;
  var rowListLen96 = rowList96.length;
  for (var rowIndex96 = 0; rowIndex96 < rowListLen96; rowIndex96++) {
    var rowData96 = rowList96[rowIndex96];
    output += '<tr><td headers="series-date">' + ((rowData96.dateString) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData96.dateString) + '</div>' : '') + '</td><td headers="series-event-type">' + ((rowData96.eventString) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData96.eventString) + '</div>' : '') + '</td><td headers="series-issue">';
    if (rowData96.issues) {
      var issueList112 = rowData96.issues;
      var issueListLen112 = issueList112.length;
      for (var issueIndex112 = 0; issueIndex112 < issueListLen112; issueIndex112++) {
        var issueData112 = issueList112[issueIndex112];
        output += GH.tpl.reports.burnupReport.renderIssueKeyLink({key: issueData112.key}) + ' ' + soy.$$escapeHtml(issueData112.summary) + ' <br />';
      }
    }
    output += '</td><td headers="series-completed-work"><div class="ghx-nowrap">' + ((rowData96.doneChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData96.doneChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData96.doneChange.to) : soy.$$escapeHtml(rowData96.doneValue)) + '</div></td><td headers="series-scope"><div class="ghx-nowrap">' + ((rowData96.scopeChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData96.scopeChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData96.scopeChange.to) : soy.$$escapeHtml(rowData96.scopeValue)) + '</div></td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderChartTable.soyTemplateName = 'GH.tpl.reports.burnupReport.renderChartTable';
}


GH.tpl.reports.burnupReport.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderIssueKeyLink.soyTemplateName = 'GH.tpl.reports.burnupReport.renderIssueKeyLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupReportView.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view",["require"],function(e){var t,i,r,n,a,s=e("jquery"),o=e("underscore"),h=e("jira-agile/d3"),p=e("jira-agile/rapid/events"),d=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/ui/chart/chart-view"),u=e("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart"),c=e("jira-agile/rapid/const/PageMode"),g=e("jira-agile/rapid/ui/chart/report-sla-tracker"),m=GH.RapidBoard;function _(){new p(this)}return d.on("pre-initialization",function(){n=GH.Reports.BurnupChartLegend,a=GH.Reports.ScopeBurndownBySprintChartHowTo,t=GH.Layout,i=GH.Ajax,r=GH.RapidViewConfig}),_.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(e){this._model=e,l.getChartContentElem(!0).html(GH.tpl.reports.burnupReport.renderChartBody()),l.getChartLegendD3(!0).html(GH.tpl.reports.burnupReport.renderLegend()).show();e=r.currentData.data.id;this._sprintPicker=new GH.ChartPicker("sprintBurnup.selectedSprintId"),s(this._sprintPicker).on("selectedItemChanged",o.bind(this._handleSprintSelected,this)),this._shouldShowEstimatePicker()&&(this._estimatePicker=new GH.EstimatePicker("sprintBurnup.selectedEstimate"),this._estimatePicker.load(e,this._handleEstimateSelected.bind(this))),this._chart=new u,this._legend=n(),this._howTo=a()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,this._model=null,l.getChartContentElem(!0).empty(),l.getChartLegendD3(!0).empty(),s(GH).unbind(t.EVENT_DELAYED_RESIZE+".sprintBurnupReport")},setSprints:function(e){this._sprintPicker.setItems(e),this._sprintPicker.setDefaultItem(e[0])},update:function(e){this._sprintPicker.setSelectedItem(e.sprintId,!0),this._sprintPicker.render(l.getChartSelector(!0)),this._shouldShowEstimatePicker()&&(this._estimatePicker.setSelectedItem(e.statisticField.id,!0),this._estimatePicker.render(l.getChartControls(!0))),this._renderLegend(),this._renderHowTo(),this._renderChart(e),this.data=e,this._firstRender?(t.bindDelayedWindowResize(),s(GH).bind(t.EVENT_DELAYED_RESIZE+".sprintBurnupReport",o.bind(this._handleWindowResized,this))):l.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._blankState||(e=this.getTableRows(e.chartData),e=AJS.$(GH.tpl.reports.burnupReport.renderChartTable({rows:e})),l.getChartContentElem(!0).find(".ghx-report-issue-list").empty().append(e))},showBlankState:function(e){this._blankState=!0;e=s(GH.tpl.reports.burnupReport.renderBlankStateMessage({planModeUrl:i.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+r.currentData.data.id+"&view=planning&versions=visible",hasNoEstimatedStories:e}));e.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),m.ViewController.setMode(c.PLAN)}),this._chart.hide(h.select("#ghx-sprint-burnup-report")),l.getChartLegendD3(!0).hide(),l.getChartContentElem(!0).find(".ghx-report-issue-list").hide(),l.showBlankStateMessage(e),g.checkReportAndFireSlaEvent(g.reportNames.burnup)},hideBlankState:function(){this._blankState=!1,l.hideBlankStateMessage(),l.getChartLegendD3(!0).show(),l.getChartContentElem(!0).find(".ghx-report-issue-list").show()},showSpinner:function(){l.showSpinner()},hideSpinner:function(){l.hideSpinner()},getTableRows:function(r){var n=r.scope[0].value,a=0;function s(e,t){return e.map(function(e){return{key:e,summary:t[e]}})}var e=r.scope.concat(r.work).sort(function(e,t){return e.timestamp>t.timestamp?1:e.timestamp===t.timestamp?0:-1}).map(function(e){var t={timestamp:e.timestamp,dateString:r.formatDate(e.timestamp),issues:s([e.change.key],r.issueToSummary),event:e.change.type,eventString:r.formatEventType(e.change.type)},i="issue done"===e.change.type?parseFloat(e.change.toValue):parseFloat(e.change.toValue)-parseFloat(e.change.fromValue)||0;return"done"===e.change.line&&(a+=i,0===i?t.doneValue=r.formatStatistic(a):t.doneChange={from:r.formatStatistic(a-i),to:r.formatStatistic(a)},t.scopeValue=r.formatStatistic(n)),"scope"===e.change.line&&(n+=i,0===i?t.scopeValue=r.formatStatistic(n):t.scopeChange={from:r.formatStatistic(n-i),to:r.formatStatistic(n)},t.doneValue=r.formatStatistic(a)),t});return(e=e.reduce(function(e,t){var i=e.pop();return i?i.timestamp!==t.timestamp||i.event!==t.event||i.issueKey!==t.issueKey||i.doneChange&&t.doneChange||i.scopeChange&&t.scopeChange?(e.push(i),e.push(t)):(i.doneChange||(i.doneChange=t.doneChange),i.scopeChange||(i.scopeChange=t.scopeChange),e.push(i)):e.push(t),e},[]))[0].issues=s(r.startKeys,r.issueToSummary),r.sprintCompleted?e[e.length-1].issues=s(r.endKeys,r.issueToSummary):e.pop(),e},_shouldShowEstimatePicker:function(){return!m.State.isAgilityBoard()},_renderLegend:function(){this._blankState||this._legend(h.select(".ghx-chart-legend"))},_renderHowTo:function(){this._blankState||this._howTo(h.select(".ghx-group-how"))},_renderChart:function(e){var t;this._blankState||((t=h.select("#ghx-sprint-burnup-report")).empty()||(l.getChartGroup().find(".ghx-sprint-goal").remove(),l.getChartGroup().prepend(GH.tpl.board.x.renderSprintGoal({goal:this._sprintPicker.getSelectedItem().goal})),this._chart.show(e,t),g.checkReportAndFireSlaEvent(g.reportNames.burnup)))},_handleSprintSelected:function(e,t){this.trigger("sprintSelected",t.item.id)},_handleEstimateSelected:function(e){this.trigger("estimateSelected",e)},_handleWindowResized:function(){this._renderChart(this.data)}},_});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupReportController.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller",["require"],function(t){var i,e,r,a=t("underscore"),n=t("jira-agile/rapid/global-events"),s=t("jira/analytics/web-client"),o=t("jira-agile/rapid/analytics-tracker"),d=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view"),l=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service"),p=t("jira-agile/rapid/ui/chart/report-sla-tracker"),u=new l,h=GH.RapidBoard;function c(){}return n.on("pre-initialization",function(){i=GH.PromiseKeeper,e=GH.RapidBoard.State,new GH.VersionsDataService,r=new GH.SprintsDataService}),c.prototype={SETTINGS_KEY:"chart.config.sprintBurnup",displayed:!1,_sprints:null,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(t){this._rapidViewData=t||{}},show:function(){this.displayed=!0,this._tracker=new o("gh.report.burnup"),h.State.pushState();var e=this._view=new d;e.on("sprintSelected",a.bind(function(t){this._model.sprint=t,this._tracker.trigger("sprintChanged"),this.update()},this)).on("estimateSelected",a.bind(function(t){this._model.estimate=t,this._tracker.trigger("estimateChanged"),this.update()},this)).on("optionChanged",a.bind(function(t){this._model.zeroBaseline=t.zeroBaseline,this.update()},this)),e.init(this._model),e.showSpinner(),this._tracker.trigger("show"),s.sendTrackEvent({source:"burnupChartScreen",action:"viewed",actionSubject:"report",actionSubjectId:"burnupChart",attributes:{boardId:GH.SprintRetrospectiveController.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(!0),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile"}}),this._dataPromiseKeeper=new i;var t=r.getSimpleSprints(this._rapidViewData.id);this._dataPromiseKeeper.add(t).done(a.bind(function(t){this._model||(this._model={}),t.length?(t.reverse(),null==this._model.sprint&&(this._model.sprint=t[0].id),this._sprints=t,e.setSprints(t),this.update(!0)):(this._model.sprint=null,e.showBlankState(!0,!0),this._tracker.trigger("blank"),e.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),u.clearCache()},update:function(t){var e=this;if(this.isSprintSelectable(e._model.sprint)||(e._model.sprint=e._sprints[0].id),t?h.State.replaceState():h.State.pushState(),null!=this._model.sprint){this.saveState(),e._view.showSpinner();t=u.get(e._rapidViewData.id,e._model.sprint,e._model.estimate);return e._dataPromiseKeeper.add(t).done(function(t){0===t.chartData.estimatedIssueEvents?(e._view.showBlankState(!0),e._tracker.trigger("blank")):e._view.hideBlankState(),t.chartData.sprintId=e._model.sprint,e._view.setSprints(e._sprints),e._view.update(t.chartData),e._view.updateTable(t)}).fail(function(t,e){"abort"!==t&&p.checkReportAndFireSlaEvent(p.reportNames.burnup,e)}).always(function(t){"abort"!==t&&e._view.hideSpinner()})}},saveState:function(){h.State.setBoardSetting(this.SETTINGS_KEY,this._model)},loadState:function(){this._model=h.State.getBoardSetting(h.State.getRapidViewId(),this.SETTINGS_KEY)},isApplicable:function(t){return t.sprintSupportEnabled||e.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),a.defaults(a.clone(this._model),{})},updateInternalFromNormalized:function(t){this._model||this.loadState(),this._model=a.defaults(a.clone(t),this._model)},toUrl:function(t){return{sprint:null!==t.sprint?t.sprint:void 0,estimate:null!==t.estimate?t.estimate:void 0}},isSprintSelectable:function(e){return 0<this._sprints.filter(function(t){return t.id===e}).length},getNormalizedFromUrl:function(t){return{sprint:isNaN(t.sprint)?null:+t.sprint,estimate:t.estimate}}},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartDialog.js' */
GH.Reports=GH.Reports||{},GH.Reports.BurnupChartDialog=function(){var a,r="sprint-burnup-issue";return GH.InlineDialog.preventCloseOnClick(r),{show:function(e,n,i){var t=d3.select(e);return t.classed("active",!0),(a=GH.SideInlineDialog.create(r,e,function(e,t,a){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(function(e,t){var a=e.formatStatistic;if(t.change.key){var n=t.change.toValue-t.change.fromValue;return GH.tpl.reports.burnupReport.renderDialogIssueContent({issueKey:t.change.key,issueSummary:e.issueToSummary[t.change.key],fromValue:a(t.change.fromValue),toValue:a(t.change.toValue),totalFromValue:a(t.value-n),totalToValue:a(t.value),eventDescription:e.formatEventType(t.change.type)})}return GH.tpl.reports.burnupReport.renderDialogContent({totalValue:t.value,statistic:e.statisticField.name})}(n,i)),a()},{addActiveClass:!1,container:"#ghx-report-scrollarea > .aui-page-panel",fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,hideCallback:function(){t.classed("active",!1)}})).show(),a},hide:function(){a&&a.hide()},isVisible:function(){return!!a&&a.is(":visible")}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartScrubberDialog.js' */
GH.Reports.BurnupChartScrubberDialog=function(){var i,e=!0,r="scrubber-dialog",n={container:"#ghx-chart-group",fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,width:230,closeOthers:!1,persistent:!0,addActiveClass:!1};function o(){!GH.Reports.BurnupChartDialog.isVisible()&&e&&i.show()}function t(){return!!i&&i.is(":visible")}return{init:function(e){i=GH.SideInlineDialog.create(r,e,function(e,i,n){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog"),e.addClass("ghx-scrubber-contents"),e.next("#arrow-"+r).addClass("ghx-arrow-scrubber-dialog"),n()},n),GH.InlineDialog.registerInlineDialogHacks(r,{validateClickToCloseFn:function(){return!1}})},show:o,hide:function(){i&&i.hide()},isVisible:t,refresh:function(e){t()||o(),function(e){var i;e.time&&(i=GH.tpl.reports.burnupReport.renderScrubberDialogContent({indicatedTime:e.time,scope:e.scope,completedWork:e.completedWork}));AJS.$("#inline-dialog-"+r).find(".ghx-scrubber-contents").html(i)}(e),i.refresh()},disable:function(){e=!1},enable:function(){e=!0}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartScrubber.js' */
GH.Reports.BurnupChartScrubber=function(){var t=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.BurnupChartDialog.isVisible()}),n=c3.brush().elementClass("ghx-chart-brush").onDrag(function(){GH.Reports.BurnupChartDialog.hide()});function i(r,e){for(var t=r.length-1;0<=t;t--)if(r[t].timestamp<=e)return r[t].value;return r[0].value}return c3.component().extend(_.once(function(){var r=this.selection();t.parent(this),t.interactiveLayer(this),t(r),n.parent(this),n.interactiveLayer(this),n(r),GH.Reports.BurnupChartScrubberDialog.init(t.elements()[0]);var e=this;this.mouseover(function(){!function(){GH.Reports.BurnupChartScrubberDialog.show()}.call(e)}),this.mousemove("ccscrubber",function(){!function(){var r=this.mouseCoordinates(),e=this.xScale().invert,t=this.data();r&&(r=e(r[0]),GH.Reports.BurnupChartScrubberDialog.refresh({time:t.formatDate(r),scope:t.formatStatistic(i(this.data().scope,r)),completedWork:t.formatStatistic(i(this.data().work,r))}))}.call(e)}),this.mouseout(function(){!function(){GH.Reports.BurnupChartScrubberDialog.hide()}.call(e)})})).extend(function(){n.cancelDrag()}).extend({hideScrubber:function(){t.hideScrubber()},disableScrubber:function(){GH.Reports.BurnupChartScrubberDialog.disable()},enableScrubber:function(){GH.Reports.BurnupChartScrubberDialog.enable()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/LegacyReportsNamespaces.js' */
AJS.namespace("GH.BurndownChartController",null,require("jira-agile/rapid/ui/chart/burndown-chart-controller")),AJS.namespace("GH.BurndownChartModel",null,require("jira-agile/rapid/ui/chart/burndown-chart-model")),AJS.namespace("GH.BurndownChartView",null,require("jira-agile/rapid/ui/chart/burndown-chart-view")),AJS.namespace("GH.BurndownRate",null,require("jira-agile/rapid/ui/chart/burndown-rate")),AJS.namespace("GH.BurndownReportChartController",null,require("jira-agile/rapid/ui/chart/burndown-report-chart-controller")),AJS.namespace("GH.BurndownTableProducer",null,require("jira-agile/rapid/ui/chart/burndown-table-producer")),AJS.namespace("GH.BurndownTimelineProducer",null,require("jira-agile/rapid/ui/chart/burndown-timeline-producer")),AJS.namespace("GH.CFD.Data",null,require("jira-agile/rapid/ui/chart/cfd-data")),AJS.namespace("GH.CFDController",null,require("jira-agile/rapid/ui/chart/cfd-controller")),AJS.namespace("GH.CFDView",null,require("jira-agile/rapid/ui/chart/cfd-view")),AJS.namespace("GH.ChangeEvent",null,require("jira-agile/rapid/ui/chart/change-event")),AJS.namespace("GH.ChangesReportModel",null,require("jira-agile/rapid/ui/chart/changes-report-model")),AJS.namespace("GH.Chart",null,require("jira-agile/rapid/ui/chart/chart")),AJS.namespace("GH.ChartColors",null,require("jira-agile/rapid/ui/chart/chart-colors")),AJS.namespace("GH.ChartController",null,require("jira-agile/rapid/ui/chart/chart-controller")),AJS.namespace("GH.ChartView",null,require("jira-agile/rapid/ui/chart/chart-view")),AJS.namespace("GH.NonWorkingDaysUtils",null,require("jira-agile/rapid/ui/chart/non-working-days-util")),AJS.namespace("GH.ReleaseDatePredictor",null,require("jira-agile/rapid/ui/chart/release-date-predictor")),AJS.namespace("GH.ReportController",null,require("jira-agile/rapid/ui/chart/report-controller")),AJS.namespace("GH.Reports.ControlChartController",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")),AJS.namespace("GH.Reports.ControlChartDataService",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service")),AJS.namespace("GH.Reports.ControlChartView",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view")),AJS.namespace("GH.Reports.EpicBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service")),AJS.namespace("GH.Reports.EpicBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service")),AJS.namespace("GH.Reports.EpicBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller")),AJS.namespace("GH.Reports.EpicBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view")),AJS.namespace("GH.Reports.ReleaseBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service")),AJS.namespace("GH.Reports.ReleaseBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service")),AJS.namespace("GH.Reports.ReleaseBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller")),AJS.namespace("GH.Reports.ReleaseBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view")),AJS.namespace("GH.Reports.BurnupReportView",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view")),AJS.namespace("GH.Reports.BurnupReportController",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller")),AJS.namespace("GH.Reports.BurnupChartDataService",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service")),AJS.namespace("GH.VersionReport",null,require("jira-agile/rapid/ui/chart/version-report")),AJS.namespace("GH.VersionReportController",null,require("jira-agile/rapid/ui/chart/version-report-controller")),AJS.namespace("GH.VersionReportModel",null,require("jira-agile/rapid/ui/chart/version-report-model")),AJS.namespace("GH.VersionReportView",null,require("jira-agile/rapid/ui/chart/version-report-view")),AJS.namespace("GH.EstimatePicker",null,require("jira-agile/rapid/ui/component/estimate-picker")),AJS.namespace("GH.ChartPicker",null,require("jira-agile/rapid/ui/component/chart-picker"));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:brace', location = '/inline-issue-create/lib/backbone.brace/backbone.brace-amd.js' */
define("jira/inline-issue-create/lib/backbone",["atlassian/libs/factories/backbone-1.0.0","atlassian/libs/underscore-1.5.2","jquery"],function(e,i,a){return e(i,a)}),define("jira/inline-issue-create/lib/brace",["jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/brace-2014.09.03"],function(e,i,a){"use strict";return a(i,Backbone)});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:marionette', location = '/inline-issue-create/lib/backbone.marionette/backbone.marionette-amd.js' */
define("jira/inline-issue-create/lib/marionette",["jquery","jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/marionette-2.1.0"],function(e,t,i,n){"use strict";var r=n(i,t),a={unwrapTemplate:function(){var t=this.$el.children();t.length>1&&AJS.warn("[IIC] Unwrapping template with more than one child - some content will be lost");var i=e(t.get(0));this.$el.parent().length?(this.$el.replaceWith(i),this.setElement(i)):this.setElement(i)}};return i.extend(r.ItemView.prototype,a),i.extend(r.CompositeView.prototype,a),i.extend(r.CollectionView.prototype,a),i.extend(r.LayoutView.prototype,a),r});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:placeholder', location = '/inline-issue-create/lib/jquery-placeholder.js' */
/*! MIT License - https://github.com/mathiasbynens/jquery-placeholder/blob/master/LICENSE-MIT.txt */
/*! http://mths.be/placeholder v2.0.8 by @mathias */
!function(e,a,t){function l(e){var a={},l=/^jQuery\d+$/;return t.each(e.attributes,function(e,t){t.specified&&!l.test(t.name)&&(a[t.name]=t.value)}),a}function r(e,a){var l=this,r=t(l);if(l.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),e===!0)return r[0].value=a;r.focus()}else l.value="",r.removeClass("placeholder"),l==d()&&l.select()}function o(){var e,a=this,o=t(a),d=this.id;if(""==a.value){if("password"==a.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(a){e=t("<input>").attr(t.extend(l(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":d}).bind("focus.placeholder",r),o.data({"placeholder-textinput":e,"placeholder-id":d}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",d).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function d(){try{return a.activeElement}catch(e){}}var c,n,i="[object OperaMini]"==Object.prototype.toString.call(e.operamini),p="placeholder"in a.createElement("input")&&!i,u="placeholder"in a.createElement("textarea")&&!i,h=t.fn,s=t.valHooks,v=t.propHooks;p&&u?(n=h.placeholder=function(){return this},n.input=n.textarea=!0):(n=h.placeholder=function(){var e=this;return e.filter((p?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},n.input=p,n.textarea=u,c={get:function(e){var a=t(e),l=a.data("placeholder-password");return l?l[0].value:a.data("placeholder-enabled")&&a.hasClass("placeholder")?"":e.value},set:function(e,a){var l=t(e),c=l.data("placeholder-password");return c?c[0].value=a:l.data("placeholder-enabled")?(""==a?(e.value=a,e!=d()&&o.call(e)):l.hasClass("placeholder")?r.call(e,!0,a)||(e.value=a):e.value=a,l):e.value=a}},p||(s.input=c,v.value=c),u||(s.textarea=c,v.value=c),t(function(){t(a).delegate("form","submit.placeholder",function(){var e=t(".placeholder",this).each(r);setTimeout(function(){e.each(o)},10)})}),t(e).bind("beforeunload.placeholder",function(){t(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery);;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:util', location = '/inline-issue-create/util/util.js' */
define("jira/inline-issue-create/util",["jquery"],function(o){"use strict";var n,t=(document.body||document.documentElement).style,i=["oAnimationEnd","MSAnimationEnd","mozAnimationEnd","webkitAnimationEnd","animationend"];return{cssAnimationsSupport:void 0!==t.transition||void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.MsTransition||void 0!==t.OTransition,addClassAndRemoveOnAnimationEnd:function(n,t,e){function s(){for(r=0;r<i.length;r++)n.off(i[r],s);n.removeClass(t)}var r;if(n=o(n),this.cssAnimationsSupport)for(r=0;r<i.length;r++)n.on(i[r],s);else setTimeout(function(){n.removeClass(t)},e||1e3);n.addClass(t)},scrollElementToView:function(o,n){var t=o[0].getBoundingClientRect(),i=n[0].getBoundingClientRect(),e=o.scrollTop(),s=0;i.top<t.top?s=i.top-t.top:t.bottom<i.bottom&&(s=i.bottom-t.bottom),0!==s&&o.scrollTop(e+s)},keyCode:{ENTER:13,ESC:27},after:function(o,n,t){if(!_.isFunction(t))throw"Body is not a function";o[n]=_.wrap(o[n],function(n){var i=Array.prototype.slice.call(arguments,1),e=n.apply(o,i);return t.apply(this,_.union([e],i)),e})},error:function(o){if(console&&console.error){var n=Array.prototype.slice.call(arguments,1);_.isString(n[0])&&(n[0]="[IIC]"+n[0]),console.error.apply(console,n)}},debug:function(o){if(this.shouldDisplay(o)&&console&&console.debug){var n=Array.prototype.slice.call(arguments,1);_.isString(n[0])&&(n[0]="[IIC]"+n[0]),console.debug.apply(console,n)}},trace:function(o){if(this.shouldDisplay(o)&&console&&console.debug){var n=Array.prototype.slice.call(arguments,1);_.isString(n[0])&&(n[0]="[IIC]"+n[0]),console.debug.apply(console,n)}},shouldDisplay:function(o){return"all"===n||o===n},showLogsFor:function(o){n=o},transformCustomFieldId:function(o){const n=/^customfield_\d+$/;return n.test(o)===!1?o:o.replace("customfield_","cf[")+"]"}}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/custom-form-container-factory.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(e,i){"use strict";var r=function(){var r=JIRA.Forms.Container;return r.extend({lazyInit:function(){var r=this.options.call(this);return this.prefilledValues=r.prefilledValues,this.prefilledValues.fieldsToRetain=i.keys(r.prefilledValues),this.prefilledValues=e.param(r.prefilledValues),this.options=function(){return r},this._super()},render:function(){var r=this,n=e.Deferred();return this.lazyInit(),i.isFunction(r.model.markFieldAsDirty)&&Object.keys(this.options().prefilledValues).forEach(function(e){r.model.markFieldAsDirty(e)}),r.model.getUseConfigurableForm().done(function(e){e===!0?r.configurableForm.render(r.prefilledValues).done(function(e,i){n.resolveWith(r,[r.$element]),r.$element.append(i)}):r.unconfigurableForm.render(r.prefilledValues).done(function(e,i){n.resolveWith(r,[r.$element,i]),r.$element.append(i)})}).fail(function(){n.resolveWith(r,[r.$element])}),n.promise()}})};return{build:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog-init-form.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/init-form",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(e,r){"use strict";return function(s,o){if(!e.isObject(o))throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.");var i,a=JIRA.Forms.CreateIssueModel,l=JIRA.Forms.ConfigurableCreateIssueForm,t=JIRA.Forms.UnconfigurableCreateIssueForm,n=JIRA.Forms.CreateIssueError,u=JIRA.applyErrorsToForm,d=JIRA.applyErrorMessageToForm;o.done(function(e){i=e,i.prefilledFields=i.prefilledFields||{},i.errors=i.errors||{},i.errorMessages=i.errorMessages||{}}).fail(function(){i={prefilledFields:{},errors:{},errorMessages:{}}});var c=r.build(),f=new c(function(){var e={title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:void 0},r=new a({projectId:void 0,issueType:void 0}),s=new l({model:r,title:e.title,globalEventNamespaces:e.globalEventNamespaces}),o=new t({model:r,title:e.title,globalEventNamespaces:e.globalEventNamespaces});return{globalEventNamespaces:e.globalEventNamespaces,model:r,errorHandler:new n,configurableForm:s,unconfigurableForm:o,prefilledValues:i.prefilledFields}}),g=f.asDialog({windowTitle:"Create issue",id:"prefillable-create-issue-dialog"});g.options.delayShowUntil=function(){return o},f.asDialog=function(){return f.dialog},g.onContentReady(function(){e.keys(i.errors).length&&(i.errorMessages.unshift("Please fix the fields marked below."),u(f.$element,i.errors)),i.errorMessages.length&&d(f.$element,i.errorMessages.join("<br/>"))}),s.resolve(f)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog",["wrm/require","jquery","underscore","jira/inline-issue-create/lib/marionette","jira/loading/loading","jira/flag","jira/inline-issue-create/prefillable-create-issue-dialog/init-form"],function(e,r,i,s,n,o,l){"use strict";var a=AJS.dim,t=AJS.undim,u=function(){a(),n.showLoadingIndicator()},d=function(){t(),n.hideLoadingIndicator()},c=function(i,s){var n=new r.Deferred;return s&&u(),e(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],l.bind(void 0,n,i)).fail(function(){s&&d(),o.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")}),n.promise()};return{createPrefillableCreateIssueForm:c}}),define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(e,r){"use strict";var i=JIRA.Forms.Container,s=function(){return i.extend({lazyInit:function(){var i=this.options.call(this);return this.prefilledValues=i.prefilledValues,this.prefilledValues.fieldsToRetain=r.keys(i.prefilledValues),this.prefilledValues=e.param(i.prefilledValues),this.options=function(){return i},this._super()},render:function(){var i=this,s=e.Deferred();return this.lazyInit(),r.isFunction(i.model.markFieldAsDirty)&&Object.keys(this.options().prefilledValues).forEach(function(e){i.model.markFieldAsDirty(e)}),i.model.getUseConfigurableForm().done(function(e){e===!0?i.configurableForm.render(i.prefilledValues).done(function(e,r){s.resolveWith(i,[i.$element]),i.$element.append(r)}):i.unconfigurableForm.render(i.prefilledValues).done(function(e,r){s.resolveWith(i,[i.$element,r]),i.$element.append(r)})}).fail(function(){s.resolveWith(i,[i.$element])}),s.promise()}})};return{build:s}}),define("jira/inline-issue-create/prefillable-create-issue-dialog/ondone",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(e,r){"use strict";var i=JIRA.Forms.CreateIssueModel,s=JIRA.Forms.ConfigurableCreateIssueForm,n=JIRA.Forms.UnconfigurableCreateIssueForm,o=JIRA.Forms.CreateIssueError,l=JIRA.applyErrorsToForm,a=JIRA.applyErrorMessageToForm;return function(t,u){if(!e.isObject(u))throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.");var d;u.done(function(e){d=e,d.prefilledFields=d.prefilledFields||{},d.errors=d.errors||{},d.errorMessages=d.errorMessages||{}}).fail(function(){d={prefilledFields:{},errors:{},errorMessages:{}}});var c=r.build(),f=new c(function(){var e={title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:void 0},r=new i({projectId:void 0,issueType:void 0}),l=new s({model:r,title:e.title,globalEventNamespaces:e.globalEventNamespaces}),a=new n({model:r,title:e.title,globalEventNamespaces:e.globalEventNamespaces});return{globalEventNamespaces:e.globalEventNamespaces,model:r,errorHandler:new o,configurableForm:l,unconfigurableForm:a,prefilledValues:d.prefilledFields}}),m=f.asDialog({windowTitle:"Create issue",id:"prefillable-create-issue-dialog"});m.options.delayShowUntil=function(){return u},f.asDialog=function(){return f.dialog},m.onContentReady(function(){e.keys(d.errors).length&&(d.errorMessages.unshift("Please fix the fields marked below."),l(f.$element,d.errors)),d.errorMessages.length&&a(f.$element,d.errorMessages.join("<br/>"))}),t.resolve(f)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = 'inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.InlineIssueCreate&&(JIRA.Templates.InlineIssueCreate={}),JIRA.Templates.InlineIssueCreate.trigger=function(A,i){return A=A||{},'<div class="iic'+(A.cssClass?" "+soy.$$escapeHtml(A.cssClass):"")+(A.isAgility?" agility-backlog-iic":"")+'"><div class="iic-trigger"><button type="button" data-testid="backlog-page.ui.inline-issue-create-button">'+soy.$$escapeHtml("Create issue")+"</button></div></div>"},JIRA.Templates.InlineIssueCreate.widget=function(A,i){return A=A||{},'<div class="iic-widget'+(A.cssClass?" "+soy.$$escapeHtml(A.cssClass):"")+'"><form action="#" method="POST" class="iic-widget__form aui"><div class="iic-widget__issue-type-selector-container"></div><div class='+(A.isAgility?'"iic-widget__summary-container"':"")+'><textarea name="summary" rows="1" cols="50" maxlength="255" class="iic-widget__summary" placeholder="'+soy.$$escapeHtml("What needs to be done?")+'">'+(A.summary?soy.$$escapeHtml(A.summary):"")+"</textarea>"+(A.isAgility?'<div class="iic-widget__create-container"><button type="button" class="aui-button aui-button-primary iic-widget__create" type="button">'+soy.$$escapeHtml("Create")+'</button></div><div class="iic-widget__description-container iic-widget__more iic-widget__cancel" style="display:none;"></div>':'<div class="iic-widget__footer"><div class="iic-widget__description-container"></div><button type="button" data-testid="backlog-page.ui.meatball-menu-button" class="aui-button aui-button-subtle iic-widget__more" title="'+soy.$$escapeHtml("Open create dialog")+'"><span class="aui-icon aui-icon-small aui-iconfont-more">'+soy.$$escapeHtml("More")+'</span></button><button type="button" class="aui-button aui-button-link iic-widget__cancel">'+soy.$$escapeHtml("Cancel")+'</button><div class="iic-widget__create" style="display:none;"></div></div>')+"</div></form></div>"},JIRA.Templates.InlineIssueCreate.issueTypeSelector=function(A,i){return'<div class="iic-widget__issue-type-selector">'+(A.isAgility?'<div class="iic-widget__issue-type-container">'+(A.isLocked?'<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs="/>':'<img src="'+soy.$$escapeHtml(A.issueTypeIconUrl)+'"/>')+'</div><div class="iic-widget__issue-type-selector__trigger iic-widget__issue-type-selector__dropdown aui-list-truncate" style="display:none;"></div>':'<button type="button" class="iic-widget__issue-type-selector__trigger aui-dropdown2-trigger" aria-owns="iic-issue-type-dropdown-'+soy.$$escapeHtml(A.widgetId)+'" aria-haspopup="true">'+(A.isLocked?'<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs=" width="16" height="16"/>':'<img src="'+soy.$$escapeHtml(A.issueTypeIconUrl)+'" width="16" height="16"/>')+'</button><div id="iic-issue-type-dropdown-'+soy.$$escapeHtml(A.widgetId)+'" data-aui-alignment="top left" class="aui-dropdown2 aui-style-default iic-widget__issue-type-selector__dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"></ul></div></div>')+"</div>"},JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem=function(A,i){return'<li><a href="#" class="aui-icon-container" data-id="'+soy.$$escapeHtml(A.id)+'" style="background-image: url(\''+soy.$$escapeHtml(A.iconUrl)+"');\">"+soy.$$escapeHtml(A.name)+"</a></li>"},JIRA.Templates.InlineIssueCreate.description=function(A,i){return'<div class="iic-widget__description'+(A.issueTypeName?"":" iic-widget__description_invisible")+'">'+soy.$$escapeHtml("New")+' <span class="iic-widget__description__selected-issue-type-name">'+(A.issueTypeName?soy.$$escapeHtml(A.issueTypeName):"")+"</span></div>"};;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/possibleValues.js' */
define("jira/inline-issue-create/entities/possible-values",["backbone","jira/inline-issue-create/lib/brace"],function(t,i){"use strict";return i.Collection.extend({url:function(){var t=_.map(this.jqls,function(t){return"query="+encodeURIComponent(t)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/possibleValues/"+this.getEntityName()+"?".concat.apply("?",t)},getEntityName:void 0,initialize:function(t,i){this._initializeState(t,i)},_initializeState:function(t,i){i&&i.jqls?this.jqls=i.jqls:this.jqls=void 0,this.fetching=!1,this.initialized=!1},parse:function(t){return t.values},setJQLs:function(t){_.isEqual(this.jqls,t)||(this.jqls=t,this.fetch({reset:!0}))},reset:function(){return this.fetching=!1,this.initialized=!0,t.Collection.prototype.reset.apply(this,arguments)},fetch:function(i){function e(){n.fetching=!1,n.initialized=!0,n.trigger("fetch:finished")}var n=this;return i=i||{},i.success?i.success=_.wrap(i.success,function(t){return e(),t.apply(n,Array.prototype.slice.call(arguments,1))}):i.success=e,this.trigger("fetch:started"),this.fetching=!0,t.Collection.prototype.fetch.call(this,i)},isInitialized:function(){return this.initialized},isFetching:function(){return this.fetching}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueType.js' */
define("jira/inline-issue-create/entities/issue-type",["jira/inline-issue-create/lib/brace"],function(e){"use strict";var i=e.Model.extend({namedAttributes:{id:"string",name:"string",description:"string",iconUrl:"string",subtask:"boolean"}});return i});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueTypes.js' */
define("jira/inline-issue-create/entities/issue-types",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/issue-type"],function(e,i){"use strict";return e.extend({model:i,getEntityName:function(){return"issuetype"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/project.js' */
define("jira/inline-issue-create/entities/project",["jira/inline-issue-create/lib/brace"],function(e){"use strict";return e.Model.extend({namedAttributes:{id:"number",type:"string"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/projects.js' */
define("jira/inline-issue-create/entities/projects",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/project"],function(e,t){"use strict";return e.extend({model:t,comparator:function(e){return e.getId()},getEntityName:function(){return"project"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineIssue.js' */
define("jira/inline-issue-create/entities/inline-issue",["jquery","underscore","jira/inline-issue-create/lib/brace","internal/browser-metrics","jira/featureflags/feature-manager"],function(i,e,n,t,a){"use strict";return n.Model.extend({initialize:function(){this._isSaving=!1},save:function(){t.start({key:"jira.agile.create.inline.issue.submit",isInitial:!1});var e=this,n=i.ajax(AJS.contextPath()+"/rest/inline-create/1.0/issue",{data:JSON.stringify(this.toJSON()),contentType:"application/json",type:"POST"});return this._isSaving=!0,n.always(function(){e._isSaving=!1})},isSaving:function(){return this._isSaving}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineBootstrap.js' */
define("jira/inline-issue-create/entities/inline-bootstrap",["backbone","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/issue-types"],function(e,i,t,s){"use strict";return i.Model.extend({issueTypesCollectionType:s,projectsCollectionType:t,namedAttributes:{hasCreateIssuePermission:"boolean",hasScheduleIssuePermission:"boolean"},initialize:function(){this.issueTypes=new this.issueTypesCollectionType,this.projects=new this.projectsCollectionType},url:function(){var e=_.map(this.jqls,function(e){return"query="+encodeURIComponent(e)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/bootstrap"+"?".concat.apply("?",e)},_initializeState:function(e,i){i&&i.jqls?this.jqls=i.jqls:this.jqls=void 0,this.fetching=!1,this.initialized=!1},setJQLs:function(e){_.isEqual(this.jqls,e)||(this.jqls=e,this.fetch({reset:!0}))},parse:function(e){var i=this,t=_.map(e.issueTypes.values,function(e){return _.pick(e,_.keys(i.issueTypes.model.prototype.namedAttributes))});this.issueTypes.reset(t);var s=_.map(e.projects.values,function(e){return _.pick(e,_.keys(i.projects.model.prototype.namedAttributes))});return this.projects.reset(s),_.pick(e,"hasCreateIssuePermission","hasScheduleIssuePermission")},fetch:function(i){function t(){s.fetching=!1,s.initialized=!0,JIRA.trace("inline.create.bootstrap.fetched")}var s=this;return i=i||{},i.success?i.success=_.wrap(i.success,function(e){return t(),e.apply(s,Array.prototype.slice.call(arguments,1))}):i.success=t,this.fetching=!0,JIRA.trace("inline.create.bootstrap.fetching"),e.Model.prototype.fetch.call(this,i)},isInitialized:function(){return this.initialized},isFetching:function(){return this.fetching},fireWhenInitialized:function(e){this.isInitialized()&&!this.isFetching()?e():this.listenToOnce(this,"sync",e)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/description.js' */
define("jira/inline-issue-create/views/description",["jquery","jira/inline-issue-create/lib/marionette"],function(e,i){"use strict";var t=i.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name"},modelEvents:{"change:selectedIssueType":function(){var e=this.model.getSelectedIssueType()&&this.model.getSelectedIssueType().getName()||"";e?(this.$el.removeClass("iic-widget__description_invisible"),this.ui.selectedIssueTypeName.text(e)):this.$el.addClass("iic-widget__description_invisible")}},serializeData:function(){var e={};return this.model.getSelectedIssueType()&&(e=this.model.getSelectedIssueType().toJSON()),{issueTypeName:e.name}},onRender:function(){this.unwrapTemplate()}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdown.js' */
define("jira/inline-issue-create/views/issue-type-dropdown",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/views/issue-type-dropdown-item"],function(e,i,t){"use strict";var s=i.CompositeView.extend({childView:t,childViewOptions:function(e,i){return{model:e,dropdownModel:this.model}},template:JIRA.Templates.InlineIssueCreate.issueTypeSelector,childViewContainer:".aui-list-truncate",ui:{trigger:".iic-widget__issue-type-selector__trigger",issueTypeIcon:".iic-widget__issue-type-selector__trigger img",issueTypeDropdown:".iic-widget__issue-type-selector__dropdown"},modelEvents:{"change:selectedIssueType":function(){this.model.getSelectedIssueType()&&this.ui.issueTypeIcon.attr("src",this.model.getSelectedIssueType().getIconUrl())},"change:lockState":function(e,i){this.render(),i===this.model.constants.STATE_LOCK_SENDING?this.ui.trigger.attr("aria-disabled",!0):this.ui.trigger.attr("aria-disabled",!1)}},initialize:function(){this.isDropdownShown=!1,_.bindAll(this,"onDropdownShow")},serializeData:function(){var e={};return this.model.getSelectedIssueType()&&(e=this.model.getSelectedIssueType().toJSON()),{widgetId:this.options.widgetId,isLocked:this.model.getLockState()!==this.model.constants.STATE_LOCK_UNLOCKED,issueTypeIconUrl:e.iconUrl,isAgility:this.options.isAgility}},onRender:function(){this.unwrapTemplate(),this.ui.issueTypeDropdown.on("aui-dropdown2-show",this.onDropdownShow)},onDropdownShow:function(){var i=this.ui.issueTypeDropdown;i.appendTo(this.$el);var t=this.ui.issueTypeIcon.offset(),s=this.ui.issueTypeIcon.position(),o=this.ui.issueTypeIcon.outerHeight(),n=i.height(),r=e("body").outerHeight(!0)<t.top+o+n;i.css({left:s.left,top:(r?s.top-n:s.top+o)+"px"});var d=i.find("li a");this.trigger("dropdownOpened",{numIssueTypes:d.length})},onChildviewSelected:function(e){this.trigger("issueTypeSelected",e.model)}});return s});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdownItem.js' */
define("jira/inline-issue-create/views/issue-type-dropdown-item",["jquery","jira/inline-issue-create/lib/marionette"],function(e,i){"use strict";var t=i.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem,initialize:function(e){this.dropdownModel=e.dropdownModel},events:{"click a":function(e){this.trigger("selected")}},onRender:function(){this.unwrapTemplate()}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/defaultTrigger.js' */
define("jira/inline-issue-create/views/default-trigger",["jquery","jira/inline-issue-create/lib/marionette","jira/featureflags/feature-manager"],function(e,i,t){"use strict";var r=i.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.trigger,ui:{trigger:" .iic-trigger"},events:{"click @ui.trigger":function(e){e.preventDefault(),this.trigger("selected")},"hover @ui.trigger":function(i){t.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&(i.preventDefault(),window.IssueCreate&&window.IssueCreate.Visibility&&e(this.ui.trigger).tooltip(window.IssueCreate.Visibility.isEnabled?"enable":"disable"))}},initialize:function(e){this.widget=e.widget,this.listenTo(this.widget,"activated",this.hide),this.listenTo(this.widget,"deactivated",this.show)},onRender:function(){this.unwrapTemplate(),this.widget.model.getState()===this.widget.model.constants.STATE_ACTIVE&&this.hide(),t.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&this.widget.model.getLockState()===this.widget.model.constants.STATE_LOCK_PERM_INACTIVE&&this.addTooltip()},addTooltip:function(){var i=this.configureBoardUrl();e(this.ui.trigger).tooltip({title:function(){return JIRA.Templates.InlineIssueCreate.Agile.configurationIssue({url:i})},html:!0,gravity:"e"})},hide:function(){this.ui.trigger.addClass("iic-trigger_hidden")},show:function(){this.ui.trigger.removeClass("iic-trigger_hidden")}});return r});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/widget.js' */
define("jira/inline-issue-create/entities/widget-constants",[],function(){"use strict";var e={STATE_CLOSED:"STATE_CLOSED",STATE_ACTIVE:"STATE_ACTIVE",STATE_LOCK_TEMP_INACTIVE:"STATE_LOCK_TEMP_INACTIVE",STATE_LOCK_SENDING:"STATE_LOCK_SENDING",STATE_LOCK_PERM_INACTIVE:"STATE_LOCK_PERM_INACTIVE",STATE_LOCK_UNLOCKED:"STATE_LOCK_UNLOCKED"};return Object.freeze(e),e}),define("jira/inline-issue-create/entities/widget",["jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/issue-type","jira/inline-issue-create/entities/widget-constants"],function(e,t,s,i){"use strict";var T="iic.slectedIssueType",a=i,n=e.Model.extend({constants:a,defaults:{state:a.STATE_CLOSED,lockState:a.STATE_LOCK_UNLOCKED},namedAttributes:{summary:"",selectedIssueType:s,issueTypes:t,state:"",lastState:"",lockState:""},initialize:function(e){var t,s;e&&e.selectedIssueType||(localStorage&&(t=JSON.parse(localStorage.getItem(T))||{},t=t||{},s=this.getIssueTypes()&&this.getIssueTypes().find(function(e){return e.getId()===t.id})),s?this.setSelectedIssueType(s):this.getIssueTypes()&&this.setSelectedIssueType(this.getIssueTypes().at(0))),this.on("change:selectedIssueType",function(e){var t=this.getSelectedIssueType();if(t)try{localStorage.setItem(T,JSON.stringify(t.toJSON()))}catch(e){return}}),this.listenTo(this.getIssueTypes(),"reset",function(){var e,s=this.getSelectedIssueType()&&this.getSelectedIssueType().getId();s||(s=t.id),void 0!==s?(e=this.getIssueTypes().get(s),e?this.setSelectedIssueType(e):this.setSelectedIssueType(this.getIssueTypes().at(0))):this.setSelectedIssueType(this.getIssueTypes().at(0))})},changeState:function(e){e!==this.getState()&&(this.setLastState(this.getState()),this.setState(e))},setSelectedIssueTypeIfAvailable:function(e){if(e){var t=this.getIssueTypes().get(e.getId());t&&this.setSelectedIssueType(t)}},toIssueData:function(){return{summary:this.getSummary(),issueTypeId:this.getSelectedIssueType()&&this.getSelectedIssueType().getId()}}});return n});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/widget.js' */
define("jira/inline-issue-create/views/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util"],function(i,t,e,s){"use strict";var a=500,n=e.LayoutView.extend({template:JIRA.Templates.InlineIssueCreate.widget,regions:{issueTypeSelector:".iic-widget__issue-type-selector-container",description:".iic-widget__description-container"},ui:{summary:".iic-widget__summary",more:".iic-widget__more",cancel:".iic-widget__cancel",create:".iic-widget__create",form:".iic-widget__form",withTitle:"[title]"},events:{"input @ui.summary":"onSummaryChange","change @ui.summary":"onSummaryChange","keyup @ui.summary":function(i){var t=this.ui.summary.val();t.length>255&&this.ui.summary.val(t.substr(0,255)),this.onSummaryChange(i)},"keydown @ui.summary":function(i){i.keyCode===s.keyCode.ENTER?(i.preventDefault(),this.onSubmit(i)):i.keyCode===s.keyCode.ESC&&this.trigger("deactivate",{reason:"keypress"})},"click @ui.cancel":function(i){i.preventDefault(),this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING&&this.trigger("deactivate",{reason:"cancel"})},"click @ui.more":function(i){i.preventDefault(),this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING&&this.trigger("openFullIssueDialog")},"click @ui.create":function(i){this.onSubmit(i)}},modelEvents:{"change:summary":function(){this.ui.summary.val(this.model.getSummary()),this.adjustSummarySize()},"change:state":function(i,t){t===this.model.constants.STATE_ACTIVE?this.activate():t===this.model.constants.STATE_CLOSED&&this.deactivate()},"change:lockState":function(i,t){this.ui.summary.prop&&(t===this.model.constants.STATE_LOCK_SENDING?this.ui.summary.prop("disabled",!0):this.ui.summary.prop("disabled",!1))}},initialize:function(i){this.cssClass=i.cssClass||"",this.listenTo(this.issueTypeSelector,"show",function(){this.listenTo(this.issueTypeSelector.currentView,"issueTypeSelected",function(){this.focusSummary()})}),t.bindAll(this,"adjustSummarySize","onBodyClick")},onSubmit:function(i){var t=this.ui.summary.val();""!==t&&t.length<=255?this.model.getLockState()===this.model.constants.STATE_LOCK_UNLOCKED?(this.ui.summary.blur(),this.disableCreate(),this.trigger("createIssue")):s.addClassAndRemoveOnAnimationEnd(this.$(".issue-type-selector"),"iic-error",a):s.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",a)},onClose:function(){i(document).off("click.iic",this.onBodyClick)},onBodyClick:function(i){this.$el.is(i.target)||0!==this.$el.has(i.target).length||(""===this.ui.summary.val()?this.trigger("deactivate",{reason:"cancel"}):this.ui.summary.is(":focus")&&this.ui.summary.blur())},serializeData:function(){return{summary:this.model.getSummary(),cssClass:this.cssClass,isAgility:this.options.isAgility}},onRender:function(){this.trigger("deactivate"),this.unwrapTemplate(),this.ui.withTitle.tooltip({aria:!0});var i=this;this.ui.summary.on("change cut paste drop keydown input",function(){t.defer(i.adjustSummarySize)}),t.defer(i.adjustSummarySize),this.ui.summary.placeholder(),this.model.getState()===this.model.constants.STATE_ACTIVE?this.activate():this.deactivate()},adjustSummarySize:function(){this.ui.summary.css("height","auto");var i=this.ui.summary.outerHeight(),t=Math.max(i+this.ui.summary.prop("scrollHeight")-this.ui.summary.prop("clientHeight"),i);t&&this.ui.summary.height(t+"px")},reset:function(){this.ui.summary.attr("style","")},hide:function(){this.$el.addClass("iic-widget_hidden"),i(document).off("click.iic",this.onBodyClick)},show:function(){this.$el.removeClass("iic-widget_hidden"),this.adjustSummarySize();var e=this;t.defer(function(){i(document).off("click.iic",e.onBodyClick),i(document).on("click.iic",e.onBodyClick)})},focusSummary:function(){this.ui.summary.focus()},activate:function(){this.show(),this.trigger("activated")},focus:function(){this.focusSummary(),this.trigger("focused")},deactivate:function(){this.hide(),this.trigger("deactivated")},onSummaryChange:function(i){this.trigger("summaryChanged",this.ui.summary.val())},enableCreate:function(){this.ui.create.attr("aria-disabled",!1)},disableCreate:function(){this.ui.create.attr("aria-disabled",!0)}});return n});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.js' */
define("jira/inline-issue-create/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util","jira/inline-issue-create/entities/widget","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/inline-issue","jira/inline-issue-create/views/widget","jira/inline-issue-create/views/issue-type-dropdown","jira/inline-issue-create/views/description","jira/inline-issue-create/prefillable-create-issue-dialog","jira/inline-issue-create/analytics","jira/analytics/web-client","jira/featureflags/feature-manager","jira/util/events"],function(e,t,i,s,r,a,n,o,d,l,c,u,p,h,I,g){"use strict";function f(e){t.isFunction(e.parameter)?e.context[e.fieldName]=new e.parameter(e.defaultOptions):t.isObject(e.parameter)?e.context[e.fieldName]=e.parameter:void 0===e.parameter&&(e.context[e.fieldName]=new e.defaultConstructor(e.defaultOptions))}const m="inlineIssueCreatedOnBacklog";var T=i.Controller.extend({initialize:function(e){this._initializeComponents(e),e.jqls&&this.setCurrentJQLs(e.jqls),e.container&&this.attach(e.container),this._initializeEvents(e)},_initializeComponents:function(e){t.isFunction(e.issueTypes)?this.issueTypes=new e.issueTypes((void 0),{jqls:e.jqls}):t.isObject(e.issueTypes)?this.issueTypes=e.issueTypes:this.issueTypes=new a((void 0),{jqls:e.jqls}),t.isFunction(e.projects)?this.projects=new e.projects((void 0),{jqls:e.jqls}):t.isObject(e.projects)?this.projects=e.projects:this.projects=new n((void 0),{jqls:e.jqls}),f({context:this,fieldName:"model",defaultOptions:{issueTypes:this.issueTypes},parameter:e.model,defaultConstructor:r}),f({context:this,fieldName:"dropdownView",defaultOptions:{model:this.model,collection:this.issueTypes,widgetId:this.model.cid},parameter:e.dropdownView,defaultConstructor:l}),f({context:this,fieldName:"descriptionView",defaultOptions:{model:this.model,widgetId:this.model.cid},parameter:e.descriptionView,defaultConstructor:c}),this.view=new d({model:this.model,cssClass:e.cssClass,isAgility:e.isAgility&&e.isAgility()||!1}),this.analytics=new p({widget:this}),this._currentInlineIssue=void 0},_initializeEvents:function(e){this.listenTo(this.view,"summaryChanged",function(e){this.model.setSummary(e)}),this.listenTo(this.view,"createIssue",this.createIssue),this.listenTo(this.view,"deactivate",this.deactivate),this.listenTo(this.view,"openFullIssueDialog",function(){this.trigger("openCreateIssueDialog",{reason:"manual"}),this.openCreateIssueDialog()}),this.listenTo(this.model,"change:state",this.onStateChange),this.listenTo(this.model,"change:lockState",this.onLockStateChange),this.listenTo(this.issueTypes,"reset",this.checkWidgetLocked),this.listenTo(this.projects,"reset",this.checkWidgetLocked),this.on("issueCreated",function(){this.model.setSummary("")}),this.checkWidgetLocked()},render:function(){this.view.issueTypeSelector.attachView(void 0),this.view.description.attachView(void 0),this.view.render(),this.view.issueTypeSelector.show(this.dropdownView),this.view.description.show(this.descriptionView),this.listenTo(this.dropdownView,"issueTypeSelected",function(e){this.model.setSelectedIssueType(e)})},onStateChange:function(e,t){t===this.model.constants.STATE_ACTIVE?this.trigger("activated"):t===this.model.constants.STATE_CLOSED&&this.trigger("deactivated")},onLockStateChange:function(e,t){t===this.model.constants.STATE_LOCK_PERM_INACTIVE&&this.model.getState()===this.model.constants.STATE_ACTIVE&&this.deactivate()},activate:function(){return this.model.getLockState()!==this.model.constants.STATE_LOCK_PERM_INACTIVE&&(this.model.changeState(this.model.constants.STATE_ACTIVE),!0)},deactivate:function(){this.model.changeState(this.model.constants.STATE_CLOSED)},checkWidgetLocked:function(){return this.issueTypes.isFetching()||!this.issueTypes.isInitialized()?this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE):this.projects.isFetching()||!this.projects.isInitialized()?this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE):this._currentInlineIssue&&this._currentInlineIssue.isSaving()?this.model.setLockState(this.model.constants.STATE_LOCK_SENDING):this.issueTypes.length?1!==this.projects.length?this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE):void this.model.setLockState(this.model.constants.STATE_LOCK_UNLOCKED):this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)},focus:function(){this.view.focus()},reset:function(){this.model.setSummary(""),this.view.reset()},attach:function(t){var i=e(t);i.append(this.view.el)},setCurrentJQLs:function(e){this.jqls=e},setSummary:function(e){this.model.setSummary(e)},getSummary:function(){return this.model.getSummary()},setSelectedIssueTypeIfAvailable:function(e){this.model.setSelectedIssueTypeIfAvailable(e)},getSelectedIssueType:function(){return this.model.getSelectedIssueType()},setOverrides:function(e){this.overrides=e},createIssue:function(){var e=this,i={summary:this.model.getSummary(),contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType().getId(),overrides:t.clone(this.overrides)};this.trigger("beforeIssueCreated",e,i),this._currentInlineIssue=new o(i),this._currentInlineIssue.save().done(function(t){try{GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.ISSUE_CREATE_INLINE)}catch(e){AJS.trigger("analyticsEvent",{name:"jira.agile.board.InlineIssueCreate.issueCreated.MarkUserInteractionError",data:{errorMsg:e.toString()}})}g.trigger(m,t.issue),e.trigger("issueCreated",t.issue,t.prefilledFields,e,{source:"inline"}),JIRA.trace("inline.create.issue.created"),e.fireIssueCreatedTrackEvent(e,t),e.fireIssueCreatedOperationalEvent("taskSuccess")}).fail(function(t){var i=new jQuery.Deferred;e.openCreateIssueDialog(i);var r=[];try{var a=JSON.parse(t.responseText);void 0!==a.errors&&(r=Object.values(a.errors)),i.resolve({errors:a.errors,errorMessages:a.generalErrors,prefilledFields:a.prefilledFields})}catch(r){s.error(e,"Could not parse response: "+r,t);var n="Unfortunately, there is an internal communication error, so you must use the full dialog to create the issue. Please contact your administrator if this error keeps appearing.";i.resolve({errors:{},errorMessages:[n],prefilledFields:{}})}e.trigger("openCreateIssueDialog",{reason:"createFailed",requiredFields:r.filter(function(e){return e.includes("is required.")}).length}),e.view.enableCreate(),t&&(void 0===t.status||null===t.status||429===t.status||t.status>=500)?e.fireIssueCreatedOperationalEvent("taskFail",t.status,t.statusText):e.fireIssueCreatedOperationalEvent("taskSuccess")}).always(function(){window.performance&&window.performance.mark("inline_issue_create_api_done"),e.checkWidgetLocked()}),this.checkWidgetLocked()},fireIssueCreatedTrackEvent:function(e,t){if(h&&"undefined"!=typeof GH&&GH.RapidBoard&&GH.RapidBoard.State){var i=t.issue.issueType,s=t.issue.issueId,r={objectType:"issue",objectId:s,containerType:GH.RapidViewConfig.currentData.data.locationType,attributes:{issueTypeId:i,boardId:GH.RapidBoard.State.getRapidViewId(),boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectType:"software"},action:"created",actionSubject:"issue",actionSubjectId:s,source:"backlogScreen"};const a=(I.getFlagValue("odin.ec.client.integration.cbb")||"").split(",");Array.isArray(a)&&a.includes("inline-issue-create")&&(r.attributes.feature="IIC"),"project"===r.containerType&&JIRA.API&&JIRA.API.Projects&&(r.containerId=JIRA.API.Projects.getCurrentProjectId()),g.trigger("legacyIssueCreated",r),h.sendTrackEvent(r)}},fireIssueCreatedOperationalEvent:function(e,t,i){if(h&&"undefined"!=typeof GH&&GH.RapidBoard&&GH.RapidBoard.State&&GH.Util){var s={task:"createInlineIssue",analyticsSource:"backlog",application:"jira-software",edition:GH.Util.getEdition("jira-software"),boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0,responseStatus:t,responseStatusText:i},r={source:"ui",actionSubject:"ui",action:e,attributes:s};h.sendOperationalEvent(r)}},updatePrefilledFieldsDataIfExists:function(e){return e.prefilledFields={},e.overrides.Sprint&&(e.prefilledFields.sprint={fieldId:GH.SprintConfig.getSprintFieldId(),fieldValue:e.overrides.Sprint}),e.overrides["Epic Link"]&&(e.prefilledFields.epic={fieldId:GH.EpicConfig.getEpicLinkFieldId(),fieldValue:e.overrides["Epic Link"]}),e.overrides.fixVersion&&(e.prefilledFields.fixVersions={fieldId:"fixVersions",fieldValue:e.overrides.fixVersion}),e.contexts&&(e.prefilledFields.additionalContext={jqls:e.contexts}),this.model.getLockState()!==this.model.constants.STATE_LOCK_PERM_INACTIVE&&e.issueTypeId&&(e.prefilledFields.issuetype=e.issueTypeId),e.summary&&(e.prefilledFields.summary=e.summary),e},openCreateIssueDialog:function(i){var s=this,r=this.model.toIssueData();1===this.projects.size()&&(r.project=this.projects.at(0).toJSON());var a={summary:r.summary,contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType()?this.model.getSelectedIssueType().getId():void 0,overrides:t.clone(this.overrides)};if(this.trigger("beforeIssueCreated",s,a),I.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&I.isFeatureEnabled("new-global-issue-create-backlog-trigger-points")&&window.IssueCreate&&window.IssueCreate.Visibility){var n=window.IssueCreate.Visibility.isEnabled;if(n){var o=new CustomEvent("openIssueCreateDialog",{detail:{triggerPointKey:"create-issue-backlog-trigger",payload:e.extend({},s.updatePrefilledFieldsDataIfExists(a)),title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],isModalLoadInContext:!0,onIssueCreate:function(e){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.ISSUE_CREATE_DIALOG),s.trigger("issueCreated",e,e.fields,s,{source:"dialog"})}}});return void document.dispatchEvent(o)}}i||(i=this._resolveInlineContext(a,s));var d=u.createPrefillableCreateIssueForm(i.promise(),!0);return d.pipe(function(e){function t(e,t){try{GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.ISSUE_CREATE_DIALOG);var i={objectType:"issue",objectId:t.issueId&&t.issueId.toString(),containerType:GH.RapidViewConfig.currentData.data.locationType,attributes:{boardId:GH.RapidBoard.State.getRapidViewId(),boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectType:"software"},action:"created",actionSubject:"issue",actionSubjectId:t.issueId,source:"backlogScreen"};"project"===i.containerType&&JIRA.API&&JIRA.API.Projects&&(i.containerId=JIRA.API.Projects.getCurrentProjectId()),g.trigger("legacyIssueCreated",i)}catch(e){AJS.trigger("analyticsEvent",{name:"jira.agile.board.InlineIssueCreate.issueCreatedDialog.MarkUserInteractionError",data:{errorMsg:e.toString()}})}g.trigger(m,t),s.trigger("issueCreated",t,t.fields,s,{source:"dialog"}),JIRA.trace("inline.create.issue.created")}var i=e.asDialog();return e.bind("initialized",function(){this.unconfigurableForm.bind("issueCreated",t),this.configurableForm.bind("issueCreated",t)}),i.show(),i})},_resolveInlineContext:function(t,i){var s=new jQuery.Deferred,r=e.ajax(AJS.contextPath()+"/rest/inline-create/1.0/context/resolve",{data:JSON.stringify(t),contentType:"application/json",type:"POST"});return r.done(function(e){s.resolve({prefilledFields:e.createIssueInput})}).fail(function(){s.resolve({prefilledFields:{summary:t.summary?t.summary:"",issuetype:i.model.getSelectedIssueType()?i.model.getSelectedIssueType().getId():void 0}})}),s}});return T});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-analytics.js' */
define("jira/inline-issue-create/analytics",["jira/inline-issue-create/lib/marionette"],function(e){"use strict";return e.Controller.extend({initialize:function(e){this.loadTimestamp=(new Date).getTime();var t=e.widget;this.widgetId=t.model.cid.substring(1),this.projects=t.projects,this.listenTo(t,"issueCreated",this.onIssueCreated),this.listenTo(t,"openCreateIssueDialog",this.onOpenCreateIssueDialog),this.listenTo(t,"activated",this.onActivated),this.listenTo(t,"deactivated",this.onDeactivated),this.listenTo(t,"dropdownOpened",this.onDropdownOpened),this.listenTo(t,"issueTypeSelected",this.onIssueTypeSelected)},triggerAnalytics:function(e,t){var i="",s="";if(this.projects&&this.projects.size()>0){var n=this.projects.first();i=n.get("id"),s=n.get("type")}var a=_.defaults({},t,{instance:this.widgetId,timestarted:this.loadTimestamp,projectId:i,projectType:s});AJS.trigger("analyticsEvent",{name:"jira.inlinecreate."+e,data:a})},onOpenCreateIssueDialog:function(e){this.triggerAnalytics("openDialog",{reason:e.reason,requiredFields:e.requiredFields})},onIssueCreated:function(e,t,i,s){"inline"===s.source?this.triggerAnalytics("issueCreatedInline"):this.triggerAnalytics("issueCreatedDialog")},onDeactivated:function(){this.triggerAnalytics("deactivated")},onActivated:function(){this.triggerAnalytics("activated")},onDropdownOpened:function(e){this.triggerAnalytics("dropdown.opened",{numIssueTypes:e.numIssueTypes})},onIssueTypeSelected:function(){this.triggerAnalytics("dropdown.issueTypeSelected")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget-group.js' */
define("jira/inline-issue-create/widget-group",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/widget","jira/inline-issue-create/entities/inline-bootstrap"],function e(t,i,s,r){"use strict";var e=i.Controller.extend({initialize:function(e){this.TriggerView=e.TriggerView,this.Widget=s,this.widgets={},this.currentJQLs=void 0,this.createdCallback=e.createdCallback,this.activeWidget=void 0,this.inlineBootstrap=e.inlineBootstrap||new r,this.widgetOptions=_.defaults(e.widgetOptions||{},{issueTypes:this.inlineBootstrap.issueTypes,projects:this.inlineBootstrap.projects,isAgility:function(){return!1}})},getWidget:function(e){return this.widgets[e]||(this.widgets[e]=this._createNewWidget(e)),this.widgets[e]},setCurrentJqls:function(e){this.currentJQLs=e,_.each(this.widgets,function(t){t.widget.setCurrentJQLs(e)}),this.inlineBootstrap.setJQLs(e)},activateWidget:function(e){if(this.activeWidget===e)return void e.focus();var t=this.activeWidget;this.activeWidget=void 0,_.each(this.widgets,function(t){t!==e&&t.widget.deactivate()});var i=e.activate();return i&&(e.focus(),this.activeWidget=e,this.trigger("widget:activated",e,t),t&&(e.setSummary(t.getSummary()),e.setSelectedIssueTypeIfAvailable(t.getSelectedIssueType()),t.reset())),i},_createNewWidget:function(e){var t=this,i=new this.Widget(this.widgetOptions);i.on("deactivated",function(){t.activeWidget===i&&(t.activeWidget=void 0,i.reset())}),this.createdCallback&&this.createdCallback(i,e),this.currentJQLs&&i.setCurrentJQLs(this.currentJQLs);var s=new t.TriggerView({widget:i});return s.on("selected",function(){t.activateWidget(i)}),{widget:i,trigger:s,render:function(e){s.render(),e.append(s.$el),i.attach(s.$el),i.render(),t.trigger("widget:rendered",i,s,e)}}}});return e});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-helppath-constants.js-gh-hp' */
/*globals GH*/
define('jira/inline-issue-create/agile/helppath-constants', [], function () {

    "use strict";

    // watch out for the gh-jsHelpPaths transformer - the invocations must go inline
    return {
        configureBoard: GH && {"url":"https://support.atlassian.com/jira-software-cloud/docs/create-an-issue-and-a-sub-task/","isLocal":false} || {},
    };
});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = 'inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.InlineIssueCreate&&(JIRA.Templates.InlineIssueCreate={}),"undefined"==typeof JIRA.Templates.InlineIssueCreate.Agile&&(JIRA.Templates.InlineIssueCreate.Agile={}),JIRA.Templates.InlineIssueCreate.Agile.description=function(e,i){var t='<div class="iic-widget__description'+(e.issueTypeName?"":" iic-widget__description_invisible")+'">'+soy.$$escapeHtml("New")+' <span class="iic-widget__description__selected-issue-type-name">'+(e.issueTypeName?soy.$$escapeHtml(e.issueTypeName):"")+"</span> "+soy.$$escapeHtml("in")+" ";if(e.sections.length>=1){t+='<button type="button" aria-owns="iic-widget__description__section-select-'+soy.$$escapeHtml(e.widgetId)+'" aria-haspopup="true" class="iic-widget__description__section-select-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-style-default">'+soy.$$escapeHtml(e.currentSection)+'</button><div id="iic-widget__description__section-select-'+soy.$$escapeHtml(e.widgetId)+'" data-aui-alignment="top left" class="iic-widget__description__section-select aui-dropdown2 aui-style-default"><ul class="aui-list-truncate">';for(var s=e.sections,n=s.length,a=0;a<n;a++){var o=s[a];t+='<li><a href="#" data-section-id="'+soy.$$escapeHtml(o.id)+'">'+soy.$$escapeHtml(o.translatedName)+"</a></li>"}t+="</ul></div><!-- .aui-dropdown2 -->"}else t+=soy.$$escapeHtml(e.currentSection);return t+="</div>"},JIRA.Templates.InlineIssueCreate.Agile.configurationIssue=function(e,i){return""+soy.$$escapeHtml("Due to the configuration for this particular board, you\'ll have to use the full dialog to create a new issue.")+(e.url?' <a href="'+soy.$$escapeHtml(e.url)+'" target="_blank" rel="noopener">'+soy.$$escapeHtml("Learn more")+"</a>":"")};;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-issue-types.js' */
define("jira/inline-issue-create/agile/entities/issue-types",["jira/inline-issue-create/entities/issue-types"],function(e){"use strict";function t(){return!!GH.RapidBoard.State.epicsAsCardsEnabled&&GH.RapidBoard.State.epicsAsCardsEnabled()}var i=e.extend({parse:function(t){var i=e.prototype.parse.apply(this,arguments);return this.filterOutGHEpics(i)},reset:function(t){var i=this.filterOutGHEpics(t);return e.prototype.reset.apply(this,[i])},filterOutGHEpics:function(e){var i=GH.EpicConfig.getEpicIssueTypeId();return e&&i&&!t()?_.filter(e,function(e){return e.id!==i}):e}});return i});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-description.js' */
define("jira/inline-issue-create/agile/views/description",["jira/inline-issue-create/views/description","jquery","underscore"],function(e,i,t){"use strict";var o=e.extend({template:JIRA.Templates.InlineIssueCreate.Agile.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name",sectionDropdownTrigger:".iic-widget__description__section-select-trigger",sectionDropdownItem:".iic-widget__description__section-select a",sectionDropdown:".iic-widget__description__section-select"},modelEvents:t.extend({"change:lockState":function(e,i){i===this.model.constants.STATE_LOCK_SENDING?this.disable():this.enable()}},e.prototype.modelEvents),initialize:function(){t.bindAll(this,"onDropdownShow","onItemClick")},onRender:function(){this.unwrapTemplate(),this.ui.sectionDropdown.on("aui-dropdown2-show",this.onDropdownShow),this.ui.sectionDropdownItem.on("click",this.onItemClick)},onDropdownShow:function(e){var t=this.ui.sectionDropdown;t.appendTo(this.$el);var o=this.ui.sectionDropdownTrigger.offset(),n=this.ui.sectionDropdownTrigger.position(),s=this.ui.sectionDropdownTrigger.outerHeight(),r=t.height(),c=i("body").outerHeight(!0)<o.top+s+r;t.css({left:n.left,top:(c?n.top-r:n.top+s)+"px"}),c&&(t.addClass("aui-dropdown2-alignment-top"),this.ui.sectionDropdownTrigger.addClass("iic-widget__issue-type-selector__trigger_opened-up"))},onItemClick:function(e){this.trigger("selected",i(e.target))},disable:function(){this.ui.sectionDropdownTrigger.attr&&this.ui.sectionDropdownTrigger.attr("aria-disabled",!0)},enable:function(){this.ui.sectionDropdownTrigger.attr&&this.ui.sectionDropdownTrigger.attr("aria-disabled",!1)},serializeData:function(){var e={},i=this.allSections.get(this.currentSectionId);this.model.getSelectedIssueType()&&(e=this.model.getSelectedIssueType().toJSON());var t=this.currentSectionId||-1,o=this.allSections.toJSON().filter(function(e){return e.id!==t});return{issueTypeName:e.name,widgetId:this.model.cid,currentSection:i?i.getTranslatedName():"",sections:o}}});return o});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-widget.js' */
define("jira/inline-issue-create/agile/widget",["jira/inline-issue-create/widget","jira/inline-issue-create/agile/helppath-constants","jira/featureflags/feature-manager"],function(e,i,t){"use strict";var a=e.extend({activate:function(){if(this.model.getLockState()===this.model.constants.STATE_LOCK_PERM_INACTIVE){var a=this.openCreateIssueDialog(),n=!1,r=i.configureBoard.url;return t.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&window.IssueCreate&&window.IssueCreate.Visibility&&(n=window.IssueCreate.Visibility.isEnabled),n||a.done(function(e){e.onContentReady(function(){JIRA.applyMessageToForm("info",e.$form,JIRA.Templates.InlineIssueCreate.Agile.configurationIssue({url:r}),!0)})}),!1}return e.prototype.activate.call(this)}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-group.js' */
define("jira/inline-issue-create/agile/widget-group",["jira/inline-issue-create/agile/widget","jira/inline-issue-create/agile/issue-type-dropdown","jira/inline-issue-create/widget-group","jquery","jira/inline-issue-create/util","internal/browser-metrics","jira/featureflags/feature-manager"],function(e,i,t,r,s,n,a){"use strict";return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.Widget=e,this.boardJQL=void 0,this.filterJQLs=void 0,_.bindAll(this,"issueCreatedHandler","addOverridesOnBeforeIssueCreated"),this.on("widget:rendered",this.widgetRenderedHandler),this.widgetOptions.dropdownView=i,this.widgetOptions.isAgility=function(){return GH.RapidBoard.State.isAgilityBoard()}},widgetRenderedHandler:function(e,i,t){var r=t.parent(".ghx-meta");r.addClass("plan-inline-create-inside")},issueCreatedHandler:function(e,i,t){var a=this;t.analytics.triggerAnalytics("plan.created");var o=GH.BacklogView._scrollToView;GH.BacklogView._scrollToView=r.noop;var d=r("#ghx-backlog"),l=d.scrollTop();GH.BacklogController.reloadAndSelectCreatedIssues([e]).done(function(){GH.BacklogView._scrollToView=o,GH.BacklogModel.isIssueVisible(e.issueKey)||t.analytics.triggerAnalytics("plan.createdNotVisible"),d.scrollTop(l),s.scrollElementToView(d,t.view.$el),t.model.getLockState()!==t.model.constants.STATE_LOCK_PERM_INACTIVE&&a.activateWidget(t),n.end({key:"jira.agile.create.inline.issue.submit"}),JIRA.trace("inline.create.backlog.refreshed")})},addOverridesOnBeforeIssueCreated:function(e,i){i.overrides=i.overrides||{};var t=GH.EpicController.getFilteredEpicKey();if(t&&"none"!==t){const r=a.isFeatureEnabled("cmp-inline-card-create-epic-link-not-populating-fix");if(r){var n=GH.EpicConfig.getEpicLinkFieldId(),o=s.transformCustomFieldId(n);i.overrides[o]=t}else{var d=GH.EpicConfig.getEpicLinkFieldName();i.overrides[d]=t}}var l=GH.VersionController.getFilteredVersionId();l&&"none"!==l&&(i.overrides.fixVersion=l)},_createNewWidget:function(e){var i=t.prototype._createNewWidget.apply(this,arguments);return i.widget.on("beforeIssueCreated",this.addOverridesOnBeforeIssueCreated),i.widget.on("issueCreated",this.issueCreatedHandler),i},setBoardJQL:function(e){this.boardJQL=e,this._syncJQLs()},_syncJQLs:function(){var e=[];this.boardJQL&&e.push(this.boardJQL),e.push.apply(e,this.filterJQLs),e.length&&this.setCurrentJqls(e)},setFilterJQLs:function(e){this.filterJQLs=e,this._syncJQLs()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-type-dropdown.js' */
define("jira/inline-issue-create/agile/issue-type-dropdown",["jquery","jira/inline-issue-create/util","jira/inline-issue-create/views/issue-type-dropdown"],function(i,t,e){"use strict";return e.extend({initialize:function(i){e.prototype.initialize.apply(this,arguments),this.options.isAgility=GH.RapidBoard.State.isAgilityBoard()},calculateDropdownDirectionAndHeightPosition:function(){var e=this.ui.issueTypeIcon.outerHeight(),o=this.ui.issueTypeIcon.offset().top,n=this.ui.issueTypeDropdown.outerHeight(),s=i("#ghx-backlog").offset().top,u=o-s,l=i("body").outerHeight(!0)-(o+e);return t.trace(this,"spaceBelow",l,"visibleSpaceAbove",u,"dropdownContentHeight",n),l>n?(t.debug(this,"Positioning down - full"),{vAlignment:"bottom"}):u>n?(t.debug(this,"Positioning up - full"),{vAlignment:"top"}):l>u?(t.debug(this,"Positioning down - limited",l),{vAlignment:"bottom",limitHeight:l-10}):(t.debug(this,"Positioning up - limited",u),{vAlignment:"top",limitHeight:u-10})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan-initialiser-common', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-initialiser.js' */
define("jira/inline-issue-create/agile/initialiser",["jquery","underscore","jira/inline-issue-create/util","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/inline-bootstrap","jira/inline-issue-create/agile/widget-group","jira/inline-issue-create/agile/entities/issue-types","jira/inline-issue-create/agile/views/description","jira/inline-issue-create/views/default-trigger","jira-agile/rapid/ui/plan/plan-controller","jira-agile/rapid/ui/plan/backlog-controller","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/sprint-backlog-view","jira-agile/rapid/ui/plan/sprint-view","jira-agile/rapid/ui/plan/plan-controls","jira/featureflags/feature-manager","jira/inline-issue-create/agile/helppath-constants","exports"],function(e,i,t,a,r,n,s,l,o,d,c,u,g,p,f,S,v,w){"use strict";function I(){var e=i.filter(f.quickfilters.getQuickFilters(),function(e){return e.isActive}),t=i.map(e,function(e){return e.query});V.setFilterJQLs(t)}function h(){I(),R.reset(),F.fireWhenInitialized(function(){F.getHasCreateIssuePermission()&&(F.getHasScheduleIssuePermission()&&u.getFutureSprintModels().forEach(function(e){R.add(new C({id:""+e.sprintData.id,translatedName:e.sprintData.name}))}),R.add(new C({id:"backlog",translatedName:"Backlog"})))}),R.trigger("refreshed")}function j(e){if(!e||e.model.getLockState()===e.model.constants.STATE_LOCK_PERM_INACTIVE)return!1;if("pending"===x.state())return!1;var i=u.getBacklogModel2().getIssueList(),t=GH.BacklogStatistics.getIssueListStats(i,!1);if(0===t.totalCount){var a=GH.RapidBoard.State.isAgilityBoard();if(!a)return 0===u.getSprintModels().length;var r=u.getSprintModels();return 1===r.length&&0===r[0].issueList.data.order.length}}function k(){I(),F.fireWhenInitialized(function(){x.then(function(){if(F.getHasCreateIssuePermission()){var i=V.getWidget("backlog");if(i.render(e("#ghx-content-group .ghx-backlog-group .js-issue-list")),j(i.widget)){var t=i.widget.model;t.getIssueTypes()&&t.setSelectedIssueType(t.getIssueTypes().at(0)),V.activateWidget(i.widget)}}})}),JIRA.trace("inline.create.backlog.rendered")}function m(){B!==GH.RapidBoard.State.getRapidViewId()&&(B=GH.RapidBoard.State.getRapidViewId(),JIRA.trace("inline.create.boardjql.fetching"),GH.RapidViewConfig.fetchConfiguration(GH.RapidBoard.State.getRapidViewId()).done(function(e){var i=e.query;V.setBoardJQL(i),JIRA.trace("inline.create.boardjql.fetched")}))}function b(e,i){if(I(),!i.isActiveSprint()){var t=i.getSprintData().id;F.fireWhenInitialized(function(){F.getHasCreateIssuePermission()&&F.getHasScheduleIssuePermission()&&V.getWidget(t).render(e.find(".ghx-issues"))})}}if(!(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("jira.inline.issue.create.disable"))){var A=o.extend({serializeData:function(){return{cssClass:"iic-agile-plan",isAgility:GH.RapidBoard.State.isAgilityBoard()}}});S.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&(A=o.extend({serializeData:function(){return{cssClass:"iic-agile-plan",isAgility:GH.RapidBoard.State.isAgilityBoard()}},configureBoardUrl:function(){return v.configureBoard.url}}));var B,C=a.Model.extend({namedAttributes:{id:"string",translatedName:"string"}}),H=a.Collection.extend({model:C}),R=new H,y=r.extend({issueTypesCollectionType:s}),F=new y,V=new n({TriggerView:A,inlineBootstrap:F,widgetOptions:{descriptionView:l},createdCallback:function(i,a){if("backlog"!==a){const r=S.isFeatureEnabled("cmp-inline-card-create-epic-link-not-populating-fix");if(r){var n=GH.SprintConfig.getSprintFieldId(),s=t.transformCustomFieldId(n),l={};l[s]=a,i.setOverrides(l)}else i.setOverrides({Sprint:a})}i.descriptionView.currentSectionId=""+a,i.descriptionView.allSections=R,i.listenTo(i.descriptionView.allSections,"refreshed",function(){this.render()}),i.descriptionView.on("selected",function(i){var t=e(i),a=t.data("section-id");V.activateWidget(V.getWidget(a).widget)})}}),x=e.Deferred(),D=i.once(function(){t.after(u,"setData",function(){x.resolve(),h()}),t.after(u,"updateDataForSprint",h),t.after(p,"renderAllSprints",h),t.after(g,"renderBacklog",k),t.after(f.quickfilters,"setActiveQuickFilters",I),t.after(g,"updateBacklog",k),t.after(c,"updateEpicFiltering",k),t.after(c,"updateVersionFiltering",k),t.after(p,"_renderSprintContent",b),t.after(GH.RapidBoard,"refreshBoardData",m),t.after(GH.RapidBoard.ViewController,"setMode",m);var i=u.getSprintModels();m(),k(),i.forEach(function(i){var t=e('.js-sprint-container[data-sprint-id="'+i.getSprintId()+'"]');b(t,i)})});w.init=i.once(function(){d.isActive()?D():t.after(d,"initializePlanMode",D)})}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-calendar-init', location = 'jira-quick-edit-plugin/js/init/calendar.js' */
define("quick-edit/init/calendar",["wrm/require"],function(a){function e(e){var c,n=r();switch(n){case"cs_CZ":c="calendar-cs";break;case"da_DK":c="calendar-da";break;case"de_DE":c="calendar-de";break;case"en_UK":c="calendar-en";break;case"en_US":c="calendar-en";break;case"es_ES":c="calendar-es";break;case"et_EE":c="calendar-en";break;case"fi_FI":c="calendar-fi";break;case"fr_FR":c="calendar-fr";break;case"hu_HU":c="calendar-hu";break;case"is_IS":c="calendar-en";break;case"it_IT":c="calendar-it";break;case"ja_JP":c="calendar-jp";break;case"ko_KR":c="calendar-ko";break;case"nb_NO":c="calendar-no";break;case"nl_NL":c="calendar-nl";break;case"pl_PL":c="calendar-pl";break;case"pt_BR":c="calendar-pt";break;case"pt_PT":c="calendar-pt";break;case"ro_RO":c="calendar-ro";break;case"ru_RU":c="calendar-ru";break;case"sk_SK":c="calendar-sk";break;case"sv_SE":c="calendar-sv";break;case"zh_CN":c="calendar-zh";break;default:c="calendar-en"}a("wrc!jira.webresources:"+c,e)}var r=function(){return AJS.Meta.get("user-locale")};return function(a){e(a)}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'jira-quick-edit-plugin/js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(i,n){var o=AJS.dim,a=AJS.undim;return{showLoadingIndicator:function(){o(),i.showLoadingIndicator()},hideLoadingIndicator:function(o){a(),i.hideLoadingIndicator(),o&&n.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")}}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'jira-quick-edit-plugin/js/init/create-dialogs.js' */
define("quick-edit/init/create-dialogs",["wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","quick-edit/init/calendar","jira/featureflags/feature-manager"],function(i,e,a,t,n){var r=function(){a.disable(),e.showLoadingIndicator()},u=function(i){var t=i;"undefined"==typeof i&&(t=!0),e.hideLoadingIndicator(t),a.enable()},o=!1,c=function(e){if(!o){o=!0,r();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue",c=i([n]);c.then(function(){var i=require("quick-edit/init/create");i.initIssueDialog(e),a.enable(),o=!1},function(){u(),o=!1}),t()}},s=!1,d=function(o){if(!s)if(s=!0,r(),n.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&n.isFeatureEnabled("issue-navigator-new-gic-subtask-create-trigger_mzfmg")&&window.IssueCreate&&window.IssueCreate.Visibility&&window.IssueCreate.Visibility.isEnabled){var c=require("quick-edit/init/create");c.initNewGicSubtaskDialog(o),e.hideLoadingIndicator(),s=!1}else{var d="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue",l=i([d]);l.then(function(){var i=require("quick-edit/init/create");i.initSubtaskDialog(o),a.enable(),s=!1},function(){u(),s=!1}),t()}};return{showCreateDialog:c,showCreateSubtaskDialog:d,hideLoadingIndicator:u}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'jira-quick-edit-plugin/js/init/create-bootstrap-wrm.js' */
require(["jquery","quick-edit/init/create-dialogs"],function(e,t){JIRA.API.getSidebar().then(function(e){e.on(e.events.JIRA_SUMMON_CREATE_ISSUE_DIALOG,function(e){t.showCreateDialog(e)},!0)}),e(function(){var e=document.getElementById("stqc_show");e&&(e.onclick=null)}),e(document).on("simpleClick",".create-issue, .create-issue-type",function(i){i.preventDefault();var a=require("jira/featureflags/feature-manager");if(a&&a.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&a.isFeatureEnabled("jwm-create-first-issue-trigger-point-enable-new-gic_6lrml")&&window.IssueCreate&&window.IssueCreate.Visibility&&window.IssueCreate.Visibility.isEnabled){var r=require("quick-edit/util/loading-indicator");r.showLoadingIndicator();var s=e(i.target),n=s.is("a")?s:s.find("a"),o=parseUri(n.attr("href")).queryKey,u={pid:o.pid,issueType:o.issuetype,itsmCategory:o.itsmCategory};u=e.extend(u,{pid:s.attr("data-pid"),issueType:s.attr("data-issue-type"),itsmCategory:s.attr("data-itsm-category")});var d=new CustomEvent("openIssueCreateDialog",{detail:{payload:{prefilledFields:u},title:"Create Subtask",id:"create-issue-story-dialog",triggerPointKey:"jwm-summary-create-first-issue-trigger"}});document.dispatchEvent(d),r.hideLoadingIndicator()}else t.showCreateDialog(i)}),e(document).on("simpleClick",".issueaction-create-subtask",function(e){e.preventDefault(),t.showCreateSubtaskDialog(e)})});;
;
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-scripts-common', location = '/teams/scripts-plugin/field-common.min.js' */
(function(){define("com/atlassian/rm/common/customfields/common",[],function(){var a,b,c,d,e,f,g,h,i,j;return c=window.JIRA,a=AJS.$,d=AJS.SingleSelect,b=AJS.ItemDescriptor,j=AJS.escapeHTML,f=function(a){return"complete"===document.readyState&&a({context:document}),c.bind(c.Events.NEW_CONTENT_ADDED,function(b,d,e){if(e!==c.CONTENT_ADDED_REASON.panelRefreshed)return a({context:d})})},g=function(a){var b,c,d;return d=a.url,b=a.createQueryData,c=a.formatResponse,{url:d,type:"POST",query:!0,data:function(a){return b({query:a})},dataType:"json",contentType:"application/json",formatResponse:c,keyInputPeriod:200}},i=function(a){var c,d;return d=a.text,c=a.additionalStyles,new b({label:d,html:j(d),highlighted:!0,styleClass:"jpo-dropdown-item-unselectable "+c,unselectableItem:!0})},e=function(a){var b;if(b=a.items,0===b.length)return b.push(i({text:"No Matches",additionalStyles:"jpo-dropdown-item-italic"}))},h=function(b){var c,e;return c=b.ajaxOptions,e=b.getNoMatchingValueMessage,d.extend({init:function(b){return a.extend(b,{submitInputVal:!0,showDropdownButton:!0,ajaxOptions:c}),this._super(b)},setSelection:function(a){if(!a.properties.unselectableItem)return this._super.apply(this,arguments)},handleFreeInput:function(b){var c,d;if(this._super.apply(this,arguments),null==b&&(b=a.trim(this.$field.val())),d=this.model.getDescriptor(b),null==d&&this.$container.hasClass("aui-ss-editing"))return c=null!=b&&b.length>0,c?(this.options.errorMessage=e(b),this.showErrorMessage(b),this.clear(),this.model.removeFreeInputVal()):this.hideErrorMessage()}})},{bindInitializationCallback:f,createDropdownAjaxOptions:g,createInfoMessageListItem:i,addNoMatchesItemIfEmpty:e,createDropdownClass:h}})}).call(this);;
;
/* module-key = 'com.atlassian.jpo:jpo-wr-custom-field-scripts-parent', location = '/jpo2/scripts-plugin/field-parent.min.js' */
(function(){require(["com/atlassian/rm/common/customfields/common"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;if(j=window.JIRA,b=AJS.$,i=AJS.ItemDescriptor,d=AJS.GroupDescriptor,p=AJS.contextPath,w=AJS.escapeHTML,k=100,l=".jpo-parent-selection-dropdown",f=".jpo-initial-issue-type-name",e=".jpo-initial-epic-link",g=".jpo-initial-issue-project",c=".jpo-client-error-message-container",h="#issuetype-field",m=p()+"/rest/jpo/1.0/parent/suggest",B="",E=void 0,v=void 0,F=void 0,z=function(a){var b,c,d,e;for(b={},d=0,e=a.length;d<e;d++)c=a[d],b[c.id]=c;return b},I=function(){return B=b(f).val()},D=function(){return b(h).change(function(a){var b;if(b=a.target.value,null!=b&&b.length>0)return B=b})},A=function(){return null!=v&&v.length>0},H=function(){return v=b(e).val()},J=function(){return F=b(g).val()},C=function(a){return a.$field.change(function(a){return v=a.target.value,o()})},o=function(){return A()?L("Cannot use parent link when epic link is set."):y()},K=function(a){if(null!=E)return E.$container.toggle(a)},L=function(a){return K(!1),b(c).html("<span class='error'>"+w(a)+"</span>")},y=function(){return K(!0),b(c).empty()},x=function(a){var b,c,e,f,g;return e=a.issues,c=a.issueTypes,g=a.projects,b=new d({weight:0,showLabel:!1,items:[q()]}),f=new d({weight:1,items:u({issues:e,issueTypes:c,projects:g})}),[b,f]},t=function(a){var b,c,d,e,f,g,h;return d=a.issue,g=a.issueType,h=a.project,e=d.issueKey,f=d.issueSummary,b=h.key+"-"+e,c=b+" "+f,new i({value:b,fieldText:c,label:c,icon:g.iconUrl})},u=function(b){var c,d,e,f,g,h,i;return f=b.issues,d=b.issueTypes,h=b.projects,e=z(d),i=z(h),g=function(){var a,b,d;for(d=[],a=0,b=f.length;a<b;a++)c=f[a],d.push(t({issue:c,issueType:e[c.issueTypeId],project:i[c.projectId]}));return d}(),a.addNoMatchesItemIfEmpty({items:g}),g},q=function(){return a.createInfoMessageListItem({text:"To set an epic as the parent, use the epic link instead",additionalStyles:"jpo-dropdown-item-italic"})},r=function(a){var b;return b=a.query,JSON.stringify({query:b,issueTypeName:B,maxResults:k,projectId:F})},n=a.createDropdownClass({ajaxOptions:a.createDropdownAjaxOptions({url:m,createQueryData:r,formatResponse:x}),getNoMatchingValueMessage:function(a){return AJS.format("No valid parent matching \'\'{0}\'\' was found.",a)}}),s=function(a){return b(l,a).each(function(){return E=new n({element:b(this)}),o()})},a.bindInitializationCallback(function(a){var b;return b=a.context,H(),I(),J(),D(),s(b)}),null!=(null!=(G=j.EpicPicker)?G.READY_EVENT:void 0))return j.bind(j.EpicPicker.READY_EVENT,function(a,b){return C(b)})})}).call(this);;
;
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-team', location = '/teams/scripts-plugin/field-team.min.js' */
(function(){require(["com/atlassian/rm/common/customfields/common"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return b=AJS.$,e=AJS.ItemDescriptor,d=AJS.GroupDescriptor,j=AJS.contextPath,f=100,g=".jpo-team-selection-dropdown",h=j()+"/rest/teams/1.0/teams/find",c=j()+"/download/resources/com.atlassian.teams:jpo-wr-images-and-fonts/images/teams/default-avatar.svg",p=function(a){var b,c,e;return e=a.teams,b=new d({weight:0,items:[k()]}),c=new d({weight:1,label:"Shared teams",items:o({teams:e})}),[b,c]},n=function(a){var b,d,f;return d=a.id,f=a.title,b=a.avatarUrl,new e({value:""+d,fieldText:f,label:f,icon:b||c})},o=function(b){var c,d,e;return e=b.teams,c=function(){var a,b,c;for(c=[],a=0,b=e.length;a<b;a++)d=e[a],c.push(n(d));return c}(),a.addNoMatchesItemIfEmpty({items:c}),c},k=function(){return a.createInfoMessageListItem({text:"Plan-specific teams can only be selected through a plan",additionalStyles:"jpo-dropdown-item-italic"})},l=function(a){var b;return b=a.query,JSON.stringify({query:b,excludedIds:[],maxResults:f})},i=a.createDropdownClass({ajaxOptions:a.createDropdownAjaxOptions({url:h,createQueryData:l,formatResponse:p}),getNoMatchingValueMessage:function(a){return AJS.format("No team matching query \'\'{0}\'\' was found.",a)}}),m=function(a){return b(g,a).each(function(){return new i({element:b(this)})})},a.bindInitializationCallback(function(a){var b;return b=a.context,m(b)})})}).call(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(e,t,i){return t.extend({_getDefaultOptions:function(){return e.extend(this._super(),{cached:!1,widthClass:"large",stacked:!0})},defineResources:function(){this._super(),this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var e=this;this.get$popupContent().find(".cancel").click(function(t){e.hide(),t.preventDefault()})},_onShowContent:function(){if(this._super(),t.current===this){var e=new i.FocusConfiguration;e.context=this.get$popup()[0],e.parentElementSelectors=[".form-body"],i.pushConfiguration(e),i.triggerFocus()}},hide:function(e){return this._super(e)!==!1&&void i.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(e,i,n){n.get("is-admin")&&e(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault(),new i({id:"notification-helper-dialog",content:function(e){var i=this;require(["jira/admin-helper/notification-helper/content-loader"],function(n){n.loadContent(i,e)})}}).show()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(e,i,n){n.get("is-admin")&&e(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault(),new i({id:"permission-helper-dialog",widthClass:"medium",content:function(e){var i=this;require(["jira/admin-helper/permission-helper/content-loader"],function(n){n.loadContent(i,e)})}}).show()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog"],function(i,e,n,t){function r(){AJS.InlineDialog.current=null}if(n.get("is-admin")){var a="Where is my field?";i(document).delegate(".whereismycf-trigger","click",function(i){i.preventDefault(),new e({id:"whereismycf-dialog",widthClass:"small",content:function(i){var e=this;require(["jira/admin-helper/whereismycf/content-loader"],function(n){n.loadContentForView(e,i)})}}).show()}),i(document).bind("showLayer",function(n,o,l){if("inlineDialog"==o&&"inline-dialog-field_picker_popup"==l.popup.attr("id")&&0==l.popup.find("#whereismycf-qfpicker-link-id").length){var d=i("<a href='#' id='whereismycf-qfpicker-link-id'>"+a+"</a>").appendTo(l.popup.find("#qf-picker-custom-link"));d.click(function(i){i.preventDefault(),l.hide(),r();var n=t.current;new e({id:"whereismycf-dialog",widthClass:"small",content:function(i){var e=this;require(["jira/admin-helper/whereismycf/content-loader"],function(t){t.loadContentForEditAndCreate(e,n,i)})}}).show()})}})}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue', location = 'jira-quick-edit-plugin/js/init/create.js' */
define("quick-edit/init/create",["quick-edit/form/factory/create-issue","quick-edit/form/factory/create-subtask","quick-edit/util/dialog","jira/analytics/web-client","jira/analytics/transformers/issue-type","jira/featureflags/feature-manager","jquery","quick-edit/util/jira","quick-edit/util/hierarchy","jira/util/events"],function(e,t,i,a,s,r,n,o,u,d){"use strict";var c=function(t){var i=n(t.target),r=i.is("a")?i:i.find("a"),c=parseUri(r.attr("href")).queryKey,p={pid:c.pid,issueType:c.issuetype,itsmCategory:c.itsmCategory};p=n.extend(p,{pid:i.attr("data-pid"),issueType:i.attr("data-issue-type"),itsmCategory:i.attr("data-itsm-category")});var g=e(p);n(g).on("dialogRendered",function(){JIRA.trace("create.issue.dialog.rendered"),a.sendPageEvent("createIssueModal"),d.trigger("createIssueDialogRendered")}),n(g).on("issueCreated",function(e,t){JIRA.trace("create.issue.dialog.issue.created");var i=t.createdIssueDetails.fields,r=String(i.project.id),n=i.project.projectTypeKey,c=String(t.createdIssueDetails.id),p=s.map(i.issuetype.name),g=String(i.issuetype.id),y={issueType:p,issueTypeId:g,projectType:n};i&&i.issuerestriction&&i.issuerestriction.issuerestrictions&&i.issuerestriction.issuerestrictions.projectrole&&i.issuerestriction.issuerestrictions.projectrole.length>0&&(y={issueType:p,issueTypeId:g,projectType:n,restrictIssue:!0});var f=i.project.simplified,I=t.hierarchy;y.nextGenProject=f,f&&I&&(y.issueTypeLevel=u.getIssueTypeLevel(I));var k="other";"software"===n&&(window.location.pathname.indexOf("roadmap")>-1?k="roadmap":window.location.pathname.indexOf("RapidBoard.jspa")>-1&&window.location.search.indexOf("view=planning")>-1||window.location.pathname.indexOf("backlog")>-1?k="backlog":(window.location.pathname.indexOf("RapidBoard.jspa")>-1||window.location.pathname.indexOf("board")>-1)&&(k="board")),y.location=k,"service_desk"===n&&(y.hasRequestType=l(i));var m={containerType:"project",containerId:r,source:"createIssueModal",objectType:"issue",objectId:c,actionSubject:"issue",action:"created",attributes:y};a.sendTrackEvent(m),d.trigger("legacyIssueCreated",m);var v=o.getApplication(n),b=o.getEdition(v);a.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:{task:"createIssue",isCreated:!0,application:v,edition:b,analyticsSource:"QuickCreateForm"}})}),g.asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:"Create issue",headers:{"X-Atlassian-Capability":"LEGACY_ISSUE_CREATE"}}).show()},l=function(e){var t=!1;return n.each(e,function(e,i){i&&i.hasOwnProperty("requestType")&&(t=!0)}),t},p=function(e){var t=n(e.target),i=t.is("a")?t:t.find("a"),a=i.attr("data-issueid"),s=require("jira/issue"),r=require("jira/issuenavigator/issue-navigator");a=a||n("#fallback-subtask-dialog-issueid").data("issueid")||s.getIssueId()||r.getSelectedIssueId();var o=new CustomEvent("openIssueCreateDialog",{detail:{isSubTaskCreationOpen:!0,shouldNotTransform:!0,payload:{parentId:{parentId:a.toString()}},title:"Create Subtask",id:"create-subtask-story-dialog",triggerPointKey:"create-subtask-issue-navigator-trigger"}});document.dispatchEvent(o)},g=function(e){var s=n(e.target),r=s.is("a")?s:s.find("a"),o=r.attr("data-issueid");o=o||n("#fallback-subtask-dialog-issueid").data("issueid");var u={parentIssueId:o},d=t(u);n(d).on("dialogRendered",function(){a.sendPageEvent("createSubTaskModal")}),d.asDialog({windowTitle:function(){return i.getIssueActionTitle("Create Subtask")},trigger:document.createElement("a"),id:"create-subtask-dialog"}).show()};return{initIssueDialog:c,initSubtaskDialog:g,initNewGicSubtaskDialog:p}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-dialog-resources', location = 'jira-agile-module/includes/js/gh-IssueActionsDialog.js' */
define("jira-agile/dialog/issue-actions",["jira/ajs/select/queryable-dropdown-select","jira/dialog/dialog","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/ajax/smart-ajax","jira/focus/set-focus","jquery"],function(n,i,o,r,a,s,l){var d="unified-attach-file-wrapper",c=JIRA.IssueNavigator,u=JIRA.Issue;return i.extend({_getDefaultOptions:function(){return l.extend(this._super(),{cached:!1,id:"issue-actions-dialog",widthClass:"small"})},_setContent:function(t,e){t?this._super(t,e):this._super(l(["<form id='issue-actions-dialog-form' class='aui ajs-dirty-warning-exempt issue-actions-dialog-form'>","<div class='form-body'>","<div id='issueactions-suggestions' class='aui-list'></div>","<div class='description'>","Begin typing for available operations or press down to see all","</div>","</div>","</form>"].join("")),!0),i.current===this&&((e=new s.FocusConfiguration).context=this.get$popup()[0],e.parentElementSelectors=[".form-body"],s.pushConfiguration(e),s.triggerFocus())},_attachFileHandler:function(t){t.preventDefault(),this.hide(),l("#attach-file").click()},_formatActionsResponse:function(s){function n(){return GH.RapidBoard.getCurrentPageReturnUrl()}var a,t,e,i=[];return s&&(s.actions&&0!==s.actions.length&&i.push((t=s.actions,e=new o({label:"Workflow"}),l(t).each(function(){e.addItem(new r({href:contextPath+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+this.action+"&atl_token="+s.atlToken+"&returnUrl="+n(s.key),label:this.name,styleClass:"issueaction-workflow-transition"}))}),e)),s.operations&&0!==s.operations.length&&i.push((t=s.operations,a=new o({label:"Actions"}),l(t).each(function(){var t=n(s.key),e=this.name,i=require("jira-agile/rapid/ui/detail/details-model");i.patchRankOperationName&&(e=i.patchRankOperationName(this.styleClass,this.name));i=-1===this.url.indexOf("?")?"?":"&",i=this.url+i+"returnUrl="+t,t=this.styleClass;"unified-attach-file"===this.styleClass&&(t=d),a.addItem(new r({href:i,label:e,styleClass:t}))}),a))),i},decorateContent:function(){var e=this,i=this,t=c.getSelectedIssueKey(),s=u.getIssueId()||c.getSelectedIssueId();t?this.addHeading("Operations"+": <span>"+t+"</span>"):this.addHeading("Operations"),this.queryControl=new n({id:"issueactions",element:this.$content.find("#issueactions-suggestions"),ajaxOptions:{minQueryLength:1,dataType:"json",url:AJS.format(contextPath+"/rest/api/1.0/issues/{0}/ActionsAndOperations?atl_token={1}",s,atl_token()),formatResponse:function(t){return e._formatActionsResponse(t)}},showDropdownButton:!0,loadOnInit:!0}),this.queryControl._handleServerError=function(t){var e=a.buildSimpleErrorContent(t),t=401===t.status?"warning":"error";i._setContent(l('<div class="ajaxerror"><div class="aui-message '+t+'"><p>'+e+"</p></div></div>"),!1),i._addCloseLink()},this._attachFileHandler=this._attachFileHandler.bind(this),l("body").on("click","."+d,this._attachFileHandler),this.timeoutId=void 0,this._addCloseLink()},_addCloseLink:function(){var e=this,t=l('<div class="buttons-container form-footer"></div>').appendTo(this.get$popupContent()),i=l('<div class="buttons"/>').appendTo(t);l("<a href='#' class='cancel' id='aui-dialog-close'>"+"Close"+"</a>").appendTo(i,this.get$popupContent()).click(function(t){e.hide(),t.preventDefault()}),this.get$popupContent().append(t)},hide:function(t){if(!1===this._super(t))return!1;l("body").off("click","."+d,this._attachFileHandler),s.popConfiguration()}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-dialog-resources', location = 'jira-agile-module/includes/js/gh-LinkIssueDialog.js' */
!function(){"use strict";var r=require("jquery"),n=require("jira-agile/dialog/issue-dialog-util");GH.LinkIssueDialog={},GH.LinkIssueDialog.create=function(e,a,t,i){return t=t||n.storeCurrentIssueIdOnSucessfulSubmit,new GH.FormDialog({id:"link-issue-dialog",trigger:e,onSuccessfulSubmit:t,issueMsg:"thanks_issue_linked",widthClass:"large",stacked:!0,content:function(o){var e,n,u=this,t=i||JIRA.Issue.getIssueId()||JIRA.IssueNavigator.getSelectedIssueId();e=u,n=r.Deferred(),(e=JIRA.Dialogs.getDefaultAjaxOptions.call(e)).complete=function(e,t,i){i.successful?n.resolve(i.data):n.reject(JIRA.SmartAjax.buildDialogErrorContent(i))},JIRA.SmartAjax.makeRequest(e),n.promise().done(function(s){var e,n;e=t,n=r.Deferred(),JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/viewIssue/1/remoteIssueLink/linkType?issueId="+e,complete:function(e,t,i){i.successful?n.resolve(i.data):n.reject(JIRA.SmartAjax.buildDialogErrorContent(i))}}),n.promise().done(function(e){var i,n,t=a||u.$activeTrigger.attr("id");i=t,t=e,n=!1,r.each(t,function(e,t){if(t.id===i)return t.isSelected=!0,!(n=!0)}),n||(t[0].isSelected=!0),e=t,o(JIRA.Templates.LinkIssue.dialog({linkTypes:e,tabContent:s})),r.each(e,function(e,t){var i;!0===t.isSelected&&(i="[name='"+t.focusedFieldName+"']",0===r(i).length&&(i="#"+t.id),u._focusFirstField(i))})}).fail(function(e){o(e)})}).fail(function(e){o(e)})},formatSubmitResponseContent:function(e){return this.get$popupContent().find(".dialog-pane").html(e),this.get$popupContent().html()},onContentRefresh:function(){this.bindAnchorsToDialog(this.get$popupContent().find(".dialog-menu-item "))}})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-dialog-resources', location = 'jira-agile-module/includes/js/gh-InitDialogs.js' */
AJS.$(function(){require(["jira/dialog/dialog-register","jira-agile/dialog/issue-actions","jira-agile/dialog/labels-dialog","jira-agile/rapid/ui/bento/bento-features","jira/dialog/screenshot-window","jira/dialog/form-dialog","jira/dialog/dialog","jquery","aui/tabs"],function(i,e,s,t,o,n,a,r,u){var l,c,d=JIRA.IssueNavigator,g=JIRA.Issue,f=["deleteIssueLink","editComment","deleteComment"];for(c in i)i.hasOwnProperty(c)&&(0<=f.indexOf(c)||(l=i[c])._unassignEvents&&l.options.trigger&&l._unassignEvents("trigger",l.options.trigger));r(document).undelegate("a.issueaction-workflow-transition","click"),r("a.issueaction-attach-screenshot").die("click"),i.keyboardShortcuts=new n({id:"keyboard-shortcuts-dialog",trigger:"#keyshortscuthelp",widthClass:"large",onContentRefresh:function(){var s=this.get$popupContent();r("a.submit-link",s).click(function(e){e.preventDefault(),r("form",s).submit()})}}),document.getElementById("dashboard")?(i.deleteDashboard=new n({type:"ajax"}),r(document).delegate("#delete_dashboard","click",function(e){e.stopPropagation(),e.preventDefault(),i.deleteDashboard.$activeTrigger=r("#delete_dashboard"),i.deleteDashboard.init({type:"ajax",id:"delete-dshboard",ajaxOptions:{url:i.deleteDashboard.$activeTrigger.attr("href")},targetUrl:"input[name=targetUrl]"}),i.deleteDashboard.show()})):(i.assignToMe=new GH.FormDialog({id:"assign-to-me-link-handler",trigger:"a.issueaction-assign-to-me",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned"}),i.linkIssue=GH.LinkIssueDialog.create("a.issueaction-link-issue"),i.deleteIssue=new GH.FormDialog({id:"delete-issue-dialog",trigger:"a.issueaction-delete-issue",targetUrl:"#delete-issue-return-url",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_deleted",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),i.cloneIssue=new GH.FormDialog({id:"clone-issue-dialog",trigger:"a.issueaction-clone-issue",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_cloned",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),i.assignIssue=new GH.FormDialog({id:"assign-dialog",trigger:"a.issueaction-assign-issue",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),i.logWork=new GH.FormDialog({id:"log-work-dialog",trigger:"a.issueaction-log-work",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_worklogged",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow();this.get$popupContent()}}),i.attachFile=new GH.FormDialog({id:"attach-file-dialog",trigger:"a.issueaction-attach-file",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),t.isBentoEnabled()||(i.attachScreenshotDialog=new GH.FormDialog({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}})),i.attachScreenshot=new o({id:"attach-screenshot-window",trigger:"a.issueaction-attach-screenshot"}),i.comment=new GH.FormDialog({id:"comment-add-dialog",trigger:"a.issueaction-comment-issue",handleRedirect:!0,widthClass:"large",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_commented",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),i.editLabels=new s({id:"edit-labels-dialog",trigger:"a.issueaction-edit-labels,a.edit-labels",autoClose:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_labelled",labelsProvider:function(e){},onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),i.issueActions=new e,AJS.namespace("jira.app.issueActionsPopup",null,i.issueActions),r(document).delegate("a.issueaction-workflow-transition","click",function(e){e.preventDefault();var s,t=/action=(\d+)/.exec(this.href.slice(this.href.indexOf("?")));t&&(s="workflow-transition-"+t[1]+"-dialog",e=r(this),i[s]||(i[s]=new GH.FormDialog({id:s,url:e.attr("href"),transitionActionId:t[1],trigger:'a[href*="'+t[0]+'"].issueaction-workflow-transition',widthClass:"large",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_transitioned",onContentRefresh:function(){u.setup()}}),i[s].show()))}),r.each(i,function(e,s){s instanceof a&&r(s).bind("beforeShow",function(){if("keyboardShortcuts"!==e)return d.isRowSelected()||void 0!==g.getIssueId()})}))})});;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory-legacy', location = 'atlassian-jslibs/factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
!function(e){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(t,r){var s={_:t,Backbone:r};e.call(s);var a=r.PageableCollection.noConflict();return a.VERSION="2.0.2",a}})}(function(){/*
     backbone.paginator 2.0.2
     http://github.com/backbone-paginator/backbone.paginator

     Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
     Licensed under the MIT @license.
     */
(function(e){var t=this,r=t._,s=t.Backbone,a=s.PageableCollection,i=e(r,s);s.PageableCollection.noConflict=function(){return s.PageableCollection=a,i}}).call(this,function(e,t){"use strict";function r(t,r){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+r+"` must be a finite integer");return t}function s(e){for(var t,r,s,a,i={},n=decodeURIComponent,o=e.split("&"),l=0,c=o.length;l<c;l++){var u=o[l];t=u.split("="),r=t[0],s=t[1]||!0,r=n(r),s=n(s),a=i[r],d(a)?a.push(s):a?i[r]=[a,s]:i[r]=s}return i}function a(e,t,r){var s=e._events[t];if(s&&s.length){var a=s[s.length-1],i=a.callback;a.callback=function(){try{i.apply(this,arguments),r()}catch(e){throw e}finally{a.callback=i}}}else r()}var i=e.extend,n=e.omit,o=e.clone,l=e.each,c=e.pick,u=e.contains,h=e.isEmpty,f=e.pairs,g=e.invert,d=e.isArray,P=e.isFunction,v=e.isObject,m=e.keys,p=e.isUndefined,y=Math.ceil,k=Math.floor,S=Math.max,_=t.Collection.prototype,R=/[\s'"]/g,b=/[<>\s'"]/g,C=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){_.constructor.apply(this,arguments),t=t||{};var r=this.mode=t.mode||this.mode||w.mode,s=i({},w.queryParams,this.queryParams,t.queryParams||{});s.directions=i({},w.queryParams.directions,this.queryParams.directions,s.directions||{}),this.queryParams=s;var a=this.state=i({},w.state,this.state,t.state||{});a.currentPage=null==a.currentPage?a.firstPage:a.currentPage,d(e)||(e=e?[e]:[]),e=e.slice(),"server"==r||null!=a.totalRecords||h(e)||(a.totalRecords=e.length),this.switchMode(r,i({fetch:!1,resetState:!1,models:e},t));var n=t.comparator;if(a.sortKey&&!n&&this.setSorting(a.sortKey,a.order,t),"server"!=r){var l=this.fullCollection;n&&t.full&&(this.comparator=null,l.comparator=n),t.full&&l.sort(),e&&!h(e)&&(this.reset(e,i({silent:!0},t)),this.getPage(a.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=o(this.state)},_makeFullCollection:function(e,r){var s,a,i,n=["url","model","sync","comparator"],o=this.constructor.prototype,l={};for(s=0,a=n.length;s<a;s++)i=n[s],p(o[i])||(l[i]=o[i]);var c=new(t.Collection.extend(l))(e,r);for(s=0,a=n.length;s<a;s++)i=n[s],this[i]!==o[i]&&(c[i]=this[i]);return c},_makeCollectionEventHandler:function(e,t){return function(r,s,n,c){var u=e._handlers;l(m(u),function(r){var s=u[r];e.off(r,s),t.off(r,s)});var h=o(e.state),f=h.firstPage,g=0===f?h.currentPage:h.currentPage-1,d=h.pageSize,P=g*d,v=P+d;if("add"==r){var k,S,_,R,c=c||{};if(n==t)S=t.indexOf(s),S>=P&&S<v&&(R=e,k=_=S-P);else{k=e.indexOf(s),S=P+k,R=t;var _=p(c.at)?S:c.at+P}if(c.onRemove||(++h.totalRecords,delete c.onRemove),e.state=e._checkState(h),R){R.add(s,i({},c||{},{at:_}));var b=k>=d?s:!p(c.at)&&_<v&&e.length>d?e.at(d):null;b&&a(n,r,function(){e.remove(b,{onAdd:!0})})}}if("remove"==r)if(c.onAdd)delete c.onAdd;else{if(--h.totalRecords){var C=h.totalPages=y(h.totalRecords/d);h.lastPage=0===f?C-1:C||f,h.currentPage>C&&(h.currentPage=h.lastPage)}else h.totalRecords=null,h.totalPages=null;e.state=e._checkState(h);var w,x=c.index;n==e?((w=t.at(v))?a(e,r,function(){e.push(w,{onRemove:!0})}):!e.length&&h.totalRecords&&e.reset(t.models.slice(P-d,v-d),i({},c,{parse:!1})),t.remove(s)):x>=P&&x<v&&((w=t.at(v-1))&&a(e,r,function(){e.push(w,{onRemove:!0})}),e.remove(s),!e.length&&h.totalRecords&&e.reset(t.models.slice(P-d,v-d),i({},c,{parse:!1})))}if("reset"==r)if(c=n,n=s,n==e&&null==c.from&&null==c.to){var q=t.models.slice(0,P),z=t.models.slice(P+e.models.length);t.reset(q.concat(e.models).concat(z),c)}else n==t&&((h.totalRecords=t.models.length)||(h.totalRecords=null,h.totalPages=null),"client"==e.mode&&(h.lastPage=h.currentPage=h.firstPage),e.state=e._checkState(h),e.reset(t.models.slice(P,v),i({},c,{parse:!1})));"sort"==r&&(c=n,n=s,n===t&&e.reset(t.models.slice(P,v),i({},c,{parse:!1}))),l(m(u),function(r){var s=u[r];l([e,t],function(e){e.on(r,s);var t=e._events[r]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,s=this.links,a=e.totalRecords,i=e.pageSize,n=e.currentPage,o=e.firstPage,l=e.totalPages;if(null!=a&&null!=i&&null!=n&&null!=o&&("infinite"!=t||s)){if(a=r(a,"totalRecords"),i=r(i,"pageSize"),n=r(n,"currentPage"),o=r(o,"firstPage"),i<1)throw new RangeError("`pageSize` must be >= 1");if(l=e.totalPages=y(a/i),o<0||o>1)throw new RangeError("`firstPage must be 0 or 1`");if(e.lastPage=0===o?S(0,l-1):l||o,"infinite"==t){if(!s[n+""])throw new RangeError("No link found for page "+n)}else if(n<o||l>0&&(o?n>l:n>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(o?">":">=")+" totalPages if "+o+"-based. Got "+n+".")}return e},setPageSize:function(e,t){e=r(e,"pageSize"),t=t||{first:!1};var s=this.state,a=y(s.totalRecords/e),o=a?S(s.firstPage,k(a*s.currentPage/s.totalPages)):s.firstPage;return s=this.state=this._checkState(i({},s,{pageSize:e,currentPage:t.first?s.firstPage:o,totalPages:a})),this.getPage(s.currentPage,n(t,["first"]))},switchMode:function(t,r){if(!u(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');r=r||{fetch:!0,resetState:!0};var s=this.state=r.resetState?o(this._initState):this._checkState(i({},this.state));this.mode=t;var a,c=this,h=this.fullCollection,f=this._handlers=this._handlers||{};if("server"==t||h)"server"==t&&h&&(l(m(f),function(e){a=f[e],c.off(e,a),h.off(e,a)}),delete this._handlers,this._fullComparator=h.comparator,delete this.fullCollection);else{h=this._makeFullCollection(r.models||[],r),h.pageableCollection=this,this.fullCollection=h;var g=this._makeCollectionEventHandler(this,h);l(["add","remove","reset","sort"],function(t){f[t]=a=e.bind(g,{},t),c.on(t,a),h.on(t,a)}),h.comparator=this._fullComparator}if("infinite"==t)for(var d=this.links={},P=s.firstPage,v=y(s.totalRecords/s.pageSize),p=0===P?S(0,v-1):v||P,k=s.firstPage;k<=p;k++)d[k]=this.url;else this.links&&delete this.links;return r.fetch?this.fetch(n(r,"fetch","resetState")):this},hasPreviousPage:function(){var e=this.state,t=e.currentPage;return"infinite"!=this.mode?t>e.firstPage:!!this.links[t-1]},hasNextPage:function(){var e=this.state,t=this.state.currentPage;return"infinite"!=this.mode?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var s=this.mode,a=this.fullCollection;t=t||{fetch:!1};var o=this.state,l=o.firstPage,c=o.currentPage,u=o.lastPage,f=o.pageSize,g=e;switch(e){case"first":g=l;break;case"prev":g=c-1;break;case"next":g=c+1;break;case"last":g=u;break;default:g=r(e,"index")}this.state=this._checkState(i({},o,{currentPage:g})),t.from=c,t.to=g;var d=(0===l?g:g-1)*f,P=a&&a.length?a.models.slice(d,d+f):[];return"client"!=s&&("infinite"!=s||h(P))||t.fetch?("infinite"==s&&(t.url=this.links[g]),this.fetch(n(t,"fetch"))):(this.reset(P,n(t,"fetch")),this)},getPageByOffset:function(e,t){if(e<0)throw new RangeError("`offset must be > 0`");e=r(e);var s=k(e/this.state.pageSize);return 0!==this.state.firstPage&&s++,s>this.state.lastPage&&(s=this.state.lastPage),this.getPage(s,t)},sync:function(e,r,s){var a=this;if("infinite"==a.mode){var n=s.success,o=a.state.currentPage;s.success=function(e,t,r){var l=a.links,c=a.parseLinks(e,i({xhr:r},s));c.first&&(l[a.state.firstPage]=c.first),c.prev&&(l[o-1]=c.prev),c.next&&(l[o+1]=c.next),n&&n(e,t,r)}}return(_.sync||t.sync).call(a,e,r,s)},parseLinks:function(e,t){var r={},s=t.xhr.getResponseHeader("Link");if(s){var a=["first","prev","next"];l(s.split(","),function(e){var t=e.split(";"),s=t[0].replace(b,""),i=t.slice(1);l(i,function(e){var t=e.split("="),i=t[0].replace(R,""),n=t[1].replace(R,"");"rel"==i&&u(a,n)&&(r[n]=s)})})}return r},parse:function(e,t){var r=this.parseState(e,o(this.queryParams),o(this.state),t);return r&&(this.state=this._checkState(i({},this.state,r))),this.parseRecords(e,t)},parseState:function(t,r,s,a){if(t&&2===t.length&&v(t[0])&&d(t[1])){var i=o(s),c=t[0];return l(f(n(r,"directions")),function(t){var r=t[0],s=t[1],a=c[s];p(a)||e.isNull(a)||(i[r]=c[s])}),c.order&&(i.order=1*g(r.directions)[c.order]),i}},parseRecords:function(e,t){return e&&2===e.length&&v(e[0])&&d(e[1])?e[1]:e},fetch:function(e){e=e||{};var t=this._checkState(this.state),r=this.mode;"infinite"!=r||e.url||(e.url=this.links[t.currentPage]);var a=e.data||{},l=e.url||this.url||"";P(l)&&(l=l.call(this));var u=l.indexOf("?");u!=-1&&(i(a,s(l.slice(u+1))),l=l.slice(0,u)),e.url=l,e.data=a;var h,g,d,v,y="client"==this.mode?c(this.queryParams,"sortKey","order"):n(c(this.queryParams,m(w.queryParams)),"directions"),k=f(y),S=o(this);for(h=0;h<k.length;h++)g=k[h],d=g[0],v=g[1],v=P(v)?v.call(S):v,null!=t[d]&&null!=v&&(a[v]=t[d]);if(t.sortKey&&t.order){var R=P(y.order)?y.order.call(S):y.order;a[R]=this.queryParams.directions[t.order+""]}else t.sortKey||delete a[y.order];var b=f(n(this.queryParams,m(w.queryParams)));for(h=0;h<b.length;h++)g=b[h],v=g[1],v=P(v)?v.call(S):v,null!=v&&(a[g[0]]=v);if("server"!=r){var C=this,x=this.fullCollection,q=e.success;return e.success=function(t,s,a){a=a||{},p(e.silent)?delete a.silent:a.silent=e.silent;var n=t.models;"client"==r?x.reset(n,a):(x.add(n,i({at:x.length},i(a,{parse:!1}))),C.trigger("reset",C,a)),q&&q(t,s,a)},_.fetch.call(this,i({},e,{silent:!0}))}return _.fetch.call(this,e)},_makeComparator:function(e,t,r){var s=this.state;if(e=e||s.sortKey,t=t||s.order,e&&t)return r||(r=function(e,t){return e.get(t)}),function(s,a){var i,n=r(s,e),o=r(a,e);return 1===t&&(i=n,n=o,o=i),n===o?0:n<o?-1:1}},setSorting:function(e,t,r){var s=this.state;s.sortKey=e,s.order=t=t||s.order;var a=this.fullCollection,n=!1,o=!1;e||(n=o=!0);var l=this.mode;r=i({side:"client"==l?l:"server",full:!0},r);var c=this._makeComparator(e,t,r.sortValue),u=r.full,h=r.side;return"client"==h?u?(a&&(a.comparator=c),n=!0):(this.comparator=c,o=!0):"server"!=h||u||(this.comparator=c),n&&(this.comparator=null),o&&a&&(a.comparator=null),this}}),w=C.prototype;return C})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:backbone-paginator', location = 'jira-projects-module/sidebar/lib/backbone.paginator.adapter.js' */
define("jira/projects/libs/backbone.paginator",["backbone","underscore","atlassian/libs/factories/backbone.paginator-2.0.2"],function(a,e,n){"use strict";return n(e,a)}),AJS.namespace("Backbone.PageableCollection",null,require("jira/projects/libs/backbone.paginator"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.AbstractList&&(JIRA.Projects.AbstractList={}),"undefined"==typeof JIRA.Projects.AbstractList.Templates&&(JIRA.Projects.AbstractList.Templates={}),JIRA.Projects.AbstractList.Templates.pagination=function(e,t){var a='<ol data-total="'+soy.$$escapeHtml(e.totalPages)+'" class="aui-nav aui-nav-pagination'+(e.cssClass?" "+soy.$$escapeHtml(e.cssClass):"")+'">';if(e.firstPage<e.lastPage){a+='<li class="aui-nav-previous"><a href="'+soy.$$escapeHtml(e.url)+"&amp;page="+(e.currentPage==e.firstPage?"0":soy.$$escapeHtml(e.currentPage-1))+'" '+(e.currentPage==e.firstPage?'aria-disabled="true"':'data-page="'+(e.currentPage==e.firstPage?"0":soy.$$escapeHtml(e.currentPage-1))+'"')+">"+soy.$$escapeHtml("Previous")+"</a></li>";for(var s=e.firstPage,o=e.lastPage+1,r=s;r<o;r++)a+=r==e.currentPage?'<li class="aui-nav-page aui-nav-selected">'+soy.$$escapeHtml(r)+"</li>":'<li><a href="'+soy.$$escapeHtml(e.url)+"&amp;page="+soy.$$escapeHtml(r)+'" data-page="'+soy.$$escapeHtml(r)+'">'+soy.$$escapeHtml(r)+"</a></li>";a+='<li class="aui-nav-next"><a href="'+soy.$$escapeHtml(e.url)+"&amp;page="+(e.currentPage==e.lastPage?soy.$$escapeHtml(e.lastPage):soy.$$escapeHtml(e.currentPage+1))+'"'+(e.currentPage==e.lastPage?'aria-disabled="true"':'data-page="'+(e.currentPage==e.lastPage?soy.$$escapeHtml(e.lastPage):soy.$$escapeHtml(e.currentPage+1))+'"')+">"+soy.$$escapeHtml("Next")+"</a></li>"}return a+="</ol>"},JIRA.Projects.AbstractList.Templates.actionsError=function(e,t){return'<div class="operation-retry '+soy.$$escapeHtml(e.class)+'"><div>'+aui.icons.icon({icon:"info",useIconFont:!0})+'<a href="#" class="operation-retry">'+soy.$$escapeHtml("Retry")+'</a><a href="#" tabindex="0" class="aui-icon aui-icon-small aui-iconfont-remove operation-discard" title="'+soy.$$escapeHtml("Discard")+'">'+soy.$$escapeHtml("Discard")+"</a></div></div>"},JIRA.Projects.AbstractList.Templates.tableLayoutCommon=function(e,t){return'<table id="'+(e.id?soy.$$escapeHtml(e.id):"items-table")+'" class="aui dynamic-table '+(e.class?soy.$$escapeHtml(e.class):"")+'"><tbody class="header">'+soy.$$filterNoAutoescape(e.headerRow)+'</tbody><tbody class="items"></tbody></table>'},JIRA.Projects.AbstractList.Templates.searchLayout=function(e,t){return'<div id="filter-container"></div><div class="header-ending"></div>'+aui.page.pagePanelContent({content:'<div id="content-container"></div>',extraClasses:"aui-page-panel-content-no-table"})+'<div id="submit-container"></div>'},JIRA.Projects.AbstractList.Templates.actionsSuccess=function(e,t){return'<div class="operation-success">'+aui.icons.icon({icon:"approve",useIconFont:!0})+"</div>"},JIRA.Projects.AbstractList.Templates.deleteError=function(e,t){return"<p><b>"+soy.$$escapeHtml(e.name)+"</b> "+soy.$$escapeHtml("couldn\'t be deleted.")+"</p>"+aui.buttons.button({text:"Retry",type:"link",extraClasses:"dynamic_table__retry"})};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/lib/backbone.queryparams.js' */
/*! THIS FILE HAS BEEN MODIFIED BY ATLASSIAN, SEE https://github.com/jhudson8/backbone-query-parameters/pull/63/files */
!function(t,e){"object"==typeof exports&&t.require?module.exports=e(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(r,n){return e(r||t._,n||t.Backbone)}):e(_,Backbone)}(this,function(t,e){function r(e,r,n){t.each(Array.prototype.slice.call(arguments,2),function(t){Object.defineProperty(r,t,{get:function(){return e[t]},set:function(r){e[t]=r}})})}function n(t){var e=t.location,n={};r(e,n,"assign","ancestorOrigins","origin","hash","search","pathname","port","hostname","host","protocol","href","reload"),n.replace=function(){e.replace(t.root+"#"+t.fragment)},n.unPatch=function(){return t.location=e},t.location=n}function a(t){var e=t.history,n={};r(e,n,"length","state","back","forward","go","pushState"),n.replaceState=function(r,n,a){return a=t.root+t.fragment,e.replaceState(r,n,a)},n.unPatch=function(){t.history=e},t.history=n}function i(e,r){var n=e.split("&");t.each(n,function(t){var e=t.split("=");r(e.shift(),e.join("="))})}var o=/^\?(.*)/,s=/\((.*?)\)/g,c=/(\(\?)?:\w+/g,u=/\*\w+/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g,l=/^([^\?]*)/,p=/[\:\*]([^\:\?\/]+)/g,f=/^[#\/]|\s+$/g,m=/\/$/;e.Router.arrayValueSplit="|";var d=function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var r=this.root.replace(m,""),n=this.location.search;t.indexOf(r)||(t=t.substr(r.length)),n&&(t+=n)}else t=this.getHash();return t.replace(f,"")};r.isSupported=function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();var g=e.History.prototype.start,y=e.History.prototype.loadUrl;t.extend(e.History.prototype,{getFragment:d,getQueryParameters:function(e,r){e=d.apply(this,arguments);var n=e.replace(l,""),a=n.match(o);if(a){n=a[1];var s={};return i(n,function(e,r){r=r.replace(/\+/g,"%20"),r=decodeURIComponent(r),s[e]?t.isString(s[e])?s[e]=[s[e],r]:s[e].push(r):s[e]=r}),s}return{}},start:function(){r.isSupported&&(n(this),a(this));try{return g.apply(this,arguments)}finally{this.location.unPatch&&this.location.unPatch(),this.history.unPatch&&this.history.unPatch()}},loadUrl:function(){return this.location&&this.location.unPatch&&this.location.unPatch(),this.history&&this.history.unPatch&&this.history.unPatch(),y.apply(this,arguments)}}),t.extend(e.Router.prototype,{initialize:function(t){this.encodedSplatParts=t&&t.encodedSplatParts},getFragment:d,_routeToRegExp:function(e){var r=u.exec(e)||{index:-1},n=c.exec(e)||{index:-1},a=e.match(p)||[];e=e.replace(h,"\\$&").replace(s,"(?:$1)?").replace(c,function(t,e){return e?t:"([^\\/\\?]+)"}).replace(u,"([^??]*?)"),e+="(\\?.*)?";var i=new RegExp("^"+e+"$");return r.index>=0&&(n>=0?i.splatMatch=r.index-n.index:i.splatMatch=-1),i.paramNames=t.map(a,function(t){return t.substring(1)}),i.namedParameters=this.namedParameters,i},_extractParameters:function(r,n){var a=r.exec(n).slice(1),s={};a.length>0&&t.isUndefined(a[a.length-1])&&a.splice(a.length-1,1);var c=a.length&&a[a.length-1]&&a[a.length-1].match(o);if(c){var u=c[1],h={};if(u){var l=this;i(u,function(t,e){l._setParamValue(t,e,h)})}a[a.length-1]=h,t.extend(s,h)}var p=a.length;if(r.splatMatch&&this.encodedSplatParts){if(r.splatMatch<0)return a;p-=1}for(var f=0;f<p;f++)t.isString(a[f])&&(a[f]=decodeURIComponent(a[f]),r.paramNames&&r.paramNames.length>=f-1&&(s[r.paramNames[f]]=a[f]));return e.Router.namedParameters||r.namedParameters?[s]:a},_setParamValue:function(t,e,r){t=t.replace("[]","");for(var n=t.split("."),a=r,i=0;i<n.length;i++){var o=n[i];i===n.length-1?a[o]=this._decodeParamValue(e,a[o]):a=a[o]=a[o]||{}}},_decodeParamValue:function(r,n){r=r.replace(/\+/g,"%20");var a=e.Router.arrayValueSplit;if(a&&r.indexOf(a)>=0){for(var i=r.split(a),o=i.length-1;o>=0;o--)i[o]?i[o]=decodeURIComponent(i[o]):i.splice(o,1);return i}return r=decodeURIComponent(r),n?t.isArray(n)?(n.push(r),n):[n,r]:r},toFragment:function(e,r){return r&&(t.isString(r)||(r=this._toQueryString(r)),r&&(e+="?"+r)),e},_toQueryString:function(r,n){function a(t){return String(t).replace(i,encodeURIComponent(i))}var i=e.Router.arrayValueSplit;if(!r)return"";n=n||"";var o="";for(var s in r){var c=r[s];if(t.isString(c)||t.isNumber(c)||t.isBoolean(c)||t.isDate(c))c=this._toQueryParam(c),(t.isBoolean(c)||t.isNumber(c)||t.isString(c)||c)&&(o+=(o?"&":"")+this._toQueryParamName(s,n)+"="+a(encodeURIComponent(c)));else if(t.isArray(c)){for(var u="",h=0;h<c.length;h++){var l=this._toQueryParam(c[h]);(t.isBoolean(l)||null!==l)&&(u+=i+a(l))}u&&(o+=(o?"&":"")+this._toQueryParamName(s,n)+"="+u)}else{var p=this._toQueryString(c,this._toQueryParamName(s,n,!0));p&&(o+=(o?"&":"")+p)}}return o},_toQueryParamName:function(t,e,r){return e+t+(r?".":"")},_toQueryParam:function(e){return t.isNull(e)||t.isUndefined(e)?null:e}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/Effects.js' */
define("jira/projects/abstract-list/effects",["jquery"],function(e){"use strict";return{onCollectionRemove:function(t){var i=e.Deferred(),r=this.children.findByModel(t);return r?(r.$el.addClass("transition-destroy"),r.$("td > div").animate({height:0},500,function(){this.removeChildView(r),this.checkEmpty(),i.resolve()}.bind(this))):i.resolve(),i}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/ItemCollectionView.js' */
define("jira/projects/abstract-list/item-collection-view",["jira/projects/abstract-list/effects","jira/projects/libs/marionette","jira/projects/abstract-list/lazy-loading-collection","jquery","underscore"],function(e,t,i,n,l){"use strict";var o=t.CollectionView.extend({tagName:"tbody",initialize:function(e){if(!e.collection instanceof i)throw"Collection should extend LazyLoadingCollection";var t=l.debounce(this._checkScroll,o.SCROLL_DEBOUNCE,!0).bind(this);n(window).on("scroll.infiniteScroll",t),this.checkInterval=setInterval(t,o.CHECK_INTERVAL)},onDestroy:function(){n(window).off("scroll.infiniteScroll"),clearInterval(this.checkInterval)},_checkScroll:function(e){var t=this.children.last();t.$el.isInView()&&this._nextPage(e),JIRA.trace("jira.projects.scroll.checked")},_nextPage:function(e){e&&e.preventDefault();var t=this.collection.nextPage();t&&this.trigger("infiniteScrollEvent",{elementsLoaded:this.collection.elementsLeft().elementsLoaded,elementsLeft:this.collection.elementsLeft().elementsLeft})},_onCollectionRemove:e.onCollectionRemove});return o.SCROLL_DEBOUNCE=50,o.CHECK_INTERVAL=1e3,o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/TableLayoutView.js' */
define("jira/projects/abstract-list/table-layout-view",["jira/projects/libs/marionette","backbone"],function(t,e){"use strict";var i=t.LayoutView.extend({regions:{itemsRegion:".items"},initialize:function(t){this.collection=t.collection,this.submitController=t.submitController},onRender:function(){this.itemsRegion.attachHtml=this._attachHtmlReplaceRegionWrapper;var t=new this.ItemCollectionView({collection:this.collection,submitController:this.submitController,className:"items"});this.itemsRegion.show(t)},_attachHtmlReplaceRegionWrapper:function(t){this.$el.replaceWith(t.el)}});return i});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/queryStringParam.js' */
!function(){"use strict";function t(t,s,i){if(i=i||window.location,t){var a=i.search.substr(1).split("&");s&&(a=a.concat(i.hash.substr(1).split("&")));for(var r=a.length-1;r>=0;r--){var e=a[r].split("=");if(2==e.length&&t===e[0])return decodeURIComponent(e[1].replace(/\+/g," "))}}}AJS.namespace("JIRA.Projects.AbstractList.NavigationUtils"),JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam=t}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/NavigationUtils.js' */
!function(){"use strict";var t=require("atlassian/libs/uri-1.14.1");AJS.namespace("JIRA.Projects.AbstractList.NavigationUtils"),JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported=!!history.pushState,JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot=function(){return JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported?"":JIRA.Projects.AbstractList.NavigationUtils.getRoot()},JIRA.Projects.AbstractList.NavigationUtils.getRoot=function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("selectedItem");return document.location.pathname+(t?"?selectedItem="+t:"?")},JIRA.Projects.AbstractList.NavigationUtils.navigate=function(t){JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported&&(t=JIRA.Projects.AbstractList.NavigationUtils.getRoot()+t),Backbone.history.navigate(t)},JIRA.Projects.AbstractList.NavigationUtils.append=function(i,a){var s=new t(location.href);s=s.addSearch(i,a),history.replaceState(null,"",s.href())}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/FilterModel.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.FilterModel"),JIRA.Projects.AbstractList.FilterModel=Backbone.Model.extend({filterAttributes:[],initialize:function(t){this.pageableCollection=t.pageableCollection,delete this.attributes.pageableCollection},filterCollection:function(){var t=this.pageableCollection.originalCollection;this.pageableCollection.fullCollection.reset(t),this.pageableCollection.getPage("first")},navigate:function(){JIRA.Projects.AbstractList.NavigationUtils.navigate(this.getFilterQueryStringParams()),this.trigger("navigate")},getFilterQueryStringParams:function(){var t=this.filterAttributes.reduce(function(t,e){var i=this.get(e);return i?t+"&"+encodeURIComponent(e)+"="+encodeURIComponent(i):t}.bind(this),"");return JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported||(t=t.substr(1)),t}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/ItemModel.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.ItemModel"),JIRA.Projects.AbstractList.ItemModel=Backbone.Model.extend({})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/ItemView.js' */
define("jira/projects/abstract-list/item-view",["jira/flag","jira/ajs/ajax/ajax-util","jira/projects/abstract-model/submit-model-states","jira/projects/libs/marionette","jira/loading/loading","jquery"],function(t,e,i,r,n,a){var o=r.ItemView.extend({modelEvents:{change:"_modelChange"},events:{"click @ui.retryAddButton":"_retryAddOperation","click @ui.retryDeleteButton":"_retryDeleteOperation","click @ui.retryUpdateButton":"_retryUpdateOperation","click @ui.discard":"_discardOperation"},ui:{retryAddButton:".operation-retry.operation-add a.operation-retry",retryDeleteButton:".operation-retry.operation-delete a.operation-retry",retryUpdateButton:".operation-retry.operation-update a.operation-retry",discard:".operation-retry a.operation-discard"},_modelChange:function(t){t.get("state")===i.ERROR_DELETE&&this._showFlag(),this.render.apply(this,arguments)},listenToElements:function(t){_.each(t,function(t,e){var i=this[t].bind(this);if(i){var r=e.substring(0,e.indexOf(" ")),n=e.substring(r.length+1),a=this._getElement(n);this._onElement(a,r,i)}},this)},_onElement:function(t,e,i){t&&t.length&&t.on(e,i)},_getElement:function(t){if(0===t.indexOf("@ui.")){var e=t.substring(4);return this.ui[e]}return a(t)},onRender:function(){this.unwrapTemplate()},_retryAddOperation:function(t){t.preventDefault(),this.model.trigger("retry-add",this.model)},_retryDeleteOperation:function(t){t.preventDefault(),this.model.trigger("retry-delete",this.model)},_retryUpdateOperation:function(t){t.preventDefault(),this.model.trigger("retry-update",this.model)},_discardOperation:function(t){t.preventDefault(),this.model.discard()},_showLoading:function(){AJS.dim(),n.showLoadingIndicator()},_hideLoading:function(){AJS.undim(),n.hideLoadingIndicator()},_showFlag:function(){0==this.$el.parents(".dynamic-table > .items").length||this.$el.isInView()||(this.flag||(this.flag=t.showErrorMsg(null,JIRA.Projects.AbstractList.Templates.deleteError({name:this.model.get("name")})),a(this.flag).find(".dynamic_table__retry").on("click",function(){this._deleteItemRetry(),this.flag.close()}.bind(this))),this.flag.setAttribute("aria-hidden","false"))}});return o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/Layout.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.Layout"),JIRA.Projects.AbstractList.Layout=JIRA.Projects.Libs.Marionette.LayoutView.extend({onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/LazyLoadingCollection.js' */
define("jira/projects/abstract-list/lazy-loading-collection",["backbone"],function(i){"use strict";var t=i.Collection.extend({collectionClass:null,_findAddingIndex:function(i,t){return 0},initialize:function(i,t){this.originalCollection=new this.collectionClass(t.data),this.fullCollection=new this.collectionClass(this.originalCollection.models),this.nextPage(),this.listenTo(this,"remove",function(){this.originalCollection.length<=1&&this.trigger("collectionChanged")})},nextPage:function(){return!this.isFullyLoaded()&&(this.add(this.fullCollection.slice(this.size(),Math.min(this.size()+t.PAGE_INCREMENT,this.fullCollection.size()))),!this.isFullyLoaded())},isFullyLoaded:function(){return this.size()>=this.fullCollection.size()},updateElement:function(i){var t=i.get("id"),e=i.toJSON(),l=this.fullCollection.get(t);return l&&l.set(e),this.originalCollection.filter(function(i){return i.id==t}).some(function(i){i.set(e)}),l},addElement:function(i){if(this.originalCollection.add(i,{at:this._findAddingIndex(this.originalCollection,i)}),this.filter.elementMatchFilter(i)){var t=this._findAddingIndex(this.fullCollection,i);this.fullCollection.add(i,{at:t}),t<=this.size()&&this.add(i,{at:t})}this.size()<=1&&this.trigger("update"),this.trigger("collectionChanged")},resetFilter:function(i){this.fullCollection.reset(i),this.reset(),this.nextPage()},elementsLeft:function(){return{elementsTotal:this.fullCollection.size(),elementsLoaded:this.size(),elementsLeft:this.fullCollection.size()-this.size()}}});return t.PAGE_INCREMENT=25,t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/PaginationView.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.PaginationView"),JIRA.Projects.AbstractList.PaginationView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.AbstractList.Templates.pagination,ui:{page:"li a"},events:{"click @ui.page":"clickPage"},collectionEvents:{reset:"render"},modelEvents:{change:"render"},onRender:function(){this.unwrapTemplate()},serializeData:function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getRoot()+this.model.getFilterQueryStringParams(),e=_.extend({url:t},this.collection.state);return e.firstPage=Math.max(e.currentPage-5,e.firstPage),e.totalPages=e.lastPage,e.lastPage=Math.min(e.currentPage+5,e.lastPage),e},clickPage:function(t){t.preventDefault();var e=+AJS.$(t.target).attr("data-page");e&&(JIRA.Projects.AbstractList.NavigationUtils.navigate(this.model.getFilterQueryStringParams()+"&page="+e),this.collection.getPage(e),this.trigger("navigate",e))}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/Router.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.Router"),JIRA.Projects.AbstractList.Router=Backbone.Router.extend({initialize:function(){this.route(/(.*)/,"any")},any:function(){}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitController.js' */
define("jira/projects/abstract-list/submit-controller",["jira/projects/libs/marionette"],function(r){var t=r.Controller.extend({});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitModelEvents.js' */
define("jira/projects/abstract-list/submit-model-events",[],function(){var e={SERVER_ERROR:"SubmitModelEvent.serverError"};return Object.freeze(e)});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitModel.js' */
define("jira/projects/abstract-list/submit-model",["backbone","jira/projects/abstract-model/submit-model-states","jquery"],function(t,e,s){var i=t.Model.extend({defaults:{state:e.READY},save:function(i){this.set("state",i||e.IN_PROGRESS);var a=s.Deferred();return t.Model.prototype.save.call(this,[],{attrs:this.toDataJSON()}).done(function(){this.detailsSync().always(function(){this._traceItemAdded(),this.set("state",e.SUCCESSFUL),a.resolve()}.bind(this))}.bind(this)).fail(function(t){this.set("state",e.ERROR_ADD),this._traceItemAdded(),a.reject(t)}.bind(this)),a},_traceItemAdded:function(){JIRA.trace("jira.item.add.finished")},discard:function(){this.get("state")===e.ERROR_ADD?this.destroy({data:{}}):this.get("state")!==e.ERROR_DELETE&&this.get("state")!==e.ERROR_UPDATE||this.set("state",e.READY)},detailsSync:function(){return s.ajax({type:"GET",url:this.detailsPath(),contentType:"application/json"}).done(function(t){this.set(t)}.bind(this))},isStateError:function(){return e.isStateError(this.get("state"))},isStateErrorOrRetrying:function(){return e.isStateErrorOrRetrying(this.get("state"))},addStateTimeout:function(t,e){setTimeout(function(){this.get("state")===t&&this.set("state",e)}.bind(this),5e3)}});return i});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitView.js' */
define("jira/projects/abstract-list/submit-view",["jira/projects/libs/marionette"],function(e){var t=e.ItemView.extend({});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitModelStates.js' */
define("jira/projects/abstract-model/submit-model-states",[],function(){var R=new function(){this.READY="ready",this.IN_PROGRESS="in-progress",this.IN_PROGRESS_ERROR="in-progress-error",this.SUCCESSFUL="successful",this.ERROR_ADD="error-add",this.ERROR_DELETE="error-delete",this.ERROR_UPDATE="error-update",this.STATES_ERROR=[this.ERROR_ADD,this.ERROR_DELETE,this.ERROR_UPDATE],this.STATES_ERROR_RETRYING=this.STATES_ERROR.slice(),this.STATES_ERROR_RETRYING.push(this.IN_PROGRESS_ERROR),this.isStateError=function(R){return this.STATES_ERROR.indexOf(R)>=0},this.isStateErrorOrRetrying=function(R){return this.STATES_ERROR_RETRYING.indexOf(R)>=0}};return Object.freeze(R)});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-metrics', location = 'jira-projects-module/page/project/release/Analytics.js' */
define("jira/projects/release/analytics",[],function(){"use strict";var e=function(e,t){AJS.trigger("analyticsEvent",{name:e,data:t||{}})};return{progressDialogClick:function(){e("jira.projects.release.progress.dialog.click")},navigate:function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)||"unreleased",i=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",!0)||"",r=+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",!0)||1;e("jira.projects.release.navigate",{status:t,containsLength:i.length,page:r})},emptyViewRendered:function(){e("jira.projects.release.empty.view")},releaseLearnMoreClicked:function(){e("jira.projects.release.learn.more.click")},showEditVersion:function(){e("jira.projects.release.edit.show")},editVersionFail:function(){e("jira.projects.release.edit.fail")},editVersionSuccess:function(){e("jira.projects.release.edit.success")}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-data', location = 'jira-projects-module/page/project/release/CalendarParamsData.js' */
define("jira/projects/release/calendar-params-data",["wrm/data"],function(a){return a.claim("com.atlassian.jira.projects.page.release:calendarParams")});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.6.1-factory', location = 'atlassian-jslibs/factories/marionette/1.6.1/marionette-1.6.1-factory.js' */
!function(e){define("atlassian/libs/factories/marionette-1.6.1",function(){return function(t,i){var n=i.Marionette,r={_:t,Backbone:i};e.call(r);var o=i.Marionette;return o.VERSION="1.6.1",i.Marionette=n,o}})}(function(){var e=this.Backbone,t=this._,i=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===i)return delete this._indexByCustom[t],!0},this),delete this._views[i],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(e,t),n=function(e,t,i){"use strict";var n={};return n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,i),n.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},i.isFunction(this.initialize)&&this.initialize(e)};return i.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,n){var r=this.storage.getCommands(e);i.each(r.instances,function(e){t.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,n=e.storageType||this.storageType;t=i.isFunction(n)?new n:n,this.storage=t}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,i),n}(e,e.Marionette,t);(function(e,t,r){"use strict";function o(e){return a.call(e)}function s(e,t){var i=new Error(e);throw i.name=t||"Error",i}var h={};t.Marionette=h,h.$=t.$;var a=Array.prototype.slice;return h.extend=t.Model.extend,h.getOption=function(e,t){if(e&&t){var i;return i=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},h.triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var n="on"+i.replace(t,e),o=this[n];if(r.isFunction(this.trigger)&&this.trigger.apply(this,arguments),r.isFunction(o))return o.apply(this,r.tail(arguments))};return i}(),h.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,n(e)}function i(e){e._isRendered=!0,n(e)}function n(e){e._isShown&&e._isRendered&&o(e)&&r.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function o(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(e,t,i,n){var o=n.split(/\s+/);r.each(o,function(n){var r=e[n];r||s("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,i,r,e)})}function i(e,t,i,n){e.listenTo(t,i,n,e)}function n(e,t,i,n){var o=n.split(/\s+/);r.each(o,function(n){var r=e[n];e.stopListening(t,i,r,e)})}function o(e,t,i,n){e.stopListening(t,i,n,e)}function h(e,t,i,n,o){t&&i&&(r.isFunction(i)&&(i=i.call(e)),r.each(i,function(i,s){r.isFunction(i)?n(e,t,s,i):o(e,t,s,i)}))}e.bindEntityEvents=function(e,n,r){h(e,n,r,i,t)},e.unbindEntityEvents=function(e,t,i){h(e,t,i,o,n)}}(h),h.Callbacks=function(){this._deferred=h.$.Deferred(),this._callbacks=[]},r.extend(h.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(i,n){t&&(i=t),e.call(i,n)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=h.$.Deferred(),this._callbacks=[],r.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),h.Controller=function(e){this.triggerMethod=h.triggerMethod,this.options=e||{},r.isFunction(this.initialize)&&this.initialize(this.options)},h.Controller.extend=h.extend,r.extend(h.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),h.Region=function(e){if(this.options=e||{},this.el=h.getOption(this,"el"),!this.el){var t=new Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},r.extend(h.Region,{buildRegion:function(e,t){var i="string"==typeof e,n="string"==typeof e.selector,o="undefined"==typeof e.regionType,s="function"==typeof e;if(!s&&!i&&!n)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,a;i&&(h=e),e.selector&&(h=e.selector,delete e.selector),s&&(a=e),!s&&o&&(a=t),e.regionType&&(a=e.regionType,delete e.regionType),(i||s)&&(e={}),e.el=h;var l=new a(e);return e.parentEl&&(l.getEl=function(t){var i=e.parentEl;return r.isFunction(i)&&(i=i()),i.find(t)}),l}}),r.extend(h.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||r.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,h.triggerMethod.call(this,"show",e),h.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return h.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),h.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),h.Region.extend=h.extend,h.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return r.each(e,function(e,n){"string"==typeof e&&(e={selector:e}),e.selector&&(e=r.defaults({},e,t));var o=this.addRegion(n,e);i[n]=o},this),i},addRegion:function(t,i){var n,o=r.isObject(i),s=r.isString(i),h=!!i.selector;return n=s||o&&h?e.Region.buildRegion(i,e.Region):r.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,n),this.triggerMethod("region:add",t,n),n},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){r.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){r.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=r.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return r.each(i,function(e){t.prototype[e]=function(){var t=r.values(this._regions),i=[t].concat(r.toArray(arguments));return r[e].apply(r,i)}}),t}(h),h.TemplateCache=function(e){this.templateId=e},r.extend(h.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new h.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=o(arguments),i=t.length;if(i>0)for(e=0;e<i;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),r.extend(h.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=h.$(e).html();return t&&0!==t.length||s("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return r.template(e)}}),h.Renderer={render:function(e,t){if(!e){var i=new Error("Cannot render the template since it's false, null or undefined.");throw i.name="TemplateNotFoundError",i}var n;return(n="function"==typeof e?e:h.TemplateCache.get(e))(t)}},h.View=t.View.extend({constructor:function(e){r.bindAll(this,"render");var i=Array.prototype.slice.apply(arguments);this.options=r.extend({},r.result(this,"options"),r.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(r.result(this,"events")),t.View.prototype.constructor.apply(this,i),h.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:h.triggerMethod,getTemplate:function(){return h.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=h.getOption(this,"templateHelpers");return r.isFunction(t)&&(t=t.call(this)),r.extend(e,t)},normalizeUIKeys:function(e){if("undefined"!=typeof e)return r.each(r.keys(e),function(t){var i=t.split("@ui.");2===i.length&&(e[i[0]+this.ui[i[1]]]=e[t],delete e[t])},this),e},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(r.result(this,"triggers"));return r.each(t,function(t,i){var n=r.isObject(t),o=n?t.event:t;e[i]=function(e){if(e){var i=e.preventDefault,r=e.stopPropagation,s=n?t.preventDefault:i,h=n?t.stopPropagation:r;s&&i&&i.apply(e),h&&r&&r.apply(e)}var a={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,a)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),h.bindEntityEvents(this,this.model,h.getOption(this,"modelEvents")),h.bindEntityEvents(this,this.collection,h.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,r.isFunction(e)&&(e=e.call(this));var i={},n=this.configureTriggers();r.extend(i,e,n),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),h.unbindEntityEvents(this,this.model,h.getOption(this,"modelEvents")),h.unbindEntityEvents(this,this.collection,h.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=r.result(this,"_uiBindings");this.ui={},r.each(r.keys(e),function(t){var i=e[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(r.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),h.ItemView=h.View.extend({constructor:function(){h.View.prototype.constructor.apply(this,o(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),i=h.Renderer.render(t,e);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),h.View.prototype.close.apply(this,o(arguments)),this.triggerMethod("item:closed"))}}),h.CollectionView=h.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),h.View.prototype.constructor.apply(this,o(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(r.each(this._bufferedChildren,function(e){h.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e,t,i){this.closeEmptyView();var n=this.getItemView(e),r=this.collection.indexOf(e);this.addItemView(e,n,r)},onShowCalled:function(){this.children.each(function(e){h.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getItemView(t),this.addItemView(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new t.Model;this.addItemView(i,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return h.getOption(this,"emptyView")},getItemView:function(e){var t=h.getOption(this,"itemView");return t||s("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,i){var n=h.getOption(this,"itemViewOptions");r.isFunction(n)&&(n=n.call(this,e,i));var o=this.buildItemView(e,t,n);return this.addChildViewEventForwarding(o),this.triggerMethod("before:item:added",o),this.children.add(o),this.renderItemView(o,i),this._isShown&&!this.isBuffering&&h.triggerMethod.call(o,"show"),this.triggerMethod("after:item:added",o),o},addChildViewEventForwarding:function(e){var t=h.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var i=o(arguments),n=i[0],s=this.getItemEvents();i[0]=t+":"+n,i.splice(1,0,e),"undefined"!=typeof s&&r.isFunction(s[n])&&s[n].apply(this,i),h.triggerMethod.apply(this,i)},this)},getItemEvents:function(){return r.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var n=r.extend({model:e},i);return new t(n)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(e){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new i},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),h.View.prototype.close.apply(this,o(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),h.CompositeView=h.CollectionView.extend({constructor:function(){h.CollectionView.prototype.constructor.apply(this,o(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(e){var t=h.getOption(this,"itemView")||this.constructor;return t||s("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),h.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return h.Renderer.render(t,e)},appendBuffer:function(e,t){var i=this.getItemViewContainer(e);i.append(t)},appendHtml:function(e,t,i){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var n=this.getItemViewContainer(e);n.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,i=h.getOption(e,"itemViewContainer");if(i){var n=r.isFunction(i)?i.call(this):i;t=e.$(n),t.length<=0&&s("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),h.Layout=h.ItemView.extend({regionType:h.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),h.ItemView.prototype.constructor.call(this,e)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=h.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);h.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=r.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,i={regionType:h.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,i)},_initializeRegions:function(e){var t;this._initRegionManager(),t=r.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new h.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),h.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,o(arguments)),this.options=e||{};var i=h.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,i)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},processAppRoutes:function(e,t){if(t){var i=r.keys(t).reverse();r.each(i,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return h.getOption(this,"controller")},_addAppRoute:function(e,t,i){var n=e[i];if(!n)throw new Error("Method '"+i+"' was not found on the controller");this.route(t,i,r.bind(n,e))}}),h.Application=function(e){this._initRegionManager(),this._initCallbacks=new h.Callbacks,this.vent=new n.EventAggregator,this.commands=new n.Commands,this.reqres=new n.RequestResponse,this.submodules={},r.extend(this,e),this.triggerMethod=h.triggerMethod},r.extend(h.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var i=h.Module;t&&(i=t.moduleClass||i);var n=o(arguments);return n.unshift(this),i.create.apply(i,n)},_initRegionManager:function(){this._regionManager=new h.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}}),h.Application.extend=h.extend,h.Module=function(e,t,i){this.moduleName=e,this.options=r.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=h.triggerMethod,r.isFunction(this.initialize)&&this.initialize(this.options)},h.Module.extend=h.extend,r.extend(h.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(r.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,h.triggerMethod.call(this,"before:stop"),r.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),h.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var n=r.flatten([this,this.app,t,h,h.$,r,i]);e.apply(this,n)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new h.Callbacks,this._finalizerCallbacks=new h.Callbacks}}),r.extend(h.Module,{create:function(e,t,i){var n=e,s=o(arguments);s.splice(0,3),t=t.split(".");var h=t.length,a=[];return a[h-1]=i,r.each(t,function(t,r){var o=n;n=this._getModule(o,t,e,i),this._addModuleDefinition(o,n,a[r],s)},this),n},_getModule:function(e,t,i,n,o){var s=h.Module,a=r.extend({},n);n&&(s=n.moduleClass||s);var l=e[t];return l||(l=new s(t,i,a),e[t]=l,e.submodules[t]=l),l},_addModuleDefinition:function(e,t,i,n){var o,s;r.isFunction(i)?(o=i,s=!0):r.isObject(i)?(o=i.define,s="undefined"==typeof i.startWithParent||i.startWithParent):s=!0,o&&t.addDefinition(o,n),t.startWithParent=t.startWithParent&&s,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),h.Wreqr=n,h.ChildViewContainer=i,h})(this,e,t)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'jira-project-config-plugin/lib/backbone/backbone-amd.js' */
define("jira-project-config/backbone",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/backbone-1.0.0"),i=e("underscore"),n=e("jquery");return r(i,n)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'jira-project-config-plugin/lib/marionettejs/marionette-amd.js' */
define("jira-project-config/marionette",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/marionette-1.6.1"),i=e("jira-project-config/backbone"),t=e("underscore");return r(t,i)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'jira-project-config-plugin/lib/namespace.js' */
AJS.namespace("JIRA.ProjectConfig.Backbone",null,require("jira-project-config/backbone")),AJS.namespace("JIRA.ProjectConfig.Backbone.Marionette",null,require("jira-project-config/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/templates/versions.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Versions&&(JIRA.Templates.Versions={}),JIRA.Templates.Versions.releaseStatus=function(e,s){return e=e||{},""+(e.released?'<span class="aui-icon aui-icon-small aui-iconfont-version icon-default'+(e.archived?" project-config-icon-version-archived":"")+'"></span>':e.archived?'<span class="project-config-icon project-config-icon-version-archived"></span>':'<span class="project-config-icon project-config-icon-version"></span>')},JIRA.Templates.Versions.operations=function(e,s){var a='<a id="version-'+soy.$$escapeHtml(e.version.id)+'-operations-trigger" class="aui-button aui-button-compact aui-button-subtle project-config-operations-trigger" href="#"><span class="aui-icon aui-icon-small aui-iconfont-more icon-default"></span></a><div class="project-config-operations-list aui-list hidden"><ul class="aui-list-section aui-first aui-last">';if(e.version.operations)for(var t=e.version.operations,o=t.length,i=0;i<o;i++){var n=t[i];a+=n.href?'<li class="aui-list-item"><a class="aui-list-item-link '+soy.$$escapeHtml(n.styleClass)+'" href="'+soy.$$escapeHtml(n.href)+'">'+soy.$$escapeHtml(n.label)+"</a></li>":'<li class="aui-list-item"><a class="aui-list-item-link '+soy.$$escapeHtml(n.styleClass)+'" href="#">'+soy.$$escapeHtml(n.label)+"</a></li>"}return a+="</ul></div>"},JIRA.Templates.Versions.editName=function(e,s){return'<input name="name" type="text" class="text" value="'+soy.$$escapeHtml(e.value?e.value:"")+'"  />'+(e.update?"":'<input name="project" type="hidden" value="'+soy.$$escapeHtml(e.project)+'">')},JIRA.Templates.Versions.readStartDate=function(e,s){return e=e||{},""+(e.userStartDate?soy.$$escapeHtml(e.userStartDate):"")},JIRA.Templates.Versions.readReleaseDate=function(e,s){return e=e||{},""+(e.userReleaseDate?soy.$$escapeHtml(e.userReleaseDate):"")},JIRA.Templates.Versions.editStartDate=function(e,s){return e=e||{},'<div class="project-config-date-field"><input id="project-config-version-start-date-field" name="userStartDate" type="text" class="text short-field" value="'+soy.$$escapeHtml(e.userStartDate?e.userStartDate:"")+'" /><a href="#" id="project-config-versions-start-date-trigger" title="'+soy.$$escapeHtml("Select a date")+'"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">'+soy.$$escapeHtml("Select a date")+"</span></a></div>"},JIRA.Templates.Versions.editReleaseDate=function(e,s){return e=e||{},'<div class="project-config-date-field"><input id="project-config-version-release-date-field" name="userReleaseDate" type="text" class="text short-field" value="'+soy.$$escapeHtml(e.userReleaseDate?e.userReleaseDate:"")+'" /><a href="#" id="project-config-versions-release-date-trigger" title="'+soy.$$escapeHtml("Select a date")+'"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">'+soy.$$escapeHtml("Select a date")+"</span></a></div>"},JIRA.Templates.Versions.deleteForm=function(e,s){var a='<h2 class="dialog-title">'+soy.$$escapeHtml("Delete")+" "+soy.$$escapeHtml(e.version.name)+'</h2><form class="aui version-delete" action="#" method="post"><div class="form-body">';if(e.areRelatedIssues)if(e.versions.length){if(a+='<div class="info-message">'+soy.$$escapeHtml("What would you like to do with any issues assigned to this version?")+"</div>",e.relatedIssueCount.issuesAffectedCount){a+='<fieldset class="group"><legend><span>'+soy.$$escapeHtml("Issues affecting")+' (<a id="affects-count" href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid="+soy.$$escapeHtml(e.projectId)+"&amp;version="+soy.$$escapeHtml(e.version.id)+'">'+soy.$$escapeHtml(e.relatedIssueCount.issuesAffectedCount)+'</a>)</span></legend><div class="radio"><input name="affects" value="swap" id="affects-swap" class="radio" checked="checked" type="radio" /><label for="affects-swap">'+soy.$$escapeHtml("Assign them to this version")+'</label> <select id="moveAffectedIssuesTo" name="moveAffectedIssuesTo" class="select">';for(var t=e.versions,o=t.length,i=0;i<o;i++){var n=t[i];a+='<option value="'+soy.$$escapeHtml(n.id)+'">'+soy.$$escapeHtml(n.name)+"</option>"}a+='</select></div><div class="radio"><input name="affects" values="remove" id="affects-remove" class="radio" type="radio"><label for="affects-remove">'+soy.$$escapeHtml("Remove the version")+"</label></div></fieldset>"}if(e.relatedIssueCount.issuesFixedCount){a+='<fieldset class="group"><legend><span>'+soy.$$escapeHtml("Issues fixed in")+' (<a id="fix-count" href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid="+soy.$$escapeHtml(e.projectId)+"&amp;fixfor="+soy.$$escapeHtml(e.version.id)+'">'+soy.$$escapeHtml(e.relatedIssueCount.issuesFixedCount)+'</a>)</span></legend><div class="radio"><input name="fix" value="swap" id="fix-swap" class="radio" checked="checked" type="radio" /><label for="fix-swap">'+soy.$$escapeHtml("Assign them to this version")+'</label> <select id="moveFixIssuesTo" name="moveFixIssuesTo" class="select">';for(var r=e.versions,l=r.length,c=0;c<l;c++){var d=r[c];a+='<option value="'+soy.$$escapeHtml(d.id)+'">'+soy.$$escapeHtml(d.name)+"</option>"}a+='</select></div><div class="radio"><input name="fix" value="remove" id="fix-remove" class="radio" type="radio"><label for="fix-remove">'+soy.$$escapeHtml("Remove the version")+"</label></div></fieldset>"}if(e.relatedIssueCount.issueCountWithCustomFieldsShowingVersion)for(var m=e.relatedIssueCount.customFieldUsage,p=m.length,u=0;u<p;u++){var v=m[u];a+='<fieldset class="group"><legend><span>'+soy.$$escapeHtml(v.fieldName)+' (<a id="custom-'+soy.$$escapeHtml(v.customFieldId)+'-count" href="'+soy.$$escapeHtml(AJS.contextPath())+"/issues/?jql="+soy.$$escapeHtml(v.issueLink)+'">'+soy.$$escapeHtml(v.issueCountWithVersionInCustomField)+'</a>):</span></legend><div class="radio"><input name="customField'+soy.$$escapeHtml(v.customFieldId)+'Action" value="swap" id="custom-swap-'+soy.$$escapeHtml(v.customFieldId)+'" class="radio" checked="checked" type="radio" /><label for="custom-'+soy.$$escapeHtml(v.customFieldId)+'-swap">'+soy.$$escapeHtml("Assign them to this version")+'</label> <select id="move-custom-'+soy.$$escapeHtml(v.customFieldId)+'-to" name="customField'+soy.$$escapeHtml(v.customFieldId)+'MoveTo" class="select">';for(var $=e.versions,f=$.length,g=0;g<f;g++){var y=$[g];a+='<option value="'+soy.$$escapeHtml(y.id)+'">'+soy.$$escapeHtml(y.name)+"</option>"}a+='</select></div><div class="radio"><input name="customField'+soy.$$escapeHtml(v.customFieldId)+'Action" value="remove" id="custom-remove-'+soy.$$escapeHtml(v.customFieldId)+'" class="radio" type="radio"><label for="custom-'+soy.$$escapeHtml(v.customFieldId)+'-remove">'+soy.$$escapeHtml("Remove the version")+"</label></div></fieldset>"}}else{if(a+='<div class="info-message"><p>'+soy.$$escapeHtml("There are issues that have this version selected in one or more fields. If you delete this version, the affected fields in these issues will be set to empty.")+" </p><p>"+soy.$$escapeHtml("The fields where this version is selected are listed below. If you want to review the issues related to a field, click the number next to the field.")+"</p><ul><li>"+soy.$$escapeHtml("Issues affecting")+' (<a id="affects-count" href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid="+soy.$$escapeHtml(e.projectId)+"&amp;version="+soy.$$escapeHtml(e.version.id)+'">'+soy.$$escapeHtml(e.relatedIssueCount.issuesAffectedCount)+"</a>)</li><li>"+soy.$$escapeHtml("Issues fixed in")+' (<a id="fix-count" href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid="+soy.$$escapeHtml(e.projectId)+"&amp;fixfor="+soy.$$escapeHtml(e.version.id)+'">'+soy.$$escapeHtml(e.relatedIssueCount.issuesFixedCount)+"</a>)</li>",e.relatedIssueCount.issueCountWithCustomFieldsShowingVersion)for(var H=e.relatedIssueCount.customFieldUsage,I=H.length,h=0;h<I;h++){var x=H[h];a+="<li>"+soy.$$escapeHtml(x.fieldName)+' (<a id="custom-'+soy.$$escapeHtml(x.customFieldId)+'-count" href="'+soy.$$escapeHtml(AJS.contextPath())+"/issues/?jql="+soy.$$escapeHtml(x.issueLink)+'">'+soy.$$escapeHtml(x.issueCountWithVersionInCustomField)+"</a>)</li>"}a+="</ul></div>"}else a+='<div class="info-message">'+soy.$$escapeHtml(AJS.format("Are you sure you want to delete {0}?",e.version.name))+"</div>";return a+='</div><div class="buttons-container form-footer"><div class="buttons">'+(e.areRelatedIssues?'<input id="submit" class="aui-button aui-button-primary" type="submit" value="'+soy.$$escapeHtml("Delete")+'" />':'<input id="submit" class="aui-button aui-button-primary" type="submit" value="'+soy.$$escapeHtml("Yes")+'" />')+'<a href="#" class="aui-button aui-button-link cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Versions.releaseForm=function(e,s){var a='<h2 class="dialog-title">'+soy.$$escapeHtml("Release version")+": "+soy.$$escapeHtml(e.version.name)+'</h2><form class="aui" action="#" method="post"><div class="form-body">',t=e.projectId?"pid="+e.projectId+"&":"",o=AJS.contextPath()+"/secure/IssueNavigator.jspa?reset=true&mode=hide&"+t+"fixfor="+e.version.id;if(e.errorMessages&&e.errorMessages.length>0){a+='<div class="aui-message error"><span class="aui-icon icon-error"></span><strong>'+soy.$$escapeHtml("Error")+"</strong><ul>";for(var i=e.errors.errorMessages,n=i.length,r=0;r<n;r++){var l=i[r];a+='<li class="error-list-item">'+soy.$$escapeHtml(l)+"</li>"}a+="</ul></div>"}if(e.unresolvedIssuesExist&&e.issuesUnresolvedCount)if(a+='<div class="aui-message warning" id="project-config-version-release-form-unresolved-message"><span class="aui-icon icon-warning"></span><a id="project-config-version-release-form-issues-link" href="'+soy.$$escapeHtml(o)+'">'+soy.$$escapeHtml(AJS.format("{0,choice,1#{0} issue|1\u003c{0} issues}",e.issuesCount))+"</a> "+soy.$$escapeHtml(AJS.format("{0,choice,1#is|1\u003care} in this release:",e.issuesCount))+'<ul><li id="project-config-version-release-form-resolved-issues-count">'+soy.$$escapeHtml(AJS.format("{0,choice,1#{0} resolved issue|1\u003c{0} resolved issues}",e.issuesResolvedCount))+'</li><li id="project-config-version-release-form-unresolved-issues-count">'+soy.$$escapeHtml(AJS.format("{0,choice,1#{0} unresolved issue|1\u003c{0} unresolved issues}",e.issuesUnresolvedCount))+"</li></ul></div>",e.versions.length){a+='<fieldset class="group"><legend><span>'+soy.$$escapeHtml("Unresolved issues")+'</span></legend><div class="radio"><input name="unresolved" id="project-config-version-release-form-unresolved-ignore" class="radio" checked="checked" type="radio" value="ignore"><label for="project-config-version-release-form-unresolved-ignore" id="project-config-version-release-form-unresolved-ignore-label">'+soy.$$escapeHtml("Ignore and proceed with release")+'</label></div><div class="radio"><input name="unresolved" id="project-config-version-release-form-unresolved-move" class="radio" type="radio" value="move"><label for="project-config-version-release-form-unresolved-move" id="project-config-version-release-form-unresolved-move-label">'+soy.$$escapeHtml("Move issues to version")+': </label><select id="moveUnfixedIssuesTo" name="moveUnfixedIssuesTo" class="select long-field">';for(var c=e.versions,d=c.length,m=0;m<d;m++){var p=c[m];a+=soy.$$escapeHtml(p.nextScheduled)+"<option "+(p.nextScheduled?'selected="selected"':"")+' value="'+soy.$$escapeHtml(p.id)+'">'+soy.$$escapeHtml(p.name)+"</option>"}a+="</select></div></fieldset>"}else a+='<p id="project-config-version-release-form-unresolved-ignore-paragraph" class="jira-release-dialog-paragraph">'+soy.$$escapeHtml("Do you want to proceed with the release?")+"</p>";else a+='<p id="project-config-version-release-form-all-issues-resolved" class="jira-release-dialog-paragraph"><a id="project-config-version-release-form-issues-link" href="'+soy.$$escapeHtml(o)+'">'+soy.$$escapeHtml(AJS.format("{0,choice,1#{0} issue|1\u003c{0} issues}",e.issuesCount))+"</a> "+soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("will be released from \u003cstrong\u003e{0}\u003c/strong\u003e","number"==typeof e.projectName?e.projectName:soy.$$escapeHtml(e.projectName))))+"</p>";return a+='<div class="field-group"><label for="project-config-version-release-form-release-date-field">'+soy.$$escapeHtml("Release date")+'</label><input id="project-config-version-release-form-release-date-field" name="userReleaseDate" type="text" class="text medium-field" value="'+soy.$$escapeHtml(e.version.userReleaseDate?e.version.userReleaseDate:"")+'" /> <a href="#" id="project-config-versions-release-form-release-date-trigger" title="'+soy.$$escapeHtml("Select a date")+'"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">'+soy.$$escapeHtml("Select a date")+"</span></a>"+(e.errors.releaseDate?'<div class="error project-config-error" id="project-config-versions-release-form-release-date-error">'+soy.$$escapeHtml(e.errors.releaseDate)+"</div>":"")+'</div></div><input type="hidden" name="version-name" value="'+soy.$$escapeHtml(e.version.name)+'"><input type="hidden" name="issues-count" value="'+soy.$$escapeHtml(e.issuesCount)+'"><input type="hidden" name="unresolved-issues-count" value="'+soy.$$escapeHtml(e.issuesUnresolvedCount)+'"><input type="hidden" name="released" value="true" /><div class="buttons-container form-footer"><div class="buttons"><input class="aui-button" type="submit" id="project-config-version-release-form-submit" value="'+soy.$$escapeHtml("Release")+'" /><a href="#" class="aui-button aui-button-link cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Versions.mergeForm=function(e,s){var a='<h2 class="dialog-title">'+soy.$$escapeHtml("Merge Versions")+'</h2><form class="aui" action="#" method="post"><div class="form-body">';if(e.versions&&e.versions.length>0){if(e.errorMessages&&e.errorMessages.length>0){a+='<div class="aui-message error"><span class="aui-icon icon-error"></span><strong>'+soy.$$escapeHtml("Error")+"</strong><ul>";for(var t=e.errorMessages,o=t.length,i=0;i<o;i++){var n=t[i];a+='<li class="error-list-item">'+soy.$$escapeHtml(n)+"</li>"}a+="</ul></div>"}a+='<div class="aui-message warning"><span class="aui-icon icon-warning"></span>'+soy.$$escapeHtml("WARNING: You cannot un-merge these versions once they have merged.")+'</div><div class="field-group"><label>'+soy.$$escapeHtml("Merging From Versions")+'</label><select multiple id="idsToMerge" name="idsToMerge" class="select">';for(var r=e.versions,l=r.length,c=0;c<l;c++){var d=r[c];a+='<option value="'+soy.$$escapeHtml(d.id)+'">'+soy.$$escapeHtml(d.name)+"</option>"}a+='</select></div><div class="field-group"><label>'+soy.$$escapeHtml("Merge To Version")+'</label><select name="idMergeTo" class="select">';for(var m=e.versions,p=m.length,u=0;u<p;u++){var v=m[u];a+='<option value="'+soy.$$escapeHtml(v.id)+'">'+soy.$$escapeHtml(v.name)+"</option>"}a+="</select></div>"}else a+='<label id="project-config-versions-merge-form-no-versions">'+soy.$$escapeHtml("There are currently no versions for this project.")+"</label>";return a+='</div><input type="hidden" name="released" value="true" /><div class="buttons-container form-footer"><div class="buttons">'+(e.versions&&e.versions.length>0?'<input class="aui-button" type="submit" id="project-config-version-merge-form-submit" value="'+soy.$$escapeHtml("Merge")+'" />':"")+'<a href="#" class="aui-button aui-button-link cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Versions.unreleaseForm=function(e,s){return'<h2 class="dialog-title">'+soy.$$escapeHtml(AJS.format("Unrelease Version {0}",e.version.name))+'</h2><form class="aui" action="#" method="post"><input type="hidden" name="released" value="false" /><div class="form-body"><div class="field-group"><label>'+soy.$$escapeHtml("Release date")+'</label><input name="releaseDate" type="text" class="text" value="'+soy.$$escapeHtml(e.version.releaseDate||"")+'"  /></div></div><div class="buttons-container form-footer"><div class="buttons"><input class="aui-button" type="submit" value="'+soy.$$escapeHtml("Update")+'" /><a href="#" class="aui-button aui-button-link cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"};;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/templates/template-wrapper.js' */
define("jira-project-config/versions/templates",[],function(){"use strict";return window.JIRA.Templates.Versions});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/js/MergeForm.js' */
define("jira-project-config/versions/merge-form",["require"],function(e){"use strict";var r=e("underscore"),s=e("jira-project-config/backbone"),t=e("jira-project-config/versions/templates");return s.View.extend({submit:function(e,s){if(this.$("#idsToMerge + .error").length>0)return this.$("#idsToMerge-textarea").focus(),this.$(".button:disabled").attr("disabled","disabled"),this;this.$(".throbber").addClass("loading");var t=this,o=e.idsToMerge,i=e.idMergeTo;o.length>1&&(o=r.without(o,i)),o&&0!==o.length||s();var n=[],a=o.length,g=!0,c=0,d=function(){var e=t.collection.get(o[c]);e.merge({data:{mergeTo:i},complete:function(e,r){400===e&&r&&r.errorMessages&&(g=!1),r&&r.errorMessages&&r.errorMessages.length>0&&(n=n.concat(r.errorMessages)),c++,c===a?g?s():(t.$(".throbber").removeClass("loading"),t.render(t.ready,{errorMessages:n})):d()}})};return d(),this},render:function(e,r){this.ready=e;var s=this;return r=r||{},s.el.innerHTML=t.mergeForm({versions:s.collection.toJSON(),errorMessages:r.errorMessages||[]}),e.call(s,s.el),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/js/ReleaseForm.js' */
define("jira-project-config/versions/release-form",["require"],function(e){"use strict";var r=e("jquery"),s=e("jira-project-config/backbone"),o=e("jira-project-config/versions/templates"),t=e("jira/api/projects");return s.View.extend({submit:function(e,r,s){this.$(".throbber").addClass("loading");var o=this,t={userReleaseDate:e.userReleaseDate,released:!0,expand:"operations"};return"move"===e.unresolved&&(t.moveUnfixedIssuesTo=e.moveUnfixedIssuesTo),this.model.save(t,{success:function(){r.render(),s()},error:function(r,t,a){if(400===a.status){var n={errors:t.errors,values:e};o.render(o.ready,n)}else s();o.$(".throbber").removeClass("loading")}}),this},render:function(e,s){this.ready=e;var a=this;return s=s||{},this.model.getUnresolvedIssueCount({success:function(n){var i=n.issuesCount,u=n.issuesUnresolvedCount,l=i-u,d=0!==n.issuesUnresolvedCount;a.el.innerHTML=o.releaseForm({version:a.model.toJSON(),unresolvedIssuesExist:d,issuesCount:i,issuesResolvedCount:l,issuesUnresolvedCount:u,versions:a.model.getMoveVersionsJSON(),projectId:r("meta[name=projectId]").attr("content"),projectName:t.getCurrentProjectName(),errors:s.errors||{},errorMessages:s.errorMessages||[]}),e.call(a,a.el);var c=a.$("#project-config-version-release-form-release-date-field")[0];Calendar.setup({singleClick:!0,align:"Bl",firstDay:AJS.params.firstDay,button:a.$("#project-config-versions-release-form-release-date-trigger")[0],inputField:c,currentMillis:AJS.params.currentMillis,useISO8601WeekNumbers:AJS.params.useISO8601,ifFormat:AJS.params.dateFormat}),a.model.get("releaseDate")&&Date.prototype.print&&(c.value=new Date(a.model.get("releaseDate")).print(AJS.params.dateFormat)),r("#moveUnfixedIssuesTo").focus(function(){r("#project-config-version-release-form-unresolved-move").attr("checked","checked")})}}),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/js/DeleteForm.js' */
define("jira-project-config/versions/delete-form",["require"],function(e){"use strict";var s=e("jquery"),t=e("underscore"),o=e("jira-project-config/versions/templates"),c=e("jira-project-config/backbone");return c.View.extend({submit:function(e,s,t){return this.$(".throbber").addClass("loading"),"swap"!==e.fix&&delete e.moveFixIssuesTo,"swap"!==e.affects&&delete e.moveAffectedIssuesTo,this.model.destroy({data:e,success:function(){t()},error:function(){t()}}),this},render:function(e){var c=this;return this.model.getRelatedIssueCount({success:function(i){var n=!0;0===i.issuesFixedCount&&0===i.issuesAffectedCount&&0===i.issueCountWithCustomFieldsShowingVersion&&(n=!1);var r=i.customFieldUsage||[],u=c.model.toJSON().id,d=s("meta[name=projectId]").attr("content");t.each(r,function(e){e.issueLink=encodeURI("project = "+d+" AND '"+e.fieldName+"' = "+u)}),c.el.innerHTML=o.deleteForm({version:c.model.toJSON(),relatedIssueCount:i,areRelatedIssues:n,versions:c.model.getSwapVersionsJSON(),projectId:d}),e.call(c,c.el),s("#moveAffectedIssuesTo").focus(function(){s("#affects-swap").attr("checked","checked")}),s("#moveFixIssuesTo").focus(function(){s("#fix-swap").attr("checked","checked")}),t.each(r,function(e){var t=e.customFieldId;s("#move-custom-"+t+"-to").focus(function(){s("#custom-swap-"+t).attr("checked","checked")})})}}),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/js/namespace-dialogs.js' */
AJS.namespace("JIRA.Admin.Version.DeleteForm",null,require("jira-project-config/versions/delete-form")),AJS.namespace("JIRA.Admin.Version.MergeForm",null,require("jira-project-config/versions/merge-form")),AJS.namespace("JIRA.Admin.Version.ReleaseForm",null,require("jira-project-config/versions/release-form")),AJS.namespace("JIRA.Templates.Versions",null,require("jira-project-config/versions/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'jira-project-config-plugin/utilities/widgets/progressindicator/template.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ProjectConfig&&(JIRA.Templates.ProjectConfig={}),"undefined"==typeof JIRA.Templates.ProjectConfig.ProgressIndicator&&(JIRA.Templates.ProjectConfig.ProgressIndicator={}),JIRA.Templates.ProjectConfig.ProgressIndicator.render=function(e,n){return'<div class="project-config-blanket"></div><div class="project-config-spinner"></div>'};;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'jira-project-config-plugin/utilities/widgets/progressindicator/template-wrapper.js' */
define("jira-project-config/utils/widgets/progress-indicator/templates",[],function(){"use strict";return window.JIRA.Templates.ProjectConfig.ProgressIndicator});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'jira-project-config-plugin/utilities/widgets/progressindicator/view.js' */
define("jira-project-config/utils/widgets/progress-indicator",["require"],function(e){"use strict";var r=e("jira-project-config/marionette"),i=e("jira-project-config/utils/widgets/progress-indicator/templates"),t=40,n=440;return r.ItemView.extend({className:"project-config-progress-indicator-blanket",template:i.render,ui:{spinner:".project-config-spinner"},onBeforeClose:function(){clearInterval(this._intervalID)},onRender:function(){function e(){r=(r-t)%n,i.ui.spinner.css("background-position","0 "+r+"px")}var r=0,i=this;clearInterval(this._intervalID),this._intervalID=setInterval(e,50)}})}),AJS.namespace("JIRA.ProjectConfig.ProgressIndicator.View",null,require("jira-project-config/utils/widgets/progress-indicator"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'jira-project-config-plugin/utilities/region.js' */
define("jira-project-config/utils/region",["jira-project-config/marionette","jira/util/events","jira/util/events/types","jira/util/events/reasons"],function(e,i,t,n){"use strict";return e.Region.extend({initialize:function(){this.listenTo(this,"show",function(){i.trigger(t.NEW_CONTENT_ADDED,[this.$el,n.contentRefreshed])})}})}),AJS.namespace("JIRA.ProjectConfig.Region",null,require("jira-project-config/utils/region"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'jira-project-config-plugin/utilities/virtual-region.js' */
define("jira-project-config/utils/virtual-region",["jira-project-config/utils/region","jira-project-config/marionette","underscore","jquery"],function(i,e,t,r){"use strict";return i.extend({initialize:function(e){this.target=e.target,delete e.target,i.prototype.initialize.apply(this,arguments)},show:function(i){var n=i.isClosed||t.isUndefined(i.$el),o=i!==this.currentView;return this.currentView&&(n||o)&&(this.stub=r('<div style="display: none"></div>'),this.currentView.$el.replaceWith(this.stub)),e.Region.prototype.show.apply(this,arguments)},open:function(i){var e=this.stub||this.$el.find(this.target);e.replaceWith(i.el)}})}),AJS.namespace("JIRA.ProjectConfig.VirtualRegion",null,require("jira-project-config/utils/virtual-region"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'jira-project-config-plugin/utilities/utils.js' */
define("jira-project-config/utils",["jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","wrm/context-path","underscore","jquery"],function(e,t,r,n,o){var a="2",i=r()+"/rest/api/"+a;return{REST_VERSION:a,REST_BASE_URL:i,getRestVersion:function(){return a},getRestBaseUrl:function(){return i},getProjectKey:function(){return o("meta[name=projectKey]").attr("content")},getKey:function(){return o("meta[name=projectKey]").attr("content")},getProjectId:function(){return o("meta[name=projectId]").attr("content")},getId:function(){return o("meta[name=projectId]").attr("content")},convertXHRToSmartAjaxResult:function(e){var r=e.status>=400?"error":"success";return t.SmartAjaxResult(e,(new Date).getTime(),r,JSON.parse(e.responseText))},openDialogForRow:function(t,r,o,a){a=a||{};var i=new t({model:r.model}),c=new e(n.extend({id:o,content:function(e){i.render(function(t){e(t)})},submitHandler:function(e){i.submit(this.$form.serializeObject(),r,function(){c.hide()}),e.preventDefault()}},a));return c.show(),c}}}),AJS.namespace("JIRA.REST_VERSION",null,require("jira-project-config/utils").getRestVersion()),AJS.namespace("JIRA.REST_BASE_URL",null,require("jira-project-config/utils").getRestBaseUrl()),AJS.namespace("JIRA.ProjectConfig.getKey",null,require("jira-project-config/utils").getProjectKey),AJS.namespace("JIRA.ProjectConfig.getId",null,require("jira-project-config/utils").getProjectId),AJS.namespace("AJS.convertXHRToSmartAjaxResult",null,require("jira-project-config/utils").convertXHRToSmartAjaxResult),AJS.namespace("AJS.openDialogForRow",null,require("jira-project-config/utils").openDialogForRow);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-class-names', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/class-names.js' */
("undefined"===typeof window?global:window).__17e04bba0bef0009cc832216dc2470d2=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={NO_VALUE:"aui-restfultable-editable-no-value",NO_ENTRIES:"aui-restfultable-no-entires",RESTFUL_TABLE:"aui-restfultable",ROW:"aui-restfultable-row",READ_ONLY:"aui-restfultable-readonly",ACTIVE:"aui-restfultable-active",ALLOW_HOVER:"aui-restfultable-allowhover",FOCUSED:"aui-restfultable-focused",MOVEABLE:"aui-restfultable-movable",
DISABLED:"aui-restfultable-disabled",SUBMIT:"aui-restfultable-submit",CANCEL:"aui-restfultable-cancel",EDIT_ROW:"aui-restfultable-editrow",CREATE:"aui-restfultable-create",DRAG_HANDLE:"aui-restfultable-draghandle",ORDER:"aui-restfultable-order",EDITABLE:"aui-restfultable-editable",ERROR:"error",DELETE:"aui-restfultable-delete",LOADING:"loading"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-create-view', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/custom-create-view.js' */
("undefined"===typeof window?global:window).__226d5785d36c6f3d2eaa19d9b986ea68=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-edit-view', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/custom-edit-view.js' */
("undefined"===typeof window?global:window).__a88f71998f64176b4467b73bf7f68708=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-read-view', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/custom-read-view.js' */
("undefined"===typeof window?global:window).__54897143fc7cd42cd80d313dd2bfdf55=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-data-keys', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/data-keys.js' */
("undefined"===typeof window?global:window).__b68b83266eb028cf402de39c4933799b=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={ENABLED_SUBMIT:"enabledSubmit",ROW_VIEW:"RestfulTable_Row_View"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-serializetoobject', location = 'auiplugin/node_modules/@atlassian/aui/src/js-vendor/jquery/serializetoobject.js' */
("undefined"===typeof window?global:window).__c972538512dcf935ab0c75d63e2e3cff=function(){jQuery.fn.serializeObject=function(){var a={};this.find(":input:not(:button):not(:submit):not(:radio):not('select[multiple]')").each(function(){""!==this.name&&(null===this.value&&(this.value=""),a[this.name]=this.value.match(/^(tru|fals)e$/i)?"true"==this.value.toLowerCase():this.value)});this.find("input:radio:checked").each(function(){a[this.name]=this.value});this.find("select[multiple]").each(function(){var c=
jQuery(this),b=c.val();a[this.name]=c.data("aui-ss")?b?b[0]:"":null!==b?b:[]});return a};return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-events', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/events.js' */
("undefined"===typeof window?global:window).__f9e062e0834111cb42fed4e788d40075=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={REORDER_SUCCESS:"RestfulTable.reorderSuccess",ROW_ADDED:"RestfulTable.rowAdded",ROW_REMOVED:"RestfulTable.rowRemoved",EDIT_ROW:"RestfulTable.switchedToEditMode",SERVER_ERROR:"RestfulTable.serverError",CREATED:"created",UPDATED:"updated",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",SAVE:"save",MODAL:"modal",MODELESS:"modeless",CANCEL:"cancel",
CONTENT_REFRESHED:"contentRefreshed",RENDER:"render",FINISHED_EDITING:"finishedEditing",VALIDATION_ERROR:"validationError",SUBMIT_STARTED:"submitStarted",SUBMIT_FINISHED:"submitFinished",INITIALIZED:"initialized",ROW_INITIALIZED:"rowInitialized",ROW_EDIT:"editRow"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-throbber', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/throbber.js' */
("undefined"===typeof window?global:window).__f736a94af005df464b5cb85d70aeb4be=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return'<span class="aui-restfultable-throbber"></span>'};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-edit-row', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/edit-row.js' */
("undefined"===typeof window?global:window).__306e5d088ae3093bce3a4ccc028d1000=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var g={};"use strict";Object.defineProperty(g,"__esModule",{value:!0});var j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c=f(__307d3e18fd611f85395c67cddeb1fe24);__c972538512dcf935ab0c75d63e2e3cff;var k=
f(__e3ce9f42f29f6bd2118d84461512f4a4),l=f(__17e04bba0bef0009cc832216dc2470d2),m=f(__b68b83266eb028cf402de39c4933799b),n=f(__f9e062e0834111cb42fed4e788d40075);f(__d74c881c8f23921c15438d0f30c99f80);var o=f(__f736a94af005df464b5cb85d70aeb4be);g.default=k.default.View.extend({tagName:"tr",events:{focusin:"_focus",click:"_focus",keyup:"_handleKeyUpEvent"},initialize:function(a){this.$el=(0,c.default)(this.el);this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;
this.isCreateRow=a.isCreateRow;this.allowReorder=a.allowReorder;this.events["click ."+this.classNames.CANCEL]="_cancel";this.delegateEvents();a.isUpdateMode?this.isUpdateMode=!0:(this._modelClass=a.model,this.model=new this._modelClass);this.fieldFocusSelector=a.fieldFocusSelector;this.bind(this._event.CANCEL,function(){this.disabled=true}).bind(this._event.SAVE,function(a){this.disabled||this.submit(a)}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.$el.removeClass(this.classNames.FOCUSED);
this.disable()}).bind(this._event.SUBMIT_STARTED,function(){this._submitStarted()}).bind(this._event.SUBMIT_FINISHED,function(){this._submitFinished()})},defaultColumnRenderer:function(a){if(!1!==a.allowEdit)return(0,c.default)("<input type='text' />").addClass("text").attr({name:a.name,value:a.value});if(a.value)return document.createTextNode(a.value)},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},_handleKeyUpEvent:function(a){27===a.keyCode&&this.trigger(this._event.CANCEL)},
_cancel:function(a){this.trigger(this._event.CANCEL);a.preventDefault();return this},_submitStarted:function(){this.submitting=!0;this.showLoading().disable().delegateEvents({});return this},_submitFinished:function(){this.submitting=!1;this.hideLoading().enable().delegateEvents(this.events);return this},_focus:function(a){this.hasFocus()||this.trigger(this._event.FOCUS,a.target.name);return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(a){this.enable();
a?a=this.$el.find(this.fieldFocusSelector(a)):(a=this.$el.find(this.classNames.ERROR+":first"),a=0===a.length?this.$el.find(":input:text:first"):a.parent().find(":input"));this.$el.addClass(this.classNames.FOCUSED);a.focus().trigger("select");return this},disable:function(){var a,b;c.default.browser.mozilla&&(b=this.$el.find(":submit"),b.length&&(a=(0,c.default)("<input type='submit' class='"+this.classNames.SUBMIT+"' />").addClass(b.attr("class")).val(b.val()).data(this.dataKeys.ENABLED_SUBMIT,b),
b.replaceWith(a)));this.$el.addClass(this.classNames.DISABLED).find(":submit").attr("disabled","disabled");return this},enable:function(){var a,b;c.default.browser.mozilla&&(a=this.$el.find(this.classNames.SUBMIT),(b=a.data(this.dataKeys.ENABLED_SUBMIT))&&a.length&&a.replaceWith(b));this.$el.removeClass(this.classNames.DISABLED).find(":submit").removeAttr("disabled");return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);
return this},hasUpdates:function(){return!!this.mapSubmitParams(this.serializeObject())},serializeObject:function(){var a=this.$el;return a.serializeObject?a.serializeObject():a.serialize()},mapSubmitParams:function(a){return this.model.changedAttributes(a)},submit:function(a){var b=this,h;document.activeElement!==window&&(0,c.default)(document.activeElement).blur();if(this.isUpdateMode){if(h=this.mapSubmitParams(this.serializeObject()),!h)return b.trigger(b._event.CANCEL)}else this.model.clear(),
h=this.mapSubmitParams(this.serializeObject());this.trigger(this._event.SUBMIT_STARTED);this.model.save(h,{success:function(){b.isUpdateMode?b.trigger(b._event.UPDATED,b.model,a):(b.trigger(b._event.CREATED,b.model.toJSON()),b.model=new b._modelClass,b.render({errors:{},values:{}}),b.trigger(b._event.FOCUS));b.trigger(b._event.SUBMIT_FINISHED)},error:function(a,c,h){400===h.status&&(b.renderErrors(c.errors),b.trigger(b._event.VALIDATION_ERROR,c.errors));b.trigger(b._event.SUBMIT_FINISHED)},silent:!0});
return this},renderError:function(a,b){return(0,c.default)("<div />").attr("data-field",a).addClass(this.classNames.ERROR).text(b)},renderErrors:function(a){var b=this;this.$("."+this.classNames.ERROR).remove();a&&c.default.each(a,function(a,c){b.$el.find("[name='"+a+"']").closest("td").append(b.renderError(a,c))});return this},render:function(a){var b=this;this.$el.empty();this.allowReorder&&(0,c.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(b.$el);
c.default.each(this.columns,function(f,d){var e,i;e=a.values[d.id];var g=[{name:d.id,value:e,allowEdit:d.allowEdit},a.values,b.model];e&&b.$el.attr("data-"+d.id,e);e=b.isCreateRow&&d.createView?(new d.createView({model:b.model})).render(g[0]):d.editView?(new d.editView({model:b.model})).render(g[0]):b.defaultColumnRenderer.apply(b,g);i=(0,c.default)("<td />");"object"===("undefined"===typeof e?"undefined":j(e))&&e.done?e.done(function(a){i.append(a)}):i.append(e);d.styleClass&&i.addClass(d.styleClass);
i.appendTo(b.$el)});this.$el.append(this.renderOperations(a.update,a.values)).addClass(this.classNames.ROW+" "+this.classNames.EDIT_ROW);this.trigger(this._event.RENDER,this.$el,a.values);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this},renderOperations:function(a){var b=(0,c.default)('<td class="aui-restfultable-operations" />');a?b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Update"})).append((0,
c.default)('<a class="aui-button aui-button-link" href="#" />').addClass(this.classNames.CANCEL).text("Cancel").attr({accesskey:this.cancelAccessKey})):b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Add"}));return b.add((0,c.default)('<td class="aui-restfultable-status" />').append((0,o.default)()))}});return g=g["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-events', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/events.js' */
("undefined"===typeof window?global:window).__1a99a68c34e660050a094f87fb28903d=function(){function g(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){(0,h.default)(j.default).trigger(a,b)}function e(a,b){(0,h.default)(j.default).bind(a,b)}function f(a,b,c){(0,h.default)(b).trigger(a,c);d(a,c);b.id&&d(b.id+"-"+a,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.triggerEvtForInst=b.triggerEvt=b.bindEvt=void 0;var h=g(__307d3e18fd611f85395c67cddeb1fe24),a;a=__c8cfa00f1eba9ac7af89ee3d0d33961d;
if(!a||!a.__esModule){var c={};if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(c[i]=a[i]);c.default=a;a=c}var j=g(__fd277fcde858b82a198666a405e85600),c=g(__4d02fe17b8e885a34493e34af3d145dd);b.bindEvt=e=a.fn(e,"bindEvt",{sinceVersion:"5.8.0"});b.triggerEvt=d=a.fn(d,"triggerEvt",{sinceVersion:"5.8.0"});b.triggerEvtForInst=f=a.fn(f,"triggerEvtForInst",{sinceVersion:"5.8.0"});(0,c.default)("bindEvt",e);(0,c.default)("triggerEvt",d);(0,c.default)("triggerEvtForInst",f);b.bindEvt=
e;b.triggerEvt=d;b.triggerEvtForInst=f;return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-entry-model', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/entry-model.js' */
("undefined"===typeof window?global:window).__928a2470c59a6ae17c3b26224648a948=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var i={};"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=f(__307d3e18fd611f85395c67cddeb1fe24),m=__1a99a68c34e660050a094f87fb28903d,
j=f(__922acd0053a6de3ea4c53d8902766ab6),h=f(__e3ce9f42f29f6bd2118d84461512f4a4),n=f(__f9e062e0834111cb42fed4e788d40075),k=h.default.Model.extend({sync:function(a,b,d){var e=this,c=d.error;d.error=function(a){e._serverErrorHandler(a,this);c&&c.apply(this,arguments)};return h.default.sync.apply(h.default,arguments)},save:function(a,b){var b=b||{},d=this,e,c=b.error,f=b.success;b.error=function(a,b){var e=g.default.parseJSON(b.responseText||b.data);c&&c.call(d,d,e,b)};this.isNew()?h.default.Model.prototype.save.call(this,
a,b):a&&(e=k.extend({url:this.url()}),e=new e({id:this.id}),e.save=h.default.Model.prototype.save,b.success=function(a,b){d.clear().set(a.toJSON());f&&f.call(d,d,b)},e.save(a,b))},destroy:function(a){var a=a||{},b=this,d=this.url(),e;a.data&&(e=g.default.param(a.data));""!==e&&(d=d+"?"+e);g.default.ajax({url:d,type:"DELETE",dataType:"json",contentType:"application/json",success:function(c){b.collection&&b.collection.remove(b);a.success&&a.success.call(b,c)},error:function(c){b._serverErrorHandler(c,
this);a.error&&a.error.call(b,c)}});return this},changedAttributes:function(a){var b={},d=this.toJSON();g.default.each(a,function(a,c){d[a]?d[a]&&d[a]!==c&&("object"===("undefined"===typeof c?"undefined":l(c))?j.default.isEqual(c,d[a])||(b[a]=c):b[a]=c):"string"===typeof c?""!==g.default.trim(c)&&(b[a]=c):g.default.isArray(c)?0!==c.length&&(b[a]=c):b[a]=c});if(!j.default.isEmpty(b))return this.addExpand(b),b},addExpand:function(){},_serverErrorHandler:function(a,b){var d;400!==a.status&&(d=g.default.parseJSON(a.responseText||
a.data),(0,m.triggerEvtForInst)(n.default.SERVER_ERROR,this,[d,a,b]))},fetch:function(a){a=a||{};this.clear();h.default.Model.prototype.fetch.call(this,a)}});i.default=k;return i=i["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-row', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/row.js' */
("undefined"===typeof window?global:window).__db1289144ca525c25c4d90561fcced7d=function(){function e(a){return a&&a.__esModule?a:{"default":a}}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var b=e(__307d3e18fd611f85395c67cddeb1fe24),j;var c=__8eca5e5171c0c22be18ea931ed65c747;if(c&&c.__esModule)j=c;else{var k={};if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(k[d]=c[d]);k.default=c;j=k}d=e(__e3ce9f42f29f6bd2118d84461512f4a4);var l=e(__17e04bba0bef0009cc832216dc2470d2),
m=e(__b68b83266eb028cf402de39c4933799b),n=e(__f9e062e0834111cb42fed4e788d40075);e(__d74c881c8f23921c15438d0f30c99f80);var o=e(__f736a94af005df464b5cb85d70aeb4be);h.default=d.default.View.extend({tagName:"tr",events:{"click .aui-restfultable-editable":"edit"},initialize:function(a){a=a||{};this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;this.allowEdit=a.allowEdit;this.allowDelete=a.allowDelete;if(!this.events["click .aui-restfultable-editable"])throw Error("It appears you have overridden the events property. To add events you will need to usea work around. https://github.com/documentcloud/backbone/issues/244");
this.index=a.index||0;this.deleteConfirmation=a.deleteConfirmation;this.allowReorder=a.allowReorder;this.$el=(0,b.default)(this.el);this.bind(this._event.CANCEL,function(){this.disabled=!0}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.unfocus()}).bind(this._event.MODAL,function(){this.$el.addClass(this.classNames.ACTIVE)}).bind(this._event.MODELESS,function(){this.$el.removeClass(this.classNames.ACTIVE)})},renderDragHandle:function(){return'<span class="'+
this.classNames.DRAG_HANDLE+'"></span></td>'},defaultColumnRenderer:function(a){if(a.value)return document.createTextNode(a.value.toString())},sync:function(a){var b=this;this.model.addExpand(a);this.showLoading();this.model.save(a,{success:function(){b.hideLoading().render();b.trigger(b._event.UPDATED)},error:function(){b.hideLoading()}});return this},refresh:function(a,b){var c=this;this.showLoading();this.model.fetch({success:function(){c.hideLoading().render();a&&a.apply(this,arguments)},error:function(){c.hideLoading();
b&&b.apply(this,arguments)}});return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(){(0,b.default)(this.el).addClass(this.classNames.FOCUSED);return this},unfocus:function(){(0,b.default)(this.el).removeClass(this.classNames.FOCUSED);return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);return this},edit:function(a){a=(0,b.default)(a.target).is("."+
this.classNames.EDITABLE)?(0,b.default)(a.target).attr("data-field-name"):(0,b.default)(a.target).closest("."+this.classNames.EDITABLE).attr("data-field-name");this.trigger(this._event.ROW_EDIT,a);return this},renderOperations:function(){var a=this;if(!1!==this.allowDelete)return(0,b.default)("<a href='#' class='aui-button' />").addClass(this.classNames.DELETE).text("Delete").click(function(b){b.preventDefault();a.destroy()})},destroy:function(){if(this.deleteConfirmation){var a=
j.popup(400,200,"delete-entity-"+this.model.get("id"));a.element.html(this.deleteConfirmation(this.model.toJSON()));a.show();a.element.find(".cancel").click(function(){a.hide()});a.element.find("form").submit(_.bind(function(b){a.hide();this.model.destroy();b.preventDefault()},this))}else this.model.destroy()},render:function(){var a=this,c=this.model.toJSON(),e=(0,b.default)("<td class='aui-restfultable-operations' />").append(this.renderOperations({},c)),d=(0,b.default)("<td class='aui-restfultable-status' />").append((0,
o.default)());this.$el.removeClass(this.classNames.DISABLED+" "+this.classNames.FOCUSED+" "+this.classNames.LOADING+" "+this.classNames.EDIT_ROW).addClass(this.classNames.READ_ONLY).empty();this.allowReorder&&(0,b.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(a.$el);this.$el.attr("data-id",this.model.id);b.default.each(this.columns,function(e,f){var g,d=(0,b.default)("<td />");g=c[f.id];var i=f.fieldName||f.id,h=[{name:i,value:g,allowEdit:f.allowEdit},
c,a.model];g&&a.$el.attr("data-"+f.id,g);g=f.readView?(new f.readView({model:a.model})).render(h[0]):a.defaultColumnRenderer.apply(a,h);if(!1!==a.allowEdit&&!1!==f.allowEdit){if(i=(0,b.default)("<span />").addClass(a.classNames.EDITABLE).append('<span class="aui-icon aui-icon-small aui-iconfont-edit"></span>').append(g).attr("data-field-name",i),d=(0,b.default)("<td />").append(i).appendTo(a.$el),!g||""==b.default.trim(g))d.addClass(a.classNames.NO_VALUE),i.html((0,b.default)("<em />").text(this.emptyText||
"Enter value"))}else d.append(g);f.styleClass&&d.addClass(f.styleClass);d.appendTo(a.$el)});this.$el.append(e).append(d).addClass(this.classNames.ROW+" "+this.classNames.READ_ONLY);this.trigger(this._event.RENDER,this.$el,c);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this}});return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table.js' */
("undefined"===typeof window?global:window).__abf29ef092b15abcf6c6c04fa65a04b4=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function l(a,b,c){(0,e.default)(b).trigger(a,c);(0,e.default)(document).trigger(a,c);b.id&&(a=b.id+"_"+a,(0,e.default)(document).trigger(a,c))}var m={};"use strict";Object.defineProperty(m,"__esModule",{value:!0});var e=f(__307d3e18fd611f85395c67cddeb1fe24),n;var h=__cf890abdf040e0993fb71f2f839bc972;if(h&&h.__esModule)n=h;else{var j={};if(null!=h)for(var k in h)Object.prototype.hasOwnProperty.call(h,
k)&&(j[k]=h[k]);j.default=h;n=j}var o=f(__e3ce9f42f29f6bd2118d84461512f4a4),r=f(__17e04bba0bef0009cc832216dc2470d2);k=f(__226d5785d36c6f3d2eaa19d9b986ea68);var h=f(__a88f71998f64176b4467b73bf7f68708),j=f(__54897143fc7cd42cd80d313dd2bfdf55),s=f(__b68b83266eb028cf402de39c4933799b),t=f(__306e5d088ae3093bce3a4ccc028d1000),p=f(__928a2470c59a6ae17c3b26224648a948),u=f(__f9e062e0834111cb42fed4e788d40075),w=f(__4d02fe17b8e885a34493e34af3d145dd);f(__d74c881c8f23921c15438d0f30c99f80);var q=f(__db1289144ca525c25c4d90561fcced7d),
v=f(__f736a94af005df464b5cb85d70aeb4be),g=o.default.View.extend({initialize:function(a){var b=this;b.options=e.default.extend(!0,b._getDefaultOptions(a),a);b.id=this.options.id;b._event=u.default;b.classNames=r.default;b.dataKeys=s.default;this.$table=(0,e.default)(a.el).addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(b.classNames.LOADING);this.$table.wrapAll("<form class='aui' action='#' />");this.$thead=(0,e.default)("<thead/>");this.$theadRow=
(0,e.default)("<tr />").appendTo(this.$thead);this.$tbody=(0,e.default)("<tbody/>");if(!this.$table.length)throw Error("RestfulTable: Init failed! The table you have specified ["+this.$table.selector+"] cannot be found.");if(!this.options.columns)throw Error("RestfulTable: Init failed! You haven't provided any columns to render.");this.showGlobalLoading();this.options.columns.forEach(function(a){var d=e.default.isFunction(a.header)?a.header():a.header;"undefined"===typeof d&&(n.warn("You have not specified [header] for column ["+
a.id+"]. Using id for now..."),d=a.id);b.$theadRow.append("<th>"+d+"</th>")});b.$theadRow.append("<th></th><th></th>");this._models=this._createCollection();this._rowClass=this.options.views.row;this.editRows=[];this.$table.closest("form").submit(function(a){b.focusedRow&&b.focusedRow.trigger(b._event.SAVE);a.preventDefault()});this.options.allowReorder&&(this.$theadRow.prepend("<th />"),this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(a,d){var i=(0,e.default)("<div/>").attr("class",
d.attr("class")).addClass(b.classNames.MOVEABLE);d.children().each(function(){var a=(0,e.default)(this),b=parseInt(0+a.css("border-left-width"),10),c=parseInt(0+a.css("border-right-width"),10),b=a[0].clientWidth+b+c;i.append((0,e.default)("<div/>").html(a.html()).attr("class",a.attr("class")).width(b))});i=(0,e.default)("<div class='aui-restfultable-readonly'/>").append(i);i.css({left:d.offset().left});i.appendTo(document.body);return i},start:function(a,d){var i=d.helper[0].clientHeight,f=d.placeholder.find("td");
d.item.addClass(b.classNames.MOVEABLE).children().each(function(a){(0,e.default)(this).width(f.eq(a).width())});var g='<td colspan="'+b.getColumnCount()+'">&nbsp;</td>';d.placeholder.html(g).css({height:i,visibility:"visible"});b.getRowFromElement(d.item[0]).trigger(b._event.MODAL)},stop:function(a,d){if((0,e.default)(d.item[0]).is(":visible"))d.item.removeClass(b.classNames.MOVEABLE).children().attr("style",""),d.placeholder.removeClass(b.classNames.ROW),b.getRowFromElement(d.item[0]).trigger(b._event.MODELESS)},
update:function(a,d){var e={row:b.getRowFromElement(d.item[0]),item:d.item,nextItem:d.item.next(),prevItem:d.item.prev()};b.move(e)},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8E3}),this.$tbody.bind("selectstart mousedown",function(a){return!(0,e.default)(a.target).is("."+b.classNames.DRAG_HANDLE)}));!1!==this.options.allowCreate&&(this._createRow=(new this.options.views.editRow({columns:this.options.columns,isCreateRow:!0,model:this.options.model.extend({url:function(){return b.options.resources.self}}),
cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey,allowReorder:this.options.allowReorder,fieldFocusSelector:this.options.fieldFocusSelector})).bind(this._event.CREATED,function(a){b.options.addPosition==void 0&&b.options.createPosition==="bottom"||b.options.addPosition==="bottom"?b.addRow(a):b.addRow(a,0)}).bind(this._event.VALIDATION_ERROR,function(){this.trigger(b._event.FOCUS)}).render({errors:{},values:{}}),this.$create=(0,e.default)('<tbody class="'+this.classNames.CREATE+
'" />').append(this._createRow.el),this._applyFocusCoordinator(this._createRow),this._createRow.trigger(this._event.FOCUS));this._models.bind("remove",function(a){b.getRows().forEach(function(d){if(d.model===a){d.hasFocus()&&b._createRow&&b._createRow.trigger(b._event.FOCUS);b.removeRow(d)}})});this.fetchInitialResources()},fetchInitialResources:function(){var a=this;e.default.isFunction(this.options.resources.all)?this.options.resources.all(function(b){a.populate(b)}):e.default.get(this.options.resources.all,
function(b){a.populate(b)})},move:function(a){var b=this,c=function(a){return a.length?{after:b.getRowFromElement(a).model.url()}:{position:"First"}};a.row&&(c=b.options.reverseOrder?c(a.nextItem):c(a.prevItem),e.default.ajax({url:a.row.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(c),complete:function(){a.row.hideLoading()},success:function(a){AJS.triggerEvtForInst(b._event.REORDER_SUCCESS,b,[a])},error:function(a){var c=e.default.parseJSON(a.responseText||
a.data);AJS.triggerEvtForInst(b._event.SERVER_ERROR,b,[c,a,this])}}),a.row.showLoading())},_createCollection:function(){var a=this;return new (this.options.Collection.extend({sort:function(b){b||(b={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.tableRows=a.getRows();this.models=this.sortBy(this.comparator);this.tableRows=void 0;b.silent||this.trigger("refresh",this,b);return this},remove:function(b,c){this.tableRows=a.getRows();o.default.Collection.prototype.remove.apply(this,
arguments);this.tableRows=void 0;return this}}))([],{comparator:function(b){var c;(void 0!==this.tableRows?this.tableRows:a.getRows()).some(function(a,e){if(a.model.id===b.id)return c=e,!0});return c}})},populate:function(a){this.options.reverseOrder&&a.reverse();this.hideGlobalLoading();a&&a.length?(this._models.reset([],{silent:!0}),this.renderRows(a),this.isEmpty()&&this.showNoEntriesMsg()):this.showNoEntriesMsg();this.$table.append(this.$thead);"bottom"===this.options.createPosition?this.$table.append(this.$tbody).append(this.$create):
this.$table.append(this.$create).append(this.$tbody);this.$table.removeClass(this.classNames.LOADING).trigger(this._event.INITIALIZED,[this]);l(this._event.INITIALIZED,this,[this]);this.options.autoFocus&&this.$table.find(":input:text:first").focus()},showGlobalLoading:function(){this.$loading||(this.$loading=(0,e.default)('<div class="aui-restfultable-init">'+(0,v.default)()+'<span class="aui-restfultable-loading">'+this.options.loadingMsg+"</span></div>"));this.$loading.is(":visible")||this.$loading.insertAfter(this.$table);
return this},hideGlobalLoading:function(){this.$loading&&this.$loading.remove();return this},addRow:function(a,b){var c,d;if(!a.id)throw Error("RestfulTable.addRow: to add a row values object must contain an id. Maybe you are not returning it from your restend point?Recieved:"+JSON.stringify(a));d=new this.options.model(a);c=this._renderRow(d,b);this._models.add(d);this.removeNoEntriesMsg();l(this._event.ROW_ADDED,this,[c,this]);return this},removeRow:function(a){this._models.remove(a.model);a.remove();
this.isEmpty()&&this.showNoEntriesMsg();l(this._event.ROW_REMOVED,this,[a,this])},isEmpty:function(){return 0===this._models.length},getModels:function(){return this._models},getTable:function(){return this.$table},getTableBody:function(){return this.$tbody},getCreateRow:function(){return this._createRow},getColumnCount:function(){var a=2;this.allowReorder&&++a;return this.options.columns.length+a},getRowFromElement:function(a){return(0,e.default)(a).data(this.dataKeys.ROW_VIEW)},showNoEntriesMsg:function(){this.$noEntries&&
this.$noEntries.remove();this.$noEntries=(0,e.default)("<tr>").addClass(this.classNames.NO_ENTRIES).append((0,e.default)("<td>").attr("colspan",this.getColumnCount()).text(this.options.noEntriesMsg)).appendTo(this.$tbody);return this},removeNoEntriesMsg:function(){this.$noEntries&&0<this._models.length&&this.$noEntries.remove();return this},getRows:function(){var a=this,b=[];this.$tbody.find("."+this.classNames.READ_ONLY).each(function(){var c=(0,e.default)(this).data(a.dataKeys.ROW_VIEW);c&&b.push(c)});
return b},_renderRow:function(a,b){var c=this,d=this.$tbody.find("."+this.classNames.READ_ONLY),e,f;f=new this._rowClass({model:a,columns:this.options.columns,allowEdit:this.options.allowEdit,allowDelete:this.options.allowDelete,allowReorder:this.options.allowReorder,deleteConfirmation:this.options.deleteConfirmation});this.removeNoEntriesMsg();f.bind(this._event.ROW_EDIT,function(a){l(this._event.EDIT_ROW,{},[this,c]);c.edit(this,a)});e=f.render().$el;-1!==b&&("number"===typeof b&&0!==d.length?e.insertBefore(d[b]):
this.$tbody.append(e));e.data(this.dataKeys.ROW_VIEW,f);f.bind(this._event.MODAL,function(){c.$table.removeClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("disable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents({})})});f.bind(this._event.MODELESS,function(){c.$table.addClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("enable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents()})});this._applyFocusCoordinator(f);this.trigger(this._event.ROW_INITIALIZED,
f);return f},isRowBeingEdited:function(a){var b=!1;this.editRows.some(function(c){if(c.el===a.el)return b=!0});return b},_applyFocusCoordinator:function(a){var b=this;a.hasFocusBound||(a.hasFocusBound=!0,a.bind(this._event.FOCUS,function(){b.focusedRow&&b.focusedRow!==a&&b.focusedRow.trigger(b._event.BLUR);b.focusedRow=a;a instanceof q.default&&b._createRow&&b._createRow.enable()}));return this},_removeEditRow:function(a){a=e.default.inArray(a,this.editRows);this.editRows.splice(a,1);return this},
_shiftFocusAfterEdit:function(){0<this.editRows.length?this.editRows[this.editRows.length-1].trigger(this._event.FOCUS):this._createRow&&this._createRow.trigger(this._event.FOCUS);return this},_saveEditRowOnBlur:function(){return 1>=this.editRows.length},dismissEditRows:function(){this.editRows.forEach(function(a){a.hasUpdates()||a.trigger(this._event.FINISHED_EDITING)},this)},edit:function(a,b){var c=this,d=new this.options.views.editRow({el:a.el,columns:this.options.columns,isUpdateMode:!0,allowReorder:this.options.allowReorder,
fieldFocusSelector:this.options.fieldFocusSelector,model:a.model,cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey}),e=a.model.toJSON();e.update=!0;d.render({errors:{},update:!0,values:e}).bind(c._event.UPDATED,function(b,d){c._removeEditRow(this);this.unbind();a.render().delegateEvents();a.trigger(c._event.UPDATED);!1!==d&&c._shiftFocusAfterEdit()}).bind(c._event.VALIDATION_ERROR,function(){this.trigger(c._event.FOCUS)}).bind(c._event.FINISHED_EDITING,function(){c._removeEditRow(this);
a.render().delegateEvents();this.unbind()}).bind(c._event.CANCEL,function(){c._removeEditRow(this);this.unbind();a.render().delegateEvents();c._shiftFocusAfterEdit()}).bind(c._event.BLUR,function(){c.dismissEditRows();c._saveEditRowOnBlur()&&this.trigger(c._event.SAVE,!1)});this._applyFocusCoordinator(d);d.trigger(c._event.FOCUS,b);c._createRow&&c._createRow.disable();this.editRows.push(d);return d},renderRows:function(a){var b=this._models.comparator,c=[];this._models.comparator=void 0;a=_.map(a,
function(a){a=new this.options.model(a);c.push(this._renderRow(a,-1).el);return a},this);this._models.add(a,{silent:!0});this._models.comparator=b;this.removeNoEntriesMsg();this.$tbody.append(c);return this},_getDefaultOptions:function(a){return{model:a.model||p.default,allowEdit:!0,views:{editRow:t.default,row:q.default},Collection:o.default.Collection.extend({url:a.resources.self,model:a.model||p.default}),allowReorder:!1,fieldFocusSelector:function(a){return":input[name="+a+"], #"+a},loadingMsg:a.loadingMsg||
"Loading"}}});g.ClassNames=r.default;g.CustomCreateView=k.default;g.CustomEditView=h.default;g.CustomReadView=j.default;g.DataKeys=s.default;g.EditRow=t.default;g.EntryModel=p.default;g.Events=u.default;g.Row=q.default;g.Throbber=v.default;(0,w.default)("RestfulTable",g);m.default=g;return m=m["default"]}.call(this);;
;
/* module-key = 'jira.webresources:aui-restfultable-amd-shim', location = '/static/lib/amd-shims/aui-restfultable-amd.js' */
define("aui/restful-table",function(){return AJS.RestfulTable});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-restfultable', location = 'jira-project-config-plugin/global/js/events.js' */
!function(e){JIRA.bind(AJS.RestfulTable.Events.SERVER_ERROR,function(r,o){var s=e("#project-config-error-console");o&&o.errorMessages&&(s.empty(),new JIRA.FormDialog({id:"server-error-dialog",content:function(e){e(JIRA.Templates.Common.serverErrorDialog({message:o.errorMessages[0]}))}}).show())})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/templates/components.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Component&&(JIRA.Templates.Component={}),JIRA.Templates.Component.icon=function(e,s){return'<span class="aui-icon aui-icon-small aui-iconfont-component"></span>'},JIRA.Templates.Component.editComponentName=function(e,s){return'<input class="text" name="name" value="'+soy.$$escapeHtml(e.value?e.value:"")+'" />'+(e.update?"":'<input name="project" type="hidden" value="'+soy.$$escapeHtml(e.project)+'">')},JIRA.Templates.Component.componentLead=function(e,s){return'<span class="'+(e.component.lead&&!e.component.lead.active?"project-config-invalid":"")+'">'+(e.component.lead?JIRA.Templates.User.profileLink({user:e.component.lead,avatarSize:"xsmall",avatarUrl:e.component.lead.avatarUrls["16x16"],linked:!1}):e.component.leadUserName?soy.$$escapeHtml(e.component.leadUserName):"<em>"+soy.$$escapeHtml("Add Lead")+"</em>")+"</span>"},JIRA.Templates.Component.editComponentLead=function(e,s){return""+(e.isLeadPickerDisabled?'<input name="leadUserName" class="text aui-ss-disabled" value="'+(e.lead?soy.$$escapeHtml(e.lead.name):e.leadUserName?soy.$$escapeHtml(e.leadUserName):"")+'" />':'<select class="single-user-picker js-default-user-picker hidden" name="leadUserName">'+(e.lead?'<option style="background-image:url('+soy.$$escapeHtml(e.lead.avatarUrls["16x16"])+')" selected="selected" value="'+soy.$$escapeHtml(e.lead.name)+'">'+soy.$$escapeHtml(e.lead.displayName)+"</option>":e.leadUserName?'<option selected="selected" value="'+soy.$$escapeHtml(e.leadUserName)+'">'+soy.$$escapeHtml(e.leadUserName)+"</option>":"")+"</select>")},JIRA.Templates.Component.defaultAssignee=function(e,s){var n="";switch(e.component.assigneeType){case"PROJECT_DEFAULT":n+='<span class="project-config-component-assignee project-config-component-project-default '+(e.component.isAssigneeTypeValid?"":"project-config-invalid")+'" '+(e.component.assigneeInvalidMsg?' title="'+soy.$$escapeHtml(e.component.assigneeInvalidMsg)+'"':"")+">"+soy.$$escapeHtml("Project Default")+"</span>";break;case"COMPONENT_LEAD":n+='<span class="project-config-component-assignee project-config-component-component-lead '+(e.component.isAssigneeTypeValid?"":"project-config-invalid")+'" '+(e.component.assigneeInvalidMsg?' title="'+soy.$$escapeHtml(e.component.assigneeInvalidMsg)+'"':"")+">"+soy.$$escapeHtml("Component Lead")+"</span>";break;case"PROJECT_LEAD":n+='<span class="project-config-component-assignee project-config-component-project-lead '+(e.component.isAssigneeTypeValid?"":"project-config-invalid")+'" '+(e.component.assigneeInvalidMsg?' title="'+soy.$$escapeHtml(e.component.assigneeInvalidMsg)+'"':"")+">"+soy.$$escapeHtml("Project Lead")+"</span>";break;case"UNASSIGNED":n+='<span class="project-config-component-assignee project-config-component-unassigned '+(e.component.isAssigneeTypeValid?"":"project-config-invalid")+'"'+(e.component.assigneeInvalidMsg?' title="'+soy.$$escapeHtml(e.component.assigneeInvalidMsg)+'"':"")+">"+soy.$$escapeHtml("Unassigned")+"</span>";break;default:n+='<span class="project-config-component-assignee project-config-component-unknown '+(e.component.isAssigneeTypeValid?"":"project-config-invalid")+'">'+soy.$$escapeHtml(e.component.assigneeType)+"</span>"}return n},JIRA.Templates.Component.editDefaultAssignee=function(e,s){return'<select class="select" name="assigneeType"><option value="PROJECT_DEFAULT"'+("PROJECT_DEFAULT"==e.assigneeType?" selected":"")+">"+soy.$$escapeHtml("Project Default")+" ("+(e.isDefaultAssigneeProjectLead?soy.$$escapeHtml("Project Lead"):soy.$$escapeHtml("Unassigned"))+')</option><option value="COMPONENT_LEAD"'+("COMPONENT_LEAD"==e.assigneeType?" selected":"")+">"+soy.$$escapeHtml("Component Lead")+" "+(e.lead?"("+soy.$$escapeHtml(e.lead.displayName)+")":"")+'</option><option value="PROJECT_LEAD"'+("PROJECT_LEAD"==e.assigneeType?" selected":"")+">"+soy.$$escapeHtml("Project Lead")+" ("+soy.$$escapeHtml(e.projectLeadAssignee)+')</option><option value="UNASSIGNED"'+("UNASSIGNED"==e.assigneeType?" selected":"")+">"+soy.$$escapeHtml("Unassigned")+"</option></select>"},JIRA.Templates.Component.deleteForm=function(e,s){var n='<h2 class="dialog-title">'+soy.$$escapeHtml("Delete")+" "+soy.$$escapeHtml("Component")+": "+soy.$$escapeHtml(e.component.name)+'</h2><form class="aui" action="#" method="post"><div class="form-body">';if(e.relatedIssueCount){if(e.swapComponents.length){n+='<div class="aui-message info"><span class="aui-icon icon-info"></span>'+soy.$$escapeHtml("There are issues related to this component, specify what is to be done with them.")+'</div><fieldset class="group"><legend><span>'+soy.$$escapeHtml("Related Issues")+' (<a id="issue-count" href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid="+soy.$$escapeHtml(e.projectId)+"&amp;component="+soy.$$escapeHtml(e.component.id)+'">'+soy.$$escapeHtml(e.relatedIssueCount)+'</a>)</span></legend><div class="radio"><input name="component" value="swap" id="component-swap" class="radio" checked="checked" type="radio" /><label for="component-swap">'+soy.$$escapeHtml("Swap current issues to component")+'</label> <select name="moveIssuesTo" class="select">';for(var t=e.swapComponents,a=t.length,o=0;o<a;o++){var p=t[o];n+='<option value="'+soy.$$escapeHtml(p.id)+'">'+soy.$$escapeHtml(p.name)+"</option>"}n+='</select></div><div class="radio"><input name="component" value="remove" id="component-remove" class="radio" type="radio"><label for="component-remove">'+soy.$$escapeHtml("Remove component from all issues.")+"</label></div>"}else n+='<div class="aui-message info"><span class="aui-icon icon-info"></span> <p>'+soy.$$escapeHtml("There are issues related to this component and no components in this project to migrate them to.")+" <strong>"+soy.$$escapeHtml("The component will be removed from all issues.")+"</strong></p><ul><li>"+soy.$$escapeHtml("Related Issues")+' (<a id="issue-count" href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid="+soy.$$escapeHtml(e.projectId)+"&amp;component="+soy.$$escapeHtml(e.component.id)+'">'+soy.$$escapeHtml(e.relatedIssueCount)+"</a>)</li></ul></div>";n+="</fieldset>"}else n+='<div class="aui-message info"><span class="aui-icon icon-info"></span>'+soy.$$escapeHtml("There are no issues that use this component. It is safe to delete.")+"</div>";return n+='</div><div class="buttons-container form-footer"><div class="buttons"><input id="submit" class="aui-button" type="submit" value="'+soy.$$escapeHtml("Delete")+'" /><a href="#" class="aui-button aui-button-link cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"};;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/templates/template-wrapper.js' */
define("jira-project-config/component/templates",[],function(){"use strict";return window.JIRA.Templates.Component}),AJS.namespace("JIRA.Templates.Component",null,require("jira-project-config/component/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/DeleteForm.js' */
define("jira-project-config/component/view/delete-form",["jira-project-config/component/templates","jira-project-config/backbone","jquery"],function(e,t,o){"use strict";var n=e;return t.View.extend({submit:function(e,t,o){return this.$(".throbber").addClass("loading"),"swap"!==e.component&&delete e.moveIssuesTo,this.model.destroy({data:e,success:function(){o()},error:function(){o()}}),this},render:function(e){var t=this;return this.model.getRelatedIssueCount({success:function(r){t.el.innerHTML=n.deleteForm({relatedIssueCount:r,component:t.model.toJSON(),swapComponents:t.model.getSwapComponentsJSON(),projectId:o("meta[name=projectId]").attr("content")}),e.call(t,t.el)}}),this}})}),AJS.namespace("JIRA.Admin.Component.DeleteForm",null,require("jira-project-config/component/view/delete-form"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/ComponentRow.js' */
define("jira-project-config/component/view/row",["aui/restful-table","jira-project-config/component/view/delete-form","jira-project-config/utils","jira/userhover/userhover"],function(e,t,o,i){"use strict";var n=e.Row;return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.events["click .project-config-component-delete"]="destroy",this.delegateEvents(),this.bind(this._event.RENDER,function(){var e=this.model.get("id");this.$el.addClass("project-config-component").attr("id","component-"+e+"-row").attr("data-id",e),i(this.el)})},destroy:function(e){this.trigger("focus"),o.openDialogForRow(t,this,"component-"+this.model.get("id")+"-delete-dialog"),e&&e.preventDefault()}})}),AJS.namespace("JIRA.Admin.Component.ComponentRow",null,require("jira-project-config/component/view/row"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/EditComponentRow.js' */
define("jira-project-config/component/view/edit-row",["aui/restful-table"],function(t){"use strict";var i=t.EditRow;return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.bind(this._event.RENDER,function(){this.$el.addClass("project-config-components-add-fields")})},submit:function(){var t=this.$(".project-config-component-lead .error");0===t.length?i.prototype.submit.apply(this,arguments):this.focus()}})}),AJS.namespace("JIRA.Admin.Component.EditComponentRow",null,require("jira-project-config/component/view/edit-row"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/Icon.js' */
define("jira-project-config/component/view/icon",["jira-project-config/component/templates","aui/restful-table"],function(e,n){"use strict";var o=n.CustomReadView,i=e;return o.extend({render:function(){return i.icon()}})}),AJS.namespace("JIRA.Admin.Component.IconView",null,require("jira-project-config/component/view/icon"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/ComponentLead.js' */
define("jira-project-config/component/view/lead",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,n,t){"use strict";var i=n.CustomReadView,o=e;return i.extend({render:function(){var e=t.clone(this.model.attributes);if(e.lead||e.leadUserName)return e.assigneeInvalidMsg=this.model.getAssigneeInvalidMsg(),o.componentLead({component:e})}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeReadView",null,require("jira-project-config/component/view/lead"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/DefaultAssignee.js' */
define("jira-project-config/component/view/default-assignee",["jira-project-config/component/templates","aui/restful-table"],function(e,n){"use strict";var t=n.CustomReadView,i=e;return t.extend({render:function(){return i.defaultAssignee({component:this.model.attributes})}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeTypeReadView",null,require("jira-project-config/component/view/default-assignee"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/EditName.js' */
define("jira-project-config/component/view/edit-name",["jira-project-config/component/templates","aui/restful-table"],function(e,t){"use strict";var n=t.CustomEditView,i=e;return n.extend({render:function(e){return e.project=this.model.getProject(),e.update=!1,i.editComponentName(e)}})}),AJS.namespace("JIRA.Admin.Component.NameEditView",null,require("jira-project-config/component/view/edit-name"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/EditDefaultAssignee.js' */
define("jira-project-config/component/view/edit-default-assignee",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,t,i){"use strict";var n=t.CustomEditView,s=e;return n.extend({render:function(){var e=i.clone(this.model.attributes);return e.isDefaultAssigneeProjectLead=this.model.isDefaultAssigneeProjectLead(),e.projectLeadAssignee=this.model.getProjectLeadAssignee(),s.editDefaultAssignee(e)}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeTypeEditView",null,require("jira-project-config/component/view/edit-default-assignee"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/EditComponentLead.js' */
define("jira-project-config/component/view/edit-lead",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,i,n){"use strict";var t=i.CustomEditView,o=e;return t.extend({render:function(){var e=n.clone(this.model.attributes);return e.isLeadPickerDisabled=this.model.isLeadPickerDisabled(),e.assigneeInvalidMsg=this.model.getAssigneeInvalidMsg(),o.editComponentLead(e)}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeEditView",null,require("jira-project-config/component/view/edit-lead"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:globals-templates-common-soy', location = 'jira-project-config-plugin/global/templates/common.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Common&&(JIRA.Templates.Common={}),JIRA.Templates.Common.serverErrorDialog=function(e,o){return'<h2 class="dialog-title">'+"Error"+'</h2><div class="form-body"><div class="aui-message error"><span class="aui-icon icon-error"></span> '+e.message+'</div></div><div class="buttons-container form-footer"><div class="buttons"><a href="#" class="aui-button aui-button-link cancel">'+"Close"+"</a></div></div>"},JIRA.Templates.Common.formatAnchor=function(e,o){return'<a href="'+soy.$$escapeHtml(e.href)+'"'+(e.title?' title="'+soy.$$escapeHtml(e.title)+'"':"")+">"+soy.$$escapeHtml(e.body)+"</a>"};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.Release&&(JIRA.Projects.Release={}),"undefined"==typeof JIRA.Projects.Release.Templates&&(JIRA.Projects.Release.Templates={}),JIRA.Projects.Release.Templates.page=function(e,t){return""+(e.renderLegacy||e.showBreadcrumbs?"":JIRA.Projects.Release.Templates.whatsnew(e))+aui.page.pageHeader({content:"<h1>"+soy.$$escapeHtml(e.releaseTitle)+"</h1>"+(e.renderLegacy?'<div class="aui-page-header-image"><div class="aui-avatar aui-avatar-large"><div class="aui-avatar-inner project-config-icon48-versions"></div></div></div><div class="aui-page-header-main"><h2>'+soy.$$escapeHtml(e.releaseTitle)+"</h2></div>":"<h1>"+soy.$$escapeHtml(e.releaseTitle)+"</h1>")+(!e.adminLink||e.manageVersions||e.renderLegacy?"":aui.page.pageHeaderActions({content:""+aui.buttons.button({id:"manage-versions",text:"Manage Versions",href:soy.$$escapeHtml(AJS.contextPath())+"/"+soy.$$escapeHtml(e.adminLink)})})),extraClasses:""+(e.renderLegacy?"aui-page-header-fixed__legacy":"aui-page-header-fixed")})+'<div id="release-page" class="releases-page-app '+(e.renderLegacy?"releases-page-app__legacy":"")+'"></div>'},JIRA.Projects.Release.Templates.whatsnew=function(e,t){return e=e||{},""+(e.learnMoreURL?'<div class="whats-new-container"><div class="whats-new"><div class="logo"></div><h2>'+soy.$$escapeHtml("Get the status of a version at a glance or go deeper")+"</h2><p>"+soy.$$escapeHtml("These are the versions in your project. Hover over the progress bar for a summary or click a version to see the complete status, including the issues, development data, and potential problems.")+'</p><p><a href="'+soy.$$escapeHtml(e.learnMoreURL)+'" title="'+soy.$$escapeHtml(e.learnMoreTitle)+'">'+soy.$$escapeHtml("Learn more")+"</a></p></div></div>":"")},JIRA.Projects.Release.Templates.filter=function(e,t){return'<form id="version-filter" class="version-filter aui ajs-dirty-warning-exempt"><div class="version-filter-text-container"><div class="version-filter-search-container '+(e.contains?"version-filter-search-opened":"")+'"><input type="text" id="version-filter-text" class="version-filter-text text" value="'+soy.$$escapeHtml(e.contains)+'" /><span class="aui-icon aui-icon-small aui-iconfont-search-small"></span></div><div class="version-filter-status-text" title="'+soy.$$escapeHtml("Use Quick Filters to view a subset of versions.")+'">'+soy.$$escapeHtml("Quick filters:")+'</div></div><div class="version-filter-status-container">'+JIRA.Projects.Release.Templates.button({buttonName:"released",isPressed:e.isReleasedPressed,text:"Released"})+JIRA.Projects.Release.Templates.button({buttonName:"unreleased",isPressed:e.isUnreleasedPressed,text:"Unreleased"})+(e.showArchived?JIRA.Projects.Release.Templates.button({buttonName:"archived",isPressed:e.isArchivedPressed,text:"Archived"}):"")+"</div></form>"},JIRA.Projects.Release.Templates.button=function(e,t){return'<a class="version-filter-status-'+soy.$$escapeHtml(e.buttonName)+" version-filter-status-button "+(e.isPressed?"version-filter-status-pressed":"")+'" href="#" data-version-type="'+soy.$$escapeHtml(e.buttonName)+'">'+soy.$$escapeHtml(e.text)+"</a>"},JIRA.Projects.Release.Templates.table=function(e,t){return""+aui.table({extraClasses:"versions-table dynamic-table",theadContent:'<tr><th class="versions-table__handle"> </th><th class="versions-table__name">'+soy.$$escapeHtml("Version")+'</th><th class="versions-table__status">'+soy.$$escapeHtml("Status")+'</th><th class="versions-table__progress">'+soy.$$escapeHtml("Progress")+'</th><th class="versions-table__date">'+soy.$$escapeHtml("Start date")+'</th><th class="versions-table__date">'+soy.$$escapeHtml("Release date")+'</th><th class="versions-table__description">'+soy.$$escapeHtml("Description")+'</th><th class="dynamic-table__actions">'+soy.$$escapeHtml("Actions")+"</th></tr>",content:"",id:"versions-table"})},JIRA.Projects.Release.Templates.row=function(e,t){var s="<tr "+(null!=e.id?'data-version-id="'+soy.$$escapeHtml(e.id)+'"':"")+' class="item-state-'+soy.$$escapeHtml(e.state)+" "+(e.overdue?"release-overdue":"")+'">'+("ready"==e.state?'<td class="versions-table__handle"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">'+soy.$$escapeHtml("Reorder versions")+"</span></td>":'<td class="versions-table__handle-disabled"></td>')+'<td class="versions-table__name"><div>'+(e.url?'<a href="'+soy.$$escapeHtml(e.url)+'">'+soy.$$insertWordBreaks(soy.$$escapeHtml(e.name),10)+"</a>":soy.$$insertWordBreaks(soy.$$escapeHtml(e.name),10))+'</div></td><td class="versions-table__status"><div>'+(e.archived?aui.lozenges.lozenge({text:"archived",isSubtle:!0}):e.released?aui.lozenges.lozenge({text:"Released",type:"success",isSubtle:!0}):aui.lozenges.lozenge({text:"Unreleased",type:"current",isSubtle:!0}))+'</div></td><td class="versions-table__progress"><div>'+(e.status?JIRA.Projects.Release.Templates.status(e.status):"")+'</div></td><td class="versions-table__date_start"><div>'+JIRA.Projects.Release.Templates.date(e.startDate)+'</div></td><td class="versions-table__date_release"><div>'+JIRA.Projects.Release.Templates.date(e.releaseDate)+'</div></td><td class="versions-table__description"><div>'+soy.$$insertWordBreaks(soy.$$escapeHtml(e.description),10)+'</div></td><td class="dynamic-table__actions"><div>';switch(e.state){case"in-progress":s+=aui.icons.icon({icon:"wait"});break;case"in-progress-error":s+=aui.icons.icon({icon:"wait"});break;case"successful":s+=JIRA.Projects.AbstractList.Templates.actionsSuccess(null);break;case"error-add":s+=JIRA.Projects.AbstractList.Templates.actionsError({class:"operation-add"});break;case"error-delete":s+=JIRA.Projects.AbstractList.Templates.actionsError({class:"operation-delete"});break;case"error-update":s+=JIRA.Projects.AbstractList.Templates.actionsError({class:"operation-update"});break;default:s+=JIRA.Projects.Release.Templates.actionsDropdown(e)}return s+="</div></td></tr>"},JIRA.Projects.Release.Templates.actionsDropdown=function(e,t){for(var s='<a href="#version-actions-'+soy.$$escapeHtml(e.id)+'" aria-owns="version-actions-'+soy.$$escapeHtml(e.id)+'" aria-haspopup="true" class="aui-button aui-button-subtle aui-button-compact aui-dropdown2-trigger aui-dropdown2-trigger-arrowless aui-style-default details-button"><span class="aui-icon aui-icon-small aui-iconfont-more">'+soy.$$escapeHtml("Operations")+'</span></a><div id="version-actions-'+soy.$$escapeHtml(e.id)+'" class="aui-dropdown2 aui-style-default version-actions"><ul class="aui-list-truncate"><li>',a=e.operations,r=a.length,o=0;o<r;o++){var n=a[o],i=null!=n.href?AJS.contextPath()+n.href:"#";s+='<a class="'+soy.$$escapeHtml(n.styleClass)+'" href="'+soy.$$escapeHtml(i)+'">'+soy.$$escapeHtml(n.label)+"</a>"}return s+="</li></ul></div>"},JIRA.Projects.Release.Templates.emptyRow=function(e,t){return'<tr class="versions-table__row-empty"><td colspan="8"><div class="no-results no-table-common"><img class="releases-logo" src="'+soy.$$escapeHtml(AJS.contextPath())+'/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/page/project/release/image/versions-search-empty-state.svg" /><h4>'+soy.$$escapeHtml("No versions were found that match your search")+'</h4><p class="description">'+soy.$$escapeHtml("Try modifying your filter criteria.")+"</p></div></td></tr>"},JIRA.Projects.Release.Templates.status=function(e,t){var s="",a=e.unmapped.count+e.toDo.count+e.inProgress.count+e.complete.count;return s+=a?'<div class="progressbar-container"><div class="progressbar progressbar_full">'+JIRA.Projects.Release.Templates.progressBarEntry({entry:e.complete,totalCount:a,type:"complete",name:"Done"})+JIRA.Projects.Release.Templates.progressBarEntry({entry:e.inProgress,totalCount:a,type:"in-progress",name:"In Progress"})+JIRA.Projects.Release.Templates.progressBarEntry({entry:e.toDo,totalCount:a,type:"to-do",name:"To Do"})+JIRA.Projects.Release.Templates.progressBarEntry({entry:e.unmapped,totalCount:a,type:"undefined",name:"No Category"})+"</div></div>":soy.$$escapeHtml("No issues")},JIRA.Projects.Release.Templates.progressBarEntry=function(e,t){var s="",a=e.entry.count/e.totalCount*100;return s+=a?'<div class="progressbar__entry progressbar__entry progressbar__entry progressbar__entry_'+soy.$$escapeHtml(e.type)+'" data-type="'+soy.$$escapeHtml(e.type)+'" data-title="'+soy.$$escapeHtml(e.name)+'" data-count="'+soy.$$escapeHtml(e.entry.count)+'" data-url="'+soy.$$escapeHtml(e.entry.jqlUrl)+'" style="width: '+soy.$$escapeHtml(a)+'%"></div>':""},JIRA.Projects.Release.Templates.progressBarDialog=function(e,t){for(var s='<div class="progress-statuses">'+soy.$$escapeHtml("Version")+": "+soy.$$escapeHtml(e.name)+"<br />"+soy.$$escapeHtml(AJS.format("{0,choice,0#{0} issues|1#{0} issue|1\u003c{0} issues} in total",e.totalCount))+'<br /><table class="progress-statuses__table"><tbody>',a=e.entries,r=a.length,o=0;o<r;o++){var n=a[o];s+="<tr><td>"+soy.$$escapeHtml(n.name)+'</td><td><a href="'+soy.$$escapeHtml(n.url)+'">'+aui.badges.badge({text:n.count,extraClasses:"progress-statuses__table__badge progress-statuses__table__badge_"+soy.$$escapeHtml(n.type)})+"</a></td></tr>"}return s+='</tbody><tfoot><td colspan="2"><a href="'+soy.$$escapeHtml(e.url)+'">'+soy.$$escapeHtml("All issues")+"</a></td></tfoot></table></div>"},JIRA.Projects.Release.Templates.date=function(e,t){return e=e||{},""+(e.formatted?'<time class="date" datetime="'+soy.$$escapeHtml(e.iso)+'">'+soy.$$escapeHtml(e.formatted)+"</time>":"")},JIRA.Projects.Release.Templates.noVersions=function(e,t){return'<div class="no-versions no-table-common"><img class="releases-logo" src="'+soy.$$escapeHtml(AJS.contextPath())+'/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/jira-projects-module/page/project/release/image/versions-empty-state.svg" /><h4>'+soy.$$escapeHtml("You haven\'t added any version to this project yet")+'</h4><p class="description">'+soy.$$escapeHtml("Versions are points-in-time for a project, and help you organise and schedule your work.")+'</p><p><a id="learn-more" target="_blank" href="'+soy.$$filterNoAutoescape(e.learnMoreUrl)+'">'+soy.$$escapeHtml("Learn more")+"</a></p></div>"},JIRA.Projects.Release.Templates.addVersion=function(e,t){return""+aui.form.form({id:"releases-add__version",action:"",extraClasses:"ajs-dirty-warning-subsequent-submits-allowed",content:'<div class="releases-add__name">'+aui.form.input({placeholderText:"Version name",name:"name",type:"text"})+'<div class="error-container"></div></div><div class="releases-add__date-start">'+aui.form.input({placeholderText:"Start date (optional)",name:"startDate",type:"text",extraAttributes:' autocomplete="off"'})+'<a href="#" title="'+soy.$$escapeHtml("Select a date")+'">'+aui.icons.icon({icon:"calendar",useIconFont:!0,accessibilityText:"Select a date"})+'</a><div class="error-container" style="white-space: pre-wrap"></div></div><div class="releases-add__date-release">'+aui.form.input({placeholderText:"Release date (optional)",name:"releaseDate",type:"text",extraAttributes:' autocomplete="off"'})+'<a href="#" title="'+soy.$$escapeHtml("Select a date")+'">'+aui.icons.icon({icon:"calendar",useIconFont:!0,accessibilityText:"Select a date"})+'</a><div class="error-container" style="white-space: pre-wrap"></div></div><div class="releases-add__description">'+aui.form.input({placeholderText:"Description (optional)",name:"description",type:"text"})+'<div class="error-container"></div></div><div class="releases-add__confirm">'+aui.buttons.button({text:"Add",type:"primary"})+"</div>"})},JIRA.Projects.Release.Templates.tableLayout=function(e,t){return""+JIRA.Projects.AbstractList.Templates.tableLayoutCommon({id:"versions-table",class:"versions-table",headerRow:'<tr><th class="versions-table__handle"> </th><th class="versions-table__name">'+soy.$$escapeHtml("Version")+'</th><th class="versions-table__status">'+soy.$$escapeHtml("Status")+'</th><th class="versions-table__progress">'+soy.$$escapeHtml("Progress")+'</th><th class="versions-table__date">'+soy.$$escapeHtml("Start date")+'</th><th class="versions-table__date">'+soy.$$escapeHtml("Release date")+'</th><th class="versions-table__description">'+soy.$$escapeHtml("Description")+'</th><th class="dynamic-table__actions">'+soy.$$escapeHtml("Actions")+"</th></tr>"})},JIRA.Projects.Release.Templates.versionEdit=function(e,t){return""+aui.page.document({pageType:"focused",pageSize:"large",windowTitle:"Edit version",extraClasses:"version-edit",content:""+aui.page.pageHeader({content:""+aui.page.pageHeaderMain({content:"<h1>"+soy.$$escapeHtml("Edit version")+"</h1>"})})+("dialog"==e.decorator?JIRA.Projects.Release.Templates.versionEditFormPanel(e):aui.page.pagePanel({content:""+aui.page.pagePanelContent({content:""+JIRA.Projects.Release.Templates.versionEditFormPanel(e)})}))})},JIRA.Projects.Release.Templates.versionEditFormPanel=function(e,t){var s="";if(e.version&&!e.forbidden)s+=JIRA.Projects.Release.Templates.versionEditForm(e);else if(e.globalErrors){s+='<div id="version-edit" class="form-body">';for(var a="",r=e.globalErrors,o=r.length,n=0;n<o;n++){var i=r[n];a+=soy.$$escapeHtml(i)}s+=aui.message.error({content:a}),s+="</div>"}return s},JIRA.Projects.Release.Templates.versionEditForm=function(e,t){var s=""+(e.version.id?'<input type="hidden" name="id" value="'+soy.$$escapeHtml(e.version.id)+'" />':"")+(e.decorator?'<input type="hidden" name="decorator" value="'+soy.$$escapeHtml(e.decorator)+'" />':"")+(e.globalSuccess?aui.message.success({content:""+soy.$$escapeHtml(e.globalSuccess)}):"");if(e.globalErrors){for(var a="",r=e.globalErrors,o=r.length,n=0;n<o;n++){var i=r[n];a+=soy.$$escapeHtml(i)}s+=aui.message.error({content:a})}s+='<div class="form-body">'+aui.form.fieldGroup({content:""+aui.form.label({content:""+soy.$$escapeHtml("Name"),isRequired:"true"})+aui.form.input({id:"version-name",name:"name",type:"text",value:e.version.name})+JIRA.Projects.Release.Templates.errorDiv({name:"name",errors:e.errors,extraAttributes:"data-field=name"})})+aui.form.fieldGroup({content:""+aui.form.label({content:""+soy.$$escapeHtml("Start date")})+aui.form.input({placeholderText:"Start date (optional)",name:"userStartDate",type:"text",value:e.version.startDate.datePickerFormatted,extraAttributes:' autocomplete="off" date-picker data-field-name="startDate"'})+'<a href="#" title="'+soy.$$escapeHtml("Select a date")+'">'+aui.icons.icon({icon:"calendar",useIconFont:!0,accessibilityText:"Select a date"})+"</a>"+JIRA.Projects.Release.Templates.errorDiv({name:"startDate",errors:e.errors,extraAttributes:"data-field=startDate"})})+aui.form.fieldGroup({content:""+aui.form.label({content:""+soy.$$escapeHtml("Release date")})+aui.form.input({placeholderText:"Release date (optional)",name:"userReleaseDate",type:"text",value:e.version.releaseDate.datePickerFormatted,extraAttributes:' autocomplete="off" date-picker data-field-name="releaseDate"'})+'<a href="#" title="'+soy.$$escapeHtml("Select a date")+'">'+aui.icons.icon({icon:"calendar",useIconFont:!0,accessibilityText:"Select a date"})+"</a>"+JIRA.Projects.Release.Templates.errorDiv({name:"releaseDate",errors:e.errors,extraAttributes:"data-field=releaseDate"})})+aui.form.fieldGroup({content:""+aui.form.label({content:""+soy.$$escapeHtml("Description")})+aui.form.input({id:"version-description",name:"description",type:"text",value:e.version.description,placeholderText:"Description (optional)"})+JIRA.Projects.Release.Templates.errorDiv({name:"description",errors:e.errors,extraAttributes:"data-field=description"})})+"</div>"+aui.form.buttons({extraClasses:"horizontally-aligned form-footer",content:""+aui.form.submit({id:"version-save-submit",type:"primary",text:"Save"})+(e.urlCancel&&"dialog"==e.decorator?aui.buttons.button({id:"version-edit-cancel",href:e.urlCancel,type:"link",text:"Cancel",extraClasses:"cancel",extraAttributes:'data-project="'+soy.$$escapeHtml(e.projectKey)+'"'}):"")});var l=""+aui.form.form({id:"version-edit",action:soy.$$escapeHtml(AJS.contextPath())+"/rest/api/2/version/"+soy.$$escapeHtml(e.version.id),extraClasses:"version-edit-form",extraAttributes:'data-return-url="'+soy.$$escapeHtml(e.urlReturn)+'"',content:s});return l},JIRA.Projects.Release.Templates.errorDiv=function(e,t){return""+(e.errors.errors[e.name]?'<div class="error" '+(e.extraAttributes?soy.$$escapeHtml(e.extraAttributes):"")+">"+soy.$$escapeHtml(e.errors.errors[e.name])+"</div>":"")},JIRA.Projects.Release.Templates.calendarConfiguration=function(e,t){return'<fieldset class="hidden datepicker-params"><div class="parameters"><input title="dateFormat" type="hidden" value="'+soy.$$escapeHtml(e.ifFormat)+'" /></div></fieldset>'},JIRA.Projects.Release.Templates.searchLayout=function(e,t){return'<table class="top-container"><tr><td><div id="filter-container"></div></td><td><div id="merge-container"></div></td></tr></table>'+(e.isProjectAdmin?"":'<div id="adg3"></div>')+aui.page.pagePanelContent({content:'<div id="content-container"></div><div id="submit-container"></div><div id="config-data-container"></div>',extraClasses:"aui-page-panel-content-no-table"})},JIRA.Projects.Release.Templates.merge=function(e,t){return""+(e.isProjectAdmin&&e.versionsSize>1?'<a id="versions-merge" href="#"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/jira-projects-module/page/project/release/image/merge-versions-icon.svg" /> '+soy.$$escapeHtml("Merge versions")+"</a>":"<span></span>")};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SubmitController.js' */
define("jira/projects/release/submit-controller",["jira/projects/libs/marionette","jira/ajs/ajax/ajax-util","jira/flag","jira/featureflags/feature-manager","jira/projects/release/submit-view","jira/projects/release/submit-model","jira/projects/abstract-list/submit-controller","jira/projects/abstract-model/submit-model-states"],function(e,t,i,s,r,a,n,o){var d=n.extend({initialize:function(e){this._viewModel=new a,this.pageableItems=e.pageableItems,this.isProjectAdmin=e.isProjectAdmin},showView:function(){var e=new r({model:this._viewModel,pageableItems:this.options.pageableItems});return this.listenTo(e,"save",this.versionAdd),e},versionAdd:function(e){var t=e.clone();return this.listenTo(t,"retry-add",function(){this._versionAdd(t,!1,o.IN_PROGRESS_ERROR)}),this._versionAdd(t,!0,o.IN_PROGRESS)},_versionAdd:function(e,t,i){return e.set("state",i),t&&this.pageableItems.addElement(e),e.save(i).done(function(){setTimeout(function(){e.get("state")===o.SUCCESSFUL&&e.set("state",o.READY)},5e3),e.trigger("added",e)}.bind(this)),e},displaySubmitView:function(){return this.isProjectAdmin}});return d});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SubmitModelConverter.js' */
define("jira/projects/release/submit-model-converter",[],function(){var e={getDefaultStatus:function(){return["unmapped","toDo","inProgress","complete"].reduce(function(e,t){return e[t]={count:0,jqlUrl:""},e},{})},getDate:function(e,t){return{formatted:e,iso:t||""}}};return e});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SubmitModel.js' */
define("jira/projects/release/submit-model",["backbone","jira/projects/abstract-list/submit-model","underscore","jquery","wrm/context-path","jira/projects/release/submit-model-converter","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util","jira/projects/abstract-list/submit-model-events","wrm/context-path","jira/ajs/ajax/smart-ajax","jira/util/events"],function(e,t,s,r,a,i,o,n,c,l,u,d){var h=t.extend({RELATED_ISSUES_PATH:"/relatedIssueCounts",MERGE_PATH:"/mergeto/",urlRoot:a()+"/rest/api/2/version",defaults:s.extend({},t.prototype.defaults,{released:!1,archived:!1,operations:[]}),detailsPath:function(){return a()+"/rest/projects/1.0/project/"+encodeURIComponent(this.get("project"))+"/release/details/"+this.id},toDataJSON:function(){var e=this.toJSON(),t=s.pick(e,"project","name","description");return t.userStartDate=e.startDate.formatted,t.userReleaseDate=e.releaseDate.formatted,t},_traceItemAdded:function(){JIRA.trace("jira.version.add.finished")},parse:function(t,s){var r=e.Model.prototype.parse.call(this,t,s);return r.startDate=i.getDate(t.userStartDate,t.startDate),r.releaseDate=i.getDate(t.userReleaseDate,t.releaseDate),r.status=i.getDefaultStatus(),delete r.userStartDate,delete r.userReleaseDate,r},destroy:function(t){t=t||{},this.lastDestroyOptions=s.clone(t);var r=t.data?t.data.moveFixIssuesTo:void 0,a=this.collection;t.wait=!0;var i=e.Model.prototype.destroy.apply(this,arguments);return i&&(i.fail(function(e){this.set("state",o.ERROR_DELETE),this.set("errorMsg",AJS.escapeHtml(n.getErrorMessageFromXHR(e)))}.bind(this)),r>0?i.then(function(){var e=a.get(r);e?e.detailsSync().always(function(){JIRA.trace("jira.version.delete.finished")}):JIRA.trace("jira.version.delete.finished")}.bind(this)):i.always(function(){JIRA.trace("jira.version.delete.finished")}),this.trigger("removeItemEvent")),i},sync:function(t,s,r){switch(t){case"delete":var a=this._convertFormToReplacementData(r.data);return r.attrs=a,delete r.data,r.url=this.url()+"/removeAndSwap",e.sync("create",s,r);case"move":return r.url=this.url()+"/move",r.attrs=s?{after:s.url()}:{position:"First"},e.sync("create",this,r)}return e.sync.apply(this,arguments)},_convertFormToReplacementData:function(e){var e=e||{},t={};"swap"===e.affects&&(t.moveAffectedIssuesTo=e.moveAffectedIssuesTo),"swap"===e.fix&&(t.moveFixIssuesTo=e.moveFixIssuesTo);for(var s in e){var r=s.match(/^customField([0-9]+)Action$/);if(r){t.customFieldReplacementList=t.customFieldReplacementList||[];var a=e[s],i=r[1],o={customFieldId:Number(i),moveTo:"swap"===a?e["customField"+i+"MoveTo"]:null};t.customFieldReplacementList.push(o)}}return t},save:function(a,i){if(this.lastSaveAttributes=s.clone(a),i=i||{},this.isNew())return t.prototype.save.call(this,a,i);if(a){var n=r.Deferred();this.set("state",o.isStateError(this.get("state"))?o.IN_PROGRESS_ERROR:o.IN_PROGRESS);var c=i.error,l=i.success;return e.Model.prototype.save.call(this,[],{attrs:a}).done(function(e){this.detailsSync().always(function(){this.set("state",o.SUCCESSFUL),n.resolve(),l&&l.call(this,this,e)}.bind(this))}.bind(this)).fail(function(e){if(this.set("state",o.ERROR_UPDATE),n.reject(e),c){var t=r.parseJSON(e.responseText||e.data);c.call(this,this,t,e)}}.bind(this)),n}},getUnresolvedIssueCount:function(e){var t=this.id;e=e||{};e.error;return u.makeRequest({url:l()+"/rest/api/2/version/"+t+"/unresolvedIssueCount",complete:function(t,s,r){r.successful?e.success.call(this,r.data):e.success.call(this,r.data)}.bind(this)}),this},getMoveVersionsJSON:function(){var e=this.collection.filter(function(e){return!e.get("released")&&e!==this}.bind(this)).map(function(e,t){var s=e.toJSON();return this.collection.at(t+1)===this&&(s.nextScheduled=!0),s}.bind(this));return e},getRelatedIssueCount:function(e){var t=this;return e=e||{},u.makeRequest({url:this.url()+this.RELATED_ISSUES_PATH,complete:function(s,r,a){a.successful?e.success.call(t,a.data):t._serverErrorHandler(a)}}),this},getSwapVersionsJSON:function(){var e=this,t=[];return this.collection.each(function(s){s.get("archived")||s===e||t.push(s.toJSON())}),t.reverse()},_serverErrorHandler:function(e,t){var s={};if(400!==e.status){try{s=r.parseJSON(e.responseText||e.data)}catch(e){s.errorMessages=[e]}d.trigger(c.SERVER_ERROR,[s,e,t,this])}},merge:function(e){var t=this,s=this.url(),r=e.data,a=this.collection;return"string"!=typeof r.mergeTo&&e.error.call(this,{status:400,errorMessages:["parameters"]}),u.makeRequest({url:s+this.MERGE_PATH+r.mergeTo,type:"PUT",dataType:"json",timeout:12e4,complete:function(s,i,n){var c=n.data;if("string"==typeof n.data)try{c=JSON.parse(n.data)}catch(e){c={successful:!1,errorMessages:[String.valueOf(e)]},n.data=JSON.stringify(c)}var l=!(400===s.status&&c&&c.errors);if(n.successful){t.trigger("destroy",t,t.collection,e),e.success&&e.success.call(t,c);var u=a.get(r.mergeTo);u?u.detailsSync().always(function(){u.set("state",o.SUCCESSFUL),u.addStateTimeout(o.SUCCESSFUL,o.READY),JIRA.trace("jira.version.merge.finished")}):JIRA.trace("jira.version.merge.finished")}else l&&(t._serverErrorHandler(n),e.error&&e.error.call(t,c));e.complete&&e.complete.call(t,s.status,c)}}),this}});return h});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/PageableVersionsCollection.js' */
define("jira/projects/release/pageable-versions-collection",["backbone","jira/projects/release/submit-model","jira/projects/abstract-list/lazy-loading-collection"],function(e,i,o){var t=e.Collection.extend({model:i}),l=o.extend({collectionClass:t,initialize:function(e){o.prototype.initialize.apply(this,arguments),this.listenTo(this,"added",function(e){this._addToTop(this,e),this._addToTop(this.originalCollection,e),this._addToTop(this.fullCollection,e)}),this.listenTo(this,"reorder",function(e,i){this._moveBefore(this,e,i),this._moveBefore(this.originalCollection,e,i),this._moveBefore(this.fullCollection,e,i),this.trigger("collectionChanged")})},_addToTop:function(e,i){var o=e.indexOf(i);o>0&&(e.remove(i),e.add(i,{at:0}))},_moveBefore:function(e,i,o){e.remove(i,{silent:!0}),e.add(i,o&&{at:e.indexOf(o)})}});return l});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SubmitView.js' */
define("jira/projects/release/submit-view",["jira/projects/abstract-list/submit-view","jira/projects/release/submit-model","jira/api/projects","jira/ajs/ajax/ajax-util","jira/flag","jira/util/data/meta","underscore","jira/moment","jira/projects/release/submit-model-converter","jira/projects/release/calendar-params-data"],function(e,t,a,r,i,n,s,o,d,u){var l=new Object,m=new Object,h=e.extend({template:JIRA.Projects.Release.Templates.addVersion,ui:{form:"form",allInputs:"input[name]",nameInput:"input[name='name']",dateStartInput:"input[name='startDate']",dateStartCalendarTrigger:".releases-add__date-start a",dateReleaseInput:"input[name='releaseDate']",dateReleaseCalendarTrigger:".releases-add__date-release a",descriptionInput:"input[name='description']",err_nameInput:".releases-add__name .error-container",err_dateStartInput:".releases-add__date-start .error-container",err_dateReleaseInput:".releases-add__date-release .error-container",addButton:".releases-add__confirm button"},events:{"submit @ui.form":"_onSubmit","input @ui.nameInput":"_validateForm","change @ui.dateStartInput":"_validateStartDate","change @ui.dateReleaseInput":"_validateReleaseDate"},validation:{nameInput:["_uniqueName","_constraint","_empty"]},onRender:function(){this._setupCalendar(this.ui.dateStartCalendarTrigger,this.ui.dateStartInput),this._setupCalendar(this.ui.dateReleaseCalendarTrigger,this.ui.dateReleaseInput),this._validateForm()},_setupCalendar:function(e,t){var a=s.extend({},u,{button:e,inputField:t});Calendar.setup(a)},_getFormData:function(){var e=this.ui.form.serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{});return e.project=a.getCurrentProjectKey(),e.startDate=d.getDate(e.startDate),e.releaseDate=d.getDate(e.releaseDate),e.status=d.getDefaultStatus(),e},_validateForm:function(e){var t=s.flatten([this._validateName(),this._validateStartDate(m),this._validateReleaseDate(m)]);return t.length>0?this.ui.addButton.attr("disabled","disabled"):this.ui.addButton.is(":disabled")&&(this.ui.addButton.removeAttr("disabled"),e&&this.ui.descriptionInput.is(e.target)&&this.ui.addButton.focus()),t},_onSubmit:function(e){e.preventDefault(),this._validateForm(e).length>0||(this.model.clear(),this.model.set(this._getFormData()),this.trigger("save",this.model),this.model.clear(),this.isDestroyed||(this.ui.allInputs.val(""),this.ui.nameInput.focus(),this._validateForm()))},_validateName:function(){return s.flatten(s.map(this.validation,function(e,t){var a=this.ui[t].val(),r=s.flatten(e.map(function(e){return this[e](a)},this)),i=r.filter(function(e){return e!==l});return i.length>0?this._showError(t,i.join(", ")):this._hideError(t),r},this))},_validateStartDate:function(e){return this._validateDate("dateStartInput","dateReleaseInput",!0,e)||[]},_validateReleaseDate:function(e){return this._validateDate("dateReleaseInput","dateStartInput",!1,e)||[]},_validateDate:function(e,t,a,r){var i,n=this.ui[e].val().trim();if(0==n.length)return this._hideError(e),void(r!==m&&this._validateForm());if(n=this._correctFormat(n)){this.ui[e].val(n);var s=this.ui[t].val().trim();s.length>0&&this._correctFormat(s)&&(this._hideError(t),this._compareDates(n,s,a)||(i="The start date cannot be after the release date."))}else i=AJS.format("Please enter the date in the following format: {0}",u.dateFormat);return this._showError(e,i),i?this.ui.addButton.attr("disabled","disabled"):r!==m&&this._validateForm(),i},_showError:function(e,t){this.ui["err_"+e].html(void 0!==t?t:"").toggleClass("error",void 0!==t)},_hideError:function(e){this.ui["err_"+e].html("").removeClass("error")},_uniqueName:function(e){return this.options.pageableItems.originalCollection.some(function(t){return(t.get("name")||"").toLowerCase()===(e||"").toLowerCase()})?"Version of such name already exists.":[]},_constraint:function(e){return e&&e.length>255?"255 character limit exceeded.":[]},_empty:function(e){return e&&0!==e.trim().length?[]:l},_compareDates:function(e,t,a){var r=o.splitDate(e,u.ifFormat),i=o.splitDate(t,u.ifFormat),n=new Date(r.year,r.month,r.day),s=new Date(i.year,i.month,i.day);return a?n<=s:s<=n},_correctFormat:function(e){var t=o.splitDate(e,u.ifFormat);if(t.month!==-1&&!isNaN(t.day)&&!isNaN(t.year)&&0!==t.day&&0!==t.year){var a=new Date(t.year,t.month,t.day);if(a.getFullYear()==t.year&&a.getMonth()==t.month)return e.toLowerCase()}}});return h});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/FilterModel.js' */
define("jira/projects/release/filter-model",["jira/projects/abstract-model/submit-model-states"],function(t){"use strict";var e=JIRA.Projects.AbstractList.FilterModel,s=e.extend({filterAttributes:["status","contains"],defaults:{status:"unreleased",contains:""},initialize:function(t){e.prototype.initialize.call(this,t),this.on("change:status change:contains",this.filterCollection),this.on("change:status change:contains",this.navigate)},_getStatus:function(){return this.get("status")||s.FILTER_NONE},_getContains:function(){return(this.get("contains")||"").toLowerCase()},emptyContainsField:function(){this.set("contains","")},filterCollection:function(){var t=this.pageableCollection.originalCollection.models.filter(this.elementMatchFilter,this);this.pageableCollection.resetFilter(t)},_statusMatches:function(t){var e=this._getStatus();return e===s.FILTER_ALL||e===s.FILTER_NONE||(t.get("archived")?this.containsStatus("archived"):this.containsStatus("released")&&t.get("released")||this.containsStatus("unreleased")&&!t.get("released"))},elementMatchFilter:function(e){if(e.get("state")===t.IN_PROGRESS||e.get("state")===t.IN_PROGRESS_ERROR)return!0;if(!this._statusMatches(e))return!1;var s=this._getContains();return""===s||e.get("name").toLowerCase().indexOf(s)>-1||e.get("description").toLowerCase().indexOf(s)>-1||e.get("startDate").formatted.toLowerCase().indexOf(s)>-1||e.get("releaseDate").formatted.toLowerCase().indexOf(s)>-1},containsStatus:function(t){var e=this.get("status")||s.FILTER_NONE;return 0===e.indexOf(t)||e.indexOf("-"+t)>0}},{FILTER_ALL:"all",FILTER_NONE:"no-filter"});return s});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/FilterView.js' */
define("jira/projects/page/release/view/filter",["jira/projects/libs/marionette","underscore","jira/projects/release/filter-model"],function(e,t,s){"use strict";var i=JIRA.Projects.Release.Templates,n=function(){return JIRA.trace.apply(JIRA,arguments)},a={CONTAINS_OPENED:"version-filter-search-opened",STATUS_PRESSED:"version-filter-status-pressed"};return e.ItemView.extend({template:i.filter,ui:{form:"form",unreleased:".version-filter-status-unreleased",released:".version-filter-status-released",archived:".version-filter-status-archived",contains:".text",quickFilter:".version-filter-status-text",searchContainer:".version-filter-search-container"},events:{"submit @ui.form":function(e){e.preventDefault()},"input @ui.contains":"inputContains","change @ui.contains":"inputContains","click @ui.released":"clickStatusReleased","click @ui.unreleased":"clickStatusUnreleased","click @ui.archived":"clickStatusArchived","focus @ui.contains":function(){this.ui.searchContainer.addClass(a.CONTAINS_OPENED)},"blur @ui.contains":function(){this._isContainsEmpty()&&this.ui.searchContainer.removeClass(a.CONTAINS_OPENED)}},modelEvents:{"change:status":function(){var e=this._getReleased(),t=this._getUnreleased(),s=this.ui.released.hasClass(a.STATUS_PRESSED),i=this.ui.unreleased.hasClass(a.STATUS_PRESSED);e&&!s&&this.ui.released.addClass(a.STATUS_PRESSED),!e&&s&&this.ui.released.removeClass(a.STATUS_PRESSED),t&&!i&&this.ui.unreleased.addClass(a.STATUS_PRESSED),!t&&i&&this.ui.unreleased.removeClass(a.STATUS_PRESSED),this.ui.archived.toggleClass(a.STATUS_PRESSED,this._getArchived()),n("project.release.status.changed")}},onRender:function(){this.ui.quickFilter.tooltip({gravity:"w"})},clickStatusReleased:function(e){this._clickStatus(e,!this._getReleased(),this._getUnreleased(),this._getArchived())},clickStatusUnreleased:function(e){this._clickStatus(e,this._getReleased(),!this._getUnreleased(),this._getArchived())},clickStatusArchived:function(e){this._clickStatus(e,this._getReleased(),this._getUnreleased(),!this._getArchived())},_clickStatus:function(e,t,s,i){e.preventDefault(),this.model.set("status",this._getCurrentStatus(t,s,i))},_isContainsEmpty:function(){return t.isEmpty(this.ui.contains.val())},searchContainerResize:function(){this._isContainsEmpty()?this.ui.contains.is(":focus")||this.ui.searchContainer.removeClass(a.CONTAINS_OPENED):this.ui.searchContainer.addClass(a.CONTAINS_OPENED)},_inputContains:t.debounce(function(){var e=this.ui.contains.val();this.model.set("contains",e)},100),inputContains:function(){this.searchContainerResize(),this._inputContains()},_getReleased:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("released")},_getUnreleased:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("unreleased")},_getArchived:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("archived")},_getCurrentStatus:function(e,t,i){if(e&&t&&i)return s.FILTER_ALL;if(!e&&!t&&!i)return s.FILTER_NONE;var n=[];return e&&n.push("released"),t&&n.push("unreleased"),i&&n.push("archived"),n.join("-")},serializeData:function(){var e=this;return{contains:this.model.get("contains"),isReleasedPressed:e._getReleased(),isUnreleasedPressed:e._getUnreleased(),isArchivedPressed:e._getArchived(),showArchived:e.options.isProjectAdmin}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/EmptyItemView.js' */
define("jira/projects/release/empty-item-view",["jira/projects/libs/marionette"],function(e){"use strict";var t=e.ItemView.extend({template:JIRA.Projects.Release.Templates.emptyRow,onRender:function(){this.unwrapTemplate()}});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/NoVersionsItemView.js' */
define("jira/projects/release/noversionsitemview",["jira/projects/libs/marionette","jira/projects/release/analytics"],function(e,r){"use strict";var n=e.ItemView.extend({template:JIRA.Projects.Release.Templates.noVersions,ui:{learnMoreLink:"#learn-more"},events:{"click @ui.learnMoreLink":"onLearnMoreClicked"},onRender:function(){this.unwrapTemplate(),r.emptyViewRendered()},onLearnMoreClicked:function(){r.releaseLearnMoreClicked()}});return n});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ItemView.js' */
define("jira/projects/release/item-view",["jira/projects/abstract-list/item-view","jquery","jira/projects/libs/marionette","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util","jira-project-config/utils","jira/projects/release/version-adapter"],function(e,t,i,r,n,s,a){"use strict";function o(e){var t;return t=404===e.readyState?"Version of such name does not exist":n.getErrorMessageFromXHR(e),AJS.escapeHtml(t)}var l=JIRA.Admin.Version.DeleteForm,c=JIRA.Admin.Version.ReleaseForm,u=e.extend({template:JIRA.Projects.Release.Templates.row,ui:_.extend({},e.prototype.ui,{dragHandle:".versions-table__handle .aui-icon",progressbar:".progressbar",deleteLink:".project-config-operations-delete",releaseversionLink:".project-config-operations-release",unreleaseversionLink:".project-config-operations-unrelease",archiveversionLink:".project-config-operations-archive",unarchiveversionLink:".project-config-operations-unarchive"}),modelEvents:_.extend({},e.prototype.modelEvents,{"retry-delete":"_deleteItemRetry","retry-update":"_updateItemRetry"}),outterEvents:{"click @ui.deleteLink":"deleteItem","click @ui.releaseversionLink":"release","click @ui.unreleaseversionLink":"unrelease","click @ui.archiveversionLink":"archive","click @ui.unarchiveversionLink":"unarchive"},onRender:function(){this.listenToElements(this.outterEvents),this.unwrapTemplate(),this.initializeProgressDialog()},_discardOperation:function(e){e.preventDefault(),this.model.discard(),this.flag&&this.flag.close()},deleteItem:function(e){e.preventDefault(),this._deletePerform()},_deleteItemRetry:function(){this.model.set("state",r.IN_PROGRESS_ERROR),this.model.destroy(this.model.lastDestroyOptions)},_deletePerform:function(){this._showLoading();var e=this.model.detailsSync();e.then(function(){s.openDialogForRow(l,this,"version-"+this.model.get("id")+"-delete-dialog",{width:700})}.bind(this)).fail(function(e){this.model.set("state",r.ERROR_DELETE),this.model.set("errorMsg",o(e))}.bind(this),this._hideLoading.bind(this))},_updateItemRetry:function(){this._saveChanges(this.model.lastSaveAttributes)},_saveChanges:function(e){this.model.save(e).done(function(){setTimeout(function(){this.model.get("state")===r.SUCCESSFUL&&this.model.set("state",r.READY)}.bind(this),5e3)}.bind(this))},release:function(e){e.preventDefault(),this._releasePerform()},_releasePerform:function(){var e=this.model,i=new a(e),r=s.openDialogForRow(c,i,"version-release-dialog");return t(r).on("Dialog.hide",function(){var t=this.$form.serializeObject(),i=t.moveUnfixedIssuesTo;if(i){var r=e.collection.get(i);r&&r.detailsSync().always(function(){JIRA.trace("jira.version.release.reload.finished")})}}),r},unrelease:function(e){e.preventDefault(),this._unreleasePerform()},_unreleasePerform:function(){this._saveChanges({released:!1})},archive:function(e){e.preventDefault(),this._archivePerform()},_archivePerform:function(){this._saveChanges({archived:!0})},unarchive:function(e){e.preventDefault(),this._unarchivePerform()},_unarchivePerform:function(){this._saveChanges({archived:!1})},initializeProgressDialog:function(){var e=this,i=AJS.InlineDialog(this.ui.progressbar,"version-progress-"+this.cid,function(e,r,n){var s=AJS.$(r),a=s.closest("tr"),o=a.find("td.versions-table__name a"),l=[],c=0;return s.find(".progressbar__entry").each(function(e,i){var r=t(i),n=+r.attr("data-count");c+=+n,l.push({name:r.attr("data-title"),type:r.attr("data-type"),url:r.attr("data-url"),count:n})}),e.html(JIRA.Projects.Release.Templates.progressBarDialog({name:o.text(),url:o.attr("href"),totalCount:c,entries:l})),n(),i.refresh(),!1},{gravity:"w",autoWidth:!0,onHover:!0,hideDelay:500});i.on("click","a",function(){e.trigger("progressDialogClicked")})}});return u});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/VersionAdapter.js' */
define("jira/projects/release/version-adapter",["backbone","jquery","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util"],function(e,t,o,s){"use strict";var r=function(t){_.extend(this,e.Events),this._backboneModel=t,this.model=this};return r.RELEASE_SUCCESS_EVENT="version.model.save.success",r.RELEASE_ERROR_EVENT="version.model.save.error",r.prototype.getUnresolvedIssueCount=function(e){return this._backboneModel.getUnresolvedIssueCount(e),this},r.prototype.getMoveVersionsJSON=function(){return this._backboneModel.getMoveVersionsJSON()},r.prototype.toJSON=function(){return this._backboneModel.toJSON()},r.prototype.get=function(e){if("releaseDate"!==e)return this._backboneModel.get(e);var t=this._backboneModel.get("releaseDate");return t?t.iso:void 0},r.prototype.save=function(n,a){this._backboneModel.lastSaveAttributes=_.clone(n),a=a||{};var i=a.error,c=a.success,l=t.Deferred();return e.Model.prototype.save.call(this._backboneModel,[],{attrs:n}).done(function(e){l.resolve(),this._backboneModel.set("state",o.SUCCESSFUL),this._backboneModel.addStateTimeout(o.SUCCESSFUL,o.READY),c&&(c.call(this,this,e),this.trigger(r.RELEASE_SUCCESS_EVENT,n))}.bind(this)).fail(function(e){if(l.reject(e),400!=e.status&&this._backboneModel.set("state",o.ERROR_UPDATE),this._backboneModel.set("errorMsg",AJS.escapeHtml(s.getErrorMessageFromXHR(e))),i){var n=t.parseJSON(e.responseText||e.data);i.call(this._backboneModel,this._backboneModel,n,e),this.trigger(r.RELEASE_ERROR_EVENT,n)}}.bind(this)),l},r.prototype.render=function(){this._backboneModel.detailsSync()},r});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ItemCollectionView.js' */
define("jira/projects/release/item-collection-view",["jquery","underscore","jira/projects/abstract-list/item-collection-view","jira/projects/release/item-view","jira/projects/release/empty-item-view"],function(e,i,t,r,c){"use strict";return t.extend({childView:r,emptyView:c})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/TableLayoutView.js' */
define("jira/projects/release/table-layout-view",["jira/projects/abstract-list/table-layout-view","jira/projects/release/item-collection-view","jira/projects/abstract-model/submit-model-states","jquery"],function(e,t,r,i){"use strict";var o=e.extend({template:JIRA.Projects.Release.Templates.tableLayout,ItemCollectionView:t,onRender:function(){e.prototype.onRender.apply(this,arguments),this.makeSortable()},makeSortable:function(){var e=this.$el.find("tbody.items"),t=!1;e.sortable({placeholder:{element:function(e){return i('<tr class="item-placeholder"><td colspan="'+e.find("td").length+'"></td></tr>').css("height",e.height()+"px")[0]},update:function(e,t){}},handle:".versions-table__handle",axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8e3,update:function(i,o){if(t)return e.sortable("cancel"),void(t=!1);var n=this.collection.get(o.item.data("version-id")),a=this.collection.at(this.collection.indexOf(n)+1),s=this.collection.get(o.item.nextAll("tr[data-version-id]").first().data("version-id"));n&&(n.set("state",r.IN_PROGRESS),n.sync("move",s,{}).then(function(){JIRA.trace("jira.version.reorder.success")}).fail(function(){this.reorder(n,a),JIRA.trace("jira.version.reorder.failure")}.bind(this)).always(function(){n.set("state",r.READY),JIRA.trace("jira.version.reorder.finished")}),this.reorder(n,s))}.bind(this),helper:function(e,t){var r=t.find("td"),o=t.clone();return o=o.appendTo("body").wrap('<table class="aui dynamic-table versions-table versions-table__readonly"><tbody class="items"></tbody></table>').parent().parent().css("left",t.offset().left+"px"),o.find("td").each(function(e,t){i(t).css("width",i(r[e]).width()+"px")}),o}}),i(document).keyup(function(r){r.keyCode===i.ui.keyCode.ESCAPE&&(t=!0,e.sortable("cancel"),t=!1)}),this.listenTo(this.collection,"add remove destroy",function(t,r){var i=e.data("sortable");i&&(i.refresh(),i.helper&&i._setContainment())})},reorder:function(e,t){var r=i(window).scrollTop();this.collection.trigger("reorder",e,t),i(window).scrollTop(r)}});return o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/MergeView.js' */
define("jira/projects/release/merge-view",["jira/projects/libs/marionette","jira/dialog/form-dialog","jira/ajs/select/multi-select","jquery"],function(e,i,t,r){"use strict";var n=e.ItemView.extend({template:JIRA.Projects.Release.Templates.merge,ui:{mergeButton:"#versions-merge"},onRender:function(){this.ui.mergeButton.on("click",this.mergeVersions.bind(this))},initialize:function(e){this.pageableItems=e.pageableItems,this.isProjectAdmin=!!e.isProjectAdmin},serializeData:function(){return{isProjectAdmin:this.isProjectAdmin,versionsSize:this.pageableItems.originalCollection.length}},mergeVersions:function(e){e.preventDefault();var n=new JIRA.Admin.Version.MergeForm({collection:this.pageableItems.originalCollection}),o=function(e){return e.idsToMerge?e.idsToMerge=Array.isArray(e.idsToMerge)?e.idsToMerge:[e.idsToMerge]:e.idsToMerge=[],e},s=new i({id:"versionsMergeDialog",content:function(e){n.render(function(i){e(i)})},submitHandler:function(e){var i=o(this.$form.serializeObject());s.$popup.find("#idsToMerge + .error").length>0?(s.hideFooterLoadingIndicator(),s.$popup.find(".aui-button:disabled").removeAttr("disabled")):0===i.idsToMerge.length?s.hide():n.submit(i,function(){s.hide()}),e.preventDefault()}});return s.onContentReady(function(){var e=r("#versionsMergeDialog select[multiple]");new t({element:e,itemAttrDisplayed:"label"})}),s.show(),s}});return n});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SearchLayoutView.js' */
define("jira/projects/release/searchlayoutview",["jira/projects/libs/marionette","backbone","jira/projects/page/release/view/filter","jira/projects/release/noversionsitemview","jira/projects/release/table-layout-view","jira/projects/release/merge-view","jira/projects/release/config-data-view"],function(e,i,t,n,r,o,s){"use strict";var a=e.LayoutView.extend({template:JIRA.Projects.Release.Templates.searchLayout,regions:{submitRegion:"#submit-container",filterRegion:"#filter-container",mainRegion:"#content-container",mergeRegion:"#merge-container",configDataRegion:"#config-data-container"},initialize:function(e){this.filter=e.filter,this.pageableItems=e.pageableItems,this.releaseLearnMoreUrl=e.releaseLearnMoreUrl,this.submitController=e.submitController,this.configDataModel=e.configDataModel,this.listenTo(this.pageableItems,"collectionChanged",this._renderMainRegion),this.isProjectAdmin=e.isProjectAdmin},serializeData:function(){return{isProjectAdmin:this.isProjectAdmin}},onRender:function(){this.submitController.displaySubmitView()&&this.submitRegion.show(this.submitController.showView()),this._renderMainRegion()},_renderMainRegion:function(){if(0===this.pageableItems.originalCollection.length)this.mainRegion.show(new n({model:new i.Model({learnMoreUrl:this.releaseLearnMoreUrl})})),this.filterRegion.empty(),this.filter.emptyContainsField(),this.mergeRegion.empty();else{this.filterRegion.show(new t({model:this.filter,isProjectAdmin:this.isProjectAdmin})),this.listenTo(this,"filterChanged",function(){this.filterRegion.currentView.render()});var e=new r({submitController:this._submitController,collection:this.pageableItems});this.mainRegion.show(e),this.mainRegion.currentView.on("childview:progressDialogClicked",function(){this.trigger("progressDialogClicked")}.bind(this));var a=new o({pageableItems:this.pageableItems,isProjectAdmin:this.isProjectAdmin});this.mergeRegion.show(a)}var l=new s({model:this.configDataModel});this.configDataRegion.show(l)}});return a});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ConfigDataView.js' */
define("jira/projects/release/config-data-view",["jira/projects/libs/marionette"],function(e){"use strict";var t=e.ItemView.extend({template:JIRA.Projects.Release.Templates.calendarConfiguration});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ConfigDataModel.js' */
define("jira/projects/release/config-data-model",["backbone","jira/projects/release/calendar-params-data"],function(e,a){"use strict";return e.Model.extend({defaults:{ifFormat:a.ifFormat}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ReleasePageApp.js' */
define("jira/projects/page/release/release-page-app",["jira/projects/libs/marionette","jira/api/projects","jira/data/local-storage","wrm/data","backbone","jquery","jira/projects/release/searchlayoutview","jira/projects/release/submit-controller","jira/projects/release/pageable-versions-collection","jira/projects/release/filter-model","jira/projects/abstract-list/submit-model-events","jira/projects/release/config-data-model","jira/dialog/form-dialog","jira/util/events"],function(e,t,r,a,i,o,s,n,l,c,g,u,p,m){"use strict";function j(){return void 0!==t.getCurrentProjectId()}var d=a.claim("com.atlassian.jira.projects.page.release:projectAdmin"),f=new e.Application;return f.on("start",function(b){function R(e){try{r.setItem(I,e)}catch(e){console.warn(e)}}function v(){f.trigger("navigate")}if(j()){var A=t.getCurrentProjectId(),I="jira-projects:release-page-status-"+A,w=o("head");w.append(o("<meta>").attr("name","projectKey").attr("content",t.getCurrentProjectKey())),w.append(o("<meta>").attr("name","projectId").attr("content",t.getCurrentProjectId()));var P=b.container,y=a.claim("com.atlassian.jira.projects.page.release:learnMoreUrl");f.pageableItems=new l(null,{data:b.data}),f.filter=new c({pageableCollection:f.pageableItems,status:"unreleased",contains:""}),f.filter.filterCollection(),f.filter.on("change:status",function(e,t){R(t)}),f.pageableItems.filter=f.filter,f.configDataModel=new u,f.submitController=new n({pageableItems:f.pageableItems,isProjectAdmin:d}),f.addRegions({mainRegion:new e.Region({el:P})}),f.mainRegion.on("show",function(){AJS.populateParameters(),f.trigger("mainRegionShown")}),f.mainRegion.show(new s({filter:f.filter,pageableItems:f.pageableItems,releaseLearnMoreUrl:y,submitController:f.submitController,isProjectAdmin:d,configDataModel:f.configDataModel})),f.mainRegion.currentView.on("progressDialogClicked",function(){f.trigger("progressDialogClicked")}),f.mainRegion.currentView.on("navigate",v),f.router=new JIRA.Projects.AbstractList.Router,f.router.on("route:any",function(){var e=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)||"unreleased",t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",!0)||"";+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",!0)||1;f.filter.set("status",e,{silent:!0}),R(e),f.filter.set("contains",t,{silent:!0}),f.filter.filterCollection(),f.mainRegion.currentView.trigger("filterChanged")}),f.filter.on("navigate",v),f.router.on("route:any",v);try{var h=r.getItem(I);!JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)&&j()&&h&&(f.filter.set("status",h,{silent:!0}),JIRA.Projects.AbstractList.NavigationUtils.append("status",h))}catch(e){console.warn(e)}i.history&&i.History&&!i.History.started&&i.history.start({root:JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot(),pushState:JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported}),m.bind(g.SERVER_ERROR,function(e,t){var r=o("#project-config-error-console");t&&t.errorMessages&&(r.empty(),new p({id:"server-error-dialog",content:function(e){e(JIRA.Templates.Common.serverErrorDialog({message:t.errorMessages[0]}))}}).show())})}}),f});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/release-page-data.js' */
define("jira/projects/page/release/release-page-data",["jquery","jira/api/projects","jira/ajs/ajax/smart-ajax","wrm/data","wrm/context-path"],function(e,a,r,t,s){"use strict";var i=new e.Deferred;try{i.resolve(t.claim("com.atlassian.jira.projects.page.release:versions"))}catch(e){i.reject("The data could not be obtained. This may be a temporary glitch or the server may be down.")}return i.promise()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-board-location-picker', location = 'jira-agile-module/includes/js/boardlocation/location-type.js' */
define("jira-agile/boardlocation/location-type",[],function(){"use strict";return{project:"project",user:"user"}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-board-location-picker', location = 'jira-agile-module/includes/js/boardlocation/board-location-picker.js' */
define("jira-agile/boardlocation/board-location-picker",["jira-agile/rapid/ajax","jira-agile/boardlocation/location-type"],function(r,t){"use strict";function e(e){if(!e||!e.selector)throw new Error("Board location picker requires a selector");this.$select=AJS.$(e.selector),this.useSingleSelect=Boolean(e.useSingleSelect),this.filterSoftwareProjects=Boolean(e.filterSoftwareProjects),this.selectedItems=e.selectedItems||{},this.projectsOnly=e.projectsOnly||!1,this.change=e.change||function(){},e.currentProjectId&&(this.currentProjectId=e.currentProjectId,this.currentProject=null),this.restUrl=this.projectsOnly?"/project.json":"/boardLocation.json",this.restUrl=this.filterSoftwareProjects&&this.projectsOnly?this.restUrl+="?isSoftware=true":this.restUrl;var t=this.useSingleSelect?AJS.SingleSelect:AJS.MultiSelect;this.selectPicker=new t({element:this.$select,width:300,itemAttrDisplayed:"label",ajaxOptions:{query:!0,url:r.buildRestUrl(this.restUrl),formatResponse:this._processAjax.bind(this)}}),this.useSingleSelect&&this.selectedItems&&this.selectPicker.setSelection(this.selectedItems),"function"==typeof e.change&&(this.$select.bind("unselect",this.change),this.$select.bind("change",this.change)),"function"==typeof e.focusout&&this.selectPicker.$container.bind("focusout",e.focusout),this.currentProjectId&&this.selectPicker.requestSuggestions(!0).then(function(){this.currentProject&&this.selectPicker.addItem(this._getProjectDescriptor(this.currentProject))}.bind(this))}return e.prototype.show=function(){AJS.warn("BoardLocationPicker.show is deprecated. It is no longer needed as all initialisation occurs in the constructor")},e.prototype.hasValue=function(){return Boolean(this.$select.val())},e.prototype.hasErrors=function(){return 0<this.selectPicker.$container.parent().find(".error").length},e.prototype.getValue=function(){return this.$select.val()},e.prototype.getElement=function(){return this.$select},e.prototype.setSelectedItems=function(e){return this.selectPicker.setSelection(e)},e.prototype._findProject=function(e,t){return(e||[]).filter(function(e){return t&&e.id===t}.bind(this))[0]},e.prototype._findUnmatchingProjects=function(e,t){return(e||[]).filter(function(e){return!t||e.id!==t}.bind(this))},e.prototype._processAjax=function(e){if(!(e&&(e.projects&&e.projects.length||e.user)))return[];this.currentProject=this._findProject(e.projects,this.currentProjectId);var t=this._findUnmatchingProjects(e.projects,this.currentProjectId).map(this._getProjectDescriptor.bind(this)),r=new AJS.GroupDescriptor({weight:1,label:"Projects"}),i=new AJS.GroupDescriptor({weight:2,label:"Personal"});if(this.currentProject?[this._getProjectDescriptor(this.currentProject)].concat(t).forEach(function(e){r.addItem(e)}):t.forEach(function(e){r.addItem(e)}),Boolean(e.user)){e=this._getUserDescriptor(e.user);return null!==e&&i.addItem(e),[r,i]}return[r]},e.prototype._getProjectDescriptor=function(e){if(!e)throw new Error("BoardLocationPicker.prototype._getProjectDescriptor requires a project");return new AJS.ItemDescriptor({value:"project_"+String(e.id),key:String(e.key),label:e.displayName,name:e.name,html:AJS.escapeHTML(String(e.displayName)),icon:e.avatar,locationType:t.project})},e.prototype._getUserDescriptor=function(e){return e?new AJS.ItemDescriptor({value:"user_"+String(e.id),key:null,label:e.displayName,name:e.name,html:AJS.escapeHTML(String(e.displayName)),icon:e.avatar,locationType:t.user}):null},e}),AJS.namespace("GH.BoardLocationPicker",null,require("jira-agile/boardlocation/board-location-picker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/ui/startwizard/WizardView.soy' */
// This file was automatically generated from WizardView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.startwizard.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.startwizard == 'undefined') { GH.tpl.startwizard = {}; }


GH.tpl.startwizard.renderMethodologySelectionStep = function(opt_data, opt_ignored) {
  return '<form class="aui ghx-halved-vertical"><div class="aui-group"><div class="aui-item"><h2>' + soy.$$escapeHtml('Scrum') + '</h2><p>' + soy.$$escapeHtml('Scrum focuses on planning, committing and delivering time-boxed chunks of work called Sprints') + '</p></div><div class="aui-item"><h2>' + soy.$$escapeHtml('Kanban') + '</h2><p>' + soy.$$escapeHtml('Kanban focuses on visualising your workflow and limiting work-in-progress to facilitate incremental improvements to your existing process') + '</p></div></div><div class="aui-group ghx-button-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum" class="aui-button">' + soy.$$escapeHtml('Create a Scrum board') + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban" class="aui-button">' + soy.$$escapeHtml('Create a Kanban board') + '</button></div></div>' + ((opt_data.canCreateProject) ? '<div class="aui-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml('Create a Scrum board with sample data') + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml('Create a Kanban board with sample data') + '</button></div></div>' : '') + '</form>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodologySelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodologySelectionStep';
}


GH.tpl.startwizard.renderMethodSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split" id="js-method-choice"><div class="aui-item"><form class="aui"><fieldset class="group ghx-space-saver">' + ((opt_data.canCreateProject) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-new-project" name="ghx-wizard-method" value="newProject" ' + ((opt_data.selectedOption == 'newProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-new-project">' + soy.$$escapeHtml('Board created with new Software project') + '</label><div class="description">' + soy.$$escapeHtml('A new board based on a new Software project') + '</div></div>' : '') + ((opt_data.hasProjectsAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-project" name="ghx-wizard-method" value="existingProject" ' + ((opt_data.selectedOption == 'existingProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-project">' + soy.$$escapeHtml('Board from an existing project') + '</label><div class="description">' + soy.$$escapeHtml('Boards can contain one or more projects.') + '</div></div>' : '') + ((opt_data.hasFiltersAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-filter" name="ghx-wizard-method" value="existingFilter" ' + ((opt_data.selectedOption == 'existingFilter') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-filter">' + soy.$$escapeHtml('Board from an existing Saved Filter') + '</label><div class="description">' + soy.$$escapeHtml('An advanced option using a JQL filter.') + '</div></div>' : '') + '</fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodSelectionStep';
}


GH.tpl.startwizard.renderProjectSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-project-board-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-project-board-name" maxlength="155"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-choose-project" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml('Select one or more projects to include in this board') + '</div></div><div class="field-group" id="ghx-board-location-picker-for-multiple-project"><label for="ghx-field-board-location-change-for-multiple-project">' + soy.$$escapeHtml('Location') + '<span class="aui-icon icon-required"></span></label><div id="ghx-field-board-location-change-for-multiple-project" class="field-value ghx-spinner"></div></div></fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectSelectionStep';
}


GH.tpl.startwizard.renderFilterSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-filter-view-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-filter-view-name" name="name" maxlength="155"></div><div class="field-group" id="ghx-filter-picker"><label for="ghx-wizard-filter-select">' + soy.$$escapeHtml('Saved filter') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-filter-select" class="hidden"></select><div id="ghx-filter-error"></div></div><div id="ghx-create-permissioninfo-container"></div><div class="field-group" id="ghx-board-location-picker-for-filter"><label for="ghx-field-board-location-change-for-filter">' + soy.$$escapeHtml('Location') + '<span class="aui-icon icon-required"></span></label><div id="ghx-field-board-location-change-for-filter" class="field-value ghx-spinner"></div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml('Saved Filters') + '</h3><div class="description">' + soy.$$escapeHtml('Choose from a list of existing filters as a base for your new board. To create a new Saved Filter, save a search in the Issue Navigator.') + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderFilterSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderFilterSelectionStep';
}


GH.tpl.startwizard.renderProjectCreationStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div id="project-create-help-instruction" class="assistive">' + soy.$$escapeHtml('On typing the project name, the content will be updated in the Project Key input field') + '</div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname">' + soy.$$escapeHtml('Project name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname" aria-describedby="project-create-help-instruction" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectName) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey">' + soy.$$escapeHtml('Project key') + '<span class="aui-icon icon-required"></span></label><input class="text short-field" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectKey) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead">' + soy.$$escapeHtml('Project lead') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead" class="' + ((opt_data.strictMode) ? 'js-default-user-picker-by-account-id' : 'js-default-user-picker') + ' hidden"><option' + ((opt_data.user.avatarUrl) ? ' style="background-image:url(\'' + soy.$$escapeHtml(opt_data.user.avatarUrl) + '\')"' : '') + 'selected="selected" value="' + ((opt_data.strictMode) ? soy.$$escapeHtml(opt_data.user.accountId) : soy.$$escapeHtml(opt_data.user.name)) + '">' + soy.$$escapeHtml(opt_data.user.displayName) + '</option></select><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches.') + '</div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml('Creating a project') + '</h3>' + ((opt_data.methodology == 'simple') ? '<div class="description">' + soy.$$escapeHtml('A board will be created with your project, and will be named after your project.') + '</div>' : '<div class="description">' + soy.$$escapeHtml('A board will be created with your project, and will be named after your project. You can rename your board in the board settings screen.') + '</div>') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectCreationStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectCreationStep';
}


GH.tpl.startwizard.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Shares') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + '</div><div class="field-group"><label>' + soy.$$escapeHtml('Owner') + '</label><span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.owner.displayName) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderPermissionInfo.soyTemplateName = 'GH.tpl.startwizard.renderPermissionInfo';
}


GH.tpl.startwizard.createProjectTimeout = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('The operation has timed out, the project and board might have been created already. You can confirm this by checking the \x3ca href\x3d\x22{0}\x22\x3eManage Boards\x3c/a\x3e page.',opt_data.manageBoardURL));
};
if (goog.DEBUG) {
  GH.tpl.startwizard.createProjectTimeout.soyTemplateName = 'GH.tpl.startwizard.createProjectTimeout';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/configuration/RapidView.soy' */
// This file was automatically generated from RapidView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.view.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.view == 'undefined') { GH.tpl.rapid.view = {}; }


GH.tpl.rapid.view.renderConfigurationHeader = function(opt_data, opt_ignored) {
  return '<div id="ghx-modes-tools">' + aui.buttons.button({text: 'Back to board', type: 'subtle', href: GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidViewId + '&useStoredSettings=true', id: 'back-to-board', iconType: 'aui', iconText: 'Back to board', iconClass: 'aui-icon-small aui-iconfont-back-page'}) + '</div><h2>' + soy.$$escapeHtml('Settings for') + ' <span id="js-nav-view-name">' + soy.$$escapeHtml(opt_data.name) + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationHeader.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationHeader';
}


GH.tpl.rapid.view.renderConfigurationTabs = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-header"></div><div class="aui-page-panel"><div class="aui-page-panel-inner"><div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml('Settings') + '</strong></div><ul id="ghx-config-nav" class="aui-nav">';
  var configurationTabList21 = opt_data.configurationTabs;
  var configurationTabListLen21 = configurationTabList21.length;
  for (var configurationTabIndex21 = 0; configurationTabIndex21 < configurationTabListLen21; configurationTabIndex21++) {
    var configurationTabData21 = configurationTabList21[configurationTabIndex21];
    output += '<li data-tabitem="' + soy.$$escapeHtml(configurationTabData21.key) + '"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=' + soy.$$escapeHtml(configurationTabData21.key) + '">' + soy.$$escapeHtml(configurationTabData21.label) + '</a></li>';
  }
  output += '</ul></div></nav></div><section id="ghx-config-panel-content" class="aui-page-panel-content">';
  var configurationTabList35 = opt_data.configurationTabs;
  var configurationTabListLen35 = configurationTabList35.length;
  for (var configurationTabIndex35 = 0; configurationTabIndex35 < configurationTabListLen35; configurationTabIndex35++) {
    var configurationTabData35 = configurationTabList35[configurationTabIndex35];
    output += '<div class="ghx-page-panel-content-item" id="' + soy.$$escapeHtml(configurationTabData35.key) + '">' + soy.$$filterNoAutoescape(configurationTabData35.html) + '</div>';
  }
  output += '</section></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationTabs.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationTabs';
}


GH.tpl.rapid.view.renderViewNameEditForm = function(opt_data, opt_ignored) {
  return '<label for="ghx-field-viewname">' + soy.$$escapeHtml('Board name') + '</label>' + GH.tpl.rapid.view.renderViewNameField(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameEditForm';
}


GH.tpl.rapid.view.renderViewNameField = function(opt_data, opt_ignored) {
  return '<span class="field-value ' + ((opt_data.canEdit) ? 'js-edit-rapidViewName' : '') + '" data-fieldname="viewname" data-fieldvalue="' + soy.$$escapeHtml(opt_data.rapidViewName) + '"><span id="ghx-field-viewname"' + ((opt_data.canEdit) ? ' class="ghx-editable" tabindex="0" role="button" aria-label="' + soy.$$escapeHtml('Edit board name') + '"' : '') + '>' + soy.$$escapeHtml(opt_data.rapidViewName) + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameField.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameField';
}


GH.tpl.rapid.view.renderViewBoardAdminsEditForm = function(opt_data, opt_ignored) {
  var output = '<label for="ghx-field-view-board-admins">' + soy.$$escapeHtml('Administrators') + '</label><span  class="field-value' + ((opt_data.canEdit) ? ' js-edit-rapidViewBoardAdmin' : '') + '" ><span id="ghx-field-view-board-admins-span"' + ((opt_data.canEdit) ? ' class="ghx-editable" tabindex="0" role="button" aria-label="' + soy.$$escapeHtml('Edit administrators') + '"' : '') + '>';
  var itemList81 = opt_data.model;
  var itemListLen81 = itemList81.length;
  if (itemListLen81 > 0) {
    for (var itemIndex81 = 0; itemIndex81 < itemListLen81; itemIndex81++) {
      var itemData81 = itemList81[itemIndex81];
      output += ((itemData81.isUser) ? '<span class="user-hover" rel="' + soy.$$escapeHtml(itemData81.key) + '">' + soy.$$escapeHtml(itemData81.displayName) + '</span>' : '<span>' + soy.$$escapeHtml(itemData81.displayName) + '</span>') + ((! (itemIndex81 == itemListLen81 - 1)) ? '<span>, </span>' : '');
    }
  } else {
    output += '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>';
  }
  output += '</span></span><span id="ghx-field-view-board-admins">' + ((opt_data.canUsePicker) ? '<select id="ghx-board-admins" multiple="multiple" class="hidden"></select>' : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardAdminsEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardAdminsEditForm';
}


GH.tpl.rapid.view.renderViewBoardLocationForm = function(opt_data, opt_ignored) {
  return '' + ((opt_data.rapidViewBoardLocation) ? '<label for="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '-select">' + soy.$$escapeHtml('Location') + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><span id="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '"' + ((opt_data.canEdit) ? ' tabindex="0" role="button" aria-label="' + soy.$$escapeHtml('Edit location') + '"' : '') + '>' + ((opt_data.rapidViewBoardLocation.avatarURI) ? '<span class="aui-avatar aui-avatar-small aui-avatar-project jira-system-avatar"><span class="aui-avatar-inner"><img src=' + soy.$$escapeHtml(opt_data.rapidViewBoardLocation.avatarURI) + '></span></span>' : '') + '<span>' + soy.$$escapeHtml(opt_data.rapidViewBoardLocation.name) + '</span></span><select id="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '-select" class="hidden"></select>' + ((opt_data.showHelp) ? '<div class="description">' + soy.$$escapeHtml('Select a Software project or your own profile as the place where this board will live') + '</div>' : '') : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardLocationForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardLocationForm';
}


GH.tpl.rapid.view.renderBoardAdminsEditNoPicker = function(opt_data, opt_ignored) {
  var output = '<span class="ghx-margin-right"><strong>' + soy.$$escapeHtml('Groups') + '</strong>: <input class="text medium-field" id="ghx-board-admin-edit-groups" value="';
  var itemList148 = opt_data.model.groupKeys;
  var itemListLen148 = itemList148.length;
  for (var itemIndex148 = 0; itemIndex148 < itemListLen148; itemIndex148++) {
    var itemData148 = itemList148[itemIndex148];
    output += soy.$$escapeHtml(itemData148.key) + ((! (itemIndex148 == itemListLen148 - 1)) ? ',' : '');
  }
  output += '" /></span><strong>' + soy.$$escapeHtml('Users') + '</strong>: <input class="text medium-field " id="ghx-board-admin-edit-users" value="';
  var itemList157 = opt_data.model.userKeys;
  var itemListLen157 = itemList157.length;
  for (var itemIndex157 = 0; itemIndex157 < itemListLen157; itemIndex157++) {
    var itemData157 = itemList157[itemIndex157];
    output += soy.$$escapeHtml(itemData157.key) + ((! (itemIndex157 == itemListLen157 - 1)) ? ',' : '');
  }
  output += '" /><div class="description">' + soy.$$escapeHtml('Separate user keys and group names with commas.') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderBoardAdminsEditNoPicker.soyTemplateName = 'GH.tpl.rapid.view.renderBoardAdminsEditNoPicker';
}


GH.tpl.rapid.view.renderConfigPermissionsWarning = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.canEdit != true) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + ((opt_data.model.parentProject) ? '<strong>' + soy.$$escapeHtml('Contact your project admin or board admin to update the board settings') + '</strong>' : '<strong>' + soy.$$escapeHtml('Contact a Jira or Board Administrator to configure this board.') + '</strong>') + '</p></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigPermissionsWarning.soyTemplateName = 'GH.tpl.rapid.view.renderConfigPermissionsWarning';
}


GH.tpl.rapid.view.renderFilterDetails = function(opt_data, opt_ignored) {
  var output = '<form class="aui" id="ghx-savedfilter-form"><div class="aui-message warning hidden" id="unmapped-issues-warning"><span class="aui-icon icon-warning"></span><p>' + soy.$$escapeHtml('Some issues in the Saved Filter will not be shown on the board.') + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=columns" id="js-view-columns">' + soy.$$escapeHtml('View unmapped statuses which contain these issues.') + '</a></p></div><div class="field-group"><label>' + soy.$$escapeHtml('Saved Filter') + '</label><span id="ghx-filter-change" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '"' + ((opt_data.canEdit) ? ' tabindex="0" role="button" aria-label="' + soy.$$escapeHtml('Edit saved filter') + '"' : '') + '>' + soy.$$escapeHtml(opt_data.savedFilter.name) + '</span><select id="ghx-filter-change-select" class="hidden"></select><p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&requestId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + ((opt_data.canEdit) ? soy.$$escapeHtml('Edit Filter Query') : soy.$$escapeHtml('View Filter Query')) + '</a></p></div>' + GH.tpl.rapid.view.renderPermissionInfo(opt_data) + '<div class="field-group ghx-jql-preview"><label>' + soy.$$escapeHtml('Filter Query') + '</label><span class="field-value">' + ((opt_data.savedFilter.query) ? soy.$$escapeHtml(opt_data.savedFilter.query) : '') + '</span></div><div class="field-group"><label>' + soy.$$escapeHtml('Ranking') + '</label><span class="field-value">';
  if (opt_data.savedFilter.isOrderedByRank) {
    output += soy.$$escapeHtml('Using Rank');
  } else {
    if (! opt_data.savedFilter.orderByWarnings) {
      output += soy.$$escapeHtml('Ranking is disabled, as the Filter Query is not ordered by Rank');
    } else {
      var warningList233 = opt_data.savedFilter.orderByWarnings.errorMessages;
      var warningListLen233 = warningList233.length;
      for (var warningIndex233 = 0; warningIndex233 < warningListLen233; warningIndex233++) {
        var warningData233 = warningList233[warningIndex233];
        output += soy.$$escapeHtml(warningData233) + '<br>';
      }
    }
    output += (opt_data.savedFilter.canEdit && opt_data.savedFilter.canBeFixed) ? '<p><button class="aui-button js-update-filter-order-by">' + soy.$$escapeHtml('Add Rank') + '</button></p>' : '';
  }
  output += '</span></div>';
  if (opt_data.savedFilter.queryProjects) {
    output += '<div class="field-group"><label>' + soy.$$escapeHtml('Projects in board') + '</label><ul id="ghx-show-projects-in-board" class="field-value">';
    if (opt_data.savedFilter.queryProjects.displayMessage) {
      output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.queryProjects.displayMessage) + '</span>';
    } else {
      var avatarSize__soy254 = 'small';
      var projectList255 = opt_data.savedFilter.queryProjects.projects;
      var projectListLen255 = projectList255.length;
      for (var projectIndex255 = 0; projectIndex255 < projectListLen255; projectIndex255++) {
        var projectData255 = projectList255[projectIndex255];
        output += '<li>' + aui.avatar.avatar({isProject: 'true', size: '' + soy.$$escapeHtml(avatarSize__soy254), avatarImageUrl: soy.$$escapeHtml("") + '/secure/projectavatar?size=' + soy.$$escapeHtml(avatarSize__soy254) + '&pid=' + soy.$$escapeHtml(projectData255.id), extraClasses: 'jira-system-avatar'}) + '<span>' + soy.$$escapeHtml(projectData255.name) + '</span><p>';
        var viewProjectPermissionText__soy273 = 'View permission';
        output += ((projectData255.isValidEditProjectConfigAction) ? '<a href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(projectData255.key) + '/permissions">' + soy.$$escapeHtml(viewProjectPermissionText__soy273) + '</a>' : '<a class="disabled">' + soy.$$escapeHtml(viewProjectPermissionText__soy273) + '</a><span class="aui-icon aui-icon-small aui-iconfont-info" title="' + soy.$$escapeHtml('You are not allowed to view this Project Permission') + '"></span>') + '</p></li>';
      }
    }
    output += '</ul></div>';
  }
  output += (opt_data.isSubqueriesConfigurable) ? '<div class="field-group ghx-jql"><label for="ghx-sub-jql">' + soy.$$escapeHtml('Kanban board sub-filter') + '</label><div id="js-sub-container-work">' + GH.tpl.rapid.view.renderSubQueryView({section: 'board.kanban.work', queryValue: opt_data.subqueries[0], canEdit: opt_data.canEdit}) + '</div><div class="description">' + soy.$$escapeHtml('Further filtering of issues for unreleased work.') + '</div></div>' : '';
  if (opt_data.isOldDoneIssuesCutoffConfigurable) {
    output += '<div class="field-group ghx-show-old-limit"><label for="ghx-limit-days">' + soy.$$escapeHtml('Hide completed issues older than') + '</label><select id="ghx-limit-days" class="select" ' + ((opt_data.canEdit != true) ? 'disabled="disabled"' : '') + '>';
    var optionList313 = opt_data.oldDoneIssuesCutoffOptions;
    var optionListLen313 = optionList313.length;
    for (var optionIndex313 = 0; optionIndex313 < optionListLen313; optionIndex313++) {
      var optionData313 = optionList313[optionIndex313];
      output += '<option value="' + soy.$$escapeHtml(optionData313.value) + '" ' + ((opt_data.oldDoneIssuesCutoff == optionData313.value) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData313.label) + '</option>';
    }
    output += '</select><div class="description">' + soy.$$escapeHtml('Speed up your board by hiding issues you\x27re no longer working on.') + '</div></div>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderFilterDetails.soyTemplateName = 'GH.tpl.rapid.view.renderFilterDetails';
}


GH.tpl.rapid.view.renderSubQueryView = function(opt_data, opt_ignored) {
  return '<span id="ghx-sub-work" class="field-value' + ((opt_data.canEdit) ? ' js-editable ghx-editable ghx-jql' : '') + '"' + ((opt_data.canEdit) ? ' tabindex="0" role="button" aria-label="' + soy.$$escapeHtml('Edit kanban board sub-filter') + '"' : '') + '>' + ((opt_data.queryValue) ? soy.$$escapeHtml(opt_data.queryValue) : (opt_data.canEdit) ? '<em>' + soy.$$escapeHtml('Add Sub-Filter') + '</em>' : soy.$$escapeHtml('No sub-filter')) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryView.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryView';
}


GH.tpl.rapid.view.renderSubQueryControls = function(opt_data, opt_ignored) {
  return '<textarea class="js-jql-autocomplete-field textarea" id="ghx-sub-jql" data-section="' + soy.$$escapeHtml(opt_data.section) + '" cols="20" rows="2">' + soy.$$escapeHtml(opt_data.queryValue) + '</textarea><span id="ghx-sub-jql-errormsg" class="icon jqlgood js-jql-autocomplete-error"><span></span></span><button class="aui-button js-subquery-submit">' + soy.$$escapeHtml('Update') + '</button><button class="aui-button js-subquery-cancel">' + soy.$$escapeHtml('Cancel') + '</button>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryControls.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryControls';
}


GH.tpl.rapid.view.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Shares') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + '<label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Edits') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.editPermissions}) + ((opt_data.savedFilter.canEdit) ? '<p class="ghx-additional"><a id="js-edit-filter" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/EditFilter!default.jspa?filterId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + soy.$$escapeHtml('Edit Filter Shares') + '</a></p>' : '</div><div class="field-group"><label>' + soy.$$escapeHtml('Owner') + '</label><span class="field-value">' + soy.$$filterNoAutoescape(opt_data.savedFilter.owner.renderedLink) + '</span>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionInfo.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionInfo';
}


GH.tpl.rapid.view.renderPermissionEntries = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.permissionEntries.length > 0) {
    output += '<span class="field-value"><ul id="ghx-create-permissioninfo">';
    var permissionEntryList394 = opt_data.permissionEntries;
    var permissionEntryListLen394 = permissionEntryList394.length;
    for (var permissionEntryIndex394 = 0; permissionEntryIndex394 < permissionEntryListLen394; permissionEntryIndex394++) {
      var permissionEntryData394 = permissionEntryList394[permissionEntryIndex394];
      output += '<li>';
      var permissionValueList396 = permissionEntryData394.values;
      var permissionValueListLen396 = permissionValueList396.length;
      for (var permissionValueIndex396 = 0; permissionValueIndex396 < permissionValueListLen396; permissionValueIndex396++) {
        var permissionValueData396 = permissionValueList396[permissionValueIndex396];
        output += ((permissionValueData396.type == 'Shared with the public') ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-unlocked" title="' + soy.$$escapeHtml('Sharing unrestricted') + '">' + soy.$$escapeHtml('Sharing unrestricted') + '</span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml('Sharing restricted') + '">' + soy.$$escapeHtml('Sharing restricted') + '</span>') + ((permissionValueData396.name) ? '<strong>' + soy.$$escapeHtml(permissionValueData396.type) + ':</strong><span>' + soy.$$escapeHtml(permissionValueData396.name) + '</span>' : '<strong>' + soy.$$escapeHtml(permissionValueData396.type) + '</strong>');
      }
      output += '</li>';
    }
    output += '</ul></span>';
  } else {
    output += '<span class="field-value">' + soy.$$escapeHtml('No shares') + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionEntries.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionEntries';
}


GH.tpl.rapid.view.deleteForm = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.deleteForm.soyTemplateName = 'GH.tpl.rapid.view.deleteForm';
}


GH.tpl.rapid.view.confirmForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirmation') + '</h2><form class="aui" action="#" method="post"><div class="form-body"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><div class="form-footer buttons-container"><div class="buttons"><input id="submit" class="button" type="submit" value="' + soy.$$escapeHtml('Confirm') + '" /><a role="button" href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.confirmForm.soyTemplateName = 'GH.tpl.rapid.view.confirmForm';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/configuration/BoardLocationConfig.js' */
var _createClass=function(){function a(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}define("includes/js/rapid/configuration/BoardLocationConfig",["jquery","jira-agile/boardlocation/board-location-picker"],function(a,i){function t(e){_classCallCheck(this,t),this.$container=e,this.boardLocationPicker=void 0}return _createClass(t,[{key:"init",value:function(e){Object.assign(this,{},a.extend(!0,{boardLocationModel:{projectId:"",userLocationId:"",name:"None",avatarURI:""},selectedCallback:function(){},canEdit:!1,stayActivated:!1,isRequired:!1,showHelp:!1,boardLocationChangeId:""},e)),this.render()}},{key:"initClickHandler",value:function(){var t=this,o=this.$container.find(".field-value.ghx-editable");o.one("click",function(e){a(e.currentTarget).hide(),t.boardLocationPicker=new i({selector:"#"+t.boardLocationChangeId+"-select",change:t.changeHandler.bind(t),useSingleSelect:!0,selectedItems:t.getSelection(t.boardLocationModel,!0),filterSoftwareProjects:!0})}),o.on("keypress",function(e){return[13,32].includes(e.keyCode)&&o.click()}),this.stayActivated&&o.click()}},{key:"changeHandler",value:function(e,t){var o,a,i,n,r,c=this;t&&t.properties&&(o="project"===t.properties.locationType?t.properties.value.replace("project_",""):null,"project"===t.properties.locationType&&t.properties.key,a="user"===t.properties.locationType?t.properties.value.replace("user_",""):null,i=t.properties.label,n=t.properties.icon,this.validateSelection(t.properties).then(function(){c.boardLocationModel={projectId:o,userLocationId:a,name:i,avatarURI:n},c.selectedCallback(c.boardLocationModel)}),r="locationless",o?r="project":a&&(r="user"),AJS.trigger("analyticsEvent",{name:"gh.boardlocationconfig.location.changed",data:{locationType:r,automaticSetLocation:Boolean(t.properties.automaticSetLocation)}}))}},{key:"getSelection",value:function(e,t){return e.userLocationId&&"number"==typeof e.userLocationId?new AJS.ItemDescriptor({value:e.userLocationId.toString(),label:e.displayName||e.name,icon:e.avatar,html:AJS.escapeHTML(String(e.displayName||e.name)),locationType:e.locationType,savedFilter:e,automaticSetLocation:Boolean(t)}):new AJS.ItemDescriptor({value:e.projectId.toString(),label:e.name,icon:e.avatarURI,html:AJS.escapeHTML(String(e.name)),locationType:e.locationType,savedFilter:e,automaticSetLocation:Boolean(t)})}},{key:"setLocation",value:function(e){this.boardLocationPicker.setSelectedItems(this.getSelection(e,!0))}},{key:"render",value:function(){this.$container.html(GH.tpl.rapid.view.renderViewBoardLocationForm({rapidViewBoardLocation:this.boardLocationModel,canEdit:this.canEdit,showHelp:this.showHelp,isRequired:this.isRequired,ghxBoardLocationChangeId:this.boardLocationChangeId})),this.initClickHandler()}},{key:"validateSelection",value:function(e){return(this.validationCallback||Promise.resolve.bind(Promise))(e)}}]),t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/ui/startwizard/WizardView.js' */
!function(){GH.StartWizardView={},GH.StartWizardView.dialog=void 0,GH.StartWizardView.model=void 0,GH.StartWizardView.stepsNameStack=void 0,GH.StartWizardView.pages={},GH.StartWizardView.filterPicker=void 0,GH.StartWizardView.boardLocationPicker=void 0,GH.StartWizardView.locationModel=void 0,GH.StartWizardView.windowResizeListener=function(){GH.StartWizardView.dialog&&GH.StartWizardView.dialog.updateHeight()};var n=require("jira-agile/rapid/ajax"),a=require("jira/analytics/web-client"),e=require("jira-agile/rapid/analytics-tracker"),o=require("includes/js/rapid/configuration/BoardLocationConfig"),t=require("jira-agile/boardlocation/location-type"),i=require("jira-agile/boardlocation/board-location-picker"),d=require("internal/browser-metrics");GH.StartWizardView.analytics=new e("gh.create.wizard");var c=AJS.$.Deferred(),l=AJS.$.Deferred();GH.StartWizardView.steps={methodologySelection:{render:function(e){var t={canCreateProject:GH.UserData.canCreateProject()};return{header:"Create a board",content:GH.tpl.startwizard.renderMethodologySelectionStep(t)}},bind:function(e,t){AJS.$("#ghx-wizard-methodology-scrum").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("kanban",t)}),AJS.$("#ghx-wizard-methodology-scrum-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("kanban",t)})},analyticsScreenName:"chooseBoardTypeModal"},methodSelection:{render:function(e){var t=(t=e.method)||(GH.UserData.userConfig.canCreateProject?"newProject":"existingProject");return{header:"Create a board",content:GH.tpl.startwizard.renderMethodSelectionStep(_.extend({},e,{canCreateProject:GH.UserData.userConfig.canCreateProject,hasProjectsAccessible:GH.UserData.userConfig.hasProjectsAccessible,hasFiltersAccessible:GH.UserData.userConfig.hasFiltersAccessible,selectedOption:t}))}},bind:function(e){GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject()},next:function(e,t){e=e.find("input[name=ghx-wizard-method]").filter(":checked").val();t.method=e;t=AJS.$.Deferred();return"newProject"===e?t.resolve("projectCreation"):"existingProject"===e?t.resolve("projectSelection"):"existingFilter"===e?t.resolve("filterSelection"):t.reject(new Error("Unknown board creation method : "+e)),t.promise()},analyticsScreenName:"chooseBoardSourceModal"},projectCreation:{render:function(e){return e.prefix="project",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"project",sampleInfo:{projectName:"",projectKey:""},methodology:e.methodology})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createProject(GH.StartWizardView.dialog,e)},analyticsScreenName:"createBoardModal"},sampleProjectCreation:{render:function(e){return e.prefix="sample",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"sample",sampleInfo:e.sampleInfo})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createSampleProject(GH.StartWizardView.dialog,e)},analyticsScreenName:"createSampleProjectModal"},projectSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderProjectSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindProjectSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateProjectSelection(e)},analyticsScreenName:"createBoardModal"},filterSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderFilterSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindFilterSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateFilterSelection(e)},analyticsScreenName:"createBoardModal"}},GH.StartWizardView.show=function(e){GH.StartWizardView.dialog||(GH.StartWizardView.dialog=GH.Dialog.create({width:900,height:400,id:"ghx-wizard-dialog",onCancelFn:function(){GH.StartWizardView.disposeWizard(),GH.StartWizardView.analytics.trigger("cancel"),AJS.$("#navigation-apps.scope-switcher-trigger-button").focus()}}),window.addEventListener("resize",GH.StartWizardView.windowResizeListener),GH.StartWizardView.model={},GH.StartWizardView.stepsNameStack=[],GH.StartWizardView.dialog.show(),GH.StartWizardView.analytics.trigger("start"),GH.StartWizardView.preventSubmitOnEnter(),JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectId()?(n.get({url:"/project/"+JIRA.API.Projects.getCurrentProjectId(),deferErrorHandling:!0,timeout:1e4}).then(c.resolve).fail(c.reject),l.reject()):GH.UserData.userConfig.selectUserContainerByDefault?(n.get({url:"/boardLocation/currentUser",deferErrorHandling:!0,timeout:1e4}).then(l.resolve).fail(l.reject),c.reject()):(c.reject(),l.reject()))},GH.StartWizardView.preventSubmitOnEnter=function(){AJS.$("input").keydown(function(e){if(13===e.keyCode&&"ghx-wizard-filter-select-field"!==e.target.id)return e.preventDefault(),!1})},GH.StartWizardView.showStep=function(t){if(!_.has(GH.StartWizardView.steps,t))throw new Error("Unknown wizard step "+t);var r,e,a,i=GH.StartWizardView.dialog;GH.StartWizardView.pages[t]?(i.gotoPage(GH.StartWizardView.pages[t]),"methodSelection"===t&&GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject(),GH.StartWizardView.dialog.popup.element.find(".dialog-panel-body .aui-message-error").remove()):(e=(r=GH.StartWizardView.steps[t]).render(GH.StartWizardView.model),i.addPage(),GH.StartWizardView.pages[t]=i.curpage,i.addHeader(e.header),a=AJS.$(e.content),"methodSelection"===t&&GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject(),i.addPanel(null,a,"ghx-wizard-panel"),0<GH.StartWizardView.stepsNameStack.length&&i.addButton("Back",function(){var e=GH.StartWizardView.stepsNameStack.pop();GH.StartWizardView.showStep(e),!1===GH.StartWizardView.model.sampleData&&"scrum"===GH.StartWizardView.model.methodology&&AJS.$("#ghx-wizard-methodology-scrum").focus(),!0===GH.StartWizardView.model.sampleData&&"scrum"===GH.StartWizardView.model.methodology&&AJS.$("#ghx-wizard-methodology-scrum-sample").focus(),!1===GH.StartWizardView.model.sampleData&&"kanban"===GH.StartWizardView.model.methodology&&AJS.$("#ghx-wizard-methodology-kanban").focus(),!0===GH.StartWizardView.model.sampleData&&"kanban"===GH.StartWizardView.model.methodology&&AJS.$("#ghx-wizard-methodology-kanban-sample").focus()},"aui-button"),_.has(r,"complete")?i.addButton(r.completeActionName,function(){"true"!==AJS.$(this).attr("aria-disabled")&&r.complete(GH.StartWizardView.model)},"aui-button aui-button-primary js-wizard-button-complete"):_.has(r,"next")&&i.addButton("Next",function(){var e;"true"!==AJS.$(this).attr("aria-disabled")&&(e=r.next(a,GH.StartWizardView.model),e.done(function(e){e=e,GH.StartWizardView.stepsNameStack.push(t),GH.StartWizardView.showStep(e)}).fail(function(e){console.log(e),i.updateHeight()}))},"aui-button aui-button-primary js-wizard-button-next"),i.addCancel("Cancel",function(){i.cancel()}),r.bind(a,GH.StartWizardView.model)),i.updateHeight(),GH.StartWizardView.preventSubmitOnEnter(),GH.StartWizardView.triggerAnalytics(t),d.end({key:"jira.agile.work.create-board"})},GH.StartWizardView.triggerAnalytics=function(e){e=GH.StartWizardView.steps[e].analyticsScreenName;a.sendPageEvent(e)},GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject=function(){var e=AJS.$("#ghx-wizard-dialog div.radio #ghx-wizard-method-existing-project").parent(),t=AJS.$("#ghx-wizard-dialog div.radio #ghx-wizard-method-existing-filter").parent();/(simple|agility)/.test(GH.StartWizardView.model.methodology)?(e.hide(),t.hide()):(e.show(),t.show())},GH.StartWizardView.startWizardWithoutProjectCreate=function(){GH.UserData.userConfig={canCreateProject:!1,hasProjectsAccessible:!0,hasFiltersAccessible:!0,selectUserContainerByDefault:0<arguments.length&&void 0!==arguments[0]&&arguments[0]},GH.StartWizardView.startWizard()},GH.StartWizardView.startWizardWithUserConfigCheck=function(){GH.UserData.userConfig?GH.StartWizardView.startWizard():n.get({url:"userData/userConfig"}).done(function(e){GH.UserData.setUserConfig(e),GH.StartWizardView.startWizard()}).fail(GH.StartWizardView.startWizardWithoutProjectCreate)},GH.StartWizardView.startWizard=function(){d.start({key:"jira.agile.work.create-board",isInitial:!1}),GH.StartWizardView.show(),GH.StartWizardView.showStep("methodologySelection")},GH.StartWizardView.disposeWizard=function(){GH.StartWizardView.dialog=void 0,GH.StartWizardView.pages={},window.removeEventListener("resize",GH.StartWizardView.windowResizeListener)},GH.StartWizardView.genStartFunction=function(e,t){return function(){GH.StartWizardView.show(),GH.StartWizardView.model.sampleData=t,GH.StartWizardView.selectMethodology(e,GH.StartWizardView.model)}},GH.StartWizardView.bindWelcomePage=function(){GH.Dialog.registerDialog(".js-wizard-scrum",GH.StartWizardView.genStartFunction("scrum",!1)),GH.Dialog.registerDialog(".js-wizard-scrum-sample",GH.StartWizardView.genStartFunction("scrum",!0)),GH.Dialog.registerDialog(".js-wizard-kanban",GH.StartWizardView.genStartFunction("kanban",!1)),GH.Dialog.registerDialog(".js-wizard-kanban-sample",GH.StartWizardView.genStartFunction("kanban",!0))},GH.StartWizardView.getCreateProjectRequest=function(e){var t=e.project,e={projectName:t.name,projectKey:t.key,boardName:e.boardName,preset:e.methodology,sampleData:e.sampleData};return e.projectLeadAccountId=t.lead,e},GH.StartWizardView.createProject=function(i,r){GH.StartWizardView.populateProjectCreationProperties(r);var e=GH.StartWizardView.getCreateProjectRequest(r);i.disableControls(),i.showSpinner();var o={url:"/welcome/createProject",data:e,errorContextMap:{projectName:"#ghx-wizard-"+r.prefix+"-projectname",projectKey:"#ghx-wizard-"+r.prefix+"-projectkey",projectLead:"#ghx-wizard-"+r.prefix+"-projectlead"},timeout:12e4,deferErrorHandling:!0};return n.put(o).done(function(e){var t="com.pyxis.greenhopper.jira:gh-"+e.success.preset.toLowerCase()+"-template";GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.rapidView.id,boardType:e.success.preset,locationId:e.success.project.id,projectType:"software",projectTemplateKey:t,projectId:e.success.project.id}),GH.StartWizardView.fireProjectCreatedTrackEvent({projectId:e.success.project.id,projectType:"software",projectTemplateKey:t,sampleData:r.sampleData}),e.success.sample=r.sampleData,/(simple|agility)/.test(r.methodology)||GH.PersistentMessages.WelcomeMessage.show(e.success);GH.StartWizardView.gotoCreatedView(e.success.rapidView.id,r.methodology)}).fail(function(e,t,r,a){_.each(e.getGlobalErrors(),function(e){"timeout"===e.message&&(e.message=GH.tpl.startwizard.createProjectTimeout({manageBoardURL:GH.RapidBoard.getManageViewsPageUrl()}),e.noAutoescape=!0)}),n.handleContextualErrors(e,o.errorContextMap),n.handleGlobalErrors(e,o.errorContextMap),i.hideSpinner(),i.enableControls(),i.updateHeight()})},GH.StartWizardView.validateProjectSelection=function(t){GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner();var e=AJS.$("#ghx-wizard-project-board-name");GH.Validation.clearContextualErrors(GH.StartWizardView.boardLocationPicker.getElement()),GH.Validation.clearContextualErrors(e);var r=GH.StartWizardView.locationModel?GH.StartWizardView.locationModel.projectId:null;return n.post({url:"/rapidview/create/presets",data:{name:e.val(),projectIds:GH.StartWizardView.boardLocationPicker.getValue().map(function(e){return e.replace("project_","")}),preset:t.methodology,locationId:r,locationType:GH.StartWizardView.getBoardLocationType()},errorContextMap:{name:"#ghx-wizard-project-board-name",projectIds:GH.StartWizardView.boardLocationPicker.selector}}).done(function(e){GH.StartWizardView.handleCreate(e,"simple",t.methodology),GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.id,boardType:t.methodology,locationId:r})}).fail(function(){GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.getBoardLocationId=function(){if(GH.StartWizardView.locationModel){if(GH.StartWizardView.locationModel.projectId)return GH.StartWizardView.locationModel.projectId;if(GH.StartWizardView.locationModel.userLocationId)return GH.StartWizardView.locationModel.userLocationId}return null},GH.StartWizardView.getBoardLocationType=function(){if(GH.StartWizardView.locationModel){if(GH.StartWizardView.locationModel.projectId)return t.project;if(GH.StartWizardView.locationModel.userLocationId)return t.user}return null},GH.StartWizardView.validateFilterSelection=function(t){var e=AJS.$("#ghx-wizard-filter-view-name"),r=GH.StartWizardView.filterPicker.getElement(),a=AJS.$(GH.StartWizardView.filterPicker.selector);GH.Validation.clearContextualErrors(e),GH.Validation.clearContextualErrors(r);var i="user"===GH.StartWizardView.getBoardLocationType()?null:GH.StartWizardView.getBoardLocationId();return GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner(),n.post({url:"/rapidview/create/advanced",data:{name:e.val(),filterId:a.val()?a.val()[0]:null,methodology:t.methodology,locationId:i,locationType:GH.StartWizardView.getBoardLocationType()},errorContextMap:{name:"#ghx-wizard-filter-view-name",filterId:GH.StartWizardView.filterPicker.selector}}).done(function(e){GH.StartWizardView.handleCreate(e,"simple",t.methodology),GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.id,boardType:t.methodology,locationId:i})}).fail(function(){GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.handleCreate=function(e,t,r){var a=!/(simple|agility)/.test(t)&&r;"simple"!==t&&GH.PersistentMessages.CreateViewMessage.setView(e.success.id,e.success.name,t,a),GH.StartWizardView.analytics.trigger("complete"),GH.StartWizardView.gotoCreatedView(e.success.id,r)},GH.StartWizardView.gotoCreatedView=function(e,t){GH.Navigation.gotoDefaultRapidBoardPage(e,"scrum"===t?"planning":null)},GH.StartWizardView.selectMethodology=function(e,t){t.methodology=e;var r,a=/(simple|agility)/.test(e);GH.StartWizardView.stepsNameStack.push("methodologySelection"),t.sampleData?n.get({url:"/welcome/sampledataproject?preset="+t.methodology},"sampledataproject").done(function(e){t.sampleInfo=e,GH.StartWizardView.showStep("sampleProjectCreation")}).fail(function(){GH.StartWizardView.showStep("sampleProjectCreation")}):(r=GH.UserData.userConfig.canCreateProject,e=GH.UserData.userConfig.hasProjectsAccessible,a=GH.UserData.userConfig.hasFiltersAccessible&&!a,r||a?e||a?GH.StartWizardView.showStep("methodSelection"):GH.StartWizardView.showStep("projectCreation"):GH.StartWizardView.showStep("projectSelection"))},GH.StartWizardView.populateProjectCreationProperties=function(e){var t=AJS.$("#ghx-wizard-"+e.prefix+"-projectname"),r=AJS.$("#ghx-wizard-"+e.prefix+"-projectkey"),a=AJS.$("#ghx-wizard-"+e.prefix+"-projectlead");GH.Validation.clearContextualErrors(t),GH.Validation.clearContextualErrors(r),GH.Validation.clearContextualErrors(a),e.project={name:t.val(),key:r.val().toUpperCase(),lead:AJS.$("#ghx-wizard-"+e.prefix+"-projectlead option:selected").val()}},GH.StartWizardView.createSampleProject=function(e,t){t.sampleData=!0,GH.StartWizardView.createProject(e,t)},GH.StartWizardView.validateBoardName=function(e,t){return GH.Validation.clearContextualErrors(e),t.boardName=e.val(),!!t.boardName||(GH.Validation.showContextualErrors(e,"Please enter a name for your board."),!1)},GH.StartWizardView.renderProjectCreation=function(e){return e.strictMode=!0,{header:"New project with board",content:GH.tpl.startwizard.renderProjectCreationStep(e)}},GH.StartWizardView.bindProjectSelection=function(e,t){function r(e){n.get({url:"/project/"+e,deferErrorHandling:!0,timeout:1e4}).then(function(e){var t,r,a,i;t=e,r=Boolean(AJS.$("#ghx-board-location-picker-for-multiple-project .loading").length),a="false"===AJS.$("#ghx-board-location-change-for-multiple-project-select-suggestions").parent().attr("aria-hidden"),i="software"===t.projectTypeKey,t=GH.StartWizardView.boardLocationConfig.boardLocationModel.userLocationId,r||a||!i||t||GH.StartWizardView.boardLocationConfig.setLocation({projectId:"project_"+e.id,userLocationId:"",name:e.name,avatarURI:e.projectIconUrl,locationType:"project"})}).fail(function(){AJS.trigger("analyticsEvent",{name:"gh.boardlocationconfig.location.auto.set.failed"})})}GH.StartWizardView.boardLocationPicker=new i({selector:"#ghx-wizard-choose-project",projectsOnly:!0,change:function(e){GH.StartWizardView.dialog.updateHeight(),1===(GH.StartWizardView.boardLocationPicker.getValue()?GH.StartWizardView.boardLocationPicker.getValue():[]).length&&(e=e.currentTarget[0].value.replace("project_",""),r(e))},currentProjectId:JIRA.API&&JIRA.API.Projects?JIRA.API.Projects.getCurrentProjectId():null}),GH.StartWizardView.boardLocationPicker.selectPicker.keys.Return=function(e){e.preventDefault()};var a=["#ghx-wizard-project-board-name","#ghx-wizard-choose-project"];GH.StartWizardView.buildBoardLocationPicker("#ghx-board-location-picker-for-multiple-project","ghx-board-location-change-for-multiple-project",a),GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:a})},GH.StartWizardView.buildBoardLocationPicker=function(e,t,r){var a=new o(AJS.$(e)),i={canEdit:!0,stayActivated:!0,isRequired:!0,showHelp:!0,boardLocationModel:{name:""},selectedCallback:function(e){GH.StartWizardView.locationModel=e},boardLocationChangeId:t};c.then(function(e){var t={name:""};e&&(e.projectId=e.projectId||e.id,e.avatarURI=e.avatarURI||e.projectIconUrl,"software"===e.projectTypeKey&&(t=e)),a.init(Object.assign(i,{boardLocationModel:t}))}).fail(function(){l.then(function(e){e&&(e.userLocationId=e.id),a.init(Object.assign(i,{boardLocationModel:e||null}))}).fail(function(){a.init(i)})}).always(function(){GH.StartWizardView.locationModel=a.boardLocationModel,GH.StartWizardView.dialog.updateHeight()}),r.push("#"+t+"-select"),GH.StartWizardView.boardLocationConfig=a},function(){"use strict";var r=require("jira/util/events/types");GH.StartWizardView.bindProjectCreation=function(e,t){AJS.$("#ghx-wizard-"+t.prefix+"-projectkey").generateFrom(AJS.$("#ghx-wizard-"+t.prefix+"-projectname"),{maxNameLength:64,maxKeyLength:64}),JIRA.trigger(r.NEW_CONTENT_ADDED,[e]),e.trigger("contentRefresh");e=GH.StartWizardView.dialog;e.page[e.curpage].button[1].item;GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-"+t.prefix+"-projectname","#ghx-wizard-"+t.prefix+"-projectkey","#ghx-wizard-"+t.prefix+"-projectlead"]})}}(),GH.StartWizardView.bindFilterSelection=function(e,a){GH.StartWizardView.filterPicker=new GH.SavedFilterPicker({selector:"#ghx-wizard-filter-select",selected:function(e,t){var r="";delete a.savedFilter,t&&t.properties&&(r=null!==(t=t.properties.savedFilter)?GH.tpl.startwizard.renderPermissionInfo({savedFilter:t}):"",a.savedFilter=t),AJS.$("#ghx-create-permissioninfo-container").html(r),GH.StartWizardView.dialog.updateHeight()},stayActivated:!0}),GH.StartWizardView.filterPicker.show(a.savedFilter),GH.StartWizardView.filterPicker.singleSelect.keys.Return=function(e){e.preventDefault()};var t=["#ghx-wizard-filter-view-name","#ghx-wizard-filter-select"];GH.StartWizardView.buildBoardLocationPicker("#ghx-board-location-picker-for-filter","ghx-board-location-change-for-filter",t),GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:t})},GH.StartWizardView.attachDependantButton=function(e){var t=GH.StartWizardView.dialog,r=t.page[t.curpage].button[e.buttonIndex].item;GH.StartWizardView.dependantValidationListener({selectors:e.selectors,full:function(){r.attr("aria-disabled","false")},empty:function(){r.attr("aria-disabled","true")}})},GH.StartWizardView.dependantValidationListener=function(t){function e(){var e=_.filter(t.selectors,function(e){e=AJS.$(e);return!AJS.$.trim(e.val())});return _.isEmpty(e)?t.full():t.empty()}function r(){t.nowait?e():setTimeout(e,50)}_.isEmpty(t.selectors)||(t.full=t.full||AJS.$.noop(),t.empty=t.empty||AJS.$.noop(),t.nowait=t.nowait||!1,_.each(t.selectors,function(e){var t=AJS.$("#ghx-wizard-dialog");t.on("input",e,r),t.on("change",e,r),t.on("selected",e,r),t.on("unselect",e,r)}),e())},GH.StartWizardView.fireBoardCreatedTrackEvent=function(e){var t=GH.StartWizardView.getBoardLocationType(),r=e.boardType[0].toUpperCase()+e.boardType.substr(1).toLowerCase(),t={containerType:t||"project",objectType:"board",objectId:e.boardId,attributes:{boardId:e.boardId,boardType:r,location:t||"project"},action:"created",actionSubject:"board",actionSubjectId:e.boardId,source:"createBoardModal"};e.locationId&&(t.containerId=e.locationId),e.projectId&&(t.attributes.projectId=e.projectId),e.projectType&&(t.attributes.projectType=e.projectType),e.projectTemplateKey&&(t.attributes.projectTemplateKey=e.projectTemplateKey),a.sendTrackEvent(t)},GH.StartWizardView.fireProjectCreatedTrackEvent=function(e){e={containerType:"project",containerId:e.projectId,attributes:{projectType:e.projectType,projectTemplateKey:e.projectTemplateKey,createdUsing:e.sampleData?"sample":"template"},action:"created",actionSubject:"project",actionSubjectId:e.projectId,source:e.sampleData?"createSampleProjectModal":"createBoardModal"};a.sendTrackEvent(e)},AJS.$(GH).trigger("WizardViewLoaded")}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/ui/component/SavedFilterPicker.js' */
!function(){"use strict";var t=require("jira/ajs/select/single-select"),n=require("jira-agile/rapid/ajax");GH.SavedFilterPicker=function(e){this.selector=e.selector,this.fieldSelector=e.selector+"-field",this.blurHandler=e.blur,this.selectHandler=e.selected,this.stayActivated=e.stayActivated,this.focus=e.focus},GH.SavedFilterPicker.prototype.show=function(e){var s=AJS.$(this.selector),i=new t({element:s,width:300,removeOnUnSelect:!0,itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:n.buildRestUrl("/savedfilter/list.json"),formatResponse:function(e){if(e.errors){var t=n._convertJiraErrors(e.errors),i={searchName:this.selector};return n.handleContextualErrors(t,i),!1}s.siblings(".ghx-error").remove();var r=[];return AJS.$(e.filters).each(function(){r.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))}),r}}});this.singleSelect=i;var r=this.removeSingleSelect;this.stayActivated||AJS.$(this.fieldSelector).blur(function(){r(i)}),_.isFunction(this.blurHandler)&&AJS.$(this.fieldSelector).blur(this.blurHandler),this.focus&&AJS.$(this.fieldSelector).focus().select(),e&&this.setSelection(e);var l=this.selectHandler;this.stayActivated?(s.bind("selected",l),s.bind("unselect",l)):(s.bind("selected",function(e,t){r(i),l(e,t)}),s.bind("unselect",function(e,t){r(i),l(e,t)}))},GH.SavedFilterPicker.prototype.setSelection=function(e){this.singleSelect.setSelection(new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:AJS.escapeHTML(String(e.name)),savedFilter:e,selected:!0}))},GH.SavedFilterPicker.prototype.removeSingleSelect=function(e){e.hideSuggestions(),e.disable()},GH.SavedFilterPicker.prototype.getElement=function(){return this.singleSelect.$field}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/lib/jquery/jquery.keygen.js' */
!function(e,m){e.KeyGenerator=function(){function l(e){return e.join("").length}var f=["THE","A","AN","AS","AND","OF","OR"],d={};return d[199]="C",d[231]="c",d[252]="u",d[251]="u",d[250]="u",d[249]="u",d[233]="e",d[234]="e",d[235]="e",d[232]="e",d[226]="a",d[228]="a",d[224]="a",d[229]="a",d[225]="a",d[239]="i",d[238]="i",d[236]="i",d[237]="i",d[196]="A",d[197]="A",d[201]="E",d[230]="ae",d[198]="Ae",d[244]="o",d[246]="o",d[242]="o",d[243]="o",d[220]="U",d[255]="Y",d[214]="O",d[241]="n",d[209]="N",{generateKey:function(e,t){var a="number"==typeof(t=m.extend({},t)).desiredKeyLength?t.desiredKeyLength:4,t="number"==typeof t.maxKeyLength?t.maxKeyLength:1/0;if(!(e=m.trim(e)))return"";for(var n=[],r=0,o=e.length;r<o;r++){var i=d[e.charCodeAt(r)];n.push(i||e[r])}e=n.join("");var u,c,h,g,s=[];return m.each(e.split(/\s+/),function(e,t){t&&(t=(t=t.replace(/[^a-zA-Z]/g,"")).toUpperCase()).length&&s.push(t)}),a&&l(s)>a&&(u=s,s=m.grep(u,function(e,t){return-1===m.inArray(e,f)})),h=0==s.length?"":1==s.length?(u=function(e){for(var t,a=!1,n=0;n<e.length;n++)if((t=e[n])&&1===t.length&&-1!==t.search("[AEIOUY]"))a=!0;else if(a)return e.substring(0,n+1);return e}(c=s[0]),t<c.length||Math.abs(c.length-a)>=Math.abs(u.length-a)?u:c):(c=l(s),h=s,g="",m.each(h,function(e,t){g+=t.charAt(0)}),h=g,t<c||Math.abs(c-a)>=Math.abs(h.length-a)?h:s.join("")),h=t&&h.length>t?h.substr(0,t):h}}};var c=e.KeyGenerator();m.fn.generateFrom=function(t,r){var e,o,a,n=m(this).first(),t=t.first(),r=m.extend({},{desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},r);function i(){e(n.val()),a()}function u(e){!function(e,t){var a=m(e.target),n,n=function(){o(e);t();if(a.is(":visible"))a.data("checkHook",setTimeout(n,r.timeoutMS))};if(!a.data("checkHook"))a.data("checkHook",setTimeout(n,0))}(e,i)}return e=function(e){n.val()&&n.data("lastGeneratedValue")!==n.val()&&n.data("autosuggest",!1)},o=function(e){e=m(e.target);clearTimeout(e.data("checkHook")),e.removeData("checkHook")},a=function(){var e;!1!==n.data("autosuggest")&&(e=c.generateKey(t.val(),{desiredKeyLength:r.desiredKeyLength,maxKeyLength:r.maxKeyLength}),n.data("lastGeneratedValue",e),n.val(e))},t.attr("maxlength",r.maxNameLength),n.attr("maxlength",r.maxKeyLength),n.css("text-transform","uppercase"),document.activeElement&&document.activeElement===t[0]&&u({target:t[0]}),t.focus(u),t.blur(o),this}}(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-common', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseVersionDialog.js' */
GH.Dialogs.ReleaseVersionDialog={},GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED="versionReleased",GH.Dialogs.ReleaseVersionDialog.dialog=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ReleaseVersionDialog.analytics=new e("gh.release")}(),GH.Dialogs.ReleaseVersionDialog.showDialog=function(e,a){GH.Dialog.dim(),GH.Ajax.get({url:"/release/model.json",data:{rapidViewId:e,columnId:a}},"showReleaseVersionDialog").done(GH.Dialogs.ReleaseVersionDialog.renderDialog).fail(GH.Dialog.undim)},GH.Dialogs.ReleaseVersionDialog.renderDialog=function(e){_.each(e.projectIssueDetails,function(e){e.name=AJS.escapeHTML(String(e.name))});var a=GH.Dialogs.ReleaseVersionDialog.dialog=GH.Dialog.create({width:500,height:380,id:"ghx-dialog-release",onCancelFn:function(){GH.Dialogs.ReleaseVersionDialog.dialog=void 0,GH.Dialog.triggerHideEvent(),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel",e.projectIssueDetails.length)},analyticsPageName:"releaseNewVersionModal"});AJS.$("#"+a.id).addClass("ghx-dialog"),a.addHeader("Release"),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.dialogs.releaseversion.renderReleaseDialog({model:e})),a.addButton("Release",function(){GH.Dialogs.ReleaseVersionDialog.release(e),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.RELEASE_VERSION)},"aui-button aui-button-primary"),a.addCancel("Cancel",function(){a.cancel()}),AJS.$(".aui-dialog").addClass("ghx-dialog");new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-release-date",button:"ghx-release-date_trigger_c",align:"Tl",singleClick:!0,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start",e.projectIssueDetails.length),a.show(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReleaseVersionDialog.release=function(e){GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete",e.projectIssueDetails.length);var a=GH.Dialogs.ReleaseVersionDialog.dialog;a.disableControls(),a.showSpinner(),GH.Ajax.post({url:"/release",data:{versionName:AJS.$("#ghx-release-name").val(),releaseDate:AJS.$("#ghx-release-date").val(),description:AJS.$("#ghx-release-desc").val(),rapidViewId:e.rapidViewId,columnId:e.columnId},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date_trigger_c"}}).done(function(e){var a=GH.Dialogs.ReleaseVersionDialog.dialog;a&&(a.dispose(),GH.Dialog.triggerHideEvent(),GH.Dialogs.ReleaseVersionDialog.dialog=void 0),GH.Notification.showSuccess(e.success.message),AJS.$(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED)}).fail(function(){var e=GH.Dialogs.ReleaseVersionDialog.dialog;e&&(e.hideSpinner(),e.enableControls())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-common', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseVersionDialog.soy' */
// This file was automatically generated from ReleaseVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.releaseversion.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.releaseversion == 'undefined') { GH.tpl.dialogs.releaseversion = {}; }


GH.tpl.dialogs.releaseversion.renderReleaseDialog = function(opt_data, opt_ignored) {
  var output = '<div id="version-new">';
  if (opt_data.model.projectIssueDetails.length > 0) {
    output += '<ul id="ghx-release-navigator">';
    var projectList7 = opt_data.model.projectIssueDetails;
    var projectListLen7 = projectList7.length;
    for (var projectIndex7 = 0; projectIndex7 < projectListLen7; projectIndex7++) {
      var projectData7 = projectList7[projectIndex7];
      output += '<li><a title="' + soy.$$escapeHtml('View in Issue Navigator') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/GHReleaseIssueNavigator.jspa?projectId=' + soy.$$escapeHtml(projectData7.id) + '&rapidViewId=' + soy.$$escapeHtml(opt_data.model.rapidViewId) + '&columnId=' + soy.$$escapeHtml(opt_data.model.columnId) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|2#{0} issues}',projectData7.issueCount)) + '</a> ' + soy.$$filterNoAutoescape(AJS.format('will be released from \x3cstrong\x3e{0}\x3c/strong\x3e',projectData7.name)) + '</li>';
    }
    output += '</ul>';
  }
  output += '<form action="#" class="aui"><fieldset><div class="field-group"><label for="ghx-release-name">' + soy.$$escapeHtml('Version name') + '</label><input id="ghx-release-name" type="text" class="text"><div id="query-results"></div></div><div class="field-group"><label for="ghx-release-date">' + soy.$$escapeHtml('Release date') + '</label><input type="text" id="ghx-release-date" value="' + soy.$$escapeHtml(opt_data.model.defaultReleaseDate) + '" class="text"><span id="ghx-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar">&nbsp;</span></div><div class="field-group"><label for="ghx-release-desc">' + soy.$$escapeHtml('Description') + '</label><textarea id="ghx-release-desc" rows="4" class="textarea"></textarea></div></fieldset></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderReleaseDialog.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderReleaseDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-common', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseExistingVersionDialog.js' */
define("jira-agile/rapid/ui/dialog/release-existing-version-dialog",["jquery","underscore","jira/projects/release/version-adapter","jira/projects/release/submit-model","jira-project-config/utils","jira-agile/rapid/ajax","jira/analytics/web-client","jira/container-api"],function(a,r,t,s,l,n,i,g){"use strict";var d,u=JIRA.Admin.Version.ReleaseForm,o=GH.Notification,c=Backbone.Collection.extend({model:s}),v={init:function(){var e=GH.VersionController.getVersionModel().getAllVersions();AJS.params.dateFormat=GH.TimeFormat.dateFormat,d=new c,r.each(e,function(e){e=new s(e);d.add(e)})},show:function(s){n.get({url:"/release/existingVersionModel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),versionId:s}}).done(function(e){e.hasIssueOutOfScope?v.showGoToReleaseHubDialog(s,"This version has issues that are not included in the board. We recommend using the Release Hub instead."):e.hasIssueWithComplexMapping?v.showGoToReleaseHubDialog(s,"This version has issues with potential problems. We recommend using the Release Hub instead."):(v.showReleaseExistingDialog(s,e),i.sendPageEvent("releaseExistingVersionModal"))})}};v.showReleaseExistingDialog=function(e,s){var i,o=this;GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start.existing");var n=new t(d.get(e));n.on(t.RELEASE_SUCCESS_EVENT,function(e){e.moveUnfixedIssuesTo?(e=m(e.moveUnfixedIssuesTo),f(AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e released. The unresolved {1,choice,1#issue|1\u003cissues} are now in \u003cstrong\u003e{2}\u003c/strong\u003e.",i.versionName,i.issueCount,e))):f("Version released"),a(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete.existing")}),n.on(t.RELEASE_ERROR_EVENT,function(e){r.isEmpty(e.errorMessages)||(i.hide(),p(i.versionName))}),(i=l.openDialogForRow(u,n,"version-release-dialog")).onContentReady(h.bind(i,s.hasIssueInAnotherUnreleasedVersion,function(e){e=d.get(e);return e&&e.get("project")&&e.get("project").name}(e))),a(i).on("Dialog.hide",function(){o.cancelled&&GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel.existing")})},v.showGoToReleaseHubDialog=function(s,e){var i=GH.Dialog.create({width:400,height:200,analyticsPageName:"releaseHubRedirectModal"}),o=GH.VersionController.getVersionModel().getVersion(s);i.addHeader(AJS.format("Release version: {0}",o.name)),i.addPanel("","panel"),i.getCurrentPanel().html(e),i.addButton("Go to Release Hub",function(){var e=n.CONTEXT_PATH+"/projects/"+o.project.key+"/versions/"+s;g.navigate(e,function(){window.location.href=e})}),GH.Dialog.addCancelButton(i),i.show()};var m=function(e){e=d.get(e);return e&&e.get("name")};var p=function(e){var s={};s.message=AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e can\'\'t be released at this time. Please refresh your browser and try again.",e),o.showErrors({errors:[s]})},f=function(e){o.showSuccess(e)},h=function(e,s){this.issuesCount=this.$form.find('input[name="issues-count"]').attr("value"),this.versionName=this.$form.find('input[name="version-name"]').attr("value");var i=this.$form.find("#project-config-version-release-form-unresolved-ignore-paragraph");i&&i.before(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial({issuesCount:this.issuesCount,versionName:this.versionName})));i=this.$form.find("#project-config-version-release-form-unresolved-ignore-label");i.length&&(e?(a("#project-config-version-release-form-unresolved-message").after(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible())),i.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues({issuesCount:this.issuesCount,versionName:this.versionName})))):i.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues({versionName:this.versionName}))));i=this.$form.find("#project-config-version-release-form-all-issues-resolved strong");i.length&&"undefined"===i.text()&&i.text(s)};return v});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-dependencies', location = 'jira-agile-module/includes/js/rapid/LegacyNamespaces.js' */
AJS.namespace("GH.ReleaseVersionTrigger",null,require("jira-agile/rapid/ui/work/release-version-trigger")),AJS.namespace("GH.SprintConfig",null,require("jira-agile/rapid/ui/plan/sprint-config")),AJS.namespace("GH.Ajax",null,require("jira-agile/rapid/ajax"));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:jag-integration-tests', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-initialiser-tests.js' */
require(["underscore","jquery","jira/inline-issue-create/util"],function(t,e,i){"use strict";function n(t){var e="iic.test."+t;JIRA.trace(e)}function r(e,r,a,o){i.after(e,r,function(){t.isFunction(o)&&o.apply(this,arguments),n(a)})}r(GH.PlanControls,"init","controls.inited"),r(GH.SprintView,"renderAllSprints","render.all.sprints"),r(GH.BacklogModel,"setData","backlog.data.set"),r(GH.BacklogView,"_scrollToView","scrolled.to.issue"),r(GH.BacklogModel,"updateDataForSprint","updated.data.for.sprint"),r(GH.SprintBacklogView,"renderBacklog","backlog.rendered"),r(GH.SprintBacklogView,"updateBacklog","backlog.updated"),r(GH.RapidBoard.State,"setRapidViewId","rapid.view.changed"),r(GH.SprintView,"_renderSprintContent","sprint.content.rendered",function(t,e){n("sprint.content.rendered."+e.getSprintData().id)}),i.after(GH.PlanControls,"init",function(){r(GH.PlanControls.quickfilters,"setActiveQuickFilters","active.filters.set")})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding-common', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanOnboarding.js' */
!function(o,p,u,d,l,t){"use strict";function s(){t(this)}s._updateFillYourBacklogMessageNew=function(t){var s=o(".ghx-onboarding-fillyourbacklog-group"),i=o(".js-sprint-container").filter("[data-sprint-id='backlog']").find(".ghx-helper");t.isIssueLimitExceeded?(i.hide(),s.empty()):t.issueListStats.totalCount<3&&1===t.sprintModels.length&&t.canCreateIssue?(s.html(GH.tpl.planonboarding.renderFillYourBacklogMessage()),i.hide()):(0===t.issueListStats.totalCount||0===t.issueListStats.visibleCount?i.show():i.hide(),s.empty())},s.prototype.updateStartSprint=function(i){var t;o(".js-sprint-start").removeClass("aui-button-primary"),!i.canManageSprints||0!==i.numActiveSprints||i.isIssueLimitExceeded||(t=p.find(i.sprintModels,function(t,s){return"FUTURE"===t.sprintData.state&&0<i.sprintIssueListStats[s].totalCount}))&&(t=".js-sprint-container[data-sprint-id="+t.sprintData.id+"] .js-sprint-start",o(t).addClass("aui-button-primary"))},s.prototype.renderOnboarding=function(){var s,t,i,e,a,n,r=(e=u.getBacklogModel2().getIssueList(),s={issueListStats:d.getIssueListStats(e,!1),sprintModels:u.getSprintModels(),canCreateIssue:u.canCreateIssue(),canManageSprints:u.canManageSprints(),isIssueLimitExceeded:u.isIssueLimitExceeded,isUsingLogicalSprints:!GH.RapidBoard.State.isIssueListBacklog()&&!GH.RapidBoard.State.isKanbanBoard(),sprintIssueListStats:[],numActiveSprints:0,numFutureSprints:0},p.each(s.sprintModels,function(t){s.sprintIssueListStats.push(l.calculateSprintIssueListStats(t,t.getIssueList())),"ACTIVE"===t.sprintData.state&&s.numActiveSprints++,"FUTURE"===t.sprintData.state&&s.numFutureSprints++}),s);t=r,i=o(".ghx-onboarding-fillyourbacklog-group"),e=o(".ghx-backlog-group .ghx-helper"),t.isIssueLimitExceeded?(e.hide(),i.empty()):t.issueListStats.totalCount<3&&0===t.sprintModels.length&&t.canCreateIssue?(i.html(GH.tpl.planonboarding.renderFillYourBacklogMessage()),e.hide()):(0===t.issueListStats.totalCount||0===t.issueListStats.visibleCount?e.show():e.hide(),i.empty()),r.isUsingLogicalSprints&&(a=r).canManageSprints&&0===a.numActiveSprints&&!a.isIssueLimitExceeded&&(n=p.first(a.sprintModels),a=p.first(a.sprintIssueListStats),n&&a&&"FUTURE"===n.sprintData.state&&0===a.totalCount&&o(".js-sprint-container").filter("[data-sprint-id="+n.sprintData.id+"]").find(".ghx-helper").html(GH.tpl.planonboarding.renderPlanYourSprintMessage())),a=r,n=o(".ghx-onboarding-error-group"),a.isIssueLimitExceeded?(a=GH.RapidBoard.State.getRapidViewId(),a=GH.RapidBoard.getRapidViewConfigurationUrl(a,"filter"),n.html(GH.tpl.planonboarding.renderTooManyIssuesMessage({linkAddr:a,boardSettingClass:"board-settings-link"}))):n.empty(),this.updateCreateSprint(r),this.updateStartSprint(r),this.refresh()},s.prototype.refresh=function(){this.trigger("refresh")},s.prototype.updateCreateSprint=function(t){var s=o(".js-add-sprint");(t=t).canManageSprints&&0===t.numFutureSprints&&0===t.numActiveSprints&&3<=t.issueListStats.totalCount?s.addClass("aui-button-primary"):s.removeClass("aui-button-primary")},GH.PlanOnboarding=s,GH.planOnboarding=new s}(AJS.$,_,GH.BacklogModel,GH.BacklogStatistics,GH.SprintView,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding-common', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanOnboarding.soy' */
// This file was automatically generated from PlanOnboarding.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planonboarding.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planonboarding == 'undefined') { GH.tpl.planonboarding = {}; }


GH.tpl.planonboarding.renderFillYourBacklogMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-fillyourbacklog ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Plan your team\x27s work') + '</h5><p>' + soy.$$escapeHtml('The backlog is your team\x27s to-do list. Create 3 issues, and rank them in order of priority.') + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderFillYourBacklogMessage.soyTemplateName = 'GH.tpl.planonboarding.renderFillYourBacklogMessage';
}


GH.tpl.planonboarding.renderPlanYourSprintMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-planyoursprint ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Plan your sprint') + '</h5><p>' + soy.$$escapeHtml('As a team, agree on what work needs to be completed, and drag these issues to the sprint.') + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderPlanYourSprintMessage.soyTemplateName = 'GH.tpl.planonboarding.renderPlanYourSprintMessage';
}


GH.tpl.planonboarding.renderTooManyIssuesMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Too many issues are trying to load') + '</h5><p>' + soy.$$escapeHtml('It will take you eons to scroll through mountains of issues.') + '</p><p><a href="' + soy.$$escapeHtml(opt_data.linkAddr) + '" class="' + soy.$$escapeHtml(opt_data.boardSettingClass) + '">' + soy.$$escapeHtml('Update board filter') + '</a></p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderTooManyIssuesMessage.soyTemplateName = 'GH.tpl.planonboarding.renderTooManyIssuesMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones-common', location = 'jira-agile-module/onboarding/chaperones/PlanChaperones.js' */
define("jira-agile/onboarding/chaperones/plan-chaperones",["jquery","underscore","jira/util/data/meta"],function(t,n,i){function e(e){this.chaperones=[{id:"create-sprint",title:"Create a sprint",bodyHtml:"You now have some issues in your backlog. Create a sprint to start working on them.",anchorSelector:".js-add-sprint.aui-button-primary"},{id:"start-sprint",title:"Start your sprint",bodyHtml:"Click this button when you are ready to start the sprint.",anchorSelector:".js-sprint-start.aui-button-primary"}],e.on("refresh",o,this)}function o(){n.each(this.chaperones,function(e){void 0!==e.helptip?e.helptip.refresh():t(e.anchorSelector).length&&this._initChaperone(e)},this)}return e.prototype._initChaperone=function(e){AJS.HelpTip&&i.getBoolean("onboarding-has-completed-first-use-flow")&&void 0===e.helptip&&(e.helptip=new AJS.HelpTip({id:"onboarding-"+e.id,title:e.title,bodyHtml:e.bodyHtml,anchor:e.anchorSelector,showCloseButton:!0}),e.helptip.show({force:!0}),t(document).on("click.planChaperone",e.anchorSelector,n.bind(function(){this._dismissChaperone(e)},this)))},e.prototype._dismissChaperone=function(e){void 0!==e.helptip&&(e.helptip.dismiss("dismissed"),delete e.helptip,t(document).off("click.planChaperone",e.anchorSelector))},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones-common', location = 'jira-agile-module/onboarding/chaperones/PlanChaperonesInit.js' */
require(["jira-agile/onboarding/chaperones/plan-chaperones"],function(n){new n(GH.planOnboarding)});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/jql-autocomplete.js' */
define("jira/autocomplete/jql-autocomplete",["jira/util/formatter","jira/autocomplete/autocomplete","jira/jql/jql-grammar","jira/jql/util","jira/jql/operator-util","jira/util/data/meta","jira/util/objects","jquery","underscore","jira/featureflags/feature-manager","wrm/context-path"],function(e,t,r,a,n,s,i,l,o,d){var g=function(s){var o,g=i.begetObject(t),p=s.parser,u=l.grep(s.jqlFieldNames,function(e){return e.searchable}),c=l.grep(s.jqlFieldNames,function(e){return e.orderable}),f=s.jqlFunctionNames,m=l("#"+s.errorID),h=0,v=l("#jqlcolumnnum"),S=l("#jqlrownum"),O=s.autoCompleteUrl||contextPath+"/rest/api/2/jql/autocompletedata/suggestions";g.textToSuggestionCursorPosition=function(){return g.field.selectionRange().textBefore},g.pushSuggestionsOnHtmlStack=function(e,t,r,n,s,i){for(var l=Math.min(15,e.length),d=0;d<l;d++){var g,p;if(e[d].value){var u=e[d];g=o&&s?(o.getNeedsOpenParen()?"(":"")+u.value:u.value,p=u.displayName}else p=e[d],g=p;t.push(g);var c=p.replace(/<b>/g,"").replace(/<\/b>/g,"");if(i&&a.isCollapsedField(g)){var f=a.extractFieldTypeInformation(g);null===f?N(r,n,d,p,c,g):F(r,n,d,p,g,f)}else N(r,n,d,p,c,g)}};var L=function(){return d.isFeatureEnabled("com.atlassian.rm.jpo.soft-deprecate-jql-parenty-clauses")},y=function(){return d.isFeatureEnabled("com.atlassian.rm.jpo.soft-deprecate-jql-parent-link")},q=function(e,t){return L()&&('"Epic Link"'==e||t&&"Epic Link -"==t.slice(0,11))||y()&&('"Parent Link"'==e||t&&"Parent Link -"==t.slice(0,13))},_=function(e){var t=e?e.toLowerCase():"";return t&&(L()&&t.includes('"epic link"')||y()&&t.includes('"parent link"'))},j=function(e){var t=e?e.toLowerCase():"";return L()&&y()&&t&&t.includes('"epic link"')&&t.includes('"parent link"')?"Epic Link and Parent Link":L()&&t&&t.includes('"epic link"')?"Epic Link":y()&&t&&t.includes('"parent link"')?"Parent Link":""},N=function(e,t,r,a,n,s){var i=s.replace(/['"]+/g,""),l=AJS.format("{0} will soon be replaced with {1}. Use the {1} field instead.",i,"Parent");q(s,n)?e.push('<li id="',t,r,'" title="',l,'" class="deprecated-dropdown-option"><span class="jql-deprecated-text">',a,'</span><span class="jql-deprecated-item"></span></li>'):e.push('<li id="',t,r,'" title="',n,'">',a,"</li>")},F=function(e,t,r,a,n,s){var i=a.replace(" - "+n.replace(/(^")|("$)/g,""),""),l=i.replace(/<\/?b>/g,""),o="";if("string"==typeof s.name){var d="string"==typeof s.icon?'<img src="'+s.icon+'" alt="'+s.name+'">':"";o='<span class="custom-field-type">'+d+s.name+"</span>",l+=" ["+s.name+"]"}e.push('<li id="',t,r,'" title="',l,'">',i,o,"</li>")};g.renderSuggestions=function(t,r,a,n){var s=[];if(t instanceof Array){if(t.length<1&&r&&r.length<1&&a&&a.length<1)return s;var i=["<ul>"];a&&a.length>0&&g.pushSuggestionsOnHtmlStack(a,s,i,"jql_operator_suggest_",!1,!1),g.pushSuggestionsOnHtmlStack(t,s,i,"jql_value_suggest_",!0,n),r&&r.length>0&&g.pushSuggestionsOnHtmlStack(r,s,i,"jql_function_suggest_",!1,!1),i.push("</ul>");var o=l('<a class="syntax-help" target="_jiraHelp"></a>').attr("title","query_filter.advanced_search.title").attr("href","https://confluence.atlassian.com/display/SERVICEDESKCLOUD/Advanced+searching").text("Syntax Help"),d=l('<div class="syntax-help-container">').append(o);g.responseContainer.html(i.join("")).append(d).find("li").each(function(e){var t=l(this);s[e]=[t,s[e]],t.tooltip({gravity:"w"})}),g.addSuggestionControls(s)}return s},g.completeField=function(e){var t,r=g.getReplacementStartIndex(o,e),a=g.getReplacementEndIndex(o,r);t=g.isAutoSelectFirstEnabled()?o.isInsideList()?e:e+" ":e,g.replaceValue(r,a,t);var n=p.parse(g.field.val());C(n.tokenString),g.updateParseIndicator(n)},g.findFieldNameForSuggestions=function(e){for(var t=0;t<u.length;t++){var r=u[t];if(a.equalsIgnoreCase(a.getUnquotedString(r.value),e)){if(r.cfid)return r.cfid;break}}return a.stripEscapeCharacters(e)},g.prepareOperandSuggestions=function(e,t,r,s,i){if(e){var l=h,d=null==i?null===o.getLastOperand()?"":a.stripEscapeCharacters(o.getLastOperand()):i,p=t+":"+d,u={fieldName:g.findFieldNameForSuggestions(t)};null===o.getLastOperand()&&null===i||(u.fieldValue=d);var c=n.isWasOperator(o.getLastOperator());g.getSavedResponse(p)?g.renderSuggestionsForOperands(d,g.getSavedResponse(p),r,s,l):(g.dropdownController.dropdown.removeClass("dropdown-ready"),g.delay(function(){g._makeRequest({url:O,dataType:"json",data:u,success:function(e){var t;if(t=null!==e&&null!==e.results?e.results:[],c){var a=u.fieldValue;t=g.appendEmpty(a,t)}g.saveResponse(p,t),g.renderSuggestionsForOperands(d,t,r,s,l)},error:function(){g.renderSuggestionsForOperands(d,[],r,s,l)}})},g.queryDelay))}else g.renderSuggestionsForOperands(a.stripEscapeCharacters(o.getLastOperand()),[],r,s,h)},g.preparePredicateSuggestions=function(e,t){"undefined"==typeof t&&(t=null);var r=g.slimListForPredicates(t,f,e);g.boldMatchingString(t,r);var n=null==t?null===o.getLastOperand()?"":a.stripEscapeCharacters(o.getLastOperand()):t,s=e+":"+n,i={predicateName:a.stripEscapeCharacters(e)};null===o.getLastOperand()&&null===t||(i.predicateValue=n),null!==o.getLastFieldName()&&(i.fieldName=g.findFieldNameForSuggestions(o.getLastFieldName()),s=o.getLastFieldName()+":"+s),g.predicateSupportsAutoComplete(e)?g.getSavedResponse(s)?g.renderSuggestions(g.getSavedResponse(s),r):(g.dropdownController.dropdown.removeClass("dropdown-ready"),g.delay(function(){g._makeRequest({url:O,dataType:"json",data:i,success:function(e){var t;t=null!==e&&null!==e.results?e.results:[];var a=i.predicateValue;t=g.appendEmpty(a,t),g.saveResponse(s,t),g.renderSuggestions(t,r)},error:function(){g.renderSuggestionsForOperands(n,[])}})},g.queryDelay)):g.renderSuggestions([],r)},g.incompleteOperator=function(){var e=o.getTokens();return null==e||e.length<2?"":(e=g.textToSuggestionCursorPosition().split(" "),e.length>2?e[e.length-1]:"")},g.incompletePredicateValue=function(){var e=o.getTokens();return null==e||e.length<3?"":(e=g.textToSuggestionCursorPosition().split(/[\s(,]+/),e.length>3?e[e.length-1]:"")},g.appendEmpty=function(e,t){var a=g.slimListForMapResults(e,r.empty_operand,!0);return null!=e&&g.boldMatchingString(e,a),t.length<15?t=t.concat(a):t[14]=a[0],t},g.dispatcher=function(e){var t,s,i=l(g.field).selectionRange(),d=e.substring(0,i.start),m=p.parse(d);if(o=m.getResult(),h++,o.getNeedsField())g.renderSuggestionsFromMap(a.stripEscapeCharacters(o.getLastFieldName()),u,r.jql_not_logical_operator,!1,!0);else if(o.getNeedsOperatorOrOperand()){s=n.isEmptyOnlyOperator(o.getLastOperator())?r.empty_operand:f,m.calcLastOperandStartIndex();var v=m.getParsedOperator(),S=g.getSuggestionsForOperators(v,r.jql_operators);if(S&&S.length>0){var O=g.incompleteOperator();g.prepareOperandSuggestions(!0,o.getLastFieldName(),s,S,O)}}else if(o.getNeedsOperator())g.renderSuggestionsForOperators(o.getLastOperator(),r.jql_operators);else if(o.getNeedsPredicateOperand()){var L=o.getLastWasPredicate();g.preparePredicateSuggestions(L,a.stripEscapeCharacters(o.getLastOperand()))}else if(o.getNeedsLogicalOperator())o.getNeedsWasPredicate()?o.getNeedsOrderBy()?(t=null===o.getLastOrderBy()?o.getLastWasPredicate():o.getLastOrderBy(),"was"===o.getLastOperator()?g.renderSuggestionsFromMap(t,r.jql_was_predicates_and_order_by,!1):g.renderSuggestionsFromMap(t,r.jql_changed_predicates_and_order_by,!1)):"was"===o.getLastOperator()?g.renderSuggestionsFromMap(o.getLastWasPredicate(),r.jql_was_predicates_and_logical_operators,!1):g.renderSuggestionsFromMap(o.getLastWasPredicate(),r.jql_changed_predicates_and_logical_operators,!1):o.getNeedsOrderBy()?(t=null===o.getLastOrderBy()?o.getLastLogicalOperator():o.getLastOrderBy(),g.renderSuggestionsFromMap(t,r.jql_logical_operators_and_order_by,!1)):g.renderSuggestionsFromMap(o.getLastLogicalOperator(),r.jql_logical_operators,!1);else if(o.getNeedsOrderByField())g.renderSuggestionsFromMap(a.stripEscapeCharacters(o.getLastOrderByFieldName()),c,!0,!1,!0);else if(o.getNeedsOrderByDirection())g.renderSuggestionsFromMap(o.getLastOrderByDirection(),r.jql_order_by_direction,!1);else if(o.getNeedsOperand()){var y=o.getLastFieldName(),q=!1;if(!n.isEmptyOnlyOperator(o.getLastOperator()))for(var _=0;_<u.length;_++)if(a.equalsIgnoreCase(a.getUnquotedString(u[_].value),y)||u[_].cfid&&a.equalsIgnoreCase(u[_].cfid,y)){q=u[_].auto;break}s=n.isEmptyOnlyOperator(o.getLastOperator())?r.empty_operand:f,g.prepareOperandSuggestions(q,y,s,{})}else o.getNeedsOrderBy()?g.renderSuggestionsFromMap(o.getLastOrderBy(),r.jql_logical_operators_and_order_by,!1):g.dropdownController.hideDropdown();g.parse(e)},g.parse=function(e){var t=p.parse(e);return g.updateParseIndicator(t),C(t.tokenString),g.updateColumnLineCount(),t.getResult()};var C=function(e){if(g.field.parent().find("#deprecated-searcher-warning-container").remove(),_(e)){m.attr("title","").removeClass("jqlgood").addClass("jqlerror");var t=j(e),r=AJS.format("{0} will soon be replaced with {1}. \u003ca href=\"#\" class=\"jql-deprecated-link\"\u003eUpdate to {1}\u003c/a\u003e to prepare for these changes.",t,"Parent");g.field.parent().find("#deprecated-searcher-warning-container").length||($('<div id="deprecated-searcher-warning-container"><span class="deprecated-searcher-icon"></span><span>'+r+"</span></div>").appendTo(g.field.parent()),g.field.parent().find(".jql-deprecated-link").click(function(){return window.open("https://support.atlassian.com/jira-software-cloud/docs/upcoming-changes-epic-link-replaced-with-parent"),!1}))}};return g.renderSuggestionsFromMap=function(e,t,r,a,n){r||(r={});var s=g.slimListForMapResults(e,t,a),i=g.slimListForMapResults(e,r,a);g.boldMatchingString(e,i),g.boldMatchingString(e,s),g.renderSuggestions(s,i,[],n),0===s.length&&0===i.length&&g.dropdownController.hideDropdown()},g.getSuggestionsForOperators=function(e,t){for(var r,n=g.slimListForMapResults(e,t,!1),s=o.getLastFieldName(),i=0;i<u.length;i++)if(a.equalsIgnoreCase(a.getUnquotedString(u[i].value),s)||u[i].cfid&&a.equalsIgnoreCase(u[i].cfid,s)){r=u[i].operators;break}return r&&(n=l.grep(n,function(e){return l.inArray(e.value,r)>-1})),g.boldMatchingString(e,n),n},g.renderSuggestionsForOperators=function(e,t){var r=g.getSuggestionsForOperators(e,t);g.renderSuggestions(r),0===r.length&&g.dropdownController.hideDropdown()},g.renderSuggestionsForOperands=function(e,t,r,a,n){if(n===h){var s=g.slimListForFunctionResults(e,r,o.getLastOperator());g.boldMatchingString(e,s),g.renderSuggestions(t,s,a,!1),0===t.length&&0===s.length&&0===a.length&&g.dropdownController.hideDropdown()}},g.boldMatchingString=function(e,t){if(null!=e&&0!==t.length){for(var r=e.length,a=0,n=r;a<n;a++)switch(e.charAt(a)){case"<":case">":r+=3;break;case"&":r+=4;break;case'"':r+=5}for(var s=0;s<t.length;s++)if(t[s].displayName){var i=t[s].displayName;t[s]={value:t[s].value,displayName:"<b>"+i.substring(0,r)+"</b>"+i.substring(r)}}else t[s]={value:t[s],displayName:"<b>"+t[s].substring(0,r)+"</b>"+t[s].substring(r)}}},g.getReplacementStartIndex=function(e,t){var r,a=l(g.field);return r=e.getNeedsField()?e.getLastFieldNameStartIndex():e.getNeedsOperatorOrOperand()?e.getNeedsOperator()&&n.isWasOperator(t)?e.getLastOperatorStartIndex():e.getLastOperandStartIndex():e.getNeedsOperand()?e.getLastOperandStartIndex():e.getNeedsOperator()?e.getLastOperatorStartIndex():e.getNeedsOrderByField()?e.getLastOrderByFieldNameStartIndex():e.getNeedsOrderByDirection()?e.getLastOrderByDirectionStartIndex():e.getNeedsPredicateOperand()?e.getLastOperandStartIndex():e.getNeedsLogicalOperator()?null!==e.getLastLogicalOperatorStartIndex()&&0!==e.getLastLogicalOperatorStartIndex()?e.getLastLogicalOperatorStartIndex():null!==e.getLastOrderBy()&&0!==e.getLastOrderByStartIndex()?e.getLastOrderByStartIndex():null!=e.getLastWasPredicate()&&0!==e.getLastWasPredicateStartIndex()?e.getLastWasPredicateStartIndex():e.getMustBeOperatorOrPredicate()===!0?a.selectionRange().start:a.selectionRange().start-1:e.getNeedsWasPredicate()?e.getLastWasPredicateStartIndex():e.getNeedsOrderBy()?e.getLastOrderByStartIndex():a.selectionRange().start-1,null!=r?r:a.selectionRange().start},g.getReplacementEndIndex=function(e,t){var a=l(g.field),n=a.selectionRange(),s=null;if(n.start===n.end&&n.end!==g.field.val().length&&t<n.start){var i=e.getTokens().length-1,o=p.parse(g.field.val());if(!o.getParseError()){var d=o.getResult().getTokens()[i];if(null!==d&&"("!==d&&")"!==d){for(var u=g.field.val(),c=u.substring(t,u.length),f=c.split(""),m=0,h=0;h<f.length&&r.REGEXP_WHITESPACE.test(f[h]);h++)m++;s=t+d.length+m}}}return null===s&&(s=n.end),s<t&&(g.replaceValue(t,s," "),s=t),s},g.replaceValue=function(e,t,r){var a=l(g.field);a.selectionRange(e,t),l.browser.webkit&&!g.field.forceSelection?document.execCommand("insertText",!1,r):g.field.forceSelection&&g.field.selection?g.field.selection(r):a.selection(r);var n=a.selectionRange().end;a.selectionRange(n,n)},g.slimListForMapResults=function(e,t,r){var n=a.htmlEscape(e),s=l.grep(t,function(e){return a.startsWithIgnoreCaseNullsMeanAll(n,e.displayName)});return r||1!==s.length||a.startsWithNotEqualsIgnoreCaseNullMeansAll(n,s[0].displayName)?s:{}},g.slimListForFunctionResults=function(e,t,r){for(var s,i=o.getLastFieldName(),d=0;d<u.length;d++)if(a.equalsIgnoreCase(a.getUnquotedString(u[d].value),i)||u[d].cfid&&a.equalsIgnoreCase(u[d].cfid,i)){s=u[d].types;break}var g=l.grep(t,function(t){if(t.isList&&!n.isListSupportingOperator(r)||!t.isList&&n.isListSupportingOperator(r))return!1;if(!s)return!1;for(var i=l.inArray("java.lang.Object",t.types)>-1||l.inArray("java.lang.Object",s)>-1,o=0;o<s.length&&!i;o++)i=l.inArray(s[o],t.types)!==-1;return!!i&&(a.startsWithIgnoreCaseNullsMeanAll(e,t.value)||a.startsWithIgnoreCaseNullsMeanAll(e,t.displayName))});return 1!==g.length||a.startsWithNotEqualsIgnoreCaseNullMeansAll(e,g[0].displayName)?g:{}},g.slimListForPredicates=function(e,t,n){for(var s,i,o=0;o<r.jql_changed_predicates.length;o++)if(a.equalsIgnoreCase(a.getUnquotedString(r.jql_changed_predicates[o].value),n)){s=r.jql_changed_predicates[o].type,i=r.jql_changed_predicates[o].supportsList;break}var d=l.grep(t,function(t){if("undefined"!=typeof t.isList&&(t.isList&&i||!t.isList&&i))return!1;var r=l.inArray(s,t.types)!==-1;return!!r&&(a.startsWithIgnoreCaseNullsMeanAll(e,t.value)||a.startsWithIgnoreCaseNullsMeanAll(e,t.displayName))});return 1!==d.length||a.startsWithNotEqualsIgnoreCaseNullMeansAll(e,d[0].displayName)?d:{}},g.predicateSupportsAutoComplete=function(e){for(var t,n=0;n<r.jql_changed_predicates.length;n++)if(a.equalsIgnoreCase(a.getUnquotedString(r.jql_changed_predicates[n].value),e)){t=r.jql_changed_predicates[n].auto;break}return t},g.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},g.saveResponse=function(e,t){"string"==typeof e&&"object"==typeof t&&(this.requested||(this.requested={}),this.requested[e]=t)},g.startsWithIgnoreCase=function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},g.updateParseIndicator=function(e){e.getParseError()?m.attr("title",e.getResult().getParseErrorMsg()).removeClass("jqlgood").addClass("jqlerror"):m.attr("title","").removeClass("jqlerror").addClass("jqlgood")},g.updateColumnLineCount=function(){var e=l(g.field),t=0;if(g.field[0]===document.activeElement){var a=e.selectionRange();t=a.start}else t=g.field[0].value.length;for(var n=1,s=1,i=g.field.val(),o=0;o<t;o++)r.REGEXP_NEW_LINE.test(i.charAt(o))?(n++,s=1):s++;v.text(s),S.text(n)},g.isAutoSelectFirstEnabled=function(){return d.isFeatureEnabled("jira.jql.autoselectfirst")},g.init(s),g};return g});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/jql-grammar.js' */
define("jira/jql/jql-grammar",function(){"use strict";var a={};return a.jql_order_by=[{value:"ORDER BY",displayName:"ORDER BY"}],a.jql_operators=[{value:"=",displayName:"="},{value:"!=",displayName:"!="},{value:"~",displayName:"~"},{value:"<=",displayName:"&lt;="},{value:">=",displayName:"&gt;="},{value:">",displayName:"&gt;"},{value:"<",displayName:"&lt;"},{value:"!~",displayName:"!~"},{value:"is not",displayName:"is not"},{value:"is",displayName:"is"},{value:"not in",displayName:"not in"},{value:"in",displayName:"in"},{value:"was",displayName:"was"},{value:"was not",displayName:"was not"},{value:"was in",displayName:"was in"},{value:"was not in",displayName:"was not in"},{value:"changed",displayName:"changed"}],a.jql_logical_operators=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"}],a.jql_logical_operators_and_order_by=a.jql_logical_operators.concat(a.jql_order_by),a.jql_order_by_direction=[{value:"ASC",displayName:"ASC"},{value:"DESC",displayName:"DESC"}],a.empty_operand=[{value:"EMPTY",displayName:"EMPTY",types:["java.lang.Object"]}],a.jql_not_logical_operator=[{value:"NOT",displayName:"NOT"}],a.jql_was_predicates=[{value:"AFTER",displayName:"AFTER",type:"java.util.Date",supportsList:"false"},{value:"BEFORE",displayName:"BEFORE",type:"java.util.Date",supportsList:"false"},{value:"BY",displayName:"BY",type:"com.atlassian.crowd.embedded.api.User",supportsList:"false",auto:"true"},{value:"DURING",displayName:"DURING",type:"java.util.Date",supportsList:"true"},{value:"ON",displayName:"ON",type:"java.util.Date",supportsList:"false"}],a.jql_changed_predicates=a.jql_was_predicates.concat([{value:"FROM",displayName:"FROM",type:"java.lang.String",supportsList:"true",auto:"true"},{value:"TO",displayName:"TO",type:"java.lang.String",supportsList:"true",auto:"true"}]),a.jql_was_predicates_and_order_by=a.jql_was_predicates.concat(a.jql_logical_operators_and_order_by),a.jql_was_predicates_and_logical_operators=a.jql_was_predicates.concat(a.jql_logical_operators),a.jql_changed_predicates_and_order_by=a.jql_changed_predicates.concat(a.jql_logical_operators_and_order_by),a.jql_changed_predicates_and_logical_operators=a.jql_changed_predicates.concat(a.jql_logical_operators),a.REGEXP_ANDS=/^AND\s/i,a.REGEXP_ORS=/^OR\s/i,a.REGEXP_NOTS=/^NOT\s/i,a.REGEXP_SNOT=/^\s+not/i,a.REGEXP_SIN=/^\s+in/i,a.REGEXP_SNOT_IN=/^\s+(not\s+in|not|in)/i,a.REGEXP_COMMA_DELIMITER=/^\s*,/,a.REGEXP_ASCENDING=/^\s+asc/i,a.REGEXP_DESCENDING=/^\s+desc/i,a.REGEXP_ORDER_BY=/^order\s+by/i,a.REGEXP_WHITESPACE=/^\s/,a.REGEXP_UNICODE=/^u[a-fA-F0-9]{4}/,a.REGEXP_FIELD_NAME=/^\s-\scf\[\d\d\d\d\d\]/,a.REGEXP_NEW_LINE=/[\r\n]/,a.REGEXP_NUMBER=/\d/,a.REGEXP_TOKEN_CHAR=/[^=!~<>(),\s&|\]]/,a.REGEXP_SPECIAL_CHAR=/[{}*\/%+$#@?;\][]/,a.REGEXP_SPACE_OR_ELSE=/[\s(]/,a.REGEXP_CHARS_TO_ESCAPE=/[^trn"'\\\s]/,a.REGEXP_NOTSTART=/^NO?$/i,a.REGEXP_INSTART=/^IN?$/i,a.REGEXP_PREDICATE=/^(after|before|by|during|from|on|to)/i,a.REGEXP_GROUPED_CUSTOM_FIELD=/^[^\[\]\s.'"]+\[[\w\s]+]/,a});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/jql-parse-result.js' */
define("jira/jql/jql-parse-result",["jira/jql/util"],function(e){"use strict";return function(){var t=[],r=[],n=0;return{getTokens:function(){return r},getRichTokens:function(){return t},addToken:function(e){r[n]=e,t[n]={value:e,kind:"unknown"},n++},setLastFieldName:function(s,i){this.fieldNameStartIndex=null===s?i.getMaxTokenStringIdx():i.getTokenStringIdx()-s.length,this.lastFieldName=e.getUnquotedString(s),r[n]=s,t[n]={value:s,kind:"fieldName",startIndex:this.fieldNameStartIndex},n++},getLastFieldName:function(){return this.lastFieldName},getLastFieldNameStartIndex:function(){return this.fieldNameStartIndex},setLastOrderByFieldName:function(s,i){this.orderByFieldNameStartIndex=null===s?i.getMaxTokenStringIdx():i.getTokenStringIdx()-s.length,this.lastOrderByFieldName=e.getUnquotedString(s),this.lastOrderByDirection=null,r[n]=s,t[n]={value:s,kind:"orderByFieldName",startIndex:this.orderByFieldNameStartIndex},n++},getLastOrderByFieldName:function(){return this.lastOrderByFieldName},getLastOrderByFieldNameStartIndex:function(){return this.orderByFieldNameStartIndex},setLastOrderByDirection:function(e,s){this.orderByDirectionStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderByDirection=e,r[n]=e,t[n]={value:this.lastOrderByDirection,kind:"orderByDirection",startIndex:this.orderByDirectionStartIndex},n++},getLastOrderByDirection:function(){return this.lastOrderByDirection},getLastOrderByDirectionStartIndex:function(){return this.orderByDirectionStartIndex},setNeedsField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsWasPredicate=!1,this.lastWasOperator=null},getNeedsField:function(){return this.needsField},setNeedsOrderByField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!0,this.needsOrderByDirection=!1,this.lastOrderByDirection=null,this.needsListComma=!1},getNeedsOrderByField:function(){return this.needsOrderByField},setNeedsOrderByDirection:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!0,this.needsListComma=!1},getNeedsOrderByDirection:function(){return this.needsOrderByDirection},setNeedsOrderByComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsListComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!0},getNeedsListComma:function(){return this.needsListComma},setLastOperator:function(e,s){this.lastOperator=e,this.operatorStartIndex=s,r[n]=e,t[n]={value:this.lastOperator,kind:"operator",startIndex:this.operatorStartIndex},n++},setLastWasOperator:function(e){this.lastWasOperator=e},getLastWasOperator:function(){return this.lastWasOperator},getLastOperator:function(){return this.lastOperator},getLastOperatorStartIndex:function(){return this.operatorStartIndex},setLastOperand:function(s,i){this.operandStartIndex=null===s?i.getMaxTokenStringIdx():i.getTokenStringIdx()-s.length,this.lastOperand=e.getUnquotedString(s),r[n]=s,t[n]={value:s,kind:"operand",startIndex:this.operandStartIndex},n++},getLastOperand:function(){return this.lastOperand},setNeedsOperand:function(){this.needsField=!1,this.needsOperator=!1,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsOperandOrOperator:function(){this.needsField=!1,this.needsOperator=!0,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperand:function(){return this.needsOperand},setNeedsPredicateOperand:function(){this.needsPredicateOperand=!0},resetNeedsPredicateOperand:function(){this.needsPredicateOperand=!1,this.needsOperand=!1},getNeedsPredicateOperand:function(){return this.needsPredicateOperand},getLastOperandStartIndex:function(){return this.operandStartIndex},setLastOperandStartIndex:function(e){this.operandStartIndex=e,this.richTokens[n].startIndex=e},setLastLogicalOperator:function(e,s){this.lastLogicalOperator=e,this.logicalOperatorStartIndex=s,r[n]=e,t[n]={value:this.lastLogicalOperator,kind:"logicalOperator",startIndex:this.logicalOperatorStartIndex},n++},setNeedsOperator:function(){this.needsField=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsOperator=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperatorOrOperand:function(){return this.needsOperator&&this.needsOperand},getNeedsOperator:function(){return this.needsOperator},getLastLogicalOperator:function(){return this.lastLogicalOperator},getLastLogicalOperatorStartIndex:function(){return this.logicalOperatorStartIndex},setNeedsLogicalOperator:function(e){this.needsLogicalOperator=!0,this.needsOperator=!1,this.needsOperand=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsOrderBy=!e.getInParens(),null!=this.lastWasOperator&&(this.needsWasPredicate=!0)},setNeedsOpenParen:function(e){this.needsOpenParen=e},getNeedsOpenParen:function(){return this.needsOpenParen},getNeedsLogicalOperator:function(){return this.needsLogicalOperator},setNeedsOrderBy:function(e){this.needsOrderBy=e},getNeedsOrderBy:function(){return this.needsOrderBy},getNeedsWasPredicate:function(){return this.needsWasPredicate},setLastWasPredicate:function(e,t){this.wasPredicateStartIndex=null===e?t.getMaxTokenStringIdx():t.getTokenStringIdx()-e.length,this.lastWasPredicate=e,r[n]=e,n++},getLastWasPredicate:function(){return this.lastWasPredicate},resetLastPredicates:function(){this.lastLogicalOperator=null,this.lastWasPredicate=null,this.lastOperand=null,this.wasPredicateStartIndex=null,this.operandStartIndex=null},getLastWasPredicateStartIndex:function(){return this.wasPredicateStartIndex},setLastOrderBy:function(e,s){this.orderByStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderBy=e,r[n]=e,t[n]={value:this.lastOrderBy,kind:"orderBy",startIndex:this.orderByStartIndex},n++},getLastOrderBy:function(){return this.lastOrderBy},getLastOrderByStartIndex:function(){return this.orderByStartIndex},resetLogicalOperators:function(){this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.needsLogicalOperator=null},setParseError:function(e){this.parseError=!0,this.parseErrorMsg=e},getParseError:function(){return this.parseError},getParseErrorMsg:function(){return this.parseErrorMsg},setNeedsNothing:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsOpenParen=!1,this.needsListComma=!1,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null},setOperandComplete:function(){this.operandComplete=!0},getOperandComplete:function(){return this.operandComplete},setInsideList:function(e){this.insideList=e},isInsideList:function(){return this.insideList},setMustBeOperatorOrPredicate:function(e){this.mustBeOperatorOrPredicate=e},getMustBeOperatorOrPredicate:function(){return this.mustBeOperatorOrPredicate},resetTerminalClause:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=!1,this.mustBeOperatorOrPredicate=null},init:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.lastOrderByFieldName=null,this.lastOrderByFieldNameStartIndex=null,this.lastOrderByDirection=null,this.lastOrderByDirectionStartIndex=null,this.orderByStartIndex=null,this.lastOrderBy=null,this.needsOrderBy=null,this.needsOrderByField=null,this.needsOrderByDirection=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=null,this.wasPredicateStartIndex=null,this.lastWasPredicate=null,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null,this.insideList=null}}}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/jql-parse-token.js' */
define("jira/jql/jql-parse-token",["jira/jql/jql-parse-result"],function(t){"use strict";return function(){return{init:function(n){this.tokenStringIdx=0,this.tokenString=n,this.parseError=!1,this.parseErrorMsg=null,this.result=t(),this.result.init(),this.inParens=0,this.inListParens=0},consumeCharacter:function(){this.tokenStringIdx++},consumeCharacters:function(t){this.tokenStringIdx=this.tokenStringIdx+t},backTrackToIdx:function(t){this.tokenStringIdx=t,this.parseError=!1,this.parseErrorMsg=null,this.result.parseError=!1,this.result.parseErrorMsg=null},getTokenStringIdx:function(){return this.tokenStringIdx},currentCharacter:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.charAt(this.tokenStringIdx)},remainingString:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.substr(this.tokenStringIdx,this.tokenString.length)},getMaxTokenStringIdx:function(){return this.tokenString.length},isComplete:function(){return!!this.parseError||this.tokenStringIdx>=this.tokenString.length},setInParens:function(){this.inParens++},setOutOfParens:function(){0!==this.inParens&&this.inParens--},getInParens:function(){return 0!==this.inParens},setInListParens:function(){this.inListParens++},setOutOfListParens:function(){this.inListParens>0&&this.inListParens--},getInListParens:function(){return this.inListParens>0},setParseError:function(){this.parseError=!0;var t=this.tokenStringIdx-9<0?0:this.tokenStringIdx-9,n=this.tokenString.substring(t,this.tokenStringIdx-1);this.result.setParseError("..."+n+"^"+this.tokenString.substring(this.tokenStringIdx,this.tokenString.length))},getParseError:function(){return this.parseError},calcLastOperandStartIndex:function(){var t=this.getResult(),n=t.getLastOperator();if(n.length>0){var r=n.length-n.replace(/\s+/g,"").length;t.setLastOperandStartIndex(t.getLastOperatorStartIndex()+n.length+r+1)}},getParsedOperator:function(){var t=this.getResult();return t.getLastOperator().length>0?this.tokenString.substr(t.getLastOperatorStartIndex()):null},getResult:function(){return this.result}}}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/jql-parser.js' */
define("jira/jql/jql-parser",["jira/jql/jql-grammar","jira/jql/jql-parse-token","jira/jql/operator-util","jquery","jira/jql/util"],function(e,t,r,s,a){return function(i){var n=i;return{parse:function(e){var r=t();return r.init(e),this.jql(r),r},orderByClause:function(t){var r=t.remainingString(),s=r.match(e.REGEXP_ORDER_BY);if(s){var a=r.substring(0,s[0].length);t.consumeCharacters(a.length),t.getResult().setLastOrderBy(a,t),t.isComplete()?(t.getResult().resetLogicalOperators(),t.setParseError()):(r=t.remainingString(),e.REGEXP_WHITESPACE.test(r)?(this.chewWhitespace(t),this.orderByFields(t)):(t.getResult().resetLogicalOperators(),t.setParseError()))}else t.consumeCharacters(r.length),t.getResult().setLastOrderBy(r,t),t.setParseError()},orderByFields:function(e){if(this.orderByField(e),this.chewWhitespace(e),e.isComplete())e.getResult().getNeedsOrderByField()||e.getResult().setLastOrderByDirection("",e);else{var t=e.remainingString();this.startsWithIgnoreCase(",",t)?(e.consumeCharacter(),this.orderByFields(e),this.chewWhitespace(e)):(t=e.remainingString(),null!==t&&e.consumeCharacters(t.length),e.getResult().setNeedsOrderByDirection(),e.getResult().setLastOrderByDirection(t,e),e.setParseError())}},orderByField:function(t){this.chewWhitespace(t);var r=this.fieldName(t);if(0!==r.length){t.getResult().setLastOrderByFieldName(r,t);var s=t.remainingString();t.isComplete()||e.REGEXP_COMMA_DELIMITER.test(s)?(t.getResult().setNeedsOrderByField(),this.chewWhitespace(t)):e.REGEXP_ASCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(3),t.getResult().setLastOrderByDirection("asc",t),t.getResult().setNeedsOrderByComma()):e.REGEXP_DESCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(4),t.getResult().setLastOrderByDirection("desc",t),t.getResult().setNeedsOrderByComma()):t.getResult().setNeedsOrderByDirection()}else t.getResult().setLastOrderByFieldName("",t),t.getResult().setNeedsOrderByField(),t.setParseError()},jql:function(e){this.orClause(e);var t=e.remainingString();this.startsWithIgnoreCase("ord",t)&&this.orderByClause(e),e.result.setInsideList(0!==e.inListParens)},orClause:function(t){for(;!t.isComplete()&&!this.startsWithIgnoreCase(")",t.remainingString());){this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("ord",r))break;if(t.getResult().getMustBeOperatorOrPredicate()?t.getResult().resetLastPredicates():(t.getResult().resetLogicalOperators(),this.andClause(t)),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){if(t.getResult().getNeedsWasPredicate()&&this.predicateClause(t),t.isComplete())return;if(r=t.remainingString(),this.startsWithIgnoreCase("ord",r))break;if(null!==r&&(e.REGEXP_ORS.test(r)||this.startsWithIgnoreCase("|",r)||this.startsWithIgnoreCase("||",r)))this.startsWithIgnoreCase("||",r)?(t.getResult().setLastLogicalOperator("||",t.getTokenStringIdx()),t.consumeCharacters(2)):e.REGEXP_ORS.test(r)?(t.getResult().setLastLogicalOperator("OR",t.getTokenStringIdx()),t.consumeCharacters(3)):(t.getResult().setLastLogicalOperator("|",t.getTokenStringIdx()),t.consumeCharacters(1)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField();else if(!this.startsWithIgnoreCase(")",r)||!t.getInParens()){this.chewWhitespace(t);var s,a=null===r?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-r.length;null!=r&&(s=r.split(" "),t.getResult().setLastLogicalOperator(s[0],a),t.getResult().setLastWasPredicate(s[0],t),t.getResult().setNeedsLogicalOperator(t)),null==t.getResult().getLastWasOperator()?t.setParseError():null!=s&&(e.REGEXP_PREDICATE.test(s[0])?(t.getResult().setLastLogicalOperator(null),t.getResult().resetNeedsPredicateOperand()):(e.REGEXP_ANDS.test(r)&&(t.consumeCharacters(4),t.getResult().resetTerminalClause(),t.getResult().setNeedsField()),(t.isComplete()||1===s.length)&&t.setParseError()))}}}},andClause:function(t){if(this.chewWhitespace(t),this.notClause(t),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_ANDS.test(r)||this.startsWithIgnoreCase("&",r)||this.startsWithIgnoreCase("&&",r))?(this.startsWithIgnoreCase("&&",r)?(t.getResult().setLastLogicalOperator("&&",t.getTokenStringIdx()),t.consumeCharacters(2)):this.startsWithIgnoreCase("&",r)?(t.getResult().setLastLogicalOperator("&",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("AND",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):(t.getResult().setNeedsLogicalOperator(t),t.isComplete()&&t.getResult().setLastLogicalOperator(null,t.getMaxTokenStringIdx()))}},notClause:function(t){if(this.chewWhitespace(t),t.isComplete())this.terminalClause(t),t.setParseError();else{this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_NOTS.test(r)||this.startsWithIgnoreCase("!",r))?(t.getResult().needsField=!1,this.startsWithIgnoreCase("!",r)?(t.getResult().setLastLogicalOperator("!",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("NOT",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):this.terminalClause(t)}},predicateClause:function(e){if(this.chewWhitespace(e),e.isComplete())e.setParseError();else{var t=e.remainingString(),r=t.split(/[\s(]+/);if(null!==t){if(e.getResult().setMustBeOperatorOrPredicate(!1),this.startsWithLogicalOperator(t)){if(1===r.length)return e.getResult().setLastWasPredicate(r[0],e),void e.setParseError();return}if(e.getResult().resetNeedsPredicateOperand(),e.consumeCharacters(r[0].length),e.getResult().setLastWasPredicate(r[0],e),1===r.length)return void e.setParseError();this.wasPredicateComplete(r[0])?(e.getResult().setNeedsPredicateOperand(),e.getResult().setLastOperand(null,e),this.predicateOperand(e)):e.setParseError()}}},predicateOperand:function(e){this.chewWhitespace(e);var t=this.collectPredicateOperands(e);null!=t&&""!=t||(e.getResult().setLastOperandStartIndex(e.getTokenStringIdx()),e.setParseError()),null!=e.remainingString()&&(e.getResult().resetNeedsPredicateOperand(),e.getResult().resetLastPredicates(),e.getResult().setMustBeOperatorOrPredicate(!0),e.getResult().setNeedsLogicalOperator(e),this.chewWhitespace(e))},collectPredicateOperands:function(e){"DURING"===e.getResult().getLastWasPredicate()&&e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);return 0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),a.getUnquotedString(t)},terminalClause:function(t){t.getResult().resetTerminalClause(),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("(",r))t.getResult().addToken("("),t.setInParens(),t.consumeCharacter(),this.orClause(t),this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase(")",r)?(t.getResult().addToken(")"),t.consumeCharacter(),t.setOutOfParens(),t.isComplete()&&(t.getResult().resetLogicalOperators(),t.getResult().resetLastPredicates())):t.setParseError();else if(this.field(t),t.isComplete())t.getResult().setNeedsField(),t.setParseError();else if(this.oper(t),t.isComplete()){if("was"===t.getResult().getLastOperator()||"was not"===t.getResult().getLastOperator())t.getResult().setNeedsOperandOrOperator();else{if("changed"===t.getResult().getLastWasOperator()){var s=t.currentCharacter();return void(null!==s&&e.REGEXP_SPACE_OR_ELSE.test(s)?t.getResult().setNeedsLogicalOperator(t):(t.getResult().resetLogicalOperators(),t.getResult().setNeedsOrderBy(!1)))}t.getResult().setNeedsOperator()}t.setParseError()}else{if("changed"===t.getResult().getLastWasOperator())return void t.getResult().setNeedsLogicalOperator(t);if(this.operand(t),t.getResult().getOperandComplete()){var a=t.getResult().getLastWasOperator();t.getResult().setNeedsNothing(),a&&t.getResult().setLastWasOperator(a)}else t.isComplete()&&!t.getResult().getNeedsListComma()&&t.getResult().setNeedsOperand()}},field:function(e){var t=this.fieldName(e);if(0!==t.length)e.getResult().setLastFieldName(t,e);else if(null===e.getResult().getLastFieldName()){var r=e.remainingString();e.getResult().setNeedsField(),e.getResult().setLastFieldName(r,e),e.setParseError()}},fieldName:function(t){this.chewWhitespace(t);var r=["issue","assignee","reporter","creator","watcher","project"],s=t.remainingString(),a=this.findStartsWith(r,s);if(a)return this.fieldProperty(a,t);if(this.startsWithIgnoreCase("cf",s)){var i=t.getTokenStringIdx(),n=t.remainingString();if(t.consumeCharacters(2),this.chewWhitespace(t),s=t.remainingString(),this.startsWithIgnoreCase("[",s)){t.consumeCharacter(),s=t.remainingString();var l=this.numberValue(t);if(0!==l.length&&(this.chewWhitespace(t),s=t.remainingString(),this.startsWithIgnoreCase("]",s)))return t.consumeCharacter(),n.substring(0,t.getTokenStringIdx()-i)}return t.setParseError(),n}var o=s&&s.match(e.REGEXP_GROUPED_CUSTOM_FIELD);if(o){var g=o[0];return t.consumeCharacters(g.length),g}return this.fieldOrFunctionName(t)},fieldProperty:function(e,t){t.consumeCharacters(e.length),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("[",r)){t.consumeCharacter();for(var s=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),s[s.length]=this.stringValue(t);if(0!==s.length&&0!==s[0].length&&!this.startsWithIgnoreCase(".",s[0])&&(this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase("]",r)&&(t.consumeCharacter(),r=t.remainingString(),!/\.\s*=/.test(r)))){for(var a=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),a[a.length]=this.stringValue(t);return e+"["+s.join(".")+"]"+a.join(".")}}return t.setParseError(),""},findStartsWith:function(e,t){var r=this.startsWithIgnoreCase,s=e.map(function(e){return e+".property"}),a=_.find(s,function(e){return r(e,t)});return a||null},oper:function(t){this.chewWhitespace(t);var s=t.remainingString(),a=this.getLongestOperatorMatch(s,e.jql_operators);if(null!==a){if(t.getResult().setLastOperator(a,t.getTokenStringIdx()),(r.isWasOperator(a)||r.isChangedOperator(a))&&t.getResult().setLastWasOperator(a),t.consumeCharacters(a.length),"in"===a||"is"===a||"is not"===a||"not in"===a||"was"===a||"was not"===a||"was in"===a||"was not in"===a){var i=t.currentCharacter();null===i||e.REGEXP_SPACE_OR_ELSE.test(i)||t.setParseError()}"was"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),s=t.remainingString(),null!=s&&(e.REGEXP_NOTSTART.test(s)||e.REGEXP_INSTART.test(s))&&t.setParseError()):"was not"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),s=t.remainingString(),null!=s&&e.REGEXP_INSTART.test(s)&&t.setParseError()):"changed"===a?t.getResult().setNeedsLogicalOperator(t):t.getResult().setNeedsOperand()}else if(null===t.getResult().getLastOperator()){var n=null===s?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-s.length;t.getResult().setLastOperator(s,n),t.getResult().setNeedsOperator(),t.setParseError()}},operand:function(e){this.chewWhitespace(e),"in"!==e.getResult().getLastOperator()&&"not in"!==e.getResult().getLastOperator()&&"was not in"!==e.getResult().getLastOperator()&&"was in"!==e.getResult().getLastOperator()||e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);if(0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),null===t||0===t.length){var r=e.remainingString();e.getResult().setLastOperand(r,e),e.getResult().setNeedsOperand(),e.setParseError()}return 0!==t.length?t:""},singleValueOperand:function(e){var t=this.stringValue(e);return 0!==t.length?(e.getResult().setLastOperand(t,e),"empty"!==t.toLowerCase()&&"null"!==t.toLowerCase()&&this.isReservedWord(t.toLowerCase())&&e.setParseError(),t):""},functionOperand:function(e){var t=e.getTokenStringIdx(),r=this.fieldOrFunctionName(e);this.chewWhitespace(e);var s=this.listOperand(e,!1);if(0!==r.length&&0!==s.length){var a=r+s;return e.getResult().setLastOperand(a,e),a}return e.backTrackToIdx(t),""},listOperand:function(e,t){if("("===e.currentCharacter()){e.consumeCharacter(),e.setInListParens();var r=this.collectListValues(e,t),s="("+r;return this.chewWhitespace(e),")"===e.currentCharacter()?(e.consumeCharacter(),e.setOutOfListParens(),s+=")","()"===s&&t&&e.getResult().setLastOperand(s,e),t&&(e.getResult().setOperandComplete(),e.getResult().resetNeedsPredicateOperand())):e.setParseError(),s}return""},collectListValues:function(e,t){t&&e.getResult().setNeedsOperand(),this.chewWhitespace(e);var r=t?this.operand(e):this.stringValue(e);if(0!==r.length){if(this.chewWhitespace(e)&&t&&e.getResult().setNeedsListComma(),","===e.currentCharacter()){e.consumeCharacter();var s=this.collectListValues(e,t);return 0===s.length&&e.setParseError(),r+", "+s}return r}return""},startsWithIgnoreCase:function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},startsWithLogicalOperator:function(e){return null!==e&&(this.startsWithOr(e)||this.startsWithAnd(e)||this.startsWithNot(e)||this.startsWithBraces(e))},startsWithOr:function(e){return this.startsWithIgnoreCase("|",e)||this.startsWithIgnoreCase("||",e)||this.startsWithIgnoreCase("or",e)},startsWithAnd:function(e){return this.startsWithIgnoreCase("&",e)||this.startsWithIgnoreCase("&&",e)||this.startsWithIgnoreCase("and",e)},startsWithNot:function(e){return this.startsWithIgnoreCase("!",e)||this.startsWithIgnoreCase("not",e)},startsWithBraces:function(e){return this.startsWithIgnoreCase("(",e)||this.startsWithIgnoreCase(")",e)},chewWhitespace:function(t){for(var r=!1,s=t.currentCharacter();null!==s&&e.REGEXP_WHITESPACE.test(s);)t.consumeCharacter(),s=t.currentCharacter(),r=!0;return r},getLongestOperatorMatch:function(t,r){var s,a=null;if(this.startsWithIgnoreCase("is",t)&&(s=t.substring(2).match(e.REGEXP_SNOT),a=s?t.substring(0,s[0].length+2):"is"),this.startsWithIgnoreCase("was",t))s=t.substring(3).match(e.REGEXP_SNOT_IN),a=s?t.substring(0,s[0].length+3):"was";else if(this.startsWithIgnoreCase("not",t)){var i=t.substring(3).match(e.REGEXP_SIN);i&&(a=t.substring(0,i[0].length+3))}else for(var n=0;n<r.length;n++)this.startsWithIgnoreCase(r[n].value,t)&&(null===a||e.jql_operators[n].value.length>a)&&(a=e.jql_operators[n].value);return a},getValueMinusExtraWhitespace:function(t){if(null===t)return null;for(var r="",s=!0,a=t.split(""),i=0;i<a.length;i++){var n=a[i];e.REGEXP_WHITESPACE.test(n)?s&&(s=!1,r+=n):(s=!0,r+=n)}return r},fieldOrFunctionName:function(e){var t=this.stringValue(e);return'""'!==t&&"''"!==t||e.setParseError(),this.isReservedWord(t.toLowerCase())&&e.setParseError(),t},isReservedWord:function(e){return s.inArray(e,n)!==-1},stringValue:function(t){for(var r="",s=!1,a=!1,i=t.currentCharacter();null!==i&&(s||a||e.REGEXP_TOKEN_CHAR.test(i));){if(r+=i,t.consumeCharacter(),"\\"===i){if(i=t.currentCharacter(),null===i){t.setParseError();break}if(e.REGEXP_CHARS_TO_ESCAPE.test(i)){var n=t.remainingString();if(!e.REGEXP_UNICODE.test(n)){t.setParseError();break}}r+=i,t.consumeCharacter()}else{if(e.REGEXP_SPECIAL_CHAR.test(i)&&!s&&!a){t.setParseError();break}'"'!==i||a?"'"!==i||s||(a=!a):s=!s}i=t.currentCharacter()}return t.isComplete()&&(s||a)&&t.setParseError(),r},numberValue:function(t){var r="";this.chewWhitespace(t);for(var s=t.currentCharacter();null!==s&&e.REGEXP_NUMBER.test(s);)r+=s,t.consumeCharacter(),s=t.currentCharacter();return r},wasPredicateComplete:function(t){for(var r=!1,s=e.jql_changed_predicates.length,a=0;a<s;++a)if(t.toLowerCase()==e.jql_changed_predicates[a].value.toLowerCase()){r=!0;break}return r}}}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/operator-util.js' */
define("jira/jql/operator-util",function(){"use strict";var n={};return n.isListSupportingOperator=function(n){return"in"===n||"not in"===n||"was not in"===n||"was in"===n},n.isEmptyOnlyOperator=function(n){return"is"===n||"is not"===n},n.isWasOperator=function(n){return"was"===n||"was in"===n||"was not in"===n||"was not"===n},n.isChangedOperator=function(n){return"changed"===n},n.isHistoryOperator=function(r){return n.isWasOperator(r)||n.isChangedOperator(r)},n});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/util.js' */
define("jira/jql/util",["jira/jql/jql-grammar","wrm/context-path"],function(e,t){"use strict";var a={},n=t()+"/images/icons/autocomplete/",o={Checkboxes:"Checkbox",Date:"Date",Dropdown:"Dropdown",Labels:"Labels",Number:"Number",Paragraph:"Paragraph",People:"People","Short text":"Short text","Time stamp":"Time stamp","Radio Buttons":"Radio","Project Picker (single project)":"Project picker","Version Picker (multiple versions)":"Version picker (multi)","Version Picker (single version)":"Version picker (single)","User Picker (single user)":"User picker (single)","URL Field":"URL","Select List (multiple choices)":"Select list (multiple choices)","User Picker (multiple users)":"User picker (multi)","Approvers List":"Approvers List","Group Picker (multiple groups)":"Group picker (multi)","Group Picker (single group)":"Group picker (single)","Select List (cascading)":"Select list (cascading)",Assets:"Assets","Date of first response":"Date of first response","Days since last comment":"Days since last comment","Domain of Reporter":"Domain of reporter","Domain of Assignee":"Domain of assignee","Number of attachments":"Number of attachments","Last public comment date":"Last public comment date","Last commented by a User Flag":"Last commented by a User Flag","Username of last updater or commenter":"Username of last updater or commenter","Number of comments":"Number of comments","Participants of an issue":"Participants of an issue",Team:"Team","Time in Status":"Time in status"},l={Checkboxes:n+"Checkbox.svg",Date:n+"Date.svg",Dropdown:n+"Dropdown.svg",Labels:n+"Label.svg",Number:n+"Number.svg",Paragraph:n+"Paragraph.svg",People:n+"People.svg","Short text":n+"Short-text.svg","Time stamp":n+"Time-stamp.svg"},r=/^"?(.+)\[(.+)\]"?$/,i=/^"?cf\[(\d+)\]"?$/;return a.extractFieldTypeInformation=function(e){var t=i.exec(e);if(t)return null;var a=r.exec(e);if(!a)return null;var n=a[2];return{name:o[n]||null,icon:l[n]||null}},a.isCollapsedField=function(e){return r.test(e)},a.htmlEscape=function(e){if(null==e)return null;for(var t="",a=e.split(""),n=0;n<a.length;n++)t+="<"===a[n]?"&lt;":">"===a[n]?"&gt;":"&"===a[n]?"&amp;":'"'===a[n]?"&quot;":a[n];return t},a.stripEscapeCharacters=function(t){if(null==t)return t;for(var a="",n=t.split(""),o=0;o<n.length&&("\\"!==n[o]||e.REGEXP_UNICODE.test(t.substring(o,t.length))||(o++,!(o>=t.length)));o++)a+=n[o];return a},a.equalsIgnoreCase=function(e,t){return null===e&&null===t||null!==e&&null!==e&&e.toLowerCase()===t.toLowerCase()},a.startsWithIgnoreCaseNullsMeanAll=function(e,t){return null===t||null===e||!(t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},a.startsWithNotEqualsIgnoreCaseNullMeansAll=function(t,a){if(null===a||null===t)return!0;if(a.length<t.length)return!1;var n=t.toLowerCase()==a.substr(0,t.length).toLowerCase();if(n){var o=null;return o=e.REGEXP_FIELD_NAME.test(a.substr(t.length,a.length))?a.substr(0,t.length):a,t.toLowerCase()!=o.toLowerCase()}return!1},a.getUnquotedString=function(e){var t=null!=e&&e.length>=3&&"\\"!==e.charAt(e.length-2);return null!=e&&'"'===e.charAt(0)?(e=e.substring(1,e.length),'"'===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))):null!=e&&"'"===e.charAt(0)&&(e=e.substring(1,e.length),"'"===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))),e},a});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/namespace.js' */
AJS.namespace("jira.widget.autocomplete.JQL",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete.MyParser",null,require("jira/jql/jql-parser")),AJS.namespace("JIRA.JQLAutoComplete.ParseResult",null,require("jira/jql/jql-parse-result")),AJS.namespace("JIRA.JQLAutoComplete.Token",null,require("jira/jql/jql-parse-token"));;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/initJQLAutoComplete.js' */
!function(){"use strict";var e=require("jira/autocomplete/jql-autocomplete"),r=require("jira/jql/jql-parser"),t=require("jira/util/forms"),n=require("jquery");n(function(){n(".jql-autocomplete-params").each(function(){var i={};n(this).find("input").each(function(){var e=n(this);i[e.attr("id")]=e.val()});var l=JSON.parse(n("#jqlFieldz").text()),o=JSON.parse(n("#jqlFunctionNamez").text()),a=JSON.parse(n("#jqlReservedWordz").text()),u=function(){var e=require("jira/featureflags/feature-manager");return e.isFeatureEnabled("jira.jql.autoselectfirst")},s=e({fieldID:"jqltext",parser:r(a),queryDelay:.65,jqlFieldNames:l,jqlFunctionNames:o,minQueryLength:0,allowArrowCarousel:!0,autoSelectFirst:u(),errorID:"jqlerrormsg"}),d=n("#jqltext");d.unbind("keypress",t.submitOnEnter).keypress(function(e){if(null===s.dropdownController||!s.dropdownController.displayed||s.selectedIndex<0)return!(13===e.keyCode&&!e.ctrlKey&&!e.shiftKey)||(n("#jqlform").submit(),!1)}),s.buildResponseContainer(),s.parse(d.text()),s.updateColumnLineCount(),d.click(function(){s.dropdownController.hideDropdown()})})})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-release-page-assets', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseVersionDialog.js' */
GH.Dialogs.ReleaseVersionDialog={},GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED="versionReleased",GH.Dialogs.ReleaseVersionDialog.dialog=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ReleaseVersionDialog.analytics=new e("gh.release")}(),GH.Dialogs.ReleaseVersionDialog.showDialog=function(e,a){GH.Dialog.dim(),GH.Ajax.get({url:"/release/model.json",data:{rapidViewId:e,columnId:a}},"showReleaseVersionDialog").done(GH.Dialogs.ReleaseVersionDialog.renderDialog).fail(GH.Dialog.undim)},GH.Dialogs.ReleaseVersionDialog.renderDialog=function(e){_.each(e.projectIssueDetails,function(e){e.name=AJS.escapeHTML(String(e.name))});var a=GH.Dialogs.ReleaseVersionDialog.dialog=GH.Dialog.create({width:500,height:380,id:"ghx-dialog-release",onCancelFn:function(){GH.Dialogs.ReleaseVersionDialog.dialog=void 0,GH.Dialog.triggerHideEvent(),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel",e.projectIssueDetails.length)},analyticsPageName:"releaseNewVersionModal"});AJS.$("#"+a.id).addClass("ghx-dialog"),a.addHeader("Release"),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.dialogs.releaseversion.renderReleaseDialog({model:e})),a.addButton("Release",function(){GH.Dialogs.ReleaseVersionDialog.release(e),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.RELEASE_VERSION)},"aui-button aui-button-primary"),a.addCancel("Cancel",function(){a.cancel()}),AJS.$(".aui-dialog").addClass("ghx-dialog");new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-release-date",button:"ghx-release-date_trigger_c",align:"Tl",singleClick:!0,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start",e.projectIssueDetails.length),a.show(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReleaseVersionDialog.release=function(e){GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete",e.projectIssueDetails.length);var a=GH.Dialogs.ReleaseVersionDialog.dialog;a.disableControls(),a.showSpinner(),GH.Ajax.post({url:"/release",data:{versionName:AJS.$("#ghx-release-name").val(),releaseDate:AJS.$("#ghx-release-date").val(),description:AJS.$("#ghx-release-desc").val(),rapidViewId:e.rapidViewId,columnId:e.columnId},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date_trigger_c"}}).done(function(e){var a=GH.Dialogs.ReleaseVersionDialog.dialog;a&&(a.dispose(),GH.Dialog.triggerHideEvent(),GH.Dialogs.ReleaseVersionDialog.dialog=void 0),GH.Notification.showSuccess(e.success.message),AJS.$(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED)}).fail(function(){var e=GH.Dialogs.ReleaseVersionDialog.dialog;e&&(e.hideSpinner(),e.enableControls())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-release-page-assets', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseVersionDialog.soy' */
// This file was automatically generated from ReleaseVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.releaseversion.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.releaseversion == 'undefined') { GH.tpl.dialogs.releaseversion = {}; }


GH.tpl.dialogs.releaseversion.renderReleaseDialog = function(opt_data, opt_ignored) {
  var output = '<div id="version-new">';
  if (opt_data.model.projectIssueDetails.length > 0) {
    output += '<ul id="ghx-release-navigator">';
    var projectList7 = opt_data.model.projectIssueDetails;
    var projectListLen7 = projectList7.length;
    for (var projectIndex7 = 0; projectIndex7 < projectListLen7; projectIndex7++) {
      var projectData7 = projectList7[projectIndex7];
      output += '<li><a title="' + soy.$$escapeHtml('View in Issue Navigator') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/GHReleaseIssueNavigator.jspa?projectId=' + soy.$$escapeHtml(projectData7.id) + '&rapidViewId=' + soy.$$escapeHtml(opt_data.model.rapidViewId) + '&columnId=' + soy.$$escapeHtml(opt_data.model.columnId) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|2#{0} issues}',projectData7.issueCount)) + '</a> ' + soy.$$filterNoAutoescape(AJS.format('will be released from \x3cstrong\x3e{0}\x3c/strong\x3e',projectData7.name)) + '</li>';
    }
    output += '</ul>';
  }
  output += '<form action="#" class="aui"><fieldset><div class="field-group"><label for="ghx-release-name">' + soy.$$escapeHtml('Version name') + '</label><input id="ghx-release-name" type="text" class="text"><div id="query-results"></div></div><div class="field-group"><label for="ghx-release-date">' + soy.$$escapeHtml('Release date') + '</label><input type="text" id="ghx-release-date" value="' + soy.$$escapeHtml(opt_data.model.defaultReleaseDate) + '" class="text"><span id="ghx-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar">&nbsp;</span></div><div class="field-group"><label for="ghx-release-desc">' + soy.$$escapeHtml('Description') + '</label><textarea id="ghx-release-desc" rows="4" class="textarea"></textarea></div></fieldset></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderReleaseDialog.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderReleaseDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-release-page-assets', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseExistingVersionDialog.js' */
define("jira-agile/rapid/ui/dialog/release-existing-version-dialog",["jquery","underscore","jira/projects/release/version-adapter","jira/projects/release/submit-model","jira-project-config/utils","jira-agile/rapid/ajax","jira/analytics/web-client","jira/container-api"],function(a,r,t,s,l,n,i,g){"use strict";var d,u=JIRA.Admin.Version.ReleaseForm,o=GH.Notification,c=Backbone.Collection.extend({model:s}),v={init:function(){var e=GH.VersionController.getVersionModel().getAllVersions();AJS.params.dateFormat=GH.TimeFormat.dateFormat,d=new c,r.each(e,function(e){e=new s(e);d.add(e)})},show:function(s){n.get({url:"/release/existingVersionModel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),versionId:s}}).done(function(e){e.hasIssueOutOfScope?v.showGoToReleaseHubDialog(s,"This version has issues that are not included in the board. We recommend using the Release Hub instead."):e.hasIssueWithComplexMapping?v.showGoToReleaseHubDialog(s,"This version has issues with potential problems. We recommend using the Release Hub instead."):(v.showReleaseExistingDialog(s,e),i.sendPageEvent("releaseExistingVersionModal"))})}};v.showReleaseExistingDialog=function(e,s){var i,o=this;GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start.existing");var n=new t(d.get(e));n.on(t.RELEASE_SUCCESS_EVENT,function(e){e.moveUnfixedIssuesTo?(e=m(e.moveUnfixedIssuesTo),f(AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e released. The unresolved {1,choice,1#issue|1\u003cissues} are now in \u003cstrong\u003e{2}\u003c/strong\u003e.",i.versionName,i.issueCount,e))):f("Version released"),a(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete.existing")}),n.on(t.RELEASE_ERROR_EVENT,function(e){r.isEmpty(e.errorMessages)||(i.hide(),p(i.versionName))}),(i=l.openDialogForRow(u,n,"version-release-dialog")).onContentReady(h.bind(i,s.hasIssueInAnotherUnreleasedVersion,function(e){e=d.get(e);return e&&e.get("project")&&e.get("project").name}(e))),a(i).on("Dialog.hide",function(){o.cancelled&&GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel.existing")})},v.showGoToReleaseHubDialog=function(s,e){var i=GH.Dialog.create({width:400,height:200,analyticsPageName:"releaseHubRedirectModal"}),o=GH.VersionController.getVersionModel().getVersion(s);i.addHeader(AJS.format("Release version: {0}",o.name)),i.addPanel("","panel"),i.getCurrentPanel().html(e),i.addButton("Go to Release Hub",function(){var e=n.CONTEXT_PATH+"/projects/"+o.project.key+"/versions/"+s;g.navigate(e,function(){window.location.href=e})}),GH.Dialog.addCancelButton(i),i.show()};var m=function(e){e=d.get(e);return e&&e.get("name")};var p=function(e){var s={};s.message=AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e can\'\'t be released at this time. Please refresh your browser and try again.",e),o.showErrors({errors:[s]})},f=function(e){o.showSuccess(e)},h=function(e,s){this.issuesCount=this.$form.find('input[name="issues-count"]').attr("value"),this.versionName=this.$form.find('input[name="version-name"]').attr("value");var i=this.$form.find("#project-config-version-release-form-unresolved-ignore-paragraph");i&&i.before(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial({issuesCount:this.issuesCount,versionName:this.versionName})));i=this.$form.find("#project-config-version-release-form-unresolved-ignore-label");i.length&&(e?(a("#project-config-version-release-form-unresolved-message").after(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible())),i.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues({issuesCount:this.issuesCount,versionName:this.versionName})))):i.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues({versionName:this.versionName}))));i=this.$form.find("#project-config-version-release-form-all-issues-resolved strong");i.length&&"undefined"===i.text()&&i.text(s)};return v});;
;
/* module-key = 'com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload', location = 'jira-attachment-module/jira-attachments.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),o=r(i),a=n(78),s=r(a),u=n(79),c=r(u),l=n(84),f=r(l),d=n(86),h=r(d),p=n(87),v=r(p),m=n(90),y=r(m),b=n(4),g=r(b),_=n(91),w=r(_),x=n(9),k=r(x);g.default.areAttachmentsEnabled()&&((0,w.default)(),k.default.install(),h.default.registerAttachmentMenuHandlerFactory(c.default),h.default.registerBrowseLinkHandlerFactory(c.default),h.default.registerAttachmentsZoneCreator(o.default),h.default.registerTemporaryAttachmentCreatorFactory(f.default),h.default.registerTemporaryAttachmentZoneCreator(s.default),h.default.registerTemporaryBinaryUploadHandler(v.default),h.default.registerConnectedTemporaryBinaryUploadHandler(y.default))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(16),a=r(o),s=n(10),u=r(s),c=n(20),l=r(c);t.default=function(e){var t="view-issue/drop-zone",n=(0,i.dropzone)(e).then(function(e){return e.on("drop",function(){a.default.triggerAttachRequested("viewIssueDropZone")}),e}),r=!1;return{activate:function(){return n.then(function(e){r||(r=!0,e.activate(),u.default.publish("upload/switch-context",{name:t}))})},deactivate:function(){return n.then(function(e){r&&(e.deactivate(),r=!1)})},drop:function(){return n.catch(function(e){a.default.triggerInitialisationException((0,l.default)(e)),u.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.connectedTemporaryBinary=t.binary=t.dropzone=t.popup=t.browser=t.temporaryAttachmentDropzone=t.temporaryAttachmentPopup=t.temporaryAttachmentBrowser=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(3),a=r(o),s=n(16),u=r(s),c=n(17),l=r(c),f=n(25),d=n(20),h=r(d),p=n(77),v=n(19),m=r(v),y="user_token_fetch_fail",b=3e4,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.getApiUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.authProvider,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default.getUploadParameters,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.connectToIssueChanges;return n().then(function(t){m.default.mark("attachments.media.components."+e+".credentials.received");var n=i({},{apiUrl:t},{authProvider:r});return n}).then(function(n){return(0,f.MediaPicker)(e,n,t)}).then(function(t){return m.default.mark("attachments.media.components."+e+".component.created"),t}).then(p.connect).then(s).then(function(e){return o().then(function(t){return e.setUploadParams(t)}),e})}},_=function(e){return new Promise(function(t,n){var r=l.default.schedule(function(){u.default.triggerInitializationTimeout(),n({message:"Initialisation Timeout",logged:!0})},b);e.on("ready",function(){m.default.mark("attachments.media.components.popup.ready"),l.default.cancel(r),u.default.triggerPopupInitialized(),u.default.triggerPopupMetrics(),t(e)}),e.on("upload-error",function(t){var i=t.error;i.logged=!0,i.name===y?(u.default.triggerUserNotLoggedIn(),m.default.mark("attachments.media.components.popup.user.not.logged"),l.default.cancel(r),e.teardown(),n(i)):u.default.triggerPopupError((0,h.default)(i))})})},w=g("browser",{multiple:!0}),x=function(e){return g("popup",{userAuthProvider:e})().then(_)},k=function(e){return g("dropzone",{headless:!0,container:e})()},A=(t.temporaryAttachmentBrowser=function(e){return function(){return w(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)}},t.temporaryAttachmentPopup=function(e){return function(t){return g("popup",{userAuthProvider:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges).then(_)}},t.temporaryAttachmentDropzone=function(e,t){return g("dropzone",{headless:!0,container:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)},function(e){return a.default.getApiUrl().then(function(t){var n=i({},{apiUrl:t},{authProvider:function(){return a.default.temporaryAuthProviderGetter(e)}});return n}).then(function(e){return(0,f.MediaPicker)("binary",e)}).then(function(t){return a.default.getTemporaryAttachmentUploadParameters(e).then(function(e){return t.setUploadParams(e),t})})}),S=function(e){return g("binary")(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)};t.browser=w,t.popup=x,t.dropzone=k,t.binary=A,t.connectedTemporaryBinary=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),s=r(a),u=n(8),c=r(u),l=n(9),f=r(l),d=n(11),h=r(d),p=n(16),v=r(p),m=n(20),y=r(m),b=n(23),g=r(b),_=n(7),w=r(_);n(24);var x=(0,c.default)(),k=function(e){return e.ok?e.json():e.text().then(function(t){t=t||"Unexpected error",t="Credentials request failure: "+t+" (http status code: "+e.status+")";var n=new Error(t);throw n.description=t,n})},A=function(e){return[x+"/rest/api/2/attachment/upload/issue/"+e+"/credentials",{credentials:"same-origin"}]},S=function(e){return[x+"/rest/api/2/attachment/upload/project/"+e+"/credentials",{credentials:"same-origin"}]},P=function(e,t){return[x+"/rest/api/2/attachment/upload/issue/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t}),headers:{"Content-Type":"application/json"}}]},O=function(e,t,n){return[x+"/rest/api/2/attachment/upload/project/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t,formToken:n}),headers:{"Content-Type":"application/json"}}]},I=function(){return new Request(x+"/rest/internal/latest/media/user/credentials",{credentials:"same-origin"})},E={fetchMetadata:!1,autoFinalize:!0},j=function(e){return Promise.resolve(e).then(F).then(k).then(function(e){var t=e.token,n=e.targetCollection,r=e.tokenDurationInMins;return o({},{token:t,targetCollection:n},isNaN(r)?{}:{tokenDurationInMins:r})})},T=function(e){return Promise.resolve(e).then(fetch).then(k).then(function(e){var t=e.id,n=e.token,r=e.tokenDurationInMins;return o({},{clientId:t,token:n},isNaN(r)?{}:{tokenDurationInMins:r})})},C=function(e){return 60*((e.tokenDurationInMins||10)-1)*1e3},M=(0,g.default)(function(e){return Promise.resolve(e).then(A).then(j)},C),U=(0,g.default)(function(e){return Promise.resolve(e).then(S).then(j)},C),L=(0,g.default)(function(e){return Promise.resolve(e).then(I).then(T)},C),F=function(e){var t=i(e,2),n=t[0],r=t[1];return fetch(n,r)},R=w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiClientId)return e.apiClientId;throw new Error("Media clientId is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve clientId",description:(0,y.default)(e)})})}),N=function(e){return R().then(function(t){return U.get(e).then(function(e){return{clientId:t,token:e.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})};t.default={getClientId:R,getApiUrl:w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiUrl)return e.apiUrl;throw new Error("Media apiUrl is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve apiUrl",description:(0,y.default)(e)})})}),authProvider:function(){return R().then(function(e){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(t){return{clientId:e,token:t.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},userAuthProvider:function(){return Promise.resolve("userAuth").then(L.get).catch(function(e){v.default.triggerUserAuthFetchFailed((0,y.default)(e))})},temporaryAuthProvider:function(){return f.default.getProjectContext().then(function(e){return N(e)}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},temporaryAuthProviderGetter:N,getUploadParameters:function(){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},createAttachment:function(e,t){return Promise.resolve(P(e,t)).then(F).then(k)},createTemporaryAttachment:function(e,t,n){return Promise.resolve(O(e,t,n)).then(F).then(k)},getTemporaryAttachmentUploadParameters:function(e){return Promise.resolve(e).then(U.get).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},reset:function(){M.clear()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(6),s=r(a),u=n(7),c=r(u),l="com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload.integration-configuration",f=["\\","/",'"',":","?","*","<","|",">"],d=o.default.getWRM("upload-limit")||1/0,h=o.default.getWRM("thumbnail-mime-types"),p=c.default.memoize(function(){return s.default.claim(l)});t.default={getInvalidChars:function(){return f},getMaxFileSize:function(){return d},getThumbnailMimeType:function(){return h},getMediaCredentials:function(){var e=p(),t=e.apiUrl,n=e.apiClientId;return{apiUrl:t,apiClientId:n}},areAttachmentsEnabled:function(){return p().attachmentsEnabled===!0}}},function(e,t){e.exports=require("dndattachment/util/Configuration")},function(e,t){e.exports=require("wrm/data")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a={uploadContext:null,projectId:null};t.default={getProjectContext:function(){return a.projectId?Promise.resolve(a.projectId):Promise.reject(new Error("Project id wasn't set"))},getUploadContextName:function(){return a.uploadContext&&a.uploadContext.name},getUploadContextSettings:function(){return a.uploadContext&&a.uploadContext.uploadSettings},install:function(){o.default.subscribe("upload/switch-context",function(e){a.uploadContext=e}),o.default.subscribe("project/changed",function(e){a.projectId=e})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;t.default={subscribe:function(e,t){n.has(e)||n.set(e,[]),n.get(e).push(t)},publish:function(e,t){n.has(e)&&n.get(e).forEach(function(e){e(t)})},unsubscribe:function(e){n.forEach(function(t){for(var n=0,r=t.length;n<r;n++)t[n]===e&&(t.splice(n,1),n--)})},reset:function(){n=new Map}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a=n(12),s=r(a),u=n(13),c=r(u),l=n(14),f=r(l),d=n(15),h=r(d),p=2e3,v=function(){return new Promise(function(e,t){var n=s.default.getSelectedIssueId(),r=void 0;n?e(n):r=setInterval(function(){n=s.default.getSelectedIssueId(),n&&(clearInterval(r),e(n))},p)})},m=void 0;c.default.bind(f.default.ISSUE_REFRESHED,function(e,t){m=Promise.resolve(t),o.default.publish("issue/changed",t)}),t.default={getIssueId:function(){return m=m||v()},getIssueKey:function(){return s.default.getSelectedIssueKey()},getIssuePermlink:function(){return h.default.get("viewissue-permlink")}}},function(e,t){e.exports=require("jira/issues/api")},function(e,t){e.exports=require("jira/util/events")},function(e,t){e.exports=require("jira/components/issueviewer/eventtypes")},function(e,t){e.exports=require("jira/util/data/meta")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),a=r(o),s=n(19),u=r(s),c=n(20),l=r(c),f=n(21),d=r(f),h=n(22),p=r(h),v={stopInitialising:function(e){this.initialising=!1,this.popupInitialised=e},startRequest:function(e){this.requestStartedTime=a.default.current(),this.source=e},getData:function(e){var t=e.error,n=e.fileSize,r=e.uploadId;return{msSinceLastUserAction:a.default.since(this.requestStartedTime),initialising:this.initialising,popupInitialised:this.popupInitialised,source:this.source,error:(0,d.default)(t),fileSize:n,uploadId:r}},reset:function(){this.initialising=!0,this.popupInitialised=!1,this.requestStartedTime=Number.MAX_VALUE}};v.reset();var m=function(e,t){return AJS.trigger("analytics",{name:e,data:t})},y=function(e,t){return m(e,v.getData(t||{}))},b=function(e,t){return m(e,i({},{source:v.source},t))};t.default={triggerPopupInitialized:function(){v.stopInitialising(!0),y("issue.attachment.media-picker.popup-initialized")},triggerUserNotLoggedIn:function(){v.stopInitialising(!1),y("issue.attachment.media-picker.user-not-logged")},triggerPopupError:function(e){y("issue.attachment.media-picker.popup-error",{error:e})},triggerGenericPopupInitialisationError:function(e){y("issue.attachment.media-picker.generic-popup-initialisation-error",{error:e})},triggerAttachRequested:function(e){v.startRequest(e);var t="issue.attachment.media-picker.attach-requested";y(t),p.default.trigger("legacy-gas-v2-event",t)},triggerPopupShown:function(){y("issue.attachment.media-picker.popup-shown")},triggerPopupFailedToShow:function(e){y("issue.attachment.media-picker.popup-failed-to-show",{error:e})},triggerAttachFileBrowserShown:function(){y("issue.attachment.media-picker.browse-shown")},triggerAttachFileBrowserFailedToShow:function(e){y("issue.attachment.media-picker.browse-failed-to-show",{error:e})},triggerInitialisationException:function(e){e=(0,l.default)(e),v.stopInitialising(!1),y("issue.attachment.media-picker.initialisation-exception",{error:e})},triggerFileUploadFinished:function(e){y("issue.attachment.media-picker.file-upload-finished",{uploadId:e})},triggerAttachmentCreatedInJIRA:function(e){y("issue.attachment.media-picker.attachment-created-in-jira",{uploadId:e})},triggerCantCreateAttachmentInJIRA:function(e,t){y("issue.attachment.media-picker.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerUploadStarted:function(e,t){y("issue.attachment.media-picker.upload-started",{uploadId:e,fileSize:t})},triggerUploadError:function(e,t){y("issue.attachment.media-picker.upload-error",{error:e,uploadId:t})},triggerUploadCancelled:function(e){y("issue.attachment.media-picker.upload-cancelled",{uploadId:e})},triggerUploadValidationFailed:function(e,t){y("issue.attachment.media-picker.upload-validation-failed",{error:e,uploadId:t})},triggerInitializationTimeout:function(){y("issue.attachment.media-picker.initialization-timeout")},triggerTokenFetchFailed:function(e){y("issue.attachment.media-picker.error.token-fetch",{error:e})},triggerUserAuthFetchFailed:function(e){y("issue.attachment.media-picker.popup-error.user-auth-fetch",{error:e})},triggerUploadParametersFetchFailed:function(e){y("issue.attachment.media-picker.error.upload-params-fetch",{error:e})},triggerUploadRequestedWhenNotInitialised:function(){y("issue.attachment.media-picker.upload-request.not-initialised")},triggerBrowserRequestedWhenNotInitialised:function(){y("issue.attachment.media-picker.upload-request.browser.not-initialised")},triggerTemporaryAttachmentCreatedInJIRA:function(e){b("issue.attachment.media-picker.temporary.attachment-created-in-jira",{uploadId:e})},triggerCantCreateTemporaryAttachmentInJIRA:function(e,t){b("issue.attachment.media-picker.temporary.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerPopupMetrics:function(){var e=i({"dom.loaded":u.default.getDomContentLoadedTiming()},u.default.getMarksForNamespace("attachments.media.components.popup"));AJS.trigger("analytics",{name:"issue.attachment.media-picker.popup-metrics",data:e})},getRequestIdentifier:function(){return v.requestIdentifier},reset:function(){v.reset()}}},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={current:function(){return Math.round(e&&e.performance&&e.performance.now())},since:function(e){return Math.round(this.current()-e)},schedule:function(e,t){return setTimeout(e,t)},cancel:function(e){clearTimeout(e)}}}).call(t,n(18))},function(e,t,n){(function(t){"use strict";e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(18))},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mark:function(t){return e&&e.performance&&e.performance.mark(t)},getMarksForNamespace:function(t){var n={};if(e&&e.performance){e.performance.getEntriesByType("mark").filter(function(e){return 0===e.name.indexOf(t)}).forEach(function(e){var t=e.name,r=e.startTime;return n[t]=parseInt(r,10)})}return n},getDomContentLoadedTiming:function(){var t=e&&e.performance&&e.performance.timing;return t?parseInt(t.domContentLoadedEventStart-t.navigationStart,10):0}}}).call(t,n(18))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e){return"undefined"!=typeof e},i=function(e){return r(e.config)&&r(e.config.headers)&&r(e.response)&&r(e.response.config)&&r(e.response.config.headers)};t.default=function(e){if(r(e.name)&&r(e.message))return e.toString();if(r(e.name)&&r(e.description))return e.name+": "+e.description;if(r(e.message))return e.message;if("string"==typeof e)return e;if(i(e)){var t=n({},e);return delete t.config.headers.Authorization,delete t.response.config.headers.Authorization,""+e}return""+e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&e.indexOf("Authorization")!==-1?"Error sanitized":e}},function(e,t){e.exports=require("jira/customevents/trigger-custom-event")},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},n=new Map;return{get:function(i){if(!n.has(i)){var o=e(i).then(function(e){var o=t(e);return o&&setTimeout(function(){return r(n,i)},o),e}).catch(function(e){throw r(n,i),e});n.set(i,o)}return n.get(i)},clear:function(){n.clear()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=function(e,t){return e.has(t)&&e.delete(t)}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&g(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},f.call(h.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(x.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t(t.s=149)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(159),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(61)("wks"),i=n(42),o=n(4).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(4),i=n(2),o=n(14),a=n(15),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";function r(e){return"[object Array]"===k.call(e)}function i(e){return"[object ArrayBuffer]"===k.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===k.call(e)}function d(e){return"[object File]"===k.call(e)}function h(e){return"[object Blob]"===k.call(e)}function p(e){return"[object Function]"===k.call(e)}function v(e){return l(e)&&p(e.pipe)}function m(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function b(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function g(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)g(arguments[n],e);return t}function w(e,t,n){return g(t,function(t,r){e[r]=n&&"function"==typeof t?x(t,n):t}),e}var x=n(117),k=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:d,isBlob:h,isFunction:p,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:b,forEach:g,merge:_,extend:w,trim:y}},function(e,t,n){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.1
	 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(e){V=e}function a(e){J=e}function s(){return void 0!==$?function(){$(c)}:u()}function u(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<q;e+=2)(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0;q=0}function l(e,t){var n=arguments,r=this,i=new this.constructor(d);void 0===i[ee]&&T(i);var o=r._state;return o?function(){var e=n[o-1];J(function(){return I(o,i,e,r._result)})}():A(r,i,e,t),i}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return _(n,e),n}function d(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function v(e){try{return e.then}catch(e){return ie.error=e,ie}}function m(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function y(e,t,n){J(function(e){var r=!1,i=m(n,t,function(n){r||(r=!0,t!==n?_(e,n):x(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function b(e,t){t._state===ne?x(e,t._result):t._state===re?k(e,t._result):A(t,void 0,function(t){return _(e,t)},function(t){return k(e,t)})}function g(e,t,n){t.constructor===e.constructor&&n===l&&t.constructor.resolve===f?b(e,t):n===ie?(k(e,ie.error),ie.error=null):void 0===n?x(e,t):i(n)?y(e,t,n):x(e,t)}function _(t,n){t===n?k(t,h()):e(n)?g(t,n,v(n)):x(t,n)}function w(e){e._onerror&&e._onerror(e._result),S(e)}function x(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&J(S,e))}function k(e,t){e._state===te&&(e._state=re,e._result=t,J(w,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=n,i[o+re]=r,0===o&&e._state&&J(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function P(){this.error=null}function O(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function I(e,t,n,r){var o=i(n),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=O(n,r),a===oe?(c=!0,s=a.error,a.error=null):u=!0,t===a)return void k(t,p())}else a=r,u=!0;t._state!==te||(o&&u?_(t,a):c?k(t,s):e===ne?x(t,a):e===re&&k(t,a))}function E(e,t){try{t(function(t){_(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function j(){return ae++}function T(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function C(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[ee]||T(this.promise),H(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&x(this.promise,this._result))):k(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function U(e){return new C(this,e).promise}function L(e){var t=this;return new t(H(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(d);return k(n,e),n}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ee]=j(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&R(),this instanceof z?E(this,e):N())}function B(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=z}var D=void 0;D=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H=D,q=0,$=void 0,V=void 0,J=function(e,t){X[q]=e,X[q+1]=t,2===(q+=2)&&(V?V(c):Z())},W="undefined"!=typeof window?window:void 0,G=W||{},K=G.MutationObserver||G.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=Y?function(){return function(){return t.nextTick(c)}}():K?function(){var e=0,t=new K(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Q?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===W?function(){try{var e=n(209);return $=e.runOnLoop||e.runOnContext,s()}catch(e){return u()}}():u();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,ie=new P,oe=new P,ae=0;return C.prototype._enumerate=function(e){for(var t=0;this._state===te&&t<e.length;t++)this._eachEntry(e[t],t)},C.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=v(e);if(i===l&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(d);g(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},C.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?k(r,n):this._result[t]=n),0===this._remaining&&x(r,this._result)},C.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},z.all=U,z.race=L,z.resolve=f,z.reject=F,z._setScheduler=o,z._setAsap=a,z._asap=J,z.prototype={constructor:z,then:l,catch:function(e){return this.then(null,e)}},z.polyfill=B,z.Promise=z,z})}).call(t,n(78),n(52))},function(e,t,n){var r=n(140)("wks"),i=n(141),o=n(13).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(10),i=n(92),o=n(63),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9),i=n(43);e.exports=n(12)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports={default:n(156),__esModule:!0}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(93),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(178),o=r(i),a=n(182),s=r(a),u=n(93),c=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(110),i=n(25);t.handleError=function(e,t){var n=Error().stack||"",o=t||"",a=e+": "+o+" \n "+n;(new r.UserTracker).track()(new i.ErrorException(e,n,t)),console.error(a)}},function(e,t){e.exports={}},function(e,t,n){var r=n(66),i=n(59);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(19),s=r(a),u=n(20),c=r(u),l=n(0),f=r(l),d=n(1),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(t,n){(0,f.default)(this,e),this.prefix="files.mediapicker-web.",this.name=this.prefix+t,this.properties=n}return(0,h.default)(e,[{key:"toJSON",value:function(){return{name:this.name,properties:this.properties}}}]),e}();t.UserEvent=p;var v=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"library.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MediaPickerLoaded=v;var m=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"browser.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPBrowserLoaded=m;var y=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"dropzone.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPDropzoneLoaded=y;var b=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"cliboard.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPClipboardLoaded=b;var g=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupLoaded=g;var _=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.shown",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupShown=_;var w=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.hidden",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupHidden=w;var x=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.ended",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadEnded=x;var k=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadStarted=k;var A=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.processing.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileProcessingStarted=A;var S=function(e){function t(e,n,r){(0,f.default)(this,t);var i={alias:e,description:r,stacktrace:n};return(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"files.mediapicker-web.library.exception.fired",i))}return(0,c.default)(t,e),t}(p);t.ErrorException=S},function(e,t){e.exports=n(26)},function(e,t,n){var r=n(55),i=n(138);e.exports=n(37)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(56);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(164)(!0);n(65)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9).f,i=n(17),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(169);for(var r=n(4),i=n(15),o=n(23),a=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){var r=n(14),i=n(189),o=n(190),a=n(10),s=n(67),u=n(102),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(80),o=n(122),a=n(112),s=function(e,t){return o.checkWebpSupport().then(function(t){return e.accept=t?"image/webp,image/*,*/*;q=0.8":"image/*,*/*;q=0.8",e})},u=function(t,n,i,o){var u=r.__assign({},n,{"Content-Type":"application/json"});return i||(a.isAsapBasedAuth(t)?u["X-Issuer"]=t.asapIssuer:a.isClientBasedAuth(t)&&(u["X-Client-Id"]=t.clientId),u.Authorization="Bearer "+t.token),"image"===o?s(u):e.resolve(u)},c=function(t,n,i,o){var s={};return i&&(s.token=t.token,a.isClientBasedAuth(t)?s.client=t.clientId:a.isAsapBasedAuth(t)&&(s.issuer=t.asapIssuer)),e.resolve(r.__assign({collection:o},n,s))},l=function(e){return e=e||"json",{image:"blob",json:"json"}[e]};t.default=function(t){var n=t.preventPreflight,r=t.collectionName,o=t.config,a=o.authProvider,s=o.serviceHost;return function(t){var o=t.url,f=t.headers,d=t.params,h=t.responseType,p=t.method,v=t.data,m=a({collectionName:r}),y=function(t){return e.all([u(t,f,n,h),c(t,d,n,r)])},b=function(e){var t=e[0],n=e[1];return i.default({method:p||"get",url:o,baseURL:s,headers:t,params:n,data:v,responseType:l(h)})};return m.then(y).then(b).then(function(e){return e.data})}}}).call(t,n(7))},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(137)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports={}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],u=i[3],c={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function i(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var u=y++;n=m||(m=a(t)),r=c.bind(null,n,u,!1),i=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=f.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=l.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,b=[];e.exports=function(e,t){t=t||{},void 0===t.singleton&&(t.singleton=p()),void 0===t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],u=d[s.id];u.refs--,o.push(u)}e&&n(r(e),t);for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(59);e.exports=function(e){return Object(r(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!0},function(e,t,n){var r=n(10),i=n(166),o=n(68),a=n(60)("IE_PROTO"),s=function(){},u=function(){var e,t=n(62)("iframe"),r=o.length;for(t.style.display="none",n(96).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(95),i=n(68);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(185),v=n(132),m=n(271),y=function(e){function t(e,n){var r=n.apiUrl,i=n.authProvider,a=n.uploadParams;(0,s.default)(this,t);var u=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return u.onFilesAdded=function(e){var t=e.files;u.emitUploadsStart(t)},u.onFileAdded=function(e){var t=e.file;u.emitUploadStart(t),t.raw&&t.type.match(/^image\//)&&m.default(t.raw).then(function(e){u.emitUploadPreviewUpdate(t,e)})},u.onFileUploading=function(e){var t=e.file,n=e.progress;u.emitUploadProgress(t,n)},u.onFileFinalizeReady=function(e){var t=e.file,n=e.finalize;u.emitUploadFinalizeReady(t,n)},u.onFileConverting=function(e){var t=e.file;u.emitUploadProcessing(t)},u.onFileConverted=function(e){var t=e.file,n=e.progress,r=e.metadata;u.emitUploadProgress(t,n),u.emitUploadEnd(t,r)},u.onUploadError=function(e){var t=e.file,n=e.error;u.emitUploadError(t,n)},u.uploadService=new p.UploadService(r,i,a||{}),u.uploadService.on("files-added",u.onFilesAdded),u.uploadService.on("file-added",u.onFileAdded),u.uploadService.on("file-uploading",u.onFileUploading),u.uploadService.on("file-finalize-ready",u.onFileFinalizeReady),u.uploadService.on("file-converting",u.onFileConverting),u.uploadService.on("file-converted",u.onFileConverted),u.uploadService.on("file-upload-error",u.onUploadError),u}return(0,h.default)(t,e),(0,c.default)(t,[{key:"cancel",value:function(e){this.uploadService.cancel(e)}},{key:"setUploadParams",value:function(e){this.uploadService.setUploadParams(e)}}]),t}(v.MPComponent);t.MediaLocalUpload=y},function(e,t,n){var r=n(31),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(203),__esModule:!0}},function(e,t,n){var r=n(207),i=n(208),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";(function(t){e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(52))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(t,n,r,i){return new(r||(r=e))(function(e,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function s(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){t.done?e(t.value):new r(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,n||[])).next())})}function c(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function v(t,n,r){function i(t){f[t]&&(l[t]=function(n){return new e(function(e,r){d.push([t,n,e,r])>1||o(t,n)})})}function o(e,t){try{a(f[e](t))}catch(e){c(d[0][3],e)}}function a(t){t.value instanceof p?e.resolve(t.value.v).then(s,u):c(d[0][2],t)}function s(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),d.shift(),d.length&&o(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=r.apply(t,n||[]),d=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l}function m(e){function t(t,i){e[t]&&(n[t]=function(n){return(r=!r)?{value:p(e[t](n)),done:"return"===t}:i?i(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof f?f(e):e[Symbol.iterator]()}t.__extends=r,n.d(t,"__assign",function(){return g}),t.__rest=i,t.__decorate=o,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=f,t.__read=d,t.__spread=h,t.__await=p,t.__asyncGenerator=v,t.__asyncDelegator=m,t.__asyncValues=y;/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}}.call(t,n(7))},function(e,t,n){var r=n(86);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(28),i=n(276),o=n(277),a=Object.defineProperty;t.f=n(37)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(61)("keys"),i=n(42);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(11),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(44),i=n(5),o=n(94),a=n(15),s=n(17),u=n(23),c=n(165),l=n(32),f=n(91),d=n(3)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&w.next&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t,n){var r=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(64),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(3)},function(e,t,n){var r=n(42)("meta"),i=n(11),o=n(17),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(4),i=n(2),o=n(44),a=n(69),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(29);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(15);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){(function(r,i){var o;!function(a){function s(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==a?e.maxListeners:p,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=p}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function f(e,t,n,r){if(!n)return[];var i,o,a,s,u,c,l,d=[],h=t.length,p=t[r],v=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(f(e,t,n[a],r+1)));return d}if("**"===p){l=r+1===h||r+2===h&&"*"===v,l&&n._listeners&&(d=d.concat(f(e,t,n,h)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!l&&(d=d.concat(f(e,t,n[a],h))),d=d.concat(f(e,t,n[a],r))):d=a===v?d.concat(f(e,t,n[a],r+2)):d.concat(f(e,t,n[a],r)));return d}d=d.concat(f(e,t,n[p],r+1))}if(s=n["*"],s&&f(e,t,s,r+1),u=n["**"])if(r<h){u._listeners&&f(e,t,u,h);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===v?f(e,t,u[a],r+2):a===p?f(e,t,u[a],r+1):(c={},c[a]=u[a],f(e,t,{"**":c},r+1)))}else u._listeners?f(e,t,u,h):u["*"]&&u["*"]._listeners&&f(e,t,u["*"],h);return d}function d(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();o!==a;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}var h=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=10;l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this._on(e,i,r),o},l.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,o,u,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return i.resolve([!1]);var t,n,r,o,a,u=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:u.push(this._all[r].call(this,e));break;case 2:u.push(this._all[r].call(this,e,arguments[1]));break;case 3:u.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:u.push(this._all[r].apply(this,t))}}if(this.wildcard){a=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,a,l,this.listenerTree,0)}else a=this._events[e];if("function"==typeof a)switch(this.event=e,c){case 1:u.push(a.call(this));break;case 2:u.push(a.call(this,arguments[1]));break;case 3:u.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];u.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:u.push(a[r].call(this));break;case 2:u.push(a[r].call(this,arguments[1]));break;case 3:u.push(a[r].call(this,arguments[1],arguments[2]));break;default:u.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?i.reject(arguments[1]):i.reject("Uncaught, unspecified 'error' event.");return i.all(u)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",e,t),this.wildcard?(d.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){function n(e){if(e!==a){var t=Object.keys(e);for(var r in t){var i=t[r],o=e[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&n(e[i]),0===Object.keys(o).length&&delete e[i])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();i=f.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;s<i.length;s++){var u=i[s];if(r=u._listeners,h(r)){for(var c=-1,l=0,d=r.length;l<d;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?u._listeners.splice(c,1):this._events[e].splice(c,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete u._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=f.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return f.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),h(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(o=function(){return l}.call(t,n,t,e))!==a&&(e.exports=o)}()}).call(t,n(78),n(7))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){e.exports=n(40)},function(e,t,n){e.exports=n(220)},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(6),o=n(222),a=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(118):void 0!==t&&(e=n(118)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(a,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(78))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.referenceCountById={},this.referencesById={}}return e.prototype.acquire=function(e,t){return this.referenceCountById[e]||(this.referencesById[e]=t(),this.referenceCountById[e]=0),this.referenceCountById[e]=this.referenceCountById[e]+1,this.referencesById[e]},e.prototype.release=function(e){this.referenceCountById[e]>0&&(this.referenceCountById[e]=this.referenceCountById[e]-1),this.referenceCountById[e]||delete this.referencesById[e]},e}();t.Pool=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(50),f=r(l);Object.defineProperty(t,"__esModule",{value:!0});var d=n(80),h=n(111);t.isTokenError=function(e){if(e&&e.error){var t=e.error.code;return"JwtAuthoriser:TokenExpiredError"===t||"JwtAuthoriser:AuthenticationError"===t}return!1},t.addAuthToHeaders=function(e,t){var n=e.headers||{};return(0,f.default)({},e,{headers:(0,f.default)({},n,h.mapAuthToAuthHeaders(t))})},t.addAuthToQueryParameters=function(e,t){return(0,f.default)({},e,{parameters:(0,f.default)({},e.parameters,h.mapAuthToQueryParameters(t))})};var p=function(){function e(t,n,r){(0,s.default)(this,e),this.apiUrl=t,this.authProvider=n,this.collection=r}return(0,c.default)(e,[{key:"refreshAuth",value:function(){var e=this;return this.authProvider({collectionName:this.collection}).then(function(t){return e.auth=t,t})}},{key:"call",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.addAuthToHeaders;return this.makeCall(e,r).catch(function(i){if(!(i&&i.response&&t.isTokenError(i.response.data)))throw i;return n.makeCall(e,r,!0)})}},{key:"makeCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getAuth(r).then(function(r){return n.makeCallWithToken(e,t,r)})}},{key:"getAuth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.auth&&!e?o.default.resolve(this.auth):this.refreshAuth()}},{key:"makeCallWithToken",value:function(e,t,n){var r=t(e,n),i=this.getAxiosRequestConfig(r);return d.default.request(i).then(function(e){return e.data})}},{key:"getAxiosRequestConfig",value:function(e){var t=e.httpMethod,n=e.mediaApiMethod,r=e.parameters,i=e.headers,o=e.data;return{url:this.apiUrl+"/"+n,method:t,headers:(0,f.default)({},i,o?{"Content-Type":"application/json; charset=utf-8"}:{}),params:r,data:o}}},{key:"storedAuth",get:function(){return this.auth}}]),e}();t.MediaClient=p},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(56),i=n(13).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(284),i=n(85);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(140)("keys"),i=n(141);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(55).f,i=n(57),o=n(8)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(17),i=n(41),o=n(60)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){e.exports=!n(12)&&!n(18)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(162),o=r(i),a=n(171),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=n(17),i=n(24),o=n(167)(!1),a=n(60)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(31);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(95),i=n(68).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(47),i=n(43),o=n(24),a=n(63),s=n(17),u=n(92),c=Object.getOwnPropertyDescriptor;t.f=n(12)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(10),i=n(29),o=n(3)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r,i,o,a=n(14),s=n(191),u=n(96),c=n(62),l=n(4),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,y={},b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){b.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete y[e]},"process"==n(31)(f)?r=function(e){f.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(10),i=n(11),o=n(75);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(4),i=n(2),o=n(9),a=n(12),s=n(3)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,n(52))},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(50),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(210),f=function(){function e(){(0,s.default)(this,e),this.defaults={storage_key:"media-picker.herment.storage",product:"media-picker",subproduct:"library",version:"1.0"},this.queue=[],this.queueProcessor=l.default((0,o.default)({},this.defaults,{queue:this.queue})),this.queueProcessor&&this.queueProcessor.start(),this.defaultProperties={}}return(0,c.default)(e,[{key:"track",value:function(){var e=this;return function(t){var n=t.toJSON();n.properties=(0,o.default)({},e.defaultProperties,n.properties),e.queue.push(n)}}}]),e}();t.UserTracker=f},function(e,t,n){"use strict";function r(e){return o.isClientBasedAuth(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer "+e.token}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer "+e.token}}function i(e){return o.isClientBasedAuth(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(212);t.mapAuthToAuthHeaders=r,t.mapAuthToQueryParameters=i},function(e,t,n){"use strict";function r(e){return!!e.clientId}function i(e){return!!e.asapIssuer}Object.defineProperty(t,"__esModule",{value:!0}),t.isClientBasedAuth=r,t.isAsapBasedAuth=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114);t.RemoteMediaCollectionProvider=r.RemoteMediaCollectionProvider;var i=n(116);t.FileProvider=i.FileProvider;var o=n(123);t.LinkProvider=o.LinkProvider;var a=n(239);t.MediaItemProvider=a.MediaItemProvider;var s=n(240);t.MediaUrlPreviewProvider=s.MediaUrlPreviewProvider;var u=n(126);t.UrlPreviewProvider=u.UrlPreviewProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115);n(79);var i=function(){function e(e,t,n,i){this.collectionService=e,this.collectionName=t,this.pageSize=n,this.sortDirection=i,this.subject=new r.Subject,this.connectableObservable=this.subject.publishReplay(1),this.items=[],this.nextInclusiveStartKey=void 0,this.isLoading=!1,this.connectableObservable.connect(),this.loadNextPage()}return e.prototype.observable=function(){return this.connectableObservable},e.prototype.loadNextPageUntil=function(e){var t=this;if(!this.items.some(e))var n=this.connectableObservable.subscribe({next:function(r){!t.nextInclusiveStartKey||r.items.some(e)?n.unsubscribe():t.loadNextPage()},complete:function(){return n.unsubscribe()},error:function(e){return n.unsubscribe()}})},e.prototype.loadNextPage=function(){var e=this;this.isLoading||(this.isLoading=!0,this.collectionService.getCollectionItems(this.collectionName,this.pageSize,this.nextInclusiveStartKey,this.sortDirection,"full").then(function(t){e.isLoading=!1,(r=e.items).push.apply(r,t.items);var n={id:e.collectionName,items:e.items};e.nextInclusiveStartKey=t.nextInclusiveStartKey,e.subject.next(n);var r},function(t){e.isLoading=!1,e.subject.error(t)}))},e.prototype.refresh=function(){var e=this;if(!this.isLoading){this.isLoading=!0;var t,n=this.items[0]&&this.items[0].details,r=n&&n.id,i=n&&n.occurrenceKey,o=[],a=function(){e.collectionService.getCollectionItems(e.collectionName,e.pageSize,t,e.sortDirection,"full").then(function(n){for(var s=!1,u=0,c=n.items;u<c.length;u++){var l=c[u],f=l.details,d=f.id,h=f.occurrenceKey;if(d===r&&h===i){s=!0;break}o.push(l)}s?(e.isLoading=!1,e.items=o.concat(e.items),e.subject.next({id:e.collectionName,items:e.items})):n.nextInclusiveStartKey&&(t=n.nextInclusiveStartKey,a())},function(t){e.isLoading=!1,e.subject.error(t)})};a()}},e}();t.RemoteMediaCollectionProvider=i},function(e,t){e.exports=n(43)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=n(26);n(79),t.FILE_PROVIDER_RETRY_INTERVAL=2e3;var o=function(){function e(){}return e.fromMediaApi=function(t,n,i,o,a){return e.fromFileService(new r.MediaFileService(t,n),i,o,a)},e.fromFileService=function(e,t,n,r){return{observable:function(){var o=new i.Observable(function(i){var o,a=r||1e3,s=function(){e.getFileItem(t,n).then(function(e){"pending"!==e.details.processingStatus?(i.next(e),i.complete()):(i.next(e),o=setTimeout(function(){return s()},a))},function(e){i.error(e)})};return s(),function(){null!==o&&clearTimeout(o)}}).publishReplay(1);return o.connect(),o}}},e}();t.FileProvider=o},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";(function(t){var r=n(6),i=n(223),o=n(225),a=n(226),s=n(227),u=n(119),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(228);e.exports=function(e){return new t(function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest,p="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(e.url)||(h=new window.XDomainRequest,p="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var m=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+c(m+":"+y)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[p]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?h.response:h.responseText,o={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};i(t,l,o),h=null}},h.onerror=function(){l(u("Network Error",e)),h=null},h.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),h=null},r.isStandardBrowserEnv()){var b=n(229),g=(e.withCredentials||s(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(d,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(e){if("json"!==h.responseType)throw e}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===f&&(f=null),h.send(f)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(224);e.exports=function(e,t,n,i){var o=new Error(e);return r(o,t,n,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(237)),r(n(238))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i=n(26);n(79);var o=function(){function e(){}return e.fromMediaApi=function(t,n,i){return e.fromLinkService(new r.MediaLinkService(t),n,i)},e.fromLinkService=function(e,t,n){return{observable:function(){
var r=new i.Observable(function(r){return e.getLinkItem(t,n).then(function(e){r.next(e),r.complete()},function(e){r.error(e)}),function(){}}).publishReplay(1);return r.connect(),r}}},e}();t.LinkProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getLinkItem=function(e,t){return r.default({config:this.config,collectionName:t,preventPreflight:!0})({url:"/link/"+e}).then(function(e){return e.data}).then(function(e){return{type:"link",details:{id:e.id,url:e.url,type:e.metadata.type,title:e.metadata.title,description:e.metadata.description,site:e.metadata.site,author:e.metadata.author,date:e.metadata.date,resources:e.metadata.resources}}})},e.prototype.addLinkItem=function(e,t,n){return r.default({config:this.config,collectionName:t})({method:"post",url:"/link",data:{url:e,metadata:n}}).then(function(e){return e.data.id})},e}();t.MediaLinkService=i},function(e,t,n){"use strict";function r(e,t,n){return new i.Observable(function(r){var i=e.acquire(t,n),o=i.subscribe(r);return function(){o.unsubscribe(),e.release(t)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.observableFromObservablePool=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),i=n(26),o=function(){function e(){}return e.fromMediaApi=function(t,n){return e.fromUrlPreviewService(new r.MediaUrlPreviewService(t),n)},e.fromUrlPreviewService=function(e,t){return{observable:function(){return new i.Observable(function(n){return e.getUrlPreview(t).then(function(e){n.next(e),n.complete()},function(e){n.error(e)}),function(){}})}}},e}();t.UrlPreviewProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(35);t.DEFAULT_COLLECTION_PAGE_SIZE=10;var o=function(){function e(e){this.config=e}return e.prototype.mapToMediaCollectionItem=function(e){var t=e.id,n=e.type,i=e.occurrenceKey,o=e.details;if("file"===n){var a=o;return{type:"file",details:r.__assign({id:t,occurrenceKey:i},a)}}var s=o;return{type:"link",details:r.__assign({id:t,type:"link",occurrenceKey:i,title:s.title||""},s)}},e.prototype.getCollectionItems=function(e,n,r,o,a){var s=this;return void 0===n&&(n=t.DEFAULT_COLLECTION_PAGE_SIZE),i.default({config:this.config,preventPreflight:!0,collectionName:e})({url:"/collection/"+e+"/items",params:{limit:n,inclusiveStartKey:r,sortDirection:o,details:a}}).then(function(e){return{items:e.data.contents.map(s.mapToMediaCollectionItem),nextInclusiveStartKey:e.data.nextInclusiveStartKey}})},e}();t.MediaCollectionService=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_NAMES={OBJ_CREATE_FAIL:"object_create_fail",METADATA_FETCH_FAIL:"metadata_fetch_fail",TOKEN_FETCH_FAIL:"token_fetch_fail",TOKEN_UPDATE_FAIL:"token_update_fail",TOKEN_SOURCE_EMPTY:"token_source_empty",UPLOAD_FAIL:"upload_fail",USER_TOKEN_FETCH_FAIL:"user_token_fetch_fail"};var u=function(){function e(t,n,r){(0,o.default)(this,e),this.fileId=t,this.name=n,this.description=r}return(0,s.default)(e,[{key:"toJSON",value:function(){return{fileId:this.fileId,name:this.name,description:this.description}}}]),e}();t.MediaError=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(246),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(22),f=function(){function e(t,n,r,i,o,a,u){(0,s.default)(this,e),e.isValidFileId(t)||l.handleError("wrong_file_id","Passed fileId is incorrect."),e.isValidName(n)||l.handleError("wrong_file_name","Passed file name is incorrect."),e.isValidSize(r)||l.handleError("wrong_file_size","Passed file size is incorrect."),e.isValidCreationDate(i)||l.handleError("wrong_file_date","Passed file creation date is incorrect."),e.isValidType(o)||l.handleError("wrong_file_type","Passed file type is incorrect."),this.id=t,this.name=n,this.size=r,this.creationDate=i,this.type=o,this.publicId=a,this.resumableFile=u}return(0,c.default)(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId,chunks:this.chunks,toPureJSON:this.toPureJSON.bind(this)}}},{key:"toPureJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId}}},{key:"_isImage",value:function(){return new o.default(["image/png","image/jpeg","image/jpg","image/gif"]).has(this.type)}},{key:"chunks",get:function(){return this.resumableFile?this.resumableFile.chunks:void 0}},{key:"raw",get:function(){return this.resumableFile?this.resumableFile.file:void 0}},{key:"preview",get:function(){return this._isImage()?this.raw:void 0}}],[{key:"isValidFileId",value:function(e){return"string"==typeof e&&e.length>0}},{key:"isValidName",value:function(e){return"string"==typeof e}},{key:"isValidType",value:function(e){return"string"==typeof e}},{key:"isValidSize",value:function(e){return"number"==typeof e&&e>=0}},{key:"isValidCreationDate",value:function(e){return"number"==typeof e&&e>0}}]),e}();t.MediaFile=f},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUploadParams={collection:void 0,fetchMetadata:!0,autoFinalize:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(270),c=n(77),l=n(22),f=n(25),d=function(){function e(t){(0,o.default)(this,e),this.context=t,this.emitter=new c.EventEmitter2({wildcard:!0})}return(0,s.default)(e,[{key:"once",value:function(e,t){this.emitter.once(e,t)}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"onAny",value:function(e){this.emitter.onAny(e)}},{key:"addListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListeners",value:function(e){this.emitter.removeAllListeners(e)}},{key:"emit",value:function(e,t){return this.emitter.emit(e,t)}},{key:"emitUploadsStart",value:function(e){this.emit("uploads-start",{files:e.map(function(e){return e.toJSON()})})}},{key:"emitUploadStart",value:function(e){this.emit("upload-start",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileUploadStarted)}},{key:"emitUploadProgress",value:function(e,t){this.emit("upload-status-update",{file:e.toJSON(),progress:t})}},{key:"emitUploadFinalizeReady",value:function(e,t){this.emit("upload-finalize-ready",{file:e.toJSON(),finalize:t})}},{key:"emitUploadPreviewUpdate",value:function(e,t){this.emit("upload-preview-update",{file:e.toJSON(),preview:t})}},{key:"emitUploadProcessing",value:function(e){this.emit("upload-processing",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileProcessingStarted)}},{key:"emitUploadEnd",value:function(e,t){this.emit("upload-end",{file:e.toJSON(),public:t}),this.context.trackEvent(new f.MPFileUploadEnded)}},{key:"emitUploadError",value:function(e,t){this.emit("upload-error",{file:e.toJSON(),error:t.toJSON()})}},{key:"getStaticAssetUrl",value:function(e){return void 0===u.html[e]&&l.handleError("wrong_static_asset","The passet static asset does not exist"),!0===u.usingVersions?u.baseUrl+"/"+u.version+"/"+u.html[e]:u.baseUrl+"/"+u.html[e]}}]),e}();t.MPComponent=d},function(e,t,n){e.exports={default:n(272),__esModule:!0}},function(e,t,n){"use strict";var r=n(135),i=n(136),o=n(278),a=n(27),s=n(57),u=n(38),c=n(279),l=n(90),f=n(287),d=n(8)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t){e.exports=!0},function(e,t,n){var r=n(13),i=n(36),o=n(54),a=n(27),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(84),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(13),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(13).document&&document.documentElement},function(e,t,n){var r=n(58),i=n(8)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r,i,o,a=n(54),s=n(300),u=n(143),c=n(87),l=n(13),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete m[e]},"process"==n(58)(f)?r=function(e){f.nextTick(a(y,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(307);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){/*!
	  * domready (c) Dustin Diaz 2014 - License MIT
	  */
!function(t,n){e.exports=n()}(0,function(){var e,t=[],n=document,r=n.documentElement.doScroll,i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener("DOMContentLoaded",e=function(){for(n.removeEventListener("DOMContentLoaded",e),i=1;e=t.shift();)e()}),function(e){i?setTimeout(e,0):t.push(e)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]}},function(e,t,n){e.exports=n(150)},function(e,t,n){"use strict";function r(e,t,n){if(!t)return{binary:i.BinaryUploader,browser:o.Browser,clipboard:a.Clipboard,dropzone:s.Dropzone,popup:u.Popup}[e];var r={trackEvent:f};switch(e){case"binary":return new i.BinaryUploader(r,t);case"browser":return new o.Browser(r,t,n);case"clipboard":return new a.Clipboard(r,t);case"dropzone":return new s.Dropzone(r,t,n);case"popup":return new u.Popup(r,t,n);default:var c="The component "+e+" does not exist";throw l.handleError("wrong_component",c),new Error(c)}}Object.defineProperty(t,"__esModule",{value:!0}),n(151),n(153);var i=n(155);t.BinaryUploader=i.BinaryUploader;var o=n(306);t.Browser=o.Browser;var a=n(308);t.Clipboard=a.Clipboard;var s=n(309);t.Dropzone=s.Dropzone;var u=n(313);t.Popup=u.Popup;var c=n(110),l=n(22),f=(new c.UserTracker).track();t.MediaPicker=r},function(e,t,n){var r=n(152);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,'.mpAUI{color:#333;font-family:Arial,sans-serif;font-size:14px;line-height:1.42857143}.mpAUI h2{color:#333;font-size:24px;font-weight:400;line-height:1.25;text-transform:none;margin:30px 0 0}.mpAUI .aui-dialog2-header-close img{width:16px!important;height:16px!important;position:relative;top:2px;opacity:.5}.mpAUI .aui-dialog2-header-close:hover img{opacity:1}.mpAUI .aui-dialog2{box-sizing:border-box;position:relative;left:0;right:0;visibility:hidden}.mpAUI .aui-dialog2-xlarge{width:980px;min-height:431px}.mpAUI .aui-dialog2-small .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:380px}@media (max-height:700px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large,.mpAUI .aui-dialog2-xlarge{min-height:131px;height:-120%}}@media (max-height:500px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-medium .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium{min-height:131px;height:-120%}}@media (max-width:1000px){.mpAUI .aui-dialog2-xlarge{width:100%;height:-20%}.mpAUI .aui-dialog2-xlarge.aui-layer{top:69px}.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{height:100%}}@media (max-width:820px){.mpAUI .aui-dialog2-large{width:100%;height:-20%}.mpAUI .aui-dialog2-large.aui-layer{top:69px}.mpAUI .aui-dialog2-large .aui-dialog2-content{height:100%}}@media (max-width:620px){.mpAUI .aui-dialog2-medium{width:100%;height:-20%}.mpAUI .aui-dialog2-medium.aui-layer{top:69px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{height:100%}}@media (max-width:420px){.mpAUI .aui-dialog2-small{width:100%;height:-20%}.mpAUI .aui-dialog2-small.aui-layer{top:69px}.mpAUI .aui-dialog2-small .aui-dialog2-content{height:100%}}.mpAUI .aui-dialog2-footer,.mpAUI .aui-dialog2-header{background:#f5f5f5;visibility:visible}.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-header{opacity:0;transition:opacity .2s,visibility .2s;transition-delay:0s;visibility:hidden}.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-header{opacity:1;transition:opacity .2s;transition-delay:0s;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-content{max-height:100%}.mpAUI .aui-dialog2-content{border-radius:3px;background-color:#fff;box-sizing:border-box;overflow:auto;padding:20px;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-header{margin-top:-69px}.mpAUI .aui-dialog2-header{border-bottom:1px solid #ccc;border-radius:5px 5px 0 0;box-sizing:border-box;color:#333;font-weight:400;height:69px;padding:0 20px;width:100%;display:table}.mpAUI .aui-dialog2-header-actions{width:100%}.mpAUI .aui-dialog2-header-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-main,.mpAUI .aui-dialog2-header-secondary{display:table-cell;vertical-align:middle}.mpAUI .aui-dialog2[data-aui-modal=true] .aui-dialog2-header-close{display:none}.mpAUI .aui-dialog2-footer-hint{color:#707070;line-height:31px}.mpAUI .aui-dialog2-footer-hint,.mpAUI .aui-dialog2-header-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:10px}.mpAUI .aui-dialog2-header-main{max-width:400px}.mpAUI .aui-dialog2-footer-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-secondary{text-align:right}.mpAUI .aui-dialog2-footer-actions{float:right}.mpAUI .aui-dialog2-header-close{width:20px;height:20px;padding-left:5px;text-align:right;vertical-align:middle;line-height:100%;cursor:pointer;color:#707070}.mpAUI .aui-iconfont-close-dialog:before{content:"\\F11B"}.mpAUI .aui-dialog2-warning .aui-dialog2-header{background-color:#d04437;border-bottom-color:#d04437;color:#fff}.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-actions a,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-close,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-main,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-secondary a{color:inherit}.mpAUI .aui-dialog2-header-close .aui-icon{vertical-align:middle}.mpAUI .aui-dialog2-footer{border-top:1px solid #ccc;box-sizing:border-box;height:51px;overflow:hidden;padding:10px 20px;width:100%;border-radius:0 0 5px 5px}.mpAUI .aui-dialog2-footer:empty{height:5px;padding:0}.mpAUI .aui-button,.mpAUI .aui-button:visited,.mpAUI a.aui-button{box-sizing:border-box;background:#f5f5f5;border:1px solid #ccc;border-radius:3.01px;color:#333;cursor:pointer;display:inline-block;font-family:inherit;font-size:14px;font-variant:normal;font-weight:400;height:2.14285714em;line-height:1.42857143;margin:0;padding:4px 10px;text-decoration:none;vertical-align:baseline;white-space:nowrap}.mpAUI .aui-button.aui-button-light,.mpAUI .aui-button:visited.aui-button-light,.mpAUI a.aui-button.aui-button-light{background:#fff}.mpAUI .aui-button~.aui-button{margin-left:10px}.mpAUI a.aui-button:active,.mpAUI a.aui-button:focus,.mpAUI a.aui-button:hover{text-decoration:none}.mpAUI .aui-button:focus,.mpAUI form.aui .button:focus,.mpAUI form.aui .cancel:focus{outline:1px dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:1px}.mpAUI .aui-button::-moz-focus-inner{border:0;padding:0}.mpAUI .aui-button-subtle.aui-button:focus,.mpAUI .aui-button-subtle.aui-button:hover,.mpAUI .aui-button:focus,.mpAUI .aui-button:hover{background:#e9e9e9;border-color:#999;color:#000;text-decoration:none}.mpAUI .aui-button.aui-button-subtle.active,.mpAUI .aui-button.aui-button-subtle:active{border-color:#999}.mpAUI .aui-button-subtle.aui-button.active,.mpAUI .aui-button-subtle.aui-button:active,.mpAUI .aui-button.active,.mpAUI .aui-button:active,.mpAUI .aui-header .aui-button-split-more.active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#f5f5f5;text-decoration:none}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(:active){border-right-color:transparent}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:active:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:focus:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:hover:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):active+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):focus+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more:before{visibility:hidden}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more{border-left:1px solid #999;margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more{margin-left:-1px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:focus,.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:hover{margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger:before{content:"";border-left:1px solid #ccc;bottom:4px;display:block;left:-1px;position:absolute;top:4px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger.aui-button-primary:before{border-color:#fff}.mpAUI .aui-button.aui-button-primary,.mpAUI .aui-button.aui-button-primary:visited{background:#3572b0;border-color:transparent;color:#fff;font-weight:700;-webkit-font-smoothing:antialiased}.mpAUI .aui-button.aui-button-primary:focus,.mpAUI .aui-button.aui-button-primary:hover{background:#2a67a5;border-color:transparent;color:#fff}.mpAUI .aui-button.aui-button-primary:active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#3572b0;text-decoration:none}.mpAUI .aui-button.aui-button-link,.mpAUI .aui-button.aui-button-link:visited,.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{background:transparent;border-color:transparent;color:#3572b0;padding:4px 0;text-decoration:none;box-shadow:none}.mpAUI .aui-button.aui-button-link:active,.mpAUI .aui-button.aui-button-link:focus,.mpAUI .aui-button.aui-button-link:hover,.mpAUI .aui-button.aui-button-text:active,.mpAUI .aui-button.aui-button-text:focus,.mpAUI .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-link:active,.mpAUI .aui-buttons .aui-button.aui-button-link:focus,.mpAUI .aui-buttons .aui-button.aui-button-link:hover,.mpAUI .aui-buttons .aui-button.aui-button-link[aria-pressed=true],.mpAUI .aui-buttons .aui-button.aui-button-text:active,.mpAUI .aui-buttons .aui-button.aui-button-text:focus,.mpAUI .aui-buttons .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-text[aria-pressed=true]{background:transparent;border-color:transparent;box-shadow:none;text-decoration:underline}.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{border:none;font-size:inherit;height:inherit;line-height:normal;padding:0}.mpAUI .aui-button.aui-button-subtle{background:transparent;border-color:transparent;color:#707070}.mpAUI .aui-buttons .aui-button.aui-button-subtle{border-radius:3.01px}.mpAUI .aui-button.aui-button-subtle .aui-icon{margin-right:1px}.mpAUI .aui-button>.aui-icon+.aui-button-label{margin-left:4px}',""])},function(e,t,n){var r=n(154);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup .aui-dialog2-large{width:845px;height:530px;position:fixed;left:calc(50% - 845px/2);top:calc(50% - 530px/2);margin:0;overflow:visible}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=function(e){function t(e,n){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"upload",value:function(e,t){var n=t||"file",r=this._urltoFile(e,n);this.uploadService.addFile(r)}},{key:"_urltoFile",value:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/);if(!r||r.length<2)throw new Error("Failed to retrieve file from data URL");for(var i=r[1],o=atob(n[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);var u=new Blob([s],{type:i});return u.name=t,u}}]),t}(p.MediaLocalUpload);t.BinaryUploader=v},function(e,t,n){n(157),e.exports=n(2).Object.getPrototypeOf},function(e,t,n){var r=n(41),i=n(91);n(158)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5),i=n(2),o=n(18);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(160),__esModule:!0}},function(e,t,n){n(161);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(5);r(r.S+r.F*!n(12),"Object",{defineProperty:n(9).f})},function(e,t,n){e.exports={default:n(163),__esModule:!0}},function(e,t,n){n(30),n(33),e.exports=n(69).f("iterator")},function(e,t,n){var r=n(64),i=n(59);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(45),i=n(43),o=n(32),a={};n(15)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(9),i=n(10),o=n(46);e.exports=n(12)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(24),i=n(67),o=n(168);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(64),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(170),i=n(97),o=n(23),a=n(24);e.exports=n(65)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(172),__esModule:!0}},function(e,t,n){n(173),n(73),n(176),n(177),e.exports=n(2).Symbol},function(e,t,n){"use strict";var r=n(4),i=n(17),o=n(12),a=n(5),s=n(94),u=n(70).KEY,c=n(18),l=n(61),f=n(32),d=n(42),h=n(3),p=n(69),v=n(71),m=n(174),y=n(98),b=n(10),g=n(24),_=n(63),w=n(43),x=n(45),k=n(175),A=n(100),S=n(9),P=n(46),O=A.f,I=S.f,E=k.f,j=r.Symbol,T=r.JSON,C=T&&T.stringify,M=h("_hidden"),U=h("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),R=l("symbols"),N=l("op-symbols"),z=Object.prototype,B="function"==typeof j,D=r.QObject,H=!D||!D.prototype||!D.prototype.findChild,q=o&&c(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(z,t);r&&delete z[t],I(e,t,n),r&&e!==z&&I(z,t,r)}:I,$=function(e){var t=R[e]=x(j.prototype);return t._k=e,t},V=B&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},J=function(e,t,n){return e===z&&J(N,t,n),b(e),t=_(t,!0),b(n),i(R,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=x(n,{enumerable:w(0,!1)})):(i(e,M)||I(e,M,w(1,{})),e[M][t]=!0),q(e,t,n)):I(e,t,n)},W=function(e,t){b(e);for(var n,r=m(t=g(t)),i=0,o=r.length;o>i;)J(e,n=r[i++],t[n]);return e},G=function(e,t){return void 0===t?x(e):W(x(e),t)},K=function(e){var t=L.call(this,e=_(e,!0));return!(this===z&&i(R,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(R,e)||i(this,M)&&this[M][e])||t)},Y=function(e,t){if(e=g(e),t=_(t,!0),e!==z||!i(R,t)||i(N,t)){var n=O(e,t);return!n||!i(R,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=E(g(e)),r=[],o=0;n.length>o;)i(R,t=n[o++])||t==M||t==u||r.push(t);return r},X=function(e){for(var t,n=e===z,r=E(n?N:g(e)),o=[],a=0;r.length>a;)!i(R,t=r[a++])||n&&!i(z,t)||o.push(R[t]);return o};B||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(N,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),q(this,e,w(1,n))};return o&&H&&q(z,e,{configurable:!0,set:t}),$(e)},s(j.prototype,"toString",function(){return this._k}),A.f=Y,S.f=J,n(99).f=k.f=Q,n(47).f=K,n(72).f=X,o&&!n(44)&&s(z,"propertyIsEnumerable",K,!0),p.f=function(e){return $(h(e))}),a(a.G+a.W+a.F*!B,{Symbol:j});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=P(h.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=j(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!B,"Object",{create:G,defineProperty:J,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Q,getOwnPropertySymbols:X}),T&&a(a.S+a.F*(!B||c(function(){var e=j();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,C.apply(T,r)}}}),j.prototype[U]||n(15)(j.prototype,U,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(46),i=n(72),o=n(47);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(24),i=n(99).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){n(71)("asyncIterator")},function(e,t,n){n(71)("observable")},function(e,t,n){e.exports={default:n(179),__esModule:!0}},function(e,t,n){n(180),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var r=n(5);r(r.S,"Object",{setPrototypeOf:n(181).set})},function(e,t,n){var r=n(11),i=n(10),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(14)(Function.call,n(100).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){n(184);var r=n(2).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(5);r(r.S,"Object",{create:n(45)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(21),s=r(a),u=n(196),c=r(u),l=n(50),f=r(l),d=n(0),h=r(d),p=n(1),v=r(p);Object.defineProperty(t,"__esModule",{value:!0});var m=n(206),y=n(51),b=n(77),g=n(22),_=n(211),w=n(111),x=n(128),k=n(129),A=n(261),S=n(131),P=n(262),O=n(83),I=n(267),E=n(268),j=function(){function e(t,n,r){var i=this;(0,h.default)(this,e),this.uploads={},this.retry=0,this.emit=function(e,t){i.emitter.emit(e,t)},this.getQueryParameters=function(e,t){var n=i.getMediaClient(e),r=n.storedAuth;if(r)return(0,f.default)({hash:t.hash},w.mapAuthToQueryParameters(r),{partNumber:t.offset+1,uploadId:i.uploads[e.uniqueIdentifier].uploadId,uploadChunkUrl:i.uploadChunkUrl});throw new Error("auth required")},this.generateTarget=function(e){var t=e.map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,c.default)(t,2),r=n[0],i=n[1];return e[r]=i,e},{}),n=t.hash,r=t.resumableCurrentChunkSize,o=t.client,a=t.issuer,s=t.token,u=t.partNumber,l=t.uploadId,f=void 0;return f=a?"issuer="+a+"&token="+s:"client="+o+"&token="+s,i.uploadChunkUrl+"/"+n+"-"+r+"?"+f+"&uploadId="+l+"&partNumber="+u},this.onFilesAdded=function(e){if(0!==e.length){var t=i.uploadParams;e.forEach(function(e){i.uploads[e.uniqueIdentifier]={creationDate:Date.now(),uploadParams:t}});var n=t.collection,r=i.mediaClientPool.getMediaClient(n);r.refreshAuth().then(function(){i.api.createUpload(r,e.length).then(function(t){e.forEach(function(e,n){i.uploads[e.uniqueIdentifier].uploadId=t[n].id}),i.retry=0;var n=e.map(function(e){return i.mapResumableFileToMediaFile(e)});i.emit("files-added",{files:n}),n.forEach(function(e){return i.emit("file-added",{file:e})}),i.resumable.upload()})},function(){e.forEach(function(e){return i.onError(e,x.ERROR_NAMES.TOKEN_FETCH_FAIL)}),e.forEach(function(e){return e.cancel()}),e.forEach(i.cleanupResumableFile)})}},this.onChunkingComplete=function(e){e.chunks.forEach(function(t){var n=t.callback;t.callback=function(t,r){return"error"===t?(i.retry++,e.abort(),e.pause(!0),void i.resumable.fire("fileError",e,r||"")):("success"===t&&(i.retry=0),void n(t,r))}})},this.onFileProgress=function(e){var t=e.progress(),n=i.mapResumableFileToMediaFile(e);if(t>0&&t<1){var r=new A.MediaProgress(n.size,n.size*t,n.creationDate,Date.now());i.emit("file-uploading",{file:n,progress:r})}},this.onFileSuccess=function(e){return i.getResumableFileUploadParams(e).autoFinalize?void i.finalizeFile(e):void i.emit("file-finalize-ready",{file:i.mapResumableFileToMediaFile(e),finalize:function(){i.finalizeFile(e)}})},this.onFileError=function(e,t){var n=i.getMediaClient(e);i.onUploadError(e,x.ERROR_NAMES.UPLOAD_FAIL,t,n).then(function(){e._prevProgress=0,e.pause(!1),e.chunks.forEach(function(e){"error"===e.status()&&(e.preprocessState=0,e.send()),"pending"===e.status()&&2===e.preprocessState&&(e.preprocessState=0)})}).catch(function(){e.cancel()})},this.onDrop=function(e){e.preventDefault(),e.stopPropagation(),i.emit("file-dropped",e)},this.mapResumableFileToMediaFile=function(e,t){return new k.MediaFile(e.uniqueIdentifier,e.file.name,e.file.size,i.getResumableFileCreationDate(e),e.file.type,t,e)},this.getResumableFileCreationDate=function(e){return i.uploads[e.uniqueIdentifier].creationDate},this.getResumableFileUploadParams=function(e){return i.uploads[e.uniqueIdentifier].uploadParams},this.cleanupResumableFile=function(e){delete i.uploads[e.uniqueIdentifier]},this.emitter=new b.EventEmitter2,this.uploadChunkUrl=t+"/chunk",this.mediaClientPool=new I.MediaClientPool(t,n),this.api=new E.MediaApi,this.setUploadParams(r),this.resumable=new m({target:this.generateTarget,uploadMethod:"PUT",testMethod:"HEAD",chunkSize:4194304,chunkRetryInterval:2500,maxChunkRetries:5,simultaneousUploads:3,forceChunkSize:!0,permanentErrors:[400,403,404,415,500,501],method:"octet",minFileSize:0,query:this.getQueryParameters,preprocess:function(t){return e.hasher.hash(t)},generateUniqueIdentifier:function(){return y.v4()}}),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("chunkingComplete",this.onChunkingComplete),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileError",this.onFileError)}return(0,v.default)(e,[{key:"setUploadParams",value:function(e){this.uploadParams=(0,f.default)({},S.defaultUploadParams,e)}},{key:"getUploadParams",value:function(){return this.uploadParams}},{key:"addBrowse",value:function(e){this.resumable.assignBrowse(e)}},{key:"addDropzone",value:function(e){this.dropzoneElement||(this.dropzoneElement=e,this.dropzoneElement.addEventListener("drop",this.onDrop),this.resumable.assignDrop(this.dropzoneElement))}},{key:"removeDropzone",value:function(){this.dropzoneElement&&(this.dropzoneElement.removeEventListener("drop",this.onDrop),this.resumable.unAssignDrop(this.dropzoneElement),this.dropzoneElement=void 0)}},{key:"addFile",value:function(e){this.resumable.addFile(e)}},{key:"cancel",value:function(e){if(e){var t=this.resumable.getFromUniqueIdentifier(e);t&&t.cancel()}else this.resumable.cancel()}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"getMediaClient",value:function(e){var t=this.getResumableFileUploadParams(e),n=t.collection;return this.mediaClientPool.getMediaClient(n)}},{key:"finalizeFile",value:function(e){var t=this,n=e.fileName,r=e.file,i=this.getResumableFileUploadParams(e),o=i.collection,a=e.chunks.map(function(e){return e.hash+"-"+(e.endByte-e.startByte)}),s=this.getMediaClient(e),u=this.uploads[e.uniqueIdentifier].uploadId;this.appendChunksToUpload(s,u,a,1e3).then(function(e){return t.api.createFileFromUpload(s,n,r.type,e,o)}).then(function(n){return t.processFile(s,n,e)}).catch(function(n){t.onError(e,x.ERROR_NAMES.OBJ_CREATE_FAIL,n)})}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i=this;return _.sliceByChunks(n,r).map(function(n,o){var a=o*r;return function(){return i.api.appendChunksToUpload(e,t,n,a)}}).reduce(function(e,t){return e.then(t)},s.default.resolve()).then(function(){return t})}},{key:"processFile",value:function(e,t,n){var r=this;return this.fetchFileMetadata(e,t,n).then(function(e){var t=r.mapResumableFileToMediaFile(n,e.id),i=new A.MediaProgress(t.size,t.size,t.creationDate,Date.now());r.emit("file-converted",{file:t,progress:i,metadata:e})}).catch(function(e){r.onError(n,x.ERROR_NAMES.METADATA_FETCH_FAIL,e)})}},{key:"fetchFileMetadata",value:function(e,t,n){var r=this.getResumableFileUploadParams(n),i=r.collection;return r.fetchMetadata?(this.emit("file-converting",{file:this.mapResumableFileToMediaFile(n,t)}),this.api.pollForFileMetadata(e,t,i)):s.default.resolve({id:t})}},{key:"onUploadError",value:function(e,t,n,r){var i=this;return new s.default(function(o,a){var s=e.uniqueIdentifier,u=void 0;try{u=JSON.parse(n)}catch(e){}return O.isTokenError(u)&&i.retry<=1?void r.refreshAuth().then(function(){return o()}).catch(function(){i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,x.ERROR_NAMES.TOKEN_UPDATE_FAIL,n)}),g.handleError(t,n),a()}):(u&&u.error&&u.error.title&&(n=u.error.title),i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,t,n)}),g.handleError(t,n),a(),void 0)})}},{key:"onError",value:function(e,t,n){var r=void 0;r=n&&n.error&&n.error.title?n.error.title:(0,o.default)(n||{}),this.emit("file-upload-error",{file:this.mapResumableFileToMediaFile(e),error:new x.MediaError(e.uniqueIdentifier,t,r)}),g.handleError(t,r)}}]),e}();j.hasher=P.createHasher(),t.UploadService=j},function(e,t,n){var r=n(2),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(73),n(30),n(33),n(188),n(194),n(195),e.exports=n(2).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(44),u=n(4),c=n(14),l=n(49),f=n(5),d=n(11),h=n(29),p=n(74),v=n(34),m=n(103),y=n(104).set,b=n(192)(),g=n(75),_=n(105),w=n(106),x=u.TypeError,k=u.process,A=u.Promise,S="process"==l(k),P=function(){},O=i=g.f,I=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(P,P)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(e){}}(),E=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(x("Promise-chain cycle")):(o=E(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){y.call(u,function(){var t,n,r,i=e._v,o=C(e);if(o&&(t=_(function(){S?k.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=S||C(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!C(t.promise))return!1;return!0},M=function(e){y.call(u,function(){var t;S?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=E(e))?b(function(){var r={_w:n,_d:!1};try{t.call(e,c(L,r,1),c(U,r,1))}catch(e){U.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};I||(A=function(e){p(this,A,"Promise","_h"),h(e),r.call(this);try{e(c(L,this,1),c(U,this,1))}catch(e){U.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(76)(A.prototype,{then:function(e,t){var n=O(m(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(L,e,1),this.reject=c(U,e,1)},g.f=O=function(e){return e===A||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:A}),n(32)(A,"Promise"),n(107)("Promise"),a=n(2).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===a?A:this,e)}}),f(f.S+f.F*!(I&&n(193)(function(e){A.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=_(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(23),i=n(3)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(4),i=n(104).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(31)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(3)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(4),a=n(103),s=n(106);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){
throw n})}:e)}})},function(e,t,n){"use strict";var r=n(5),i=n(75),o=n(105);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(197),o=r(i),a=n(200),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(198),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(199)},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(201),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(202)},function(e,t,n){var r=n(10),i=n(102);e.exports=n(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){n(204),e.exports=n(2).Object.assign},function(e,t,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(205)})},function(e,t,n){"use strict";var r=n(46),i=n(72),o=n(47),a=n(41),s=n(66),u=Object.assign;e.exports=!u||n(18)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var d,h=s(arguments[c++]),p=l?r(h).concat(l(h)):r(h),v=p.length,m=0;v>m;)f.call(h,d=p[m++])&&(n[d]=h[d]);return n}:u},function(e,t,n){!function(){"use strict";var t=function(e){function n(e,t,n){var i=this;i.opts={},i.getOpt=e.getOpt,i._prevProgress=0,i.resumableObj=e,i.file=t,i.fileName=t.fileName||t.name,i.size=t.size,i.relativePath=t.webkitRelativePath||t.relativePath||i.fileName,i.uniqueIdentifier=n,i._pause=!1,i.container="";var a=void 0!==n,s=function(e,t){switch(e){case"progress":i.resumableObj.fire("fileProgress",i);break;case"error":i.abort(),a=!0,i.chunks=[],i.resumableObj.fire("fileError",i,t);break;case"success":if(a)return;i.resumableObj.fire("fileProgress",i),i.isComplete()&&i.resumableObj.fire("fileSuccess",i,t);break;case"retry":i.resumableObj.fire("fileRetry",i)}};return i.chunks=[],i.abort=function(){var e=0;o.each(i.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&i.resumableObj.fire("fileProgress",i)},i.cancel=function(){var e=i.chunks;i.chunks=[],o.each(e,function(e){"uploading"==e.status()&&(e.abort(),i.resumableObj.uploadNextChunk())}),i.resumableObj.removeFile(i),i.resumableObj.fire("fileProgress",i)},i.retry=function(){i.bootstrap();var e=!1;i.resumableObj.on("chunkingComplete",function(){e||i.resumableObj.upload(),e=!0})},i.bootstrap=function(){i.abort(),a=!1,i.chunks=[],i._prevProgress=0;for(var e=i.getOpt("forceChunkSize")?Math.ceil:Math.floor,t="fileSizeExceedsLimit",n={MB:1048576,GB:1073741824,TB:1099511627776},o=2*n.TB,u=function(e){if(e>o)throw new Error(t);return e<=5*n.GB?5*n.MB:e>5*n.GB&&e<=50*n.GB?50*n.MB:e>50*n.GB&&e<=.95*n.TB?100*n.MB:210*n.MB}(i.file.size),c=Math.max(e(i.file.size/u),1),l=0;l<c;l++)!function(e){window.setTimeout(function(){i.chunks.push(new r(i.resumableObj,i,e,s,u)),i.resumableObj.fire("chunkingProgress",i,e/c)},0)}(l);window.setTimeout(function(){i.resumableObj.fire("chunkingComplete",i)},0)},i.progress=function(){if(a)return 1;var e=0,t=!1;return o.each(i.chunks,function(n){"error"==n.status()&&(t=!0),e+=n.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(i._prevProgress,e),i._prevProgress=e,e},i.isUploading=function(){var e=!1;return o.each(i.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},i.isComplete=function(){var e=!1;return o.each(i.chunks,function(t){var n=t.status();if("pending"==n||"uploading"==n||1===t.preprocessState)return e=!0,!1}),!e},i.pause=function(e){i._pause=void 0===e?!i._pause:e},i.isPaused=function(){return i._pause},i.resumableObj.fire("chunkingStart",i),i.bootstrap(),this}function r(e,t,n,r,i){var a=this;return a.opts={},a.getOpt=e.getOpt,a.resumableObj=e,a.fileObj=t,a.fileObjSize=t.size,a.fileObjType=t.file.type,a.offset=n,a.callback=r,a.lastProgressCallback=new Date,a.tested=!1,a.retries=0,a.pendingRetry=!1,a.preprocessState=0,a.skipped=!1,a.loaded=0,a.startByte=a.offset*i,a.endByte=Math.min(a.fileObjSize,(a.offset+1)*i),a.fileObjSize-a.endByte<i&&!a.getOpt("forceChunkSize")&&(a.endByte=a.fileObjSize),a.xhr=null,a.test=function(){var e=a.getOpt("query");"function"==typeof e&&(e=e(a.fileObj,a));var t=a.endByte-a.startByte,n=e.hash+"-"+t,r=[n],i=a.getOpt("headers");"function"==typeof i&&(i=i(a.fileObj,a)),i.Authorization||(i.Authorization="Bearer "+e.token),e.client?i["X-Client-Id"]=e.client:i["X-Issuer"]=e.issuer;var o={Accept:"application/json","Content-Type":"application/json"};for(var s in i)o[s]=i[s];var u={chunks:r},c=e.uploadChunkUrl+"/probe?uploadId="+e.uploadId,l={method:"POST",headers:o,body:JSON.stringify(u)};fetch(c,l).then(function(e){return e.json()}).then(function(e){a.tested=!0,e.data.results[n]&&e.data.results[n].exists?(a.skipped=!0,a.callback("success",a.message()),a.resumableObj.uploadNextChunk()):a.send()}).catch(function(){a.tested=!0,a.send()})},a.preprocessFinished=function(){a.preprocessState=2,a.send()},a.send=function(){var e=a.getOpt("preprocess");if("function"==typeof e)switch(a.preprocessState){case 0:return a.preprocessState=1,void e(a);case 1:return}if(a.getOpt("testChunks")&&!a.tested)return void a.test();a.xhr=new XMLHttpRequest,a.xhr.upload.addEventListener("progress",function(e){new Date-a.lastProgressCallback>1e3*a.getOpt("throttleProgressCallbacks")&&(a.callback("progress"),a.lastProgressCallback=new Date),a.loaded=e.loaded||0},!1),a.loaded=0,a.pendingRetry=!1,a.callback("progress");var t=function(e){var t=a.status();if("success"==t||"error"==t)a.callback(t,a.message()),a.resumableObj.uploadNextChunk();else{a.callback("retry",a.message()),a.abort(),a.retries++;var n=a.getOpt("chunkRetryInterval");void 0!==n?(a.pendingRetry=!0,setTimeout(a.send,n)):a.send()}};a.xhr.addEventListener("load",t,!1),a.xhr.addEventListener("error",t,!1),a.xhr.addEventListener("timeout",t,!1);var n={resumableChunkNumber:a.offset+1,resumableChunkSize:i,resumableCurrentChunkSize:a.endByte-a.startByte,resumableTotalSize:a.fileObjSize,resumableType:a.fileObjType,resumableIdentifier:a.fileObj.uniqueIdentifier,resumableFilename:a.fileObj.fileName,resumableRelativePath:a.fileObj.relativePath,resumableTotalChunks:a.fileObj.chunks.length},r=a.getOpt("query");"function"==typeof r&&(r=r(a.fileObj,a)),o.each(r,function(e,t){n[e]=t});var s=a.fileObj.file.slice?"slice":a.fileObj.file.mozSlice?"mozSlice":a.fileObj.file.webkitSlice?"webkitSlice":"slice",u=a.fileObj.file[s](a.startByte,a.endByte),c=null,l=a.getOpt("target"),f=a.getOpt("parameterNamespace");if("octet"===a.getOpt("method")){c=u;var d=[];o.each(n,function(e,t){d.push([encodeURIComponent(f+e),encodeURIComponent(t)].join("="))}),l=o.getTarget(d)}else c=new FormData,o.each(n,function(e,t){c.append(f+e,t)}),c.append(f+a.getOpt("fileParameterName"),u);var h=a.getOpt("uploadMethod");a.xhr.open(h,l),"octet"===a.getOpt("method")&&a.xhr.setRequestHeader("Content-Type","binary/octet-stream"),a.xhr.timeout=a.getOpt("xhrTimeout"),a.xhr.withCredentials=a.getOpt("withCredentials");var p=a.getOpt("headers");"function"==typeof p&&(p=p(a.fileObj,a)),o.each(p,function(e,t){a.xhr.setRequestHeader(e,t)}),a.xhr.send(c)},a.abort=function(){a.xhr&&a.xhr.abort(),a.xhr=null},a.status=function(){return a.pendingRetry?"uploading":a.skipped?"success":a.xhr?a.xhr.readyState<4?"uploading":200==a.xhr.status||201==a.xhr.status?"success":o.contains(a.getOpt("permanentErrors"),a.xhr.status)||a.retries>=a.getOpt("maxChunkRetries")?"error":(a.abort(),"pending"):"pending"},a.message=function(){return a.xhr?a.xhr.responseText:""},a.progress=function(e){void 0===e&&(e=!1);var t=e?(a.endByte-a.startByte)/a.fileObjSize:1;if(a.pendingRetry)return 0;switch(a.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return a.loaded/(a.endByte-a.startByte)*t}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var i=this;i.files=[],i.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,maxFilesErrorCallback:function(e,t){var n=i.getOpt("maxFiles");alert("Please upload no more than "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+o.formatSize(i.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+o.formatSize(i.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+i.getOpt("fileType")+".")}},i.opts=e||{},i.getOpt=function(e){var i=this;if(e instanceof Array){var a={};return o.each(e,function(e){a[e]=i.getOpt(e)}),a}if(i instanceof r){if(void 0!==i.opts[e])return i.opts[e];i=i.fileObj}if(i instanceof n){if(void 0!==i.opts[e])return i.opts[e];i=i.resumableObj}if(i instanceof t)return void 0!==i.opts[e]?i.opts[e]:i.defaults[e]},i.events=[],i.on=function(e,t){i.events.push(e.toLowerCase(),t)},i.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n=e[0].toLowerCase(),t=0;t<=i.events.length;t+=2)i.events[t]==n&&i.events[t+1].apply(i,e.slice(1)),"catchall"==i.events[t]&&i.events[t+1].apply(null,e);"fileerror"==n&&i.fire("error",e[2],e[1]),"fileprogress"==n&&i.fire("progress")};var o={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if(void 0!==e.length){for(var n=0;n<e.length;n++)if(!1===t(e[n]))return}else for(n in e)if(!1===t(n,e[n]))return},generateUniqueIdentifier:function(e){var t=i.getOpt("generateUniqueIdentifier");if("function"==typeof t)return t(e);var n=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var n=!1;return o.each(e,function(e){return e!=t||(n=!0,!1)}),n},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e){var t=i.getOpt("target");return"function"==typeof t?t(e):(t+=t.indexOf("?")<0?"?":"&",t+e.join("&"))}},a=function(e){o.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?u(e.dataTransfer.items,e):e.dataTransfer&&e.dataTransfer.files&&u(e.dataTransfer.files,e)},s=function(e){e.preventDefault()},u=function(e,t,n,r){n||(n={total:0,files:[],event:t}),c(e.length,n);for(var i=0;i<e.length;i++){var o,a,s=e[i];if(s.isFile||s.isDirectory)o=s;else if(s.getAsEntry)o=s.getAsEntry();else{if(!s.webkitGetAsEntry){if("function"==typeof s.getAsFile){l(s.getAsFile(),n,r);continue}if(File&&s instanceof File){l(s,n,r);continue}c(-1,n);continue}o=s.webkitGetAsEntry()}if(o){if(o.isFile)o.file(function(e){l(e,n,r)},function(e){console.warn(e)});else if(o.isDirectory){a=o.createReader();var f=[],d=function(e){a.readEntries(function(r){if(r.length>0){for(var i=0;i<r.length;i++)f.push(r[i]);d(o.fullPath)}else u(f,t,n,e),c(-1,n)},function(e){c(-1,n),console.warn(e)})};d(o.fullPath)}}else c(-1,n)}},c=function(e,t){t.total+=e,t.files.length===t.total&&f(t.files,t.event)},l=function(e,t,n){n&&(e.relativePath=n+"/"+e.name),t.files.push(e),t.files.length===t.total&&f(t.files,t.event)},f=function(e,t){var r=0,a=i.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if(void 0!==a.maxFiles&&a.maxFiles<e.length+i.files.length){if(1!==a.maxFiles||1!==i.files.length||1!==e.length)return a.maxFilesErrorCallback(e,r++),!1;i.removeFile(i.files[0])}var s=[];o.each(e,function(e){function u(r){i.getFromUniqueIdentifier(r)||function(){e.uniqueIdentifier=r;var o=new n(i,e,r);i.files.push(o),s.push(o),o.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){i.fire("fileAdded",o,t)},0)}()}var c=e.name;if(a.fileType.length>0){var l=!1;for(var f in a.fileType){var d="."+a.fileType[f];if(-1!==c.indexOf(d,c.length-d.length)){l=!0;break}}if(!l)return a.fileTypeErrorCallback(e,r++),!1}if(void 0!==a.minFileSize&&e.size<a.minFileSize)return a.minFileSizeErrorCallback(e,r++),!1;if(void 0!==a.maxFileSize&&e.size>a.maxFileSize)return a.maxFileSizeErrorCallback(e,r++),!1;var h=o.generateUniqueIdentifier(e);h&&"function"==typeof h.done&&"function"==typeof h.fail?h.done(function(e){u(e)}).fail(function(){u()}):u(h)}),window.setTimeout(function(){i.fire("filesAdded",s)},0)};return i.uploadNextChunk=function(){var e=!1;if(i.getOpt("prioritizeFirstAndLastChunk")&&(o.each(i.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(o.each(i.files,function(t){if(!1===t.isPaused()&&o.each(t.chunks,function(t){if("pending"==t.status()&&0===t.preprocessState)return t.send(),e=!0,!1}),e)return!1}),e)return!0;var t=!1;return o.each(i.files,function(e){if(!e.isComplete())return t=!0,!1}),t||i.fire("complete"),!1},i.assignBrowse=function(e,t){void 0===e.length&&(e=[e]),o.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:(n=document.createElement("input"),n.setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var r=i.getOpt("maxFiles");void 0===r||1!=r?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory"),n.addEventListener("change",function(e){f(e.target.files,e),e.target.value=""},!1)})},i.assignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.addEventListener("dragover",s,!1),e.addEventListener("dragenter",s,!1),e.addEventListener("drop",a,!1)})},i.unAssignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.removeEventListener("dragover",s),e.removeEventListener("dragenter",s),e.removeEventListener("drop",a)})},i.isUploading=function(){var e=!1;return o.each(i.files,function(t){if(t.isUploading())return e=!0,!1}),e},i.upload=function(){if(!i.isUploading()){i.fire("uploadStart");for(var e=1;e<=i.getOpt("simultaneousUploads");e++)i.uploadNextChunk()}},i.pause=function(){o.each(i.files,function(e){e.abort()}),i.fire("pause")},i.cancel=function(){for(var e=i.files.length-1;e>=0;e--)i.files[e].cancel();i.fire("cancel")},i.progress=function(){var e=0,t=0;return o.each(i.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},i.addFile=function(e,t){f([e],t)},i.removeFile=function(e){for(var t=i.files.length-1;t>=0;t--)i.files[t]===e&&i.files.splice(t,1)},i.getFromUniqueIdentifier=function(e){var t=!1;return o.each(i.files,function(n){n.uniqueIdentifier==e&&(t=n)}),t},i.getSize=function(){var e=0;return o.each(i.files,function(t){e+=t.size}),e},this};e.exports=t}()},function(e,t,n){function r(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:u,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:l+1,h=f-c+(d-l)/1e4;if(h<0&&void 0===e.clockseq&&(a=a+1&16383),(h<0||f>c)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=d,u=a,f+=122192928e5;var p=(1e4*(268435455&f)+d)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var v=f/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var m=e.node||s,y=0;y<6;++y)i[r+y]=m[y];return t||o(i)}var i=n(108),o=n(109),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],u=16383&(a[6]<<8|a[7]),c=0,l=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(108),o=n(109);e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l={internalStorage:{storage:{},getItem:function(e){return this.storage[e]},setItem:function(e,t){this.storage[e]=t},clear:function(){this.storage={}}},getLocalStorage:function(){return window.localStorage},getSessionStorage:function(){return window.sessionStorage},getInternalStorage:function(){return this.internalStorage},getStorage:function(){try{var e=this.getLocalStorage();if(e)return e;var t=this.getSessionStorage();if(t)return t}catch(e){return this.getInternalStorage()}},isCORSRequest:function(e){var t=document.createElement("a");return t.href=e,t.host!==window.location.host},getCookieValue:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}},f=function(){function e(t){var n=this;(0,s.default)(this,e),this.STORAGE_KEY_PREAMBLE="herment",this.MAXEVENTS=100,this.PUBLISH_INTERVAL=5e3,this.SAVE_INTERVAL=1e3,this.isStarted=!1,this.config=this.parseConfig(t),this.storage=l.getStorage(),window.addEventListener("unload",function(){return n.moveQueueToStorage()})}return(0,c.default)(e,[{key:"getAtlPath",value:function(){return l.getCookieValue("__atl_path")}},{key:"getServerName",value:function(){return document.location.hostname}},{key:"getProductNameFromServerName",value:function(e){return void 0!==e?e.replace(".com","").replace(".net","").replace(".org","").replace(".au","").replace(".io",""):"-"}},{key:"getSubdomain",value:function(e){if(e.match(/^([a-z0-9\.]*)[\-\.]{1}([a-z0-9]+)+\.([a-z]{2,6})$/i)){var t=e.split(".");if(t=2===t[t.length-1].length?t.slice(0,t.length-3):t.slice(0,t.length-2),0!==t.length)return t.join(".")}return"-"}},{key:"generateRandomStorageKey",value:function(){var e=(Math.random()+"").slice(2,12),t=(Math.random()+"").slice(2,12);return e.concat(t)}},{key:"ajaxPost",value:function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json, text/javascript, */*;"),n.send(t)}},{key:"parseConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window,n=t.AJS?t.AJS.EventQueue:[],r=e.queue||n,i=e.analyticsscheme||"https",o=e.analyticsserver||"analytics.atlassian.com",a=e.analyticsurl||"/analytics/events",s=e.server||this.getServerName();return{queue:r,gasScheme:i,gasServer:o,gasUrl:a,serverName:s,productName:e.product||this.getProductNameFromServerName(s),subProductName:e.subproduct||this.getSubdomain(s)||"-",version:e.version,session:e.session,sen:e.sen,sourceIP:e.sourceIP,atlPath:e.atlpath||this.getAtlPath(),post:e.ajax||this.ajaxPost,maxevents:e.maxevents||this.MAXEVENTS,storageKey:e.storage_key||this.STORAGE_KEY_PREAMBLE+this.generateRandomStorageKey()+this.generateRandomStorageKey(),user:e.user||"default",publishInterval:e.publish_interval||this.PUBLISH_INTERVAL,saveInterval:e.save_interval||this.SAVE_INTERVAL}}},{key:"pushToServer",value:function(e,t){var n=this.config,r=n.gasScheme,i=n.gasServer,a=n.gasUrl;(t||this.config.post)(r+"://"+i+a,(0,o.default)({events:e}))}},{key:"addEventsToArray",value:function(e,t,n){if(n&&n.server&&n.product&&n.subproduct&&n.user)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(t.length>=this.config.maxevents)return;if(i.name&&i.properties){var o={name:i.name,properties:i.properties,serverTime:i.time||(new Date).getTime(),server:n.server,user:n.user,product:n.product,subproduct:n.subproduct,version:n.version,session:n.session,sen:n.sen,sourceIP:n.sourceIP,atlPath:n.atlPath};t.push(o)}}}},{key:"publishFromQueueAndStorage",value:function(e){try{var t=e||this.pushToServer.bind(this),n=[];if(this.config.queue.length<1&&(void 0===this.storage||this.storage.length<1))return;var r={server:this.config.serverName,user:this.config.user,product:this.config.productName,subproduct:this.config.subProductName,version:this.config.version,session:this.config.session,sen:this.config.sen,sourceIP:this.config.sourceIP,atlPath:this.config.atlPath};this.addEventsToArray(this.config.queue,n,r);var i=this.popEventsFromStorage();this.addEventsToArray(i,n,r),this.config.queue.length=0,n&&n.length&&t(n)}catch(e){}}},{key:"serialiseEventsToString",value:function(e){return(0,o.default)(e)}},{key:"deserialiseEvents",value:function(e){return JSON.parse(e)}},{key:"storeEvents",value:function(e){if(this.storage)try{if(this.storage[this.config.storageKey]){var t=this.deserialiseEvents(this.storage[this.config.storageKey])||[];t.length<this.config.maxevents&&t.push.apply(t,e),e=t}this.storage.setItem(this.config.storageKey,this.serialiseEventsToString(e))}catch(e){}}},{key:"popEventsFromStorage",value:function(){if(!this.storage)return[];try{if(this.storage[this.config.storageKey]){var e=this.deserialiseEvents(this.storage[this.config.storageKey]);return this.storage[this.config.storageKey]=this.serialiseEventsToString([]),e}}catch(e){}return[]}},{key:"moveQueueToStorage",value:function(){0!==this.config.queue.length&&this.storage&&(this.storeEvents(this.config.queue),this.config.queue.length=0)}},{key:"start",value:function(){var e=this;this.isStarted=!0;var t=Array.prototype.push;this.config.queue.push=function(n){n.time=(new Date).getTime(),t.call(e.config.queue,n)},this.initialSaveTimeout=setTimeout(this.publishFromQueueAndStorage.bind(this),this.config.saveInterval),this.publishInterval=setInterval(this.publishFromQueueAndStorage.bind(this),this.config.publishInterval),this.saveInterval=setInterval(this.moveQueueToStorage.bind(this),this.config.saveInterval)}},{key:"stop",value:function(){this.isStarted=!1,this.publishFromQueueAndStorage(),clearTimeout(this.initialSaveTimeout),clearInterval(this.saveInterval),clearInterval(this.publishInterval)}},{key:"destroy",value:function(){this.stop()}}]),e}(),d=void 0,h=function(){return function(e){return d?(d.stop(),void(d.config=d.parseConfig(e))):d=new f(e)}}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceByChunks=function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(213)),r(n(112)),r(n(214)),r(n(216)),r(n(113)),r(n(122))},function(e,t,n){"use strict";function r(e,t){return{type:"FETCHING_COLLECTION_SUCCEEDED",collection:e,hasNextPage:t}}function i(e){return{type:"FETCHING_COLLECTION_FAILED",error:e}}Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e[e.click=0]="click",e[e.delete=1]="delete",e[e.download=2]="download",e[e.retry=3]="retry",e[e.custom=4]="custom"}(o=t.CardActionType||(t.CardActionType={})),t.CardClick=function(e){return{type:o.click,handler:e}},t.CardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.ListCardClick=function(e){return{type:o.click,handler:e}},t.ListCardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.CollectionCardClick=function(e){return{type:o.click,handler:e}},t.fetchingCollectionSucceeded=r,t.fetchingCollectionFailed=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(215);t.DefaultMediaStateManager=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(){function e(){this.subscribers={},this.state=new Map}return e.prototype.getState=function(e){return this.state.get(e)},e.prototype.updateState=function(e,t){var n=this.subscribers[e],i=r.__assign({},this.state.get(e)||{},t);this.state.set(e,i),void 0!==n&&Array.from(n).forEach(function(e){return e.call(e,i)})},e.prototype.subscribe=function(e,t){var n=this.subscribers,r=n[e];void 0===r&&(r=[],n[e]=r),r.indexOf(t)>-1||r.push(t)},e.prototype.unsubscribe=function(e,t){var n=this.subscribers[e];if(void 0!==n){var r=n.indexOf(t);r>-1&&n.splice(r,1)}},e.prototype.destroy=function(){this.subscribers={}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26);n(217),n(218);var i=n(113),o=n(242),a=n(244),s=n(124),u=n(245),c=n(127),l=200,f=function(){function e(){}return e.create=function(e){return new d(e)},e}();t.ContextFactory=f;var d=function(){function e(e){this.config=e,this.collectionPool=o.RemoteMediaCollectionProviderFactory.createPool(),this.itemPool=i.MediaItemProvider.createPool(),this.urlPreviewPool=i.MediaUrlPreviewProvider.createPool(),this.fileItemCache=new u.LRUCache(e.cacheSize||l)}return e.prototype.getMediaItemProvider=function(e,t,n,o){var a=o&&"link"===o.type,s=o&&"file"===o.type&&"pending"!==o.details.processingStatus;if(o&&(a||s))return{observable:function(){return r.Observable.of(o)}};var u=i.MediaItemProvider.fromPool(this.itemPool,this.apiConfig,this.fileItemCache,t,e,n);return o?{observable:function(){return u.observable().startWith(o)}}:u},e.prototype.getMediaCollectionProvider=function(e,t){return void 0===t&&(t=c.DEFAULT_COLLECTION_PAGE_SIZE),o.RemoteMediaCollectionProviderFactory.fromPool(this.collectionPool,this.apiConfig,e,t)},e.prototype.getDataUriService=function(e){return new a.MediaDataUriService(this.config.authProvider,this.config.serviceHost,e)},e.prototype.getUrlPreviewProvider=function(e){return i.MediaUrlPreviewProvider.fromPool(this.urlPreviewPool,this.apiConfig,e)},e.prototype.addLinkItem=function(e,t,n){return new s.MediaLinkService(this.apiConfig).addLinkItem(e,t,n)},e.prototype.refreshCollection=function(e,t){this.getMediaCollectionProvider(e,t).refresh()},Object.defineProperty(e.prototype,"apiConfig",{get:function(){return{serviceHost:this.config.serviceHost,authProvider:this.config.authProvider}},enumerable:!0,configurable:!0}),e}()},function(e,t){e.exports=n(57)},function(e,t){e.exports=n(63)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t){this.config=e,this.fileItemCache=t}return t.prototype.getFileItem=function(t,n){var i=this,o=[t,"file"].join("-"),a=this.fileItemCache.get(o);return a?e.resolve(a):r.default({config:this.config,collectionName:n,preventPreflight:!0})({url:"/file/"+t}).then(function(e){return e.data}).then(function(e){var t={type:"file",details:{id:e.id,mediaType:e.mediaType,mimeType:e.mimeType,name:e.name,processingStatus:e.processingStatus,size:e.size,artifacts:e.artifacts}};return"succeeded"===e.processingStatus&&i.fileItemCache.set(o,t),t})},t}();t.MediaFileService=i}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(6),o=n(117),a=n(221),s=n(81),u=r(s);u.Axios=a,u.create=function(e){return r(i.merge(s,e))},u.Cancel=n(121),u.CancelToken=n(235),u.isCancel=n(120),u.all=function(e){return t.all(e)},u.spread=n(236),e.exports=u,e.exports.default=u}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(81),o=n(6),a=n(230),s=n(231),u=n(233),c=n(234);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var n=[s,void 0],r=t.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(119);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(6);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){
var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(6);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";(function(t){function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(6),o=n(232),a=n(120),s=n(81);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(n){return a(n)||(r(e),n&&n.response&&(n.response.data=o(n.response.data,n.response.headers,e.transformResponse))),t.reject(n)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t,n){"use strict";(function(t){function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new t(function(e){n=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),n(r.reason))})}var i=n(121);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImageRemote=function(e,t){if(void 0===t&&(t=window.location.origin),URL&&URL.prototype){var n=new URL(e);return!!n.host&&n.origin!==t}return!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n;t.checkWebpSupport=function(){return void 0!==n?e.resolve(n):new e(function(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){n=2===t.height,e(n)}})}}).call(t,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(123),o=n(82),a=n(125),s=function(){function e(){}return e.fromMediaApi=function(e,t,n,o,a){switch(n){case"file":return r.FileProvider.fromMediaApi(e,t,o,a,r.FILE_PROVIDER_RETRY_INTERVAL);case"link":return i.LinkProvider.fromMediaApi(e,o,a);default:throw new Error("invalid media type "+n)}},e.fromPool=function(t,n,r,i,o,s){return{observable:function(){var u=[i,o,s].join("-");return a.observableFromObservablePool(t,u,function(){return e.fromMediaApi(n,r,i,o,s).observable()})}}},e.createPool=function(){return new o.Pool},e}();t.MediaItemProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(126),o=n(82),a=n(125),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.fromMediaApi=function(e,t){return i.UrlPreviewProvider.fromMediaApi(e,t)},t.fromPool=function(e,n,r){return{observable:function(){return a.observableFromObservablePool(e,r,function(){return t.fromMediaApi(n,r).observable()})}}},t.createPool=function(){return new o.Pool},t}(i.UrlPreviewProvider);t.MediaUrlPreviewProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getUrlPreview=function(e){return r.default({config:this.config})({url:"/link/preview",params:{url:e}}).then(function(e){var t=e.data,n=t.preview,r=t.previewError;if(r)throw new Error(r.code+": "+r.name);return n})},e}();t.MediaUrlPreviewService=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=n(127),o=n(243),a=n(82),s=function(){function e(){}return e.fromCollectionService=function(e,t,n,i){return void 0===i&&(i="desc"),new r.RemoteMediaCollectionProvider(e,t,n,i)},e.fromMediaAPI=function(t,n,r,o){return void 0===o&&(o="desc"),e.fromCollectionService(new i.MediaCollectionService(t),n,r,o)},e.fromPool=function(e,t,n,a,s){void 0===s&&(s="desc");var u=[n,a,s].join("-"),c=function(){var e=new i.MediaCollectionService(t);return new r.RemoteMediaCollectionProvider(e,n,a,s)};return o.mediaCollectionProviderFromPool(e,u,c)},e.createPool=function(){return new a.Pool},e}();t.RemoteMediaCollectionProviderFactory=s},function(e,t,n){"use strict";function r(e,t,n){return e.acquire(t,function(){var r=n(),o=r.observable;return r.observable=function(){return new i.Observable(function(n){var i=o.bind(r)(),a=i.subscribe(n);return function(){a.unsubscribe(),e.release(t)}})},r})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.mediaCollectionProviderFromPool=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t,n){this.authProvider=e,this.serviceHost=t,this.collectionName=n,this.request=r.default({config:{serviceHost:this.serviceHost,authProvider:this.authProvider},collectionName:this.collectionName})}return t.prototype.fetchOriginalDataUri=function(e){return this.fetchSomeDataUri("/file/"+e.details.id+"/binary",{"max-age":3600,collection:this.collectionName})},t.prototype.fetchImageDataUri=function(e,t,n,r){return void 0===r&&(r="crop"),this.fetchSomeDataUri("/file/"+e.details.id+"/image",{width:t,height:n,mode:r,"max-age":3600,collection:this.collectionName})},t.prototype.fetchSomeDataUri=function(e,t){return this.request({url:e,params:t,responseType:"image"}).then(this.readBlob)},t.prototype.readBlob=function(t){return new e(function(e,n){var r=new FileReader;r.addEventListener("load",function(){return e(r.result)}),r.addEventListener("error",function(){return n(r.error)}),r.readAsDataURL(t)})},t}();t.MediaDataUriService=i}).call(t,n(7))},function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,r=this.get(e,!0);return r?(n=r.value,r.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.newest;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.oldest;r;)e.call(t,r.key,r.value,this),r=r.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=n)},function(e,t,n){e.exports={default:n(247),__esModule:!0}},function(e,t,n){n(73),n(30),n(33),n(248),n(254),n(257),n(259),e.exports=n(2).Set},function(e,t,n){"use strict";var r=n(249),i=n(130);e.exports=n(250)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(9).f,i=n(45),o=n(76),a=n(14),s=n(74),u=n(34),c=n(65),l=n(97),f=n(107),d=n(12),h=n(70).fastKey,p=n(130),v=d?"_s":"size",m=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(70),a=n(18),s=n(15),u=n(76),c=n(34),l=n(74),f=n(11),d=n(32),h=n(9).f,p=n(251)(0),v=n(12);e.exports=function(e,t,n,m,y,b){var g=r[e],_=g,w=y?"set":"add",x=_&&_.prototype,k={};return v&&"function"==typeof _&&(b||x.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,n){l(t,_,e,"_c"),t._c=new g,void 0!=n&&c(n,y,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!b||"clear"!=e)&&s(_.prototype,e,function(n,r){if(l(this,_,e),!t&&b&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),b||h(_.prototype,"size",{get:function(){return this._c.size}})):(_=m.getConstructor(t,e,y,w),u(_.prototype,n),o.NEED=!0),d(_,e),k[e]=_,i(i.G+i.W+i.F,k),b||m.setStrong(_,e,y),_}},function(e,t,n){var r=n(14),i=n(66),o=n(41),a=n(67),s=n(252);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var v,m,y=o(t),b=i(y),g=r(s,p,3),_=a(b.length),w=0,x=n?h(t,_):u?h(t,0):void 0;_>w;w++)if((d||w in b)&&(v=b[w],m=g(v,w,y),e))if(n)x[w]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},function(e,t,n){var r=n(253);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),i=n(98),o=n(3)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(255)("Set")})},function(e,t,n){var r=n(49),i=n(256);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(34);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(258)("Set")},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(260)("Set")},function(e,t,n){"use strict";var r=n(5),i=n(29),o=n(14),a=n(34);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(22),c=function(){function e(t,n,r,i){return(0,o.default)(this,e),this.size=t,this.progress=n,this.startTime=r,this.measureTime=i,e.isValidSize(t)?e.isValidProgress(t,n)?e.isValidStartTime(r)?e.isValidMeasureTime(r,i)?(this.size=t,this.progress=n,this.startTime=r,void(this.measureTime=i)):void u.handleError("wrong_measure_time","The progress measure time has incorrect format."):void u.handleError("wrong_start_time","The progress start time has incorrect format."):void u.handleError("wrong_progress","The progress format is incorrect."):void u.handleError("wrong_file_size","Passed file size is incorrect.")}return(0,s.default)(e,[{key:"toJSON",value:function(){return{absolute:this.absolute,portion:this.portion,max:this.max,overallTime:this.overallTime,expectedFinishTime:this.expectedFinishTime,timeLeft:this.timeLeft}}},{key:"absolute",get:function(){return this.progress}},{key:"portion",get:function(){return this.progress/this.size}},{key:"max",get:function(){return this.size}},{key:"overallTime",get:function(){return(this.measureTime-this.startTime)/this.portion}},{key:"expectedFinishTime",get:function(){return this.startTime+this.overallTime}},{key:"timeLeft",get:function(){return this.expectedFinishTime-this.measureTime}}],[{key:"isValidSize",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidProgress",value:function(t,n){return e.isValidSize(t)&&"number"==typeof n&&n>=0&&n<=t}},{key:"isValidStartTime",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidMeasureTime",value:function(t,n){return e.isValidStartTime(t)&&"number"==typeof n&&n>=t}}]),e}();t.MediaProgress=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(263),i=n(265);t.createHasher=function(){var e=void 0;try{e=new i.WorkerHasher(3)}catch(t){e=new r.SimpleHasher}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(264),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"hash",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=new FileReader;r.onload=function(t){var n=t.target.result;e.hash=new u(4194304).digestFromArrayBuffer(n),e.preprocessFinished()},r.readAsArrayBuffer(n)}}]),e}();t.SimpleHasher=c},function(e,t,n){(function(t){!function(){function n(e){"use strict";for(var t={fill:0},o=function(e){for(e+=9;e%64>0;e+=1);return e},a=function(e,t){var n=new Uint8Array(e.buffer),r=t%4,i=t-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var o=1+(t>>2);o<e.length;o++)e[o]=0},s=function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=n/(1<<29)|0,e[15+(2+(t>>2)&-16)]=n<<3},u=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a.charCodeAt(n+3);case 1:e[i+1-(s<<1)|0]=a.charCodeAt(n+2);case 2:e[i+2-(s<<1)|0]=a.charCodeAt(n+1);case 3:e[i+3-(s<<1)|0]=a.charCodeAt(n)}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2]=a.charCodeAt(n+o)<<24|a.charCodeAt(n+o+1)<<16|a.charCodeAt(n+o+2)<<8|a.charCodeAt(n+o+3);switch(u){case 3:e[i+c+1|0]=a.charCodeAt(n+c+2);case 2:e[i+c+2|0]=a.charCodeAt(n+c+1);case 1:e[i+c+3|0]=a.charCodeAt(n+c)}}},c=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a[n+3];case 1:e[i+1-(s<<1)|0]=a[n+2];case 2:e[i+2-(s<<1)|0]=a[n+1];case 3:e[i+3-(s<<1)|0]=a[n]}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2|0]=a[n+o]<<24|a[n+o+1]<<16|a[n+o+2]<<8|a[n+o+3];switch(u){case 3:e[i+c+1|0]=a[n+c+2];case 2:e[i+c+2|0]=a[n+c+1];case 1:e[i+c+3|0]=a[n+c]}}},l=function(e,t,n,r,o){var a,s=this,u=o%4,c=(r+u)%4,l=r-c,f=new Uint8Array(i.readAsArrayBuffer(s.slice(n,n+r)));switch(u){case 0:e[o]=f[3];case 1:e[o+1-(u<<1)|0]=f[2];case 2:e[o+2-(u<<1)|0]=f[1];case 3:e[o+3-(u<<1)|0]=f[0]}if(!(r<c+u)){for(a=4-u;a<l;a=a+4|0)t[o+a>>2|0]=f[a]<<24|f[a+1]<<16|f[a+2]<<8|f[a+3];switch(c){case 3:e[o+l+1|0]=f[l+2];case 2:e[o+l+2|0]=f[l+1];case 1:e[o+l+3|0]=f[l]}}},f=function(e){switch(r.getDataType(e)){case"string":return u.bind(e);case"array":case"buffer":return c.bind(e);case"arraybuffer":return c.bind(new Uint8Array(e));case"view":return c.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return l.bind(e)}},d=new Array(256),h=0;h<256;h++)d[h]=(h<16?"0":"")+h.toString(16);var p=function(e){for(var t=new Uint8Array(e),n=new Array(e.byteLength),r=0;r<n.length;r++)n[r]=d[t[r]];return n.join("")},v=function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=o(e),t.heap=new ArrayBuffer(v(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new n._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null}(e||65536);var m=function(e,n){t.offset=0;var r=new Int32Array(e,n+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},y=function(e,n){var r=o(e),i=new Int32Array(t.heap,0,r>>2);return a(i,e),s(i,e,n),r},b=function(e,n,r,i){f(e)(t.h8,t.h32,n,r,i||0)},g=function(e,n,r,i,o){var a=r;b(e,n,r),o&&(a=y(r,i)),t.core.hash(a,t.padMaxChunkLen)},_=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},w=this.rawDigest=function(e){var n=e.byteLength||e.length||e.size||0;m(t.heap,t.padMaxChunkLen);var r=0,i=t.maxChunkLen;for(r=0;n>r+i;r+=i)g(e,r,i,n,!1);return g(e,r,n-r,n,!0),_(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return p(w(e).buffer)},this.resetState=function(){return m(t.heap,t.padMaxChunkLen),this},this.append=function(e){var n,r=0,i=e.byteLength||e.length||e.size||0,o=t.offset%t.maxChunkLen;for(t.offset+=i;r<i;)n=Math.min(i-r,t.maxChunkLen-o),b(e,r,n,o),o+=n,r+=n,o===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),o=0);return this},this.getState=function(){var e,n=t.offset%t.maxChunkLen;if(n)e=t.heap.slice(0);else{var r=new Int32Array(t.heap,t.padMaxChunkLen+320,5);e=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}return{offset:t.offset,heap:e}},this.setState=function(e){return t.offset=e.offset,20===e.heap.byteLength?new Int32Array(t.heap,t.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):t.h32.set(new Int32Array(e.heap)),this};var x=this.rawEnd=function(){var e=t.offset,n=e%t.maxChunkLen,r=y(n,e);t.core.hash(r,t.padMaxChunkLen);var i=_(t.heap,t.padMaxChunkLen);return m(t.heap,t.padMaxChunkLen),i};this.end=function(){return p(x().buffer)}}var r={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if(void 0!==t&&t.Buffer&&t.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(n._core=function(e,t,n){"use asm";var r=new e.Int32Array(n);function i(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,d=0,h=0,p=0,v=0,m=0;o=r[t+320>>2]|0;s=r[t+324>>2]|0;c=r[t+328>>2]|0;f=r[t+332>>2]|0;h=r[t+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){a=o;u=s;l=c;d=f;p=h;for(i=0;(i|0)<64;i=i+4|0){m=r[n+i>>2]|0;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[e+i>>2]=m}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)+1859775393|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|s&f|c&f)|0)+((m+h|0)-1894007588|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)-899497514|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}o=o+a|0;s=s+u|0;c=c+l|0;f=f+d|0;h=h+p|0}r[t+320>>2]=o;r[t+324>>2]=s;r[t+328>>2]=c;r[t+332>>2]=f;r[t+336>>2]=h}return{hash:i}},e.exports=n,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,o=function(e,t,n){try{return n(null,e.digest(t))}catch(e){return n(e)}},a=function(e,t,n,r,i){var o=new self.FileReader;o.onloadend=function(){var s=o.result;t+=o.result.byteLength;try{e.append(s)}catch(e){return void i(e)}t<r.size?a(e,t,n,r,i):i(null,e.end())},o.readAsArrayBuffer(r.slice(t,t+n))};self.onmessage=function(e){var t=e.data.data,r=e.data.file,i=e.data.id;if(void 0!==i&&(r||t)){var s=e.data.blockSize||4194304,u=new n(s);u.resetState();var c=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&o(u,t,c),r&&a(u,0,s,r,c)}}}}()}).call(t,n(52))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(266),c=function(){function e(t){(0,o.default)(this,e),this.workers=[],this.jobs={};for(var n=0;n<t;++n)this.workers.push(this.createWorker())}return(0,s.default)(e,[{key:"hash",value:function(e){this.calculateHashInWorker(e)}},{key:"createWorker",value:function(){var e=this,t=new Blob([u]),n=URL.createObjectURL(t),r=new Worker(n),i={worker:r,activeJobs:0};return r.addEventListener("message",function(t){e.handleWorkerMessage(t,i)}),i}},{key:"handleWorkerMessage",value:function(e,t){var n=e.data.id,r=this.jobs[n];r&&(delete this.jobs[n],t.activeJobs--,e.data.error?this.calculateHashInWorker(r):(r.hash=e.data.hash,r.preprocessFinished()))}},{key:"calculateHashInWorker",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=e.fileObj.fileName+e.fileObjSize+e.startByte;this.jobs[r]=e;var i=this.getWorker();this.dispatch(r,i,n)}},{key:"dispatch",value:function(e,t,n){t.activeJobs++;var r=t.worker;if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")){var i=new FileReader;return i.onload=function(){r.postMessage({id:e,data:i.result})},void i.readAsBinaryString(n)}r.postMessage({id:e,data:n})}},{key:"getWorker",value:function(){return this.workers.reduce(function(e,t){return t.activeJobs<e.activeJobs?t:e},this.workers[0])}}]),e}();t.WorkerHasher=c},function(e,t){e.exports="(function () {\n    var /*\n * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,\n * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.\n * (http://github.com/srijs/rusha)\n *\n * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).\n *\n * Copyright (c) 2013 Sam Rijs (http://awesam.de).\n * Released under the terms of the MIT license as follows:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n    util = {\n        getDataType: function (data) {\n            if (typeof data === 'string') {\n                return 'string';\n            }\n            if (data instanceof Array) {\n                return 'array';\n            }\n            if (typeof global !== 'undefined' && global.Buffer && global.Buffer.isBuffer(data)) {\n                return 'buffer';\n            }\n            if (data instanceof ArrayBuffer) {\n                return 'arraybuffer';\n            }\n            if (data.buffer instanceof ArrayBuffer) {\n                return 'view';\n            }\n            if (data instanceof Blob) {\n                return 'blob';\n            }\n            throw new Error('Unsupported data type.');\n        }\n    };\n    function Rusha(chunkSize) {\n        'use strict';\n        var // Private object structure.\n        self$2 = { fill: 0 };\n        var // Calculate the length of buffer that the sha1 routine uses\n        // including the padding.\n        padlen = function (len) {\n            for (len += 9; len % 64 > 0; len += 1);\n            return len;\n        };\n        var padZeroes = function (bin, len) {\n            var h8 = new Uint8Array(bin.buffer);\n            var om = len % 4, align = len - om;\n            switch (om) {\n            case 0:\n                h8[align + 3] = 0;\n            case 1:\n                h8[align + 2] = 0;\n            case 2:\n                h8[align + 1] = 0;\n            case 3:\n                h8[align + 0] = 0;\n            }\n            for (var i$2 = (len >> 2) + 1; i$2 < bin.length; i$2++)\n                bin[i$2] = 0;\n        };\n        var padData = function (bin, chunkLen, msgLen) {\n            bin[chunkLen >> 2] |= 128 << 24 - (chunkLen % 4 << 3);\n            // To support msgLen >= 2 GiB, use a float division when computing the\n            // high 32-bits of the big-endian message length in bits.\n            bin[((chunkLen >> 2) + 2 & ~15) + 14] = msgLen / (1 << 29) | 0;\n            bin[((chunkLen >> 2) + 2 & ~15) + 15] = msgLen << 3;\n        };\n        var // Convert a binary string and write it to the heap.\n        // A binary string is expected to only contain char codes < 256.\n        convStr = function (H8, H32, start, len, off) {\n            var str = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = str.charCodeAt(start + 3);\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = str.charCodeAt(start + 2);\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = str.charCodeAt(start + 1);\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = str.charCodeAt(start);\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2] = str.charCodeAt(start + i$2) << 24 | str.charCodeAt(start + i$2 + 1) << 16 | str.charCodeAt(start + i$2 + 2) << 8 | str.charCodeAt(start + i$2 + 3);\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = str.charCodeAt(start + j + 2);\n            case 2:\n                H8[off + j + 2 | 0] = str.charCodeAt(start + j + 1);\n            case 1:\n                H8[off + j + 3 | 0] = str.charCodeAt(start + j);\n            }\n        };\n        var // Convert a buffer or array and write it to the heap.\n        // The buffer or array is expected to only contain elements < 256.\n        convBuf = function (H8, H32, start, len, off) {\n            var buf = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = buf[start + 3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[start + 2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[start + 1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[start];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[start + i$2] << 24 | buf[start + i$2 + 1] << 16 | buf[start + i$2 + 2] << 8 | buf[start + i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[start + j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[start + j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[start + j];\n            }\n        };\n        var convBlob = function (H8, H32, start, len, off) {\n            var blob = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            var buf = new Uint8Array(reader.readAsArrayBuffer(blob.slice(start, start + len)));\n            switch (om) {\n            case 0:\n                H8[off] = buf[3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[0];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[i$2] << 24 | buf[i$2 + 1] << 16 | buf[i$2 + 2] << 8 | buf[i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[j];\n            }\n        };\n        var convFn = function (data) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return convStr.bind(data);\n            case 'array':\n                return convBuf.bind(data);\n            case 'buffer':\n                return convBuf.bind(data);\n            case 'arraybuffer':\n                return convBuf.bind(new Uint8Array(data));\n            case 'view':\n                return convBuf.bind(new Uint8Array(data.buffer, data.byteOffset, data.byteLength));\n            case 'blob':\n                return convBlob.bind(data);\n            }\n        };\n        var slice = function (data, offset) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return data.slice(offset);\n            case 'array':\n                return data.slice(offset);\n            case 'buffer':\n                return data.slice(offset);\n            case 'arraybuffer':\n                return data.slice(offset);\n            case 'view':\n                return data.buffer.slice(offset);\n            }\n        };\n        var // Precompute 00 - ff strings\n        precomputedHex = new Array(256);\n        for (var i = 0; i < 256; i++) {\n            precomputedHex[i] = (i < 16 ? '0' : '') + i.toString(16);\n        }\n        var // Convert an ArrayBuffer into its hexadecimal string representation.\n        hex = function (arrayBuffer) {\n            var binarray = new Uint8Array(arrayBuffer);\n            var res = new Array(arrayBuffer.byteLength);\n            for (var i$2 = 0; i$2 < res.length; i$2++) {\n                res[i$2] = precomputedHex[binarray[i$2]];\n            }\n            return res.join('');\n        };\n        var ceilHeapSize = function (v) {\n            // The asm.js spec says:\n            // The heap object's byteLength must be either\n            // 2^n for n in [12, 24) or 2^24 * n for n ≥ 1.\n            // Also, byteLengths smaller than 2^16 are deprecated.\n            var p;\n            if (// If v is smaller than 2^16, the smallest possible solution\n                // is 2^16.\n                v <= 65536)\n                return 65536;\n            if (// If v < 2^24, we round up to 2^n,\n                // otherwise we round up to 2^24 * n.\n                v < 16777216) {\n                for (p = 1; p < v; p = p << 1);\n            } else {\n                for (p = 16777216; p < v; p += 16777216);\n            }\n            return p;\n        };\n        var // Initialize the internal data structures to a new capacity.\n        init = function (size) {\n            if (size % 64 > 0) {\n                throw new Error('Chunk size must be a multiple of 128 bit');\n            }\n            self$2.offset = 0;\n            self$2.maxChunkLen = size;\n            self$2.padMaxChunkLen = padlen(size);\n            // The size of the heap is the sum of:\n            // 1. The padded input message size\n            // 2. The extended space the algorithm needs (320 byte)\n            // 3. The 160 bit state the algoritm uses\n            self$2.heap = new ArrayBuffer(ceilHeapSize(self$2.padMaxChunkLen + 320 + 20));\n            self$2.h32 = new Int32Array(self$2.heap);\n            self$2.h8 = new Int8Array(self$2.heap);\n            self$2.core = new Rusha._core({\n                Int32Array: Int32Array,\n                DataView: DataView\n            }, {}, self$2.heap);\n            self$2.buffer = null;\n        };\n        // Iinitializethe datastructures according\n        // to a chunk siyze.\n        init(chunkSize || 64 * 1024);\n        var initState = function (heap, padMsgLen) {\n            self$2.offset = 0;\n            var io = new Int32Array(heap, padMsgLen + 320, 5);\n            io[0] = 1732584193;\n            io[1] = -271733879;\n            io[2] = -1732584194;\n            io[3] = 271733878;\n            io[4] = -1009589776;\n        };\n        var padChunk = function (chunkLen, msgLen) {\n            var padChunkLen = padlen(chunkLen);\n            var view = new Int32Array(self$2.heap, 0, padChunkLen >> 2);\n            padZeroes(view, chunkLen);\n            padData(view, chunkLen, msgLen);\n            return padChunkLen;\n        };\n        var // Write data to the heap.\n        write = function (data, chunkOffset, chunkLen, off) {\n            convFn(data)(self$2.h8, self$2.h32, chunkOffset, chunkLen, off || 0);\n        };\n        var // Initialize and call the RushaCore,\n        // assuming an input buffer of length len * 4.\n        coreCall = function (data, chunkOffset, chunkLen, msgLen, finalize) {\n            var padChunkLen = chunkLen;\n            write(data, chunkOffset, chunkLen);\n            if (finalize) {\n                padChunkLen = padChunk(chunkLen, msgLen);\n            }\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n        };\n        var getRawDigest = function (heap, padMaxChunkLen) {\n            var io = new Int32Array(heap, padMaxChunkLen + 320, 5);\n            var out = new Int32Array(5);\n            var arr = new DataView(out.buffer);\n            arr.setInt32(0, io[0], false);\n            arr.setInt32(4, io[1], false);\n            arr.setInt32(8, io[2], false);\n            arr.setInt32(12, io[3], false);\n            arr.setInt32(16, io[4], false);\n            return out;\n        };\n        var // Calculate the hash digest as an array of 5 32bit integers.\n        rawDigest = this.rawDigest = function (str) {\n            var msgLen = str.byteLength || str.length || str.size || 0;\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            var chunkOffset = 0, chunkLen = self$2.maxChunkLen;\n            for (chunkOffset = 0; msgLen > chunkOffset + chunkLen; chunkOffset += chunkLen) {\n                coreCall(str, chunkOffset, chunkLen, msgLen, false);\n            }\n            coreCall(str, chunkOffset, msgLen - chunkOffset, msgLen, true);\n            return getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n        };\n        // The digest and digestFrom* interface returns the hash digest\n        // as a hex string.\n        this.digest = this.digestFromString = this.digestFromBuffer = this.digestFromArrayBuffer = function (str) {\n            return hex(rawDigest(str).buffer);\n        };\n        this.resetState = function () {\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return this;\n        };\n        this.append = function (chunk) {\n            var chunkOffset = 0;\n            var chunkLen = chunk.byteLength || chunk.length || chunk.size || 0;\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var inputLen;\n            self$2.offset += chunkLen;\n            while (chunkOffset < chunkLen) {\n                inputLen = Math.min(chunkLen - chunkOffset, self$2.maxChunkLen - turnOffset);\n                write(chunk, chunkOffset, inputLen, turnOffset);\n                turnOffset += inputLen;\n                chunkOffset += inputLen;\n                if (turnOffset === self$2.maxChunkLen) {\n                    self$2.core.hash(self$2.maxChunkLen, self$2.padMaxChunkLen);\n                    turnOffset = 0;\n                }\n            }\n            return this;\n        };\n        this.getState = function () {\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var heap;\n            if (!turnOffset) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                heap = io.buffer.slice(io.byteOffset, io.byteOffset + io.byteLength);\n            } else {\n                heap = self$2.heap.slice(0);\n            }\n            return {\n                offset: self$2.offset,\n                heap: heap\n            };\n        };\n        this.setState = function (state) {\n            self$2.offset = state.offset;\n            if (state.heap.byteLength === 20) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                io.set(new Int32Array(state.heap));\n            } else {\n                self$2.h32.set(new Int32Array(state.heap));\n            }\n            return this;\n        };\n        var rawEnd = this.rawEnd = function () {\n            var msgLen = self$2.offset;\n            var chunkLen = msgLen % self$2.maxChunkLen;\n            var padChunkLen = padChunk(chunkLen, msgLen);\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n            var result = getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return result;\n        };\n        this.end = function () {\n            return hex(rawEnd().buffer);\n        };\n    }\n    ;\n    // The low-level RushCore module provides the heart of Rusha,\n    // a high-speed sha1 implementation working on an Int32Array heap.\n    // At first glance, the implementation seems complicated, however\n    // with the SHA1 spec at hand, it is obvious this almost a textbook\n    // implementation that has a few functions hand-inlined and a few loops\n    // hand-unrolled.\n    Rusha._core = function RushaCore(stdlib, foreign, heap) {\n        'use asm';\n        var H = new stdlib.Int32Array(heap);\n        function hash(k, x) {\n            // k in bytes\n            k = k | 0;\n            x = x | 0;\n            var i = 0, j = 0, y0 = 0, z0 = 0, y1 = 0, z1 = 0, y2 = 0, z2 = 0, y3 = 0, z3 = 0, y4 = 0, z4 = 0, t0 = 0, t1 = 0;\n            y0 = H[x + 320 >> 2] | 0;\n            y1 = H[x + 324 >> 2] | 0;\n            y2 = H[x + 328 >> 2] | 0;\n            y3 = H[x + 332 >> 2] | 0;\n            y4 = H[x + 336 >> 2] | 0;\n            for (i = 0; (i | 0) < (k | 0); i = i + 64 | 0) {\n                z0 = y0;\n                z1 = y1;\n                z2 = y2;\n                z3 = y3;\n                z4 = y4;\n                for (j = 0; (j | 0) < 64; j = j + 4 | 0) {\n                    t1 = H[i + j >> 2] | 0;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[k + j >> 2] = t1;\n                }\n                for (j = k + 64 | 0; (j | 0) < (k + 80 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 80 | 0; (j | 0) < (k + 160 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) + 1859775393 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 160 | 0; (j | 0) < (k + 240 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | y1 & y3 | y2 & y3) | 0) + ((t1 + y4 | 0) - 1894007588 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 240 | 0; (j | 0) < (k + 320 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) - 899497514 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                y0 = y0 + z0 | 0;\n                y1 = y1 + z1 | 0;\n                y2 = y2 + z2 | 0;\n                y3 = y3 + z3 | 0;\n                y4 = y4 + z4 | 0;\n            }\n            H[x + 320 >> 2] = y0;\n            H[x + 324 >> 2] = y1;\n            H[x + 328 >> 2] = y2;\n            H[x + 332 >> 2] = y3;\n            H[x + 336 >> 2] = y4;\n        }\n        return { hash: hash };\n    };\n    if (// If we'e running in Node.JS, export a module.\n        typeof module !== 'undefined') {\n        module.exports = Rusha;\n    } else if (// If we're running in a DOM context, export\n        // the Rusha object to toplevel.\n        typeof window !== 'undefined') {\n        window.Rusha = Rusha;\n    }\n    if (// If we're running in a webworker, accept\n        // messages containing a jobid and a buffer\n        // or blob object, and return the hash result.\n        typeof FileReaderSync !== 'undefined') {\n        var reader = new FileReaderSync();\n        var hashData = function hash(hasher, data, cb) {\n            try {\n                return cb(null, hasher.digest(data));\n            } catch (e) {\n                return cb(e);\n            }\n        };\n        var hashFile = function hashArrayBuffer(hasher, readTotal, blockSize, file, cb) {\n            var reader$2 = new self.FileReader();\n            reader$2.onloadend = function onloadend() {\n                var buffer = reader$2.result;\n                readTotal += reader$2.result.byteLength;\n                try {\n                    hasher.append(buffer);\n                } catch (e) {\n                    cb(e);\n                    return;\n                }\n                if (readTotal < file.size) {\n                    hashFile(hasher, readTotal, blockSize, file, cb);\n                } else {\n                    cb(null, hasher.end());\n                }\n            };\n            reader$2.readAsArrayBuffer(file.slice(readTotal, readTotal + blockSize));\n        };\n        self.onmessage = function onMessage(event) {\n            var data = event.data.data, file = event.data.file, id = event.data.id;\n            if (typeof id === 'undefined')\n                return;\n            if (!file && !data)\n                return;\n            var blockSize = event.data.blockSize || 4 * 1024 * 1024;\n            var hasher = new Rusha(blockSize);\n            hasher.resetState();\n            var done = function done$2(err, hash) {\n                if (!err) {\n                    self.postMessage({\n                        id: id,\n                        hash: hash\n                    });\n                } else {\n                    self.postMessage({\n                        id: id,\n                        error: err.name\n                    });\n                }\n            };\n            if (data)\n                hashData(hasher, data, done);\n            if (file)\n                hashFile(hasher, 0, blockSize, file, done);\n        };\n    }\n}());";
},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),a=function e(t,n){var r=this;(0,i.default)(this,e),this.apiUrl=t,this.authProvider=n,this.clients={},this.getMediaClient=function(e){return r.getStoredClient(e)||r.createNewClient(e)},this.createNewClient=function(e){var t=new o.MediaClient(r.apiUrl,r.authProvider,e);return r.setClient(t,e),t},this.getStoredClient=function(e){return void 0===e?r.clientForAbsentCollection:r.clients[e]},this.setClient=function(e,t){return void 0===t?void(r.clientForAbsentCollection=e):void(r.clients[t]=e)}};t.MediaClientPool=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(51),c=n(83),l=n(269),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"createUpload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={httpMethod:"POST",mediaApiMethod:"upload",parameters:{createUpTo:t,safariCacheBuster:u.v4()}};return l.retryTask(function(){return e.call(n,c.addAuthToQueryParameters).then(function(e){var t=e.data;if(0===t.length)throw new Error("No uploads were created");return t})},5,1e3,2)}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i={httpMethod:"PUT",mediaApiMethod:"upload/"+t+"/chunks",data:{chunks:n,offset:r}};return e.call(i)}},{key:"createFileFromUpload",value:function(e,t,n,r,i){var o={httpMethod:"POST",mediaApiMethod:"file/upload",parameters:i?{collection:i}:{},data:{name:t,mimeType:n,uploadId:r}};return e.call(o).then(function(e){return e.data.id})}},{key:"pollForFileMetadata",value:function(e,t,n){var r={httpMethod:"GET",mediaApiMethod:"file/"+t,parameters:n?{collection:n}:{}};return l.retryTask(function(){return e.call(r,c.addAuthToQueryParameters).then(function(e){var t=e.data;if("succeeded"===t.processingStatus||"failed"===t.processingStatus)return t;throw new Error("Processing not finished")})},10,1e3,2)}}]),e}();t.MediaApi=f},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new o.default(function(i,o){!function t(n,a){n>0?e().then(i).catch(function(e){setTimeout(function(){t(n-1,a*r)},a)}):e().then(i).catch(o)}(t,n)})}var i=n(21),o=function(e){return e&&e.__esModule?e:{default:e}}(i);Object.defineProperty(t,"__esModule",{value:!0}),t.retryTask=r},function(e,t){e.exports={baseUrl:"http://localhost:8081",usingVersions:!1,html:{popup:"./html/popup.html",popupInject:"./html/popup/popup.html",dropzone:"./html/dropzone.html",redirectUrl:"./html/link-account-handler/handler.html",userMethodsHelperUrl:"./html/user-methods-helper/helper.html"},version:"11.1.11"}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(305);t.default=function(e){return new i.default(function(t,n){o.fileToBase64(e).then(function(e){var r=new Image;r.src=e,r.onload=function(){return t({src:r.src,width:r.width,height:r.height})},r.onerror=n})})}},function(e,t,n){n(273),n(274),n(289),n(293),e.exports=n(36).Promise},function(e,t){},function(e,t,n){"use strict";var r=n(275)(!0);n(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(84),i=n(85);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){e.exports=!n(37)&&!n(137)(function(){return 7!=Object.defineProperty(n(87)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(56);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";var r=n(280),i=n(138),o=n(90),a={};n(27)(a,n(8)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(28),i=n(281),o=n(142),a=n(89)("IE_PROTO"),s=function(){},u=function(){var e,t=n(87)("iframe"),r=o.length;for(t.style.display="none",n(143).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(55),i=n(28),o=n(282);e.exports=n(37)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(283),i=n(142);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(57),i=n(88),o=n(285)(!1),a=n(89)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(58);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(88),i=n(139),o=n(286);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(84),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(57),i=n(288),o=n(89)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(85);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(290);for(var r=n(13),i=n(27),o=n(38),a=n(8)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var r=n(291),i=n(292),o=n(38),a=n(88);e.exports=n(134)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,a=n(135),s=n(13),u=n(54),c=n(144),l=n(136),f=n(56),d=n(86),h=n(294),p=n(295),v=n(299),m=n(145).set,y=n(301)(),b=s.TypeError,g=s.process,_=s.Promise,g=s.process,w="process"==c(g),x=function(){},k=!!function(){try{var e=_.resolve(1),t=(e.constructor={})[n(8)("species")]=function(e){e(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),A=function(e,t){return e===t||e===_&&t===o},S=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return A(_,e)?new O(e):new i(e)},O=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},I=function(e){try{e()}catch(e){return{error:e}}},E=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&C(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(b("Promise-chain cycle")):(o=S(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){m.call(s,function(){var t,n,r,i=e._v;if(T(e)&&(t=I(function(){w?g.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=w||T(e)?2:1),e._a=void 0,t)throw t.error})},T=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!T(t.promise))return!1;return!0},C=function(e){m.call(s,function(){var t;w?g.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=S(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(M,r,1))}catch(e){M.call(r,e)}}):(n._v=e,n._s=1,E(n,!1))}catch(e){M.call({_w:n,_d:!1},e)}}};k||(_=function(e){h(this,_,"Promise","_h"),d(e),r.call(this);try{e(u(U,this,1),u(M,this,1))}catch(e){M.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(302)(_.prototype,{then:function(e,t){var n=P(v(this,_));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=w?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),O=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(M,e,1)}),l(l.G+l.W+l.F*!k,{Promise:_}),n(90)(_,"Promise"),n(303)("Promise"),o=n(36).Promise,l(l.S+l.F*!k,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!k),"Promise",{resolve:function(e){if(e instanceof _&&A(e.constructor,this))return e;var t=P(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(k&&n(304)(function(e){_.all(e).catch(x)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=I(function(){var n=[],o=0,a=1;p(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=I(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(54),i=n(296),o=n(297),a=n(28),s=n(139),u=n(298),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(28);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(38),i=n(8)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(144),i=n(8)("iterator"),o=n(38);e.exports=n(36).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(28),i=n(86),o=n(8)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(13),i=n(145).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(58)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(13),i=n(36),o=n(55),a=n(37),s=n(8)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(8)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBase64=function(e){return new i.default(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onabort=function(){return n("abort")},r.onerror=n,r.readAsDataURL(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var p=n(48),v=n(25),m=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.browseElem=document.createElement("INPUT"),i.browseElem.setAttribute("type","file"),i.browseElem.style.display="none",r.multiple&&i.browseElem.setAttribute("multiple",""),r.fileExtensions&&i.browseElem.setAttribute("accept",r.fileExtensions.join(",")),document.body.appendChild(i.browseElem),i.uploadService.addBrowse(i.browseElem),i.context.trackEvent(new v.MPBrowserLoaded),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"browse",value:function(){this.browseElem.click()}},{key:"teardown",value:function(){var e=this.browseElem.parentNode;e&&e.removeChild(this.browseElem)}}]),t}(p.MediaLocalUpload);t.Browser=m},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup{display:none;position:fixed;z-index:2147483647;left:0;top:0;width:100%;height:100%;background-color:rgba(9,30,66,.44);transition:opacity .2s;transition-delay:.1s}.mediaPickerPopup .aui-dialog2-header{height:50px!important}.mediaPickerPopup .aui-dialog2-content{padding:0!important;height:100%;position:relative!important;overflow:hidden!important}.mediaPickerPopup .aui-dialog2-content iframe{width:100%;height:100%;border-width:0;position:absolute}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=n(25),m=n(147),y=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return r.pasteHandler=function(e){for(var t=e.clipboardData.files,n=0;n<t.length;++n){var i=t[n];r.uploadService.addFile(i)}},r.context.trackEvent(new v.MPClipboardLoaded),r}return(0,h.default)(t,e),(0,c.default)(t,[{key:"activate",value:function(){var e=this;m(function(){e.deactivate(),document.addEventListener("paste",e.pasteHandler,!1)})}},{key:"deactivate",value:function(){document.removeEventListener("paste",this.pasteHandler)}}]),t}(p.MediaLocalUpload);t.Clipboard=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(16),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),d=n(19),h=r(d),p=n(20),v=r(p);Object.defineProperty(t,"__esModule",{value:!0}),n(310);var m=n(80),y=n(48),b=n(22),g=n(25),_=n(148),w=n(312),x=function(e){return[].slice.call(e,0)},k=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.default)(this,t);var i=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));i.onDragOver=function(e){if(e.preventDefault(),i.instance&&t.dragContainsFiles(e)){var n=e.dataTransfer,r=void 0;try{r=n.effectAllowed}catch(e){}n.dropEffect="move"===r||"linkMove"===r?"move":"copy",i.instance.classList.add("active");var o=i.getDraggedItemsLength(n);i.emitDragOver({length:o})}},i.onDragLeave=function(e){i.instance&&(e.preventDefault(),i.instance.classList.remove("active"),i.emitDragLeave())},i.onDrop=function(e){var n=i.instance;n&&t.dragContainsFiles(e)&&(n.classList.remove("active"),i.emit("drop",void 0),i.emitDragLeave())};var o=r;return i.container=o.container||document.body,i.headless=o.headless||!1,i.uiActive=!1,i.context.trackEvent(new g.MPDropzoneLoaded),i}return(0,v.default)(t,e),(0,f.default)(t,[{key:"activate",value:function(){var e=this;return w.whenDomReady.then(function(){if(e.container=e.container||document.body,!e.instance)return e.createInstance()}).then(function(){e.deactivate(),e.container.addEventListener("dragover",e.onDragOver,!1),e.container.addEventListener("dragleave",e.onDragLeave,!1),e.uploadService.addDropzone(e.container)})}},{key:"deactivate",value:function(){this.container.removeEventListener("dragover",this.onDragOver,!1),this.container.removeEventListener("dragleave",this.onDragLeave,!1),this.uploadService.removeDropzone()}},{key:"getDraggedItemsLength",value:function(e){return e.items?x(e.items).filter(function(e){return"file"===e.kind}).length:e.files.length}},{key:"createInstance",value:function(){var e=this;return this.getDropzoneUI().then(function(t){e.instance=t,e.container.appendChild(e.instance),e.uploadService.on("file-dropped",e.onDrop)})}},{key:"getDropzoneUI",value:function(){var e=this;return this.headless?o.default.resolve(document.createElement("DIV")):new o.default(function(t,n){return m.default.get(e.getStaticAssetUrl("dropzone")).then(function(e){t(_.parseHTML(e.data))},function(e){b.handleError("dropzone_load_fail",e),n(e)})})}},{key:"emitDragOver",value:function(e){this.uiActive||(this.uiActive=!0,this.emit("drag-enter",e))}},{key:"emitDragLeave",value:function(){var e=this;this.uiActive&&(this.uiActive=!1,window.setTimeout(function(){e.uiActive||e.emit("drag-leave",void 0)},50))}}],[{key:"dragContainsFiles",value:function(e){var t=e.dataTransfer.types;return x(t).indexOf("Files")>-1}}]),t}(y.MediaLocalUpload);t.Dropzone=k},function(e,t,n){var r=n(311);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerDropzone{position:fixed;left:0;top:0;width:100%;height:0;overflow:hidden;margin:auto;font-family:Source Sans Pro,Helvetica Neue,Helvetica,Arial,sans-serif;pointer-events:none}@keyframes atlassian-doc{0%{transform:rotate(0deg)}to{transform:rotate(-18deg)}}@keyframes spreadsheet{0%{transform:rotate(0deg)}to{transform:rotate(20deg)}}.mediaPickerDropzone .mp-content{width:100vw;height:100vh}.mediaPickerDropzone .mp-content .mp-circle{transition:width .2s ease,height .2s ease,top .2s ease,left .2s ease;width:0;height:0;transform:scale(1);background-color:#0052cc;border-radius:50%;margin:auto;position:absolute;overflow:hidden;color:#fff;top:50%;left:50%}.mediaPickerDropzone .mp-content .mp-circle .mp-title{font-weight:500;font-size:40px;margin-bottom:20px}.mediaPickerDropzone .mp-content .mp-circle .mp-description{font-size:16px;font-weight:500}.mediaPickerDropzone .mp-content .mp-circle .mp-text{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;left:0;right:0;top:130px;position:absolute;text-align:center}.mediaPickerDropzone .mp-content .mp-circle .mp-text span{display:block}.mediaPickerDropzone .mp-content .mp-circle .mp-fileIcon{width:auto;height:200px;position:absolute;bottom:0;margin:auto;transform-origin:bottom;left:150px}.mediaPickerDropzone.active{height:100%;background-color:hsla(0,0%,100%,.7);position:fixed;z-index:500}.mediaPickerDropzone.active .mp-circle{width:500px;height:500px;top:calc(50% - 250px);left:calc(50% - 250px)}.mediaPickerDropzone.active .mp-circle .mp-iconAtlassianDoc{left:100px;width:183px;height:212px;bottom:-15px;animation:atlassian-doc .75s .2s forwards}.mediaPickerDropzone.active .mp-circle .mp-iconOtherDoc{left:170px;z-index:1;width:173px;height:224px}.mediaPickerDropzone.active .mp-circle .mp-iconPageSpreadsheet{left:250px;animation:spreadsheet .75s .2s forwards}",""])},function(e,t,n){"use strict";var r=n(21),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.whenDomReady=function(){return"complete"===document.readyState?i.default.resolve():new i.default(function(e){window.addEventListener("load",e)})}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.id,n=e.name,r=e.size,i=e.creationDate,o=e.type,a=e.publicId;return new S.MediaFile(t,n,r,i,o,a)}var o=n(21),a=r(o),s=n(50),u=r(s),c=n(16),l=r(c),f=n(0),d=r(f),h=n(1),p=r(h),v=n(19),m=r(v),y=n(20),b=r(y);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var g=n(51),_=n(132),w=n(314),x=n(22),k=n(315),A=n(25),S=n(129),P=n(128),O=n(131),I=n(147),E=n(148),j=n(316);t.USER_RECENTS_COLLECTION="recents";var T=function(e){function t(e,n,r){var i=r.userAuthProvider,o=r.container;(0,d.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.config=n,a.context.trackEvent(new A.MPPopupLoaded),a.uploadParams=(0,u.default)({},O.defaultUploadParams,n.uploadParams),a.userAuthProvider=i,a.container=o||document.body,I(function(){a.init()}),a}return(0,b.default)(t,e),(0,p.default)(t,[{key:"init",value:function(){this.popupReady=!1;var e=g.v4(),t={channelName:e,apiUrl:this.config.apiUrl,redirectUrl:this.getStaticAssetUrl("redirectUrl")};this.instance=this._createInstance(t),this.container.appendChild(this.instance),this.popupIframe=this._createInteractionLayer(e)}},{key:"show",value:function(){var e=this;return this.instance||this.init(),this.config.authProvider({collectionName:this.uploadParams.collection}).then(function(t){return e.popupIframe.setTenant({auth:t,uploadParams:e.uploadParams}),e.popupIframe.resetView(),e._show(),a.default.resolve()})}},{key:"cancel",value:function(e){this.popupIframe.cancelUpload(e)}},{key:"teardown",value:function(){this.instance&&(this.instance.parentNode&&this.instance.parentNode.removeChild(this.instance),delete this.instance),this.localFileBrowser&&this.localFileBrowser.teardown()}},{key:"hide",value:function(){this.instance&&(this.instance.style.display="none"),this.emit("closed",void 0),this.context.trackEvent(new A.MPPopupHidden)}},{key:"setUploadParams",value:function(e){this.uploadParams=(0,u.default)({},O.defaultUploadParams,e)}},{key:"_show",value:function(){this.popupReady&&(this.instance.style.display="block",this.context.trackEvent(new A.MPPopupShown))}},{key:"_createInstance",value:function(e){var t=e.apiUrl,n=e.channelName,r=e.redirectUrl,i="?channelName="+encodeURIComponent(n)+"&apiUrl="+encodeURIComponent(t)+"&redirectUrl="+encodeURIComponent(r);return E.parseHTML('<div class="mediaPickerPopup mpAUI">\n        <section role="dialog" id="demo-dialog" class="aui-layer aui-dialog2 aui-dialog2-large" aria-hidden="false">\n            <div class="aui-dialog2-content">\n                <iframe class="mpApp" src="'+this.getStaticAssetUrl("popupInject")+i+'"></iframe>\n            </div>\n        </section>\n      </div>')}},{key:"_createInteractionLayer",value:function(e){var t=this,n=this.instance.querySelector(".mpApp"),r=n.contentWindow,o=w({window:r,scope:e});this.messageService=new j.PostisMessageService(o),this.messageService.handle("uploadFinalizeReady",function(e){return new a.default(function(n){t.emitUploadFinalizeReady(i(e),function(){return n()})})}),this.messageService.handle("getUserAuth",function(e){return t.userAuthProvider(e)});var s=new k.InteractionLayer(this,o);return s.on("uploadEvent",function(e){switch(e.name){case"upload-start":t.emitUploadStart(i(e.data.file));break;case"upload-status-update":t.emitUploadProgress(i(e.data.file),e.data.progress);break;case"upload-preview-update":var n=e.data,r=n.file,o=n.preview;t.emitUploadPreviewUpdate(i(r),o);break;case"upload-processing":t.emitUploadProcessing(i(e.data.file));break;case"upload-end":t.emitUploadEnd(i(e.data.file),e.data.public);break;case"upload-error":var a=e.data,s=a.file,u=a.error;t.emitUploadError(i(s),new P.MediaError(u.fileId,u.name,u.description)),x.handleError(u.name,u.description)}}),s.on("ready",function(){t.emit("ready",void 0),t.popupReady=!0}),s.initProtocol(),s}}]),t}(_.MPComponent);t.Popup=T},function(e,t){function n(e){var t,n=e.scope,r=e.window,i=e.windowForEventListening||window,o={},a=[],s={},u=!1,c=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(t.postis&&t.scope===n){var r=o[t.method];if(r)for(var i=0;i<r.length;i++)r[i].call(null,t.params);else s[t.method]=s[t.method]||[],s[t.method].push(t.params)}};i.addEventListener("message",c,!1);var l={listen:function(e,t){o[e]=o[e]||[],o[e].push(t);var n=s[e];if(n)for(var r=o[e],i=0;i<r.length;i++)for(var a=0;a<n.length;a++)r[i].call(null,n[a]);delete s[e]},send:function(e){var t=e.method;(u||"__ready__"===e.method)&&r&&"function"==typeof r.postMessage?r.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):a.push(e)},ready:function(e){u?e():setTimeout(function(){l.ready(e)},50)},destroy:function(e){clearInterval(t),u=!1,i&&"function"==typeof i.removeEventListener&&i.removeEventListener("message",c),e&&e()}},f=+new Date+Math.random()+"";return t=setInterval(function(){l.send({method:"__ready__",params:f})},50),l.listen("__ready__",function(e){if(e===f){clearInterval(t),u=!0;for(var n=0;n<a.length;n++)l.send(a[n]);a=[]}else l.send({method:"__ready__",params:e})}),l}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(77),c=function(){function e(t,n){(0,o.default)(this,e),this.popup=t,this.channel=n,this.sanitizeUploadParams=function(e){return{collection:e.collection,fetchMetadata:e.fetchMetadata,autoFinalize:e.autoFinalize}},this.emitter=new u.EventEmitter2}return(0,s.default)(e,[{key:"initProtocol",value:function(){var e=this;this.channel.ready(function(){e.channel.listen("hidePopup",function(){e.popup.hide()}),e.channel.listen("showPopup",function(){e.popup.show()}),e.channel.listen("ready",function(){e.emit("ready",void 0)}),e.channel.listen("uploadEvent",function(t){e.emit("uploadEvent",t.event)})})}},{key:"resetView",value:function(){this.channel.send({method:"resetView"})}},{key:"cancelUpload",value:function(e){this.channel.send({method:"cancelUpload",params:{uploadId:e}})}},{key:"setTenant",value:function(e){var t=e.auth,n=e.uploadParams;this.channel.send({method:"setTenant",params:{auth:t,uploadParams:this.sanitizeUploadParams(n)}})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"emit",value:function(e,t){this.emitter.emit(e,t)}}]),e}();t.InteractionLayer=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(115);n(317),n(318);var f=n(51),d=function(){function e(t){(0,s.default)(this,e),this.channel=t,this.requests=this.observeChannelRequests(t),this.responses=this.observeChannelResponses(t)}return(0,c.default)(e,[{key:"post",value:function(e){var t=this;return new o.default(function(n,r){var i=f.v4(),o=t.responses.filter(function(e){return e.traceId===i}).subscribe({next:function(e){var t=e.response,i=e.error;i?r(i):n(t),o.unsubscribe()}});t.channel.send({method:"REQUEST",params:{traceId:i,message:e}})})}},{key:"handle",value:function(e,t){var n=this;this.requests.filter(function(t){return t.message.type===e}).subscribe({next:function(e){var r=e.traceId,i=e.message;t(i.payload).then(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,response:e}})}).catch(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,error:e}})})}})}},{key:"observeChannelRequests",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("REQUEST",function(e){t.next(e)})}),t}},{key:"observeChannelResponses",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("RESPONSE",function(e){t.next(e)})}),t}}]),e}();t.PostisMessageService=d},function(e,t){e.exports=n(73)},function(e,t){e.exports=n(75)}]))},function(e,t,n){"use strict";var r=n(27),i=n(28),o=n(39),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=a},function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof e&&e,o=n||i||r;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(a.empty)}var i=n(29),o=n(38),a=n(37);t.toSubscriber=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=n(31),a=n(37),s=n(38),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),
this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(o.Subscription);t.Subscriber=u;var c=function(e){function t(t,n,r,o){e.call(this),this._parentSubscriber=t;var s,u=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t){"use strict";function n(e){return"function"==typeof e}t.isFunction=n},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=n(32),o=n(33),a=n(30),s=n(34),u=n(35),c=n(36),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,f=n._parents,d=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=f?f.length:0;l;)l.remove(this),l=++p<v&&f[p]||null;if(a.isFunction(d)){var m=s.tryCatch(d).call(this);m===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?r(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(h))for(p=-1,v=h.length;++p<v;){var y=h[p];if(o.isObject(y)){var m=s.tryCatch(y.unsubscribe).call(y);if(m===u.errorObject){t=!0,e=e||[];var b=u.errorObject.e;b instanceof c.UnsubscriptionError?e=e.concat(r(b.errors)):e.push(b)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?r.indexOf(e)===-1&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e}t.isObject=n},function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,r}var o,a=n(35);t.tryCatch=i},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=r},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(27),i=r.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(27);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(26),i=n(41);r.Observable.prototype.publishReplay=i.publishReplay},function(e,t,n){"use strict";function r(e,t,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),o.multicast.call(this,new i.ReplaySubject(e,t,n))}var i=n(42),o=n(55);t.publishReplay=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(43),o=n(46),a=n(31),s=n(53),u=n(44),c=n(45),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new f(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject);t.ReplaySubject=l;var f=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(29),a=n(31),s=n(44),u=n(45),c=n(38),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.Observable);t.Subject=f;var d=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(f);t.AnonymousSubject=d},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(31),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(i.Subscription);t.SubjectSubscription=o},function(e,t,n){"use strict";var r=n(47),i=n(50);t.queue=new i.QueueScheduler(r.QueueAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(48),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i.AsyncAction);t.QueueAction=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(27),o=n(49),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);t.AsyncAction=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(31),o=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);t.Action=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(51),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(i.AsyncScheduler);t.QueueScheduler=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(52),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(i.Scheduler);t.AsyncScheduler=o},function(e,t){"use strict";var n=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29),a=n(54);t.observeOn=r;var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var u=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(o.Subscriber);t.ObserveOnSubscriber=u;var c=function(){function e(e,t){this.notification=e,this.destination=t}return e}();t.ObserveOnMessage=c},function(e,t,n){"use strict";var r=n(26),i=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",(void 0),t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",(void 0)),e}();t.Notification=i},function(e,t,n){"use strict";function r(e,t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new o(n,t));var r=Object.create(this,i.connectableObservableDescriptor);return r.source=this,r.subjectFactory=n,r}var i=n(56);t.multicast=r;var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();t.MulticastOperator=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(43),o=n(26),a=n(29),s=n(31),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.Subscription,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new f(this))},t}(o.Observable);t.ConnectableObservable=u;var c=u.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var l=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),f=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new d(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},t}(a.Subscriber)},function(e,t,n){"use strict";var r=n(26),i=n(58);r.Observable.of=i.of},function(e,t,n){"use strict";var r=n(59);t.of=r.ArrayObservable.of},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(60),a=n(61),s=n(62),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new o.ScalarObservable(e[0],r):new a.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;return n>=r?void i.complete():(i.next(t[n]),void(i.closed||(e.index=n+1,this.schedule(e))))},t.prototype._subscribe=function(e){var n=0,r=this.array,i=r.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:r,index:n,count:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;return t?void r.complete():(r.next(n),void(r.closed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e}):(e.next(n),void(e.closed||e.complete()))},t}(i.Observable);t.ScalarObservable=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;return n?n.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(i.Observable);t.EmptyObservable=o},function(e,t){"use strict";function n(e){return e&&"function"==typeof e.schedule}t.isScheduler=n},function(e,t,n){"use strict";var r=n(26),i=n(64);r.Observable.prototype.startWith=i.startWith},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return 1===r?s.concatStatic(new o.ScalarObservable(e[0],n),this):r>1?s.concatStatic(new i.ArrayObservable(e,n),this):s.concatStatic(new a.EmptyObservable(n),this)}var i=n(59),o=n(60),a=n(61),s=n(65),u=n(62);t.startWith=r},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(i.apply(void 0,[this].concat(e)))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,r=e;return a.isScheduler(r[e.length-1])&&(n=r.pop()),null===n&&1===e.length&&e[0]instanceof o.Observable?e[0]:new s.ArrayObservable(e,n).lift(new u.MergeAllOperator(1))}var o=n(26),a=n(62),s=n(59),u=n(66);t.concat=r,t.concatStatic=i},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(67),a=n(68);t.mergeAll=r;var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.concurrent))},e}();t.MergeAllOperator=s;var u=function(e){function t(t,n){e.call(this,t),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);t.MergeAllSubscriber=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);t.OuterSubscriber=o},function(e,t,n){"use strict";function r(e,t,n,r){var d=new l.InnerSubscriber(e,n,r);if(d.closed)return null;if(t instanceof u.Observable)return t._isScalar?(d.next(t.value),d.complete(),null):t.subscribe(d);if(o.isArrayLike(t)){for(var h=0,p=t.length;h<p&&!d.closed;h++)d.next(t[h]);d.closed||d.complete()}else{if(a.isPromise(t))return t.then(function(e){d.closed||(d.next(e),d.complete())},function(e){return d.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),d;if(t&&"function"==typeof t[c.iterator])for(var v=t[c.iterator]();;){var m=v.next();if(m.done){d.complete();break}if(d.next(m.value),d.closed)break}else if(t&&"function"==typeof t[f.observable]){var y=t[f.observable]();if("function"==typeof y.subscribe)return y.subscribe(new l.InnerSubscriber(e,n,r));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var b=s.isObject(t)?"an invalid object":"'"+t+"'",g="You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(g))}}return null}var i=n(27),o=n(69),a=n(70),s=n(33),u=n(26),c=n(71),l=n(72),f=n(39);t.subscribeToResult=r},function(e,t){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=n},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(27);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);t.InnerSubscriber=o},function(e,t,n){"use strict";var r=n(26),i=n(74);r.Observable.prototype.filter=i.filter},function(e,t,n){"use strict";function r(e,t){return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29);t.filter=r;var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(o.Subscriber)},function(e,t,n){"use strict";var r=n(26),i=n(76);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29);t.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.on("upload-start",function(e){return u.default.publish(f+"new",e)}),e.on("upload-preview-update",function(e){return u.default.publish(f+"preview",e)}),e.on("upload-status-update",function(e){return u.default.publish(f+"progress",e)}),e.on("upload-error",function(e){return u.default.publish(f+"error",e)}),e.on("upload-processing",function(e){return u.default.publish(f+"done",e)}),e.on("upload-end",function(e){return u.default.publish(f+"done",e)}),u.default.subscribe(f+"cancel",function(t){e.cancel&&e.cancel(t)}),e}function o(e){return u.default.subscribe("issue/changed",function(t){l.default.getUploadParameters().then(e.setUploadParams.bind(e))}),e}function a(e){return u.default.subscribe("project/changed",function(t){l.default.getTemporaryAttachmentUploadParameters(t).then(e.setUploadParams.bind(e))}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.connect=i,t.connectToIssueChanges=o,t.connectToProjectChanges=a;var s=n(10),u=r(s),c=n(3),l=r(c),f="upload/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(16),s=r(a),u=n(10),c=r(u),l=n(20),f=r(l);t.default=function(e,t,n,r,a){var u="create-issue/drop-zone",l=(0,o.temporaryAttachmentDropzone)(e,r).then(function(e){return e.on("drop",function(){s.default.triggerAttachRequested(u)}),e}),d=!1;return{activate:function(){return l.then(function(r){d||(d=!0,r.activate(),c.default.publish("upload/switch-context",{name:u,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},a)}),c.default.publish("project/changed",e))})},deactivate:function(){return l.then(function(e){d&&(e.deactivate(),d=!1)})},drop:function(){return l.catch(function(e){s.default.triggerInitialisationException((0,f.default)(e)),c.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(80),o=r(i),a=n(20),s=r(a),u=n(16),c=r(u),l=n(10),f=r(l),d=n(83),h=r(d),p="jira.issue.media-picker.show",v={
blockWikiEditorMarkupInsert:!1},m=void 0,y=function(e){var t="view-issue/"+e;return(0,o.default)().then(function(e){m=e}).catch(function(e){c.default.triggerInitialisationException((0,s.default)(e))}),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;n&&n.preventDefault(),h.default.start({key:p,isInitial:!1,threshold:250}),c.default.triggerAttachRequested(e),m?m.show().then(function(){return h.default.end({key:p})}).then(function(){return f.default.publish("upload/switch-context",{name:t,uploadSettings:r})}).catch(function(){f.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")}):c.default.triggerUploadRequestedWhenNotInitialised()}};t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(81),a=r(o),s=n(82),u=r(s),c=n(7),l=r(c),f=function(){return u.default.then(function(){return new a.default(i.popup,i.browser)})};t.default=l.default.memoize(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(16),u=r(s),c=n(20),l=r(c),f=n(3),d=r(f),h=function(){function e(t,n){var r=this;i(this,e);var o=d.default.userAuthProvider;o().then(function(e){e?r.componentPromise=t(o).then(function(e){return[e,"popup"]}).catch(function(e){return e.logged||u.default.triggerGenericPopupInitialisationError((0,l.default)(e)),n().then(function(e){return[e,"browser"]})}).then(r.handleComponentInitSuccess.bind(r)).catch(r.handleComponentInitFailure.bind(r)):r.componentPromise=r.initializeBrowser.call(r,n)})}return a(e,[{key:"initializeBrowser",value:function(e){return e().then(function(e){return[e,"browser"]}).then(this.handleComponentInitSuccess.bind(this)).catch(this.handleComponentInitFailure.bind(this))}},{key:"handleComponentInitSuccess",value:function(e){var t=o(e,2),n=t[0],r=t[1];return this.mediaComponent=n,this.componentType=r,[n,r]}},{key:"handleComponentInitFailure",value:function(e){u.default.triggerInitialisationException((0,l.default)(e)),this.componentType="none"}},{key:"show",value:function(){var e=this;switch(this.componentType){case"browser":return this.showBrowser();case"popup":return this.showPopup();case"none":return Promise.reject("Component initialisation error");default:return d.default.userAuthProvider().then(function(){return e.componentPromise}).then(function(){return"popup"===e.componentType?e.showPopup():(u.default.triggerBrowserRequestedWhenNotInitialised(),Promise.resolve())})}}},{key:"showPopup",value:function(){return this.mediaComponent.show().then(function(){return u.default.triggerPopupShown()}).catch(function(e){return u.default.triggerPopupFailedToShow((0,l.default)(e)),Promise.reject(e)})}},{key:"showBrowser",value:function(){var e=this;return new Promise(function(t,n){try{e.mediaComponent.browse(),u.default.triggerAttachFileBrowserShown(),t()}catch(e){u.default.triggerAttachFileBrowserFailedToShow((0,l.default)(e)),n(e)}})}}]),e}();t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Promise(function(e,t){"undefined"==typeof document?t("Document is not available"):/^loaded|^interactive|^complete/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(t){return e()})})},function(e,t){e.exports=require("internal/browser-metrics")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return _||(0,u.default)(e).then(function(e){_=e}).catch(function(e){d.default.triggerInitialisationException((0,l.default)(e))}),p.default.publish("project/changed",e),function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return r&&r.preventDefault(),m.default.start({key:y,isInitial:!1,threshold:250}),d.default.triggerAttachRequested(b),_?(i=a({},i,{projectId:e,formToken:t,panelNode:n}),p.default.publish("project/changed",e),_.show().then(function(){return m.default.end({key:y})}).then(function(){return p.default.publish("upload/switch-context",{name:b,uploadSettings:i})}).catch(function(){p.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})):void d.default.triggerUploadRequestedWhenNotInitialised()}}function o(){_=null}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i,t.resetMediaComponent=o;var s=n(85),u=r(s),c=n(20),l=r(c),f=n(16),d=r(f),h=n(10),p=r(h),v=n(83),m=r(v),y="jira.create.issue.media-picker.show",b="create-issue/link",g={blockWikiEditorMarkupInsert:!1},_=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(81),a=r(o),s=n(82),u=r(s),c=n(7),l=r(c),f=function(e){var t=(0,i.temporaryAttachmentPopup)(e),n=(0,i.temporaryAttachmentBrowser)(e);return u.default.then(function(){return new a.default(t,n)})};t.default=l.default.memoize(f)},function(e,t){e.exports=require("dndattachment/integration-register")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(3),a=r(o),s=n(88),u=r(s),c=n(16),l=r(c),f=n(20),d=r(f),h=n(89),p=r(h);t.default=function(e,t,n,r){var o="view-issue/attach-screenshot",s=p.default.Deferred();(0,i.binary)(e).then(function(t){return t.on("upload-start",function(e){s.notify("init"),l.default.triggerUploadStarted(e.file.id,e.file.size)}),t.on("upload-status-update",function(e){s.notify({loaded:e.progress.absolute,total:e.progress.max})}),t.on("upload-end",function(t){return a.default.createTemporaryAttachment(e,t.file.publicId,r).then(function(e){s.resolve({id:e.attachmentId})})}),t.on("upload-processing",function(e){s.notify({loaded:e.absolute,total:e.max})}),t.on("upload-error",function(e){s.reject(null,e.name,e.description,{}),l.default.triggerUploadError(e.name,e.fileId)}),t}).then(function(e){return l.default.triggerAttachRequested(o),(0,u.default)(t).then(function(t){e.upload(t,n)})}).catch(function(e){return l.default.triggerInitialisationException((0,d.default)(e))});return s}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(){n(this)},r.readAsDataURL(e)})}},function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(88),s=r(a),u=n(10),c=r(u),l=n(16),f=r(l),d=n(20),h=r(d),p={blockWikiEditorMarkupInsert:!0},v=function(e,t,n){var r="create-issue/attach-screenshot",a=(0,o.connectedTemporaryBinary)(e).catch(function(e){f.default.triggerInitialisationException((0,h.default)(e))});return function(o){return a.then(function(a){return(0,s.default)(o).then(function(s){f.default.triggerAttachRequested(r),c.default.publish("project/changed",e),c.default.publish("upload/switch-context",{name:r,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},p)}),a.upload(s,o.name)})}).catch(function(){c.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}};t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(10),a=r(o),s=n(92),u=r(s),c=n(109),l=r(c);n(24),t.default=function(){a.default.subscribe("upload/new",function(e){var t=e.file;u.default.startUpload(t)}),a.default.subscribe("upload/preview",function(e){var t=e.file,n=e.preview,r=l.default.decodeBase64DataUri(n.src),i=new Blob([r],{type:t.type});i.name=t.name,u.default.updatePreview(t,i)}),a.default.subscribe("upload/progress",function(e){var t=e.file,n=e.progress;u.default.progress(t,n)}),a.default.subscribe("upload/error",function(e){var t=e.error;t.isMediaError=!0,u.default.error(t)}),a.default.subscribe("upload/done",function(e){var t=e.file.publicId?e.file:i({},e.file,{publicId:e.public.id});u.default.done(t)}),a.default.subscribe("media/error",u.default.globalError)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(93),s=r(a),u=n(99),c=r(u),l=n(101),f=r(l),d=n(102),h=r(d),p=n(11),v=r(p),m=n(9),y=r(m),b=n(3),g=r(b),_=n(104),w=r(_),x=n(10),k=r(x),A=n(105),S=r(A),P=n(16),O=r(P),I=n(107),E=r(I),j=n(108),T=r(j),C=new Map,M=function(e){return e&&0===e.indexOf("create-issue")};t.default={startUpload:function(e){var t=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1};O.default.triggerUploadStarted(e.id,e.size);var n=this._createUpload(e);C.set(e.id,n),t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e),n.then(function(e){var t=e.view,n=e.uploadContext,r=e.uploadSettings;M(n)?f.default.insertUpload(r.panelNode,t.$node):c.default.insertUpload(t.$node)}),this._validate(e)},updatePreview:function(e,t){t&&C.get(e.id)&&C.get(e.id).then(function(e){e.preview=t,e.view.loadThumbnail(t)})},progress:function(e,t){C.get(e.id)&&C.get(e.id).then(function(e){var n=e.view;return n.progress(t.portion)})},error:function(e){e.fileId&&C.get(e.fileId)&&C.get(e.fileId).then(function(t){var n=t.view,r=t.file,i=t.uploadContext,o=t.uploadSettings;e.logged||O.default.triggerUploadError(e.description,e.fileId),e.isMediaError&&(e.description="We could not connect to the file storage service. Please try again in a moment."),n.fail(e),M(i)||c.default.uploadError(r.name,e.description,function(){n.destroy(),C.delete(r.id)}),o.onFileUploadFinished&&o.onFileUploadFinished.call(r,r)})},globalError:function(e){c.default.globalError(e)},done:function(e){var t=this;O.default.triggerFileUploadFinished(e.id),C.get(e.id).then(function(n){var r=n.view,i=n.uploadContext,o=n.uploadSettings;return r.done(),M(i)?t.createTemporaryAttachment(e,o):t.createAttachment(o.issueId,e)})},createTemporaryAttachment:function(e,t){var n=this;Promise.all([t.projectId,t.formToken]).then(function(t){var n=o(t,2),r=n[0],i=n[1];if(!r||!i)throw new Error("Missing form data associated with upload");return g.default.createTemporaryAttachment(r,e.publicId,i)}).then(this.temporaryAttachmentCreated.bind(this,e)).catch(function(t){var r=t.message;O.default.triggerCantCreateTemporaryAttachmentInJIRA(r,e.id),n.error({fileId:e.id,description:r||"Couldn't create attachment"})})},createAttachment:function(e,t){var n=this;g.default.createAttachment(e,t.publicId).then(this.attachmentCreated.bind(this,t)).catch(function(e){var r=e.message;O.default.triggerCantCreateAttachmentInJIRA(r,t.id),n.error({fileId:t.id,description:r||"Couldn't create attachment"})})},attachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(r){var i=r.view,o=r.wikiFieldsContext,a=r.issueLinkHTML,s=r.uploadSettings;O.default.triggerAttachmentCreatedInJIRA(e.id),n.updateViewWithCreatedAttachment(e,t,i,s.issueId,o),c.default.notifyUserOfCreatedAttachment(e,a),C.delete(e.id)})},temporaryAttachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(e){var r=e.view,i=e.wikiFieldsContext,o=e.uploadSettings,a=e.preview,s=e.file;O.default.triggerTemporaryAttachmentCreatedInJIRA(s.id),n.addAttachmentToDndStore(t.attachmentId,s,a),r.attachmentCreated(t.attachmentId),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,s.name),o.onFileUploadFinished&&o.onFileUploadFinished.call(s,s),C.delete(s.id)})},addAttachmentToDndStore:function(e,t,n){return T.default.putAttachment(e,n?n:t)},updateViewWithCreatedAttachment:function(e,t,n,r,i){var o=h.default.create(e,t,{viewType:c.default.getViewType(),issueId:r});n.$node.replaceWith(o),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,e.name)},cancel:function(e){C.has(e.id)&&C.get(e.id).then(function(t){var n=t.uploadSettings;O.default.triggerUploadCancelled(e.id),k.default.publish("upload/cancel",e.id),C.delete(e.id),n.onFileUploadFinished&&onFileUploadFinished.call(e,e)})},_createUpload:function(e){var t=this,n=y.default.getUploadContextName(),r=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1},o=void 0;return o=M(n)?Promise.resolve(r):v.default.getIssueId().then(function(e){return i({},r,{issueId:e})}),o.then(function(r){var i=S.default.getWikiFieldsContextInformation(),o=void 0;i&&i.isWikiFieldFocused&&r.blockWikiEditorMarkupInsert&&(i.isWikiFieldFocused=!1),o=M(n)?s.default.createIssue(e,{},function(){t.cancel(e)}):s.default.viewIssue(e,{viewType:c.default.getViewType()},function(){t.cancel(e)});var a=v.default.getIssuePermlink(),u=v.default.getIssueKey(),l=E.default.getHtml(u,a);return{view:o,file:e,wikiFieldsContext:i,issueLinkHTML:l,uploadContext:n,uploadSettings:r}})},_validate:function(e){var t=w.default.validateFile(e),n=t.valid,r=t.message;n||(O.default.triggerUploadValidationFailed(r,e.id),this.error({fileId:e.id,description:r,logged:!0}),k.default.publish("upload/cancel",e.id))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(94),o=r(i),a=n(98),s=r(a);t.default={viewIssue:function(e,t,n){return new o.default(e,t,n)},createIssue:function(e,t,n){return new s.default(e,t,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(95),s=r(a),u=n(96),c=r(u),l=n(97),f=r(l),d=n(89),h=r(d),p=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="attachments-upload-progress-bar"/>'),this.$node.data("viewMode",this.context.viewType),this.render()}return o(e,[{key:"render",value:function(){var e=s.default.AttachmentsUploadProgressBar({isImageType:"gallery"===this.context.viewType});"list"===this.context.viewType&&this.$node.addClass("attachment-content"),this.$node.html(e),this.renderFileProperties()}},{key:"renderFileProperties",value:function(){var e=this;"gallery"==this.context.viewType?(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode):(0,h.default)(c.default.renderAttachmentIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__upload-control span").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size))}},{key:"loadThumbnail",value:function(e){if("gallery"===this.context.viewType){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.$node.find(".upload-progress-bar__upload-control").hide(),this.$node.addClass("upload-progress-bar__upload-finished")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%")}},{key:"destroy",value:function(){this.$node.remove()}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=p},function(e,t){e.exports=JIRA.Templates.DnDAttachmentPlugin},function(e,t){e.exports=JIRA.Templates.ViewIssue},function(e,t){"use strict";function n(e){var t=e/a;return t.toFixed(2)+u}function r(e){var t=Math.round(e/o);return t+s}function i(e){var t=e/o;return t.toFixed(1)+s}Object.defineProperty(t,"__esModule",{value:!0});var o=1024,a=o*o,s=" kB",u=" MB";t.default=function(e){return e>a?n(e):e>o?r(e):i(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(95),s=r(a),u=n(96),c=r(u),l=n(97),f=r(l),d=n(89),h=r(d),p=["aui-iconfont-close-dialog","aui-iconfont-success","aui-iconfont-error"],v=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="upload-progress-bar"/>'),this.render()}return o(e,[{key:"render",value:function(){var e=this,t=s.default.UploadProgressBar({isImageType:!0});this.$node.html(t),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__control button").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size)),(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.thumbnailNode.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui")}},{key:"loadThumbnail",value:function(e){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.setIcon("aui-iconfont-success"),this.progress(1)}},{key:"attachmentCreated",value:function(e){this.$checkbox=(0,h.default)('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",e).attr("id","filetoconvert-"+e).prop("checked",!0).insertBefore(this.$node),this.$node.addClass("upload-progress-bar__upload-ready").addClass("upload-progress-bar__upload-finished"),this.setIcon("aui-iconfont-close-dialog")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%"),this.$node.find(".upload-progress-bar__error-message").text(e.description)}},{key:"destroy",value:function(){this.$checkbox&&this.$checkbox.prop("checked",!1).prop("value",null),this.$node.remove()}},{key:"setIcon",value:function(e){var t=this.$node.find(".upload-progress-bar__control button .aui-icon");p.forEach(function(n){t.toggleClass(n,n===e)})}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(100),s=r(a),u="#file_attachments, #attachment_thumbnails",c=function(){return(0,o.default)(u)};t.default={getViewType:function(){return"file_attachments"===c().attr("id")?"list":"gallery"},insertUpload:function(e){if(0===c().length)throw new Error("Attachment List is not present");c().prepend(e)},uploadError:function(e,t,n){var r=s.default.showErrorMsg(AJS.format("\"{0}\" was not uploaded.",AJS.escapeHtml(e)),AJS.escapeHtml(t));(0,o.default)(r).on("aui-flag-close",n)},globalError:function(e){return s.default.showErrorMsg("Cannot upload attachments",AJS.escapeHtml(e))},notifyUserOfCreatedAttachment:function(e,t){s.default.showSuccessMsg("",AJS.format("{0} was attached successfully to {1}.",AJS.escapeHtml(e.name),t))}}},function(e,t){e.exports=require("jira/flag")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i);t.default={insertUpload:function(e,t){var n=(0,o.default)(e);if(0===n.length)throw new Error("Cannot find temp attachment dropzone");n.after((0,o.default)(t))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(96),o=r(i),a=n(8),s=r(a),u=n(97),c=r(u),l=n(103),f=n(89),d=r(f),h=function(){return"undefined"==typeof window?"":window&&window.location&&window.location.origin}(),p=(0,s.default)(),v=""+h+p,m=function(e){return encodeURIComponent(e)},y=function(e,t){var n=m(e.name);return"secure/attachment/"+t.attachmentId+"/"+n},b=function(e,t){var n=m(e.name);return(0,l.isImageType)(e)?v+"/secure/thumbnail/"+t.attachmentId+"/"+n+"?default=false":null},g=function(e,t){var n=m(e.name);return t.expandable?null:v+"/secure/thumbnail/"+t.attachmentId+"/"+n};t.default={create:function(e,t,n){var r=[{id:t.attachmentId,attachmentUrl:y(e,t),thumbnailUrl:b(e,t),jiraThumbnailUrl:g(e,t),fileName:e.name,mimeType:e.type,expandable:t.expandable,deletable:t.deletable,fileSize:(0,c.default)(e.size),createdIso8601:e.creationDate,createdDateTime:e.creationDate}];return(0,d.default)(o.default.renderAttachments({baseurl:p,fullBaseUrl:v,issue:{id:n.issueId},attachments:r,viewMode:n.viewType})).find(".attachment-content")}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=u.default.getThumbnailMimeType().split(",");return e&&e.type&&a.default.contains(t,e.type)}Object.defineProperty(t,"__esModule",{value:!0}),t.isImageType=void 0;var o=n(7),a=r(o),s=n(4),u=r(s);t.isImageType=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(97),o=r(i),a=n(4),s=r(a);t.default={validateFile:function(e){var t=this.fileNameContainsInvalidCharacter(e.name),n=void 0;return""!==t&&(n=AJS.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",e.name,t)),this.sizeExceedsMaximum(e.size)&&(n="File exceeds maximum size limit set by the administrator ({0}).".replace("{0}",(0,o.default)(s.default.getMaxFileSize()))),n?{valid:!1,message:n}:{valid:!0}},fileNameContainsInvalidCharacter:function(e){return s.default.getInvalidChars().reduce(function(t,n){return e.indexOf(n)!==-1?n:t},"")},sizeExceedsMaximum:function(e){return e>s.default.getMaxFileSize()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(106),s=r(a);t.default={getWikiFieldsContextInformation:function(){var e=(0,o.default)("textarea.wiki-textfield:visible:focus");return e?{isWikiFieldFocused:e.length>0,focusedField:e[0]}:void 0},insertWikiMarkup:function(e,t){var n=(0,o.default)(e);s.default.insertWikiMarkup(t,e,e.selectionStart,e.selectionStart),n.is(":focus")||n.focus()}}},function(e,t){e.exports=require("dndattachment/ctrlv/utility")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(95),s=r(a);t.default={getHtml:function(e,t){var n=(0,o.default)("#summary-val input"),r=(0,o.default)("#summary-val"),i=n&&n.attr("value")||r&&r.text();return s.default.SuccessMessageLink({issueLink:t,issueKey:e,issueSummary:i})}}},function(e,t){e.exports=require("dndattachment/TemporaryAttachments")},function(e,t){e.exports=require("dndattachment/ctrlv/base64decode")}]);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-expander', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/expander.js' */
("undefined"===typeof window?global:window).__1f32101163c43c11907101e4c1c0413f=function(){"use strict";var c=__307d3e18fd611f85395c67cddeb1fe24,d=c&&c.__esModule?c:{"default":c},e=(0,d.default)(document),f=function(a){var b={};b.$trigger=(0,d.default)(a.currentTarget);b.$content=e.find("#"+b.$trigger.attr("aria-controls"));b.triggerIsParent=0!==b.$content.parent().filter(b.$trigger).length;b.$shortContent=b.triggerIsParent?b.$trigger.find(".aui-expander-short-content"):null;b.height=b.$content.css("min-height");
b.isCollapsible=!1!==b.$trigger.data("collapsible");b.replaceText=b.$trigger.attr("data-replace-text");b.replaceSelector=b.$trigger.data("replace-selector");return b},g=function(a){if(a.replaceText){var b=a.replaceSelector?a.$trigger.find(a.replaceSelector):a.$trigger;a.$trigger.attr("data-replace-text",b.text());b.text(a.replaceText)}};e.on({"aui-expander-invoke":function(a){var a=(0,d.default)(a.currentTarget),b=e.find("#"+a.attr("aria-controls")),c=!1!==a.data("collapsible");"true"===b.attr("aria-expanded")&&
c?a.trigger("aui-expander-collapse"):a.trigger("aui-expander-expand")},"aui-expander-expand":function(a){a=f(a);"true"!==a.$content.attr("aria-expanded")&&(a.$content.attr("aria-expanded","true"),a.$trigger.attr("aria-expanded","true"),0<a.$content.outerHeight()&&a.$content.attr("aria-hidden","false"),g(a),a.triggerIsParent&&a.$shortContent.hide(),a.$trigger.trigger("aui-expander-expanded"))},"aui-expander-collapse":function(a){a=f(a);"true"===a.$content.attr("aria-expanded")&&(g(a),a.$content.attr("aria-expanded",
"false"),a.$trigger.attr("aria-expanded","false"),a.triggerIsParent&&a.$shortContent.show(),0===a.$content.outerHeight()&&a.$content.attr("aria-hidden","true"),a.$trigger.trigger("aui-expander-collapsed"))},"click.aui-expander":function(a){(0,d.default)(a.currentTarget).trigger("aui-expander-invoke",a.currentTarget)}},".aui-expander-trigger");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-constants', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/internal/constants.js' */
("undefined"===typeof window?global:window).__fa2d609d3773596cc2b702b68678a39c=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={INPUT_SUFFIX:"-input"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-toggle', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/toggle.js' */
("undefined"===typeof window?global:window).__1840a42d6d7e6ab244ecf3cf5bcc56cd=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function c(a){return a._input||(a._input=a.querySelector("input"))}function f(a,b){c(b).removeAttribute(a)}function h(a,b,d){c(b).setAttribute(a,d.newValue)}function i(a){return{removed:f.bind(this,a),fallback:h.bind(this,a)}}"use strict";__e573296a636ce4ee054d5d3b9c8823fb;__8a6820c3d0bc5d638a8490d849a5b750;var g=__29fa312a51517f20df339a1900640e1d,d=e(__307d3e18fd611f85395c67cddeb1fe24),
k=e(__8339408c10b0a9052af9f3aad7b3a4e8),l=e(__f52b7059926ab2bdcd0aee12b4bc782b),m=e(__c1ce1f1e3e613f564fc234ff043570f1),n=__fa2d609d3773596cc2b702b68678a39c,j={removed:function(a){f.call(this,"form",a);a._formId=null},fallback:function(a,b){h.call(this,"form",a,b);a._formId=b.newValue}},o={removed:f.bind(void 0,"id"),fallback:function(a,b){c(a).setAttribute("id",""+b.newValue+n.INPUT_SUFFIX)}};(0,m.default)("aui-toggle",{template:(0,l.default)('<input type="checkbox" class="aui-toggle-input">','<span class="aui-toggle-view">',
'<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(a){a._input=c(a);a._tick=a.querySelector(".aui-toggle-tick");a._cross=a.querySelector(".aui-toggle-cross");(0,d.default)(a._input).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1});a._input.addEventListener("keydown",
function(b){a.busy&&b.keyCode===AJS.keyCode.SPACE&&b.preventDefault()});-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&a._input.addEventListener("click",function(b){a.busy&&b.preventDefault()})},attached:function(a){(0,k.default)(a).attributeExists("label")},events:{click:function(a,b){!a.disabled&&(!a.busy&&b.target!==a._input)&&a._input.click();(0,g.setBooleanAttribute)(a,"checked",c(a).checked)}},attributes:{id:o,checked:{removed:function(a){f.call(this,"checked",a);c(a).checked=!1},
fallback:function(a,b){h.call(this,"checked",a,b);c(a).checked=!0}},disabled:i("disabled"),form:j,name:i("name"),value:i("value"),"tooltip-on":{value:"On",fallback:function(a,b){c(a).setAttribute("tooltip-on",b.newValue||"On")}},"tooltip-off":{value:"Off",fallback:function(a,b){c(a).setAttribute("tooltip-off",b.newValue||"Off")}},label:{removed:function(a){c(a).removeAttribute("aria-label")},
fallback:function(a,b){c(a).setAttribute("aria-label",b.newValue)}}},prototype:{focus:function(){this._input.focus();return this},get checked(){return this._input.checked},set checked(a){this._input.checked=a;return(0,g.setBooleanAttribute)(this,"checked",a)},get disabled(){return this._input.disabled},set disabled(a){return(0,g.setBooleanAttribute)(this,"disabled",a)},get form(){return document.getElementById(this._formId)},set form(a){j.fallback.call(this,this,{newValue:a||null});return this.form},
get name(){return this._input.name},set name(a){this.setAttribute("name",a);return a},get value(){return this._input.value},set value(a){this.setAttribute("value",null===a?"":a);return a},get busy(){return"true"===this._input.getAttribute("aria-busy")},set busy(a){(0,g.setBooleanAttribute)(this,"busy",a);a?(this._input.setAttribute("aria-busy","true"),this._input.indeterminate=!0,this.checked?((0,d.default)(this._input).addClass("indeterminate-checked"),(0,d.default)(this._tick).spin({zIndex:null})):
(0,d.default)(this._cross).spin({zIndex:null,color:"black"})):((0,d.default)(this._input).removeClass("indeterminate-checked"),this._input.indeterminate=!1,this._input.removeAttribute("aria-busy"),(0,d.default)(this._cross).spinStop(),(0,d.default)(this._tick).spinStop());var b=!!a;this.id&&Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+this.id+'"]'),function(a){a.disabled=b});return a}}});return{}}.call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/jquery/colorpicker2/colorpicker.js' */
!function(a){var o,e,r,i,n,c,l,d,s,t,p,u,h,f,m,v,g,k,b,_,x,w,y,C,M,I=(e={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(o=65)},r=function(e,o){e=y(e);a(o).data("colorpicker").fields.eq(1).val(e.r).end().eq(2).val(e.g).end().eq(3).val(e.b).end()},i=function(e,o){a(o).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},n=function(e,o){a(o).data("colorpicker").fields.eq(0).val(M(e)).end()},c=function(e,o){a(o).data("colorpicker").selector.css("backgroundColor","#"+M({h:e.h,s:100,b:100})),a(o).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},l=function(e,o){a(o).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},d=function(e,o){a(o).data("colorpicker").newColor.css("backgroundColor","#"+M(e))},s=function(e){var o,t=a(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=o=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=o=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=o=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),e&&(r(o,t.get(0)),n(o,t.get(0)),i(o,t.get(0))),c(o,t.get(0)),l(o,t.get(0)),d(o,t.get(0)),t.data("colorpicker").onChange.apply(t,[o,M(o),y(o)])},t=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&s.apply(e.data.field.get(0),[!0]),!1},p=function(e){return s.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),a(document).unbind("mouseup",p),a(document).unbind("mousemove",t),!1},u=function(e){return s.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,e.pageY-e.data.y)))/150,10)).get(0),[e.data.preview]),!1},h=function(e){return r(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),n(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),a(document).unbind("mouseup",h),a(document).unbind("mousemove",u),!1},f=function(e){return s.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,e.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview]),!1},m=function(e){return r(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),n(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),a(document).unbind("mouseup",m),a(document).unbind("mousemove",f),!1},v=function(e){g(e.data.cal.get(0),e.target,e.data.cal.get(0))||(0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),a(document).unbind("mousedown",v))},g=function(e,o,t){if(e==o)return!0;if(e.contains)return e.contains(o);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(o));for(var r=o.parentNode;r&&r!=t;){if(r==e)return!0;r=r.parentNode}return!1},k=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},b=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},_=function(e){var o=6-e.length;if(0<o){for(var t=[],r=0;r<o;r++)t.push("0");t.push(e),e=t.join("")}return e},x=function(e){return w((e=e,{r:(e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}))},w=function(e){var o={h:0,s:0,b:0},t=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),t=r-t;return o.b=r,o.s=0!=r?255*t/r:0,0!=o.s?e.r==r?o.h=(e.g-e.b)/t:e.g==r?o.h=2+(e.b-e.r)/t:o.h=4+(e.r-e.g)/t:o.h=-1,o.h*=60,o.h<0&&(o.h+=360),o.s*=100/255,o.b*=100/255,o},y=function(e){var o={},t=Math.round(e.h),r=Math.round(255*e.s/100),i=Math.round(255*e.b/100);return 0==r?o.r=o.g=o.b=i:(i=t%60*((e=i)-(r=(255-r)*i/255))/60,(t=360==t?0:t)<60?(o.r=e,o.b=r,o.g=r+i):t<120?(o.g=e,o.b=r,o.r=e-i):t<180?(o.g=e,o.r=r,o.b=r+i):t<240?(o.b=e,o.r=r,o.g=e-i):t<300?(o.b=e,o.g=r,o.r=r+i):t<360?(o.r=e,o.g=r,o.b=e-i):(o.r=0,o.g=0,o.b=0)),{r:Math.round(o.r),g:Math.round(o.g),b:Math.round(o.b)}},C=function(e){var t=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return a.each(t,function(e,o){1==o.length&&(t[e]="0"+o)}),t.join("")},M=function(e){return C(y(e))},{init:function(t){if("string"==typeof(t=a.extend({},e,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var e,o;a(this).data("colorpickerId")||((e=a.extend({},t)).origColor=t.color,o="collorpicker_"+parseInt(1e3*Math.random()),a(this).data("colorpickerId",o),o=a('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",o),e.flat?o.appendTo(this).show():o.appendTo(document.body),e.fields=o.find("input").bind("keyup",P).bind("change",s).bind("blur",N).bind("focus",S),o.find("span").bind("mousedown",O).end().find(">div.colorpicker_current_color").bind("click",B),e.selector=o.find("div.colorpicker_color").bind("mousedown",H),e.selectorIndic=e.selector.find("div div"),e.el=this,e.hue=o.find("div.colorpicker_hue div"),o.find("div.colorpicker_hue").bind("mousedown",z),e.newColor=o.find("div.colorpicker_new_color"),e.currentColor=o.find("div.colorpicker_current_color"),o.data("colorpicker",e),o.find("div.colorpicker_submit").bind("mouseenter",Y).bind("mouseleave",E).bind("click",j),r(e.color,o.get(0)),i(e.color,o.get(0)),n(e.color,o.get(0)),l(e.color,o.get(0)),c(e.color,o.get(0)),q(e.color,o.get(0)),d(e.color,o.get(0)),e.flat?o.css({position:"relative",display:"block"}):a(this).bind(e.eventName,T))})},showPicker:function(){return this.each(function(){a(this).data("colorpickerId")&&T.apply(this)})},hidePicker:function(){return this.each(function(){a(this).data("colorpickerId")&&a("#"+a(this).data("colorpickerId")).hide()})},setColor:function(o){if("string"==typeof o)o=x(o);else if(null!=o.r&&null!=o.g&&null!=o.b)o=w(o);else{if(null==o.h||null==o.s||null==o.b)return this;o=k(o)}return this.each(function(){var e;a(this).data("colorpickerId")&&((e=a("#"+a(this).data("colorpickerId"))).data("colorpicker").color=o,e.data("colorpicker").origColor=o,r(o,e.get(0)),i(o,e.get(0)),n(o,e.get(0)),l(o,e.get(0)),c(o,e.get(0)),q(o,e.get(0)),d(o,e.get(0)))})}});function q(e,o){a(o).data("colorpicker").currentColor.css("backgroundColor","#"+M(e))}function P(e){if(e=e.charCode||e.keyCode||-1,o<e&&e<=90||32==e)return!1;!0===a(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(e){a(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){o=0<this.parentNode.className.indexOf("_hex")?70:65,a(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),a(this).parent().addClass("colorpicker_focus")}function O(e){var o=a(this).parent().find("input").focus(),o={el:a(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:e.pageY,field:o,val:parseInt(o.val(),10),preview:a(this).parent().parent().data("colorpicker").livePreview};a(document).bind("mouseup",o,p),a(document).bind("mousemove",o,t)}function z(e){var o={cal:a(this).parent(),y:a(this).offset().top};o.preview=o.cal.data("colorpicker").livePreview,a(document).bind("mouseup",o,h),a(document).bind("mousemove",o,u)}function H(e){var o={cal:a(this).parent(),pos:a(this).offset()};o.preview=o.cal.data("colorpicker").livePreview,a(document).bind("mouseup",o,m),a(document).bind("mousemove",o,f)}function Y(e){a(this).addClass("colorpicker_focus")}function E(e){a(this).removeClass("colorpicker_focus")}function j(e){var o=a(this).parent(),t=o.data("colorpicker").color;o.data("colorpicker").origColor=t,q(t,o.get(0)),o.data("colorpicker").onSubmit(t,M(t),y(t),o.data("colorpicker").el)}function T(e){var o=a("#"+a(this).data("colorpickerId"));o.data("colorpicker").onBeforeShow.apply(this,[o.get(0)]);var t=a(this).offset(),r=(i="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(i?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(i?document.documentElement:document.body).scrollTop,w:window.innerWidth||(i?document.documentElement:document.body).clientWidth,h:window.innerHeight||(i?document.documentElement:document.body).clientHeight}),i=t.top+this.offsetHeight,t=t.left;return r.t+r.h<i+176&&(i-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),o.css({left:t+"px",top:i+"px"}),0!=o.data("colorpicker").onShow.apply(this,[o.get(0)])&&o.show(),a(document).bind("mousedown",{cal:o},v),!1}function B(){var e=a(this).parent(),o=e.data("colorpicker").origColor;e.data("colorpicker").color=o,r(o,e.get(0)),n(o,e.get(0)),i(o,e.get(0)),c(o,e.get(0)),l(o,e.get(0)),d(o,e.get(0))}a.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/gh-shortener.js' */
GH.Shortener=AJS.Control.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){t=(t="string"==typeof t?{element:t}:t)||{},this.options=AJS.$.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=AJS.$(this.options.element),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&0<this.$container.children().length},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".gh-shortener-expand"),this._assignEvents("collapse-button",".gh-shortener-collapse"),this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return AJS.$("<a href='#' class='ellipsis gh-shortener-expand' title='"+this.options.expandButtonTooltip+"'></a><br>")},collapseButton:function(){return AJS.$(" <a title='Hide' class='gh-shortener-collapse' style='margin-left:3px' href='#'></a>")}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){var t;clearTimeout(this._timerId),this.expanded||((t=this)._timerId=setTimeout(function(){t.collapse()},400))}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{localStorage.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(t){}},_loadState:function(){return localStorage.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(1<this.$items.length)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var n=this.$items.eq(i).offset().left;if(n<=e&&++t>this.options.numRows)return i;e=n}return-1},expand:function(){this._removeButtons(),0<this._getOverflowIndex()&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto")),this.expanded=!0},collapse:function(){this._removeButtons();var t=this._getOverflowIndex();if(0<t){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var e=this.$expandButton.first();do{var i=this.$items.length-t;e.text("("+i+")"),this.$expandButton.insertBefore(this.$items[t]),t--;var n=this.$items.eq(t).offset(),s=this.$expandButton.offset()}while(!(n.left<s.left&&s.top<n.top+10)&&0<t);var o=t<this.$items.length-1?this.$items.eq(t+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:o,position:"static",visibility:"visible",width:"auto"}),e.attr("title",AJS.format(this.options.expandButtonTooltip,i))}else this.$container.css("height","auto");this.expanded=!1}}),function(){"use strict";require("jquery").fn.shorten=function(t){var e=[];return t=t||{},this.each(function(){t.element=this,e.push(new AJS.Shortener(t))}),e}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/backbone.js' */
!function(){var t=this,e=t.Backbone,h=Array.prototype.slice,l=Array.prototype.splice,a="undefined"!=typeof exports?exports:t.Backbone={};a.VERSION="0.9.2";var d=t._;d||"undefined"==typeof require||(d=require("underscore"));var r=t.jQuery||t.Zepto||t.ender;a.setDomLibrary=function(t){r=t},a.noConflict=function(){return t.Backbone=e,this},a.emulateHTTP=!1,a.emulateJSON=!1;var c=/\s+/,i=a.Events={on:function(t,e,i){var n,s,r,o,a;if(!e)return this;for(t=t.split(c),n=this._callbacks||(this._callbacks={});s=t.shift();)(r=(a=n[s])?a.tail:{}).next=o={},r.context=i,r.callback=e,n[s]={tail:o,next:a?a.next:r};return this},off:function(t,e,i){var n,s,r,o,a,h;if(s=this._callbacks){if(!(t||e||i))return delete this._callbacks,this;for(t=t?t.split(c):d.keys(s);n=t.shift();)if(r=s[n],delete s[n],r&&(e||i))for(o=r.tail;(r=r.next)!==o;)a=r.callback,h=r.context,(e&&a!==e||i&&h!==i)&&this.on(n,a,h);return this}},trigger:function(t){var e,i,n,s,r,o,a;if(!(n=this._callbacks))return this;for(o=n.all,t=t.split(c),a=h.call(arguments,1);e=t.shift();){if(i=n[e])for(s=i.tail;(i=i.next)!==s;)i.callback.apply(i.context||this,a);if(i=o)for(s=i.tail,r=[e].concat(a);(i=i.next)!==s;)i.callback.apply(i.context||this,r)}return this}};i.bind=i.on,i.unbind=i.off;var u=a.Model=function(t,e){var i;t=t||{},e&&e.parse&&(t=this.parse(t)),(i=S(this,"defaults"))&&(t=d.extend({},i,t)),e&&e.collection&&(this.collection=e.collection),this.attributes={},this._escapedAttributes={},this.cid=d.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(t,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=d.clone(this.attributes),this.initialize.apply(this,arguments)};d.extend(u.prototype,i,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return d.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){if(e=this._escapedAttributes[t])return e;var e=this.get(t);return this._escapedAttributes[t]=d.escape(null==e?"":""+e)},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,s,r;if(d.isObject(t)||null==t?(n=t,i=e):(n={})[t]=e,!n)return this;if(n instanceof u&&(n=n.attributes),(i=i||{}).unset)for(s in n)n[s]=void 0;if(!this._validate(n,i))return!1;this.idAttribute in n&&(this.id=n[this.idAttribute]);var o=i.changes={},a=this.attributes,h=this._escapedAttributes,c=this._previousAttributes||{};for(s in n)r=n[s],(!d.isEqual(a[s],r)||i.unset&&d.has(a,s))&&(delete h[s],(i.silent?this._silent:o)[s]=!0),i.unset?delete a[s]:a[s]=r,d.isEqual(c[s],r)&&d.has(a,s)==d.has(c,s)?(delete this.changed[s],delete this._pending[s]):(this.changed[s]=r,i.silent||(this._pending[s]=!0));return i.silent||this.change(i),this},unset:function(t,e){return(e=e||{}).unset=!0,this.set(t,null,e)},clear:function(t){return(t=t||{}).unset=!0,this.set(d.clone(this.attributes),t)},fetch:function(n){n=n?d.clone(n):{};var s=this,r=n.success;return n.success=function(t,e,i){if(!s.set(s.parse(t,i),n))return!1;r&&r(s,t)},n.error=a.wrapError(n.error,s,n),(this.sync||a.sync).call(this,"read",this,n)},save:function(t,e,n){var s,i;if(d.isObject(t)||null==t?(s=t,n=e):(s={})[t]=e,(n=n?d.clone(n):{}).wait){if(!this._validate(s,n))return!1;i=d.clone(this.attributes)}t=d.extend({},n,{silent:!0});if(s&&!this.set(s,n.wait?t:n))return!1;var r=this,o=n.success;n.success=function(t,e,i){i=r.parse(t,i);if(n.wait&&(delete n.wait,i=d.extend(s||{},i)),!r.set(i,n))return!1;o?o(r,t):r.trigger("sync",r,t,n)},n.error=a.wrapError(n.error,r,n);e=this.isNew()?"create":"update",e=(this.sync||a.sync).call(this,e,this,n);return n.wait&&this.set(i,t),e},destroy:function(e){e=e?d.clone(e):{};function i(){n.trigger("destroy",n,n.collection,e)}var n=this,s=e.success;if(this.isNew())return i(),!1;e.success=function(t){e.wait&&i(),s?s(n,t):n.trigger("sync",n,t,e)},e.error=a.wrapError(e.error,n,e);var t=(this.sync||a.sync).call(this,"delete",this,e);return e.wait||i(),t},url:function(){var t=S(this,"urlRoot")||S(this.collection,"url")||k();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(t){t=t||{};var e=this._changing;for(n in this._changing=!0,this._silent)this._pending[n]=!0;var i=d.extend({},t.changes,this._silent);for(n in this._silent={},i)this.trigger("change:"+n,this,this.get(n),t);if(e)return this;for(;!d.isEmpty(this._pending);){for(var n in this._pending={},this.trigger("change",this,t),this.changed)this._pending[n]||this._silent[n]||delete this.changed[n];this._previousAttributes=d.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(t){return arguments.length?d.has(this.changed,t):!d.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&d.clone(this.changed);var e,i,n=!1,s=this._previousAttributes;for(i in t)d.isEqual(s[i],e=t[i])||((n=n||{})[i]=e);return n},previous:function(t){return arguments.length&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return d.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(t,e){if(e.silent||!this.validate)return!0;t=d.extend({},this.attributes,t);t=this.validate(t,e);return!t||(e&&e.error?e.error(this,t,e):this.trigger("error",this,t,e),!1)}});var n=a.Collection=function(t,e){(e=e||{}).model&&(this.model=e.model),e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,{silent:!0,parse:e.parse})};d.extend(n.prototype,i,{model:u,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(t,e){var i,n,s,r,o,a,h={},c={},u=[];for(e=e||{},i=0,s=(t=d.isArray(t)?t.slice():[t]).length;i<s;i++){if(!(r=t[i]=this._prepareModel(t[i],e)))throw new Error("Can't add an invalid model to a collection");o=r.cid,a=r.id,h[o]||this._byCid[o]||null!=a&&(c[a]||this._byId[a])?u.push(i):h[o]=c[a]=r}for(i=u.length;i--;)t.splice(u[i],1);for(i=0,s=t.length;i<s;i++)(r=t[i]).on("all",this._onModelEvent,this),null!=(this._byCid[r.cid]=r).id&&(this._byId[r.id]=r);if(this.length+=s,n=null!=e.at?e.at:this.models.length,l.apply(this.models,[n,0].concat(t)),this.comparator&&this.sort({silent:!0}),e.silent)return this;for(i=0,s=this.models.length;i<s;i++)h[(r=this.models[i]).cid]&&(e.index=i,r.trigger("add",r,this,e));return this},remove:function(t,e){var i,n,s,r;for(e=e||{},i=0,n=(t=d.isArray(t)?t.slice():[t]).length;i<n;i++)(r=this.getByCid(t[i])||this.get(t[i]))&&(delete this._byId[r.id],delete this._byCid[r.cid],s=this.indexOf(r),this.models.splice(s,1),this.length--,e.silent||(e.index=s,r.trigger("remove",r,this,e)),this._removeReference(r));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,e),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,d.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},get:function(t){if(null!=t)return this._byId[null!=t.id?t.id:t]},getByCid:function(t){return t&&this._byCid[t.cid||t]},at:function(t){return this.models[t]},where:function(i){return d.isEmpty(i)?[]:this.filter(function(t){for(var e in i)if(i[e]!==t.get(e))return!1;return!0})},sort:function(t){if(t=t||{},!this.comparator)throw new Error("Cannot sort a set without a comparator");var e=d.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("reset",this,t),this},pluck:function(e){return d.map(this.models,function(t){return t.get(e)})},reset:function(t,e){t=t||[],e=e||{};for(var i=0,n=this.models.length;i<n;i++)this._removeReference(this.models[i]);return this._reset(),this.add(t,d.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(n){void 0===(n=n?d.clone(n):{}).parse&&(n.parse=!0);var s=this,r=n.success;return n.success=function(t,e,i){s[n.add?"add":"reset"](s.parse(t,i),n),r&&r(s,t)},n.error=a.wrapError(n.error,s,n),(this.sync||a.sync).call(this,"read",this,n)},create:function(n,s){var r=this;if(s=s?d.clone(s):{},!(n=this._prepareModel(n,s)))return!1;s.wait||r.add(n,s);var o=s.success;return s.success=function(t,e,i){s.wait&&r.add(t,s),o?o(t,e):t.trigger("sync",n,e,s)},n.save(null,s),n},parse:function(t,e){return t},chain:function(){return d(this.models).chain()},_reset:function(t){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(t,e){var i;return e=e||{},t instanceof u?t.collection||(t.collection=this):(i=t,(t=new(e.collection=this).model(i,e))._validate(t.attributes,e)||(t=!1)),t},_removeReference:function(t){this==t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!=t&&"remove"!=t||i==this)&&("destroy"==t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],this._byId[e.id]=e),this.trigger.apply(this,arguments))}});d.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"],function(t){n.prototype[t]=function(){return d[t].apply(d,[this.models].concat(d.toArray(arguments)))}});var s=a.Router=function(t){(t=t||{}).routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},o=/:\w+/g,f=/\*\w+/g,p=/[-[\]{}()+?.,\\^$|#\s]/g;d.extend(s.prototype,i,{initialize:function(){},route:function(e,i,n){return a.history||(a.history=new g),d.isRegExp(e)||(e=this._routeToRegExp(e)),n=n||this[i],a.history.route(e,d.bind(function(t){t=this._extractParameters(e,t);n&&n.apply(this,t),this.trigger.apply(this,["route:"+i].concat(t)),a.history.trigger("route",this,i,t)},this)),this},navigate:function(t,e){a.history.navigate(t,e)},_bindRoutes:function(){if(this.routes){var t,e=[];for(t in this.routes)e.unshift([t,this.routes[t]]);for(var i=0,n=e.length;i<n;i++)this.route(e[i][0],e[i][1],this[e[i][1]])}},_routeToRegExp:function(t){return t=t.replace(p,"\\$&").replace(o,"([^/]+)").replace(f,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var g=a.History=function(){this.handlers=[],d.bindAll(this,"checkUrl")},v=/^[#\/]/,m=/msie [\w.]+/;g.started=!1,d.extend(g.prototype,i,{interval:50,getHash:function(t){t=(t||window).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(t,e){return null==t&&(this._hasPushState||e?(t=window.location.pathname,(e=window.location.search)&&(t+=e)):t=this.getHash()),(t=!t.indexOf(this.options.root)?t.substr(this.options.root.length):t).replace(v,"")},start:function(t){if(g.started)throw new Error("Backbone.history has already been started");g.started=!0,this.options=d.extend({},{root:"/"},this.options,t),this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var e=this.getFragment(),t=document.documentMode,t=m.exec(navigator.userAgent.toLowerCase())&&(!t||t<=7);t&&(this.iframe=r('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?r(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!t?r(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;t=window.location,e=t.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!e?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&e&&t.hash&&(this.fragment=this.getHash().replace(v,""),window.history.replaceState({},document.title,t.protocol+"//"+t.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){r(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),g.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if((e=e==this.fragment&&this.iframe?this.getFragment(this.getHash(this.iframe)):e)==this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(t){var e=this.fragment=this.getFragment(t);return d.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!g.started)return!1;e&&!0!==e||(e={trigger:e});var i=(t||"").replace(v,"");this.fragment!=i&&(this._hasPushState?(0!=i.indexOf(this.options.root)&&(i=this.options.root+i),this.fragment=i,window.history[e.replace?"replaceState":"pushState"]({},document.title,i)):this._wantsHashChange?(this.fragment=i,this._updateHash(window.location,i,e.replace),this.iframe&&i!=this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,i,e.replace))):window.location.assign(this.options.root+t),e.trigger&&this.loadUrl(t))},_updateHash:function(t,e,i){i?t.replace(t.toString().replace(/(javascript:|#).*$/,"")+"#"+e):t.hash=e}});var _=a.View=function(t){this.cid=d.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName"];d.extend(_.prototype,i,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(t,e,i){t=document.createElement(t);return e&&r(t).attr(e),i&&r(t).html(i),t},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof r?t:r(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(t=t||S(this,"events"))for(var e in this.undelegateEvents(),t){var i=t[e];if(!(i=!d.isFunction(i)?this[t[e]]:i))throw new Error('Method "'+t[e]+'" does not exist');var n=e.match(y),e=n[1],n=n[2],i=d.bind(i,this);e+=".delegateEvents"+this.cid,""===n?this.$el.bind(e,i):this.$el.delegate(n,e,i)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=d.extend({},this.options,t));for(var e=0,i=w.length;e<i;e++){var n=w[e];t[n]&&(this[n]=t[n])}this.options=t},_ensureElement:function(){var t;this.el?this.setElement(this.el,!1):(t=S(this,"attributes")||{},this.id&&(t.id=this.id),this.className&&(t.class=this.className),this.setElement(this.make(this.tagName,t),!1))}});u.extend=n.extend=s.extend=_.extend=function(t,e){e=E(this,t,e);return e.extend=this.extend,e};var b={create:"POST",update:"PUT",delete:"DELETE",read:"GET"};a.sync=function(t,e,i){var n=b[t],s={type:n,dataType:"json"};return(i=i||{}).url||(s.url=S(e,"url")||k()),i.data||!e||"create"!=t&&"update"!=t||(s.contentType="application/json",s.data=JSON.stringify(e.toJSON())),a.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),a.emulateHTTP&&("PUT"!==n&&"DELETE"!==n||(a.emulateJSON&&(s.data._method=n),s.type="POST",s.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",n)})),"GET"===s.type||a.emulateJSON||(s.processData=!1),r.ajax(d.extend(s,i))},a.wrapError=function(i,n,s){return function(t,e){e=t===n?e:t,i?i(n,e,s):n.trigger("error",n,e,s)}};var x=function(){},E=function(t,e,i){var n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){t.apply(this,arguments)};return d.extend(n,t),x.prototype=t.prototype,n.prototype=new x,e&&d.extend(n.prototype,e),i&&d.extend(n,i),(n.prototype.constructor=n).__super__=t.prototype,n},S=function(t,e){return t&&t[e]?d.isFunction(t[e])?t[e]():t[e]:null},k=function(){throw new Error('A "url" property or function must be specified')}}.call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/backbone-overrides.js' */
!function(n){GH.Backbone=n.noConflict()}((AJS.$,Backbone));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/events.js' */
!function(g){GH.triggerEvt=function(t,i){g(AJS).trigger(t,i)},GH.bindEvt=function(t,i){g(AJS).bind(t,i)},GH.triggerEvtForInst=function(t,i,r){g(i).trigger(t,r),GH.triggerEvt(t,r),i.id&&GH.triggerEvt(i.id+"_"+t,r)}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/serializetoobject.js' */
jQuery.fn.serializeObject=function(){var e={};return this.find(":input:not(:button):not(:submit):not(:radio):not('select[multiple]')").each(function(){""!==this.name&&(null===this.value&&(this.value=""),e[this.name]=this.value.match(/^(tru|fals)e$/i)?"true"==this.value.toLowerCase():this.value)}),this.find("input:radio:checked").each(function(){e[this.name]=this.value}),this.find("select[multiple]").each(function(){var t=jQuery(this),i=t.val();t.data("aui-ss")?e[this.name]=i?i[0]:"":e[this.name]=null!==i?i:[]}),e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/color.js' */
!function(t){function o(r){var e;return r&&r.constructor==Array&&3==r.length?r:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(r))?[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]:(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(r))?[2.55*parseFloat(e[1]),2.55*parseFloat(e[2]),2.55*parseFloat(e[3])]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(r))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(r))?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]:a[t.trim(r).toLowerCase()]}t.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(r,e){t.fx.step[e]=function(r){0==r.state&&(r.start=function(r,e){var a;for(;!(""!=(a=t.curCSS(r,e))&&"transparent"!=a||t.nodeName(r,"body"))&&(e="backgroundColor",r=r.parentNode););return o(a)}(r.elem,e),r.end=o(r.end)),r.elem.style[e]="rgb("+[Math.max(Math.min(parseInt(r.pos*(r.end[0]-r.start[0])+r.start[0]),255),0),Math.max(Math.min(parseInt(r.pos*(r.end[1]-r.start[1])+r.start[1]),255),0),Math.max(Math.min(parseInt(r.pos*(r.end[2]-r.start[2])+r.start[2]),255),0)].join(",")+")"}});var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.js' */
!function(r,s){GH.RestfulTable=s.View.extend({initialize:function(e){var a=this;if(a.options=r.extend(!0,a._getDefaultOptions(e),e),a.id=this.options.id,a._events=GH.RestfulTable.Events,a.classNames=GH.RestfulTable.ClassNames,a.dataKeys=GH.RestfulTable.DataKeys,this.$table=r(e.el).addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(a.classNames.LOADING),this.$table.wrapAll("<form class='aui' action='#' />"),this.$thead=r("<thead/>"),this.$theadRow=r("<tr />").appendTo(this.$thead),this.$tbody=r("<tbody/>"),!this.$table.length)throw new Error("GH.RestfulTable: Init failed! The table you have specified ["+this.$table.selector+"] cannot be found.");if(!this.options.columns)throw new Error("GH.RestfulTable: Init failed! You haven't provided any columns to render.");this.showGlobalLoading(),r.each(this.options.columns,function(e,t){var s=r.isFunction(t.header)?t.header():t.header;void 0===s&&(console.warn("You have not specified [header] for column ["+t.id+"]. Using id for now..."),s=t.id),a.$theadRow.append("<th>"+s+"</th>")}),a.$theadRow.append("<th></th><th></th>"),this._models=this._createCollection(),this._rowClass=this.options.views.row,this.editRows=[],this.$table.closest("form").submit(function(e){a.focusedRow&&a.focusedRow.trigger(a._events.SAVE),e.preventDefault()}),this.options.allowReorder&&(this.$theadRow.prepend("<th />"),this.$tbody.agileSortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(e,t){var s=t.clone(!0).addClass(a.classNames.MOVEABLE);return s.children().each(function(e){r(this).width(t.children().eq(e).width())}),s},helperAdjusted:function(){this.helper[0].style.top=parseInt(this.helper[0].style.top,10)+window.scrollY+"px"},start:function(e,t){var s=t.placeholder.find("td");t.item.addClass(a.classNames.MOVEABLE).children().each(function(e){r(this).width(s.eq(e).width())}),t.placeholder.html('<td colspan="'+a.getColumnCount()+'">&nbsp;</td>').css("visibility","visible"),a.getRowFromElement(t.item[0]).trigger(a._events.MODAL)},stop:function(e,t){jQuery(t.item[0]).is(":visible")&&(t.item.removeClass(a.classNames.MOVEABLE).children().attr("style",""),t.placeholder.removeClass(a.classNames.ROW),a.getRowFromElement(t.item[0]).trigger(a._events.MODELESS))},update:function(e,t){var s,i,o={},n=a.getRowFromElement(t.item[0]);n&&(a.options.reverseOrder?(i=t.item.next()).length?(s=a.getRowFromElement(i).model,o.after=s.url()):o.position="First":(i=t.item.prev()).length?(s=a.getRowFromElement(i).model,o.after=s.url()):o.position="First",r.ajax({url:n.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(o),complete:function(){n.hideLoading()},success:function(e){GH.triggerEvtForInst(a._events.REORDER_SUCCESS,a,[e])},error:function(e){var t=r.parseJSON(e.responseText||e.data);GH.triggerEvtForInst(a._events.SERVER_ERROR,a,[t,e])}}),n.showLoading())},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8e3}),this.$tbody.bind("selectstart mousedown",function(e){return!r(e.target).is("."+a.classNames.DRAG_HANDLE)})),!1!==this.options.allowCreate&&(this._createRow=new this.options.views.editRow({columns:this.options.columns,isCreateRow:!0,model:this.options.model.extend({url:function(){return a.options.resources.self}}),cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey,allowReorder:this.options.allowReorder}).bind(this._events.CREATED,function(e){"bottom"===a.options.createPosition?a.addRow(e):a.addRow(e,0)}).bind(this._events.VALIDATION_ERROR,function(){this.trigger(a._events.FOCUS)}).render({errors:{},values:{}}),this.$create=r('<tbody class="'+this.classNames.CREATE+'" />').append(this._createRow.el),this._applyFocusCoordinator(this._createRow),this._createRow.trigger(this._events.FOCUS)),this._models.bind("remove",function(s){r.each(a.getRows(),function(e,t){t.model===s&&(t.hasFocus()&&a._createRow&&a._createRow.trigger(a._events.FOCUS),a.removeRow(t))})}),r.isFunction(this.options.resources.all)?this.options.resources.all(function(e){a.populate(e)}):r.get(this.options.resources.all,function(e){a.populate(e)})},_createCollection:function(){var i=this;return new(this.options.Collection.extend({sort:function(e){if(e=e||{},!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.tableRows=i.getRows(),this.models=this.sortBy(this.comparator),this.tableRows=void 0,e.silent||this.trigger("refresh",this,e),this},remove:function(e,t){return this.tableRows=i.getRows(),s.Collection.prototype.remove.apply(this,arguments),this.tableRows=void 0,this}}))([],{comparator:function(t){var s;return r.each(void 0!==this.tableRows?this.tableRows:i.getRows(),function(e){if(this.model.id===t.id)return s=e,!1}),s}})},populate:function(e){this.options.reverseOrder&&e.reverse(),this.hideGlobalLoading(),e&&e.length?(this._models.reset([],{silent:!0}),this.renderRows(e),this.isEmpty()&&this.showNoEntriesMsg()):this.showNoEntriesMsg(),this.$table.append(this.$thead),"bottom"===this.options.createPosition?this.$table.append(this.$tbody).append(this.$create):this.$table.append(this.$create).append(this.$tbody),this.$table.removeClass(this.classNames.LOADING).trigger(this._events.INITIALIZED,[this]),GH.triggerEvtForInst(this._events.INITIALIZED,this,[this]),this.options.autoFocus&&this.$table.find(":input:text:first").focus()},showGlobalLoading:function(){return this.$loading||(this.$loading=r('<div class="aui-restfultable-init"><span class="aui-restfultable-throbber"></span><span class="aui-restfultable-loading">'+this.options.loadingMsg+"</span></div>")),this.$loading.is(":visible")||this.$loading.insertAfter(this.$table),this},hideGlobalLoading:function(){return this.$loading&&this.$loading.remove(),this},addRow:function(e,t){if(!e.id)throw new Error("GH.RestfulTable.addRow: to add a row values object must contain an id. Maybe you are not returning it from your restend point?Recieved:"+JSON.stringify(e));return e=new this.options.model(e),t=this._renderRow(e,t),this._models.add(e),this.removeNoEntriesMsg(),GH.triggerEvtForInst(this._events.ROW_ADDED,this,[t,this]),this},removeRow:function(e){this._models.remove(e.model),e.remove(),this.isEmpty()&&this.showNoEntriesMsg(),GH.triggerEvtForInst(this._events.ROW_REMOVED,this,[e,this])},isEmpty:function(){return 0===this._models.length},getModels:function(){return this._models},getTable:function(){return this.$table},getTableBody:function(){return this.$tbody},getCreateRow:function(){return this._createRow},getColumnCount:function(){return this.options.columns.length+2},getRowFromElement:function(e){return r(e).data(this.dataKeys.ROW_VIEW)},showNoEntriesMsg:function(){return this.$noEntries&&this.$noEntries.remove(),this.$noEntries=r("<tr>").addClass(this.classNames.NO_ENTRIES).append(r("<td>").attr("colspan",this.getColumnCount()).text(this.options.noEntriesMsg)).appendTo(this.$tbody),this},removeNoEntriesMsg:function(){return this.$noEntries&&0<this._models.length&&this.$noEntries.remove(),this},getRows:function(){var t=this,s=[];return this.$tbody.find("."+this.classNames.READ_ONLY).each(function(){var e=r(this).data(t.dataKeys.ROW_VIEW);e&&s.push(e)}),s},_renderRow:function(e,t){var s=this,i=this.$tbody.find("."+this.classNames.READ_ONLY),o=new this._rowClass({model:e,columns:this.options.columns,allowEdit:this.options.allowEdit,allowDelete:this.options.allowDelete,allowReorder:this.options.allowReorder,deleteConfirmation:this.options.deleteConfirmation});return this.removeNoEntriesMsg(),o.bind(this._events.EDIT_ROW,function(e){s.edit(this,e)}),e=o.render().$el,-1!==t&&("number"==typeof t&&0!==i.length?e.insertBefore(i[t]):this.$tbody.append(e)),e.data(this.dataKeys.ROW_VIEW,o),o.bind(this._events.MODAL,function(){s.$table.removeClass(s.classNames.ALLOW_HOVER),s.$tbody.agileSortable("disable"),r.each(s.getRows(),function(){s.isRowBeingEdited(this)||this.delegateEvents({})})}),o.bind(this._events.ANIMATION_STARTED,function(){s.$table.removeClass(s.classNames.ALLOW_HOVER)}),o.bind(this._events.ANIMATION_FINISHED,function(){s.$table.addClass(s.classNames.ALLOW_HOVER)}),o.bind(this._events.MODELESS,function(){s.$table.addClass(s.classNames.ALLOW_HOVER),s.$tbody.agileSortable("enable"),r.each(s.getRows(),function(){s.isRowBeingEdited(this)||this.delegateEvents()})}),this._applyFocusCoordinator(o),this.trigger(this._events.ROW_INITIALIZED,o),o},isRowBeingEdited:function(e){var t=!1;return r.each(this.editRows,function(){if(this.el===e.el)return!(t=!0)}),t},_applyFocusCoordinator:function(e){var t=this;return e.hasFocusBound||(e.hasFocusBound=!0,e.bind(this._events.FOCUS,function(){t.focusedRow&&t.focusedRow!==e&&t.focusedRow.trigger(t._events.BLUR),(t.focusedRow=e)instanceof GH.RestfulTable.Row&&t._createRow&&t._createRow.enable()})),this},_removeEditRow:function(e){e=r.inArray(e,this.editRows);return this.editRows.splice(e,1),this},_shiftFocusAfterEdit:function(){return 0<this.editRows.length?this.editRows[this.editRows.length-1].trigger(this._events.FOCUS):this._createRow&&this._createRow.trigger(this._events.FOCUS),this},_saveEditRowOnBlur:function(){return this.editRows.length<=1},dismissEditRows:function(){var e=this;r.each(this.editRows,function(){this.hasUpdates()||this.trigger(e._events.FINISHED_EDITING)})},edit:function(s,e){var i=this,t=new this.options.views.editRow({el:s.el,columns:this.options.columns,isUpdateMode:!0,allowReorder:this.options.allowReorder,model:s.model,cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey}),o=s.model.toJSON();return o.update=!0,t.render({errors:{},update:!0,values:o}).bind(i._events.UPDATED,function(e,t){i._removeEditRow(this),this.unbind(),s.render().delegateEvents(),s.trigger(i._events.UPDATED),!1!==t&&i._shiftFocusAfterEdit()}).bind(i._events.VALIDATION_ERROR,function(){this.trigger(i._events.FOCUS)}).bind(i._events.FINISHED_EDITING,function(){i._removeEditRow(this),s.render().delegateEvents(),this.unbind()}).bind(i._events.CANCEL,function(){i._removeEditRow(this),this.unbind(),s.render().delegateEvents(),i._shiftFocusAfterEdit()}).bind(i._events.BLUR,function(){i.dismissEditRows(),i._saveEditRowOnBlur()&&this.trigger(i._events.SAVE,!1)}),this._applyFocusCoordinator(t),t.trigger(i._events.FOCUS,e),i._createRow&&i._createRow.disable(),this.editRows.push(t),t},renderRows:function(e){var t=this._models.comparator,s=[];this._models.comparator=void 0;e=_.map(e,function(e){e=new this.options.model(e);return s.push(this._renderRow(e,-1).el),e},this);return this._models.add(e,{silent:!0}),this._models.comparator=t,this.removeNoEntriesMsg(),this.$tbody.append(s),this},_getDefaultOptions:function(e){return{model:e.model||GH.RestfulTable.EntryModel,allowEdit:!0,views:{editRow:GH.RestfulTable.EditRow,row:GH.RestfulTable.Row},Collection:s.Collection.extend({url:e.resources.self,model:e.model||GH.RestfulTable.EntryModel}),allowReorder:!1,loadingMsg:e.loadingMsg||"Loading"}}}),GH.RestfulTable.DataKeys={ENABLED_SUBMIT:"enabledSubmit",ROW_VIEW:"RestfulTable_Row_View"},GH.RestfulTable.ClassNames={NO_VALUE:"aui-restfultable-editable-no-value",NO_ENTRIES:"aui-restfultable-no-entires",RESTFUL_TABLE:"aui-restfultable",ROW:"aui-restfultable-row",READ_ONLY:"aui-restfultable-readonly",ACTIVE:"aui-restfultable-active",ALLOW_HOVER:"aui-restfultable-allowhover",FOCUSED:"aui-restfultable-focused",MOVEABLE:"aui-restfultable-movable",ANIMATING:"aui-restfultable-animate",DISABLED:"aui-restfultable-disabled",SUBMIT:"aui-restfultable-submit",CANCEL:"aui-restfultable-cancel",EDIT_ROW:"aui-restfultable-editrow",CREATE:"aui-restfultable-create",DRAG_HANDLE:"aui-restfultable-draghandle",ORDER:"aui-restfultable-order",EDITABLE:"aui-restfultable-editable",ERROR:"error",DELETE:"aui-restfultable-delete",LOADING:"loading"},GH.RestfulTable.Events={REORDER_SUCCESS:"RestfulTable.reorderSuccess",ROW_ADDED:"RestfulTable.rowAdded",ROW_REMOVED:"RestfulTable.rowRemoved",EDIT_ROW:"RestfulTable.switchedToEditMode",SERVER_ERROR:"RestfulTable.serverError",CREATED:"created",UPDATED:"updated",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",SAVE:"save",MODAL:"modal",MODELESS:"modeless",CANCEL:"cancel",CONTENT_REFRESHED:"contentRefreshed",RENDER:"render",FINISHED_EDITING:"finishedEditing",VALIDATION_ERROR:"validationError",SUBMIT_STARTED:"submitStarted",SUBMIT_FINISHED:"submitFinished",ANIMATION_STARTED:"animationStarted",ANIMATION_FINISHED:"animationFinisehd",INITIALIZED:"initialized",ROW_INITIALIZED:"rowInitialized"}}(AJS.$,GH.Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.entrymodel.js' */
!function(o,c){GH.RestfulTable.EntryModel=c.Model.extend({save:function(r,e){var t,s=this,a=(e=e||{}).error,n=e.success;e.error=function(r,e){var t=o.parseJSON(e.responseText||e.data);s._serverErrorHandler(e),a&&a.call(s,s,t,e)},this.isNew()?c.Model.prototype.save.call(this,r,e):r&&(t=new(c.Model.extend({url:this.url()}))({id:this.id}),e.success=function(r,e){s.clear().set(r.toJSON()),n&&n.call(s,s,e)},t.save(r,e))},destroy:function(e){e=e||{};var r,t=this,s=this.url();return e.data&&(r=o.param(e.data)),o.ajax({url:s=""!==r?s+"?"+r:s,type:"DELETE",dataType:"json",success:function(r){t.collection&&t.collection.remove(t),e.success&&e.success.call(t,r)},error:function(r){t._serverErrorHandler(r),e.error&&e.error.call(t,r)}}),this},changedAttributes:function(r){var t={},s=this.toJSON();if(o.each(r,function(r,e){s[r]?s[r]&&s[r]!==e&&("object"==typeof e&&_.isEqual(e,s[r])||(t[r]=e)):"string"==typeof e?""!==o.trim(e)&&(t[r]=e):o.isArray(e)&&0===e.length||(t[r]=e)}),!_.isEmpty(t))return this.addExpand(t),t},addExpand:function(r){},_serverErrorHandler:function(r){var e;400!==r.status&&(e=o.parseJSON(r.responseText||r.data),GH.triggerEvtForInst(GH.RestfulTable.Events.SERVER_ERROR,this,[e,r]))},fetch:function(r){var t=this,s=(r=r||{}).error;this.clear(),r.error=function(r,e){t._serverErrorHandler(e),s&&s.apply(this,arguments)},c.Model.prototype.fetch.call(this,r)}})}(AJS.$,GH.Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.editrow.js' */
!function(l,e){GH.RestfulTable.EditRow=e.View.extend({tagName:"tr",events:{focusin:"_focus",click:"_focus",keyup:"_handleKeyUpEvent"},initialize:function(e){this.$el=l(this.el),this._events=GH.RestfulTable.Events,this.classNames=GH.RestfulTable.ClassNames,this.dataKeys=GH.RestfulTable.DataKeys,this.columns=e.columns,this.isCreateRow=e.isCreateRow,this.allowReorder=e.allowReorder,this.events["click ."+this.classNames.CANCEL]="_cancel",this.delegateEvents(),e.isUpdateMode?this.isUpdateMode=!0:(this._modelClass=e.model,this.model=new this._modelClass),this.bind(this._events.CANCEL,function(){this.disabled=!0}).bind(this._events.SAVE,function(e){this.disabled||this.submit(e)}).bind(this._events.FOCUS,function(e){this.focus(e)}).bind(this._events.BLUR,function(){this.$el.removeClass(this.classNames.FOCUSED),this.disable()}).bind(this._events.SUBMIT_STARTED,function(){this._submitStarted()}).bind(this._events.SUBMIT_FINISHED,function(){this._submitFinished()})},defaultColumnRenderer:function(e){return!1!==e.allowEdit?l("<input type='text' />").addClass("text").attr({name:e.name,value:e.value}):e.value?document.createTextNode(e.value):void 0},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},_handleKeyUpEvent:function(e){27===e.keyCode&&this.trigger(this._events.CANCEL)},_cancel:function(e){return this.trigger(this._events.CANCEL),e.preventDefault(),this},_submitStarted:function(){return this.submitting=!0,this.showLoading().disable().delegateEvents({}),this},_submitFinished:function(){return this.submitting=!1,this.hideLoading().enable().delegateEvents(this.events),this},_focus:function(e){return this.hasFocus()||this.trigger(this._events.FOCUS,e.target.name),this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(e){var t;return this.enable(),t=e?this.$el.find(":input[name="+e+"], #"+e):0===(t=this.$el.find(this.classNames.ERROR+":first")).length?this.$el.find(":input:text:first"):t.parent().find(":input"),this.$el.addClass(this.classNames.FOCUSED),t.focus().trigger("select"),this},disable:function(){var e,t;return l.browser.mozilla&&(t=this.$el.find(":submit")).length&&(e=l("<input type='submit' class='"+this.classNames.SUBMIT+"' />").addClass(t.attr("class")).val(t.val()).data(this.dataKeys.ENABLED_SUBMIT,t),t.replaceWith(e)),this.$el.addClass(this.classNames.DISABLED).find(":submit").attr("disabled","disabled"),this},enable:function(){var e,t;return l.browser.mozilla&&(t=(e=this.$el.find(this.classNames.SUBMIT)).data(this.dataKeys.ENABLED_SUBMIT))&&e.length&&e.replaceWith(t),this.$el.removeClass(this.classNames.DISABLED).find(":submit").removeAttr("disabled"),this},showLoading:function(){return this.$el.addClass(this.classNames.LOADING),this},hideLoading:function(){return this.$el.removeClass(this.classNames.LOADING),this},hasUpdates:function(){return!!this.mapSubmitParams(this.$el.serializeObject())},mapSubmitParams:function(e){return this.model.changedAttributes(e)},submit:function(e){var t,i=this;if(document.activeElement!==window&&l(document.activeElement).blur(),this.isUpdateMode){if(!(t=this.mapSubmitParams(this.$el.serializeObject())))return i.trigger(i._events.CANCEL)}else this.model.clear(),t=this.mapSubmitParams(this.$el.serializeObject());return this.trigger(this._events.SUBMIT_STARTED),this.model.save(t,{success:function(){i.isUpdateMode?i.trigger(i._events.UPDATED,i.model,e):(i.trigger(i._events.CREATED,i.model.toJSON()),i.model=new i._modelClass,i.render({errors:{},values:{}}),i.trigger(i._events.FOCUS)),i.trigger(i._events.SUBMIT_FINISHED)},error:function(e,t,s){400===s.status&&i.renderErrors(t.errors).trigger(i._events.VALIDATION_ERROR,t.errors),i.trigger(i._events.SUBMIT_FINISHED)},silent:!0}),this},renderError:function(e,t){return l("<div />").attr("data-field",e).addClass(this.classNames.ERROR).text(t)},renderErrors:function(e){var s=this;return this.$("."+this.classNames.ERROR).remove(),e&&l.each(e,function(e,t){s.$el.find("[name='"+e+"']").closest("td").append(s.renderError(e,t))}),this},render:function(n){var r=this;return this.$el.empty(),this.allowReorder&&l('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(r.$el),l.each(this.columns,function(e,t){var s,i=n.values[t.id],a=[{name:t.id,value:i,allowEdit:t.allowEdit},n.values,r.model];i&&r.$el.attr("data-"+t.id,i),a=r.isCreateRow&&t.createView?new t.createView({model:r.model}).render(a[0]):t.editView?new t.editView({model:r.model}).render(a[0]):r.defaultColumnRenderer.apply(r,a),s=l("<td />"),"object"==typeof a&&a.done?a.done(function(e){s.append(e)}):s.append(a),t.styleClass&&s.addClass(t.styleClass),s.appendTo(r.$el)}),this.$el.append(this.renderOperations(n.update,n.values)).addClass(this.classNames.ROW+" "+this.classNames.EDIT_ROW),this.trigger(this._events.RENDER,this.$el,n.values),this.$el.trigger(this._events.CONTENT_REFRESHED,[this.$el]),this},renderOperations:function(e){var t=l('<td class="aui-restfultable-operations" />');return e?t.append(l('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Update"})).append(l('<a class="aui-button aui-button-link" href="#" />').addClass(this.classNames.CANCEL).text("Cancel").attr({accesskey:this.cancelAccessKey})):t.append(l('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Add"})),t.add(l('<td class="aui-restfultable-throbber" />'))}})}(AJS.$,GH.Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.customview.js' */
GH.RestfulTable.CustomEditView=GH.RestfulTable.CustomCreateView=GH.RestfulTable.CustomReadView=GH.Backbone.View;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.row.js' */
!function(o,e){GH.RestfulTable.Row=e.View.extend({tagName:"tr",events:{"click .aui-restfultable-editable":"edit"},initialize:function(e){if(e=e||{},this._events=GH.RestfulTable.Events,this.classNames=GH.RestfulTable.ClassNames,this.dataKeys=GH.RestfulTable.DataKeys,this.columns=e.columns,this.allowEdit=e.allowEdit,this.allowDelete=e.allowDelete,!this.events["click .aui-restfultable-editable"])throw new Error("It appears you have overridden the events property. To add events you will need to usea work around. https://github.com/documentcloud/backbone/issues/244");this.index=e.index||0,this.deleteConfirmation=e.deleteConfirmation,this.allowReorder=e.allowReorder,this.$el=o(this.el),this.bind(this._events.CANCEL,function(){this.disabled=!0}).bind(this._events.FOCUS,function(e){this.focus(e)}).bind(this._events.BLUR,function(){this.unfocus()}).bind(this._events.UPDATED,function(){this._showUpdated()}).bind(this._events.MODAL,function(){this.$el.addClass(this.classNames.ACTIVE)}).bind(this._events.MODELESS,function(){this.$el.removeClass(this.classNames.ACTIVE)})},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},defaultColumnRenderer:function(e){if(e.value)return document.createTextNode(e.value.toString())},_showUpdated:function(){var e=this,t=this.$el.addClass(this.classNames.ANIMATING).find("td").css("backgroundColor","#ebf1fd");this.trigger(this._events.ANIMATION_STARTED),e.delegateEvents({}),setTimeout(function(){t.animate({backgroundColor:"white"},function(){t.css("backgroundColor",""),e.trigger(e._events.ANIMATION_FINISHED),o(document).one("mousemove",function(){e.delegateEvents(),e.$el.removeClass(e.classNames.ANIMATING)})})},500)},sync:function(e){this.model.addExpand(e);var t=this;return this.showLoading(),this.model.save(e,{success:function(){t.hideLoading().render(),t.trigger(t._events.UPDATED)},error:function(){t.hideLoading()}}),this},refresh:function(e,t){var s=this;return this.showLoading(),this.model.fetch({success:function(){s.hideLoading().render(),e&&e.apply(this,arguments)},error:function(){s.hideLoading(),t&&t.apply(this,arguments)}}),this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(){return o(this.el).addClass(this.classNames.FOCUSED),this},unfocus:function(){return o(this.el).removeClass(this.classNames.FOCUSED),this},showLoading:function(){return this.$el.addClass(this.classNames.LOADING),this},hideLoading:function(){return this.$el.removeClass(this.classNames.LOADING),this},edit:function(e){e=(o(e.target).is("."+this.classNames.EDITABLE)?o(e.target):o(e.target).closest("."+this.classNames.EDITABLE)).attr("data-field-name");return this.trigger(GH.RestfulTable.Events.EDIT_ROW,e),this},renderOperations:function(){var t=this;if(!1!==this.allowDelete)return o("<a href='#' class='aui-button' />").addClass(this.classNames.DELETE).text("Delete").click(function(e){e.preventDefault(),t.destroy()})},destroy:function(){var t;this.deleteConfirmation?((t=GH.Dialog.create({width:500,height:200,id:"delete-entity-"+this.model.get("id")})).addHeader(this.deleteConfirmation.header),t.addPanel("","panel"),t.getCurrentPanel().html(this.deleteConfirmation.content(this.model.toJSON())),t.addButtonPanel(),t.addButton("Delete",_.bind(function(e){this.model.destroy(),t.hide()},this),"aui-button"),GH.Dialog.addCancelButton(t),t.show()):this.model.destroy()},render:function(){var l=this,d=this.model.toJSON(),e=o("<td class='aui-restfultable-operations' />").append(this.renderOperations({},d)),t=o("<td class='aui-restfultable-throbber' />");return this.$el.removeClass(this.classNames.DISABLED+" "+this.classNames.FOCUSED+" "+this.classNames.LOADING+" "+this.classNames.EDIT_ROW).addClass(this.classNames.READ_ONLY).empty(),this.allowReorder&&o('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(l.$el),this.$el.attr("data-id",this.model.id),o.each(this.columns,function(e,t){var s=o("<td />"),a=d[t.id],i=t.fieldName||t.id,n=[{name:i,value:a,allowEdit:t.allowEdit},d,l.model];a&&l.$el.attr("data-"+t.id,a),n=t.readView?new t.readView({model:l.model}).render(n[0]):l.defaultColumnRenderer.apply(l,n),!1!==l.allowEdit&&!1!==t.allowEdit?(i=o("<span />").addClass(l.classNames.EDITABLE).append('<span class="aui-icon icon-edit-sml" />').append(n).attr("data-field-name",i),s=o("<td />").append(i).appendTo(l.$el),n&&""!=o.trim(n)||(s.addClass(l.classNames.NO_VALUE),i.html(o("<em />").text(this.emptyText||"Enter value")))):s.append(n),t.styleClass&&s.addClass(t.styleClass),s.appendTo(l.$el)}),this.$el.append(e).append(t).addClass(this.classNames.ROW+" "+this.classNames.READ_ONLY),this.trigger(this._events.RENDER,this.$el,d),this.$el.trigger(this._events.CONTENT_REFRESHED,[this.$el]),this}})}(AJS.$,GH.Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/ServiceDeskBoardConfigBridge.js' */
!function(){var i=void 0,n=new Promise(function(n){return i=n});define("jira-servicedesk/boards/configuration/bridge",function(){return function(n){return i(n)}}),define("jira-servicedesk/boards/configuration/api",function(){return n})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/UIFWorkingDaysConfig.js' */
define("jira-agile/rapid/configuration/UIFWorkingDaysConfig",[],function(){"use strict";var r=require("jira/analytics/web-client"),i=require("jira-agile/rapid/configuration/working-days-config/api");return{init:function(n){var e=document.querySelector("#ghx-config-time");e&&n&&i.then(function(i){i.render(e,n)}).catch(function(i){r.sendTrackEvent({source:"boardSettingsScreen",actionSubject:"uifWorkingDaysConfig",action:"failed",actionSubjectId:"loadUIFWorkingDaysConfig"})})}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/UIFWorkingDaysConfigBridge.js' */
!function(){var n=void 0,i=new Promise(function(i){return n=i});define("jira-agile/rapid/configuration/working-days-config/bridge",function(){return function(i){return n(i)}}),define("jira-agile/rapid/configuration/working-days-config/api",function(){return i})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/UIFColumnsConfig.js' */
define("jira-agile/rapid/configuration/UIFColumnsConfig",[],function(){"use strict";var t=require("jira/analytics/web-client"),n=require("jira-agile/rapid/configuration/columns-config/api");return{init:function(i){var e=document.querySelector("#columns.ghx-page-panel-content-item");e&&i&&n.then(function(n){n.render(e,i)}).catch(function(n){t.sendTrackEvent({source:"boardSettingsScreen",actionSubject:"uifColumnsConfig",action:"failed",actionSubjectId:"loadUIFColumnsConfig"})})}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/UIFColumnsConfigBridge.js' */
!function(){var i=void 0,n=new Promise(function(n){return i=n});define("jira-agile/rapid/configuration/columns-config/bridge",function(){return function(n){return i(n)}}),define("jira-agile/rapid/configuration/columns-config/api",function(){return n})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/BoardAdminWarning.js' */
define("jira-agile/rapid/configuration/BoardAdminWarning",[],function(){var a={};function c(n,i,e){a._warningDialog(n,i,e)}return a.init=function(n){var i=n.warnBeforeEditingOwner,n=n.warnBeforeEditingLocation;this.warnBeforeEditingOwner=i,this.warnBeforeEditingLocation=n},a.confirmBoardAdminChange=function(n){var i=this,t=n.userKeys,s=n.groupKeys;return new Promise(function(o,r){i.warnBeforeEditingOwner?AJS.$.ajax({url:AJS.contextPath()+"/rest/api/2/user?expand=groups",type:"get",dataType:"json",data:{username:GH.UserData.getUserName()}}).done(function(n){var i,e,a=n.key||n.name;t.includes(a)||(i=n.groups.items,e=s,i.some(function(n){return e.includes(n.name)}))?o():(n=o,i=r,c(GH.tpl.boardAdminWarning.adminWarningText(),n,i))}).fail(function(){o()}):o()})},a.confirmLocationChange=function(n){var i=this,o=n.value,r=n.name;return new Promise(function(e,a){i.warnBeforeEditingLocation?AJS.$.ajax({url:AJS.contextPath()+"/rest/api/2/mypermissions?projectId="+o+"&permissions=ADMINISTER_PROJECTS",type:"get",dataType:"json"}).done(function(n){var i=n.permissions.ADMINISTER_PROJECTS.havePermission;"boolean"!=typeof i||i?e():(n=e,i=a,c(GH.tpl.boardAdminWarning.locationWarningText({name:r}),n,i))}).fail(function(){e()}):e()})},a._warningDialog=function(n,i,e){GH.ConfirmDialog.create("ghx-admin-confirm-dialog",{content:n,contentEscaping:!1,onConfirmFn:i,onCancelFn:e,height:230}).show()},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/BoardAdminWarning.soy' */
// This file was automatically generated from BoardAdminWarning.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.boardAdminWarning.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.boardAdminWarning == 'undefined') { GH.tpl.boardAdminWarning = {}; }


GH.tpl.boardAdminWarning.adminWarningText = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml('Removing yourself as a board administrator means you\x27ll no longer be able to change any board settings. Do you still want to do this?');
};
if (goog.DEBUG) {
  GH.tpl.boardAdminWarning.adminWarningText.soyTemplateName = 'GH.tpl.boardAdminWarning.adminWarningText';
}


GH.tpl.boardAdminWarning.locationWarningText = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('If you move this board into the \x3cstrong\x3e{0}\x3c/strong\x3e project, you\x27\x27ll no longer be able to change any board settings. Do you still want to do this?',typeof (opt_data.name) === 'number' ? opt_data.name : soy.$$escapeHtml(opt_data.name))));
};
if (goog.DEBUG) {
  GH.tpl.boardAdminWarning.locationWarningText.soyTemplateName = 'GH.tpl.boardAdminWarning.locationWarningText';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardLayoutConfigTable.js' */
!function(u,c,f,h,m){"use strict";function e(e,t,r){this.mode=e,this.model=t,this.el=f(r)}e.prototype={render:function(){var n,t,i=this,a=this.model,e=a.canEdit,l=this.mode,r=c.filter(a.currentFields,function(e){return e.mode===this.mode},this),d=this._getAvailableCardLayoutFields(!1);function o(e){e.forEach(function(e){f(e).on(GH.RestfulTable.Events.SERVER_ERROR,s)})}function s(e,t,r){n.refresh().done(o)}0===r.length&&0===d.length||(this.el.html("<table></table>"),n=this.restfulTable=new h({el:this.el.find("table"),resources:{all:function(e){return e(r)},self:m.buildRestUrl("/cardlayout/"+a.rapidViewId+"/"+this.mode+"/field/")},columns:this._getTableColumns(),allowEdit:!1,allowDelete:e,allowReorder:e,allowCreate:e}),this.model.canEdit&&(o(n.getModels()),n.refresh=function(){var r=f.Deferred();return n.getCreateRow().render({values:{},errors:{}}),n.getModels().fetch({success:function(e,t){n.$tbody.empty(),n.renderRows(t.fields),a.currentFields=c.filter(a.currentFields,function(e){return e.mode!==l}),a.currentFields.concat(t.fields),r.resolve(e)}}),r.promise()},f(n).bind(h.Events.ROW_ADDED,function(e,t,r){n.refresh().done(o),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("cardLayout",i._parseFieldLayoutTrackEventAttributes(h.Events.ROW_ADDED,t&&t.model&&t.model.attributes))}),f(n).bind(h.Events.ROW_REMOVED,function(e,t){n.getCreateRow().render({values:{},errors:{}}),n.refresh().done(o),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("cardLayout",i._parseFieldLayoutTrackEventAttributes(h.Events.ROW_REMOVED,t&&t.model&&t.model.attributes))}),n.getCreateRow().bind(GH.RestfulTable.Events.VALIDATION_ERROR,function(e){n.refresh().done(o),u.warning(t.el,{body:AJS.escapeHtml(e.cardlayoutConfig),insert:"prepend"})})),t=this)},_getTableColumns:function(){return[{id:"fieldId",header:"Field Name",fieldName:"fieldId",readView:h.CustomReadView.extend({render:function(){return GH.tpl.cardlayoutconfig.renderFieldCell(this.model.toJSON())}}),createView:this._getCustomCreateView()}]},_getCustomCreateView:function(){var i=this;return h.CustomCreateView.extend({render:function(e){var t=this,r=f('<select class="select"></select>').attr("name",e.name),n=i._getAvailableCardLayoutFields(!1);return n.length?r.html(this.renderOptions(n)):r.hide(),i._getAvailableCardLayoutFields(!0).done(function(e){(n=e.fields).sort(function(e,t){return e.name.localeCompare(t.name)}),n.length?(i.restfulTable.getCreateRow().enable(),r.html(t.renderOptions(n)).show()):(r.hide(),i.restfulTable.getCreateRow().disable())}),r},renderOptions:function(e){return c.reduce(e,function(e,t){t=f("<option></option>").val(t.fieldId).text(t.name);return e.add(t)},f())}})},_getAvailableCardLayoutFields:function(e){var t=this.model;return e?m.get({url:"/cardlayout/"+t.rapidViewId+"/"+this.mode+"/available"},"cardLayoutConfig").done(function(e){t.availableFields=e.fields}):t.availableFields},_parseFieldLayoutTrackEventAttributes:function(e,t){var r=t||{},n=r.fieldId,t=r.isValid,r=r.mode;return{event:e,fieldId:/^customfield_\d+$/.test(n)?n.replace(/[0-9]/g,"x"):n,isValid:t,mode:r}}},GH.CardLayoutConfigTable=e}(AJS.messages,_,AJS.$,GH.RestfulTable,GH.Ajax);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardLayoutConfig.js' */
define("jira-agile/rapid/configuration/CardLayoutConfig",["jquery","jira-agile/rapid/ajax","jira-agile/rapid/ui/SPConfigView"],function(a,n,o){"use strict";var i=GH.CardLayoutConfigTable;function t(n,i){this.model=n,this.cardLayoutConfig=n.cardLayoutConfig,this.isSprintSupportEnabled=n.isSprintSupportEnabled,this.isKanPlanEnabled=n.isKanPlanEnabled,this.canEdit=n.canEdit,this.showDaysInColumn=n.showDaysInColumn,this.rapidViewId=n.rapidListConfig.rapidViewId,this.el=a(i)}return t.prototype={render:function(){this.el.html(GH.tpl.cardlayoutconfig.renderCardLayoutConfig({isSprintSupportEnabled:this.isSprintSupportEnabled,isKanPlanEnabled:this.isKanPlanEnabled,canEdit:this.canEdit,showDaysInColumn:this.showDaysInColumn})),(this.isSprintSupportEnabled||this.isKanPlanEnabled)&&new i("planMode",this.cardLayoutConfig,"#ghx-card-layout-config-plan").render(),new i("workMode",this.cardLayoutConfig,"#ghx-card-layout-config-work").render(),this.initEvents()},getDaysInColumnCheckbox:function(){return this.el.find(".js-config-load-days-toggle")},initEvents:function(){this.getDaysInColumnCheckbox().change(this.saveShowDaysInColumn.bind(this))},initCardLayoutThenRender:function(n){var i=this;a(".ghx-throbber").remove(),_.isUndefined(this.cardLayoutConfig)&&"cardLayout"===n&&(o.renderSpinner(),GH.Ajax.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),cardLayoutConfig:!0},deferErrorHandling:!0},"rapidBoardConfig").done(function(n){i.cardLayoutConfig=n.cardLayoutConfig,i.render(),a(".ghx-throbber").remove()}))},saveShowDaysInColumn:function(){var i=this,a={rapidViewId:this.rapidViewId,showDaysInColumn:this.getDaysInColumnCheckbox().prop("checked")};n.put({url:"/rapidviewconfig/showDaysInColumn",data:a}).done(function(n){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("showDaysInColumn",{oldValId:i.showDaysInColumn,newValId:a.showDaysInColumn}),i.showDaysInColumn=a.showDaysInColumn}).fail(function(){i.getDaysInColumnCheckbox().prop("checked",!a.showDaysInColumn)})}},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardLayoutConfig.soy' */
// This file was automatically generated from CardLayoutConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.cardlayoutconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.cardlayoutconfig == 'undefined') { GH.tpl.cardlayoutconfig = {}; }


GH.tpl.cardlayoutconfig.renderCardLayoutConfig = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Card layout') + '</h2><p>' + soy.$$escapeHtml('Cards can be configured to show up to three extra fields.') + '</p>' + ((opt_data.isSprintSupportEnabled || opt_data.isKanPlanEnabled) ? '<h5>' + soy.$$escapeHtml('Backlog') + '</h5><div id="ghx-card-layout-config-plan" class="ghx-margin-top"></div>' : '') + '<h5>' + soy.$$escapeHtml(opt_data.isSprintSupportEnabled ? 'Active sprints' : 'Kanban board') + '</h5><div id="ghx-card-layout-config-work" class="ghx-margin-top"></div><form class="aui"><div class="field-group"><label for="ghx-config-load-days-toggle">' + soy.$$escapeHtml('Days in column') + '</label><aui-toggle id="ghx-config-load-days-toggle" class="js-config-load-days-toggle" label="' + soy.$$escapeHtml('Days in column') + '"' + ((! opt_data.canEdit) ? ' disabled="disabled"' : '') + ((opt_data.showDaysInColumn) ? ' checked="checked"' : '') + '></aui-toggle><div class="description">' + soy.$$escapeHtml('Show a visual indicator on each card that represents the time spent in the column. This can help identify slow moving issues.') + '</div></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.cardlayoutconfig.renderCardLayoutConfig.soyTemplateName = 'GH.tpl.cardlayoutconfig.renderCardLayoutConfig';
}


GH.tpl.cardlayoutconfig.renderFieldCell = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name) + ((! opt_data.isValid) ? ' <span title="' + soy.$$escapeHtml('This field is currently unavailable. It may have been removed from the system.') + '" class="ghx-icon ghx-icon-warning"></span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.cardlayoutconfig.renderFieldCell.soyTemplateName = 'GH.tpl.cardlayoutconfig.renderFieldCell';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/RoadmapConfig.js' */
define("jira-agile/rapid/configuration/RoadmapConfig",[],function(){"use strict";function r(e,a,n){d.sendOperationalEvent({source:"roadmapProjectSettingsScreen",action:"toggled",actionSubject:e,objectType:"board",objectId:u.boardId,attributes:{boardType:u.isScrum?"scrum":"kanban",projectType:"CMP",status:a||c.includes(n)?"success":"fail",statusCode:n}})}function i(e,a,n){d.sendOperationalEvent({source:"roadmapProjectSettingsScreen",action:"selected",actionSubject:e,objectType:"board",objectId:u.boardId,attributes:{boardType:u.isScrum?"scrum":"kanban",projectType:"CMP",status:a||c.includes(n)?"success":"fail",statusCode:n}})}function a(e,a){d.sendUIEvent({source:"roadmapProjectSettingsScreen",action:"changed",actionSubject:"radio",actionSubjectId:e,objectType:"board",objectId:u.boardId,attributes:a})}function n(e){P(u.prefersChildIssueDatePlanning),0<(e=e.getGlobalErrors()).length&&e[0].message&&GH.Notification.showError("Error",e[0].message,!0)}function o(){AJS.$("#ghx-roadmap-warning-message-container").hide()}function s(){var e=p,a={learnMoreAboutEnableUrl:"https://confluence.atlassian.com/jirasoftwarecloud/enable-and-disable-the-roadmap-1004952906.html",learnMoreAboutRoadmapUrl:"https://confluence.atlassian.com/jirasoftwarecloud/create-manage-and-visualize-your-epics-on-the-roadmap-1004952901.html",learnMoreAboutEnableTimelineUrl:"https://support.atlassian.com/jira-software-cloud/docs/enable-and-disable-the-timeline",learnMoreAboutTimelineUrl:"https://support.atlassian.com/jira-software-cloud/docs/create-manage-and-visualize-work-on-the-timeline",boardName:u.boardName,projectName:u.projectName,isRoadmapEnabled:u.isRoadmapEnabled,isBoardCrossProject:u.isBoardCrossProject,isToggleDatePlanningEnabled:u.isChildIssuePlanningEnabled,isScrum:u.isScrum,isRenameRoadmapToTimelineEnabled:l,prefersChildIssueDatePlanning:u.prefersChildIssueDatePlanning};AJS.$("#ghx-config-roadmap").html(GH.tpl.roadmapconfig.renderRoadmapConfig(a)),AJS.$("#ghx-config-enable-roadmap").change(e),AJS.$("#ghx-config-enable-date-planning").change(m),AJS.$('[name="ghx-scrum-schedule-method"]').change(f),AJS.$("#ghx-roadmap-message-edit-filter").on("click",S),u.isBoardCrossProject&&x()}var e=require("jira/container-api").APIs.getNavigationAPI,d=require("jira/analytics/web-client"),t=require("jira/featureflags/feature-manager"),c=[400,404,401,403,429],l=t.isFeatureEnabled("confluence.frontend.rename-roadmap-to-timeline"),u={boardId:0,boardName:"",isRoadmapEnabled:!1,projectName:"",isBoardCrossProject:!1,isChildIssuePlanningEnabled:!1,isScrum:!1,prefersChildIssueDatePlanning:!1},g=function(a){JIRA.API.getSidebar().then(function(e){return e.updateData({rapidView:a},!0)}),e().then(function(e){return e.updateData()})},p=function(){var e="/roadmaps/classic/board/"+u.boardId+"/enableRoadmapWithValidation";if(!1===Boolean(AJS.$("#ghx-config-enable-roadmap").prop("checked")))return b("roadmapConfigToggle",{enabled:!1,crossProject:u.isBoardCrossProject}),void GH.Ajax.put({url:"/roadmaps/classic/board/"+u.boardId+"/disableRoadmap"}).done(function(){u.isRoadmapEnabled=!1,C()}).fail(function(e){return h(e)}).always(function(){return g(u.boardId)});GH.Ajax.put({url:e}).done(function(e){e.success&&e.success.crossProject?(u.isBoardCrossProject=e.success.crossProject,x(),j(!1),C()):(u.isRoadmapEnabled=e.success.roadmapEnabled,u.isRoadmapEnabled&&A(),o(),g(u.boardId)),b("roadmapConfigToggle",{enabled:!0,crossProject:u.isBoardCrossProject})}).fail(function(e){return h(e)})},m=function(){var o=!0===Boolean(AJS.$("#ghx-config-enable-date-planning").prop("checked"));GH.Ajax.put({url:"roadmaps/features/board/"+u.boardId+"/"+(o?"enableChildPlanning":"disableChildPlanning")}).done(function(e,a,n){(u.isChildIssuePlanningEnabled=o)?(GH.Notification.showSuccess(l?"\u003cstrong\u003eBase-level issue planning is enabled\u003c/strong\u003e\u003cbr /\u003eYou can now schedule and track child issues on your timeline.":"\u003cstrong\u003eBase-level issue planning is enabled\u003c/strong\u003e\u003cbr /\u003eYou can now schedule and track child issues on your roadmap."),E()):T(),r("roadmapChildIssuesScheduling",!0,n.status)}).fail(function(e,a){r("roadmapChildIssuesScheduling",!1,a.status),h(e)}),b("roadmapChildIssuePlanning",{toggleOn:o,boardId:u.boardId,boardType:u.isScrum?"scrum":"kanban",projectType:"CMP"})},b=function(e,a){d.sendUIEvent({source:"roadmapProjectSettingsScreen",action:"changed",actionSubject:"toggle",actionSubjectId:e,objectType:"board",objectId:u.boardId,attributes:a})},h=function(e){var a=u.isRoadmapEnabled;j(a);var n=u.isChildIssuePlanningEnabled;I(n),a?(n?E:T)():(E(),(n?A:C)());e=e.getGlobalErrors();0<e.length&&e[0].message&&GH.Notification.showError("Error",e[0].message,!0)},f=function(){var e=AJS.$("[name='ghx-scrum-schedule-method']:checked").val(),o="DATE"===e;GH.Ajax.put({url:"roadmaps/features/board/"+u.boardId+"/"+(o?"enablePreferChildIssueDatePlanning":"disablePreferChildIssueDatePlanning")}).done(function(e,a,n){u.prefersChildIssueDatePlanning=o,GH.Notification.showSuccess("\u003cstrong\u003eSetting saved!\u003c/strong\u003e"),i("roadmapChildIssuesSchedulingMethod",!0,n.status)}).fail(function(e,a){i("roadmapChildIssuesSchedulingMethod",!1,a.status),n(e)}),a("roadmapChildIssuePlanningMode",{childIssuePlanningMode:e,boardId:u.boardId,boardType:u.isScrum?"scrum":"kanban",projectType:"CMP"})},S=function(){GH.RapidBoard.Config.setTab("filter")},j=function(e){AJS.$("#ghx-config-enable-roadmap").prop("checked",e)},I=function(e){AJS.$("#ghx-config-enable-date-planning").prop("checked",e)},P=function(e){AJS.$('[name="ghx-scrum-schedule-method"][value="'+(e?"DATE":"SPRINT")+'"]').prop("checked",!0)},C=function(){AJS.$("#ghx-roadmap-child-issue-scheduling-section, .ghx-roadmap-config-divider").addClass("hide")},A=function(){AJS.$("#ghx-roadmap-child-issue-scheduling-section, .ghx-roadmap-config-divider").removeClass("hide")},E=function(){u.isScrum&&AJS.$("#ghx-roadmap-schedule-method-section").removeClass("hide")},T=function(){u.isScrum&&AJS.$("#ghx-roadmap-schedule-method-section").addClass("hide")},x=function(){AJS.$("#ghx-roadmap-warning-message-container").show()};return{init:function(e){u.boardId=e.id,u.boardName=e.name,u.isRoadmapEnabled=e.isRoadmapEnabled,u.isBoardCrossProject=e.isBoardCrossProject,u.projectName=e.boardLocationModel.name,u.isScrum="SPRINT"===e.backlogStrategy,u.isChildIssuePlanningEnabled=e.isChildIssuePlanningEnabled||!1,u.prefersChildIssueDatePlanning=e.prefersChildIssueDatePlanning||!1,s()},render:s,onChangeEnableRoadmap:p,onRoadmapTabSelection:function(){var e="/roadmaps/classic/board/"+u.boardId+"/crossProject";GH.Ajax.get({url:e}).done(function(e){u.isBoardCrossProject=e.crossProject,e.crossProject?(x(),u.isRoadmapEnabled?(A(),AJS.$("#ghx-config-enable-roadmap").removeProp("disabled")):(C(),AJS.$("#ghx-config-enable-roadmap").prop("disabled",!0))):(o(),AJS.$("#ghx-config-enable-roadmap").removeProp("disabled"))}).fail(function(e){e=e.getGlobalErrors();0<e.length&&e[0].message&&GH.Notification.showError("Error",e[0].message,!0)})},onToggleChildIssuePlanning:m,onRadioChangeScheduleMethod:f,fireScreenAnalytic:function(){d.sendScreenEvent("roadmapProjectSettingsScreen",null,{isRoadmapEnabled:u.isRoadmapEnabled,isBoardCrossProject:u.isBoardCrossProject,boardType:u.isScrum?"scrum":"kanban",projectType:"CMP"})},state:u,updateBoardName:function(e){u.boardName=e,s()}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/RoadmapConfig.soy' */
// This file was automatically generated from RoadmapConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.roadmapconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.roadmapconfig == 'undefined') { GH.tpl.roadmapconfig = {}; }


GH.tpl.roadmapconfig.renderRoadmapConfig = function(opt_data, opt_ignored) {
  return '<div class="roadmap-config-header"><h2>' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? 'Timeline' : 'Roadmap') + '</h2></div><div class="content"><div id="ghx-roadmap-warning-message-container"><div id="ghx-roadmap-inline-warning" class="aui-message aui-message-warning roadmap-cross-project-warning"><p class="title"><strong>' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? 'Timelines are designed for single projects' : 'Roadmaps are designed for single projects') + '</strong></p><p>' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Your timeline isn\x27\x27t available because the board filter contains multiple projects. To use your timeline, adjust the board filter to include issues from \x3cstrong\x3e{0}\x3c/strong\x3e only.',typeof (opt_data.projectName) === 'number' ? opt_data.projectName : soy.$$escapeHtml(opt_data.projectName))) : soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Your roadmap isn\x27\x27t available because the board filter contains multiple projects. To use your roadmap, adjust the board filter to include issues from \x3cstrong\x3e{0}\x3c/strong\x3e only.',typeof (opt_data.projectName) === 'number' ? opt_data.projectName : soy.$$escapeHtml(opt_data.projectName)))) + '&nbsp;<a href=' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? opt_data.learnMoreAboutEnableTimelineUrl : opt_data.learnMoreAboutEnableUrl) + ' target="_blank">' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? 'Learn more about enabling the timeline' : 'Learn more about enabling the roadmap') + '</a></p><p><a id="ghx-roadmap-message-edit-filter" tabindex="0">' + soy.$$escapeHtml('Edit Filter Query') + '</a></p></div></div><p><form class="aui"><div class="field-group"><label for="ghx-config-enable-roadmap" class="bold-label">' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? AJS.format('Enable the timeline for {0}',opt_data.boardName) : AJS.format('Enable the roadmap for {0}',opt_data.boardName)) + '</label><aui-toggle id="ghx-config-enable-roadmap" label=""' + ((opt_data.isRoadmapEnabled) ? ' checked="checked"' : '') + ((opt_data.isBoardCrossProject && opt_data.isRoadmapEnabled != true) ? ' aria-disabled="true" disabled="true"' : '') + '></aui-toggle></div></form></p><p><span>' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? 'Create, manage, and visualize your team\x27s epics on the timeline. Gain visibility and insight into large pieces of work ahead of time by tracking your team\x27s progress, mapping dependencies, and drilling into the details of your project.' : 'Create, manage, and visualize your team\x27s epics on the roadmap. Gain visibility and insight into large pieces of work ahead of time by tracking your team\x27s progress, mapping dependencies, and drilling into the details of your project.') + '</span><a href=' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? opt_data.learnMoreAboutTimelineUrl : opt_data.learnMoreAboutRoadmapUrl) + ' target="_blank">&nbsp;' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? 'Learn more about the timeline' : 'Learn more about the roadmap') + '</a></p><div class="ghx-roadmap-illustration"></div><div class="ghx-roadmap-config-divider ' + soy.$$escapeHtml(opt_data.isRoadmapEnabled != true ? 'hide' : '') + '"></div><form id="ghx-roadmap-child-issue-scheduling-section" class="aui ' + soy.$$escapeHtml(opt_data.isRoadmapEnabled != true ? 'hide' : '') + '"><div class="field-group"><label for="ghx-config-enable-date-planning" class="bold-label">' + soy.$$escapeHtml('Child-level issue scheduling') + '</label><aui-toggle id="ghx-config-enable-date-planning" label=""' + ((opt_data.isToggleDatePlanningEnabled) ? ' checked="checked"' : '') + ((opt_data.isRoadmapEnabled != true) ? ' aria-disabled="true" disabled="true"' : '') + '></aui-toggle></div><div class="ghx-roadmap-config-section"><div class="ghx-roadmap-config-section-inner"><p>' + soy.$$filterNoAutoescape(opt_data.isRenameRoadmapToTimelineEnabled ? 'Show timeline bars for base-level work such as stories, tasks, or bugs on your timeline.' : 'Show timeline bars for base-level work such as stories, tasks, or bugs on your roadmap.') + '</p>' + ((opt_data.isScrum) ? '<div id="ghx-roadmap-schedule-method-section" class="' + soy.$$escapeHtml(opt_data.isToggleDatePlanningEnabled ? '' : 'hide') + '"><fieldset class="group"><div class="radio"><input class="radio" type="radio" id="ghx-config-schedule-scrum-child-issues-by-sprint" name="ghx-scrum-schedule-method" value="SPRINT"' + ((opt_data.prefersChildIssueDatePlanning != true) ? ' checked="checked"' : '') + '/><label for="ghx-config-schedule-scrum-child-issues-by-sprint">' + soy.$$escapeHtml(AJS.format('Schedule child issues by sprints','<b>','</b>')) + '<span class="ghx-roadmap-radio-description">' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? 'The schedule bars of child-level issues show on the timeline based on their sprint dates.' : 'The schedule bars of child-level issues show on the roadmap based on their sprint dates.') + '</span></label></div><div class="radio"><input class="radio" type="radio" id="ghx-config-schedule-scrum-child-issues-by-date" name="ghx-scrum-schedule-method" value="DATE"' + ((opt_data.prefersChildIssueDatePlanning) ? ' checked="checked"' : '') + '/><label for="ghx-config-schedule-scrum-child-issues-by-date">' + soy.$$escapeHtml(AJS.format('Schedule child issues by dates','<b>','</b>')) + '<span class="ghx-roadmap-radio-description">' + soy.$$escapeHtml(opt_data.isRenameRoadmapToTimelineEnabled ? 'The schedule bars of child-level issues show on the timeline based on their start and due dates.' : 'The schedule bars of child-level issues show on the roadmap based on their start and due dates.') + '</span></label></div></fieldset><p id="ghx-roadmap-radio-footer">This setting also impacts rolled-up dates</p></div>' : '') + '</div><div class="ghx-roadmap-' + soy.$$escapeHtml(opt_data.isScrum ? 'scrum' : 'kanban') + '-illustration"></div></div></form><div class="ghx-roadmap-config-spacer"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.roadmapconfig.renderRoadmapConfig.soyTemplateName = 'GH.tpl.roadmapconfig.renderRoadmapConfig';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/InsightsConfig.js' */
define("jira-agile/rapid/configuration/InsightsConfig",[],function(){"use strict";function i(){var n=document.querySelector("#ghx-config-insights");n&&e.then(function(i){i.render(n)}).catch(function(i){console.log("InsightsConfig render failed",i)})}var e=require("jira-agile/rapid/configuration/insightsconfig/api");return{init:function(){i()},render:i}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/InsightsConfigBridge.js' */
!function(){var n=void 0,i=new Promise(function(i){return n=i});define("jira-agile/rapid/configuration/insightsconfig/bridge",function(){return function(i){return n(i)}}),define("jira-agile/rapid/configuration/insightsconfig/api",function(){return i})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/RapidViewConfiguration.js' */
var _extends=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var e,d=arguments[a];for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(i[e]=d[e])}return i};!function(){"use strict";var d=require("jira/analytics/web-client"),i=require("jira-agile/rapid/analytics-tracker"),l=require("jira-agile/rapid/configuration/CardLayoutConfig"),f=require("jira-agile/rapid/configuration/RoadmapConfig"),c=require("jira-agile/rapid/configuration/InsightsConfig"),u=require("jira-agile/rapid/configuration/UIFWorkingDaysConfig"),B=require("jira-agile/rapid/configuration/UIFColumnsConfig"),a=require("jira-agile/rapid/events"),m=require("jira-agile/rapid/configuration/BoardAdminWarning"),e=require("jira-agile/rapid/ui/SPConfig"),n=require("jira-agile/rapid/ui/SPConfigView"),o=require("jira/atlaskit/breadcrumbs"),C=require("jira/featureflags/feature-manager"),H=require("jira-agile/rapid/deferred-resources-loader"),G=require("jira-servicedesk/boards/configuration/api"),r=new i("gh.config.tab");function t(i){if(i)return AJS.$("#"+i.replace(/(!|"|#|\$|%|&|'|\(|\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|\\|\]|\^|`|\{|\||\}|~)/g,"\\$1"))}function s(i){return i&&0<t(i).length}function g(i){return"boardSettings"+i.replace(/^\w/,function(i){return i.toUpperCase()})+"Screen"}GH.RapidBoard.Config={},GH.RapidBoard.Config.BoardAdmins={editData:null},GH.RapidBoard.Config.analytics={fieldChange:new i("gh.config.field"),sendBoardUpdatedTrackEvent:function(i,a){var e=GH.RapidBoard.State.getRapidViewId(),e={containerType:GH.RapidViewConfig.currentData.data.locationType,objectType:"board",objectId:e,attributes:{boardId:e,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),updatedItems:[_extends({name:i},a)]},action:"updated",actionSubject:"board",actionSubjectId:e,source:g(GH.RapidBoard.State.getSelectedConfigTab())};"project"===e.containerType&&JIRA.API&&JIRA.API.Projects&&(e.containerId=JIRA.API.Projects.getCurrentProjectId()),d.sendTrackEvent(e)},tabChange:{trigger:function(i){d.sendScreenEvent(g(i),null,{boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()}),r.trigger(i+".view")}}},GH.RapidBoard.Config.BoardAdmins.analytics={update:new i("gh.config.boardadmins","update")},GH.RapidBoard.Config.defaultTab="filter",GH.RapidBoard.Config.storedTabKey="selectedConfigTab",GH.RapidBoard.Config.events=new a,GH.RapidBoard.Config.BACKLOG_COLUMN_STATUS_UPDATE="backlog.column.status.update",GH.RapidBoard.Config.LOCATION_CHANGED="location.changed",GH.RapidBoard.Config.init=function(){GH.RapidBoard.Config.events.trigger("before:renderBoardConfig"),GH.Dialog.CreateView.init(),GH.RapidBoard.Config.loadEditModel(),GH.RapidBoard.Config.initRapidViewNameEdit(),GH.RapidBoard.Config.initRapidViewBoardAdminsEdit(),GH.PersistentMessages.CreateViewMessage.renderMessage()},GH.RapidBoard.Config.loadEditModel=function(){var i,a,e=GH.State.toViewState(window.location.href).rapidView;function d(i){return GH.Ajax.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:e,cardLayoutConfig:i},deferErrorHandling:!0},"rapidBoardConfig")}e?(i=GH.Ajax.get({url:"/xboard/configuration-tabs",data:{rapidViewId:e},deferErrorHandling:!0}),a="cardLayout"==GH.RapidBoard.State.getSelectedConfigTab()?d():d(!1),AJS.$.when(a,i).done(function(i,a){i=i[0],a=a[0].values;GH.RapidBoard.Config.renderEditScreen(i,a)}).fail(GH.RapidViewConfig.handleRapidLoadError)):GH.RapidBoard.gotoManageViewsPage()},GH.RapidBoard.Config.editedRapidViewId=void 0,GH.RapidBoard.Config.renderEditScreen=function(d,i){var a=require("jira/util/events/types"),e=require("includes/js/rapid/configuration/BoardLocationConfig");GH.RapidBoard.State.setRapidViewId(d.id),GH.RapidViewConfig.storeGlobalConfig(d.globalConfig);var n=d.isSprintSupportEnabled,o=AJS.$("body");o.removeClass("ghx-sprint-support ghx-no-sprint-support ghx-days-in-column-enabled ghx-days-in-column-disabled"),d.showDaysInColumn?o.addClass("ghx-days-in-column-enabled"):o.addClass("ghx-days-in-column-disabled"),n?o.addClass("ghx-sprint-support"):o.addClass("ghx-no-sprint-support"),o.addClass("ghx-board-configure"),AJS.$("#ghx-content-main").html(GH.tpl.rapid.view.renderConfigurationTabs({rapidViewId:d.id,configurationTabs:i})),AJS.$.support.touch&&AJS.$("#gh").removeClass("ghx-no-touch").addClass("ghx-touch"),GH.JQLAutoComplete.setModel(d),GH.RapidBoard.Config.renderHeader(d),GH.RapidBoard.Config.renderViewNameForm(d),_.extend(GH.RapidBoard.Config.BoardAdmins,{model:d.boardAdmins,canEdit:d.canEdit,canUsePicker:d.canUseBoardAdminsPicker}),m.init(d),GH.RapidBoard.Config.renderViewBoardAdminsForm(),AJS.$("#ghx-view-board-configuration-main-form").on("submit",function(i){return i.preventDefault(),!1});var r=new e(AJS.$("#ghx-view-board-location-edit"));function t(e){return Object.assign({},d,{selectedCallback:function(a){var i=d.boardLocationModel;GH.RapidBoard.Config.events.trigger(GH.RapidBoard.Config.LOCATION_CHANGED),GH.Ajax.put({url:"/rapidviewconfig/boardLocation",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),locationType:a.projectId?e.project:a.userLocationId?e.user:null,locationId:a.projectId}}).done(function(){JIRA.API.getSidebar().then(function(i){g(i,a,d.id)}),require("jira/container-api").APIs.getNavigationAPI().then(function(i){g(i,a,d.id)}),GH.RapidBoard.Config.loadEditModel(),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("boardLocation",{newValName:a.projectId?e.project:e.user,oldValName:i.projectId?e.project:e.user,newValId:a.projectId||a.userLocationId,oldValId:i.projectId||i.userLocationId})})},boardLocation:d.boardLocationModel,validationCallback:m.confirmLocationChange.bind(m)})}var s=function(i){try{return require(i)}catch(i){return}}("jira-agile/boardlocation/location-type");function g(a,i,e){var d,n;i.projectId?(d=i.projectId,n=$.Deferred(),AJS.$.get(contextPath+"/rest/api/2/project/"+d).then(function(i){n.resolve(i.key)}),n.promise().then(function(i){p(a,{containerType:"PROJECT",projectKey:i,rapidViewId:e})})):p(a,{containerType:i.userLocationId?"USER":null,rapidViewId:e})}function p(i,a){i.updateContext({containerType:a.containerType,projectKey:a.projectKey},!0),i.updateData({rapidView:a.rapidViewId},!0)}s?r.init(t(s)):H.actionOnDeferParsingComplete(function(){s=require("jira-agile/boardlocation/location-type"),r.init(t(s))}),GH.RapidBoard.Config.Filter.init(d),(C.isFeatureEnabled("jsw.perf.uif.cmp.board.settings.columns")?B:GH.RapidBoard.Config.Columns).init(d),GH.RapidBoard.Config.Swimlanes.init(d),GH.RapidBoard.Config.QuickFilter.init(d),n&&GH.RapidBoard.Config.Estimation.init(d),(C.isFeatureEnabled("jsw.perf.uif.cmp.board.settings.working-days")?u:GH.WorkingDaysConfig).init(d),GH.CardColorConfig.init(d),GH.CardLayoutConfig=new l(d,"#ghx-config-cardLayout"),d.cardLayoutConfig&&GH.CardLayoutConfig.render(),GH.DetailViewConfig.init(d),GH.RapidViewConfig.currentData&&GH.RapidViewConfig.currentData.data&&"project"===GH.RapidViewConfig.currentData.data.locationType&&f.init(d),c.init(d),GH.RapidBoard.Config.editedRapidViewId=d.id,JIRA.bind(a.NEW_CONTENT_ADDED,function(i,a){var e,d=AJS.$(a).find(".js-jql-autocomplete-field"),n=AJS.$(a).find(".js-jql-autocomplete-error");0<d.length&&0<n.length&&(e=d.attr("id"),a=n.attr("id"),d=AJS.$("#"+e),n=AJS.$("#"+a),0<d.length&&0<n.length&&GH.JQLAutoComplete.initialize(e,a))}),GH.RapidBoard.Config.initState(),GH.RapidBoard.Config.initListeners(),C.isFeatureEnabled("jsm-kanban-board_a6n5r")&&G.then(function(i){i.renderConfigEditScreen()}),"roadmapConfig"===GH.RapidBoard.State.getSelectedConfigTab()&&f.fireScreenAnalytic(),_.delay(function(){AJS.$("#ghx-config-header").attr("data-rendered",(new Date).getTime())}),GH.Footer.agileFooter(),GH.RapidBoard.Config.events.trigger("after:renderBoardConfig")},GH.RapidBoard.Config.renderHeader=function(i){n.renderTitle({model:i});GH.UserData.hasUser();GH.ViewActions.renderOnConfiguration(i),AJS.$("#ghx-config-header").html(GH.tpl.rapid.view.renderConfigPermissionsWarning({model:i})),i.canEdit?AJS.$("#gh").addClass("ghx-editor").removeClass("ghx-reader"):AJS.$("#gh").addClass("ghx-reader").removeClass("ghx-editor")},GH.RapidBoard.Config.updateTitle=function(i){AJS.$("#js-nav-view-name").text(i)},GH.RapidBoard.Config.initRapidViewNameEdit=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-rapidViewName",{validate:GH.RapidBoard.Config.validateViewName,save:GH.RapidBoard.Config.saveViewName,renderView:GH.RapidBoard.Config.renderViewNameField,postEdit:GH.RapidBoard.Config.handleTitleUpdate})},GH.RapidBoard.Config.renderViewNameForm=function(i){AJS.$("#ghx-view-name-edit").html(GH.tpl.rapid.view.renderViewNameEditForm({rapidViewName:i.name,canEdit:i.canEdit}))},GH.RapidBoard.Config.validateViewName=function(i){var a=i.editElement.val();return!!GH.Validation.notBlank(i.editElement,"Name is a required field")&&(i.newValue=a,!0)},GH.RapidBoard.Config.saveViewName=function(i){var a=GH.RapidBoard.Config.editedRapidViewId;GH.Ajax.put({url:"/rapidviewconfig/name",data:{id:a,name:i.newValue}}).done(function(){GH.RapidBoard.Config.analytics.fieldChange.trigger("boardname.update"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("boardName"),o.isEnabled()&&(JIRA.API.getSidebar().then(function(i){return i.updateData({rapidView:a})}),require("jira/container-api").APIs.getNavigationAPI().then(function(i){return i.updateData({rapidView:a})})),f.updateBoardName(i.newValue)}),GH.RapidBoard.Util.InlineEditable.updateView(i)},GH.RapidBoard.Config.handleTitleUpdate=function(i){i.canceled||GH.RapidBoard.Config.updateTitle(i.newValue)},GH.RapidBoard.Config.renderViewNameField=function(i){return AJS.$(GH.tpl.rapid.view.renderViewNameField({rapidViewName:i.newValue,canEdit:!0}))},GH.RapidBoard.Config.initRapidViewBoardAdminsEdit=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-rapidViewBoardAdmin",{renderEdit:GH.RapidBoard.Config.renderViewBoardAdminsEditField,activate:null})},GH.RapidBoard.Config.renderViewBoardAdminsForm=function(){AJS.$("#ghx-view-board-admins-edit").html(GH.tpl.rapid.view.renderViewBoardAdminsEditForm({model:GH.RapidBoard.BoardAdminsPicker.getAdminsDisplayModel(GH.RapidBoard.Config.BoardAdmins.model),canEdit:GH.RapidBoard.Config.BoardAdmins.canEdit,canUsePicker:GH.RapidBoard.Config.BoardAdmins.canUsePicker}))},GH.RapidBoard.Config.renderViewBoardAdminsEditField=function(i){GH.RapidBoard.Config.BoardAdmins.editData=i,GH.RapidBoard.Config.BoardAdmins.canUsePicker?GH.RapidBoard.Config.renderViewBoardAdminsMultiselect():GH.RapidBoard.Config.renderViewBoardAdminsNoPicker()},GH.RapidBoard.Config.renderViewBoardAdminsNoPicker=function(){AJS.$("#ghx-field-view-board-admins").html(GH.tpl.rapid.view.renderBoardAdminsEditNoPicker({model:GH.RapidBoard.Config.BoardAdmins.model})),AJS.$("#ghx-board-admin-edit-groups").focus(),AJS.$("#ghx-board-admin-edit-groups, #ghx-board-admin-edit-users").bind("keydown",function(i){13===i.keyCode?GH.RapidBoard.Config.BoardAdmins.handleReturn(i):27===i.keyCode&&GH.RapidBoard.Config.BoardAdmins.handleEsc(i)}),GH.RapidBoard.Config.bindNonPickerEvents()},GH.RapidBoard.Config.bindNonPickerEvents=function(){AJS.$("#ghx-board-admin-edit-groups, #ghx-board-admin-edit-users").blur(function(){GH.RapidBoard.Config.areBothNonPickerFieldsBlurred().done(function(){GH.RapidBoard.Config.endBoardAdminsForm()})})},GH.RapidBoard.Config.unbindNonPickerEvents=function(){AJS.$("#ghx-board-admin-edit-groups, #ghx-board-admin-edit-users").unbind("blur")},GH.RapidBoard.Config.BoardAdmins.handleReturn=function(){GH.RapidBoard.Config.unbindNonPickerEvents(),GH.RapidBoard.Config.BoardAdmins.canUsePicker&&0!==GH.RapidBoard.Config.BoardAdmins.form.multiselect._getUserInputValue().length||GH.RapidBoard.Config.endBoardAdminsForm(!0)},GH.RapidBoard.Config.BoardAdmins.handleEsc=function(){GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(GH.RapidBoard.Config.BoardAdmins.editData),GH.RapidBoard.Config.unbindNonPickerEvents(),GH.RapidBoard.Config.renderViewBoardAdminsForm()},GH.RapidBoard.Config.areBothNonPickerFieldsBlurred=function(){var i=AJS.$.Deferred();return setTimeout(function(){0<AJS.$("#ghx-board-admin-edit-groups:focus, #ghx-board-admin-edit-users:focus").length?i.reject():i.resolve()},90),i.promise()},GH.RapidBoard.Config.renderViewBoardAdminsMultiselect=function(){GH.RapidBoard.Config.BoardAdmins.form=new GH.RapidBoard.BoardAdminsPicker({selector:"#ghx-board-admins",initialData:GH.RapidBoard.Config.formatBoardAdminsInitData(GH.RapidBoard.Config.BoardAdmins.model),blur:function(){clearTimeout(GH.RapidBoard.Config.BoardAdmins.tId);var i=setTimeout(GH.RapidBoard.Config.endBoardAdminsForm,150);GH.RapidBoard.Config.BoardAdmins.tId=i}});var i=GH.RapidBoard.Config.BoardAdmins.form;i.show(),i.multiselect.INVALID_KEYS.Esc=!1,i.multiselect.keys.Return=function(){i.multiselect.suggestionsVisible||GH.RapidBoard.Config.BoardAdmins.handleReturn()},i.multiselect.keys.Esc=function(){i.multiselect.suggestionsVisible||GH.RapidBoard.Config.BoardAdmins.handleEsc()}},GH.RapidBoard.Config.formatBoardAdminsInitData=function(i){function a(i,a){return{value:i+":"+a.key,label:a.displayName,html:AJS.escapeHTML(String(a.displayName))}}var e=_.map(i.userKeys,function(i){return a("user",i)}),i=_.map(i.groupKeys,function(i){return a("group",i)});return _.union(e,i)},GH.RapidBoard.Config.endBoardAdminsForm=function(i){clearTimeout(GH.RapidBoard.Config.BoardAdmins.tId),GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(GH.RapidBoard.Config.BoardAdmins.editData),GH.RapidBoard.Config.BoardAdmins.canUsePicker&&!GH.RapidBoard.Config.shouldHideBoardAdminsForm()&&!i||(i=GH.RapidBoard.Config.BoardAdmins.canUsePicker?GH.RapidBoard.Config.BoardAdmins.form.getAjaxValue():GH.RapidBoard.Config.resolveNewBoardAdminsModelFromTextFields(),GH.RapidBoard.Config.validateBoardAdmins(i).done(GH.RapidBoard.Config.saveBoardAdmins).fail(function(){GH.RapidBoard.Config.renderViewBoardAdminsForm()}))},GH.RapidBoard.Config.resolveNewBoardAdminsModelFromTextFields=function(){function a(i){return""===i}function i(i){return _.uniq(_.reject(i.split(e),a))}var e=/\s*,\s*/;return{userKeys:i(AJS.$("#ghx-board-admin-edit-users").val()),groupKeys:i(AJS.$("#ghx-board-admin-edit-groups").val())}},GH.RapidBoard.Config.saveBoardAdmins=function(){var i=GH.RapidBoard.Config.BoardAdmins.canUsePicker?GH.RapidBoard.Config.BoardAdmins.form.getAjaxValue():GH.RapidBoard.Config.resolveNewBoardAdminsModelFromTextFields();return GH.RapidBoard.Config.BoardAdmins.analytics.update.trigger(i.groupKeys.length+","+i.userKeys.length),GH.Ajax.put({url:"/rapidviewconfig/boardadmins",data:{id:GH.RapidBoard.Config.editedRapidViewId,boardAdmins:i}}).done(function(i,a,e){GH.RapidBoard.Config.BoardAdmins.model=JSON.parse(e.responseText),GH.RapidBoard.Config.renderViewBoardAdminsForm(),GH.RapidBoard.Config.loadEditModel(),GH.RapidBoard.Config.analytics.fieldChange.trigger("boardadmins.update"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("boardAdmins")}).fail(function(){GH.RapidBoard.Config.renderViewBoardAdminsForm()})},GH.RapidBoard.Config.shouldHideBoardAdminsForm=function(){return 0===AJS.$("textarea:focus").length},GH.RapidBoard.Config.validateBoardAdmins=function(i){var a=AJS.$.Deferred();return(0!==i.userKeys.length||0!==i.groupKeys.length)&&GH.RapidBoard.Config.hasBoardAdminsChanged(i)?(m.confirmBoardAdminChange(i).then(a.resolve,a.reject),a.promise()):a.reject()},GH.RapidBoard.Config.hasBoardAdminsChanged=function(i){return!_.isEqual(i,GH.RapidBoard.Config.BoardAdmins.model)},GH.RapidBoard.Config.setTab=function(i){var a=void 0;GH.CardLayoutConfig.initCardLayoutThenRender(i),a=t(i),GH.RapidBoard.State.setSelectedConfigTab(i),GH.RapidBoard.Config.analytics.tabChange.trigger(i),AJS.$(".ghx-page-panel-content-item").css({display:"none"}),a.css({display:"block"}),AJS.$("#ghx-config-nav").find("li").removeClass("aui-nav-selected").filter('[data-tabitem="'+i+'"]').addClass("aui-nav-selected")},GH.RapidBoard.Config.initState=function(){var i=GH.RapidBoard.State.getSelectedConfigTab();s(i)&&i!==e.USE_STORED_TAB||s(i=GH.RapidBoard.State.getStoredSelectedConfigTab())||(i=e.INITIAL_TAB),GH.RapidBoard.State.setSelectedConfigTab(i),GH.RapidBoard.Config.setTab(i),GH.RapidBoard.State.replaceState()},GH.RapidBoard.Config.initListeners=function(){var i=GH.Util.wrapPreventDefault(function(){var i,a=AJS.$(this).data("tabitem");a&&a!==GH.State.toViewState(window.location.href).tab&&(i=a,GH.RapidBoard.State.setSelectedConfigTab(i),GH.RapidBoard.Config.setTab(i),GH.RapidBoard.State.pushState(),GH.RapidBoard.State.setStoredSelectedConfigTab(i),"roadmapConfig"===a&&(f.onRoadmapTabSelection(),f.fireScreenAnalytic()))});AJS.$("#ghx-config-nav").find("li").off("simpleClick",i).on("simpleClick",i),GH.RapidBoard.Config.Columns.on(GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE,GH.RapidBoard.Config.loadEditModel,"backlog-column-status-change")}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/RestfulTableExtensions.js' */
GH.RapidBoard.Config.Util={},GH.RapidBoard.Config.Util.TextAreaEditView=GH.RestfulTable.CustomEditView.extend({render:function(e){return AJS.$('<textarea class="textarea"></textarea>').attr("name",e.name).text(e.value||"")}}),GH.RapidBoard.Config.Util.JQLEditView=GH.RestfulTable.CustomEditView.extend({initialize:function(){if(GH.RestfulTable.CustomEditView.prototype.initialize.apply(this,arguments),!this.namespace)throw"You must provide a namespace. please extend JQLEditView"},render:function(e){return AJS.$(GH.tpl.inlineeditfield.renderJQLAutocomplete(_.extend({namespace:this.namespace,id:this.model.attributes.id},e)))}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/ManageViews.js' */
GH.RapidBoard.ManageViews={},function(){var a=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.ManageViews.analytics=new a("gh.manageviews")}(),GH.RapidBoard.ManageViews.init=function(){GH.Dialog.CreateView.init(),GH.RapidBoard.ManageViews.loadModel(),AJS.$(document).delegate(".ghx-delete-view","click",function(a){a.preventDefault();var e=AJS.$(this).attr("data-view-id"),a=AJS.$(this).attr("data-view-name");GH.RapidBoard.DeleteDialog.showDeleteDialog(e,a)}),AJS.$(GH).bind("ghx.rapidview.deleted",function(a,e){GH.Notification.showSuccess(e.message),GH.RapidBoard.ManageViews.loadModel()}),AJS.$(document).delegate(".js-copy-view","click",function(a){a.preventDefault();var e=AJS.$(this).attr("data-view-id"),a=AJS.$(this).attr("data-view-name");GH.ViewActions.showCopyBoardDialog(e,a)}),new GH.RapidBoard.ManageViews.analytics.trigger("show")},GH.RapidBoard.ManageViews.loadModel=function(){GH.Ajax.get({url:"/rapidviews/viewsData.json"},"manageViews").done(GH.RapidBoard.ManageViews.render)},GH.RapidBoard.ManageViews.render=function(a){var e=GH.UserData.hasUser();GH.RapidViewConfig.storeGlobalConfig(a.globalConfig),GH.ViewActions.renderOnManage(),AJS.$("body").addClass("ghx-board-manage"),0<a.views.length?(GH.RapidBoard.ManageViews.shortenBoardAdmins(a.views),a.views.sort(GH.RapidBoard.viewModelComparator),AJS.$("#ghx-content-main").html(GH.tpl.rapid.manageviews.renderViewsTable({views:a.views,canCopy:e}))):AJS.$("#ghx-content-main").html(GH.tpl.board.x.renderNoViews()),AJS.$.support.touch&&AJS.$("#gh").removeClass("ghx-no-touch").addClass("ghx-touch"),GH.Footer.agileFooter(),_.each(a.views,function(a){a.shortener=new GH.Shortener({items:"span.ghx-board-admin-list-item",element:"div.board-admins-list-"+a.id,numRows:1})})},GH.RapidBoard.ManageViews.shortenBoardAdmins=function(a){_.each(a,function(a){a.boardAdmins?a.renderableBoardAdmins=GH.RapidBoard.BoardAdminsPicker.getOrderedUnion(a.boardAdmins):a.renderableBoardAdmins=[]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/FilterConfig.js' */
GH.RapidBoard.Config.Filter={},function(){var i=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.Config.Filter.analytics=new i("gh.config.subquery.edit")}(),GH.RapidBoard.Config.Filter.init=function(e){GH.RapidBoard.Config.FilterModel.setModel(e),GH.RapidBoard.Config.Filter.showFilter(),AJS.$(document).delegate(".js-update-filter-order-by","click",function(i){GH.RapidBoard.Config.Filter.confirmOrderByUpdate(),i.preventDefault()}),GH.RapidBoard.Config.FilterModel.canChangeFilter&&AJS.$(document).delegate("#js-sub-container-work .js-editable","click keypress",function(i){"click"!==i.type&&![13,32].includes(i.keyCode)||GH.RapidBoard.Config.Filter.initSubQueryEdit()}),AJS.$(GH).bind(GH.RapidBoard.Config.UNMAPPED_STATUSES_WITH_ISSUES,function(){AJS.$("#unmapped-issues-warning").removeClass("hidden")}),AJS.$(GH).bind(GH.RapidBoard.Config.NO_UNMAPPED_STATUSES_WITH_ISSUES,function(){AJS.$("#unmapped-issues-warning").addClass("hidden")}),AJS.$(document).delegate("#js-edit-filter","click",function(i){GH.RapidBoard.Config.Filter.renderEditFilterModal(e),i.preventDefault()})},GH.RapidBoard.Config.Filter.showFilter=function(){var i=GH.RapidBoard.Config.FilterModel.canChangeFilter,e=GH.RapidBoard.Config.FilterModel.savedFilter,r=GH.RapidBoard.Config.FilterModel.id,a=!GH.RapidBoard.Config.FilterModel.isSprintSupportEnabled,o=a?[GH.RapidBoard.Config.Filter.getSubQueryForDisplay()]:[],d=GH.RapidBoard.Config.FilterModel.isOldDoneIssuesCutoffConfigurable,t=GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoffOptions,n=GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoff;AJS.$("#ghx-config-filter").html(GH.tpl.rapid.view.renderFilterDetails({savedFilter:e,subqueries:o,isSubqueriesConfigurable:a,canEdit:i,rapidViewId:r,isOldDoneIssuesCutoffConfigurable:d,oldDoneIssuesCutoff:n,oldDoneIssuesCutoffOptions:t})),AJS.$("#js-view-columns").bind("simpleClick",GH.Util.wrapPreventDefault(function(){GH.RapidBoard.Config.setTab("columns"),GH.State.replace({rapidView:GH.RapidBoard.Config.editedRapidViewId,tab:"columns"})})),i&&GH.RapidBoard.Config.Filter.initClickHandler(e);e=AJS.$("#ghx-show-projects-in-board .aui-iconfont-info").tooltip({gravity:"w"});0<e.length&&e.tooltip({gravity:"w"}),AJS.$("#ghx-limit-days").change(GH.RapidBoard.Config.Filter.saveOldDoneIssuesCutoff)},GH.RapidBoard.Config.Filter.saveOldDoneIssuesCutoff=function(){var e=$("#ghx-limit-days").val();GH.Ajax.put({url:"/rapidviewconfig/oldDoneIssuesCutoff",data:{rapidViewId:GH.RapidBoard.Config.FilterModel.id,oldDoneIssuesCutoff:e}}).done(function(i){GH.RapidBoard.Config.FilterModel.setOldDoneIssuesCutoff(e)}),AJS.trigger("analytics",{name:"gh.workmode.fast.kanban.configure.cutoff",data:{value:e,boardId:GH.RapidBoard.Config.FilterModel.id}})},GH.RapidBoard.Config.Filter.initClickHandler=function(e){var r=AJS.$("#ghx-filter-change");r.one("click",function(i){AJS.$(this).hide(),new GH.SavedFilterPicker({selected:GH.RapidBoard.Config.Filter.selectHandler,selector:"#ghx-filter-change-select",blur:GH.RapidBoard.Config.Filter.showFilter,stayActivated:!0}).show(e)}),r.on("keypress",function(i){return[13,32].includes(i.keyCode)&&r.click()})},GH.RapidBoard.Config.Filter.selectHandler=function(i,e){e.properties&&GH.Ajax.put({url:"/rapidviewconfig/filter",data:{id:GH.RapidBoard.Config.FilterModel.id,savedFilterId:e.properties.value}}).done(function(i){GH.RapidBoard.Config.FilterModel.setSavedFilter(i.success),GH.RapidBoard.Config.Filter.showFilter(),GH.RapidBoard.Config.analytics.fieldChange.trigger("savedfilter.update"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("savedFilter")})},GH.RapidBoard.Config.Filter.confirmOrderByUpdate=function(){var i=GH.Dialog.create({width:400,height:200,id:"confirm-filter-dialog",closeOnOutsideClick:!0});i.addHeader("Update Filter"),i.addPanel("Panel 1","<p>"+"Changing the Query for this Filter will add Rank and remove any other Order By sorting. This will affect all boards using this Filter."+"</p>","panel-body"),i.addButton("Confirm",function(i){i.disableControls(),GH.RapidBoard.Config.Filter.updateOrderBy(i)},"aui-button"),GH.Dialog.addCancelButton(i),AJS.$("#"+i.id).addClass("ghx-dialog"),i.show()},GH.RapidBoard.Config.Filter.updateOrderBy=function(e){var i=GH.RapidBoard.Config.FilterModel.id;i&&GH.Ajax.put({url:"/rapidviewconfig/orderbyrank",data:{id:i}}).done(function(i){GH.RapidBoard.Config.FilterModel.setSavedFilter(i.getSuccessObject()),GH.RapidBoard.Config.Filter.showFilter(),GH.Notification.showSuccess("Query for this Filter updated"),e.hide()}).fail(e.enableControls)},GH.RapidBoard.Config.Filter.initSubQueryEdit=function(i){var e=AJS.$("#js-sub-container-work"),r=GH.tpl.rapid.view.renderSubQueryControls({section:"board.kanban.work",queryValue:GH.RapidBoard.Config.FilterModel.getSubQuery().query});e.empty().append(r),AJS.$("#js-sub-container-work .js-subquery-submit").click(GH.RapidBoard.Config.Filter.updateSubQuery),AJS.$("#js-sub-container-work .js-subquery-cancel").click(GH.RapidBoard.Config.Filter.cancelSubQueryEdit),GH.JQLAutoComplete.initialize("ghx-sub-jql","ghx-sub-jql-errormsg"),AJS.$("#ghx-sub-jql").focus()},GH.RapidBoard.Config.Filter.cancelSubQueryEdit=function(i){var e=AJS.$("#js-sub-container-work"),r=GH.tpl.rapid.view.renderSubQueryView({section:"board.kanban.work",queryValue:GH.RapidBoard.Config.Filter.getSubQueryForDisplay(),canEdit:GH.RapidBoard.Config.FilterModel.canChangeFilter});e.empty().append(r)},GH.RapidBoard.Config.Filter.updateSubQuery=function(i){i.preventDefault(),console.log("update subquery");var e=GH.RapidBoard.Config.FilterModel.id,r=AJS.$(this).parent().children("textarea"),i=r.attr("data-section"),r=r.val();GH.RapidBoard.Config.Filter.analytics.trigger(i),GH.Ajax.put({url:"/subqueries/"+e,data:{query:r},errorContextMap:{query:GH.RapidBoard.Config.Filter.displaySubQueryError}}).done(function(i){GH.RapidBoard.Config.FilterModel.updateSubQuery(i.getSuccessObject()),GH.RapidBoard.Config.analytics.fieldChange.trigger("subquery.update"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("subQuery"),GH.RapidBoard.Config.Filter.showFilter()})},GH.RapidBoard.Config.Filter.getSubQueryForDisplay=function(){var i=GH.RapidBoard.Config.FilterModel.getSubQuery();return i.query||!1},GH.RapidBoard.Config.Filter.displaySubQueryError=function(i,e){var r="#ghx-sub-jql";(r=AJS.$("#ghx-sub-jql")).siblings(".ghx-error").remove();i=GH.tpl.rapid.notification.renderContextualErrors({errors:i.errors});r.parent().append(i)},GH.RapidBoard.Config.Filter.renderEditFilterModal=function(r){var i=require("jira/container-api"),e=require("jira/util/safe-logger");i.APIs.getAsyncModalsAPI().then(function(i){var e={id:r.filterConfig.id,name:r.filterConfig.name,description:r.filterConfig.description,sharePermissions:r.filterConfig.sharePermissionEntries,editPermissions:r.filterConfig.editPermissionEntries};i.showEditFilterModal(e)}).catch(function(i){e.safeError("RapidView","Failed to render EditFilterModal with error: "+i)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/FilterConfigModel.js' */
GH.RapidBoard.Config.FilterModel={},GH.RapidBoard.Config.FilterModel.id=void 0,GH.RapidBoard.Config.FilterModel.savedFilter=void 0,GH.RapidBoard.Config.FilterModel.subQueries=[],GH.RapidBoard.Config.FilterModel.canChangeFilter=void 0,GH.RapidBoard.Config.FilterModel.canEditFilter=void 0,GH.RapidBoard.Config.FilterModel.isSprintSupportEnabled=void 0,GH.RapidBoard.Config.FilterModel.setModel=function(o){GH.RapidBoard.Config.FilterModel.id=o.id,GH.RapidBoard.Config.FilterModel.setSavedFilter(o.filterConfig),GH.RapidBoard.Config.FilterModel.canChangeFilter=o.canEdit,GH.RapidBoard.Config.FilterModel.isSprintSupportEnabled=o.isSprintSupportEnabled,GH.RapidBoard.Config.FilterModel.hasIssuesWithUnmappedStatuses=function(){var i=o.rapidListConfig.unmappedStatuses;return _.any(i,function(i){return 0<i.issueCount})},o.isSprintSupportEnabled||(GH.RapidBoard.Config.FilterModel.subQueries=o.subqueryConfig.subqueries),GH.RapidBoard.Config.FilterModel.isOldDoneIssuesCutoffConfigurable=o.isOldDoneIssuesCutoffConfigurable,GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoffOptions=o.oldDoneIssuesCutoffOptions,GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoff=o.oldDoneIssuesCutoff},GH.RapidBoard.Config.FilterModel.setSavedFilter=function(i){GH.RapidBoard.Config.FilterModel.savedFilter=i},GH.RapidBoard.Config.FilterModel.setOldDoneIssuesCutoff=function(i){GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoff=i},GH.RapidBoard.Config.FilterModel.updateSubQuery=function(i){for(var o=0;o<GH.RapidBoard.Config.FilterModel.subQueries.length;o++)if(i.section==GH.RapidBoard.Config.FilterModel.subQueries[o].section)return void(GH.RapidBoard.Config.FilterModel.subQueries[o]=i)},GH.RapidBoard.Config.FilterModel.getSubQuery=function(){return GH.RapidBoard.Config.FilterModel.subQueries[0]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/ColumnConfig.js' */
!function(){"use strict";var n=require("jira-agile/tooltip"),a=(require("jira-agile/rapid/configuration/CardLayoutConfig"),require("jira-agile/rapid/events")),e=require("jira-agile/rapid/ajax"),i=require("jira-agile/rapid/analytics-tracker"),d=require("jira-agile/rapid/deferred-resources-loader"),t=require("jira-agile/rapid/const/PageMode"),l=require("jira-servicedesk/boards/configuration/api"),r=require("jira/featureflags/feature-manager"),s=new i("jira-software.configuration.epic-as-panel"),u=r.isFeatureEnabled("jsw.classic.board.horizontal-scroll");GH.RapidBoard.Config.Columns=new a,GH.RapidBoard.Config.UNMAPPED_STATUSES_WITH_ISSUES="unmappedStatusesWithIssues",GH.RapidBoard.Config.NO_UNMAPPED_STATUSES_WITH_ISSUES="noUnmappedStatusesWithIssues",GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE="backlog-column-status-change",GH.RapidBoard.Config.Columns.model=void 0,GH.RapidBoard.Config.Columns.kanPlanConfig=void 0,GH.RapidBoard.Config.Columns.init=function(a){GH.RapidBoard.Config.Columns.data=a,GH.RapidBoard.Config.Columns.model=a.rapidListConfig,GH.RapidBoard.Config.Columns.model.showEpicAsPanel=a.showEpicAsPanel,GH.RapidBoard.Config.Columns.kanPlanConfig={isKanbanBoard:!1===a.isSprintSupportEnabled,isKanPlanEnabled:a.isKanPlanEnabled},GH.RapidBoard.Config.Columns.renderColumnMapping(),u||AJS.$("#ghx-columns-config-tab-link").bind("tabSelect",GH.RapidBoard.Config.Columns.alignColumnHeights),GH.RapidBoard.Config.Columns.EditField.registerInlineEdits(),AJS.$(GH).bind(GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED,GH.RapidBoard.Config.Columns.updateNewColumn),AJS.$(GH).bind(GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED,GH.RapidBoard.Config.Columns.updateNewStatus),AJS.$(GH).bind(GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED,GH.RapidBoard.Config.Columns.updateRemovedStatus),AJS.$(GH).bind(GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED,GH.RapidBoard.Config.Columns.reloadColumnsModel)},GH.RapidBoard.Config.Columns.renderColumnMapping=function(){var a=GH.RapidBoard.Config.Columns.model;a.unmappedStatusesWithIssues=_.filter(a.unmappedStatuses,function(a){return 0<a.issueCount}),0<a.unmappedStatusesWithIssues.length?AJS.$(GH).trigger(GH.RapidBoard.Config.UNMAPPED_STATUSES_WITH_ISSUES,a.unmappedStatusesWithIssues):AJS.$(GH).trigger(GH.RapidBoard.Config.NO_UNMAPPED_STATUSES_WITH_ISSUES),a.unmappedStatusesWithoutIssues=_.filter(a.unmappedStatuses,function(a){return 0===a.issueCount});var i,n=a.mappedColumns.filter(function(a){return 0<a.mappedStatuses.length&&!a.isKanPlanColumn});0<n.length&&(n[0].isFirstColumnWithStatuses=!0,n[n.length-1].isLastColumnWithStatuses=!0);var o="",e={"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+the+Simplified+Workflow","isLocal":false}.url;_.isUndefined(a.workflow.simplifiedWorkflowProjectName)||(i=AJS.escapeHTML(String(a.workflow.simplifiedWorkflowProjectName)),o=GH.Ajax.CONTEXT_PATH+"/plugins/servlet/project-config/"+a.workflow.simplifiedWorkflowProjectKey+"/workflows");var d,t=GH.Ajax.CONTEXT_PATH+"/secure/ContactAdministrators.jspa",n=AJS.$("#columns");document.getElementById("ghx-mapping-columns-wrapper")&&(d=document.getElementById("ghx-mapping-columns-wrapper").scrollLeft),n.html(GH.tpl.columnconfig.renderColumnMappingView({model:a,lastUpdated:(new Date).getTime(),simplifiedWorkflowProjectName:i,adminWorkflowUrl:o,contactAdminUrl:t,kanbanBacklogUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+your+Kanban+backlog","isLocal":false}.url,simplifiedWorkflowLearnMoreUrl:e,shouldRenderKanbanBacklogColumn:GH.RapidBoard.Config.Columns.shouldRenderKanbanBacklogColumn(),isKanPlanEnabled:GH.RapidBoard.Config.Columns.kanPlanConfig.isKanPlanEnabled,isHorizontalScrollEnabled:u})),u&&d&&(document.getElementById("ghx-mapping-columns-wrapper").scrollLeft=d),n.find(".aui-iconfont-help").tooltip({html:!0,gravity:"s"}),u||GH.RapidBoard.Config.Columns.alignColumnHeights(),GH.RapidBoard.Config.Columns.model.canEdit&&(GH.RapidBoard.Config.Columns.DnD.init(),GH.RapidBoard.Config.Columns.attachListeners(a),GH.RapidBoard.Config.Columns.EditField.init(),AJS.$("#ghx-mapping .ghx-action[data-deleteindex] .js-column-delete").click(GH.RapidBoard.Config.Columns.deleteColumn)),r.isFeatureEnabled("jsm-kanban-board_a6n5r")&&l.then(function(a){a.renderColumnMapping()})},GH.RapidBoard.Config.Columns.alignColumnHeights=function(){var a=AJS.$("#ghx-mapping"),i=a.find(".ghx-config-status:not(.ghx-kanplan-backlog)");i.css({height:""});var n=a.height(),a=a.find(".ghx-status:first").outerHeight();i.css({height:n+2*a})},GH.RapidBoard.Config.Columns.attachListeners=function(a){a.workflow.isSimplifiedWorkflowFeatureEnabled&&!a.workflow.usingSimplifiedWorkflow&&a.workflow.canSimplifyWorkflow&&a.workflow.userCanSimplifyWorkflow&&AJS.$("#js-convert-workflow").click(GH.RapidBoard.Config.Columns.convertWorkflowDialog),a.workflow.usingSimplifiedWorkflow&&a.workflow.isProjectAdminOfSimplifiedWorkflow?(AJS.$("#ghx-config-addcolumn").click(GH.RapidBoard.Config.Columns.addColumnDialog),AJS.$("#ghx-config-addstatus").click(GH.RapidBoard.Config.Columns.addStatusDialog),AJS.$("#ghx-mapping .ghx-unmapped .js-remove-status").click(GH.RapidBoard.Config.Columns.removeStatusDialog),AJS.$("#ghx-mapping .js-resolution-update").click(GH.RapidBoard.Config.Columns.resolutionUpdate),AJS.$("#ghx-mapping .js-resolution-update").each(function(){var a=AJS.$(this),i=a.parents("ul.ghx-config-status").hasClass("ghx-last")?"e":"n";n.tipsify({selector:a,gravity:i})})):AJS.$("#ghx-config-addcolumn").click(GH.RapidBoard.Config.Columns.addColumn),AJS.$("#ghx-mapping").agileSortable({handle:".ghx-header",items:".ghx-column-wrapper:not(.ghx-fixed-column)",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:"0.9",placeholder:"ghx-sortable-placeholder",tolerance:"pointer",start:function(){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()},stop:function(){GH.RapidBoard.Config.Columns.save()}}),AJS.$("#ghx-statisticsfield-select").change(GH.RapidBoard.Config.Columns.save);var i=AJS.$("#ghx-checkbox-epic-appearance");i.change(function(){var a=i.prop("checked");GH.RapidBoard.Config.Columns.updateShowEpicAsPanel(a,function(){s.trigger(a?"click.on":"click.off")})})},GH.RapidBoard.Config.Columns.updateShowEpicAsPanel=function(a,i){var n=AJS.$("#ghx-checkbox-epic-appearance"),o={rapidViewId:GH.RapidBoard.Config.Columns.model.rapidViewId,showEpicAsPanel:a};e.put({url:"/rapidviewconfig/showEpicAsPanel",data:o}).done(function(){GH.RapidBoard.Config.Columns.data.showEpicAsPanel=o.showEpicAsPanel,GH.RapidBoard.Config.Columns.model.showEpicAsPanel=o.showEpicAsPanel,GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("showEpicAsPanel",{oldValId:!o.showEpicAsPanel,newValId:o.showEpicAsPanel}),i&&i()}).fail(function(){n.prop("checked",!a)})},GH.RapidBoard.Config.Columns.convertWorkflowDialog=function(a){a.preventDefault(),GH.Dialogs.ConvertWorkflow.showDialog(GH.RapidBoard.Config.Columns.model.rapidViewId)},GH.RapidBoard.Config.Columns.addStatusDialog=function(){GH.Dialogs.CreateStatus.showDialog(GH.RapidBoard.Config.Columns.model.rapidViewId)},GH.RapidBoard.Config.Columns.addColumnDialog=function(){GH.Dialogs.AddColumn.showDialog(GH.RapidBoard.Config.Columns.model.rapidViewId,GH.RapidBoard.Config.Columns.model.workflow.usingSimplifiedWorkflow)},GH.RapidBoard.Config.Columns.removeStatusDialog=function(a){var i=AJS.$(this).closest(".ghx-status").attr("data-statusid");GH.Dialogs.RemoveStatus.showDialog(GH.RapidBoard.Config.Columns.model.rapidViewId,i)},GH.RapidBoard.Config.Columns.addColumn=function(){var a={name:"New Column",mappedStatuses:[],min:"No Min",max:"No Max",isKanPlanColumn:!1},i=GH.RapidBoard.Config.Columns.model.mappedColumns,n=i.length-1;i.splice(n,0,a),GH.RapidBoard.Config.Columns.renderColumnMapping(),GH.RapidBoard.Config.Columns.save(!1,function(){AJS.$("#ghx-mapping .ghx-mapped:eq("+n+") .ghx-header-name").click()})},GH.RapidBoard.Config.Columns.deleteColumn=function(a){var i=AJS.$(this).closest(".ghx-action").data("deleteindex"),n=GH.RapidBoard.Config.Columns.model.mappedColumns[i].mappedStatuses,o=GH.RapidBoard.Config.Columns.model.unmappedStatuses;GH.RapidBoard.Config.Columns.model.unmappedStatuses=o.concat(n),GH.RapidBoard.Config.Columns.model.mappedColumns.splice(i,1),GH.RapidBoard.Config.Columns.renderColumnMapping(),GH.RapidBoard.Config.Columns.save(!1)};function o(){var d=[];return AJS.$("#ghx-mapping .ghx-mapped").each(function(a,i){i=AJS.$(i);var n={},o=[];i.find(".ghx-status").each(function(a,i){o[a]={id:AJS.$(i).attr("data-statusid")}}),n.mappedStatuses=o;var e=i.attr("data-column-id");e&&(n.id=parseInt(e,10));e=i.find('.ghx-header-name[data-fieldname="name"]').attr("data-fieldvalue");e&&(n.name=e),n.min=i.find('span[data-fieldname="min"]').attr("data-fieldvalue"),n.max=i.find('span[data-fieldname="max"]').attr("data-fieldvalue"),n.isKanPlanColumn=i.hasClass("ghx-kanplan-backlog"),d.push(n)}),d}GH.RapidBoard.Config.Columns._getModifiedModel=o;function p(a){return(a=a.find(function(a){return a.isKanPlanColumn}))&&0<a.mappedStatuses.length}GH.RapidBoard.Config.Columns.save=function(i,n){void 0===i&&(i=!0);var a={};a.currentStatisticsField={id:AJS.$("#ghx-statisticsfield-select").val()},a.rapidViewId=GH.RapidBoard.Config.Columns.model.rapidViewId,a.mappedColumns=o(),e.put({url:"/rapidviewconfig/columns",data:a}).done(function(a){GH.RapidBoard.Config.Columns.model=_.extend(GH.RapidBoard.Config.Columns.model,a.success),GH.RapidViewConfig.kanPlanEnabled=p(GH.RapidBoard.Config.Columns.model.mappedColumns),i&&GH.RapidBoard.Config.Columns.renderColumnMapping(),n&&n(),JIRA.trace("gh.config.column.saved"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("columnConfig")})},GH.RapidBoard.Config.Columns.updateNewColumn=function(a,i){GH.RapidBoard.Config.Columns.model=i,GH.RapidBoard.Config.Columns.renderColumnMapping()},GH.RapidBoard.Config.Columns.updateNewStatus=function(a,i){GH.RapidBoard.Config.Columns.containsStatus(i)||GH.RapidBoard.Config.Columns.model.unmappedStatuses.push(i),GH.RapidBoard.Config.Columns.renderColumnMapping(),GH.RapidBoard.Animation.fadeElement('.ghx-status[data-statusid="'+i.id+'"]');i=AJS.$('.ghx-status[data-statusid="'+i.id+'"]').offset().top;AJS.$(window).scrollTop(i)},GH.RapidBoard.Config.Columns.updateRemovedStatus=function(a,i){var n=GH.RapidBoard.Config.Columns.model.unmappedStatuses;GH.RapidBoard.Config.Columns.model.unmappedStatuses=_.reject(n,function(a){return a.id===i}),GH.RapidBoard.Config.Columns.renderColumnMapping()},GH.RapidBoard.Config.Columns.reloadColumnsModel=function(){var a=e.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:GH.RapidBoard.Config.Columns.model.rapidViewId}},"columnConfig");return a.done(GH.RapidBoard.Config.Columns.processColumnMappingData),a},GH.RapidBoard.Config.Columns.processColumnMappingData=function(a){GH.RapidBoard.Config.Columns.model=a.rapidListConfig,GH.RapidBoard.Config.Columns.renderColumnMapping()},GH.RapidBoard.Config.Columns.containsStatus=function(i){var n=_.any(GH.RapidBoard.Config.Columns.model.unmappedStatuses,function(a){return a.id===i.id});return!!n||(_.any(GH.RapidBoard.Config.Columns.model.mappedColumns,function(a){if(n=_.any(a.mappedStatuses,function(a){return a.id===i.id}))return!0}),n)},GH.RapidBoard.Config.Columns.DnD={},GH.RapidBoard.Config.Columns.DnD.init=function(){GH.RapidBoard.Config.Columns.DnD.registerStatusDraggables()},GH.RapidBoard.Config.Columns.DnD.registerStatusDraggables=function(){AJS.$(".ghx-config-status").agileSortable({items:".ghx-status",connectWith:[".ghx-config-status"],placeholder:"ghx-sortable-status-placeholder",start:GH.RapidBoard.Config.Columns.DnD.statusDragStart,stop:GH.RapidBoard.Config.Columns.DnD.statusDragStop})},GH.RapidBoard.Config.Columns.DnD.statusDragStart=function(a,i){var n=AJS.$(".ghx-sortable-status-placeholder"),o=n.outerWidth(),n=n.outerHeight();i.item.width(o),i.item.height(n),GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()},GH.RapidBoard.Config.Columns.DnD.statusDragStop=function(a,i){AJS.$(".tipsy").hide(),i.item.width(AJS.$(".ghx-constraints").width());var n=GH.RapidBoard.Config.Columns.model.showEpicAsPanel,o=GH.RapidBoard.Config.Columns._getModifiedModel(),e=(i=o,p(GH.RapidBoard.Config.Columns.model.mappedColumns)!==p(i));e&&!p(o)&&n?d.triggerOnDemandResourceLoadWithCondition(GH.RapidBoard.State.getMode()===t.WORK,["wrc!gh-rapid-lwf-board-deferred"],"columnConfig",function(){var a=require("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils").createAutoOffShowEpicAsPanelDialog();a.show(),a.on("submit",function(){GH.RapidBoard.Config.Columns.save(!1,function(){GH.RapidBoard.Config.Columns.updateShowEpicAsPanel(!1,function(){GH.RapidBoard.Config.Columns.trigger(GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE),s.trigger("auto-off")})})}),a.on("cancel",function(){GH.RapidBoard.Config.Columns.renderColumnMapping(),AJS.trigger("analyticsEvent",{name:"jira-software.configuration.disable-kanplan-dialog.click.cancel"})})}):GH.RapidBoard.Config.Columns.save(!1,function(){e&&GH.RapidBoard.Config.Columns.trigger(GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE)})},GH.RapidBoard.Config.Columns.EditField={},GH.RapidBoard.Config.Columns.EditField.MAX_ISSUE_COUNT_LIMIT=1e3,GH.RapidBoard.Config.Columns.EditField.init=function(){},GH.RapidBoard.Config.Columns.EditField.constraintsData=function(a,i){i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(a,i);return i.columnIndex=a.attr("data-columnindex"),i},GH.RapidBoard.Config.Columns.EditField.renderConstraintInlineEdit=function(a){return GH.RapidBoard.Util.InlineEditable.renderTextFieldInlineEdit(a,GH.tpl.columnconfig.renderCapacityFieldEdit)},GH.RapidBoard.Config.Columns.EditField.preInlineEditCallback=function(a){AJS.$('#ghx-mapping .ghx-header input[type="text"]').blur()},GH.RapidBoard.Config.Columns.EditField.columnNameValidation=function(a){var i=a.editElement.val();return!!GH.Validation.notBlank(a.editElement,"Name is a required field")&&(a.newValue=i,!0)},GH.RapidBoard.Config.Columns.EditField.constraintValidation=function(a){var i=a.editElement.val(),i=AJS.$.trim(i),n=a.editElement.parent().find(":not(.ghx-error):last"),o=a.fieldName,e=a.columnIndex;if(""!==i){if(i=parseInt(i,10),isNaN(i))return GH.Validation.showContextualErrors(n,"Constraint must be a number"),!1;if((i=Math.floor(i))<0)return GH.Validation.showContextualErrors(n,AJS.format("Constraint must be greater than or equal to {0}",0)),!1;if(i>=GH.RapidBoard.Config.Columns.EditField.MAX_ISSUE_COUNT_LIMIT)return GH.Validation.showContextualErrors(n,AJS.format("Constraint must be less than {0}",GH.RapidBoard.Config.Columns.EditField.MAX_ISSUE_COUNT_LIMIT)),!1;e=AJS.$("#ghx-mapping .ghx-mapped .js-edit-"+("min"===o?"max":"min")+"[data-columnindex="+e+"]").attr("data-fieldvalue");if(""!==e)if(e=parseInt(e,10),"min"===o){if(e<i)return GH.Validation.showContextualErrors(n,"Minimum constraint must be less than or equal to the maximum constraint"),!1}else if(i<e)return GH.Validation.showContextualErrors(n,"Maximum constraint must be greater than or equal to the minimum constraint"),!1}return a.newValue=i,!0},GH.RapidBoard.Config.Columns.EditField.saveEditChanges=function(a){GH.RapidBoard.Util.InlineEditable.updateView(a),GH.RapidBoard.Config.Columns.save(!1)},GH.RapidBoard.Config.Columns.EditField.renderColumnNameView=function(a){return AJS.$(GH.tpl.columnconfig.renderColumnNameField({canEdit:!0,fieldName:a.fieldName,fieldValue:a.newValue,displayValue:a.newValue}))},GH.RapidBoard.Config.Columns.EditField.renderColumnConstraintView=function(a){var i=a.newValue,n=_.isNumber(i);return AJS.$(GH.tpl.columnconfig.renderCapacityField({canEdit:!0,fieldName:a.fieldName,fieldValue:i,index:a.columnIndex,hasValue:n}))},GH.RapidBoard.Config.Columns.EditField.registerInlineEdits=function(){var a=GH.RapidBoard.Util.InlineEditable,i=GH.RapidBoard.Config.Columns.EditField;a.register("#ghx-mapping .ghx-mapped .js-edit-name-trigger",{preEdit:i.preInlineEditCallback,validate:i.columnNameValidation,save:i.saveEditChanges,renderView:i.renderColumnNameView}),a.register("#ghx-mapping .ghx-mapped .js-edit-min,.js-edit-max",{getData:i.constraintsData,preEdit:i.preInlineEditCallback,renderEdit:i.renderConstraintInlineEdit,validate:i.constraintValidation,save:i.saveEditChanges,renderView:i.renderColumnConstraintView})},GH.RapidBoard.Config.Columns.resolutionUpdate=function(){var a=AJS.$(this),i=a.is(":checked"),n=a.closest(".ghx-status").attr("data-statusid"),a=parseInt(a.closest(".ghx-config-status").attr("data-column-id"),10),a=_.findWhere(GH.RapidBoard.Config.Columns.model.mappedColumns,{id:a});_.findWhere(a.mappedStatuses,{id:n}).isResolutionDone=i,e.post({url:"/workflow/status/resolution",data:{rapidViewId:GH.RapidBoard.Config.Columns.model.rapidViewId,statusId:n,done:i}})},GH.RapidBoard.Config.Columns.shouldRenderKanbanBacklogColumn=function(){return GH.RapidBoard.Config.Columns.kanPlanConfig.isKanbanBoard}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/ColumnConfig.soy' */
// This file was automatically generated from ColumnConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.columnconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.columnconfig == 'undefined') { GH.tpl.columnconfig = {}; }


GH.tpl.columnconfig.renderColumnMappingView = function(opt_data, opt_ignored) {
  return '' + GH.tpl.columnconfig.renderConfigColumns(opt_data) + GH.tpl.columnconfig.renderColumnMapping(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderColumnMappingView.soyTemplateName = 'GH.tpl.columnconfig.renderColumnMappingView';
}


GH.tpl.columnconfig.renderConfigColumns = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-columns" class="ghx-config-columns"><h2>' + soy.$$escapeHtml('Column management') + '</h2><p id="ghx-config-columns-description">' + soy.$$escapeHtml('Columns can be added, removed, reordered and renamed. Columns are based upon global statuses and can be moved between columns. Minimum and maximum constraints can be set for each mapped column.') + '</p><form id="ghx-config-columns-form" class="aui"><div id="ghx-config-columns-column-constraint-group" class="field-group"><label>' + soy.$$escapeHtml('Column Constraint') + '</label><select id="ghx-statisticsfield-select" class="select" ' + ((opt_data.model.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var fieldList28 = opt_data.model.statisticsFields;
  var fieldListLen28 = fieldList28.length;
  for (var fieldIndex28 = 0; fieldIndex28 < fieldListLen28; fieldIndex28++) {
    var fieldData28 = fieldList28[fieldIndex28];
    output += '<option value="' + soy.$$escapeHtml(fieldData28.id) + '" ' + ((fieldData28.id == opt_data.model.currentStatisticsField.id) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(fieldData28.name) + '</option>';
  }
  output += '</select><div class="description">' + soy.$$escapeHtml('Constraints can be added to columns on the board for one statistic.') + '</div></div>' + ((opt_data.model.workflow.isSimplifiedWorkflowFeatureEnabled) ? '<div class="field-group"><label>' + soy.$$escapeHtml('Simplified Workflow') + '</label>' + ((opt_data.model.workflow.usingSimplifiedWorkflow) ? '<div class="field-value">' + soy.$$escapeHtml('Using Simplified Workflow') + '</div><div class="description">' + soy.$$filterNoAutoescape(AJS.format('The {0}workflow{1} for project {2}{3}{4} is currently managed by Jira Software. Project Administrators can add and remove statuses below.','<a href="' + opt_data.adminWorkflowUrl + '">','</a>','<b>',opt_data.simplifiedWorkflowProjectName,'</b>')) + GH.tpl.columnconfig.renderSimplifiedWorkflowHelp(opt_data) + '</div>' : (opt_data.model.workflow.canSimplifyWorkflow) ? '<button id="js-convert-workflow" class="aui-button ghx-button-inline" ' + ((! opt_data.model.workflow.userCanSimplifyWorkflow || opt_data.model.canEdit != true) ? ' disabled="true"' : '') + '>' + soy.$$escapeHtml('Simplify workflow') + '</button><div class="description">' + soy.$$filterNoAutoescape(AJS.format('Simplify the workflow for project {0}{1}{2} to make it managed by Jira Software. This will allow Project Administrators to add and remove statuses below.','<b>',opt_data.simplifiedWorkflowProjectName,'</b>')) + GH.tpl.columnconfig.renderSimplifiedWorkflowHelp(opt_data) + ((! opt_data.model.workflow.userCanSimplifyWorkflow && opt_data.model.canEdit == true) ? '<br/>' + soy.$$filterNoAutoescape(AJS.format('{0}Contact an administrator{1} to perform this action.','<a href="' + opt_data.contactAdminUrl + '">','</a>')) : '') + '</div>' : '<div class="field-value">' + soy.$$escapeHtml('Software Simplified Workflow unavailable') + '</div><div class="description">' + soy.$$escapeHtml('This board is unable to use a Software Simplified Workflow.') + GH.tpl.columnconfig.renderSimplifiedWorkflowHelp(opt_data) + '</div>') + '</div>' : '') + ((opt_data.isKanPlanEnabled) ? '<div class="field-group"><label for="ghx-checkbox-epic-appearance">' + soy.$$escapeHtml('Epics panel') + '</label><aui-toggle id="ghx-checkbox-epic-appearance"' + ((opt_data.model.showEpicAsPanel) ? ' checked="checked"' : '') + 'label="' + soy.$$escapeHtml('Epics panel') + '"></aui-toggle><div class="description">' + soy.$$escapeHtml('Display epics in a panel in the backlog, and not as cards on the board') + '</div></div>' : '') + '</form><div class="ghx-toolbar ghx-config-column-toolbar aui-buttons">';
  if (opt_data.model.workflow.isSimplifiedWorkflowFeatureEnabled && opt_data.model.workflow.usingSimplifiedWorkflow) {
    var title__soy102 = '' + ((opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow != true) ? soy.$$filterNoAutoescape(AJS.format('Only users who have Administer Project permission on project \x27\x27{0}\x27\x27 can add statuses to this board.',opt_data.model.workflow.simplifiedWorkflowProjectName)) : '');
    var disabled__soy107 = opt_data.model.canEdit == false || opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow == false;
    output += aui.buttons.button({id: 'ghx-config-addstatus', isDisabled: disabled__soy107, extraAttributes: {title: title__soy102}, text: 'Add status'});
  }
  var disabled__soy113 = opt_data.model.canEdit == false;
  output += aui.buttons.button({id: 'ghx-config-addcolumn', isDisabled: disabled__soy113, text: 'Add column'}) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderConfigColumns.soyTemplateName = 'GH.tpl.columnconfig.renderConfigColumns';
}


GH.tpl.columnconfig.renderColumnMapping = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-mapping" data-last-updated="' + soy.$$escapeHtml(opt_data.lastUpdated) + '" class="' + ((opt_data.isHorizontalScrollEnabled) ? 'ghx-flexible-board' : '') + '">' + ((opt_data.isHorizontalScrollEnabled) ? '<div id="ghx-mapping-columns-wrapper"><div id="ghx-mapping-columns">' : '');
  if (opt_data.shouldRenderKanbanBacklogColumn) {
    var columnList132 = opt_data.model.mappedColumns;
    var columnListLen132 = columnList132.length;
    for (var columnIndex132 = 0; columnIndex132 < columnListLen132; columnIndex132++) {
      var columnData132 = columnList132[columnIndex132];
      output += (columnData132.isKanPlanColumn) ? GH.tpl.columnconfig.renderBacklogColumn({column: columnData132, canEdit: opt_data.model.canEdit, simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, statuses: columnData132.mappedStatuses, statisticsFieldEnabled: opt_data.model.currentStatisticsField.isEnabled, numberOfColumns: opt_data.model.mappedColumns.length, kanbanBacklogUrl: opt_data.kanbanBacklogUrl, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled}) : GH.tpl.columnconfig.renderMappingColumn({simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, canEdit: opt_data.model.canEdit, statisticsField: opt_data.model.currentStatisticsField, column: columnData132, index: columnIndex132, numberOfColumns: opt_data.model.mappedColumns.length, shouldRenderKanbanBacklogColumn: opt_data.shouldRenderKanbanBacklogColumn, canUpdateResolution: opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled});
    }
    output += ((opt_data.isHorizontalScrollEnabled) ? '</div></div>' : '') + GH.tpl.columnconfig.renderUnmappedColumn({simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, unmappedStatusesWithIssues: opt_data.model.unmappedStatusesWithIssues, unmappedStatusesWithoutIssues: opt_data.model.unmappedStatusesWithoutIssues, numberOfColumns: opt_data.model.mappedColumns.length, statisticsFieldEnabled: opt_data.model.currentStatisticsField.isEnabled, canDeleteStatus: opt_data.model.workflow.usingSimplifiedWorkflow && opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow && opt_data.model.canEdit, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled});
  } else {
    var columnList168 = opt_data.model.mappedColumns;
    var columnListLen168 = columnList168.length;
    for (var columnIndex168 = 0; columnIndex168 < columnListLen168; columnIndex168++) {
      var columnData168 = columnList168[columnIndex168];
      output += (columnData168.isKanPlanColumn == false) ? GH.tpl.columnconfig.renderMappingColumn({simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, canEdit: opt_data.model.canEdit, statisticsField: opt_data.model.currentStatisticsField, column: columnData168, index: columnIndex168, numberOfColumns: opt_data.model.mappedColumns.length, shouldRenderKanbanBacklogColumn: opt_data.shouldRenderKanbanBacklogColumn, canUpdateResolution: opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled}) : '';
    }
    output += ((opt_data.isHorizontalScrollEnabled) ? '</div></div>' : '') + GH.tpl.columnconfig.renderUnmappedColumn({simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, unmappedStatusesWithIssues: opt_data.model.unmappedStatusesWithIssues, unmappedStatusesWithoutIssues: opt_data.model.unmappedStatusesWithoutIssues, numberOfColumns: opt_data.model.mappedColumns.length, statisticsFieldEnabled: opt_data.model.currentStatisticsField.isEnabled, canDeleteStatus: opt_data.model.workflow.usingSimplifiedWorkflow && opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow && opt_data.model.canEdit, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderColumnMapping.soyTemplateName = 'GH.tpl.columnconfig.renderColumnMapping';
}


GH.tpl.columnconfig.renderSimplifiedWorkflowHelp = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.simplifiedWorkflowLearnMoreUrl) + '"><span title="' + soy.$$escapeHtml('Learn more about Software Simplified Workflow') + '" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-help">' + soy.$$escapeHtml('Learn more about Software Simplified Workflow') + '</span></a>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderSimplifiedWorkflowHelp.soyTemplateName = 'GH.tpl.columnconfig.renderSimplifiedWorkflowHelp';
}


GH.tpl.columnconfig.renderMappingColumn = function(opt_data, opt_ignored) {
  var output = ((! opt_data.isHorizontalScrollEnabled) ? '<div class="ghx-column-wrapper" style="width:' + soy.$$escapeHtml(100 / (opt_data.numberOfColumns + 1)) + '%;">' : '') + '<ul class="' + ((opt_data.isHorizontalScrollEnabled) ? 'ghx-column-wrapper' : '') + ' ghx-config-status ghx-mapped' + ((opt_data.column.isFirstColumnWithStatuses) ? ' ghx-first' : (opt_data.column.isLastColumnWithStatuses) ? ' ghx-last' : '') + ((opt_data.column.mappedStatuses.length == 0) ? ' ghx-no-status-column' : '') + '" data-column-id="' + soy.$$escapeHtml(opt_data.column.id) + '"><li class="ghx-header"><div class="ghx-config-operator"><div class="ghx-action ghx-config-move"></div>' + ((opt_data.shouldRenderKanbanBacklogColumn && opt_data.numberOfColumns > 2 || ! opt_data.shouldRenderKanbanBacklogColumn && opt_data.numberOfColumns > 1) ? '<div class="ghx-action ghx-config-delete" data-deleteindex="' + soy.$$escapeHtml(opt_data.index) + '"><span class="aui-icon aui-icon-small aui-iconfont-delete js-column-delete"></span></div>' : '') + '</div>' + GH.tpl.columnconfig.renderColumnNameField({canEdit: opt_data.canEdit, fieldName: 'name', fieldValue: opt_data.column.name, displayValue: opt_data.column.name}) + ((opt_data.statisticsField.isEnabled) ? GH.tpl.columnconfig.renderCapacities(opt_data) : '') + '<div class="ghx-border-bottom"></div></li>';
  if (opt_data.column.mappedStatuses.length == 0) {
    output += '<li class="ghx-no-status-column-text">' + soy.$$escapeHtml('This column will not show on the board without a status') + '</li>';
  } else {
    var statusList248 = opt_data.column.mappedStatuses;
    var statusListLen248 = statusList248.length;
    for (var statusIndex248 = 0; statusIndex248 < statusListLen248; statusIndex248++) {
      var statusData248 = statusList248[statusIndex248];
      output += GH.tpl.columnconfig.renderStatus({simplifiedWorkflow: opt_data.simplifiedWorkflow, canUpdateResolution: opt_data.canUpdateResolution, status: statusData248, canDeleteStatus: false});
    }
  }
  output += '</ul>' + ((! opt_data.isHorizontalScrollEnabled) ? '</div>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderMappingColumn.soyTemplateName = 'GH.tpl.columnconfig.renderMappingColumn';
}


GH.tpl.columnconfig.renderUnmappedColumn = function(opt_data, opt_ignored) {
  return ((! opt_data.isHorizontalScrollEnabled) ? '<div class="ghx-column-wrapper ghx-fixed-column" style="width:' + soy.$$escapeHtml(100 / (opt_data.numberOfColumns + 1)) + '%;">' : '') + '<ul class="' + ((opt_data.isHorizontalScrollEnabled) ? 'ghx-column-wrapper ghx-fixed-column ' : '') + 'ghx-config-status ghx-unmapped ' + ((opt_data.statisticsFieldEnabled) ? 'ghx-statistics-enabled' : '') + '"><li class="ghx-header"><h3 class="ghx-header-name" title="' + soy.$$escapeHtml('Unmapped Statuses') + '">' + soy.$$escapeHtml('Unmapped Statuses') + '</h3><span title="' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('Issues in these statuses won\x27t show on the Kanban board or Kanban backlog.')) + '" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-help"></span><div class="ghx-border-bottom"></div></li>' + GH.tpl.columnconfig.renderUnmappedColumnBody(opt_data) + '</ul>' + ((! opt_data.isHorizontalScrollEnabled) ? '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderUnmappedColumn.soyTemplateName = 'GH.tpl.columnconfig.renderUnmappedColumn';
}


GH.tpl.columnconfig.renderBacklogColumn = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-column-wrapper ghx-fixed-column ghx-kanplan-backlog-column"' + ((! opt_data.isHorizontalScrollEnabled) ? 'style="width:' + soy.$$escapeHtml(100 / (opt_data.numberOfColumns + 1)) + '%;"' : '') + '><div class="ghx-top-header" style=\'height:' + ((opt_data.statisticsFieldEnabled) ? '139px' : '32px') + '\'>' + GH.tpl.columnconfig.renderColumnNameField({canEdit: false, fieldName: 'name', fieldValue: 'Kanban backlog', displayValue: 'Kanban backlog'}) + '</div><div class="ghx-border-bottom"></div><ul class="ghx-config-status ghx-mapped ghx-kanplan-backlog" data-column-id="' + soy.$$escapeHtml(opt_data.column.id) + '"><li class="ghx-header"><div class="ghx-backlog-column-image"></div><div class="ghx-backlog-column-container"></div></li>' + ((opt_data.statuses.length == 0) ? '<li class="ghx-no-status-text"><strong>' + soy.$$escapeHtml('Board getting full?') + '</strong><p>' + soy.$$escapeHtml('With the Kanban backlog, you can plan your team\x27s work in a dedicated space away from the board.') + '</p>' + ((opt_data.canEdit) ? '<div class="ghx-drag-status-zone"><div>' + soy.$$escapeHtml('Drag a status here to enable') + '</div></div>' : '') + '</li>' : '');
  var statusList324 = opt_data.statuses;
  var statusListLen324 = statusList324.length;
  for (var statusIndex324 = 0; statusIndex324 < statusListLen324; statusIndex324++) {
    var statusData324 = statusList324[statusIndex324];
    output += GH.tpl.columnconfig.renderStatus({simplifiedWorkflow: opt_data.simplifiedWorkflow, canUpdateResolution: false, status: statusData324, canDeleteStatus: false});
  }
  output += '</ul><div class="ghx-footer"><a href="' + soy.$$escapeHtml(opt_data.kanbanBacklogUrl) + '" target="_blank">' + soy.$$escapeHtml('What is Kanban backlog?') + '</a></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderBacklogColumn.soyTemplateName = 'GH.tpl.columnconfig.renderBacklogColumn';
}


GH.tpl.columnconfig.renderUnmappedColumnBody = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.unmappedStatusesWithIssues.length > 0) ? '<li><h4>' + soy.$$escapeHtml('Statuses containing issues') + '</h4><p class="ghx-description">' + soy.$$escapeHtml('Not visible on the board') + '</p></li>' : '');
  var statusList344 = opt_data.unmappedStatusesWithIssues;
  var statusListLen344 = statusList344.length;
  for (var statusIndex344 = 0; statusIndex344 < statusListLen344; statusIndex344++) {
    var statusData344 = statusList344[statusIndex344];
    output += GH.tpl.columnconfig.renderStatus({simplifiedWorkflow: opt_data.simplifiedWorkflow, canUpdateResolution: false, status: statusData344, canDeleteStatus: false});
  }
  output += ((opt_data.unmappedStatusesWithIssues.length > 0 && opt_data.unmappedStatusesWithoutIssues.length > 0) ? '<li class="ghx-hr"></li>' : '') + ((opt_data.unmappedStatusesWithoutIssues.length > 0) ? '<li><h4>' + soy.$$escapeHtml('Statuses not containing issues') + '</h4></li>' : '');
  var statusList359 = opt_data.unmappedStatusesWithoutIssues;
  var statusListLen359 = statusList359.length;
  for (var statusIndex359 = 0; statusIndex359 < statusListLen359; statusIndex359++) {
    var statusData359 = statusList359[statusIndex359];
    output += GH.tpl.columnconfig.renderStatus({simplifiedWorkflow: opt_data.simplifiedWorkflow, canUpdateResolution: false, status: statusData359, canDeleteStatus: opt_data.canDeleteStatus});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderUnmappedColumnBody.soyTemplateName = 'GH.tpl.columnconfig.renderUnmappedColumnBody';
}


GH.tpl.columnconfig.renderStatus = function(opt_data, opt_ignored) {
  return '<li><div class="ghx-status' + ((! opt_data.status.isPresentInWorkflow == true) ? ' ghx-not-present' : '') + '" data-statusid="' + soy.$$escapeHtml(opt_data.status.id) + '"><div class="ghx-name' + ((opt_data.canDeleteStatus) ? ' ghx-has-bin' : '') + ((! opt_data.status.isPresentInWorkflow == true) ? ' ghx-has-warning' : '') + '"><div class="ghx-lozenge-wrap">' + GH.tpl.status.renderFull(opt_data) + '</div></div><div><div class="ghx-qty">' + soy.$$escapeHtml(AJS.format('{0,choice,0#No issues|1#{0} issue|2#{0} issues}',opt_data.status.issueCount)) + '</div><div class="ghx-done">' + ((opt_data.simplifiedWorkflow) ? '<label><input id="resolution-update-' + soy.$$escapeHtml(opt_data.status.id) + '" class="js-resolution-update" data-tooltip="' + soy.$$escapeHtml('Tick to set the resolution to \x27Done\x27 when an issue is transitioned to this status') + '" type="checkbox"' + ((! opt_data.canUpdateResolution || ! opt_data.status.isPresentInWorkflow == true) ? ' disabled="true" ' : '') + ((opt_data.status.isResolutionDone) ? ' checked="checked" ' : '') + '><span class=' + soy.$$escapeHtml(opt_data.canUpdateResolution ? '' : 'ghx-resolution-update-disabled') + '>' + soy.$$escapeHtml('Set resolution') + '</span></label>' : '') + '</div></div><div class="ghx-actions">' + ((! opt_data.status.isPresentInWorkflow == true) ? '<span class="ghx-icon ghx-icon-warning"  title="' + soy.$$escapeHtml('This status is not available in any of the workflows used by this board. To remove, drag it to unmapped statuses where it will no longer be available.') + '"></span>' : '') + ((opt_data.canDeleteStatus) ? '<a class="js-remove-status ghx-remove-status" rel="nofollow"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml('Remove Status') + '">' + soy.$$escapeHtml('Remove Status') + '</span></a>' : '') + '</div></div></li>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderStatus.soyTemplateName = 'GH.tpl.columnconfig.renderStatus';
}


GH.tpl.columnconfig.renderCapacities = function(opt_data, opt_ignored) {
  return '<div class="ghx-constraints">' + GH.tpl.columnconfig.renderCapacityField({canEdit: opt_data.canEdit, fieldName: 'min', fieldValue: opt_data.column.min, index: opt_data.index, hasValue: opt_data.column.min != '' ? true : false}) + GH.tpl.columnconfig.renderCapacityField({canEdit: opt_data.canEdit, fieldName: 'max', fieldValue: opt_data.column.max, index: opt_data.index, hasValue: opt_data.column.max != '' ? true : false}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderCapacities.soyTemplateName = 'GH.tpl.columnconfig.renderCapacities';
}


GH.tpl.columnconfig.renderCapacityField = function(opt_data, opt_ignored) {
  var output = '';
  var placeholder__soy434 = opt_data.fieldName == 'min' ? 'No Min' : 'No Max';
  var title__soy435 = opt_data.fieldName == 'min' ? 'Minimum constraint for this column' : 'Maximum constraint for this column';
  var displayValue__soy436 = opt_data.hasValue ? opt_data.fieldValue : placeholder__soy434;
  output += '<span class="field-value' + ((opt_data.canEdit) ? ' js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + ' ghx-editable' : '') + ' ghx-busted ghx-busted-' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" data-columnindex=' + soy.$$escapeHtml(opt_data.index) + ' title="' + soy.$$escapeHtml(title__soy435) + '">' + soy.$$escapeHtml(displayValue__soy436) + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderCapacityField.soyTemplateName = 'GH.tpl.columnconfig.renderCapacityField';
}


GH.tpl.columnconfig.renderCapacityFieldEdit = function(opt_data, opt_ignored) {
  return '<input type="text" maxlength="5" name="' + soy.$$escapeHtml(opt_data.fieldName) + '" class=" ghx-busted ghx-busted-' + soy.$$escapeHtml(opt_data.fieldName) + '" data-columnindex=' + soy.$$escapeHtml(opt_data.index) + '>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderCapacityFieldEdit.soyTemplateName = 'GH.tpl.columnconfig.renderCapacityFieldEdit';
}


GH.tpl.columnconfig.renderColumnNameField = function(opt_data, opt_ignored) {
  return '<h3 class="ghx-header-name ' + ((opt_data.canEdit) ? 'ghx-editable js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger' : '') + '" ' + ((opt_data.canEdit) ? 'tabindex="0"' : '') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" title="' + soy.$$escapeHtml(opt_data.displayValue) + '">' + soy.$$escapeHtml(opt_data.displayValue) + '</h3>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderColumnNameField.soyTemplateName = 'GH.tpl.columnconfig.renderColumnNameField';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/ops/GHJQLAutoComplete.js' */
!function(){"use strict";var i=require("jquery"),r=require("jira-agile/rapid/deferred-resources-loader"),t=(require("jira/featureflags/feature-manager"),require("jira-agile/rapid/const/PageMode"));GH.JQLAutoComplete.setModel=function(e){GH.JQLAutoComplete.jqlFields=JSON.parse(e.JQLAutoComplete.jqlFields),GH.JQLAutoComplete.jqlFunctionNames=JSON.parse(e.JQLAutoComplete.jqlFunctionNames),GH.JQLAutoComplete.jqlReservedWords=JSON.parse(e.JQLAutoComplete.jqlReservedWords)},GH.JQLAutoComplete.initialize=function(e,o){GH.RapidBoard.State.getMode()===t.PLAN?n(["wrc!gh-rapid-backlog-deferred"],e,o):GH.RapidBoard.State.getMode()===t.WORK?n(["wrc!gh-rapid-lwf-board-deferred"],e,o):s(e,o)};var n=function(e,o,t){r.triggerOnDemandResourceLoad(e,"jqlAutoComplete",function(){s(o,t)})};function s(e,o){var t=i("#"+e),r=0<t.length&&t[0]===document.activeElement,n=JIRA.JQLAutoComplete({fieldID:e,parser:JIRA.JQLAutoComplete.MyParser(GH.JQLAutoComplete.jqlReservedWords),queryDelay:.65,jqlFieldNames:GH.JQLAutoComplete.jqlFields,jqlFunctionNames:GH.JQLAutoComplete.jqlFunctionNames,minQueryLength:0,allowArrowCarousel:!0,autoSelectFirst:!1,errorID:o}),e=i("#"+e);e.unbind("keypress",submitOnEnter),n.buildResponseContainer(),n.parse(e.text()),n.updateColumnLineCount(),e.on("focus",function(){n.positionResponseContainer()}),e.click(function(){n.dropdownController.hideDropdown()}),r&&t.select(),t.data("ghJqlAutoComplete",n)}GH.JQLAutoComplete.fixSuggestionPositioning=function(e){e=i("#"+e).data("ghJqlAutoComplete");e&&(e.positionResponseContainer||(e.positionResponseContainer=function(){this.responseContainer&&this.field&&this.responseContainer.css({top:this.field.outerHeight()})}),e.positionResponseContainer())}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/SwimlaneConfig.js' */
GH.RapidBoard.Config.Swimlanes={},GH.RapidBoard.Config.Swimlanes.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.Config.Swimlanes.Analytics.base=new e("gh.swimlane"),GH.RapidBoard.Config.Swimlanes.Analytics.add=new e("gh.swimlane","create"),GH.RapidBoard.Config.Swimlanes.Analytics.edit=new e("gh.swimlane","edit"),GH.RapidBoard.Config.Swimlanes.Analytics.remove=new e("gh.swimlane","delete")}(),GH.RapidBoard.Config.Swimlanes.strategies=[{id:"custom",primarySelectId:"custom",inPrimarySelection:!0,name:"Queries",description:"Group issues by custom queries. Queries are based on JQL that is additional to the saved filter of this board."},{id:"parentChild",primarySelectId:"parentChild",inPrimarySelection:!0,name:"Stories",description:"Group sub-tasks under their parent issue. Issues without sub-tasks will be shown in their own group at the bottom."},{id:"assignee",primarySelectId:"assignee",inPrimarySelection:!0,name:"Assignees",description:"Group issues by their assignee"},{id:"assigneeUnassignedFirst",primarySelectId:"assignee",inPrimarySelection:!1,name:"Assignees",description:"Group issues by their assignee"},{id:"epic",primarySelectId:"epic",inPrimarySelection:!0,name:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText()?GH.RapidBoard.State.getEpicLevelName():"Epics",description:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicText()?AJS.format("Group issues under their {0}. Issues not assigned to an {0} will be shown in their own group at the bottom. {0} with no issues on the board will not be shown.",GH.RapidBoard.State.getEpicLevelName()):"Group issues under their epic. Issues not assigned to an epic will be shown in their own group at the bottom. Epics with no issues on the board will not be shown."},{id:"project",primarySelectId:"project",inPrimarySelection:!0,name:"Projects",description:"Group issues by their projects."},{id:"none",primarySelectId:"none",inPrimarySelection:!0,name:"None",description:"No swimlanes will be displayed."}],GH.RapidBoard.Config.Swimlanes.assigneeStrategies=[{id:"assignee",name:"Show below other swimlanes"},{id:"assigneeUnassignedFirst",name:"Show above other swimlanes"}],GH.RapidBoard.Config.Swimlanes.TableColumns=[{id:"name",header:"Name",fieldName:"name"},{id:"query",header:"JQL",fileName:"query",editView:GH.RapidBoard.Config.Util.JQLEditView.extend({namespace:"ghx-swimlane"})},{id:"description",header:"Description",fileName:"description",editView:GH.RapidBoard.Config.Util.TextAreaEditView}],GH.RapidBoard.Config.Swimlanes.model=void 0,GH.RapidBoard.Config.Swimlanes.init=function(e){GH.RapidBoard.Config.Swimlanes.model=e.swimlanesConfig,e.isSprintSupportEnabled?GH.RapidBoard.Config.Swimlanes.boardType="scrum":e.isSimpleBoard?GH.RapidBoard.Config.Swimlanes.boardType="simple":GH.RapidBoard.Config.Swimlanes.boardType="kanban",GH.RapidBoard.Config.Swimlanes.renderConfig()},GH.RapidBoard.Config.Swimlanes.getStrategyById=function(i){return _.find(GH.RapidBoard.Config.Swimlanes.getStrategies(),function(e){return e.id==i})},GH.RapidBoard.Config.Swimlanes.renderConfig=function(){var e=GH.RapidBoard.Config.Swimlanes.model,i=e.canEdit,e=e.swimlaneStrategy,e=(e=GH.RapidBoard.Config.Swimlanes.getStrategyById(e))||GH.RapidBoard.Config.Swimlanes.getStrategyById("none");AJS.$("#ghx-config-swimlanes").html(GH.tpl.swimlaneconfig.renderSwimlaneConfigView({canEdit:i,selectedStrategy:e,strategies:GH.RapidBoard.Config.Swimlanes.getStrategies()})),GH.RapidBoard.Config.Swimlanes.updateStrategyConfig(e),AJS.$("#ghx-swimlanestrategy-select").change(GH.RapidBoard.Config.Swimlanes.saveStrategySelection)},GH.RapidBoard.Config.Swimlanes.getStrategies=function(){return _.filter(GH.RapidBoard.Config.Swimlanes.strategies,function(e){return!e.boardType||e.boardType==GH.RapidBoard.Config.Swimlanes.boardType})},GH.RapidBoard.Config.Swimlanes.updateStrategyConfig=function(e){switch(AJS.$("#ghx-swimlanestrategy-description").text(e.description),e.id){case"custom":return void GH.RapidBoard.Config.Swimlanes.initializeCustomConfig();case"assignee":case"assigneeUnassignedFirst":return void GH.RapidBoard.Config.Swimlanes.initializeAssigneeConfig(e);default:GH.RapidBoard.Config.Swimlanes.initializeNone()}},GH.RapidBoard.Config.Swimlanes.saveStrategySelection=function(e){var i=AJS.$("#ghx-swimlanestrategy-select").val(),a=AJS.$("#ghx-assignee-strategy-select").val(),n=GH.RapidBoard.Config.Swimlanes.model.swimlaneStrategy,t="assignee"===i&&a?a:i,a=GH.RapidBoard.Config.Swimlanes.getStrategyById(t);a&&(GH.RapidBoard.Config.Swimlanes.model.swimlaneStrategy=a.id,GH.RapidBoard.Config.Swimlanes.updateStrategyConfig(a),i=GH.RapidBoard.Config.Swimlanes.model.rapidViewId,GH.Ajax.put({url:"/rapidviewconfig/swimlaneStrategy",data:{id:i,swimlaneStrategyId:a.id}}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("swimLaneStrategy",{oldValId:n,newValId:t}),JIRA.trace("gh.swimlanes.strategy.saved")}))},GH.RapidBoard.Config.Swimlanes.initializeAssigneeConfig=function(e){var i=GH.RapidBoard.Config.Swimlanes.model.canEdit;AJS.$("#ghx-swimlane-strategy-config").html(GH.tpl.swimlaneconfig.renderAssigneeStrategyConfig({canEdit:i,assigneeStrategies:GH.RapidBoard.Config.Swimlanes.assigneeStrategies,selectedStrategy:e})),AJS.$("#ghx-assignee-strategy-select").change(GH.RapidBoard.Config.Swimlanes.saveStrategySelection)},GH.RapidBoard.Config.Swimlanes.initializeNone=function(){AJS.$("#ghx-swimlane-strategy-config").empty()},GH.RapidBoard.Config.Swimlanes.initializeCustomConfig=function(){var e=GH.RapidBoard.Config.Swimlanes.model,i=e.canEdit,a=e.rapidViewId,n=e.swimlanes;if(!i)for(var t=0;t<n.length;t++)n[t].readonly=!0;AJS.$("#ghx-swimlane-strategy-config").html('<table id="ghx-swimlane-table" class="aui"></table>');a=new GH.RestfulTable({el:AJS.$("#ghx-swimlane-table"),resources:{all:function(e){e(GH.RapidBoard.Config.Swimlanes.model.swimlanes)},self:GH.Ajax.buildRestUrl("/swimlanes/"+a+"/")},columns:GH.RapidBoard.Config.Swimlanes.TableColumns,deleteConfirmation:{header:"Delete",content:function(e){return GH.tpl.rapid.view.deleteForm({message:AJS.format("Are you sure you want to delete Swimlane \u003cstrong\u003e{0}\u003c/strong\u003e?",AJS.escapeHTML(String(e.name)))})}},views:{row:GH.RapidBoard.Config.Swimlanes.Row,editRow:GH.RapidBoard.Config.Swimlanes.EditRow},allowEdit:i,allowDelete:i,allowReorder:i,allowCreate:i}),i=a.getModels();i.on("add",function(e,i){GH.RapidBoard.Config.Swimlanes.model.swimlanes=i.toJSON()}),i.on("remove",function(e,i){GH.RapidBoard.Config.Swimlanes.model.swimlanes=i.toJSON()}),i.on("change",function(e,i){var a=this;setTimeout(function(){GH.RapidBoard.Config.Swimlanes.model.swimlanes=a.toJSON()},0)}),AJS.$(a).bind(GH.RestfulTable.Events.REORDER_SUCCESS,function(){GH.RapidBoard.Config.Swimlanes.model.swimlanes=this.getModels().sort().toJSON()}),a.$tbody.agileSortable("option","items","> .js-sortable"),e.canEdit&&(_.delay(GH.JQLAutoComplete.initialize,0,"ghx-swimlane-jql-create","ghx-swimlane-jql-errormsg-create"),AJS.$(document).bind("tabSelect",function(e,i){GH.JQLAutoComplete.fixSuggestionPositioning("ghx-swimlane-jql-create")}),AJS.$(a).bind(GH.RestfulTable.Events.ROW_REMOVED,function(e,i){GH.RapidBoard.Config.Swimlanes.Analytics.remove.trigger(i.model.attributes.query)}))},GH.RapidBoard.Config.Swimlanes.Row=GH.RestfulTable.Row.extend({render:function(){GH.RestfulTable.Row.prototype.render.apply(this,arguments);var e=this.model.get("isDefault");return this.$el.toggleClass("js-sortable",!e).toggleClass("ghx-default-swimlane",e),e&&this.$el.find(".aui-restfultable-delete").remove(),this}}),GH.RapidBoard.Config.Swimlanes.EditRow=GH.RestfulTable.EditRow.extend({submit:function(){var e=this.$el.serializeObject(),i=this.model.attributes.query,e=e&&e.query?e.query:"";return this.model.id?GH.RapidBoard.Config.Swimlanes.Analytics.edit.trigger("old: "+i+", new: "+e):GH.RapidBoard.Config.Swimlanes.Analytics.add.trigger(e),GH.RestfulTable.EditRow.prototype.submit.apply(this,arguments)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/SwimlaneConfig.soy' */
// This file was automatically generated from SwimlaneConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.swimlaneconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.swimlaneconfig == 'undefined') { GH.tpl.swimlaneconfig = {}; }


GH.tpl.swimlaneconfig.renderSwimlaneConfigView = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Swimlanes') + '</h2><p>' + soy.$$escapeHtml('A swimlane is a row on the board that can be used to group issues. Swimlane type can be changed below and will be saved automatically. Note: queries will not be lost when changing to another swimlane type.') + '</p><form class="aui"><div class="field-group"><label>' + soy.$$escapeHtml('Base Swimlanes on') + '</label><select id="ghx-swimlanestrategy-select" class="select" ' + ((opt_data.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var strategyList14 = opt_data.strategies;
  var strategyListLen14 = strategyList14.length;
  for (var strategyIndex14 = 0; strategyIndex14 < strategyListLen14; strategyIndex14++) {
    var strategyData14 = strategyList14[strategyIndex14];
    output += (strategyData14.inPrimarySelection) ? '<option value="' + soy.$$escapeHtml(strategyData14.id) + '"' + ((strategyData14.id == opt_data.selectedStrategy.primarySelectId) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(strategyData14.name) + '</option>' : '';
  }
  output += '</select><div id="ghx-swimlanestrategy-description" class="description"></div></div></form><div id="ghx-swimlane-strategy-config" class="ghx-margin-top" ></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.swimlaneconfig.renderSwimlaneConfigView.soyTemplateName = 'GH.tpl.swimlaneconfig.renderSwimlaneConfigView';
}


GH.tpl.swimlaneconfig.renderAssigneeStrategyConfig = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><div class="field-group"><label>' + soy.$$escapeHtml('Unassigned issues') + '</label><select id="ghx-assignee-strategy-select" class="select" ' + ((opt_data.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var strategyList36 = opt_data.assigneeStrategies;
  var strategyListLen36 = strategyList36.length;
  for (var strategyIndex36 = 0; strategyIndex36 < strategyListLen36; strategyIndex36++) {
    var strategyData36 = strategyList36[strategyIndex36];
    output += '<option value="' + soy.$$escapeHtml(strategyData36.id) + '"' + ((strategyData36.id == opt_data.selectedStrategy.id) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(strategyData36.name) + '</option>';
  }
  output += '</select></div></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.swimlaneconfig.renderAssigneeStrategyConfig.soyTemplateName = 'GH.tpl.swimlaneconfig.renderAssigneeStrategyConfig';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/QuickFilterConfig.js' */
!function(){"use strict";var i=require("jira-agile/rapid/analytics-tracker"),a=require("jquery");GH.RapidBoard.Config.QuickFilter={},GH.RapidBoard.Config.QuickFilter.model=void 0,GH.RapidBoard.Config.QuickFilter.Analytics={},GH.RapidBoard.Config.QuickFilter.Analytics.base=new i("gh.quickfilter"),GH.RapidBoard.Config.QuickFilter.Analytics.add=new i("gh.quickfilter","create"),GH.RapidBoard.Config.QuickFilter.Analytics.edit=new i("gh.quickfilter","edit"),GH.RapidBoard.Config.QuickFilter.Analytics.remove=new i("gh.quickfilter","delete"),GH.RapidBoard.Config.QuickFilter.TableColumns=[{id:"name",header:"Name",fieldName:"name"},{id:"query",header:"JQL",fieldName:"query",editView:GH.RapidBoard.Config.Util.JQLEditView.extend({namespace:"ghx-quick-filter"})},{id:"description",header:"Description",fieldName:"description",editView:GH.RapidBoard.Config.Util.TextAreaEditView}],GH.RapidBoard.Config.QuickFilter.init=function(i){GH.RapidBoard.Config.QuickFilter.model=i.quickFilterConfig,GH.RapidBoard.Config.QuickFilter.initializeTable()},GH.RapidBoard.Config.QuickFilter.initializeTable=function(){var i=GH.RapidBoard.Config.QuickFilter.model,e=i.canEdit,t=i.rapidViewId;AJS.$("#ghx-config-quickFilters").html(GH.tpl.quickfilterconfig.renderQuickFilterConfig());e=new GH.RestfulTable({el:a("#ghx-quick-filter-table"),resources:{all:function(i){i(GH.RapidBoard.Config.QuickFilter.model.quickFilters)},self:GH.Ajax.buildRestUrl("/quickfilters/"+t+"/")},columns:GH.RapidBoard.Config.QuickFilter.TableColumns,deleteConfirmation:{header:"Delete",content:function(i){return GH.tpl.rapid.view.deleteForm({message:AJS.format("Are you sure you want to delete Quick Filter \u003cstrong\u003e{0}\u003c/strong\u003e?",AJS.escapeHTML(String(i.name)))})}},views:{editRow:GH.RestfulTable.EditRow.extend({submit:function(){var i=this.$el.serializeObject(),e=this.model.attributes.query,i=i&&i.query?i.query:"";return this.model.id?GH.RapidBoard.Config.QuickFilter.Analytics.edit.trigger("rapidViewId: "+t+", oldJql: '"+e+"', newJql: '"+i+"'"):GH.RapidBoard.Config.QuickFilter.Analytics.add.trigger("rapidViewId: "+GH.RapidBoard.Config.editedRapidViewId+", jql: '"+i+"'"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("quickFilters"),GH.RestfulTable.EditRow.prototype.submit.apply(this,arguments)}})},allowEdit:e,allowDelete:e,allowReorder:e,allowCreate:e});i.canEdit&&(_.delay(GH.JQLAutoComplete.initialize,0,"ghx-quick-filter-jql-create","ghx-quick-filter-jql-errormsg-create"),AJS.$(document).bind("tabSelect",function(){GH.JQLAutoComplete.fixSuggestionPositioning("ghx-quick-filter-jql-create")}),AJS.$(e).bind(GH.RestfulTable.Events.ROW_REMOVED,function(i,e){e="rapidViewId: "+t+", jql: '"+e.model.attributes.query+"'";GH.RapidBoard.Config.QuickFilter.Analytics.remove.trigger(e),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("quickFilters")}))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/QuickFilterConfig.soy' */
// This file was automatically generated from QuickFilterConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.quickfilterconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.quickfilterconfig == 'undefined') { GH.tpl.quickfilterconfig = {}; }


GH.tpl.quickfilterconfig.renderQuickFilterConfig = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Quick Filters') + '</h2><p>' + soy.$$escapeHtml('Quick Filters can be used to further filter the issues in the board based on the additional JQL query.') + '</p><table id="ghx-quick-filter-table" class="aui"></table>';
};
if (goog.DEBUG) {
  GH.tpl.quickfilterconfig.renderQuickFilterConfig.soyTemplateName = 'GH.tpl.quickfilterconfig.renderQuickFilterConfig';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/EstimationConfig.js' */
GH.RapidBoard.Config.Estimation={},GH.RapidBoard.Config.Estimation.model=void 0,GH.RapidBoard.Config.Estimation.init=function(i){GH.RapidBoard.Config.Estimation.model=i.estimationStatisticConfig,GH.RapidBoard.Config.Estimation.initializeForm()},GH.RapidBoard.Config.Estimation.initializeForm=function(){var i=GH.RapidBoard.Config.Estimation.model,t={model:i,urls:{estimationAndTracking:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Configuring+Estimation+and+Tracking","isLocal":false}.url},currentTrackingStatisticIsNone:"none"==i.currentTrackingStatistic.typeId,trackingDescriptionNone:AJS.format("Issues will burn down their {0}{1}{2} value upon completion.","<b>",AJS.escapeHTML(String(i.currentEstimationStatistic.name)),"</b>")};"issueCount_"==i.currentEstimationStatistic.id?t.currentEstimateDescription="Your velocity from sprint to sprint will be measured by the number of issues completed in each sprint. However, you will not be required to enter any estimates against issues in the backlog.":"field_timeoriginalestimate"==i.currentEstimationStatistic.id?t.currentEstimateDescription=AJS.format("Estimate issues in the Backlog using durations (e.g. hours, ideal days). Your velocity from sprint to sprint will be measured against these estimates. This estimate will be stored against Jira\'\'s {0}Original Estimate{1} field on the issue.","<b>","</b>"):t.currentEstimateDescription=AJS.format("Estimate issues in the Backlog by entering values for {0}{1}{2}. Your velocity from sprint to sprint will be measured against these estimates.","<b>",AJS.escapeHTML(String(i.currentEstimationStatistic.name)),"</b>"),AJS.$("#ghx-config-estimation").html(GH.tpl.estimationconfig.renderEstimationConfigView(t)),GH.RapidBoard.Config.Estimation.attachListeners()},GH.RapidBoard.Config.Estimation.attachListeners=function(){AJS.$("#ghx-estimatestatistic-select").change(GH.RapidBoard.Config.Estimation.save),AJS.$(':radio[name="ghx-trackingstatistic"]').change(GH.RapidBoard.Config.Estimation.save)},GH.RapidBoard.Config.Estimation.save=function(){var i={estimateStatisticId:AJS.$("#ghx-estimatestatistic-select").val(),trackingStatisticId:AJS.$(':radio[name="ghx-trackingstatistic"]:checked').val(),rapidViewId:GH.RapidBoard.Config.Estimation.model.rapidViewId};GH.Ajax.put({url:"/rapidviewconfig/estimation",data:i,errorContextMap:{estimatestatistic:"#ghx-estimatestatistic-select"}}).done(function(i){GH.Notification.showSuccess("Estimation configuration has been saved.");var t=GH.RapidBoard.Config.Estimation.model,i=i.success;GH.RapidBoard.Config.Estimation.init({estimationStatisticConfig:i}),i.currentEstimationStatistic.id!==t.currentEstimationStatistic.id?GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("estimationStatistic",{oldValId:t.currentEstimationStatistic.id,newValId:i.currentEstimationStatistic.id}):i.currentTrackingStatistic.id!==t.currentTrackingStatistic.id&&GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("trackingStatistic",{oldValId:t.currentTrackingStatistic.id,newValId:i.currentTrackingStatistic.id})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/EstimationConfig.soy' */
// This file was automatically generated from EstimationConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.estimationconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.estimationconfig == 'undefined') { GH.tpl.estimationconfig = {}; }


GH.tpl.estimationconfig.renderEstimationConfigView = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Estimation') + '</h2><p>' + soy.$$filterNoAutoescape(AJS.format('Issues can be estimated when in the Backlog to get an idea of how much work is being committed to in a sprint. {0}Read more about estimation and tracking.{1}','<a href="' + opt_data.urls.estimationAndTracking + '" class="js-outgoing-link" data-link-id="estimation.and.tracking">','</a>')) + '</p><form class="aui ghx-limited"><div class="field-group"><label>' + soy.$$escapeHtml('Estimation Statistic') + '</label><select id="ghx-estimatestatistic-select" class="select" ' + ((opt_data.model.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var fieldList15 = opt_data.model.availableEstimationStatistics;
  var fieldListLen15 = fieldList15.length;
  for (var fieldIndex15 = 0; fieldIndex15 < fieldListLen15; fieldIndex15++) {
    var fieldData15 = fieldList15[fieldIndex15];
    output += '<option value="' + soy.$$escapeHtml(fieldData15.id) + '"' + ((fieldData15.id == opt_data.model.currentEstimationStatistic.id) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(fieldData15.name) + '</option>';
  }
  output += '</select>' + ((! opt_data.model.currentEstimationStatistic.isValid) ? '<div class="error">' + soy.$$escapeHtml('The configured estimation statistic is no longer valid. Please select a valid option.') + '</div>' : '') + '<div class="description">' + soy.$$filterNoAutoescape(opt_data.currentEstimateDescription) + '</div></div><fieldset class="group"><legend><span>' + soy.$$escapeHtml('Time Tracking') + '</span></legend><div class="radio"><input class="radio" type="radio" id="ghx-trackingstatistic-none" name="ghx-trackingstatistic" value="none_"' + ((opt_data.currentTrackingStatisticIsNone) ? ' checked="checked"' : '') + ' ' + ((opt_data.model.canEdit != true) ? 'disabled="disabled"' : '') + ' /><label for="ghx-trackingstatistic-none">' + soy.$$escapeHtml('None') + '</label><div class="description">' + soy.$$filterNoAutoescape(opt_data.trackingDescriptionNone) + '</div></div><div class="radio"><input class="radio" type="radio" id="ghx-trackingstatistic-remainingtimeestimate" name="ghx-trackingstatistic" value="field_timeestimate"' + ((! opt_data.currentTrackingStatisticIsNone) ? ' checked="checked"' : '') + ' ' + ((opt_data.model.canEdit != true) ? 'disabled="disabled"' : '') + ' /><label for="ghx-trackingstatistic-remainingtimeestimate">' + soy.$$escapeHtml('Remaining Estimate and Time Spent') + '</label><div class="description">' + soy.$$filterNoAutoescape(AJS.format('Track time against issues using Jira\x27\x27s {0}Remaining Estimate{1} and {0}Time Spent{1} fields.','<b>','</b>')) + '</div></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.estimationconfig.renderEstimationConfigView.soyTemplateName = 'GH.tpl.estimationconfig.renderEstimationConfigView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/WorkingDaysConfig.js' */
GH.WorkingDaysConfig={},GH.WorkingDaysConfig.ISO8601Format="%Y-%m-%d",GH.WorkingDaysConfig.model=void 0,GH.WorkingDaysConfig.init=function(n){GH.WorkingDaysConfig.model=n.workingDaysConfig,GH.WorkingDaysConfig.renderTab()},GH.WorkingDaysConfig.renderTab=function(){AJS.$("#ghx-config-time").html(GH.tpl.workingdaysconfig.renderChartConfig({shouldUseFlexibleNaming:GH.RapidBoard.State.shouldShowFlexibleNomenclatureEpicTextReports(),epicLevelName:GH.RapidBoard.State.getEpicLevelName()})),GH.WorkingDaysConfig.renderTimeZoneConfig(),GH.WorkingDaysConfig.renderWeeklyConfig(),GH.WorkingDaysConfig.renderDailyConfig()},GH.WorkingDaysConfig.renderTimeZoneConfig=function(){var n=GH.WorkingDaysConfig.model.timeZoneEditModel.regions,o=GH.WorkingDaysConfig.model.timeZoneEditModel.currentTimeZoneId,i=GH.WorkingDaysConfig.getRegionKeyForTimeZoneId(o),o={canEdit:GH.WorkingDaysConfig.model.canEdit,selectedRegionKey:i,regions:n,zones:GH.WorkingDaysConfig.getZonesForRegion(i),selectedTimeZoneId:o};AJS.$("#ghx-timezone-config").html(GH.tpl.workingdaysconfig.renderTimeZoneConfig(o)),AJS.$("#ghx-region-select").change(GH.WorkingDaysConfig.updateRegionZones),AJS.$("#ghx-timezone-select").change(GH.WorkingDaysConfig.handleTimezoneUpdate)},GH.WorkingDaysConfig.updateRegionZones=function(){var n=AJS.$("#ghx-region-select").val(),n={zones:GH.WorkingDaysConfig.getZonesForRegion(n)};$timezoneSelect=AJS.$("#ghx-timezone-select"),$timezoneSelect.html(GH.tpl.workingdaysconfig.renderTimeZoneOptions(n)),GH.WorkingDaysConfig.handleTimezoneUpdate()},GH.WorkingDaysConfig.getZonesForRegion=function(o){return _.filter(GH.WorkingDaysConfig.model.timeZoneEditModel.timeZones,function(n){return n.regionKey===o})},GH.WorkingDaysConfig.getRegionKeyForTimeZoneId=function(o){var n=_.find(GH.WorkingDaysConfig.model.timeZoneEditModel.timeZones,function(n){return n.timeZoneId===o});return n?n.regionKey:null},GH.WorkingDaysConfig.handleTimezoneUpdate=function(){var n=AJS.$("#ghx-timezone-select").val();GH.WorkingDaysConfig.setTimezone(n)},GH.WorkingDaysConfig.renderWeeklyConfig=function(){var n=AJS.$("#ghx-weekdays-config");n.html(GH.tpl.workingdaysconfig.renderWeekdaysConfig({canEdit:GH.WorkingDaysConfig.model.canEdit,weekDays:GH.WorkingDaysConfig.model.weekDays})),n.find("input.checkbox").change(GH.WorkingDaysConfig.saveWeekDays)},GH.WorkingDaysConfig.renderDailyConfig=function(){AJS.$("#ghx-daily-config").html(GH.tpl.workingdaysconfig.renderDailyConfig({canEdit:GH.WorkingDaysConfig.model.canEdit}));var o=0;Calendar.setup({firstDay:0,cache:!1,inputField:"ghx-add-off-day",button:"ghx-add-off-day-button",align:"Tr",singleClick:!0,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers,onUpdate:function(){o=(new Date).getTime()},onClose:function(n){(new Date).getTime()-o<100&&GH.WorkingDaysConfig.handleAddDay(),n.hide()}}),GH.WorkingDaysConfig.renderDays()},GH.WorkingDaysConfig.renderDays=function(){var i={days:[]},n=GH.WorkingDaysConfig.model.nonWorkingDays;n.sort(function(n,o){return n.iso8601Date.localeCompare(o.iso8601Date)}),_.each(n,function(n){var o=GH.WorkingDaysConfig.parseIsoDateString(n.iso8601Date),o=(o=new Date(o)).print(GH.TimeFormat.dateFormat);i.days.push({displayValue:o,value:n.iso8601Date})});n=AJS.$("#ghx-existing-off-days");n.html(GH.tpl.workingdaysconfig.renderDays({days:i.days,canEdit:GH.WorkingDaysConfig.model.canEdit})),n.find(".aui-icon-close").click(GH.WorkingDaysConfig.handleRemoveDay)},GH.WorkingDaysConfig.handleAddDay=function(){var n=AJS.$("#ghx-add-off-day").val();n&&(n=Date.parseDate(n,GH.TimeFormat.dateFormat),GH.WorkingDaysConfig.addDay(n),GH.WorkingDaysConfig.addDayToModel(n),GH.WorkingDaysConfig.renderDays(),AJS.$("#ghx-add-off-day").val(""))},GH.WorkingDaysConfig.addDayToModel=function(n){var o=GH.WorkingDaysConfig.toISODate(n),n=GH.WorkingDaysConfig.model.nonWorkingDays;_.find(n,function(n){return n.iso8601Date===o})||n.push({iso8601Date:o})},GH.WorkingDaysConfig.removeDayFromModel=function(n){var o=GH.WorkingDaysConfig.toISODate(n),n=GH.WorkingDaysConfig.model.nonWorkingDays;GH.WorkingDaysConfig.model.nonWorkingDays=_.reject(n,function(n){return n.iso8601Date===o})},GH.WorkingDaysConfig.handleRemoveDay=function(n){var o=AJS.$(this).closest(".js-day-off"),o=GH.WorkingDaysConfig.parseIsoDateString(o.attr("data-date"));GH.WorkingDaysConfig.removeDay(o),GH.WorkingDaysConfig.removeDayFromModel(o),GH.WorkingDaysConfig.renderDays()},GH.WorkingDaysConfig.toISODate=function(n){return n.print("%Y-%m-%d")},GH.WorkingDaysConfig.parseIsoDateString=function(n){return Date.parseDate(n,GH.WorkingDaysConfig.ISO8601Format)},GH.WorkingDaysConfig.setTimezone=function(n){n={rapidViewId:GH.WorkingDaysConfig.model.rapidViewId,timeZoneId:n};GH.Ajax.put({url:"/rapidviewconfig/workingdays/timezone",data:n}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("timezone")})},GH.WorkingDaysConfig.saveWeekDays=function(){var n={rapidViewId:GH.WorkingDaysConfig.model.rapidViewId,monday:AJS.$("#ghx-monday").is(":checked"),tuesday:AJS.$("#ghx-tuesday").is(":checked"),wednesday:AJS.$("#ghx-wednesday").is(":checked"),thursday:AJS.$("#ghx-thursday").is(":checked"),friday:AJS.$("#ghx-friday").is(":checked"),saturday:AJS.$("#ghx-saturday").is(":checked"),sunday:AJS.$("#ghx-sunday").is(":checked")};GH.Ajax.put({url:"/rapidviewconfig/workingdays/weekdays",data:n}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("workingDays")})},GH.WorkingDaysConfig.addDay=function(n){n={rapidViewId:GH.WorkingDaysConfig.model.rapidViewId,iso8601Date:GH.WorkingDaysConfig.toISODate(n)};GH.Ajax.post({url:"/rapidviewconfig/workingdays/nonworkingday/add",data:n}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("nonWorkingDays")})},GH.WorkingDaysConfig.removeDay=function(n){n={rapidViewId:GH.WorkingDaysConfig.model.rapidViewId,iso8601Date:GH.WorkingDaysConfig.toISODate(n)};GH.Ajax.post({url:"/rapidviewconfig/workingdays/nonworkingday/remove",data:n}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("nonWorkingDays")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/WorkingDaysConfig.soy' */
// This file was automatically generated from WorkingDaysConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.workingdaysconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.workingdaysconfig == 'undefined') { GH.tpl.workingdaysconfig = {}; }


GH.tpl.workingdaysconfig.renderChartConfig = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Working days') + '</h2><p>' + soy.$$escapeHtml('These settings allow you to highlight or exclude non-working days from reports and gadgets.') + '</p><p class="ghx-description">' + soy.$$escapeHtml(opt_data.shouldUseFlexibleNaming ? AJS.format('They apply to the following reports: Burndown Chart, Sprint Report, {0} Report, Version Report, Control Chart; and the following gadgets: Sprint Health Gadget, Burndown Gadget.',opt_data.epicLevelName) : 'They apply to the following reports: Burndown Chart, Sprint Report, Epic Report, Version Report, Control Chart; and the following gadgets: Sprint Health Gadget, Burndown Gadget.') + '</p><div id="ghx-timezone-config" class="ghx-margin-top"></div><div id="ghx-weekdays-config" class="ghx-margin-top"></div><div id="ghx-daily-config" class="ghx-margin-top"></div>';
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderChartConfig.soyTemplateName = 'GH.tpl.workingdaysconfig.renderChartConfig';
}


GH.tpl.workingdaysconfig.renderTimeZoneConfig = function(opt_data, opt_ignored) {
  var output = '<h5>' + soy.$$escapeHtml('Time Zone') + '</h5>' + ((opt_data.canEdit && ! opt_data.selectedRegionKey) ? '<div class="aui-message error">' + soy.$$escapeHtml('Select a region and time zone') + '</div>' : '') + '<form class="aui gh-aui"><fieldset><div class="field-group"><label for="ghx-region-select">' + soy.$$escapeHtml('Region') + ':</label><select id="ghx-region-select" class="select" ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '>';
  var regionList26 = opt_data.regions;
  var regionListLen26 = regionList26.length;
  for (var regionIndex26 = 0; regionIndex26 < regionListLen26; regionIndex26++) {
    var regionData26 = regionList26[regionIndex26];
    output += '<option value="' + soy.$$escapeHtml(regionData26.key) + '"' + ((regionData26.key == opt_data.selectedRegionKey) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(regionData26.displayName) + '</option>';
  }
  output += '</select></div><div class="field-group"><label for="ghx-timezone-select">' + soy.$$escapeHtml('Time Zone') + ':</label><select id="ghx-timezone-select" class="select" ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '>' + GH.tpl.workingdaysconfig.renderTimeZoneOptions(opt_data) + '</select></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderTimeZoneConfig.soyTemplateName = 'GH.tpl.workingdaysconfig.renderTimeZoneConfig';
}


GH.tpl.workingdaysconfig.renderTimeZoneOptions = function(opt_data, opt_ignored) {
  var output = '';
  var zoneList49 = opt_data.zones;
  var zoneListLen49 = zoneList49.length;
  for (var zoneIndex49 = 0; zoneIndex49 < zoneListLen49; zoneIndex49++) {
    var zoneData49 = zoneList49[zoneIndex49];
    output += '<option value="' + soy.$$escapeHtml(zoneData49.timeZoneId) + '"' + ((zoneData49.timeZoneId == opt_data.selectedTimeZoneId) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(zoneData49.gMTOffset) + ' ' + soy.$$escapeHtml(zoneData49.city) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderTimeZoneOptions.soyTemplateName = 'GH.tpl.workingdaysconfig.renderTimeZoneOptions';
}


GH.tpl.workingdaysconfig.renderWeekdaysConfig = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml('Standard Working Days') + '</h5><form class="aui gh-aui"><fieldset class="group"><legend><span>' + soy.$$escapeHtml('Every') + '</span></legend><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-monday" ' + ((opt_data.weekDays.monday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-monday">' + soy.$$escapeHtml('Monday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-tuesday" ' + ((opt_data.weekDays.tuesday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-tuesday">' + soy.$$escapeHtml('Tuesday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-wednesday" ' + ((opt_data.weekDays.wednesday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-wednesday">' + soy.$$escapeHtml('Wednesday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-thursday" ' + ((opt_data.weekDays.thursday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-thursday">' + soy.$$escapeHtml('Thursday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-friday" ' + ((opt_data.weekDays.friday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-friday">' + soy.$$escapeHtml('Friday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-saturday" ' + ((opt_data.weekDays.saturday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-saturday">' + soy.$$escapeHtml('Saturday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-sunday" ' + ((opt_data.weekDays.sunday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-sunday">' + soy.$$escapeHtml('Sunday') + '</label></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderWeekdaysConfig.soyTemplateName = 'GH.tpl.workingdaysconfig.renderWeekdaysConfig';
}


GH.tpl.workingdaysconfig.renderDailyConfig = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml('Non-Working Days') + '</h5><form class="aui gh-aui"><div class="field-group"><label>' + soy.$$escapeHtml('Dates') + ':</label><span class="field-value" id="ghx-existing-off-days"></span></div><div class="field-group"><input id="ghx-add-off-day" type="hidden" value="" readonly><button id="ghx-add-off-day-button" class="aui-button" ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '>' + soy.$$escapeHtml('Add Date') + '</button><span id="ghx-add-off-day-error"></span></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderDailyConfig.soyTemplateName = 'GH.tpl.workingdaysconfig.renderDailyConfig';
}


GH.tpl.workingdaysconfig.renderDays = function(opt_data, opt_ignored) {
  var output = '';
  var dayList151 = opt_data.days;
  var dayListLen151 = dayList151.length;
  if (dayListLen151 > 0) {
    for (var dayIndex151 = 0; dayIndex151 < dayListLen151; dayIndex151++) {
      var dayData151 = dayList151[dayIndex151];
      output += (opt_data.canEdit) ? aui.labels.label({extraClasses: ['js-day-off'], isCloseable: true, text: dayData151.displayValue, extraAttributes: {'data-date': dayData151.value}}) : aui.labels.label({text: dayData151.displayValue});
    }
  } else {
    output += '<em>' + soy.$$escapeHtml('No dates') + '</em>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderDays.soyTemplateName = 'GH.tpl.workingdaysconfig.renderDays';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardColorConfig.js' */
!function(){"use strict";var o=require("jira-agile/rapid/analytics-tracker"),a=require("jquery");GH.CardColorConfig={},GH.CardColorConfig.model=void 0,GH.CardColorConfig.Analytics={},GH.CardColorConfig.Analytics.base=new o("gh.config.cardcolor"),GH.CardColorConfig.Analytics.add=new o("gh.config.cardcolor.custom","add"),GH.CardColorConfig.Analytics.edit=new o("gh.config.cardcolor.custom","edit"),GH.CardColorConfig.Analytics.remove=new o("gh.config.cardcolor.custom","delete"),GH.CardColorConfig.strategies=[{id:"issuetype",name:"Issue Types",hasDescriptionField:!1,canAddRows:!1,canReorderRows:!1,columnOverrides:{value:{header:"Issue Type"}}},{id:"priority",name:"Priorities",hasDescriptionField:!1,canAddRows:!1,canReorderRows:!1,columnOverrides:{value:{header:"Priority"}}},{id:"assignee",name:"Assignees",hasDescriptionField:!1,canAddRows:!1,canReorderRows:!1,columnOverrides:{value:{header:"Assignee"}}},{id:"custom",name:"Queries",hasDescriptionField:!0,canAddRows:!0,canReorderRows:!0,columnOverrides:{value:{allowEdit:!0,allowDelete:!0,header:"JQL",emptyText:"Add query",editView:GH.RapidBoard.Config.Util.JQLEditView.extend({namespace:"ghx-card-color"})}}},{id:"none",name:"None",hasDescriptionField:!1,canAddRows:!1,canReorderRows:!1}],GH.CardColorConfig.TableColumnsDefaults=[{id:"color",header:"Color",fieldName:"color",styleClass:"ghx-picker",allowEdit:!0,allowDelete:!0,readView:GH.RestfulTable.CustomReadView.extend({render:function(o){return AJS.$(GH.tpl.cardcolorconfig.renderReadOnlyViewColor(o))}}),editView:GH.RestfulTable.CustomEditView.extend({render:function(o){var t=this;o.value||(o.value=GH.CardColorConfig.nextDefaultColorHex());var o=AJS.$(GH.tpl.cardcolorconfig.renderEditableViewColor(o)),a=this.$picker=o.filter(".ghx-picker-select");return a.ColorPicker({onChange:function(o,e,r){e="#"+e;a.css("background-color",e),a.attr("data-field-value",e),a.parent().find("input").val(e),t.model.set({color:e})},onHide:function(o){GH.CardColorConfig.hidePicker(o,t)},onBeforeShow:function(){var o=a.parent().find("input").val().substr(1);AJS.$(this).ColorPickerSetColor(o)}}).bind("click",_.bind(this.focus,this)),o.filter("input").bind("select",_.bind(this.focus,this)),o},focus:function(){this.$picker.ColorPickerShow()}})},{id:"value",header:null,fieldName:"value",allowEdit:!1,allowDelete:!1,readView:GH.RestfulTable.CustomReadView.extend({render:function(o){var e=this.model.get("displayValue");return e?document.createTextNode(e):null}}),editView:GH.RestfulTable.CustomEditView.extend({render:function(o){var e=this.model.get("displayValue");return e?document.createTextNode(e):null}})}],GH.CardColorConfig.hidePicker=function(o,e){AJS.$(o).fadeOut(500),e.model.get("id")&&(o=GH.CardColorConfig.model.rapidViewId,GH.Ajax.put({url:"/cardcolors/"+o+"/color/"+e.model.get("id"),data:e.model.toJSON()}));e=AJS.$(".aui-restfultable-editrow .aui-restfultable-cancel");return e.click(),e.parent().show(),!1},GH.CardColorConfig.init=function(o){GH.CardColorConfig.model=o.cardColorConfig,GH.CardColorConfig.renderConfig()},GH.CardColorConfig.getStrategyById=function(e){return _.find(GH.CardColorConfig.strategies,function(o){return o.id===e})},GH.CardColorConfig.getCurrentStrategy=function(){var o=GH.CardColorConfig.model;return o&&o.cardColorStrategy?GH.CardColorConfig.getStrategyById(o.cardColorStrategy):null},GH.CardColorConfig.renderConfig=function(){var o=GH.CardColorConfig.model,e=o.canEdit,o=o.cardColorStrategy;AJS.$("#ghx-config-cardColors").html(GH.tpl.cardcolorconfig.renderCardColorConfigView({canEdit:e,currentStrategyId:o,strategies:GH.CardColorConfig.strategies,learnMore:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Customising+Cards","isLocal":false}.url}));o=GH.CardColorConfig.getStrategyById(o);o&&(GH.CardColorConfig.loadStrategyConfig(o),AJS.$("#ghx-cardcolorstrategy-select").change(GH.CardColorConfig.saveStrategySelection))},GH.CardColorConfig.saveStrategySelection=function(o){var e=GH.CardColorConfig.getCurrentStrategy(),r=AJS.$("#ghx-cardcolorstrategy-select").val(),t=GH.CardColorConfig.getStrategyById(r);t&&(GH.CardColorConfig.model.cardColorStrategy=t.id,r=GH.CardColorConfig.model.rapidViewId,GH.Ajax.put({url:"/cardcolors/"+r+"/strategy",data:{id:r,cardColorStrategyId:t.id}}).done(function(){GH.CardColorConfig.loadStrategyConfig(t),GH.CardColorConfig.Analytics.base.trigger("editStrategy",t.id),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("cardColourStrategy",{oldValId:e.id,newValId:t.id})}))},GH.CardColorConfig.loadStrategyConfig=function(o){AJS.$("#ghx-cardcolorstrategy-select").after(GH.tpl.cardcolorconfig.renderCardColorLoading());var e=GH.CardColorConfig.model.rapidViewId;GH.Ajax.get({url:"/cardcolors/"+e+"/strategy/"+o.id,data:{preloadValues:!0}},"cardColorConfig").done(GH.CardColorConfig.processConfigData)},GH.CardColorConfig.processConfigData=function(o){GH.CardColorConfig.model=o,GH.CardColorConfig.renderConfigurationTable()},GH.CardColorConfig.renderConfigurationTable=function(){var o=GH.CardColorConfig.model,e=o.canEdit,r=o.rapidViewId,t=GH.CardColorConfig.getCurrentStrategy();AJS.$("#ghx-card-color-table-form").html('<table id="ghx-card-color-table"></table>').attr("data-strategy",t.id),AJS.$("#ghx-cardcolorstrategy-select ~ .ghx-spinner").remove(),"none"!==t.id&&(GH.CardColorConfig.nextDefaultColorHex.counter=o.cardColors.length,e=new GH.RestfulTable({el:a("#ghx-card-color-table"),resources:{all:function(o){o(GH.CardColorConfig.model.cardColors)},self:GH.Ajax.buildRestUrl("/cardcolors/"+r+"/color/")},columns:_.map(GH.CardColorConfig.TableColumnsDefaults,function(o){return _.extend({},o,t.columnOverrides[o.id])}),deleteConfirmation:{header:"Delete",content:function(o){return GH.tpl.rapid.view.deleteForm({message:"Are you sure you want to delete this card color?"})}},views:{editRow:GH.RestfulTable.EditRow.extend({mapSubmitParams:function(o){o=GH.RestfulTable.EditRow.prototype.mapSubmitParams.call(this,o);return o&&(o.strategy=t.id),o},submit:function(){var o=this.$el.serializeObject(),e=this.model.attributes.value,o=o&&o.value?o.value:"";return e?GH.CardColorConfig.Analytics.edit.trigger("new: "+o+", old: "+e):GH.CardColorConfig.Analytics.add.trigger(o),GH.RestfulTable.EditRow.prototype.submit.apply(this,arguments)}})},allowEdit:e,allowDelete:e,allowCreate:e&&t.canAddRows,allowReorder:e&&t.canReorderRows}),"custom"===t.id&&(_.delay(GH.JQLAutoComplete.initialize,0,"ghx-card-color-jql-create","ghx-card-color-jql-errormsg-create"),AJS.$(document).bind("tabSelect",function(){GH.JQLAutoComplete.fixSuggestionPositioning("ghx-card-color-jql-create")}),AJS.$(e).bind(GH.RestfulTable.Events.ROW_REMOVED,function(o,e){GH.CardColorConfig.Analytics.remove.trigger(e.model.attributes.value)})))},GH.CardColorConfig.getDefaultColorHex=function(o){var e=GH.CardColorConfig.model.defaultColors;return e[o%e.length]},GH.CardColorConfig.nextDefaultColorHex=function(){return GH.CardColorConfig.getDefaultColorHex(GH.CardColorConfig.nextDefaultColorHex.counter++)},GH.CardColorConfig.nextDefaultColorHex.counter=null}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardColorConfig.soy' */
// This file was automatically generated from CardColorConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.cardcolorconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.cardcolorconfig == 'undefined') { GH.tpl.cardcolorconfig = {}; }


GH.tpl.cardcolorconfig.renderReadOnlyViewColor = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="ghx-picker-select js-card-color-edit"' + ((opt_data.value) ? ' style="background-color:' + soy.$$escapeHtml(opt_data.value) + ';"' : '') + '>' + ((! opt_data.value) ? '<em>' + soy.$$escapeHtml('gh.rapid.config.cardcolors.empty.color') + '</em>' : '&nbsp;') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.cardcolorconfig.renderReadOnlyViewColor.soyTemplateName = 'GH.tpl.cardcolorconfig.renderReadOnlyViewColor';
}


GH.tpl.cardcolorconfig.renderEditableViewColor = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="' + soy.$$escapeHtml(opt_data.name) + '" value="' + soy.$$escapeHtml(opt_data.value) + '"><span class="ghx-picker-select js-card-color-edit"' + ((opt_data.value) ? ' style="background-color:' + soy.$$escapeHtml(opt_data.value) + ';"' : '') + '>' + ((! opt_data.value) ? '<em>' + soy.$$escapeHtml('gh.rapid.config.cardcolors.empty.color') + '</em>' : '&nbsp;') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.cardcolorconfig.renderEditableViewColor.soyTemplateName = 'GH.tpl.cardcolorconfig.renderEditableViewColor';
}


GH.tpl.cardcolorconfig.renderCardColorConfigView = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Card colors') + '</h2><p>' + soy.$$filterNoAutoescape(AJS.format('Choose a method for assigning colors to your cards. If no method is selected, the cards will not have a colored edge. Any changes to the color configuration for a method are saved immediately, so you can switch back to it later if you wish.','<br/>')) + '</p><p><a href="' + soy.$$escapeHtml(opt_data.learnMore) + '">' + soy.$$escapeHtml('Learn more about card colors.') + '</a></p><form class="aui"><div class="field-group"><label>' + soy.$$escapeHtml('Colors based on') + '</label><select id="ghx-cardcolorstrategy-select" class="select" ' + ((opt_data.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var strategyList55 = opt_data.strategies;
  var strategyListLen55 = strategyList55.length;
  for (var strategyIndex55 = 0; strategyIndex55 < strategyListLen55; strategyIndex55++) {
    var strategyData55 = strategyList55[strategyIndex55];
    output += '<option value="' + soy.$$escapeHtml(strategyData55.id) + '"' + ((strategyData55.id == opt_data.currentStrategyId) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(strategyData55.name) + '</option>';
  }
  output += '</select></div></form><div id="ghx-card-color-table-form"></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.cardcolorconfig.renderCardColorConfigView.soyTemplateName = 'GH.tpl.cardcolorconfig.renderCardColorConfigView';
}


GH.tpl.cardcolorconfig.renderCardColorLoading = function(opt_data, opt_ignored) {
  return '<div class="ghx-spinner"></div>';
};
if (goog.DEBUG) {
  GH.tpl.cardcolorconfig.renderCardColorLoading.soyTemplateName = 'GH.tpl.cardcolorconfig.renderCardColorLoading';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/DetailViewConfig.js' */
GH.DetailViewConfig={},GH.DetailViewConfig.UNSUPPORTED_CATEGORY="unsupported",GH.DetailViewConfig.model=void 0,GH.DetailViewConfig.restfulTableHeadings={details:"General fields",dates:"Date fields",people:"People",links:"Links",unsupported:"Unsupported fields"},GH.DetailViewConfig.restfulTable={},GH.DetailViewConfig.TableColumns=[{id:"fieldId",header:"Field name",fieldName:"fieldId",readView:GH.RestfulTable.CustomReadView.extend({render:function(e){return GH.tpl.detailviewconfig.renderDetailViewFieldCell(this.model.toJSON())}})}],GH.DetailViewConfig.createView=function(n){return GH.RestfulTable.CustomCreateView.extend({render:function(e){var i=this,l=AJS.$('<select class="select"></select>').attr("name",e.name),t=GH.DetailViewConfig.getAvailableDetailViewFields(!1);return(t=_.filter(t,function(e){return e.category===n})).length?l.html(this.renderOptions(t)):l.hide(),GH.DetailViewConfig.getAvailableDetailViewFields(!0).done(function(e){t=e.fields,(t=_.filter(t,function(e){return e.category===n})).sort(function(e,i){return e.name.localeCompare(i.name)}),t.length?(GH.DetailViewConfig.restfulTable[n].getCreateRow().enable(),l.html(i.renderOptions(t)).show()):(l.hide(),GH.DetailViewConfig.restfulTable[n].getCreateRow().disable())}),l},renderOptions:function(e){return _.reduce(e,function(e,i){i=AJS.$("<option></option>").val(i.fieldId).text(i.name);return e.add(i)},AJS.$())}})},GH.DetailViewConfig.init=function(e){0!==AJS.$("#ghx-config-detailView").length&&(GH.DetailViewConfig.model=e.detailViewFieldConfig,GH.DetailViewConfig.renderConfig())},GH.DetailViewConfig.renderConfig=function(){GH.DetailViewConfig.model;AJS.$("#ghx-config-detailView").html(GH.tpl.detailviewconfig.renderDetailViewConfig({fieldConfigHelpUrl:{"url":"https://confluence.atlassian.com/display/AdminJIRACloud/Specifying+field+behavior","isLocal":false}.url,screenConfigHelpUrl:{"url":"https://confluence.atlassian.com/display/AdminJIRACloud/Defining+a+screen","isLocal":false}.url})),GH.DetailViewConfig.renderConfigurationTable(GH.DetailViewConfig.UNSUPPORTED_CATEGORY),GH.DetailViewConfig.renderConfigurationTable("details"),GH.DetailViewConfig.renderConfigurationTable("dates"),GH.DetailViewConfig.renderConfigurationTable("people"),GH.DetailViewConfig.renderConfigurationTable("links")},GH.DetailViewConfig.renderConfigurationTable=function(i){var l,e,t,n=GH.DetailViewConfig.model,a=n.canEdit,o=n.rapidViewId,d=AJS.$("#ghx-detail-view-field-table-form-"+i),r=GH.DetailViewConfig.restfulTableHeadings[i];a?(l=_.filter(GH.DetailViewConfig.model.currentFields,function(e){return e.category===i}),e=_.filter(GH.DetailViewConfig.getAvailableDetailViewFields(!1),function(e){return e.category===i}),0===l.length&&0===e.length||(n="ghx-detail-view-field-table-"+i,d.html(GH.tpl.detailviewconfig.renderDetailViewTable({heading:r,tableId:n,description:i===GH.DetailViewConfig.UNSUPPORTED_CATEGORY?"Some fields in the Issue Detail View are no longer supported in Jira Software. You can delete these fields since unsupported fields won\'t appear on your board.":""})),(e=GH.DetailViewConfig.TableColumns)[0].createView=GH.DetailViewConfig.createView(i),a={el:AJS.$("#"+n),resources:{all:function(e){return e(l)},self:GH.Ajax.buildRestUrl("/detailviewfield/"+o+"/field/")},columns:e,allowEdit:!1,allowDelete:a,allowReorder:a,allowCreate:a},i===GH.DetailViewConfig.UNSUPPORTED_CATEGORY&&(a.allowReorder=!1,a.allowCreate=!1),t=GH.DetailViewConfig.restfulTable[i]=new GH.RestfulTable(a),AJS.$(t).bind(GH.RestfulTable.Events.ROW_REMOVED,function(){i===GH.DetailViewConfig.UNSUPPORTED_CATEGORY?t.isEmpty()&&d.remove():t.getCreateRow().render({values:{},errors:{}}),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("detailViewConfig")}),AJS.$(t).bind(GH.RestfulTable.Events.ROW_ADDED,function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("detailViewConfig")}))):d.html(GH.tpl.detailviewconfig.renderEmptyDetailViewTable({heading:r}))},GH.DetailViewConfig.getAvailableDetailViewFields=function(e){var i=GH.DetailViewConfig.model;return e?GH.Ajax.get({url:"/detailviewfield/"+i.rapidViewId+"/available"},"detailViewConfig").done(function(e){i.availableFields=e.fields}):i.availableFields};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/DetailViewConfig.soy' */
// This file was automatically generated from DetailViewConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailviewconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailviewconfig == 'undefined') { GH.tpl.detailviewconfig = {}; }


GH.tpl.detailviewconfig.renderDetailViewConfig = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Issue Detail View') + '</h2>';
  var newIssueViewLink__soy6 = '<a href="https://confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view">' + soy.$$filterNoAutoescape('new issue view') + '</a>';
  var issueLayoutPath__soy11 = '<b>' + soy.$$filterNoAutoescape('Project settings \x3e Issue layout') + '</b>';
  var configurePath__soy16 = '<b>' + soy.$$filterNoAutoescape('... \x3e Configure') + '</b>';
  output += '<div class="aui-message purple-message"><p class="title">' + soy.$$filterNoAutoescape('Layout in the new Jira issue view') + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('The order of fields in the {0} is set for issue types in a project, so that issues have a consistent look across different project locations, like boards, backlogs, search, and the full-page issue view. To configure the layout of issue types in a project, go to {1}.',newIssueViewLink__soy6,issueLayoutPath__soy11)) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('Alternatively, and for issues on personal and multi-project boards, open an issue on the board and choose {0}.',configurePath__soy16)) + '</p><p><a href="https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Configure+field+layout+in+the+issue+view">' + soy.$$filterNoAutoescape('Learn more about configuring the new issue view') + '</a></p></div><p>' + soy.$$escapeHtml('Add, delete or reorder fields on the Issue Detail View.') + '</p><p class="ghx-description">' + soy.$$filterNoAutoescape(AJS.format('Some fields may be hidden, depending on the \x3ca href\x3d\x22{0}\x22\x3efield configuration scheme\x3c/a\x3e used for the project\x27\x27s issue types.',opt_data.fieldConfigHelpUrl)) + '&nbsp;' + soy.$$filterNoAutoescape(AJS.format('Some fields may also be uneditable; to make a field editable, \x3ca href\x3d\x22{0}\x22\x3eit must be added\x3c/a\x3e to the Edit Issue screen for the project of an issue.',opt_data.screenConfigHelpUrl)) + '</p><div id="ghx-detail-view-field-table-form-unsupported" class="ghx-margin-top-x2"></div><div id="ghx-detail-view-field-table-form-details" class="ghx-margin-top-x2"></div><div id="ghx-detail-view-field-table-form-dates" class="ghx-margin-top-x2"></div><div id="ghx-detail-view-field-table-form-people" class="ghx-margin-top-x2"></div><div id="ghx-detail-view-field-table-form-links" class="ghx-margin-top-x2"></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailviewconfig.renderDetailViewConfig.soyTemplateName = 'GH.tpl.detailviewconfig.renderDetailViewConfig';
}


GH.tpl.detailviewconfig.renderDetailViewFieldCell = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name) + ((! opt_data.isValid) ? ' <span title="' + soy.$$escapeHtml('This field is currently unavailable. It may have been removed from the system.') + '" class="ghx-icon ghx-icon-warning"></span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.detailviewconfig.renderDetailViewFieldCell.soyTemplateName = 'GH.tpl.detailviewconfig.renderDetailViewFieldCell';
}


GH.tpl.detailviewconfig.renderDetailViewTable = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml(opt_data.heading) + '</h5><p>' + soy.$$escapeHtml(opt_data.description) + '</p><table id="' + soy.$$escapeHtml(opt_data.tableId) + '"></table>';
};
if (goog.DEBUG) {
  GH.tpl.detailviewconfig.renderDetailViewTable.soyTemplateName = 'GH.tpl.detailviewconfig.renderDetailViewTable';
}


GH.tpl.detailviewconfig.renderEmptyDetailViewTable = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml(opt_data.heading) + '</h5><span class="ghx-fa">' + soy.$$escapeHtml('No additional fields added') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.detailviewconfig.renderEmptyDetailViewTable.soyTemplateName = 'GH.tpl.detailviewconfig.renderEmptyDetailViewTable';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-deferred', location = 'jira-agile-module/includes/js/sidebar/subnavigator/PlanSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider"),define("jira-agile/subnavigator/plan-subnavigator-context-provider",["underscore","jira-agile/rapid/ui/plan/plan-controls"],function(n,a){var e={id:0,label:"Backlog"};return{hasSubnavigator:function(){return!0},header:function(){return a.rapidViewConfig.name},itemList:function(){return[e]},onLoad:function(){},selectedItem:function(){return e.id},getChangeViewText:function(){return"_"},analyticEvent:function(){}}}),AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider",null,require("jira-agile/subnavigator/plan-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-deferred', location = 'jira-agile-module/includes/js/rapid/DefaultDeferredResourceEventHandler.js' */
define("jira-agile/rapid/deferred-resources-event-handler",["require"],function(e){"use strict";var i=e("jira-agile/rapid/global-events"),r={init:function(){r.triggerPreInitialization(),r.triggerDeferBatchParsingCompleteEvent()},triggerPreInitialization:function(){i.trigger("pre-initialization")},triggerDeferBatchParsingCompleteEvent:function(){AJS.$(GH).trigger("deferBatchParsingComplete")}};return r});;;try{window.performance.mark('jira.global,jira.general,atl.global,com.atlassian.jira.project-templates-plugin,com.pyxis.greenhopper.jira,gh-rapid-lwf-board-deferred_batch_file_eval:end');} catch(e){};