try{window.performance.mark("@atlaskit-internal_media-client.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["@atlaskit-internal_media-client"],{"+Nfr":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=async e=>new Promise(((t,n)=>{const r=URL.createObjectURL(e),i=document.createElement("video");i.preload="metadata",i.src=r,i.muted=!0,i.addEventListener("loadedmetadata",(function e(){i.removeEventListener("loadedmetadata",e),t({width:i.videoWidth,height:i.videoHeight}),URL.revokeObjectURL(r)})),i.addEventListener("error",(()=>{n(new Error("failed to load video")),URL.revokeObjectURL(r)}))}))},"+i32":function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return h})),n.d(t,"k",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return b})),
n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return w}));var r=n("CBQ3");function i(e){return e instanceof Error&&"request_cancelled"===e.message||!!e&&"AbortError"===e.name}function o(e){return e instanceof TypeError}function a(e){return!!e&&Object(n("hNFo").b)(e)&&429===e.attributes.statusCode||!!e&&!!e.message&&e.message.includes("429")}const s="x-b3-traceid",c="x-b3-spanid",u=e=>e?{[s]:e.traceId,[c]:e.spanId}:{};function l(e){return e?Object(r.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,Authorization:`Bearer ${e.token}`}:{"X-Issuer":e.asapIssuer,Authorization:`Bearer ${e.token}`}:{}}function d(e,{params:t,auth:n}){const i=new URL(e),o=n&&function(e){return Object(r.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}(n)||{},a={...t,...o};return Object.entries(a).filter((([e,t])=>null!=t)).forEach((e=>{i.searchParams.append(...e)})),i.searchParams.sort(),i.toString()}function p(e,t,n){if(t||n||e)return{...null!=e?e:{},...l(t),
...u(n)}}async function f(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.json()}catch(t){throw new(n("hNFo").a)("serverInvalidBody",{statusCode:e.status},t instanceof Error?t:void 0)}}async function h(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.blob()}catch(t){throw new(n("hNFo").a)("serverInvalidBody",{statusCode:e.status},t instanceof Error?t:void 0)}}function m(){return console.warn("Helper is deprecated and will be remove in the next major version"),Promise.resolve()}function y(e){return async t=>{try{return await t.json()}catch(r){throw new(n("hNFo").a)("serverInvalidBody",{...e,...x(t),statusCode:t.status},r instanceof Error?r:void 0)}}}function b(e){return async t=>{try{return await t.blob()}catch(r){throw new(n("hNFo").a)("serverInvalidBody",{...e,...x(t),statusCode:t.status},r instanceof Error?r:void 0)}}}const g={startTimeoutInMs:1e3,maxAttempts:5,factor:2}
;async function v(e,t,r={}){const a={...g,...r},{startTimeoutInMs:s,maxAttempts:c,factor:u}=a;let l,d=0,p=s;const f=async()=>{await function(e){return new Promise((t=>setTimeout(t,e)))}(p),p*=u,d+=1};for(;d<c;)try{return await e()}catch(h){if(l=h,i(h))throw new(n("hNFo").a)("clientAbortedRequest",t,h);if(!o(h)&&!Object(n("hNFo").b)(h)||Object(n("hNFo").b)(h)&&(!h.metadata||!h.metadata.statusCode||h.metadata.statusCode<500))throw h;await f()}if(Object(n("hNFo").b)(l))throw function(e,t){const{reason:r,metadata:i,innerError:o}=e;return new(n("hNFo").a)(r,{...i,...t},o)}(l,{attempts:d,clientExhaustedRetries:!0});throw new(n("hNFo").a)("serverUnexpectedError",{...t,attempts:d,clientExhaustedRetries:!0},l)}function w(e){return t=>{if(t.ok||t.status<400)return t;const r=function(e,t){const{status:r}=t,i=function(e){switch(e){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited"
;case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}(r);return new(n("hNFo").a)(i,{...e,...x(t),statusCode:r})}(e,t);throw r}}function x(e){const{headers:t}=e;return{mediaRegion:t.get("x-media-region")||"unknown",mediaEnv:t.get("x-media-env")||"unknown"}}},"+jZZ":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));const r=(e,t)=>{const r=["audio","video","image"];return Object(n("CzTa").b)("newCardExperience",t)?[...r,"doc"].indexOf(e)>-1:r.indexOf(e)>-1};let i=function(e){return e[e.MB=1048576]="MB",e[e.GB=1073741824]="GB",e[e.TB=1099511627776]="TB",e}({})},"/Jq5":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("31bI").a{constructor(e,t){super(e),this.reason=e,this.innerError=t}get attributes(){const{reason:e,innerError:t}=this;return{reason:e,innerError:t}}}function i(e){return e instanceof r}},
"/LR1":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n("rfFC");t.tap=function(e,t,n){return function(r){return r.lift(new o(e,t,n))}};var o=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.nextOrObserver,this.error,this.complete))},e}(),a=function(e){function t(t,n,r,o){e.call(this,t);var a=new i.Subscriber(n,r,o);a.syncErrorThrowable=!0,this.add(a),this.safeSubscriber=a}return r(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},
t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(i.Subscriber)},"/Sn5":function(e,t,n){"use strict";n.r(t),n.d(t,"MediaStore",(function(){return n("hbF6").a})),n.d(t,"MediaStoreError",(function(){return n("/Jq5").a})),n.d(t,"isMediaStoreError",(function(){return n("/Jq5").b})),n.d(t,"getMediaEnvironment",(function(){return n("hbF6").b})),n.d(t,"getMediaRegion",(function(){return n("hbF6").c})),n.d(t,"UploadController",(function(){return n("f7Pv").a})),n.d(t,"isPreviewableType",(function(){return n("KDwl").b})),n.d(t,"getArtifactUrl",(function(){return n("k+ZQ").a})),n.d(t,"isMediaClientError",(function(){return n("p4Xe").b})),n.d(t,"getMediaClientErrorReason",(function(){return n("p4Xe").a})),n.d(t,"isUploadingFileState",(function(){return n("WxjT").g})),n.d(t,"isProcessingFileState",(function(){return n("WxjT").f})),n.d(t,"isProcessedFileState",(function(){
return n("WxjT").e})),n.d(t,"isErrorFileState",(function(){return n("WxjT").a})),n.d(t,"isPreviewableFileState",(function(){return n("WxjT").d})),n.d(t,"isFinalFileState",(function(){return n("WxjT").b})),n.d(t,"isImageRepresentationReady",(function(){return n("WxjT").c})),n.d(t,"mapMediaFileToFileState",(function(){return n("WxjT").h})),n.d(t,"mapMediaItemToFileState",(function(){return n("WxjT").i})),n.d(t,"uploadFile",(function(){return n("COEO").a})),n.d(t,"request",(function(){return n("cckU").a})),n.d(t,"RequestError",(function(){return n("5qIg").a})),n.d(t,"isRequestError",(function(){return n("5qIg").b})),n.d(t,"isRateLimitedError",(function(){return n("ocNj").h})),n.d(t,"isAbortedRequestError",(function(){return n("ocNj").g})),n.d(t,"mapResponseToJson",(function(){return n("ocNj").j})),n.d(t,"mapResponseToBlob",(function(){return n("ocNj").i})),n.d(t,"mapResponseToVoid",(function(){return n("ocNj").k})),n.d(t,"createUrl",(function(){return n("ocNj").d})),
n.d(t,"PollingFunction",(function(){return n("onxz").a})),n.d(t,"isPollingError",(function(){return n("6fio").b})),n.d(t,"PollingError",(function(){return n("6fio").a})),n.d(t,"imageResizeModeToFileImageMode",(function(){return n("6g4H").a})),n.d(t,"FileFetcherImpl",(function(){return n("Uyp5").a})),n.d(t,"FileFetcherError",(function(){return n("ENB1").a})),n.d(t,"isFileFetcherError",(function(){return n("ENB1").b})),n.d(t,"MediaClient",(function(){return n("jy5L").a})),n.d(t,"StargateClient",(function(){return n("Kgmz").a})),n.d(t,"isImageRemote",(function(){return r})),n.d(t,"checkWebpSupport",(function(){return o})),n.d(t,"getDimensionsFromBlob",(function(){return n("6LwX").a})),n.d(t,"createMediaSubject",(function(){return n("P7Zh").a})),n.d(t,"safeUnsubscribe",(function(){return a})),n.d(t,"isFileIdentifier",(function(){return n("c7gP").c})),n.d(t,"isExternalImageIdentifier",(function(){return n("c7gP").b})),n.d(t,"isDifferentIdentifier",(function(){return n("c7gP").a})),
n.d(t,"withMediaClient",(function(){return n("CG+v").b})),n.d(t,"getMediaClient",(function(){return n("CG+v").a})),n.d(t,"globalMediaEventEmitter",(function(){return n("/nbe").a})),n.d(t,"isMediaBlobUrl",(function(){return n("WUE1").c})),n.d(t,"getAttrsFromUrl",(function(){return n("WUE1").b})),n.d(t,"addFileAttrsToUrl",(function(){return n("WUE1").a})),n.d(t,"objectToQueryString",(function(){return n("WUE1").d})),n.d(t,"createMediaSubscribable",(function(){return n("gWsH").a})),n.d(t,"RECENTS_COLLECTION",(function(){return n("n37Y").e})),n.d(t,"MAX_RESOLUTION",(function(){return n("n37Y").c})),n.d(t,"getMediaTypeFromMimeType",(function(){return s})),n.d(t,"isImageMimeTypeSupportedByBrowser",(function(){return c})),n.d(t,"isDocumentMimeTypeSupportedByBrowser",(function(){return u})),n.d(t,"isMimeTypeSupportedByBrowser",(function(){return l})),n.d(t,"isImageMimeTypeSupportedByServer",(function(){return d})),n.d(t,"isDocumentMimeTypeSupportedByServer",(function(){return p})),
n.d(t,"isAudioMimeTypeSupportedByServer",(function(){return f})),n.d(t,"isVideoMimeTypeSupportedByServer",(function(){return h})),n.d(t,"isUnknownMimeTypeSupportedByServer",(function(){return m})),n.d(t,"isMimeTypeSupportedByServer",(function(){return y}));const r=(e,t=window.location.origin)=>{if(URL&&URL.prototype){const n=new URL(e);return!!n.host&&n.origin!==t}return!0};let i;const o=()=>void 0!==i?Promise.resolve(i):new Promise((e=>{const t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=()=>{i=2===t.height,e(i)}})),a=e=>{console.warn("safeUnsubscribe() is deprecated and will be removed in the next media-client major version"),setTimeout((()=>e&&e.unsubscribe()),0)},s=n("29vY").a,c=n("G9O0").c,u=n("G9O0").b,l=n("G9O0").d,d=n("txrb").c,p=n("txrb").b,f=n("txrb").a,h=n("txrb").f,m=n("txrb").e,y=n("txrb").d},"/Y15":function(e,t,n){"use strict";n.r(t),n.d(t,"MediaStore",(function(){return n("V/+Q").a
})),n.d(t,"MediaStoreError",(function(){return n("LPPq").a})),n.d(t,"isMediaStoreError",(function(){return n("LPPq").b})),n.d(t,"getMediaEnvironment",(function(){return n("V/+Q").b})),n.d(t,"getMediaRegion",(function(){return n("V/+Q").c})),n.d(t,"UploadController",(function(){return n("qgBj").a})),n.d(t,"isPreviewableType",(function(){return n("5d15").b})),n.d(t,"getArtifactUrl",(function(){return n("QdhA").a})),n.d(t,"isMediaClientError",(function(){return n("MgWD").b})),n.d(t,"getMediaClientErrorReason",(function(){return n("MgWD").a})),n.d(t,"isUploadingFileState",(function(){return n("pLQX").g})),n.d(t,"isProcessingFileState",(function(){return n("pLQX").f})),n.d(t,"isProcessedFileState",(function(){return n("pLQX").e})),n.d(t,"isErrorFileState",(function(){return n("pLQX").a})),n.d(t,"isPreviewableFileState",(function(){return n("pLQX").d})),n.d(t,"isFinalFileState",(function(){return n("pLQX").b})),n.d(t,"isImageRepresentationReady",(function(){return n("pLQX").c})),
n.d(t,"mapMediaFileToFileState",(function(){return n("pLQX").h})),n.d(t,"mapMediaItemToFileState",(function(){return n("pLQX").i})),n.d(t,"uploadFile",(function(){return d})),n.d(t,"request",(function(){return n("HSvsD").a})),n.d(t,"RequestError",(function(){return n("QgRX").a})),n.d(t,"isRequestError",(function(){return n("QgRX").b})),n.d(t,"isRateLimitedError",(function(){return n("rSNj").i})),n.d(t,"createRequestErrorReason",(function(){return n("rSNj").d})),n.d(t,"isAbortedRequestError",(function(){return n("rSNj").h})),n.d(t,"mapResponseToJson",(function(){return n("rSNj").k})),n.d(t,"mapResponseToBlob",(function(){return n("rSNj").j})),n.d(t,"mapResponseToVoid",(function(){return n("rSNj").l})),n.d(t,"createUrl",(function(){return n("rSNj").e})),n.d(t,"PollingFunction",(function(){return n("KAL7").a})),n.d(t,"isPollingError",(function(){return n("6naO").b})),n.d(t,"PollingError",(function(){return n("6naO").a})),n.d(t,"imageResizeModeToFileImageMode",(function(){
return n("dxe4").a})),n.d(t,"FileFetcherImpl",(function(){return F})),n.d(t,"FileFetcherError",(function(){return w})),n.d(t,"isFileFetcherError",(function(){return x})),n.d(t,"MediaClient",(function(){return C})),n.d(t,"StargateClient",(function(){return A})),n.d(t,"isImageRemote",(function(){return U})),n.d(t,"checkWebpSupport",(function(){return P})),n.d(t,"getDimensionsFromBlob",(function(){return n("KiD/").a})),n.d(t,"createMediaSubject",(function(){return n("/x/G").a})),n.d(t,"safeUnsubscribe",(function(){return _})),n.d(t,"isFileIdentifier",(function(){return n("csvX").c})),n.d(t,"isExternalImageIdentifier",(function(){return n("csvX").b})),n.d(t,"isDifferentIdentifier",(function(){return n("csvX").a})),n.d(t,"withMediaClient",(function(){return K})),n.d(t,"getMediaClient",(function(){return z})),n.d(t,"globalMediaEventEmitter",(function(){return n("Xw9V").a})),n.d(t,"isMediaBlobUrl",(function(){return n("poNK").c})),n.d(t,"getAttrsFromUrl",(function(){return n("poNK").b})),
n.d(t,"addFileAttrsToUrl",(function(){return n("poNK").a})),n.d(t,"objectToQueryString",(function(){return n("poNK").d})),n.d(t,"createMediaSubscribable",(function(){return E})),n.d(t,"fromObservable",(function(){return I})),n.d(t,"RECENTS_COLLECTION",(function(){return n("0bW0").e})),n.d(t,"MAX_RESOLUTION",(function(){return n("0bW0").c})),n.d(t,"getMediaTypeFromMimeType",(function(){return q})),n.d(t,"isImageMimeTypeSupportedByBrowser",(function(){return D})),n.d(t,"isDocumentMimeTypeSupportedByBrowser",(function(){return $})),n.d(t,"isMimeTypeSupportedByBrowser",(function(){return W})),n.d(t,"isImageMimeTypeSupportedByServer",(function(){return X})),n.d(t,"isDocumentMimeTypeSupportedByServer",(function(){return Q})),n.d(t,"isAudioMimeTypeSupportedByServer",(function(){return G})),n.d(t,"isVideoMimeTypeSupportedByServer",(function(){return V})),n.d(t,"isUnknownMimeTypeSupportedByServer",(function(){return J})),n.d(t,"isMimeTypeSupportedByServer",(function(){return Z}))
;var r=n("IrFB"),i=n("Dbwp");let o=null;class a extends n("MgBr").a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:r}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:r}}}const s=async e=>(await(async()=>{if(!o)try{const{WorkerHasher:e}=await n.e("2ba5871dbb5fd22ea7e6c17b62ca4c4d").then(n.bind(null,"j69o"));o=new e(3)}catch(e){const{SimpleHasher:t}=await n.e("cc1285f6530863a230f0d9851688324a").then(n.bind(null,"5jA/"));o=new t}return o})()).hash(e),c=(e,t,n,r)=>async i=>{const o=(await e.probeChunks(p(i),await t,n,r)).data.results;return Object.values(o).map((e=>e.exists))},u=(e,t,n,r)=>async i=>await e.uploadChunk(i.hash,i.blob,await t,i.partNumber,n,r),l=(e,t,n,r)=>{let i=0;return async o=>{await e.appendChunksToUpload(await t,{chunks:p(o),offset:i},n,r),i+=o.length}},d=(e,t,o,d,p)=>{const{content:f,collection:h}=e,{deferredUploadId:m,id:y,occurrenceKey:b}=o
;let g=n("0bW0").a;try{f instanceof Blob&&(g=(e=>{if(e>n("0bW0").d)throw new Error("fileSizeExceedsLimit");return e<=5*n("5d15").a.GB?5*n("5d15").a.MB:e>5*n("5d15").a.GB&&e<=50*n("5d15").a.GB?50*n("5d15").a.MB:e>50*n("5d15").a.GB&&e<=.95*n("5d15").a.TB?100*n("5d15").a.MB:210*n("5d15").a.MB})(f.size))}catch(j){return j instanceof Error&&"fileSizeExceedsLimit"===j.message&&(null==d||d.onUploadFinish(new a(j.message,y,{collectionName:h,occurrenceKey:b}))),{cancel:()=>{null==d||d.onUploadFinish("canceled")}}}const v=Object(n("rcsV").a)(f,{hashingFunction:s,hashingConcurrency:5,probingBatchSize:100,chunkSize:g,uploadingConcurrency:3,uploadingFunction:u(t,m,h,p),probingFunction:c(t,m,h,p),processingBatchSize:1e3,processingFunction:l(t,m,h,p)},{onProgress(e){d&&d.onProgress(e)}}),w=d&&d.onUploadFinish||(()=>{}),x=Object(r.from)(m).pipe(Object(i.concatMap)((n=>v.pipe(Object(i.concatMap)((()=>Object(r.from)((async(e,t,n,r,i)=>{
const{collection:o,name:a,mimeType:s}=e,{id:c,occurrenceKey:u}=n,l=e.size?{uploadId:r,name:a,mimeType:s,conditions:{size:e.size}}:{uploadId:r,name:a,mimeType:s};return t.createFileFromUpload(l,{occurrenceKey:u,collection:o,replaceFileId:c},i)})(e,t,o,n,p)))))))).subscribe({error:e=>w(e),complete:()=>w()});return{cancel:()=>{x.unsubscribe(),w("canceled")}}},p=e=>e.map((e=>e.hash));var f=n("lSNA"),h=n.n(f),m=n("NTzu"),y=n("NVK1"),b=n("xk4V"),g=n.n(b),v=(n("YBdB"),n("CBQ3"));class w extends n("MgBr").a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:r}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:r}}}function x(e){return e instanceof w}var j=n("4KWY"),O=n.n(j);const S=(e,t)=>Object(n("pLQX").a)(e)||"unknown"!==e.mediaType?{}:{mediaType:t};function I(e){return{subscribe:t=>{const n=e.subscribe(t);return{unsubscribe:()=>{n.unsubscribe()}}}}}function E(e){
return I(Object(n("/x/G").a)(e))}class F{constructor(e){h()(this,"createDownloadFileStream",((e,t,r)=>{const i=Object(n("/x/G").a)(),o=new(n("KAL7").a);return o.onError=e=>i.error(e),o.execute((async()=>{const a=await this.dataloader.load({id:e,collectionName:t});if(!a)throw new w("emptyItems",e,{collectionName:t,occurrenceKey:r});if(Object(n("Ywpz").a)(a))throw new w("zeroVersionFile",e,{collectionName:t,occurrenceKey:r});const s=Object(n("pLQX").i)(e,a);switch(i.next(s),s.status){case"processing":o.next();break;case"processed":i.complete()}})),i})),h()(this,"getUploadingFileStateBase",((e,t)=>{"string"==typeof e.content&&(e.content=(e=>{const t=e.split(",")[1],n=atob(t),r=[];for(let i=0;i<n.length;i+=512){const e=n.slice(i,i+512),t=e.split("").map(((t,n)=>e.charCodeAt(n))),o=new Uint8Array(t);r.push(o)}return new Blob(r,{type:"image/jpeg"})})(e.content));const{content:r,name:i=""}=e,{id:o,occurrenceKey:a}=t;let s,c=0,u="";r instanceof Blob&&(c=r.size,u=r.type,
Object(n("v/+z").d)(r.type)&&(s={value:r,origin:"local"}));const l=(e=>{if(e.content instanceof Blob){const t=e.content.type;return Object(n("nRy+").a)(t)}return"unknown"})(e);return{id:o,occurrenceKey:a,name:i,size:c,mediaType:l,mimeType:u,preview:s}})),this.mediaStore=e,this.dataloader=Object(n("9gKE").a)(e)}getFileState(e,t={}){const{collectionName:r,occurrenceKey:i}=t;if(!O()(e)){const t=Object(n("/x/G").a)();return t.error(new w("invalidFileId",e,{collectionName:r,occurrenceKey:i})),I(t)}return I(Object(n("sSfs").a)().getOrInsert(e,(()=>this.createDownloadFileStream(e,r))))}getCurrentState(e,t){return((e,t=new m.Subscription)=>new Promise(((n,r)=>t.add(e.subscribe({next:e=>{n(e),t.unsubscribe()},error:e=>{r(e),t.unsubscribe()}})))))(this.getFileState(e,t))}getArtifactURL(e,t,n){return this.mediaStore.getArtifactURL(e,t,n)}getFileBinaryURL(e,t){return this.mediaStore.getFileBinaryURL(e,t)}touchFiles(e,t,n){return this.mediaStore.touchFiles({descriptors:e},{collection:t
},n).then((({data:e})=>e))}generateUploadableFileUpfrontIds(e,t){const n=g()(),r=g()(),i={fileId:n,occurrenceKey:r,collection:e};return{id:n,occurrenceKey:r,deferredUploadId:this.touchFiles([i],e,t).then((e=>e.created[0].uploadId))}}async uploadExternal(e,t,r){const i=this.generateUploadableFileUpfrontIds(t,r),{id:o,occurrenceKey:a}=i,s=Object(n("/x/G").a)(),c=fetch(e).then((e=>e.blob())).catch((()=>{})),u=new Promise((async(e,t)=>{const n=await c;n||t("Could not fetch the blob"),e({value:n,origin:"remote"})})),l=e.split("/").pop()||"",d={status:"processing",name:l,size:0,mediaType:"unknown",mimeType:"",id:o,occurrenceKey:a,preview:u};return s.next(d),Object(n("sSfs").a)().set(o,s),new Promise((async(e,d)=>{const p=await c;if(!p)return d("Could not download remote file");const{type:f,size:h}=p,m={content:p,mimeType:f,collection:t,name:l,size:h},y=Object(n("nRy+").a)(f);s.next({status:"processing",name:l,size:h,mediaType:y,mimeType:f,id:o,occurrenceKey:a,preview:u}),
this.upload(m,void 0,i,r);e({dimensions:await Object(n("KiD/").a)(y,p),uploadableFileUpfrontIds:i})}))}upload(e,t,r,i){const{collection:o}=e,a=r||this.generateUploadableFileUpfrontIds(o,i),{id:s,occurrenceKey:c}=a,u=this.getUploadingFileStateBase(e,a),l=Object(n("/x/G").a)();Object(n("sSfs").a)().set(s,l);const p=e=>{l.next({status:"uploading",...u,progress:e})};let f=new m.Subscription;const{cancel:h}=d(e,this.mediaStore,a,{onUploadFinish:e=>{if(e)return l.error(e);f=this.createDownloadFileStream(s,o,c).pipe(Object(y.map)((e=>({...u,...e,...S(e,u.mediaType)})))).subscribe(l)},onProgress:p},i);return null==t||t.setAbort((()=>{h(),f.unsubscribe()})),setTimeout(p,0,0),I(l)}async downloadBinary(e,t="download",r){const i=await this.mediaStore.getFileBinaryURL(e,r);Object(n("b6vz").a)(i,{name:t}),n("Xw9V").a.emit("media-viewed",{fileId:e,isUserCollection:"recents"===r,viewingLevel:"download"})}async copyFile(e,t,r={},i){
const{authProvider:o,collection:a,id:s}=e,{authProvider:c,collection:u,replaceFileId:l,occurrenceKey:d}=t,{preview:p,mimeType:f}=r,h=t.mediaStore||new(n("V/+Q").a)({authProvider:c}),m={sourceFile:{id:s,collection:a,owner:Object(v.authToOwner)(await o({collectionName:a}))}},y={collection:u,replaceFileId:l,occurrenceKey:d},b=Object(n("sSfs").a)();let g;try{const{data:e}=await h.copyFileWithToken(m,y,i),t={...e,...f?{mimeType:f}:void 0},{id:r,mimeType:o}=t,a=o?Object(n("nRy+").a)(o):"unknown",s=Object(n("pLQX").h)({data:t}),c=b.get(r)||Object(n("/x/G").a)(),l=!Object(n("pLQX").a)(s)&&p?{preview:p}:{};return!Object(n("pLQX").b)(s)&&o&&await Object(n("kz8m").a)(a,o,p)?(c.next({...s,...S(s,a),...l}),g=this.createDownloadFileStream(r,u,d).subscribe({next:e=>c.next({...e,...S(e,a),...!Object(n("pLQX").a)(e)&&l}),error:e=>c.error(e),complete:()=>c.complete()})):Object(n("pLQX").f)(s)||c.next({...s,...!Object(n("pLQX").a)(s)&&l}),b.has(r)||Object(n("sSfs").a)().set(r,c),e}catch(w){
if(g&&g.unsubscribe(),l){const e=b.get(l);e?e.error(w):b.set(s,Object(n("/x/G").a)(w))}throw w}}}var T=n("cjKa");class A{constructor(e){this.baseUrl=e||"/gateway/api"}async fetchToken(e){return(await fetch(`${this.baseUrl}/media/auth/smartedge`,{credentials:"include",headers:{"x-client-id":e}})).json()}isTokenExpired(e){const t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0}}class C{constructor(e,t){this.mediaClientConfig=e,this.featureFlags=t,this.mediaStore=new(n("V/+Q").a)({authProvider:e.authProvider,initialAuth:e.initialAuth},t),this.config=e,this.file=new F(this.mediaStore),this.eventEmitter=new T.EventEmitter2,this.stargate=new A(e.stargateBaseUrl)}getImage(e,t,n,r,i){return this.mediaStore.getImage(e,t,n,r,i)}getImageUrl(e,t){return this.mediaStore.getFileImageURL(e,t)}getImageUrlSync(e,t){return this.mediaStore.getFileImageURLSync(e,t)}async getImageMetadata(e,t){return(await this.mediaStore.getImageMetadata(e,t)).metadata}async mobileUploadPromise(){
if(this.mobileUpload)return this.mobileUpload;const e=await n.e("@atlaskit-internal_media-client-mobile-upload").then(n.bind(null,"nlj8"));return this.mobileUpload=new e.MobileUploadImpl(this.mediaStore),this.mobileUpload}async removeFileFromCollection(e,t,n,r){await this.mediaStore.removeCollectionFile(e,t,n,r)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){return this.eventEmitter.emit(e,t)}}const U=(e,t=window.location.origin)=>{if(URL&&URL.prototype){const n=new URL(e);return!!n.host&&n.origin!==t}return!0};let k;const P=()=>void 0!==k?Promise.resolve(k):new Promise((e=>{const t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=()=>{k=2===t.height,e(k)}})),_=e=>{console.warn("safeUnsubscribe() is deprecated and will be removed in the next media-client major version"),setTimeout((()=>e&&e.unsubscribe()),0)};var N=n("pVnL"),B=n.n(N),M=n("q1tI"),R=n.n(M)
;const L=new Map,z=(e,t)=>{var n;const r=t||"NO_FLAGS";let i=null===(n=L.get(e))||void 0===n?void 0:n.get(r);if(!i){let n=L.get(e);n||(n=new Map,L.set(e,n)),i=new C(e,t),n.set(r,i)}return i},K=(e,t)=>class extends R.a.Component{render(){const{mediaClientConfig:n,...r}=this.props,i=n?z(n,t):(e=>new C({authProvider:()=>Promise.resolve({clientId:"",token:"",baseUrl:""})},e))(t);return R.a.createElement(e,B()({},r,{mediaClient:i}))}},q=n("nRy+").a,D=n("v/+z").c,$=n("v/+z").b,W=n("v/+z").d,X=n("XQou").c,Q=n("XQou").b,G=n("XQou").a,V=n("XQou").f,J=n("XQou").e,Z=n("XQou").d},"/nbe":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("CBQ3");const i={on(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.on(e,t)},off(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.off(e,t)},emit(e,t){if(r.mediaState.eventEmitter)return r.mediaState.eventEmitter.emit(e,t)}}},"/x/G":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("HDK4");function i(e){
const t=new r.ReplaySubject(1);return e instanceof Error?t.error(e):e&&t.next(e),t}},"0bW0":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s}));const r="recents",i=2592e3,o=4096,a=5*n("5d15").a.MB,s=2*n("5d15").a.TB},"10Uv":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){
return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n("1Re5").AsyncAction);t.QueueAction=i},"1KsK":function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},"1Re5":function(t,n,r){"use strict";var i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=r("tSeh"),a=function(t){function n(e,n){t.call(this,e,n),this.scheduler=e,this.pending=!1,this.work=n}return i(n,t),n.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,
this.id=this.id||this.requestAsyncId(r,this.id,t),this},n.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),o.root.setInterval(e.flush.bind(e,this),n)},n.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;o.root.clearInterval(t)},n.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(t,n){var r=!1,i=void 0;try{this.work(t)}catch(e){r=!0,i=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),i},n.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},n}(r("C7Jb").Action);n.AsyncAction=a},
"1Vq4":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("eWKv").a{constructor(e,t){super(e),this.reason=e,this.innerError=t}get attributes(){const{reason:e,innerError:t}=this;return{reason:e,innerError:t}}}function i(e){return e instanceof r}},"1ouX":function(e,t,n){"use strict";var r=n("10Uv"),i=n("9zIo");t.queue=new i.QueueScheduler(r.QueueAction)},"1seS":function(e,t,n){"use strict";var r=Array.prototype.slice,i=n("1KsK"),o=Object.keys,a=o?function(e){return o(e)}:n("sYn3"),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},"29vY":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}))
;const r=e=>(e=>["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(e.toLowerCase())>-1)(e)?"archive":Object(n("G9O0").c)(e)||Object(n("txrb").c)(e)?"image":Object(n("G9O0").b)(e)||Object(n("txrb").b)(e)?"doc":Object(n("G9O0").a)(e)||Object(n("txrb").a)(e)?"audio":Object(n("G9O0").e)(e)||Object(n("txrb").f)(e)?"video":"unknown"
},"2Nju":function(t,n,r){"use strict";var i,o,a,s,c=r("UVaH")()&&"symbol"==typeof Symbol.toStringTag;if(c){i=Function.call.bind(Object.prototype.hasOwnProperty),o=Function.call.bind(RegExp.prototype.exec),a={};var u=function(){throw a};s={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u)}var l=Object.prototype.toString,d=Object.getOwnPropertyDescriptor;t.exports=c?function(t){if(!t||"object"!=typeof t)return!1;var n=d(t,"lastIndex");if(!(n&&i(n,"value")))return!1;try{o(t,s)}catch(e){return e===a}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===l.call(e)}},"31bI":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}},"34Y/":function(t,n,r){"use strict";r.d(n,"b",(function(){return i})),r.d(n,"c",(function(){return o})),
r.d(n,"a",(function(){return s}));const i=e=>void 0===e,o=(e,t)=>Object.fromEntries(Object.entries(e).filter((([e,n])=>!t(n))));function a(e){return[...Array(2*e)].map((()=>Math.floor(16*Math.random()).toString(16))).join("")}function s(t){var n;let r;if(null!==(n=window)&&void 0!==n&&n.crypto)try{r=Array.from(window.crypto.getRandomValues(new Uint8Array(t))).map((e=>e.toString(16).padStart(2,"0"))).join("")}catch(e){r=a(t)}else r=a(t);return r}},"3gwn":function(e,t,n){"use strict";var r=n("Rkh2");t.fromPromise=r.PromiseObservable.create},"45zb":function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,i=Object.prototype.toString,o=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i.call(e)},a=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i.call(e)&&"[object Function]"===i.call(e.callee)},s=function(){return o(arguments)}()
;o.isLegacyArguments=a,e.exports=s?o:a},"4KWY":function(e,t,n){(function(t){for(var n=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i,r=[],i=0;i<256;i++)r[i]=(i+256).toString(16).substr(1);e.exports=function(e,i){var a;if(t.isBuffer(e))a=function(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}(e);else{if("[object String]"!==Object.prototype.toString.call(e))return!1;a=e}if(a=a.toLowerCase(),!n.test(a))return!1;if(void 0===i)i=o(a);else if(o(a)!==i)return!1;switch(i){case 1:case 2:return!0;case 3:case 4:case 5:return-1!==["8","9","a","b"].indexOf(a.charAt(19));default:throw new Error("Invalid version provided.")}};var o=e.exports.version=function(e){return 0|e.charAt(14)}}).call(this,n("HDXh").Buffer)},"4Nn1":function(e,t,n){"use strict";var r=n("yVsE");t.range=r.RangeObservable.create},"4ahN":function(e,t,n){
"use strict";n.d(t,"a",(function(){return r}));const r=async e=>new Promise(((t,n)=>{const r=URL.createObjectURL(e),i=document.createElement("video");i.preload="metadata",i.src=r,i.muted=!0,i.addEventListener("loadedmetadata",(function e(){i.removeEventListener("loadedmetadata",e),t({width:i.videoWidth,height:i.videoHeight}),URL.revokeObjectURL(r)})),i.addEventListener("error",(()=>{n(new Error("failed to load video")),URL.revokeObjectURL(r)}))}))},"5d15":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));const r=e=>["audio","video","image","doc"].indexOf(e)>-1;let i=function(e){return e[e.MB=1048576]="MB",e[e.GB=1073741824]="GB",e[e.TB=1099511627776]="TB",e}({})},"5qIg":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("31bI").a{constructor(e,t,n){super(e),this.reason=e,this.metadata=t,this.innerError=n}get attributes(){
const{reason:e,metadata:{method:t,endpoint:n,mediaRegion:r,mediaEnv:i,attempts:o,clientExhaustedRetries:a,statusCode:s}={},innerError:c}=this;return{reason:e,method:t,endpoint:n,mediaRegion:r,mediaEnv:i,attempts:o,clientExhaustedRetries:a,statusCode:s,innerError:c}}}function i(e){return e instanceof r}},"6LwX":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=async(e,t)=>{switch(e){case"image":{const e=URL.createObjectURL(t);try{return await(e=>new Promise(((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t({width:r.width,height:r.height}),r.onerror=n})))(e)}finally{URL.revokeObjectURL(e)}}case"video":return Object(n("+Nfr").a)(t);default:throw new Error(`Can't extract dimensions from ${e}`)}}},"6ayh":function(t,n,r){"use strict";var i,o=TypeError,a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(e){a=null}var s=function(){throw new o},c=a?function(){try{return s}catch(e){try{return a(arguments,"callee").get}catch(t){return s}}
}():s,u=r("UVaH")(),l=Object.getPrototypeOf||function(e){return e.__proto__},d=i,p=i,f=i,h=i,m="undefined"==typeof Uint8Array?i:l(Uint8Array),y={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":u?l([][Symbol.iterator]()):i,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":p,"%AsyncFunctionPrototype%":i,"%AsyncGenerator%":i,"%AsyncGeneratorFunction%":f,"%AsyncGeneratorPrototype%":i,"%AsyncIteratorPrototype%":h&&u&&Symbol.asyncIterator?h[Symbol.asyncIterator]():i,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?i:DataView,
"%DataViewPrototype%":"undefined"==typeof DataView?i:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?i:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?i:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":i,"%GeneratorFunction%":d,"%GeneratorPrototype%":i,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?i:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,
"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?i:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?i:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?l(l([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%JSONParse%":"object"==typeof JSON?JSON.parse:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?l((new Map)[Symbol.iterator]()):i,"%MapPrototype%":"undefined"==typeof Map?i:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%PromisePrototype%":"undefined"==typeof Promise?i:Promise.prototype,
"%PromiseProto_then%":"undefined"==typeof Promise?i:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?i:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?i:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?i:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?l((new Set)[Symbol.iterator]()):i,"%SetPrototype%":"undefined"==typeof Set?i:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer.prototype,"%String%":String,
"%StringIteratorPrototype%":u?l(""[Symbol.iterator]()):i,"%StringPrototype%":String.prototype,"%Symbol%":u?Symbol:i,"%SymbolPrototype%":u?Symbol.prototype:i,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypedArrayPrototype%":m?m.prototype:i,"%TypeError%":o,"%TypeErrorPrototype%":o.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?i:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?i:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?i:Uint32Array.prototype,"%URIError%":URIError,
"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?i:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?i:WeakSet.prototype},b=r("D3zA").call(Function.call,String.prototype.replace),g=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,v=/\\(\\)?/g,w=function(e){var t=[];return b(e,g,(function(e,n,r,i){t[t.length]=r?b(i,v,"$1"):n||e})),t},x=function(e,t){if(!(e in y))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===y[e]&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return y[e]};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean')
;for(var n=w(e),r=x("%"+(n.length>0?n[0]:"")+"%",t),i=1;i<n.length;i+=1)if(null!=r)if(a&&i+1>=n.length){var s=a(r,n[i]);if(!t&&!(n[i]in r))throw new o("base intrinsic for "+e+" exists, but the property is not available.");r=s?s.get||s.value:r[n[i]]}else r=r[n[i]];return r}},"6fio":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("31bI").a{constructor(e,t){super(e),this.reason=e,this.attempts=t}get attributes(){const{reason:e,attempts:t}=this;return{reason:e,attempts:t}}}function i(e){return e instanceof r}},"6g4H":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>"stretchy-fit"===e?"full-fit":e},"6naO":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("MgBr").a{constructor(e,t){super(e),this.reason=e,this.attempts=t}get attributes(){const{reason:e,attempts:t}=this;return{reason:e,attempts:t}}}function i(e){return e instanceof r}},
"7FAn":function(e,t,n){!function(e,n){!function(e){const t=Symbol("newer"),n=Symbol("older");class r{constructor(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][n]=e[n]),e[n]&&(e[n][t]=e[t]),e[t]=void 0,e[n]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)}assign(e){let r,o=this.limit||Number.MAX_VALUE;this._keymap.clear();let a=e[Symbol.iterator]();for(let s=a.next();!s.done;s=a.next()){let e=new i(s.value[0],s.value[1]);if(this._keymap.set(e.key,e),r?(r[t]=e,e[n]=r):this.oldest=e,r=e,0==o--)throw new Error("overflow")}this.newest=r,this.size=this._keymap.size}get(e){var t=this._keymap.get(e);return t?(this._markEntryAsUsed(t),t.value):void 0}set(e,r){var o=this._keymap.get(e);return o?(o.value=r,this._markEntryAsUsed(o),this):(this._keymap.set(e,o=new i(e,r)),
this.newest?(this.newest[t]=o,o[n]=this.newest):this.oldest=o,this.newest=o,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[n]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let t=this._keymap.get(e);return t?t.value:void 0}has(e){return this._keymap.has(e)}delete(e){var r=this._keymap.get(e);return r?(this._keymap.delete(r.key),r[t]&&r[n]?(r[n][t]=r[t],r[t][n]=r[n]):r[t]?(r[t][n]=void 0,this.oldest=r[t]):r[n]?(r[n][t]=void 0,this.newest=r[n]):this.oldest=this.newest=void 0,this.size--,r.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new a(this.oldest)}values(){return new s(this.oldest)}entries(){return this}[Symbol.iterator](){return new o(this.oldest)}forEach(e,n){"object"!=typeof n&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[t]}
toJSON(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[t];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,(n=n[t])&&(e+=" < ");return e}}function i(e,r){this.key=e,this.value=r,this[t]=void 0,this[n]=void 0}function o(e){this.entry=e}function a(e){this.entry=e}function s(e){this.entry=e}e.LRUMap=r,o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}}}(t)}()},"82c2":function(t,n,r){"use strict"
;var i=r("1seS"),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,s=Array.prototype.concat,c=Object.defineProperty,u=c&&function(){var t={};try{for(var n in c(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(e){return!1}}(),l=function(e,t,n,r){(!(t in e)||function(e){return"function"==typeof e&&"[object Function]"===a.call(e)}(r)&&r())&&(u?c(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},d=function(e,t){var n=arguments.length>2?arguments[2]:{},r=i(t);o&&(r=s.call(r,Object.getOwnPropertySymbols(t)));for(var a=0;a<r.length;a+=1)l(e,r[a],t[r[a]],n[r[a]])};d.supportsDescriptors=!!u,t.exports=d},"9gKE":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("YBdB");var r=n("zgma"),i=n.n(r);const o=(e,t)=>t?`${e}-${t}`:e,a=(e,t)=>{const n=t.reduce(((e,t)=>{const{id:n,collection:r}=t;return e[o(n,r)]=(e=>e.error instanceof Error)(t)?t.error:{...t.details,metadataTraceContext:t.metadataTraceContext},e}),{})
;return e.map((e=>{const{id:t,collectionName:r}=e,i=o(t,r);return n[i]||null}))};function s(e){return new i.a(function(e){return async t=>{const r="__media-single-file-collection__",i=t.reduce(((e,t)=>{const n=t.collectionName||r,i=e[n]||[];return-1===i.indexOf(t.id)&&i.push(t.id),e[n]=i,e}),{}),o=[];return await Promise.all(Object.keys(i).map((async t=>{const a={traceId:Object(n("kp4D").a)(8),spanId:Object(n("kp4D").a)(8)},s=i[t],c=t===r?void 0:t;try{const t=(await e.getItems(s,c,a)).data.items.map((e=>({...e,metadataTraceContext:a})));o.push(...t)}catch(u){s.forEach((e=>{o.push({id:e,collection:c,error:u})}))}}))),a(t,o)}}(e),{maxBatchSize:100})}},"9zIo":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(n("xA5P").AsyncScheduler);t.QueueScheduler=i
},C7Jb:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n("NTzu").Subscription);t.Action=i},CBQ3:function(e,t,n){"use strict";n.r(t),n.d(t,"mediaState",(function(){return i})),n.d(t,"isClientBasedAuth",(function(){return o})),n.d(t,"isAsapBasedAuth",(function(){return a})),n.d(t,"authToOwner",(function(){return s}));var r=n("cjKa");const i={streams:new(n("7FAn").LRUMap)(1e3),stateDeferreds:new Map,eventEmitter:new r.EventEmitter2};function o(e){return!!e.clientId}function a(e){return!!e.asapIssuer}const s=e=>{if(a(e))return e;return{id:e.clientId,baseUrl:e.baseUrl,token:e.token}}},"CG+v":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}))
;var r=n("pVnL"),i=n.n(r),o=n("q1tI"),a=n.n(o);const s=new Map,c=(e,t)=>{var r;const i=t||"NO_FLAGS";let o=null===(r=s.get(e))||void 0===r?void 0:r.get(i);if(!o){let r=s.get(e);r||(r=new Map,s.set(e,r)),o=new(n("jy5L").a)(e,t),r.set(i,o)}return o},u=(e,t)=>class extends a.a.Component{render(){const{mediaClientConfig:r,...o}=this.props,s=r?c(r,t):(e=>{const t={authProvider:()=>Promise.resolve({clientId:"",token:"",baseUrl:""})};return new(n("jy5L").a)(t,e)})(t);return a.a.createElement(e,i()({},o,{mediaClient:s}))}}},COEO:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("IrFB"),i=n("Dbwp");let o=null;class a extends n("31bI").a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:r}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:r}}}const s=async e=>(await(async()=>{if(!o)try{
const{WorkerHasher:e}=await n.e("3d11798d6017aea5e591aea479417a64").then(n.bind(null,"Odz2"));o=new e(3)}catch(e){const{SimpleHasher:t}=await n.e("cb7763cce789451d2548564f9e2034d5").then(n.bind(null,"v2BH"));o=new t}return o})()).hash(e),c=(e,t,n,r)=>async i=>{const o=(await e.probeChunks(p(i),await t,n,r)).data.results;return Object.values(o).map((e=>e.exists))},u=(e,t,n,r)=>async i=>await e.uploadChunk(i.hash,i.blob,await t,i.partNumber,n,r),l=(e,t,n,r)=>{let i=0;return async o=>{await e.appendChunksToUpload(await t,{chunks:p(o),offset:i},n,r),i+=o.length}},d=(e,t,o,d,p)=>{const{content:f,collection:h}=e,{deferredUploadId:m,id:y,occurrenceKey:b}=o;let g=n("n37Y").a;try{f instanceof Blob&&(g=(e=>{if(e>n("n37Y").d)throw new Error("fileSizeExceedsLimit");return e<=5*n("KDwl").a.GB?5*n("KDwl").a.MB:e>5*n("KDwl").a.GB&&e<=50*n("KDwl").a.GB?50*n("KDwl").a.MB:e>50*n("KDwl").a.GB&&e<=.95*n("KDwl").a.TB?100*n("KDwl").a.MB:210*n("KDwl").a.MB})(f.size))}catch(j){
return j instanceof Error&&"fileSizeExceedsLimit"===j.message&&(null==d||d.onUploadFinish(new a(j.message,y,{collectionName:h,occurrenceKey:b}))),{cancel:()=>{null==d||d.onUploadFinish("canceled")}}}const v=Object(n("rcsV").a)(f,{hashingFunction:s,hashingConcurrency:5,probingBatchSize:100,chunkSize:g,uploadingConcurrency:3,uploadingFunction:u(t,m,h,p),probingFunction:c(t,m,h,p),processingBatchSize:1e3,processingFunction:l(t,m,h,p)},{onProgress(e){d&&d.onProgress(e)}}),w=d&&d.onUploadFinish||(()=>{}),x=Object(r.from)(m).pipe(Object(i.concatMap)((n=>v.pipe(Object(i.concatMap)((()=>Object(r.from)((async(e,t,n,r,i)=>{const{collection:o,name:a,mimeType:s}=e,{id:c,occurrenceKey:u}=n;return t.createFileFromUpload({uploadId:r,name:a,mimeType:s},{occurrenceKey:u,collection:o,replaceFileId:c},i)})(e,t,o,n,p)))))))).subscribe({error:e=>w(e),complete:()=>w()});return{cancel:()=>{x.unsubscribe(),w("canceled")}}},p=e=>e.map((e=>e.hash))},CfyG:function(e,t,n){(function(e){
var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("YBdB"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,
t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("yLpj"))},CzTa:function(t,n,r){"use strict";r.d(n,"a",(function(){return c})),r.d(n,"b",(function(){return l})),r.d(n,"c",(function(){return d}));var i=r("q1tI");const o=["confluence","jira"],a={confluence:{newCardExperience:"confluence.frontend.media.cards.new.experience",captions:"confluence.frontend.fabric.editor.media.captions",mediaInline:"confluence.frontend.fabric.editor.media.inline",folderUploads:"confluence.frontend.media.picker.folder.uploads",observedWidth:"",timestampOnVideo:"confluence.frontend.media.timestamp.on.video",memoryCacheLogging:"confluence-frontend-media-card-memory-cache-logging",fetchFileStateAfterUpload:"confluence-frontend-media-client-fetch-file-state-after-upload"},jira:{newCardExperience:"issue.details.media-cards-new-experience",captions:"issue.details.editor.media.captions",mediaInline:"",
folderUploads:"issue.details.media-picker-folder-upload",observedWidth:"",timestampOnVideo:"issue.details.media-cards-timestamp-on-video",memoryCacheLogging:"jira-frontend-media-card-memory-cache-logging",fetchFileStateAfterUpload:"jira-frontend-media-client-fetch-file-state-after-upload"}};function s(t,n,r){const i=(t=>{try{return"undefined"!=typeof window&&window.localStorage?window.localStorage.getItem(t):null}catch(e){}return null})(t);if(null!==i)try{return JSON.parse(i)}catch(e){}return r&&t in r?r[t]:n[t]}const c=()=>{const e=(()=>a)();let t=[];return o.forEach((n=>{t=[...t,...Object.values(e[n])]})),t.filter((e=>""!==e))},u={newCardExperience:!1,captions:!1,mediaInline:!1,folderUploads:!1,observedWidth:!1,timestampOnVideo:!1,memoryCacheLogging:!1,fetchFileStateAfterUpload:!1};function l(e,t){return s(e,u,t)}const d=e=>{const t=Object(i.useRef)();return((e,t)=>{if(!e&&!t)return!0;if(!e||!t)return!1;const n={newCardExperience:e.newCardExperience===t.newCardExperience,
captions:e.captions===t.captions,mediaInline:e.mediaInline===t.mediaInline,folderUploads:e.folderUploads===t.folderUploads,observedWidth:e.observedWidth===t.observedWidth,timestampOnVideo:e.timestampOnVideo===t.timestampOnVideo,memoryCacheLogging:e.memoryCacheLogging===t.memoryCacheLogging,fetchFileStateAfterUpload:e.fetchFileStateAfterUpload===t.fetchFileStateAfterUpload};return Object.values(n).every((e=>e))})(e,t.current)||(t.current=e),t.current}},D3zA:function(e,t,n){"use strict";var r=n("aI7X");e.exports=Function.prototype.bind||r},Dbwp:function(e,t,n){"use strict";var r=n("ciX6");t.concatMap=function(e,t){return r.mergeMap(e,t,1)}},DmXP:function(t,n,r){"use strict";var i=Date.prototype.getDay,o=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(a?function(t){try{return i.call(t),!0}catch(e){return!1}}(t):"[object Date]"===o.call(t))}},ENB1:function(e,t,n){"use strict"
;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("31bI").a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:r}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:r}}}function i(e){return e instanceof r}},EUrF:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s}));const r="recents",i=2592e3,o=4096,a=5*n("+jZZ").a.MB,s=2*n("+jZZ").a.TB},EZMU:function(e,t,n){"use strict";var r=n("82c2").supportsDescriptors,i=n("h0R9"),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,c=Object.getPrototypeOf,u=/a/;e.exports=function(){if(!r||!c)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=i(),t=c(u),n=o(t,"flags")
;return n&&n.get===e||a(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},FpZJ:function(e,t,n){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},G9O0:function(e,t,n){"use strict"
;n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s}));const r=e=>["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(e.toLowerCase())>-1,i=e=>"application/pdf"===e.toLowerCase(),o=e=>["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(e.toLowerCase())>-1,a=e=>["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1,s=e=>i(e)||r(e)||o(e)||a(e)},Gnqm:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("YBdB");var r=n("zgma"),i=n.n(r);const o=(e,t)=>t?`${e}-${t}`:e,a=(e,t)=>{const n=t.reduce(((e,t)=>{const{id:n,collection:r}=t;return e[o(n,r)]=(e=>e.error instanceof Error)(t)?t.error:{...t.details,metadataTraceContext:t.metadataTraceContext},e}),{});return e.map((e=>{const{id:t,collectionName:r}=e,i=o(t,r);return n[i]||null}))};function s(e){
return new i.a(function(e){return async t=>{const r="__media-single-file-collection__",i=t.reduce(((e,t)=>{const n=t.collectionName||r,i=e[n]||[];return-1===i.indexOf(t.id)&&i.push(t.id),e[n]=i,e}),{}),o=[];return await Promise.all(Object.keys(i).map((async t=>{const a={traceId:Object(n("34Y/").a)(8),spanId:Object(n("34Y/").a)(8)},s=i[t],c=t===r?void 0:t;try{const t=(await e.getItems(s,c,a)).data.items.map((e=>({...e,metadataTraceContext:a})));o.push(...t)}catch(u){s.forEach((e=>{o.push({id:e,collection:c,error:u})}))}}))),a(t,o)}}(e),{maxBatchSize:100})}},HDK4:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n("8yf6"),o=n("1ouX"),a=n("NTzu"),s=n("Ndu5"),c=n("VpWK"),u=n("8Zmw"),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),
this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new d(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new u.SubjectSubscription(this,e)),r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject)
;t.ReplaySubject=l;var d=function(){return function(e,t){this.time=e,this.value=t}}()},HSvsD:function(e,t,n){"use strict";async function r(e,t={},r){const{method:i="GET",endpoint:o,auth:a,params:s,headers:c,body:u,clientOptions:l={},traceContext:d}=t,{retryOptions:p}=l,f={method:i,endpoint:o,traceContext:d};return Object(n("rSNj").g)((()=>fetch(Object(n("rSNj").e)(e,{params:s}),{method:i,body:u,headers:Object(n("rSNj").f)(c,a,d),signal:r&&r.signal}).then(Object(n("rSNj").c)(f))),f,p)}n.d(t,"a",(function(){return r}))},IkJI:function(t,n,r){"use strict";r.d(n,"a",(function(){return f})),r.d(n,"b",(function(){return y})),r.d(n,"c",(function(){return b}));var i=r("lSNA"),o=r.n(i);const a=(e,t)=>new Promise(((n,r)=>{setTimeout(r,e,t)})),s=e=>{let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}try{return(e=>decodeURIComponent(atob(e).replace(/(.)/g,(function(e,t){
let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))))(t)}catch(n){return atob(t)}};const c="media-api-region",u="media-api-environment",l={"max-age":r("EUrF").b,allowAnimated:!0,mode:"crop"},d=(e,t=!1)=>({...l,...e,...t?{width:4096,height:4096}:{}}),p={Accept:"application/json","Content-Type":"application/json"};class f{constructor(e,t){o()(this,"resolveAuth",(e=>(async(e,t,n=1e4)=>{let i;try{i=await Promise.race([e(t),a(n,new(r("1Vq4").a)("authProviderTimedOut"))])}catch(o){if(o instanceof r("1Vq4").a)throw o;throw new(r("1Vq4").a)("failedAuthProvider",o instanceof Error?o:void 0)}if(!i)throw new(r("1Vq4").a)("emptyAuth");return i})(this.config.authProvider,e))),o()(this,"resolveInitialAuth",(()=>(e=>{if(!e)throw new(r("1Vq4").a)("missingInitialAuth");return e})(this.config.initialAuth))),this.config=e,this.featureFlags=t}async removeCollectionFile(e,t,n,r){const i={actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:n}}]},o={method:"PUT",
endpoint:"/collection/{collectionName}",authContext:{collectionName:t},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i),traceContext:r};await this.request(`/collection/${t}`,o)}createUpload(e=1,t,n){const i={method:"POST",endpoint:"/upload"},o={...i,authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"},traceContext:n};return this.request("/upload",o).then(Object(r("+i32").b)(i))}async uploadChunk(e,t,n,r,i,o){const a={method:"PUT",endpoint:"/chunk/{etag}",params:{uploadId:n,partNumber:r},authContext:{collectionName:i},body:t,traceContext:o};await this.request(`/chunk/${e}`,a)}probeChunks(e,t,n,i){const o={method:"POST",endpoint:"/chunk/probe"},a={...o,params:{uploadId:t},authContext:{collectionName:n},headers:p,body:JSON.stringify({chunks:e}),traceContext:i};return this.request("/chunk/probe",a).then(Object(r("+i32").b)(o))}createFileFromUpload(e,t={},n){const i={method:"POST",endpoint:"/file/upload"},o={
...i,authContext:{collectionName:t.collection},params:t,headers:p,body:JSON.stringify(e),traceContext:n};return this.request("/file/upload",o).then(Object(r("+i32").b)(i))}getRejectedResponseFromDescriptor(e,t){return{fileId:e.fileId,error:{code:"ExceedMaxFileSizeLimit",title:"The expected file size exceeded the maximum size limit.",href:"https://dt-api-filestore--app.ap-southeast-2.dev.atl-paas.net/api.html#BadRequest",limit:t,size:e.size}}}async touchFiles(t,n={},i){const o={method:"POST",endpoint:"/upload/createWithFiles"},a=await this.resolveAuth({collectionName:n.collection});let c;try{const t=function(t){try{const e=t.split(".")[1];return JSON.parse(s(e))}catch(e){if(e instanceof Error)throw new Error("Invalid token specified: "+e.message);throw e}}(a.token);c=t.fileSizeLimit}catch(f){}const[u,l]=t.descriptors.reduce((([e,t],n)=>{const{size:r,...i}=n;return c&&r&&r>c?[e,[...t,this.getRejectedResponseFromDescriptor(n,c)]]:[[...e,i],t]}),[[],[]]),d={...o,authContext:{
collectionName:n.collection},headers:p,body:JSON.stringify({...t,descriptors:u}),traceContext:i,resolvedAuth:a};return 0===u.length?{data:{created:[],rejected:l}}:this.request("/upload/createWithFiles",d).then(Object(r("+i32").b)(o)).then((e=>(e.data.rejected=l,e)))}getFile(e,t={},n){const i={method:"GET",endpoint:"/file/{fileId}"},o={...i,authContext:{collectionName:t.collection},params:t,traceContext:n};return this.request(`/file/${e}`,o).then(Object(r("+i32").b)(i))}async getFileImageURL(e,t){const{collection:n}=t||{},r=await this.resolveAuth({collectionName:n});return this.createFileImageURL(e,r,t)}getFileImageURLSync(e,t){const n=this.resolveInitialAuth();return this.createFileImageURL(e,n,t)}createFileImageURL(e,t,n){const i={params:d(n),auth:t};return Object(r("+i32").d)(`${t.baseUrl}/file/${e}/image`,i)}async getFileBinaryURL(e,t){const n=await this.resolveAuth({collectionName:t}),i={params:{dl:!0,collection:t,"max-age":r("EUrF").b},auth:n}
;return Object(r("+i32").d)(`${n.baseUrl}/file/${e}/binary`,i)}async getArtifactURL(e,t,n){const i=Object(r("waie").a)(e,t);if(!i)throw new Error(`artifact ${t} not found`);const o=await this.resolveAuth({collectionName:n}),a={params:{collection:n,"max-age":r("EUrF").b},auth:o};return Object(r("+i32").d)(`${o.baseUrl}${i}`,a)}async getImage(e,t,n,i,o){const a={};const s={method:"GET",endpoint:"/file/{fileId}/image"},c={...s,authContext:{collectionName:t&&t.collection},params:d(t,i),headers:a,traceContext:o};return this.request(`/file/${e}/image`,c,n).then(Object(r("+i32").a)(s))}async getItems(e,t,n){const i=e.map((e=>({type:"file",id:e,collection:t}))),o={method:"POST",endpoint:"/items"},a={...o,authContext:{collectionName:t},headers:p,body:JSON.stringify({descriptors:i}),traceContext:n};return this.request("/items",a).then(Object(r("+i32").b)(o))}async getImageMetadata(e,t,n){const i={method:"GET",endpoint:"/file/{fileId}/image/metadata"},o={...i,authContext:{
collectionName:t&&t.collection},params:t,traceContext:n};return this.request(`/file/${e}/image/metadata`,o).then(Object(r("+i32").b)(i))}async appendChunksToUpload(e,t,n,r){const i={method:"PUT",endpoint:"/upload/{uploadId}/chunks",authContext:{collectionName:n},headers:p,body:JSON.stringify(t),traceContext:r};await this.request(`/upload/${e}/chunks`,i)}copyFileWithToken(e,t,n){const i={method:"POST",endpoint:"/file/copy/withToken"},o={...i,authContext:{collectionName:t.collection},params:t,headers:p,body:JSON.stringify(e),traceContext:n};return this.request("/file/copy/withToken",o).then(Object(r("+i32").b)(i))}async request(e,t={method:"GET",endpoint:void 0,authContext:{}},n){const{method:i,endpoint:o,authContext:a,params:s,headers:l,body:d,clientOptions:p,traceContext:f,resolvedAuth:h}=t,y=null!=h?h:await this.resolveAuth(a),b=f?{...f,spanId:(null==f?void 0:f.spanId)||Object(r("34Y/").a)(8)}:void 0,g=await Object(r("TzI1").a)(`${y.baseUrl}${e}`,{method:i,endpoint:o,auth:y,params:s,
headers:l,body:d,clientOptions:p,traceContext:b},n);return m(c,g.headers.get("x-media-region")),m(u,g.headers.get("x-media-env")),g}}const h=e=>window&&window.sessionStorage&&window.sessionStorage.getItem(e)||void 0,m=(e,t)=>{if(!t||!window||!window.sessionStorage)return;window.sessionStorage.getItem(e)!==t&&window.sessionStorage.setItem(e,t)},y=()=>h(u),b=()=>h(c)},Ilbr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e,t=Date.now()){const{artifacts:n,mediaType:r,mimeType:i,name:o,processingStatus:a,representations:s,size:c,createdAt:u}=e;if(!(n||r||i||o||a||s||c||"number"!=typeof u)){if(t-u>432e5)return!0}return!1}},JRZZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("eWKv").a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:r}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:r}}}
function i(e){return e instanceof r}},KAL7:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("lSNA"),i=n.n(r);const o={poll_intervalMs:3e3,poll_maxAttempts:30,poll_backoffFactor:1.25,poll_maxIntervalMs:2e5};class a{constructor(e){i()(this,"poll_intervalMs",0),i()(this,"attempt",1),i()(this,"shouldIterate",!0),i()(this,"timeoutId",0),this.options={...o,...e},this.poll_intervalMs=this.options.poll_intervalMs}async execute(e){const{poll_maxAttempts:t}=this.options;if(0===t)return this.fail(new(n("6naO").a)("pollingMaxAttemptsExceeded",this.attempt));try{if(this.shouldIterate=!1,await e(),!this.shouldIterate)return;if(this.attempt>=t)return this.fail(new(n("6naO").a)("pollingMaxAttemptsExceeded",this.attempt));this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((()=>this.execute(e)),this.poll_intervalMs)}catch(r){this.fail(r)}}fail(e){const{onError:t}=this;this.cancel(),t&&t(e)}getIntervalMsForIteration(e){
let t=this.options.poll_intervalMs;if(1===e)return t;for(let n=2;n<=e;n++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)}next(){this.shouldIterate=!0}cancel(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}},KDwl:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));const r=(e,t)=>{const r=["audio","video","image"];return Object(n("CzTa").b)("newCardExperience",t)?[...r,"doc"].indexOf(e)>-1:r.indexOf(e)>-1};let i;!function(e){e[e.MB=1048576]="MB",e[e.GB=1073741824]="GB",e[e.TB=1099511627776]="TB"}(i||(i={}))},Kgmz:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){this.baseUrl=e||"/gateway/api"}async fetchToken(e){return(await fetch(`${this.baseUrl}/media/auth/smartedge`,{credentials:"include",headers:{"x-client-id":e}})).json()}isTokenExpired(e){const t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0}}},"KiD/":function(e,t,n){
"use strict";n.d(t,"a",(function(){return r}));const r=async(e,t)=>{switch(e){case"image":{const e=URL.createObjectURL(t);try{return await(e=>new Promise(((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t({width:r.width,height:r.height}),r.onerror=n})))(e)}finally{URL.revokeObjectURL(e)}}case"video":return Object(n("YUat").a)(t);default:throw new Error(`Can't extract dimensions from ${e}`)}}},LPPq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("MgBr").a{constructor(e,t){super(e),this.reason=e,this.innerError=t}get attributes(){const{reason:e,innerError:t}=this;return{reason:e,innerError:t}}}function i(e){return e instanceof r}},MgBr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}},MgWD:function(e,t,n){"use strict"
;function r(e){return e instanceof Object&&"attributes"in e&&e.attributes instanceof Object&&"reason"in e.attributes&&e instanceof Error}function i(e){return r(e)?e.attributes.reason:"unknown"}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},NoPf:function(e,t,n){"use strict";var r=n("82c2"),i=n("RLeF"),o=n("hfTo"),a=n("h0R9"),s=n("EZMU"),c=i(o);r(c,{getPolyfill:a,implementation:o,shim:s}),e.exports=c},P7Zh:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("HDK4");function i(e){const t=new r.ReplaySubject(1);return e instanceof Error?t.error(e):e&&t.next(e),t}},QdhA:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n=e[t];if(n&&n.url)return n.url}},QgRX:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("MgBr").a{constructor(e,t,n){super(e),this.reason=e,this.metadata=t,this.innerError=n}get attributes(){
const{reason:e,metadata:{method:t,endpoint:n,mediaRegion:r,mediaEnv:i,attempts:o,clientExhaustedRetries:a,statusCode:s}={},innerError:c}=this;return{reason:e,method:t,endpoint:n,mediaRegion:r,mediaEnv:i,attempts:o,clientExhaustedRetries:a,statusCode:s,innerError:c}}}function i(e){return e instanceof r}},RLeF:function(e,t,n){"use strict";var r=n("D3zA"),i=n("6ayh")("%Function%"),o=i.apply,a=i.call;e.exports=function(){return r.apply(a,arguments)},e.exports.apply=function(){return r.apply(o,arguments)}},TzI1:function(e,t,n){"use strict";async function r(e,t={},r){const{method:i="GET",endpoint:o,auth:a,params:s,headers:c,body:u,clientOptions:l={},traceContext:d}=t,{retryOptions:p}=l,f={method:i,endpoint:o,traceContext:d};return Object(n("+i32").f)((()=>fetch(Object(n("+i32").d)(e,{params:s}),{method:i,body:u,headers:Object(n("+i32").e)(c,a,d),signal:r&&r.signal}).then(Object(n("+i32").c)(f))),f,p)}n.d(t,"a",(function(){return r}))},UBhp:function(e,t,n){"use strict"
;var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n("rfFC");t.bufferCount=function(e,t){return void 0===t&&(t=null),function(n){return n.lift(new o(e,t))}};var o=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?s:a}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),a=function(e){function t(t,n){e.call(this,t),this.bufferSize=n,this.buffer=[]}return r(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(i.Subscriber),s=function(e){function t(t,n,r){e.call(this,t),this.bufferSize=n,this.startBufferEvery=r,
this.buffers=[],this.count=0}return r(t,e),t.prototype._next=function(e){var t=this,n=t.bufferSize,r=t.startBufferEvery,i=t.buffers,o=t.count;this.count++,o%r==0&&i.push([]);for(var a=i.length;a--;){var s=i[a];s.push(e),s.length===n&&(i.splice(a,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var r=t.shift();r.length>0&&n.next(r)}e.prototype._complete.call(this)},t}(i.Subscriber)},UVaH:function(e,t,n){"use strict";(function(t){var r=t.Symbol,i=n("FpZJ");e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}}).call(this,n("yLpj"))},Uyp5:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("lSNA"),i=n.n(r),o=n("NTzu"),a=n("G4OQ"),s=n("NVK1"),c=n("Dbwp"),u=n("xk4V"),l=n.n(u),d=(n("YBdB"),n("CBQ3")),p=n("4KWY"),f=n.n(p);const h=e=>{if(e.content instanceof Blob){const t=e.content.type;return Object(n("29vY").a)(t)
}return"unknown"},m=(e,t)=>Object(n("WxjT").a)(e)||"unknown"!==e.mediaType?{}:{mediaType:t},y=e=>{const t=e.split(",")[1],n=atob(t),r=[];for(let i=0;i<n.length;i+=512){const e=n.slice(i,i+512),t=e.split("").map(((t,n)=>e.charCodeAt(n))),o=new Uint8Array(t);r.push(o)}return new Blob(r,{type:"image/jpeg"})};class b{constructor(e,t){i()(this,"createDownloadFileStream",((e,t,r)=>{const i=Object(n("P7Zh").a)(),o=new(n("onxz").a);return o.onError=e=>i.error(e),o.execute((async()=>{const a=await this.dataloader.load({id:e,collectionName:t});if(!a)throw new(n("ENB1").a)("emptyItems",e,{collectionName:t,occurrenceKey:r});if(Object(n("Ilbr").a)(a))throw new(n("ENB1").a)("zeroVersionFile",e,{collectionName:t,occurrenceKey:r});const s=Object(n("WxjT").i)(e,a);switch(i.next(s),s.status){case"processing":o.next();break;case"processed":i.complete()}})),i})),i()(this,"getUploadingFileStateBase",((e,t)=>{"string"==typeof e.content&&(e.content=y(e.content))
;const{content:r,name:i=""}=e,{id:o,occurrenceKey:a}=t;let s,c=0,u="";r instanceof Blob&&(c=r.size,u=r.type,Object(n("G9O0").d)(r.type)&&(s={value:r,origin:"local"}));return{id:o,occurrenceKey:a,name:i,size:c,mediaType:h(e),mimeType:u,preview:s}})),this.mediaStore=e,this.featureFlags=t,this.dataloader=Object(n("Gnqm").a)(e)}getFileState(e,t={}){const{collectionName:r,occurrenceKey:i}=t;if(!f()(e)){const t=Object(n("P7Zh").a)();return t.error(new(n("ENB1").a)("invalidFileId",e,{collectionName:r,occurrenceKey:i})),Object(n("gWsH").b)(t)}return Object(n("gWsH").b)(Object(n("a+XE").a)().getOrInsert(e,(()=>this.createDownloadFileStream(e,r))))}getCurrentState(e,t){return((e,t=new o.Subscription)=>new Promise(((n,r)=>t.add(e.subscribe({next:e=>{n(e),t.unsubscribe()},error:e=>{r(e),t.unsubscribe()}})))))(this.getFileState(e,t))}getArtifactURL(e,t,n){return this.mediaStore.getArtifactURL(e,t,n)}getFileBinaryURL(e,t){return this.mediaStore.getFileBinaryURL(e,t)}touchFiles(e,t,n){
return this.mediaStore.touchFiles({descriptors:e},{collection:t},n).then((({data:e})=>e))}generateUploadableFileUpfrontIds(e,t){const n=l()(),r=l()(),i={fileId:n,occurrenceKey:r,collection:e};return{id:n,occurrenceKey:r,deferredUploadId:this.touchFiles([i],e,t).then((e=>e.created[0].uploadId))}}async uploadExternal(e,t,r){const i=this.generateUploadableFileUpfrontIds(t,r),{id:o,occurrenceKey:a}=i,s=Object(n("P7Zh").a)(),c=fetch(e).then((e=>e.blob())).catch((()=>{})),u=new Promise((async(e,t)=>{const n=await c;n||t("Could not fetch the blob"),e({value:n,origin:"remote"})})),l=e.split("/").pop()||"",d={status:"processing",name:l,size:0,mediaType:"unknown",mimeType:"",id:o,occurrenceKey:a,preview:u};return s.next(d),Object(n("a+XE").a)().set(o,s),new Promise((async(e,d)=>{const p=await c;if(!p)return d("Could not download remote file");const{type:f,size:h}=p,m={content:p,mimeType:f,collection:t,name:l},y=Object(n("29vY").a)(f);s.next({status:"processing",name:l,size:h,mediaType:y,
mimeType:f,id:o,occurrenceKey:a,preview:u}),this.upload(m,void 0,i,r);e({dimensions:await Object(n("6LwX").a)(y,p),uploadableFileUpfrontIds:i})}))}uploadAwlaysPullFileStates(e,t,r,i){const{collection:a}=e,c=r||this.generateUploadableFileUpfrontIds(a,i),{id:u,occurrenceKey:l}=c,d=this.getUploadingFileStateBase(e,c),p=Object(n("P7Zh").a)();Object(n("a+XE").a)().set(u,p);const f=e=>{p.next({status:"uploading",...d,progress:e})};let h=new o.Subscription;const{cancel:y}=Object(n("COEO").a)(e,this.mediaStore,c,{onUploadFinish:e=>{if(e)return p.error(e);h=this.createDownloadFileStream(u,a,l).pipe(Object(s.map)((e=>({...d,...e,...m(e,d.mediaType)})))).subscribe(p)},onProgress:f},i);return null==t||t.setAbort((()=>{y(),h.unsubscribe()})),setTimeout(f,0,0),Object(n("gWsH").b)(p)}uploadConditionallyPullFileStates(e,t,r,i){"string"==typeof e.content&&(e.content=y(e.content));const{content:u,name:l="",collection:d}=e;r||(r=this.generateUploadableFileUpfrontIds(d,i));const p=r.id,f=r.occurrenceKey
;let b,g="",v=0;const w=h(e),x=Object(n("P7Zh").a)(),j=new o.Subscription;u instanceof Blob&&(v=u.size,g=u.type,Object(n("G9O0").d)(u.type)&&(b={value:u,origin:"local"}));const O={id:p,occurrenceKey:f,name:l,size:v,mediaType:w,mimeType:g,preview:b},S=e=>{x.next({status:"uploading",...O,progress:e})},{cancel:I}=Object(n("COEO").a)(e,this.mediaStore,r,{onUploadFinish:e=>{if(e)return x.error(e);j.add(Object(n("lXNY").b)(w,g,b).pipe(Object(c.concatMap)((e=>e?this.createDownloadFileStream(p,d,f).pipe(Object(s.map)((e=>({...O,...e,...m(e,w)})))):Object(a.of)({status:"processing",representations:{},...O})))).subscribe(x))},onProgress:S},i);return Object(n("a+XE").a)().set(p,x),setTimeout((()=>{S(0)}),0),t&&t.setAbort((()=>{I(),j.unsubscribe()})),Object(n("gWsH").b)(x)}upload(e,t,r,i,o){return Object(n("CzTa").b)("fetchFileStateAfterUpload",o||this.featureFlags)?this.uploadAwlaysPullFileStates(e,t,r,i):this.uploadConditionallyPullFileStates(e,t,r,i)}async downloadBinary(e,t="download",r){
const i=await this.mediaStore.getFileBinaryURL(e,r);Object(n("dSTk").a)(i,{name:t}),n("/nbe").a.emit("media-viewed",{fileId:e,isUserCollection:"recents"===r,viewingLevel:"download"})}async copyFile(e,t,r={},i){const{authProvider:o,collection:a,id:s}=e,{authProvider:c,collection:u,replaceFileId:l,occurrenceKey:p}=t,{preview:f,mimeType:h}=r,y=t.mediaStore||new(n("hbF6").a)({authProvider:c}),b={sourceFile:{id:s,collection:a,owner:Object(d.authToOwner)(await o({collectionName:a}))}},g={collection:u,replaceFileId:l,occurrenceKey:p},v=Object(n("a+XE").a)();let w;try{const{data:e}=await y.copyFileWithToken(b,g,i),t={...e,...h?{mimeType:h}:void 0},{id:r,mimeType:o}=t,a=o?Object(n("29vY").a)(o):"unknown",s=Object(n("WxjT").h)({data:t}),c=v.get(r)||Object(n("P7Zh").a)(),l=!Object(n("WxjT").a)(s)&&f?{preview:f}:{};return!Object(n("WxjT").b)(s)&&o&&await Object(n("lXNY").a)(a,o,f)?(c.next({...s,...m(s,a),...l}),w=this.createDownloadFileStream(r,u,p).subscribe({next:e=>c.next({...e,...m(e,a),
...!Object(n("WxjT").a)(e)&&l}),error:e=>c.error(e),complete:()=>c.complete()})):Object(n("WxjT").f)(s)||c.next({...s,...!Object(n("WxjT").a)(s)&&l}),v.has(r)||Object(n("a+XE").a)().set(r,c),e}catch(x){if(w&&w.unsubscribe(),l){const e=v.get(l);e?e.error(x):v.set(s,Object(n("P7Zh").a)(x))}throw x}}}},"V/+Q":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m}));var r=n("lSNA"),i=n.n(r);const o=(e,t)=>new Promise(((n,r)=>{setTimeout(r,e,t)})),a="media-api-region",s="media-api-environment",c={"max-age":n("0bW0").b,allowAnimated:!0,mode:"crop"},u=(e,t=!1)=>({...c,...e,...t?{width:4096,height:4096}:{}}),l={Accept:"application/json","Content-Type":"application/json"};class d{constructor(e,t){i()(this,"resolveAuth",(e=>(async(e,t,r=1e4)=>{let i;try{i=await Promise.race([e(t),o(r,new(n("LPPq").a)("authProviderTimedOut"))])}catch(a){if(a instanceof n("LPPq").a)throw a
;throw new(n("LPPq").a)("failedAuthProvider",a instanceof Error?a:void 0)}if(!i)throw new(n("LPPq").a)("emptyAuth");return i})(this.config.authProvider,e))),i()(this,"resolveInitialAuth",(()=>(e=>{if(!e)throw new(n("LPPq").a)("missingInitialAuth");return e})(this.config.initialAuth))),this.config=e,this.featureFlags=t}async removeCollectionFile(e,t,n,r){const i={actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:n}}]},o={method:"PUT",endpoint:"/collection/{collectionName}",authContext:{collectionName:t},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i),traceContext:r};await this.request(`/collection/${t}`,o)}createUpload(e=1,t,r){const i={method:"POST",endpoint:"/upload"},o={...i,authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"},traceContext:r};return this.request("/upload",o).then(Object(n("rSNj").b)(i))}async uploadChunk(e,t,n,r,i,o){const a={method:"PUT",endpoint:"/chunk/{etag}",params:{
uploadId:n,partNumber:r},authContext:{collectionName:i},body:t,traceContext:o};await this.request(`/chunk/${e}`,a)}probeChunks(e,t,r,i){const o={method:"POST",endpoint:"/chunk/probe"},a={...o,params:{uploadId:t},authContext:{collectionName:r},headers:l,body:JSON.stringify({chunks:e}),traceContext:i};return this.request("/chunk/probe",a).then(Object(n("rSNj").b)(o))}createFileFromUpload(e,t={},r){const i={method:"POST",endpoint:"/file/upload"},o={...i,authContext:{collectionName:t.collection},params:t,headers:l,body:JSON.stringify(e),traceContext:r};return this.request("/file/upload",o).then(Object(n("rSNj").b)(i))}getRejectedResponseFromDescriptor(e,t){return{fileId:e.fileId,error:{code:"ExceedMaxFileSizeLimit",title:"The expected file size exceeded the maximum size limit.",href:"https://dt-api-filestore--app.ap-southeast-2.dev.atl-paas.net/api.html#BadRequest",limit:t,size:e.size}}}async touchFiles(e,t={},r){const i={method:"POST",endpoint:"/upload/createWithFiles"},o={...i,
authContext:{collectionName:t.collection},headers:l,body:JSON.stringify(e),traceContext:r};return this.request("/upload/createWithFiles",o).then(Object(n("rSNj").b)(i))}getFile(e,t={},r){const i={method:"GET",endpoint:"/file/{fileId}"},o={...i,authContext:{collectionName:t.collection},params:t,traceContext:r};return this.request(`/file/${e}`,o).then(Object(n("rSNj").b)(i))}async getFileImageURL(e,t){const{collection:n}=t||{},r=await this.resolveAuth({collectionName:n});return this.createFileImageURL(e,r,t)}getFileImageURLSync(e,t){const n=this.resolveInitialAuth();return this.createFileImageURL(e,n,t)}createFileImageURL(e,t,r){const i={params:u(r),auth:t};return Object(n("rSNj").e)(`${t.baseUrl}/file/${e}/image`,i)}async getFileBinaryURL(e,t){const r=await this.resolveAuth({collectionName:t}),i={params:{dl:!0,collection:t,"max-age":n("0bW0").b},auth:r};return Object(n("rSNj").e)(`${r.baseUrl}/file/${e}/binary`,i)}async getArtifactURL(e,t,r){const i=Object(n("QdhA").a)(e,t)
;if(!i)throw new Error(`artifact ${t} not found`);const o=await this.resolveAuth({collectionName:r}),a={params:{collection:r,"max-age":n("0bW0").b},auth:o};return Object(n("rSNj").e)(`${o.baseUrl}${i}`,a)}async getImage(e,t,r,i,o){const a={};const s={method:"GET",endpoint:"/file/{fileId}/image"},c={...s,authContext:{collectionName:t&&t.collection},params:u(t,i),headers:a,traceContext:o};return this.request(`/file/${e}/image`,c,r).then(Object(n("rSNj").a)(s))}async getItems(e,t,r){const i=e.map((e=>({type:"file",id:e,collection:t}))),o={method:"POST",endpoint:"/items"},a={...o,authContext:{collectionName:t},headers:l,body:JSON.stringify({descriptors:i}),traceContext:r};return this.request("/items",a).then(Object(n("rSNj").b)(o))}async getImageMetadata(e,t,r){const i={method:"GET",endpoint:"/file/{fileId}/image/metadata"},o={...i,authContext:{collectionName:t&&t.collection},params:t,traceContext:r};return this.request(`/file/${e}/image/metadata`,o).then(Object(n("rSNj").b)(i))}
async appendChunksToUpload(e,t,n,r){const i={method:"PUT",endpoint:"/upload/{uploadId}/chunks",authContext:{collectionName:n},headers:l,body:JSON.stringify(t),traceContext:r};await this.request(`/upload/${e}/chunks`,i)}copyFileWithToken(e,t,r){const i={method:"POST",endpoint:"/file/copy/withToken"},o={...i,authContext:{collectionName:t.collection},params:t,headers:l,body:JSON.stringify(e),traceContext:r};return this.request("/file/copy/withToken",o).then(Object(n("rSNj").b)(i))}async request(e,t={method:"GET",endpoint:void 0,authContext:{}},r){const{method:i,endpoint:o,authContext:c,params:u,headers:l,body:d,clientOptions:p,traceContext:h}=t,m=await this.resolveAuth(c),y=h?{...h,spanId:(null==h?void 0:h.spanId)||Object(n("kp4D").a)(8)}:void 0,b=await Object(n("HSvsD").a)(`${m.baseUrl}${e}`,{method:i,endpoint:o,auth:m,params:u,headers:l,body:d,clientOptions:p,traceContext:y},r);return f(a,b.headers.get("x-media-region")),f(s,b.headers.get("x-media-env")),b}}
const p=e=>window&&window.sessionStorage&&window.sessionStorage.getItem(e)||void 0,f=(e,t)=>{if(!t||!window||!window.sessionStorage)return;window.sessionStorage.getItem(e)!==t&&window.sessionStorage.setItem(e,t)},h=()=>p(s),m=()=>p(a)},Vd1w:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n("pVnL"),i=n.n(r),o=n("q1tI"),a=n.n(o);const s=new Map,c=(e,t)=>{var r;const i=t||"NO_FLAGS";let o=null===(r=s.get(e))||void 0===r?void 0:r.get(i);if(!o){let r=s.get(e);r||(r=new Map,s.set(e,r)),o=new(n("Z5e5").a)(e,t),r.set(i,o)}return o},u=(e,t)=>class extends a.a.Component{render(){const{mediaClientConfig:r,...o}=this.props,s=r?c(r,t):(e=>{const t={authProvider:()=>Promise.resolve({clientId:"",token:"",baseUrl:""})};return new(n("Z5e5").a)(t,e)})(t);return a.a.createElement(e,i()({},o,{mediaClient:s}))}}},WUE1:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),
n.d(t,"a",(function(){return u}));const r="media-blob-url",i=e=>e.indexOf("media-blob-url=true")>-1,o=(e,t)=>{const n=e.get(t);return"string"!=typeof n||isNaN(parseInt(n))?void 0:parseInt(n)},a=(e,t)=>{const n=e.get(t);if(n)return decodeURIComponent(n)},s=e=>{const t=new URL(e).hash.replace("#",""),n=new URLSearchParams(t),r=n.get("id"),i=n.get("contextId");if(r&&i)return{id:r,contextId:i,collection:a(n,"collection"),alt:a(n,"alt"),height:o(n,"height"),width:o(n,"width"),size:o(n,"size"),name:a(n,"name"),mimeType:a(n,"mimeType")}},c=e=>Object.keys(e).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>{const n=e[t];if(null!=n)return`${encodeURIComponent(t)}=${encodeURIComponent(n.toString())}`})).join("&"),u=(e,t)=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;const n={...{[r]:"true"},...t};return`${e}#${c(n)}`}},Wmjd:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("YBdB");var r=n("zgma"),i=n.n(r);const o=(e,t)=>t?`${e}-${t}`:e,a=(e,t)=>{
const n=t.reduce(((e,t)=>{const{id:n,collection:r}=t;return e[o(n,r)]=(e=>e.error instanceof Error)(t)?t.error:{...t.details,metadataTraceContext:t.metadataTraceContext},e}),{});return e.map((e=>{const{id:t,collectionName:r}=e,i=o(t,r);return n[i]||null}))};function s(e){return new i.a(function(e){return async t=>{const r="__media-single-file-collection__",i=t.reduce(((e,t)=>{const n=t.collectionName||r,i=e[n]||[];return-1===i.indexOf(t.id)&&i.push(t.id),e[n]=i,e}),{}),o=[];return await Promise.all(Object.keys(i).map((async t=>{const a={traceId:Object(n("34Y/").a)(8),spanId:Object(n("34Y/").a)(8)},s=i[t],c=t===r?void 0:t;try{const t=(await e.getItems(s,c,a)).data.items.map((e=>({...e,metadataTraceContext:a})));o.push(...t)}catch(u){s.forEach((e=>{o.push({id:e,collection:c,error:u})}))}}))),a(t,o)}}(e),{maxBatchSize:100})}},WxjT:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){
return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d}));const r=e=>"uploading"===e.status,i=e=>"processing"===e.status,o=e=>"processed"===e.status,a=e=>"error"===e.status,s=e=>!a(e)&&!!e.preview,c=e=>["processed","failed-processing","error"].includes(e.status),u=e=>{switch(e.status){case"processing":case"processed":case"failed-processing":return!(!e.representations||!e.representations.image);default:return!1}},l=e=>{const{id:t,name:n,size:r,processingStatus:i,artifacts:o,mediaType:a,mimeType:s,representations:c,createdAt:u,metadataTraceContext:l}=e.data,d={id:t,name:n,size:r,mediaType:a,mimeType:s,artifacts:o,representations:c,createdAt:u,metadataTraceContext:l};switch(i){case"pending":case void 0:return{...d,status:"processing"};case"succeeded":return{...d,status:"processed"};case"failed":return{...d,status:"failed-processing"}}},d=(e,t)=>l({data:{id:e,...t}})
},XQou:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c}))
;const r=e=>["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(e.toLowerCase())>-1,i=e=>["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(e.toLowerCase())>-1,o=e=>["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(e.toLowerCase())>-1,a=e=>["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(e.toLowerCase())>-1,s=e=>["binary/octet-stream"].indexOf(e.toLowerCase())>-1,c=e=>r(e)||i(e)||o(e)||a(e)||s(e)
},Xw9V:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("CBQ3");const i={on(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.on(e,t)},off(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.off(e,t)},emit(e,t){if(r.mediaState.eventEmitter)return r.mediaState.eventEmitter.emit(e,t)}}},YBdB:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},a=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?function(){r=function(e){t.nextTick((function(){l(e)}))}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))}
;e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){r=function(e){setTimeout(l,0,e)}}(),c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[i]=a,r(i),i++},c.clearImmediate=u}function u(e){delete o[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:
t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{u(e),a=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("yLpj"),n("8oxB"))},YUat:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=async e=>new Promise(((t,n)=>{const r=URL.createObjectURL(e),i=document.createElement("video");i.preload="metadata",i.src=r,i.muted=!0,i.addEventListener("loadedmetadata",(function e(){i.removeEventListener("loadedmetadata",e),t({width:i.videoWidth,height:i.videoHeight}),URL.revokeObjectURL(r)})),i.addEventListener("error",(()=>{n(new Error("failed to load video")),URL.revokeObjectURL(r)}))}))},Ywpz:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e,t=Date.now()){const{artifacts:n,mediaType:r,mimeType:i,name:o,processingStatus:a,representations:s,size:c,createdAt:u}=e;if(!(n||r||i||o||a||s||c||"number"!=typeof u)){if(t-u>432e5)return!0}return!1}},Z5e5:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("cjKa")
;class i{constructor(e,t){this.mediaClientConfig=e,this.featureFlags=t,this.mediaStore=new(n("IkJI").a)({authProvider:e.authProvider,initialAuth:e.initialAuth},t),this.config=e,this.file=new(n("itgJ").a)(this.mediaStore,t),this.eventEmitter=new r.EventEmitter2,this.stargate=new(n("hckh").a)(e.stargateBaseUrl)}getImage(e,t,n,r,i){return this.mediaStore.getImage(e,t,n,r,i)}getImageUrl(e,t){return this.mediaStore.getFileImageURL(e,t)}getImageUrlSync(e,t){return this.mediaStore.getFileImageURLSync(e,t)}async getImageMetadata(e,t){return(await this.mediaStore.getImageMetadata(e,t)).metadata}async mobileUploadPromise(){if(this.mobileUpload)return this.mobileUpload;const e=await n.e("@atlaskit-internal_media-client-mobile-upload").then(n.bind(null,"O87f"));return this.mobileUpload=new e.MobileUploadImpl(this.mediaStore),this.mobileUpload}async removeFileFromCollection(e,t,n,r){await this.mediaStore.removeCollectionFile(e,t,n,r)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){
this.eventEmitter.off(e,t)}emit(e,t){return this.eventEmitter.emit(e,t)}}},"a+XE":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class r{constructor(e){this.streams=e}has(e){return!!this.streams.find(e)}set(e,t){this.streams.set(e,t)}get(e){return this.streams.get(e)}getOrInsert(e,t){return this.has(e)||this.set(e,t()),this.get(e)}removeAll(){this.streams.clear()}remove(e){this.streams.delete(e)}get size(){return this.streams.size}}let i;const o=()=>{if(!i){const e=n("CBQ3").mediaState;i=new r(e.streams)}return i}},a7Bu:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("HDK4");function i(e){const t=new r.ReplaySubject(1);return e instanceof Error?t.error(e):e&&t.next(e),t}},aI7X:function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||o.call(t)!==a)throw new TypeError(r+t)
;for(var n,s=i.call(arguments,1),c=function(){if(this instanceof n){var r=t.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,s.concat(i.call(arguments)))},u=Math.max(0,t.length-s.length),l=[],d=0;d<u;d++)l.push("$"+d);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(c),t.prototype){var p=function(){};p.prototype=t.prototype,n.prototype=new p,p.prototype=null}return n}},b6vz:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n=!!window.MSInputMethodContext&&!!document.documentMode,r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i="media-download-iframe",o=document.createElement("a");let a=document.getElementById(i);a||(a=document.createElement("iframe"),a.style.display="none",a.id=i,a.name=i,document.body.appendChild(a)),o.href=e,t&&t.name&&(o.download=t.name),o.target=n||r?"_blank":i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},
bEb1:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("IrFB"),i=n("Dbwp");let o=null;class a extends n("eWKv").a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:r}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:r}}}const s=async e=>(await(async()=>{if(!o)try{const{WorkerHasher:e}=await n.e("fa3fa5eed97248a68bcd5a92bd0dca44").then(n.bind(null,"ft85"));o=new e(3)}catch(e){const{SimpleHasher:t}=await n.e("dfbe2558e281a4e6f4191b7b5e1c93fa").then(n.bind(null,"Jevg"));o=new t}return o})()).hash(e),c=(e,t,n,r)=>async i=>{const o=(await e.probeChunks(p(i),await t,n,r)).data.results;return Object.values(o).map((e=>e.exists))},u=(e,t,n,r)=>async i=>await e.uploadChunk(i.hash,i.blob,await t,i.partNumber,n,r),l=(e,t,n,r)=>{let i=0;return async o=>{await e.appendChunksToUpload(await t,{chunks:p(o),offset:i},n,r),i+=o.length}},d=(e,t,o,d,p)=>{
const{content:f,collection:h}=e,{deferredUploadId:m,id:y,occurrenceKey:b}=o;let g=n("EUrF").a;try{f instanceof Blob&&(g=(e=>{if(e>n("EUrF").d)throw new Error("fileSizeExceedsLimit");return e<=5*n("+jZZ").a.GB?5*n("+jZZ").a.MB:e>5*n("+jZZ").a.GB&&e<=50*n("+jZZ").a.GB?50*n("+jZZ").a.MB:e>50*n("+jZZ").a.GB&&e<=.95*n("+jZZ").a.TB?100*n("+jZZ").a.MB:210*n("+jZZ").a.MB})(f.size))}catch(j){return j instanceof Error&&"fileSizeExceedsLimit"===j.message&&(null==d||d.onUploadFinish(new a(j.message,y,{collectionName:h,occurrenceKey:b}))),{cancel:()=>{null==d||d.onUploadFinish("canceled")}}}const v=Object(n("rcsV").a)(f,{hashingFunction:s,hashingConcurrency:5,probingBatchSize:100,chunkSize:g,uploadingConcurrency:3,uploadingFunction:u(t,m,h,p),probingFunction:c(t,m,h,p),processingBatchSize:1e3,processingFunction:l(t,m,h,p)},{onProgress(e){d&&d.onProgress(e)}
}),w=d&&d.onUploadFinish||(()=>{}),x=Object(r.from)(m).pipe(Object(i.concatMap)((n=>v.pipe(Object(i.concatMap)((()=>Object(r.from)((async(e,t,n,r,i)=>{const{collection:o,name:a,mimeType:s}=e,{id:c,occurrenceKey:u}=n;return t.createFileFromUpload({uploadId:r,name:a,mimeType:s},{occurrenceKey:u,collection:o,replaceFileId:c},i)})(e,t,o,n,p)))))))).subscribe({error:e=>w(e),complete:()=>w()});return{cancel:()=>{x.unsubscribe(),w("canceled")}}},p=e=>e.map((e=>e.hash))},bbcx:function(e,t,n){"use strict";var r=function(e){return e!=e};e.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!r(e)||!r(t))}},c7gP:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n("f66B"),i=n.n(r);const o=e=>"file"===e.mediaItemType,a=e=>"external-image"===e.mediaItemType,s=(e,t)=>o(e)&&o(t)?e.id!==t.id||e.collectionName!==t.collectionName||e.occurrenceKey!==t.occurrenceKey:!i()(e,t)},cckU:function(e,t,n){"use strict"
;async function r(e,t={},r){const{method:i="GET",endpoint:o,auth:a,params:s,headers:c,body:u,clientOptions:l={},traceContext:d}=t,{retryOptions:p}=l,f={method:i,endpoint:o,traceContext:d};return Object(n("ocNj").f)((()=>fetch(Object(n("ocNj").d)(e,{params:s}),{method:i,body:u,headers:Object(n("ocNj").e)(c,a,d),signal:r&&r.signal}).then(Object(n("ocNj").c)(f))),f,p)}n.d(t,"a",(function(){return r}))},cjKa:function(e,t,n){(function(r){var i;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(o){var a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==o?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function u(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,
c.call(this,e)}function d(e,t,n,r){if(!n)return[];var i,o,a,s,c,u,l,p=[],f=t.length,h=t[r],m=t[r+1];if(r===f&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===h||"**"===h||n[h]){if("*"===h){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(p=p.concat(d(e,t,n[a],r+1)));return p}if("**"===h){for(a in(l=r+1===f||r+2===f&&"*"===m)&&n._listeners&&(p=p.concat(d(e,t,n,f))),n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!l&&(p=p.concat(d(e,t,n[a],f))),p=p.concat(d(e,t,n[a],r))):p=a===m?p.concat(d(e,t,n[a],r+2)):p.concat(d(e,t,n[a],r)));return p}p=p.concat(d(e,t,n[h],r+1))}if((s=n["*"])&&d(e,t,s,r+1),c=n["**"])if(r<f)for(a in c._listeners&&d(e,t,c,f),c)"_listeners"!==a&&c.hasOwnProperty(a)&&(a===m?d(e,t,c[a],r+2):a===h?d(e,t,c[a],r+1):((u={})[a]=c[a],d(e,t,{"**":u},r+1)));else c._listeners?d(e,t,c,f):c["*"]&&c["*"]._listeners&&d(e,t,c["*"],f)
;return p}function p(e,t){for(var n=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,a=e.shift();a!==o;){if(i[a]||(i[a]={}),i=i[a],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,u.call(this,i._listeners.length,a))):i._listeners=t,!0;a=e.shift()}return!0}l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==o&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},
l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&i.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r),i},l.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,c,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:
o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,i,o,a=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),i=1;i<c;i++)t[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:
a.push(this._all[r].call(this,e));break;case 2:a.push(this._all[r].call(this,e,arguments[1]));break;case 3:a.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[r].apply(this,t))}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,u,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,c){case 1:a.push(o.call(this));break;case 2:a.push(o.call(this,arguments[1]));break;case 3:a.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];a.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,c){case 1:a.push(o[r].call(this));break;case 2:a.push(o[r].call(this,arguments[1]));break;case 3:a.push(o[r].call(this,arguments[1],arguments[2]));break;default:a.push(o[r].apply(this,t))}
}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",e,t),this.wildcard?(p.call(this,e,t),
this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,u.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();r=d.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var s=0;s<r.length;s++){var c=r[s];if(n=c._listeners,a(n)){for(var u=-1,l=0,p=n.length;l<p;l++)if(n[l]===t||n[l].listener&&n[l].listener===t||n[l]._origin&&n[l]._origin===t){u=l;break}if(u<0)continue;return this.wildcard?c._listeners.splice(u,1):this._events[e].splice(u,1),
0===n.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this.emit("removeListener",e,t))}return function e(t){if(t!==o){var n=Object.keys(t);for(var r in n){var i=n[r],a=t[i];a instanceof Function||"object"!=typeof a||null===a||(Object.keys(a).length>0&&e(t[i]),0===Object.keys(a).length&&delete t[i])}}}(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(n=0,r=(t=this._all).length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||s.call(this),this
;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=d.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(i=function(){return l}.call(t,n,t,e))===o||(e.exports=i)}()}).call(this,n("8oxB"))},csvX:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n("f66B"),i=n.n(r)
;const o=e=>"file"===e.mediaItemType,a=e=>"external-image"===e.mediaItemType,s=(e,t)=>o(e)&&o(t)?e.id!==t.id||e.collectionName!==t.collectionName||e.occurrenceKey!==t.occurrenceKey:!i()(e,t)},dSTk:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n=!!window.MSInputMethodContext&&!!document.documentMode,r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i="media-download-iframe",o=document.createElement("a");let a=document.getElementById(i);a||(a=document.createElement("iframe"),a.style.display="none",a.id=i,a.name=i,document.body.appendChild(a)),o.href=e,t&&t.name&&(o.download=t.name),o.target=n||r?"_blank":i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},dxe4:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>"stretchy-fit"===e?"full-fit":e},eWKv:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e){super(e),this.message=e,
Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}},f66B:function(t,n,r){var i=r("1seS"),o=r("45zb"),a=r("bbcx"),s=r("2Nju"),c=r("NoPf"),u=r("DmXP"),l=Date.prototype.getTime;function d(t,n,r){var h=r||{};return!!(h.strict?a(t,n):t===n)||(!t||!n||"object"!=typeof t&&"object"!=typeof n?h.strict?a(t,n):t==n:function(t,n,r){var a,h;if(typeof t!=typeof n)return!1;if(p(t)||p(n))return!1;if(t.prototype!==n.prototype)return!1;if(o(t)!==o(n))return!1;var m=s(t),y=s(n);if(m!==y)return!1;if(m||y)return t.source===n.source&&c(t)===c(n);if(u(t)&&u(n))return l.call(t)===l.call(n);var b=f(t),g=f(n);if(b!==g)return!1;if(b||g){if(t.length!==n.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==n[a])return!1;return!0}if(typeof t!=typeof n)return!1;try{var v=i(t),w=i(n)}catch(e){return!1}if(v.length!==w.length)return!1;for(v.sort(),w.sort(),a=v.length-1;a>=0;a--)if(v[a]!=w[a])return!1
;for(a=v.length-1;a>=0;a--)if(!d(t[h=v[a]],n[h],r))return!1;return!0}(t,n,h))}function p(e){return null==e}function f(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}t.exports=d},f7Pv:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(){}setAbort(e){this.abortFunction=e}abort(){this.abortFunction&&this.abortFunction()}}},"gU/K":function(e,t,n){"use strict";function r(e){return{subscribe:t=>{const n=e.subscribe(t);return{unsubscribe:()=>{n.unsubscribe()}}}}}function i(e){return r(Object(n("a7Bu").a)(e))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},gWsH:function(e,t,n){"use strict";function r(e){return{subscribe:t=>{const n=e.subscribe(t);return{unsubscribe:()=>{n.unsubscribe()}}}}}function i(e){return r(Object(n("P7Zh").a)(e))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},h0R9:function(e,t,n){
"use strict";var r=n("hfTo"),i=n("82c2").supportsDescriptors,o=Object.getOwnPropertyDescriptor,a=TypeError;e.exports=function(){if(!i)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=o(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof/a/.dotAll)return e.get}return r}},hNFo:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("eWKv").a{constructor(e,t,n){super(e),this.reason=e,this.metadata=t,this.innerError=n}get attributes(){const{reason:e,metadata:{method:t,endpoint:n,mediaRegion:r,mediaEnv:i,attempts:o,clientExhaustedRetries:a,statusCode:s}={},innerError:c}=this;return{reason:e,method:t,endpoint:n,mediaRegion:r,mediaEnv:i,attempts:o,clientExhaustedRetries:a,statusCode:s,innerError:c}}}function i(e){return e instanceof r}},hbF6:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){
return h})),n.d(t,"c",(function(){return m}));var r=n("lSNA"),i=n.n(r);const o=(e,t)=>new Promise(((n,r)=>{setTimeout(r,e,t)})),a="media-api-region",s="media-api-environment",c={"max-age":n("n37Y").b,allowAnimated:!0,mode:"crop"},u=(e,t=!1)=>({...c,...e,...t?{width:4096,height:4096}:{}}),l={Accept:"application/json","Content-Type":"application/json"};class d{constructor(e,t){i()(this,"resolveAuth",(e=>(async(e,t,r=1e4)=>{let i;try{i=await Promise.race([e(t),o(r,new(n("/Jq5").a)("authProviderTimedOut"))])}catch(a){if(a instanceof n("/Jq5").a)throw a;throw new(n("/Jq5").a)("failedAuthProvider",a instanceof Error?a:void 0)}if(!i)throw new(n("/Jq5").a)("emptyAuth");return i})(this.config.authProvider,e))),i()(this,"resolveInitialAuth",(()=>(e=>{if(!e)throw new(n("/Jq5").a)("missingInitialAuth");return e})(this.config.initialAuth))),this.config=e,this.featureFlags=t}async removeCollectionFile(e,t,n,r){const i={actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:n}}]},o={
method:"PUT",endpoint:"/collection/{collectionName}",authContext:{collectionName:t},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i),traceContext:r};await this.request(`/collection/${t}`,o)}createUpload(e=1,t,r){const i={method:"POST",endpoint:"/upload"},o={...i,authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"},traceContext:r};return this.request("/upload",o).then(Object(n("ocNj").b)(i))}async uploadChunk(e,t,n,r,i,o){const a={method:"PUT",endpoint:"/chunk/{etag}",params:{uploadId:n,partNumber:r},authContext:{collectionName:i},body:t,traceContext:o};await this.request(`/chunk/${e}`,a)}probeChunks(e,t,r,i){const o={method:"POST",endpoint:"/chunk/probe"},a={...o,params:{uploadId:t},authContext:{collectionName:r},headers:l,body:JSON.stringify({chunks:e}),traceContext:i};return this.request("/chunk/probe",a).then(Object(n("ocNj").b)(o))}createFileFromUpload(e,t={},r){const i={method:"POST",
endpoint:"/file/upload"},o={...i,authContext:{collectionName:t.collection},params:t,headers:l,body:JSON.stringify(e),traceContext:r};return this.request("/file/upload",o).then(Object(n("ocNj").b)(i))}touchFiles(e,t={},r){const i={method:"POST",endpoint:"/upload/createWithFiles"},o={...i,authContext:{collectionName:t.collection},headers:l,body:JSON.stringify(e),traceContext:r};return this.request("/upload/createWithFiles",o).then(Object(n("ocNj").b)(i))}getFile(e,t={},r){const i={method:"GET",endpoint:"/file/{fileId}"},o={...i,authContext:{collectionName:t.collection},params:t,traceContext:r};return this.request(`/file/${e}`,o).then(Object(n("ocNj").b)(i))}async getFileImageURL(e,t){const{collection:n}=t||{},r=await this.resolveAuth({collectionName:n});return this.createFileImageURL(e,r,t)}getFileImageURLSync(e,t){const n=this.resolveInitialAuth();return this.createFileImageURL(e,n,t)}createFileImageURL(e,t,r){const i={params:u(r),auth:t}
;return Object(n("ocNj").d)(`${t.baseUrl}/file/${e}/image`,i)}async getFileBinaryURL(e,t){const r=await this.resolveAuth({collectionName:t}),i={params:{dl:!0,collection:t,"max-age":n("n37Y").b},auth:r};return Object(n("ocNj").d)(`${r.baseUrl}/file/${e}/binary`,i)}async getArtifactURL(e,t,r){const i=Object(n("k+ZQ").a)(e,t);if(!i)throw new Error(`artifact ${t} not found`);const o=await this.resolveAuth({collectionName:r}),a={params:{collection:r,"max-age":n("n37Y").b},auth:o};return Object(n("ocNj").d)(`${o.baseUrl}${i}`,a)}async getImage(e,t,r,i,o){const a={};const s={method:"GET",endpoint:"/file/{fileId}/image"},c={...s,authContext:{collectionName:t&&t.collection},params:u(t,i),headers:a,traceContext:o};return this.request(`/file/${e}/image`,c,r).then(Object(n("ocNj").a)(s))}async getItems(e,t,r){const i=e.map((e=>({type:"file",id:e,collection:t}))),o={method:"POST",endpoint:"/items"},a={...o,authContext:{collectionName:t},headers:l,body:JSON.stringify({descriptors:i}),traceContext:r}
;return this.request("/items",a).then(Object(n("ocNj").b)(o))}async getImageMetadata(e,t,r){const i={method:"GET",endpoint:"/file/{fileId}/image/metadata"},o={...i,authContext:{collectionName:t&&t.collection},params:t,traceContext:r};return this.request(`/file/${e}/image/metadata`,o).then(Object(n("ocNj").b)(i))}async appendChunksToUpload(e,t,n,r){const i={method:"PUT",endpoint:"/upload/{uploadId}/chunks",authContext:{collectionName:n},headers:l,body:JSON.stringify(t),traceContext:r};await this.request(`/upload/${e}/chunks`,i)}copyFileWithToken(e,t,r){const i={method:"POST",endpoint:"/file/copy/withToken"},o={...i,authContext:{collectionName:t.collection},params:t,headers:l,body:JSON.stringify(e),traceContext:r};return this.request("/file/copy/withToken",o).then(Object(n("ocNj").b)(i))}async request(e,t={method:"GET",endpoint:void 0,authContext:{}},r){const{method:i,endpoint:o,authContext:c,params:u,headers:l,body:d,clientOptions:p,traceContext:h}=t,m=await this.resolveAuth(c),y=h?{
...h,spanId:(null==h?void 0:h.spanId)||Object(n("34Y/").a)(8)}:void 0,b=await Object(n("cckU").a)(`${m.baseUrl}${e}`,{method:i,endpoint:o,auth:m,params:u,headers:l,body:d,clientOptions:p,traceContext:y},r);return f(a,b.headers.get("x-media-region")),f(s,b.headers.get("x-media-env")),b}}const p=e=>window&&window.sessionStorage&&window.sessionStorage.getItem(e)||void 0,f=(e,t)=>{if(!t||!window||!window.sessionStorage)return;window.sessionStorage.getItem(e)!==t&&window.sessionStorage.setItem(e,t)},h=()=>p(s),m=()=>p(a)},hckh:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){this.baseUrl=e||"/gateway/api"}async fetchToken(e){return(await fetch(`${this.baseUrl}/media/auth/smartedge`,{credentials:"include",headers:{"x-client-id":e}})).json()}isTokenExpired(e){const t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0}}},hfTo:function(e,t,n){"use strict";var r=Object,i=TypeError;e.exports=function(){
if(null!=this&&this!==r(this))throw new i("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e}},iob9:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e,t=Date.now()){const{artifacts:n,mediaType:r,mimeType:i,name:o,processingStatus:a,representations:s,size:c,createdAt:u}=e;if(!(n||r||i||o||a||s||c||"number"!=typeof u)){if(t-u>432e5)return!0}return!1}},itgJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("lSNA"),i=n.n(r),o=n("NTzu"),a=n("G4OQ"),s=n("NVK1"),c=n("Dbwp"),u=n("xk4V"),l=n.n(u),d=(n("YBdB"),n("CBQ3")),p=n("4KWY"),f=n.n(p);const h=e=>{if(e.content instanceof Blob){const t=e.content.type;return Object(n("29vY").a)(t)}return"unknown"},m=(e,t)=>Object(n("jFCN").a)(e)||"unknown"!==e.mediaType?{}:{mediaType:t},y=e=>{const t=e.split(",")[1],n=atob(t),r=[]
;for(let i=0;i<n.length;i+=512){const e=n.slice(i,i+512),t=e.split("").map(((t,n)=>e.charCodeAt(n))),o=new Uint8Array(t);r.push(o)}return new Blob(r,{type:"image/jpeg"})};class b{constructor(e,t){i()(this,"createDownloadFileStream",((e,t,r)=>{const i=Object(n("a7Bu").a)(),o=new(n("sQ5b").a);return o.onError=e=>i.error(e),o.execute((async()=>{const a=await this.dataloader.load({id:e,collectionName:t});if(!a)throw new(n("JRZZ").a)("emptyItems",e,{collectionName:t,occurrenceKey:r});if(Object(n("iob9").a)(a))throw new(n("JRZZ").a)("zeroVersionFile",e,{collectionName:t,occurrenceKey:r});const s=Object(n("jFCN").i)(e,a);switch(i.next(s),s.status){case"processing":o.next();break;case"processed":i.complete()}})),i})),i()(this,"getUploadingFileStateBase",((e,t)=>{"string"==typeof e.content&&(e.content=y(e.content));const{content:r,name:i=""}=e,{id:o,occurrenceKey:a}=t;let s,c=0,u="";r instanceof Blob&&(c=r.size,u=r.type,Object(n("G9O0").d)(r.type)&&(s={value:r,origin:"local"}));return{id:o,
occurrenceKey:a,name:i,size:c,mediaType:h(e),mimeType:u,preview:s}})),this.mediaStore=e,this.featureFlags=t,this.dataloader=Object(n("Wmjd").a)(e)}getFileState(e,t={}){const{collectionName:r,occurrenceKey:i}=t;if(!f()(e)){const t=Object(n("a7Bu").a)();return t.error(new(n("JRZZ").a)("invalidFileId",e,{collectionName:r,occurrenceKey:i})),Object(n("gU/K").b)(t)}return Object(n("gU/K").b)(Object(n("pzC7").a)().getOrInsert(e,(()=>this.createDownloadFileStream(e,r))))}getCurrentState(e,t){return((e,t=new o.Subscription)=>new Promise(((n,r)=>t.add(e.subscribe({next:e=>{n(e),t.unsubscribe()},error:e=>{r(e),t.unsubscribe()}})))))(this.getFileState(e,t))}getArtifactURL(e,t,n){return this.mediaStore.getArtifactURL(e,t,n)}getFileBinaryURL(e,t){return this.mediaStore.getFileBinaryURL(e,t)}touchFiles(e,t,n){return this.mediaStore.touchFiles({descriptors:e},{collection:t},n).then((({data:e})=>e))}generateUploadableFileUpfrontIds(e,t){const n=l()(),r=l()(),i={fileId:n,occurrenceKey:r,collection:e}
;return{id:n,occurrenceKey:r,deferredUploadId:this.touchFiles([i],e,t).then((e=>e.created[0].uploadId))}}async uploadExternal(e,t,r){const i=this.generateUploadableFileUpfrontIds(t,r),{id:o,occurrenceKey:a}=i,s=Object(n("a7Bu").a)(),c=fetch(e).then((e=>e.blob())).catch((()=>{})),u=new Promise((async(e,t)=>{const n=await c;n||t("Could not fetch the blob"),e({value:n,origin:"remote"})})),l=e.split("/").pop()||"",d={status:"processing",name:l,size:0,mediaType:"unknown",mimeType:"",id:o,occurrenceKey:a,preview:u};return s.next(d),Object(n("pzC7").a)().set(o,s),new Promise((async(e,d)=>{const p=await c;if(!p)return d("Could not download remote file");const{type:f,size:h}=p,m={content:p,mimeType:f,collection:t,name:l},y=Object(n("29vY").a)(f);s.next({status:"processing",name:l,size:h,mediaType:y,mimeType:f,id:o,occurrenceKey:a,preview:u}),this.upload(m,void 0,i,r);e({dimensions:await Object(n("mz6q").a)(y,p),uploadableFileUpfrontIds:i})}))}uploadAwlaysPullFileStates(e,t,r,i){
const{collection:a}=e,c=r||this.generateUploadableFileUpfrontIds(a,i),{id:u,occurrenceKey:l}=c,d=this.getUploadingFileStateBase(e,c),p=Object(n("a7Bu").a)();Object(n("pzC7").a)().set(u,p);const f=e=>{p.next({status:"uploading",...d,progress:e})};let h=new o.Subscription;const{cancel:y}=Object(n("bEb1").a)(e,this.mediaStore,c,{onUploadFinish:e=>{if(e)return p.error(e);h=this.createDownloadFileStream(u,a,l).pipe(Object(s.map)((e=>({...d,...e,...m(e,d.mediaType)})))).subscribe(p)},onProgress:f},i);return null==t||t.setAbort((()=>{y(),h.unsubscribe()})),setTimeout(f,0,0),Object(n("gU/K").b)(p)}uploadConditionallyPullFileStates(e,t,r,i){"string"==typeof e.content&&(e.content=y(e.content));const{content:u,name:l="",collection:d}=e;r||(r=this.generateUploadableFileUpfrontIds(d,i));const p=r.id,f=r.occurrenceKey;let b,g="",v=0;const w=h(e),x=Object(n("a7Bu").a)(),j=new o.Subscription;u instanceof Blob&&(v=u.size,g=u.type,Object(n("G9O0").d)(u.type)&&(b={value:u,origin:"local"}));const O={id:p,
occurrenceKey:f,name:l,size:v,mediaType:w,mimeType:g,preview:b},S=e=>{x.next({status:"uploading",...O,progress:e})},{cancel:I}=Object(n("bEb1").a)(e,this.mediaStore,r,{onUploadFinish:e=>{if(e)return x.error(e);j.add(Object(n("m1Ph").b)(w,g,b).pipe(Object(c.concatMap)((e=>e?this.createDownloadFileStream(p,d,f).pipe(Object(s.map)((e=>({...O,...e,...m(e,w)})))):Object(a.of)({status:"processing",representations:{},...O})))).subscribe(x))},onProgress:S},i);return Object(n("pzC7").a)().set(p,x),setTimeout((()=>{S(0)}),0),t&&t.setAbort((()=>{I(),j.unsubscribe()})),Object(n("gU/K").b)(x)}upload(e,t,r,i,o){return Object(n("CzTa").b)("fetchFileStateAfterUpload",o||this.featureFlags)?this.uploadAwlaysPullFileStates(e,t,r,i):this.uploadConditionallyPullFileStates(e,t,r,i)}async downloadBinary(e,t="download",r){const i=await this.mediaStore.getFileBinaryURL(e,r);Object(n("dSTk").a)(i,{name:t}),n("sosN").a.emit("media-viewed",{fileId:e,isUserCollection:"recents"===r,viewingLevel:"download"})}
async copyFile(e,t,r={},i){const{authProvider:o,collection:a,id:s}=e,{authProvider:c,collection:u,replaceFileId:l,occurrenceKey:p}=t,{preview:f,mimeType:h}=r,y=t.mediaStore||new(n("IkJI").a)({authProvider:c}),b={sourceFile:{id:s,collection:a,owner:Object(d.authToOwner)(await o({collectionName:a}))}},g={collection:u,replaceFileId:l,occurrenceKey:p},v=Object(n("pzC7").a)();let w;try{const{data:e}=await y.copyFileWithToken(b,g,i),t={...e,...h?{mimeType:h}:void 0},{id:r,mimeType:o}=t,a=o?Object(n("29vY").a)(o):"unknown",s=Object(n("jFCN").h)({data:t}),c=v.get(r)||Object(n("a7Bu").a)(),l=!Object(n("jFCN").a)(s)&&f?{preview:f}:{};return!Object(n("jFCN").b)(s)&&o&&await Object(n("m1Ph").a)(a,o,f)?(c.next({...s,...m(s,a),...l}),w=this.createDownloadFileStream(r,u,p).subscribe({next:e=>c.next({...e,...m(e,a),...!Object(n("jFCN").a)(e)&&l}),error:e=>c.error(e),complete:()=>c.complete()})):Object(n("jFCN").f)(s)||c.next({...s,...!Object(n("jFCN").a)(s)&&l}),
v.has(r)||Object(n("pzC7").a)().set(r,c),e}catch(x){if(w&&w.unsubscribe(),l){const e=v.get(l);e?e.error(x):v.set(s,Object(n("a7Bu").a)(x))}throw x}}}},jFCN:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d}));const r=e=>"uploading"===e.status,i=e=>"processing"===e.status,o=e=>"processed"===e.status,a=e=>"error"===e.status,s=e=>!a(e)&&!!e.preview,c=e=>["processed","failed-processing","error"].includes(e.status),u=e=>{switch(e.status){case"processing":case"processed":case"failed-processing":return!(!e.representations||!e.representations.image);default:return!1}},l=e=>{const{id:t,name:n,size:r,processingStatus:i,artifacts:o,mediaType:a,mimeType:s,representations:c,createdAt:u,metadataTraceContext:l}=e.data,d={
id:t,name:n,size:r,mediaType:a,mimeType:s,artifacts:o,representations:c,createdAt:u,metadataTraceContext:l};switch(i){case"pending":case void 0:return{...d,status:"processing"};case"succeeded":return{...d,status:"processed"};case"failed":return{...d,status:"failed-processing"}}},d=(e,t)=>l({data:{id:e,...t}})},jy5L:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("cjKa");class i{constructor(e,t){this.mediaClientConfig=e,this.featureFlags=t,this.mediaStore=new(n("hbF6").a)({authProvider:e.authProvider,initialAuth:e.initialAuth},t),this.config=e,this.file=new(n("Uyp5").a)(this.mediaStore,t),this.eventEmitter=new r.EventEmitter2,this.stargate=new(n("Kgmz").a)(e.stargateBaseUrl)}getImage(e,t,n,r,i){return this.mediaStore.getImage(e,t,n,r,i)}getImageUrl(e,t){return this.mediaStore.getFileImageURL(e,t)}getImageUrlSync(e,t){return this.mediaStore.getFileImageURLSync(e,t)}async getImageMetadata(e,t){return(await this.mediaStore.getImageMetadata(e,t)).metadata}
async mobileUploadPromise(){if(this.mobileUpload)return this.mobileUpload;const e=await n.e("@atlaskit-internal_media-client-mobile-upload").then(n.bind(null,"X+Xy"));return this.mobileUpload=new e.MobileUploadImpl(this.mediaStore),this.mobileUpload}async removeFileFromCollection(e,t,n,r){await this.mediaStore.removeCollectionFile(e,t,n,r)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){return this.eventEmitter.emit(e,t)}}},"k+ZQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n=e[t];if(n&&n.url)return n.url}},kp4D:function(t,n,r){"use strict";r.d(n,"b",(function(){return i})),r.d(n,"c",(function(){return o})),r.d(n,"a",(function(){return s}));const i=e=>void 0===e,o=(e,t)=>Object.fromEntries(Object.entries(e).filter((([e,n])=>!t(n))));function a(e){return[...Array(2*e)].map((()=>Math.floor(16*Math.random()).toString(16))).join("")}function s(t){var n;let r;if(null!==(n=window)&&void 0!==n&&n.crypto)try{
r=Array.from(window.crypto.getRandomValues(new Uint8Array(t))).map((e=>e.toString(16).padStart(2,"0"))).join("")}catch(e){r=a(t)}else r=a(t);return r}},kz8m:function(t,n,r){"use strict";async function i(t,n,i){if(("doc"===t||!Object(r("v/+z").d)(n)||!i)&&Object(r("XQou").d)(n))return!0;if("video"===t&&i){const t=(await i).value;if(!(t instanceof Blob))return!1;try{const{width:e,height:n}=await Object(r("YUat").a)(t);return!e&&!n}catch(e){return!0}}return!1}r.d(n,"a",(function(){return i}))},lXNY:function(t,n,r){"use strict";r.d(n,"a",(function(){return o})),r.d(n,"b",(function(){return a}));var i=r("IrFB");async function o(t,n,i){if(("doc"===t||!Object(r("G9O0").d)(n)||!i)&&Object(r("txrb").d)(n))return!0;if("video"===t&&i){const t=(await i).value;if(!(t instanceof Blob))return!1;try{const{width:e,height:n}=await Object(r("+Nfr").a)(t);return!e&&!n}catch(e){return!0}}return!1}function a(e,t,n){return Object(i.from)(o(e,t,n))}},m1Ph:function(t,n,r){"use strict";r.d(n,"a",(function(){
return o})),r.d(n,"b",(function(){return a}));var i=r("IrFB");async function o(t,n,i){if(("doc"===t||!Object(r("G9O0").d)(n)||!i)&&Object(r("txrb").d)(n))return!0;if("video"===t&&i){const t=(await i).value;if(!(t instanceof Blob))return!1;try{const{width:e,height:n}=await Object(r("4ahN").a)(t);return!e&&!n}catch(e){return!0}}return!1}function a(e,t,n){return Object(i.from)(o(e,t,n))}},"m4/a":function(e,t,n){"use strict";var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=r},mUd3:function(e,t,n){"use strict";function r(e){return e instanceof Object&&"attributes"in e&&e.attributes instanceof Object&&"reason"in e.attributes&&e instanceof Error}function i(e){return r(e)?e.attributes.reason:"unknown"}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},
mdgQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r extends n("eWKv").a{constructor(e,t){super(e),this.reason=e,this.attempts=t}get attributes(){const{reason:e,attempts:t}=this;return{reason:e,attempts:t}}}function i(e){return e instanceof r}},mz6q:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=async(e,t)=>{switch(e){case"image":{const e=URL.createObjectURL(t);try{return await(e=>new Promise(((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t({width:r.width,height:r.height}),r.onerror=n})))(e)}finally{URL.revokeObjectURL(e)}}case"video":return Object(n("4ahN").a)(t);default:throw new Error(`Can't extract dimensions from ${e}`)}}},n37Y:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s}));const r="recents",i=2592e3,o=4096,a=5*n("KDwl").a.MB,s=2*n("KDwl").a.TB},
"nRy+":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}))
;const r=e=>(e=>["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(e.toLowerCase())>-1)(e)?"archive":Object(n("v/+z").c)(e)||Object(n("XQou").c)(e)?"image":Object(n("v/+z").b)(e)||Object(n("XQou").b)(e)?"doc":Object(n("v/+z").a)(e)||Object(n("XQou").a)(e)?"audio":Object(n("v/+z").e)(e)||Object(n("XQou").f)(e)?"video":"unknown"
},nuDd:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u}));const r="media-blob-url",i=e=>e.indexOf("media-blob-url=true")>-1,o=(e,t)=>{const n=e.get(t);return"string"!=typeof n||isNaN(parseInt(n))?void 0:parseInt(n)},a=(e,t)=>{const n=e.get(t);if(n)return decodeURIComponent(n)},s=e=>{const t=new URL(e).hash.replace("#",""),n=new URLSearchParams(t),r=n.get("id"),i=n.get("contextId");if(r&&i)return{id:r,contextId:i,collection:a(n,"collection"),alt:a(n,"alt"),height:o(n,"height"),width:o(n,"width"),size:o(n,"size"),name:a(n,"name"),mimeType:a(n,"mimeType")}},c=e=>Object.keys(e).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>{const n=e[t];if(null!=n)return`${encodeURIComponent(t)}=${encodeURIComponent(n.toString())}`})).join("&"),u=(e,t)=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;const n={...{[r]:"true"},...t};return`${e}#${c(n)}`}},
ocNj:function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return h})),n.d(t,"k",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return w}));var r=n("CBQ3");function i(e){return e instanceof Error&&"request_cancelled"===e.message||!!e&&"AbortError"===e.name}function o(e){return e instanceof TypeError}function a(e){return!!e&&Object(n("5qIg").b)(e)&&429===e.attributes.statusCode||!!e&&!!e.message&&e.message.includes("429")}const s="x-b3-traceid",c="x-b3-spanid",u=e=>e?{[s]:e.traceId,[c]:e.spanId}:{};function l(e){return e?Object(r.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,Authorization:`Bearer ${e.token}`}:{"X-Issuer":e.asapIssuer,Authorization:`Bearer ${e.token}`}:{}}function d(e,{params:t,auth:n}){
const i=new URL(e),o=n&&function(e){return Object(r.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}(n)||{},a={...t,...o};return Object.entries(a).filter((([e,t])=>null!=t)).forEach((e=>{i.searchParams.append(...e)})),i.searchParams.sort(),i.toString()}function p(e,t,n){if(t||n||e)return{...null!=e?e:{},...l(t),...u(n)}}async function f(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.json()}catch(t){throw new(n("5qIg").a)("serverInvalidBody",{statusCode:e.status},t instanceof Error?t:void 0)}}async function h(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.blob()}catch(t){throw new(n("5qIg").a)("serverInvalidBody",{statusCode:e.status},t instanceof Error?t:void 0)}}function m(){return console.warn("Helper is deprecated and will be remove in the next major version"),Promise.resolve()}function y(e){return async t=>{try{
return await t.json()}catch(r){throw new(n("5qIg").a)("serverInvalidBody",{...e,...x(t),statusCode:t.status},r instanceof Error?r:void 0)}}}function b(e){return async t=>{try{return await t.blob()}catch(r){throw new(n("5qIg").a)("serverInvalidBody",{...e,...x(t),statusCode:t.status},r instanceof Error?r:void 0)}}}const g={startTimeoutInMs:1e3,maxAttempts:5,factor:2};async function v(e,t,r={}){const a={...g,...r},{startTimeoutInMs:s,maxAttempts:c,factor:u}=a;let l,d=0,p=s;const f=async()=>{await function(e){return new Promise((t=>setTimeout(t,e)))}(p),p*=u,d+=1};for(;d<c;)try{return await e()}catch(h){if(l=h,i(h))throw new(n("5qIg").a)("clientAbortedRequest",t,h);if(!o(h)&&!Object(n("5qIg").b)(h)||Object(n("5qIg").b)(h)&&(!h.metadata||!h.metadata.statusCode||h.metadata.statusCode<500))throw h;await f()}if(Object(n("5qIg").b)(l))throw function(e,t){const{reason:r,metadata:i,innerError:o}=e;return new(n("5qIg").a)(r,{...i,...t},o)}(l,{attempts:d,clientExhaustedRetries:!0})
;throw new(n("5qIg").a)("serverUnexpectedError",{...t,attempts:d,clientExhaustedRetries:!0},l)}function w(e){return t=>{if(t.ok||t.status<400)return t;const r=function(e,t){const{status:r}=t,i=function(e){switch(e){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}(r);return new(n("5qIg").a)(i,{...e,...x(t),statusCode:r})}(e,t);throw r}}function x(e){const{headers:t}=e;return{mediaRegion:t.get("x-media-region")||"unknown",mediaEnv:t.get("x-media-env")||"unknown"}}},onxz:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("lSNA"),i=n.n(r);const o={poll_intervalMs:3e3,poll_maxAttempts:30,poll_backoffFactor:1.25,poll_maxIntervalMs:2e5};class a{constructor(e){i()(this,"poll_intervalMs",0),i()(this,"attempt",1),i()(this,"shouldIterate",!0),
i()(this,"timeoutId",0),this.options={...o,...e},this.poll_intervalMs=this.options.poll_intervalMs}async execute(e){const{poll_maxAttempts:t}=this.options;if(0===t)return this.fail(new(n("6fio").a)("pollingMaxAttemptsExceeded",this.attempt));try{if(this.shouldIterate=!1,await e(),!this.shouldIterate)return;if(this.attempt>=t)return this.fail(new(n("6fio").a)("pollingMaxAttemptsExceeded",this.attempt));this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((()=>this.execute(e)),this.poll_intervalMs)}catch(r){this.fail(r)}}fail(e){const{onError:t}=this;this.cancel(),t&&t(e)}getIntervalMsForIteration(e){let t=this.options.poll_intervalMs;if(1===e)return t;for(let n=2;n<=e;n++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)}next(){this.shouldIterate=!0}cancel(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}},p4Xe:function(e,t,n){"use strict";function r(e){
return e instanceof Object&&"attributes"in e&&e.attributes instanceof Object&&"reason"in e.attributes&&e instanceof Error}function i(e){return r(e)?e.attributes.reason:"unknown"}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},pLQX:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d}));const r=e=>"uploading"===e.status,i=e=>"processing"===e.status,o=e=>"processed"===e.status,a=e=>"error"===e.status,s=e=>!a(e)&&!!e.preview,c=e=>["processed","failed-processing","error"].includes(e.status),u=e=>{switch(e.status){case"processing":case"processed":case"failed-processing":return!(!e.representations||!e.representations.image);default:return!1}},l=e=>{
const{id:t,name:n,size:r,processingStatus:i,artifacts:o,mediaType:a,mimeType:s,representations:c,createdAt:u,metadataTraceContext:l}=e.data,d={id:t,name:n,size:r,mediaType:a,mimeType:s,artifacts:o,representations:c,createdAt:u,metadataTraceContext:l};switch(i){case"pending":case void 0:return{...d,status:"processing"};case"succeeded":return{...d,status:"processed"};case"failed":return{...d,status:"failed-processing"}}},d=(e,t)=>l({data:{id:e,...t}})},poNK:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u}));const r="media-blob-url",i=e=>e.indexOf("media-blob-url=true")>-1,o=(e,t)=>{const n=e.get(t);return"string"!=typeof n||isNaN(parseInt(n))?void 0:parseInt(n)},a=(e,t)=>{const n=e.get(t);if(n)return decodeURIComponent(n)},s=e=>{const t=new URL(e).hash.replace("#",""),n=new URLSearchParams(t),r=n.get("id"),i=n.get("contextId");if(r&&i)return{id:r,contextId:i,
collection:a(n,"collection"),alt:a(n,"alt"),height:o(n,"height"),width:o(n,"width"),size:o(n,"size"),name:a(n,"name"),mimeType:a(n,"mimeType")}},c=e=>Object.keys(e).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>{const n=e[t];if(null!=n)return`${encodeURIComponent(t)}=${encodeURIComponent(n.toString())}`})).join("&"),u=(e,t)=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;const n={...{[r]:"true"},...t};return`${e}#${c(n)}`}},pzC7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class r{constructor(e){this.streams=e}has(e){return!!this.streams.find(e)}set(e,t){this.streams.set(e,t)}get(e){return this.streams.get(e)}getOrInsert(e,t){return this.has(e)||this.set(e,t()),this.get(e)}removeAll(){this.streams.clear()}remove(e){this.streams.delete(e)}get size(){return this.streams.size}}let i;const o=()=>{if(!i){const e=n("CBQ3").mediaState;i=new r(e.streams)}return i}},qgBj:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{
constructor(){}setAbort(e){this.abortFunction=e}abort(){this.abortFunction&&this.abortFunction()}}},rSNj:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return a})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"k",(function(){return f})),n.d(t,"j",(function(){return h})),n.d(t,"l",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"d",(function(){return w})),n.d(t,"c",(function(){return x}));var r=n("CBQ3");function i(e){return e instanceof Error&&"request_cancelled"===e.message||!!e&&"AbortError"===e.name}function o(e){return e instanceof TypeError}function a(e){return!!e&&Object(n("QgRX").b)(e)&&429===e.attributes.statusCode||!!e&&!!e.message&&e.message.includes("429")}const s="x-b3-traceid",c="x-b3-spanid",u=e=>e?{[s]:e.traceId,[c]:e.spanId}:{};function l(e){return e?Object(r.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,
Authorization:`Bearer ${e.token}`}:{"X-Issuer":e.asapIssuer,Authorization:`Bearer ${e.token}`}:{}}function d(e,{params:t,auth:n}){const i=new URL(e),o=n&&function(e){return Object(r.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}(n)||{},a={...t,...o};return Object.entries(a).filter((([e,t])=>null!=t)).forEach((e=>{i.searchParams.append(...e)})),i.searchParams.sort(),i.toString()}function p(e,t,n){if(t||n||e)return{...null!=e?e:{},...l(t),...u(n)}}async function f(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.json()}catch(t){throw new(n("QgRX").a)("serverInvalidBody",{statusCode:e.status},t instanceof Error?t:void 0)}}async function h(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.blob()}catch(t){throw new(n("QgRX").a)("serverInvalidBody",{statusCode:e.status},t instanceof Error?t:void 0)}}function m(){
return console.warn("Helper is deprecated and will be remove in the next major version"),Promise.resolve()}function y(e){return async t=>{try{return await t.json()}catch(r){throw new(n("QgRX").a)("serverInvalidBody",{...e,...j(t),statusCode:t.status},r instanceof Error?r:void 0)}}}function b(e){return async t=>{try{return await t.blob()}catch(r){throw new(n("QgRX").a)("serverInvalidBody",{...e,...j(t),statusCode:t.status},r instanceof Error?r:void 0)}}}const g={startTimeoutInMs:1e3,maxAttempts:5,factor:2};async function v(e,t,r={}){const a={...g,...r},{startTimeoutInMs:s,maxAttempts:c,factor:u}=a;let l,d=0,p=s;const f=async()=>{await function(e){return new Promise((t=>setTimeout(t,e)))}(p),p*=u,d+=1};for(;d<c;)try{return await e()}catch(h){if(l=h,i(h))throw new(n("QgRX").a)("clientAbortedRequest",t,h);if(!o(h)&&!Object(n("QgRX").b)(h)||Object(n("QgRX").b)(h)&&(!h.metadata||!h.metadata.statusCode||h.metadata.statusCode<500))throw h;await f()}
if(Object(n("QgRX").b)(l))throw function(e,t){const{reason:r,metadata:i,innerError:o}=e;return new(n("QgRX").a)(r,{...i,...t},o)}(l,{attempts:d,clientExhaustedRetries:!0});throw new(n("QgRX").a)("serverUnexpectedError",{...t,attempts:d,clientExhaustedRetries:!0},l)}function w(e){switch(e){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}function x(e){return t=>{if(t.ok||t.status<400)return t;const r=function(e,t){const{status:r}=t,i=w(r);return new(n("QgRX").a)(i,{...e,...j(t),statusCode:r})}(e,t);throw r}}function j(e){const{headers:t}=e;return{mediaRegion:t.get("x-media-region")||"unknown",mediaEnv:t.get("x-media-env")||"unknown"}}},rcsV:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}))
;var r=n("/LR1"),i=n("Dbwp"),o=n("UBhp"),a=n("3gwn"),s=n("4Nn1"),c=n("NVK1");var u=n("4c1C"),l=n("ciX6");const d=(e,t)=>Object(l.mergeMap)((e=>{const t=new Array,n=()=>{const e=t.findIndex((e=>!e.notifyIfReady()));e>0&&t.splice(0,e)};return r=>new u.Observable((i=>{t.push(((e,t,n)=>{const r={notifyIfReady:()=>!1};return e.then((e=>{r.notifyIfReady=()=>(t.next(e),t.complete(),!0),n(r)}),(e=>{r.notifyIfReady=()=>(t.error(e),!0),n(r)})),r})(e(r),i,n))}))})(e),t);function p(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}const f=e=>function(e){const t=new FileReader;return new Promise(((n,r)=>{t.onload=function(){n(this.result)},t.onerror=r,t.readAsArrayBuffer(e)}))}(e).then((e=>crypto.subtle.digest("SHA-1",e))).then(p);var h=n("IrFB");const m=(e,t,n)=>Object(a.fromPromise)(async function(e){return"string"==typeof e?await fetch(e).then((e=>e.blob())):e}(e)).pipe(Object(i.concatMap)((e=>{
const{chunkSize:a}=t,{onProgress:u}=n,l=Math.ceil(e.size/a),p=((e,{size:t})=>{const n=Math.ceil(e.size/t);return Object(s.range)(0,n).pipe(Object(c.map)((n=>({partNumber:n+1,blob:e.slice(n*t,(n+1)*t)}))))})(e,{size:a}),m=function(e,{batchSize:t,prober:n}){return e.pipe(Object(o.bufferCount)(t),Object(i.concatMap)((e=>n(e).then((t=>e.map(((e,n)=>({...e,exists:t[n]}))))))),Object(i.concatMap)((e=>Object(h.from)(e))))}(((e,{hasher:t,concurrency:n})=>d((e=>t=>e(t.blob).then((e=>({blob:t.blob,hash:`${e}-${t.blob.size}`,partNumber:t.partNumber}))))(t||f),n)(e))(p,{concurrency:t.hashingConcurrency,hasher:t.hashingFunction}),{batchSize:t.probingBatchSize,prober:t.probingFunction});let y=0,b=((e,t)=>e.pipe(d((e=>e.exists?Promise.resolve(e):t.uploader(e).then((()=>e))),t.concurrency)))(m,{concurrency:t.uploadingConcurrency,uploader:t.uploadingFunction});return u&&(b=b.pipe(Object(r.tap)((()=>{y+=1,u(y/l)})))),
((e,t)=>e.pipe(Object(o.bufferCount)(t.batchSize)).pipe(Object(i.concatMap)((e=>t.processor?t.processor(e).then((()=>e)):Promise.resolve(e)))))(b,{batchSize:t.processingBatchSize,processor:t.processingFunction}).pipe(Object(i.concatMap)((e=>Object(h.from)(e))),Object(o.bufferCount)(l))}))),y=(e,t,n)=>m(e,t,n)},sQ5b:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("lSNA"),i=n.n(r);const o={poll_intervalMs:3e3,poll_maxAttempts:30,poll_backoffFactor:1.25,poll_maxIntervalMs:2e5};class a{constructor(e){i()(this,"poll_intervalMs",0),i()(this,"attempt",1),i()(this,"shouldIterate",!0),i()(this,"timeoutId",0),this.options={...o,...e},this.poll_intervalMs=this.options.poll_intervalMs}async execute(e){const{poll_maxAttempts:t}=this.options;if(0===t)return this.fail(new(n("mdgQ").a)("pollingMaxAttemptsExceeded",this.attempt));try{if(this.shouldIterate=!1,await e(),!this.shouldIterate)return
;if(this.attempt>=t)return this.fail(new(n("mdgQ").a)("pollingMaxAttemptsExceeded",this.attempt));this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((()=>this.execute(e)),this.poll_intervalMs)}catch(r){this.fail(r)}}fail(e){const{onError:t}=this;this.cancel(),t&&t(e)}getIntervalMsForIteration(e){let t=this.options.poll_intervalMs;if(1===e)return t;for(let n=2;n<=e;n++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)}next(){this.shouldIterate=!0}cancel(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}},sSfs:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class r{constructor(e){this.streams=e}has(e){return!!this.streams.find(e)}set(e,t){this.streams.set(e,t)}get(e){return this.streams.get(e)}getOrInsert(e,t){return this.has(e)||this.set(e,t()),this.get(e)}removeAll(){this.streams.clear()}remove(e){this.streams.delete(e)}get size(){return this.streams.size}
}let i;const o=()=>{if(!i){const e=n("CBQ3").mediaState;i=new r(e.streams)}return i}},sYn3:function(t,n,r){"use strict";var i;if(!Object.keys){var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=r("1KsK"),c=Object.prototype.propertyIsEnumerable,u=!c.call({toString:null},"toString"),l=c.call((function(){}),"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{
if(!f["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{p(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();i=function(t){var n=null!==t&&"object"==typeof t,r="[object Function]"===a.call(t),i=s(t),c=n&&"[object String]"===a.call(t),f=[];if(!n&&!r&&!i)throw new TypeError("Object.keys called on a non-object");var m=l&&r;if(c&&t.length>0&&!o.call(t,0))for(var y=0;y<t.length;++y)f.push(String(y));if(i&&t.length>0)for(var b=0;b<t.length;++b)f.push(String(b));else for(var g in t)m&&"prototype"===g||!o.call(t,g)||f.push(String(g));if(u)for(var v=function(t){if("undefined"==typeof window||!h)return p(t);try{return p(t)}catch(e){return!1}}(t),w=0;w<d.length;++w)v&&"constructor"===d[w]||!o.call(t,d[w])||f.push(d[w]);return f}}t.exports=i},sosN:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("CBQ3");const i={on(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.on(e,t)},off(e,t){
r.mediaState.eventEmitter&&r.mediaState.eventEmitter.off(e,t)},emit(e,t){if(r.mediaState.eventEmitter)return r.mediaState.eventEmitter.emit(e,t)}}},txrb:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c}))
;const r=e=>["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(e.toLowerCase())>-1,i=e=>["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(e.toLowerCase())>-1,o=e=>["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(e.toLowerCase())>-1,a=e=>["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(e.toLowerCase())>-1,s=e=>["binary/octet-stream"].indexOf(e.toLowerCase())>-1,c=e=>r(e)||i(e)||o(e)||a(e)||s(e)
},"v/+z":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s}));const r=e=>["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(e.toLowerCase())>-1,i=e=>"application/pdf"===e.toLowerCase(),o=e=>["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(e.toLowerCase())>-1,a=e=>["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1,s=e=>i(e)||r(e)||o(e)||a(e)},waie:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n=e[t];if(n&&n.url)return n.url}},wivS:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n("f66B"),i=n.n(r)
;const o=e=>"file"===e.mediaItemType,a=e=>"external-image"===e.mediaItemType,s=(e,t)=>o(e)&&o(t)?e.id!==t.id||e.collectionName!==t.collectionName||e.occurrenceKey!==t.occurrenceKey:!i()(e,t)},xA5P:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(n("m4/a").Scheduler);t.AsyncScheduler=i},"y/pb":function(e,t,n){"use strict";n.r(t),n.d(t,"MediaStore",(function(){return n("IkJI").a})),n.d(t,"MediaStoreError",(function(){return n("1Vq4").a})),n.d(t,"isMediaStoreError",(function(){
return n("1Vq4").b})),n.d(t,"getMediaEnvironment",(function(){return n("IkJI").b})),n.d(t,"getMediaRegion",(function(){return n("IkJI").c})),n.d(t,"UploadController",(function(){return r})),n.d(t,"isPreviewableType",(function(){return n("+jZZ").b})),n.d(t,"getArtifactUrl",(function(){return n("waie").a})),n.d(t,"isMediaClientError",(function(){return n("mUd3").b})),n.d(t,"getMediaClientErrorReason",(function(){return n("mUd3").a})),n.d(t,"isUploadingFileState",(function(){return n("jFCN").g})),n.d(t,"isProcessingFileState",(function(){return n("jFCN").f})),n.d(t,"isProcessedFileState",(function(){return n("jFCN").e})),n.d(t,"isErrorFileState",(function(){return n("jFCN").a})),n.d(t,"isPreviewableFileState",(function(){return n("jFCN").d})),n.d(t,"isFinalFileState",(function(){return n("jFCN").b})),n.d(t,"isImageRepresentationReady",(function(){return n("jFCN").c})),n.d(t,"mapMediaFileToFileState",(function(){return n("jFCN").h})),n.d(t,"mapMediaItemToFileState",(function(){
return n("jFCN").i})),n.d(t,"uploadFile",(function(){return n("bEb1").a})),n.d(t,"request",(function(){return n("TzI1").a})),n.d(t,"RequestError",(function(){return n("hNFo").a})),n.d(t,"isRequestError",(function(){return n("hNFo").b})),n.d(t,"isRateLimitedError",(function(){return n("+i32").h})),n.d(t,"isAbortedRequestError",(function(){return n("+i32").g})),n.d(t,"mapResponseToJson",(function(){return n("+i32").j})),n.d(t,"mapResponseToBlob",(function(){return n("+i32").i})),n.d(t,"mapResponseToVoid",(function(){return n("+i32").k})),n.d(t,"createUrl",(function(){return n("+i32").d})),n.d(t,"PollingFunction",(function(){return n("sQ5b").a})),n.d(t,"isPollingError",(function(){return n("mdgQ").b})),n.d(t,"PollingError",(function(){return n("mdgQ").a})),n.d(t,"imageResizeModeToFileImageMode",(function(){return i})),n.d(t,"FileFetcherImpl",(function(){return n("itgJ").a})),n.d(t,"FileFetcherError",(function(){return n("JRZZ").a})),n.d(t,"isFileFetcherError",(function(){
return n("JRZZ").b})),n.d(t,"MediaClient",(function(){return n("Z5e5").a})),n.d(t,"StargateClient",(function(){return n("hckh").a})),n.d(t,"isImageRemote",(function(){return o})),n.d(t,"checkWebpSupport",(function(){return s})),n.d(t,"getDimensionsFromBlob",(function(){return n("mz6q").a})),n.d(t,"createMediaSubject",(function(){return n("a7Bu").a})),n.d(t,"safeUnsubscribe",(function(){return c})),n.d(t,"isFileIdentifier",(function(){return n("wivS").c})),n.d(t,"isExternalImageIdentifier",(function(){return n("wivS").b})),n.d(t,"isDifferentIdentifier",(function(){return n("wivS").a})),n.d(t,"withMediaClient",(function(){return n("Vd1w").b})),n.d(t,"getMediaClient",(function(){return n("Vd1w").a})),n.d(t,"globalMediaEventEmitter",(function(){return n("sosN").a})),n.d(t,"isMediaBlobUrl",(function(){return n("nuDd").c})),n.d(t,"getAttrsFromUrl",(function(){return n("nuDd").b})),n.d(t,"addFileAttrsToUrl",(function(){return n("nuDd").a})),n.d(t,"objectToQueryString",(function(){
return n("nuDd").d})),n.d(t,"createMediaSubscribable",(function(){return n("gU/K").a})),n.d(t,"fromObservable",(function(){return n("gU/K").b})),n.d(t,"RECENTS_COLLECTION",(function(){return n("EUrF").e})),n.d(t,"MAX_RESOLUTION",(function(){return n("EUrF").c})),n.d(t,"getMediaTypeFromMimeType",(function(){return u})),n.d(t,"isImageMimeTypeSupportedByBrowser",(function(){return l})),n.d(t,"isDocumentMimeTypeSupportedByBrowser",(function(){return d})),n.d(t,"isMimeTypeSupportedByBrowser",(function(){return p})),n.d(t,"isImageMimeTypeSupportedByServer",(function(){return f})),n.d(t,"isDocumentMimeTypeSupportedByServer",(function(){return h})),n.d(t,"isAudioMimeTypeSupportedByServer",(function(){return m})),n.d(t,"isVideoMimeTypeSupportedByServer",(function(){return y})),n.d(t,"isUnknownMimeTypeSupportedByServer",(function(){return b})),n.d(t,"isMimeTypeSupportedByServer",(function(){return g}));class r{constructor(){}setAbort(e){this.abortFunction=e}abort(){
this.abortFunction&&this.abortFunction()}}const i=e=>"stretchy-fit"===e?"full-fit":e,o=(e,t=window.location.origin)=>{if(URL&&URL.prototype){const n=new URL(e);return!!n.host&&n.origin!==t}return!0};let a;const s=()=>void 0!==a?Promise.resolve(a):new Promise((e=>{const t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=()=>{a=2===t.height,e(a)}})),c=e=>{console.warn("safeUnsubscribe() is deprecated and will be removed in the next media-client major version"),setTimeout((()=>e&&e.unsubscribe()),0)},u=n("29vY").a,l=n("G9O0").c,d=n("G9O0").b,p=n("G9O0").d,f=n("txrb").c,h=n("txrb").b,m=n("txrb").a,y=n("txrb").f,b=n("txrb").e,g=n("txrb").d},yVsE:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n,r){e.call(this),
this.start=t,this._count=n,this.scheduler=r}return r(t,e),t.create=function(e,n,r){return void 0===e&&(e=0),void 0===n&&(n=0),new t(e,n,r)},t.dispatch=function(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=0,r=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:n,count:i,start:r,subscriber:e});for(;;){if(n++>=i){e.complete();break}if(e.next(r++),e.closed)break}},t}(n("4c1C").Observable);t.RangeObservable=i},zgma:function(e,t,n){"use strict";(function(t,n){var r,i=function(){function e(e,t){if("function"!=typeof e)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+e+".");this._batchLoadFn=e,this._maxBatchSize=function(e){if(e&&!1===e.batch)return 1;var t=e&&e.maxBatchSize;if(void 0===t)return 1/0
;if("number"!=typeof t||t<1)throw new TypeError("maxBatchSize must be a positive number: "+t);return t}(t),this._batchScheduleFn=function(e){var t=e&&e.batchScheduleFn;if(void 0===t)return o;if("function"!=typeof t)throw new TypeError("batchScheduleFn must be a function: "+t);return t}(t),this._cacheKeyFn=function(e){var t=e&&e.cacheKeyFn;if(void 0===t)return function(e){return e};if("function"!=typeof t)throw new TypeError("cacheKeyFn must be a function: "+t);return t}(t),this._cacheMap=function(e){if(e&&!1===e.cache)return null;var t=e&&e.cacheMap;if(void 0===t)return new Map;if(null!==t){var n=["get","set","delete","clear"].filter((function(e){return t&&"function"!=typeof t[e]}));if(0!==n.length)throw new TypeError("Custom cacheMap missing methods: "+n.join(", "))}return t}(t),this._batch=null}var t=e.prototype;return t.load=function(e){if(null==e)throw new TypeError("The loader.load() function must be called with a value,but got: "+String(e)+".");var t=function(e){var t=e._batch
;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize&&(!t.cacheHits||t.cacheHits.length<e._maxBatchSize))return t;var n={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=n,e._batchScheduleFn((function(){return function(e,t){if(t.hasDispatched=!0,0===t.keys.length)return void s(t);var n=e._batchLoadFn(t.keys);if(!n||"function"!=typeof n.then)return a(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(n)+"."));n.then((function(e){if(!c(e))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(e)+".")
;if(e.length!==t.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(t.keys)+"\n\nValues:\n"+String(e));s(t);for(var n=0;n<t.callbacks.length;n++){var r=e[n];r instanceof Error?t.callbacks[n].reject(r):t.callbacks[n].resolve(r)}})).catch((function(n){return a(e,t,n)}))}(e,n)})),n}(this),n=this._cacheMap,r=this._cacheKeyFn(e);if(n){var i=n.get(r);if(i){var o=t.cacheHits||(t.cacheHits=[]);return new Promise((function(e){o.push((function(){return e(i)}))}))}}t.keys.push(e);var u=new Promise((function(e,n){t.callbacks.push({resolve:e,reject:n})}));return n&&n.set(r,u),u},t.loadMany=function(e){if(!c(e))throw new TypeError("The loader.loadMany() function must be called with Array<key> but got: "+e+".");for(var t=[],n=0;n<e.length;n++)t.push(this.load(e[n]).catch((function(e){return e})))
;return Promise.all(t)},t.clear=function(e){var t=this._cacheMap;if(t){var n=this._cacheKeyFn(e);t.delete(n)}return this},t.clearAll=function(){var e=this._cacheMap;return e&&e.clear(),this},t.prime=function(e,t){var n=this._cacheMap;if(n){var r,i=this._cacheKeyFn(e);if(void 0===n.get(i))t instanceof Error?(r=Promise.reject(t)).catch((function(){})):r=Promise.resolve(t),n.set(i,r)}return this},e}(),o="object"==typeof t&&"function"==typeof t.nextTick?function(e){r||(r=Promise.resolve()),r.then((function(){return t.nextTick(e)}))}:n||setTimeout;function a(e,t,n){s(t);for(var r=0;r<t.keys.length;r++)e.clear(t.keys[r]),t.callbacks[r].reject(n)}function s(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function c(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}e.exports=i}).call(this,n("8oxB"),n("CfyG").setImmediate)}}]);try{
window.__jsEvalStop("@atlaskit-internal_media-client.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/@atlaskit-internal_media-client.283b0f7d515b03323db6.8.js.map